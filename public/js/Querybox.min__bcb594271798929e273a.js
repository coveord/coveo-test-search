webpackJsonpCoveo__temporary([13,18,20],{121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),s=n(84),o=n(1),r=n(0),u=n(11),l=function(){function e(){}return e.hideIfInfiniteScrollEnabled=function(t){e.isInfiniteScrollEnabled(t.searchInterface.element)?(t.disable(),o.$$(t.element).hide(),e.warnIfComponentNotNeeded(t)):(t.enable(),o.$$(t.element).unhide())},e.isInfiniteScrollEnabled=function(t){var n=e.getActiveResultList(t);return!!n&&!!n.options.enableInfiniteScroll},e.scrollToTop=function(t){var n=e.getActiveResultList(t);if(!n)return new u.Logger(this).warn("No active ResultList, scrolling to the top of the Window"),window.scrollTo(0,0);var i=n.options.infiniteScrollContainer;if("function"==typeof i.scrollTo){var s=n.searchInterface.element.getBoundingClientRect().top;i.scrollTo(0,window.pageYOffset+s)}else i.scrollTop=0},e.getActiveResultList=function(t){var n=e.getResultLists(t);return r.find(n,function(e){return!e.disabled})},e.getResultLists=function(t){return o.$$(t).findAll("."+e.cssClass()).map(function(e){return i.Component.get(e,s.ResultList)})},e.cssClass=function(){return i.Component.computeCssClassName(s.ResultList)},e.warnIfComponentNotNeeded=function(t){var n=t.searchInterface.root;e.allResultListsUseInfiniteScroll(n)&&e.notNeededComponentWarning(t)},e.allResultListsUseInfiniteScroll=function(t){return 0===e.getResultLists(t).filter(function(e){return!e.options.enableInfiniteScroll}).length},e.notNeededComponentWarning=function(t){var n=i.Component.computeCssClassNameForType(t.type),s="The "+n+" component is not needed because all "+e.cssClass()+" components have enableInfiniteScroll set to 'true'.\n    For the best performance, remove the "+n+" component from your search page.";new u.Logger(t).warn(s)},e}();t.ResultListUtils=l},128:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),s=n(47);t.notWordStart=" ()[],$@'\"",t.notInWord=" ()[],:",t.Basic={basicExpressions:["Word","DoubleQuoted"],grammars:{DoubleQuoted:'"[NotDoubleQuote]"',NotDoubleQuote:/[^"]*/,SingleQuoted:"'[NotSingleQuote]'",NotSingleQuote:/[^']*/,Number:/-?(0|[1-9]\d*)(\.\d+)?/,Word:function(e,n,o){var r=new RegExp("[^"+t.notWordStart.replace(/(.)/g,"\\$1")+"][^"+t.notInWord.replace(/(.)/g,"\\$1")+"]*"),u=e.match(r);null!=u&&0!=u.index&&(u=null);var l=new i.Result(null!=u?u[0]:null,o,e);return l.isSuccess()&&n&&e.length>l.value.length?new s.EndOfInputResult(l):l}}}},132:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),o=n(10),r=n(90),u=n(5),l=n(16),a=n(13),c=n(7),p=n(1),h=n(9),d=n(6),f=n(8),g=n(2),m=n(469),y=n(208),v=n(170),b=n(470);n(529);var S=function(e){function t(n,i,s){var u=e.call(this,n,t.ID,s)||this;u.element=n,u.options=i,u.bindings=s,n instanceof HTMLInputElement&&u.logger.error("Querybox cannot be used on an HTMLInputElement"),u.options=f.ComponentOptions.initComponentOptions(n,t,i),new b.QueryboxOptionsProcessing(u).postProcess(),p.$$(u.element).toggleClass("coveo-query-syntax-disabled",0==u.options.enableQuerySyntax),u.magicBox=y.createMagicBox(n,new v.Grammar("Query",{Query:"[Term*][Spaces?]",Term:"[Spaces?][Word]",Spaces:/ +/,Word:/[^ ]+/}),{inline:!0});var d=p.$$(u.magicBox.element).find("input");return d&&p.$$(d).setAttribute("aria-label",u.options.placeholder||c.l("Search")),u.bind.onRootElement(o.QueryEvents.buildingQuery,function(e){return u.handleBuildingQuery(e)}),u.bind.onRootElement(r.StandaloneSearchInterfaceEvents.beforeRedirect,function(){return u.updateQueryState()}),u.bind.onQueryState(l.MODEL_EVENTS.CHANGE_ONE,a.QUERY_STATE_ATTRIBUTES.Q,function(e){return u.handleQueryStateChanged(e)}),u.options.enableSearchAsYouType&&(p.$$(u.element).addClass("coveo-search-as-you-type"),u.magicBox.onchange=function(){u.searchAsYouType()}),u.magicBox.onsubmit=function(){u.submit()},u.magicBox.onblur=function(){u.updateQueryState()},u.magicBox.onclear=function(){u.updateQueryState(),u.options.triggerQueryOnClear&&(u.usageAnalytics.logSearchEvent(h.analyticsActionCauseList.searchboxClear,{}),u.triggerNewQuery(!1))},u}return i(t,e),t.prototype.submit=function(){this.magicBox.clearSuggestion(),this.updateQueryState(),this.usageAnalytics.logSearchEvent(h.analyticsActionCauseList.searchboxSubmit,{}),this.triggerNewQuery(!1)},t.prototype.setText=function(e){this.magicBox.setText(e),this.updateQueryState()},t.prototype.clear=function(){this.magicBox.clear()},t.prototype.getText=function(){return this.magicBox.getText()},t.prototype.getResult=function(){return this.magicBox.getResult()},t.prototype.getDisplayedResult=function(){return this.magicBox.getDisplayedResult()},t.prototype.getCursor=function(){return this.magicBox.getCursor()},t.prototype.resultAtCursor=function(e){return this.magicBox.resultAtCursor(e)},t.prototype.handleBuildingQuery=function(e){u.Assert.exists(e),u.Assert.exists(e.queryBuilder),this.updateQueryState(),this.lastQuery=this.magicBox.getText(),new m.QueryboxQueryParameters(this.options).addParameters(e.queryBuilder,this.lastQuery)},t.prototype.triggerNewQuery=function(e){clearTimeout(this.searchAsYouTypeTimeout);var t=this.magicBox.getText();this.lastQuery!=t&&null!=t&&(this.lastQuery=t,this.queryController.executeQuery({searchAsYouType:e,logInActionsHistory:!0}))},t.prototype.updateQueryState=function(){this.queryStateModel.set(a.QueryStateModel.attributesEnum.q,this.magicBox.getText())},t.prototype.handleQueryStateChanged=function(e){u.Assert.exists(e);var t=e.value;t!=this.magicBox.getText()&&this.magicBox.setText(t)},t.prototype.searchAsYouType=function(){var e=this;clearTimeout(this.searchAsYouTypeTimeout),this.searchAsYouTypeTimeout=window.setTimeout(function(){e.usageAnalytics.logSearchAsYouType(h.analyticsActionCauseList.searchboxAsYouType,{}),e.triggerNewQuery(!0)},this.options.searchAsYouTypeDelay)},t.ID="Querybox",t.doExport=function(){s.exportGlobally({Querybox:t,QueryboxQueryParameters:m.QueryboxQueryParameters})},t.options={enableSearchAsYouType:f.ComponentOptions.buildBooleanOption({defaultValue:!1,section:"Advanced Options"}),searchAsYouTypeDelay:f.ComponentOptions.buildNumberOption({defaultValue:50,min:0,section:"Advanced Options"}),enableQuerySyntax:f.ComponentOptions.buildBooleanOption({defaultValue:!1,section:"Advanced Options"}),enableWildcards:f.ComponentOptions.buildBooleanOption({defaultValue:!1,section:"Advanced Options"}),enableQuestionMarks:f.ComponentOptions.buildBooleanOption({defaultValue:!1,depend:"enableWildcards"}),enableLowercaseOperators:f.ComponentOptions.buildBooleanOption({defaultValue:!1,depend:"enableQuerySyntax"}),enablePartialMatch:f.ComponentOptions.buildBooleanOption({defaultValue:!1}),partialMatchKeywords:f.ComponentOptions.buildNumberOption({defaultValue:5,min:1,depend:"enablePartialMatch"}),partialMatchThreshold:f.ComponentOptions.buildStringOption({defaultValue:"50%",depend:"enablePartialMatch"}),triggerQueryOnClear:f.ComponentOptions.buildBooleanOption({defaultValue:!1})},t}(d.Component);t.Querybox=S,g.Initialization.registerAutoCreateComponent(S)},170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(454),s=n(456),o=n(458),r=n(0),u=n(459),l=n(205),a=n(460),c=function(){function e(e,t){void 0===t&&(t={}),this.expressions={},this.start=new i.ExpressionRef(e,null,"start",this),this.addExpressions(t)}return e.prototype.addExpressions=function(e){var t=this;r.each(e,function(e,n){t.addExpression(n,e)})},e.prototype.addExpression=function(t,n){if(t in this.expressions)throw new Error("Grammar already contain the id:"+t);this.expressions[t]=e.buildExpression(n,t,this)},e.prototype.getExpression=function(e){return this.expressions[e]},e.prototype.parse=function(e){return this.start.parse(e,!0)},e.buildExpression=function(e,t,n){if(void 0===e)throw new Error("Invalid Expression: "+e);if(r.isString(e))return this.buildStringExpression(e,t,n);if(r.isArray(e))return new s.ExpressionOptions(r.map(e,function(e,s){return new i.ExpressionRef(e,null,t+"_"+s,n)}),t);if(r.isRegExp(e))return new o.ExpressionRegExp(e,t,n);if(r.isFunction(e))return new u.ExpressionFunction(e,t,n);throw new Error("Invalid Expression: "+e)},e.buildStringExpression=function(t,n,s){var o=e.stringMatch(t,e.spliter),u=r.map(o,function(e,t){if(e[1]){var o=e[1],r=e[3]?Number(e[3]):e[2]||null;return new i.ExpressionRef(o,r,n+"_"+t,s)}return new l.ExpressionConstant(e[4],n+"_"+t)});if(1==u.length){var c=u[0];return c.id=n,c}return new a.ExpressionList(u,n)},e.stringMatch=function(e,t){for(var n=[],i=new RegExp(t.source,"g"),s=i.exec(e);null!==s;)n.push(s),s=i.exec(e);return n},e.spliter=/\[(\w+)(\*|\+|\?|\{([1-9][0-9]*)\})?\]|(.[^\[]*)/,e}();t.Grammar=c},171:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function u(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(r,u)}l((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(s)throw new TypeError("Generator is already executing.");for(;l;)try{if(s=1,o&&(r=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],o=0}finally{s=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var s,o,r,u,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),u=n(25);n(524);var l=n(58),a=n(428),c=n(429),p=n(9);t.resultPerRow=3;var h=function(e){function t(n,i,s){var o=e.call(this,n,t.ID,s)||this;return o.element=n,o.options=i,o.bindings=s,o.currentlyDisplayedResults=[],o.options=u.ComponentOptions.initComponentOptions(n,t,i),o.options.resultTemplate||o.logger.warn("Specifying a result template is required for the 'QuerySuggestPreview' component to work properly. See ","https://docs.coveo.com/340/#providing-query-suggestion-result-previews"),o.bind.onRootElement(u.OmniboxEvents.querySuggestGetFocus,function(e){return o.querySuggestGetFocus(e)}),o.bind.onRootElement(u.OmniboxEvents.querySuggestRendered,function(){o.handleAfterComponentInit()}),o.bind.onRootElement(u.OmniboxEvents.querySuggestLoseFocus,function(){o.handleFocusOut()}),o.omniboxAnalytics=o.searchInterface.getOmniboxAnalytics(),o}return i(t,e),Object.defineProperty(t.prototype,"displayedResults",{get:function(){return this.currentlyDisplayedResults},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"templateToHtml",{get:function(){var e={searchInterface:this.searchInterface,queryStateModel:this.queryStateModel,resultTemplate:this.options.resultTemplate};return new c.TemplateToHtml(e)},enumerable:!0,configurable:!0}),t.prototype.handleFocusOut=function(){clearTimeout(this.timer),this.timer=null,this.previousSuggestionHovered=null,this.currentlyDisplayedResults=[]},t.prototype.updatePreviewContainer=function(e){this.options.previewWidth&&(e.style.width=this.options.previewWidth+"px")},t.prototype.updateWidthOfSuggestionContainer=function(e){this.options.suggestionWidth&&(e.style.width=this.options.suggestionWidth+"px")},t.prototype.handleAfterComponentInit=function(){var e=u.$$(this.root).find(".coveo-magicbox-suggestions");e&&this.updateWidthOfSuggestionContainer(e);var t=u.$$(this.root).find(".coveo-preview-container");t&&this.updatePreviewContainer(t)},t.prototype.buildPreviewHeader=function(e){var t=this.options.headerText+' "'+e+'"',n=u.$$("h4",{className:"coveo-preview-header"},t).el;this.previewContainer.appendChild(n)},t.prototype.buildResultsContainer=function(){return u.$$("div",{className:"coveo-preview-results"}).el},Object.defineProperty(t.prototype,"previewContainer",{get:function(){return u.$$(this.root).find(".coveo-preview-container")},enumerable:!0,configurable:!0}),t.prototype.querySuggestGetFocus=function(e){var t=this;this.previewContainer&&this.previousSuggestionHovered!==e.suggestion&&""!==e.suggestion&&(this.previousSuggestionHovered=e.suggestion,this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.currentlyRenderedSuggestion=e.suggestion,t.logShowQuerySuggestPreview(),t.executeQueryHover()},this.options.executeQueryDelay))},t.prototype.executeQueryHover=function(){return s(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return e=this.queryController.getLastQuery(),e.q=this.currentlyRenderedSuggestion,e.numberOfResults=this.options.numberOfPreviewResults,[4,this.queryController.getEndpoint().search(e)];case 1:return t=n.sent(),(u.$$(this.previewContainer).empty(),this.currentlyDisplayedResults=[],t)?(this.buildPreviewHeader(this.currentlyRenderedSuggestion),this.buildResultsPreview(t),[2]):[2]}})})},t.prototype.buildResultsPreview=function(e){return s(this,void 0,void 0,function(){var t,n;return o(this,function(i){switch(i.label){case 0:return t=this.buildResultsContainer(),this.previewContainer.appendChild(t),this.setupRenderer(t),[4,this.templateToHtml.buildResults(e,"preview",this.currentlyDisplayedResults)];case 1:return n=i.sent(),n.length>0?(this.updateResultElement(n),this.addOnClickListener(n),this.renderer.renderResults(n,!0,function(e){}),[2]):[2]}})})},t.prototype.updateResultElement=function(e){var t=this,n=4===e.length?"50%":"33%";e.forEach(function(e){u.$$(e).addClass("coveo-preview-selectable"),u.$$(e).on("keyboardSelect",function(){t.handleSelect(e)}),t.updateResultPerRow(e,n)})},t.prototype.handleSelect=function(e){e.click();var t=u.$$(e).find("."+u.Component.computeCssClassNameForType("ResultLink"));if(t){var n=u.Component.get(t);n.openLinkAsConfigured()||n.openLink()}},t.prototype.addOnClickListener=function(e){var t=this;e.forEach(function(n){var i=e.indexOf(n);t.bind.on(n,"click",function(e){t.handleOnClick(e,n,i)})})},t.prototype.handleOnClick=function(e,t,n){this.logClickQuerySuggestPreview(n,t)},t.prototype.updateResultPerRow=function(e,t){e.style.flex="0 0 "+t},t.prototype.setupRenderer=function(e){var t={resultsContainer:e},n={options:this.searchInterface.options.originalOptionsObject,bindings:this.bindings},i=function(e){return u.Initialization.automaticallyCreateComponentsInside(e,n)};this.renderer=new a.ResultListTableRenderer(t,i)},t.prototype.logShowQuerySuggestPreview=function(){this.usageAnalytics.logSearchEvent(p.analyticsActionCauseList.showQuerySuggestPreview,this.omniboxAnalytics.buildCustomDataForPartialQueries())},t.prototype.logClickQuerySuggestPreview=function(e,t){this.usageAnalytics.logCustomEvent(p.analyticsActionCauseList.clickQuerySuggestPreview,{suggestion:this.currentlyRenderedSuggestion,displayedRank:e},t)},t.ID="QuerySuggestPreview",t.doExport=function(){r.exportGlobally({QuerySuggestPreview:t})},t.options={resultTemplate:l.TemplateComponentOptions.buildTemplateOption(),numberOfPreviewResults:u.ComponentOptions.buildNumberOption({defaultValue:3,min:1,max:6}),previewWidth:u.ComponentOptions.buildNumberOption(),suggestionWidth:u.ComponentOptions.buildNumberOption({defaultValue:250,min:0}),headerText:u.ComponentOptions.buildLocalizedStringOption({defaultValue:"QuerySuggestPreview"}),executeQueryDelay:u.ComponentOptions.buildNumberOption({defaultValue:200})},t}(u.Component);t.QuerySuggestPreview=h,u.Initialization.registerAutoCreateComponent(h)},198:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),s=n(0),o=function(){function e(e,t){this.resultListOptions=e,this.autoCreateComponentsFn=t}return e.prototype.renderResults=function(e,t,n){var o=this;return void 0===t&&(t=!1),Promise.all([this.getStartFragment(e,t),this.getEndFragment(e,t)]).then(function(t){var r=t[0],u=t[1],l=document.createDocumentFragment();r&&l.appendChild(r),s.each(e,function(e){l.appendChild(e),n(i.Component.getResult(e),e)}),u&&l.appendChild(u),o.resultListOptions.resultsContainer.appendChild(l)})},e.prototype.getStartFragment=function(e,t){return Promise.resolve(document.createDocumentFragment())},e.prototype.getEndFragment=function(e,t){return Promise.resolve(document.createDocumentFragment())},e}();t.ResultListRenderer=o},204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionEndOfInput={id:"end of input",parse:null}},205:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),s=n(47),o=function(){function e(e,t){this.value=e,this.id=t}return e.prototype.parse=function(e,t){var n=0==e.indexOf(this.value),o=new i.Result(n?this.value:null,this,e);return n&&t&&e.length>this.value.length?new s.EndOfInputResult(o):o},e.prototype.toString=function(){return this.value},e}();t.ExpressionConstant=o},206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(128),s=n(462);t.Field={basicExpressions:["FieldSimpleQuery","FieldQuery","Field"],grammars:{FieldQuery:"[Field][OptionalSpaces][FieldQueryOperation]",FieldQueryOperation:["FieldQueryValue","FieldQueryNumeric"],FieldQueryValue:"[FieldOperator][OptionalSpaces][FieldValue]",FieldQueryNumeric:"[FieldOperatorNumeric][OptionalSpaces][FieldValueNumeric]",FieldSimpleQuery:"[FieldName]:[OptionalSpaces][FieldValue]",Field:"@[FieldName]",FieldName:/[a-zA-Z][a-zA-Z0-9\.\_]*/,FieldOperator:/==|=|<>/,FieldOperatorNumeric:/<=|>=|<|>/,FieldValue:["DateRange","NumberRange","DateRelative","Date","Number","FieldValueList","FieldValueString"],FieldValueNumeric:["DateRelative","Date","Number"],FieldValueString:["DoubleQuoted","FieldValueNotQuoted"],FieldValueList:"([FieldValueString][FieldValueStringList*])",FieldValueStringList:"[FieldValueSeparator][FieldValueString]",FieldValueSeparator:/ *, */,FieldValueNotQuoted:/[^ \(\),]+/,NumberRange:"[Number][Spaces?]..[Spaces?][Number]"},include:[s.Date,i.Basic]}},208:function(e,t,n){"use strict";function i(e,t,n){return new h(e,t,n)}function s(e){return"requestAnimationFrame"in window?window.requestAnimationFrame(e):setTimeout(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(25),u=n(1),l=n(526),a=n(465),c=n(528),p=n(466),h=function(){function e(e,t,n){void 0===n&&(n={});var i=this;this.element=e,this.grammar=t,this.options=n,this.lastSuggestions=[],o.isUndefined(this.options.inline)&&(this.options.inline=!1),u.$$(e).addClass("magic-box"),this.options.inline&&u.$$(e).addClass("magic-box-inline"),this.result=this.grammar.parse(""),this.displayedResult=this.result.clean();var s=u.$$(e).find(".magic-box-input");s||(s=document.createElement("div"),s.className="magic-box-input",e.appendChild(s)),this.inputManager=new a.InputManager(s,function(e,t){t?(i.setText(e),i.onselect&&i.onselect(i.getFirstSuggestionText())):(i.setText(e),i.showSuggestion(),i.onchange&&i.onchange())},this),this.inputManager.ontabpress=function(){i.ontabpress&&i.ontabpress()};var r=this.inputManager.getValue();r&&(this.displayedResult.input=r),this.inputManager.setResult(this.displayedResult);var l=document.createElement("div");l.className="magic-box-suggestions",this.element.appendChild(l),this.suggestionsManager=new p.SuggestionsManager(l,this.element,this.inputManager,{selectableClass:this.options.selectableSuggestionClass,selectedClass:this.options.selectedSuggestionClass,timeout:this.options.suggestionTimeout}),this.magicBoxClear=new c.MagicBoxClear(this),this.setupHandler()}return e.prototype.getResult=function(){return this.result},e.prototype.getDisplayedResult=function(){return this.displayedResult},e.prototype.setText=function(e){u.$$(this.element).toggleClass("magic-box-notEmpty",e.length>0),this.magicBoxClear.toggleTabindexAndAriaHidden(e.length>0),this.result=this.grammar.parse(e),this.displayedResult=this.result.clean(),this.inputManager.setResult(this.displayedResult)},e.prototype.setCursor=function(e){this.inputManager.setCursor(e)},e.prototype.getCursor=function(){return this.inputManager.getCursor()},e.prototype.resultAtCursor=function(e){return this.displayedResult.resultAt(this.getCursor(),e)},e.prototype.setupHandler=function(){var e=this;this.inputManager.onblur=function(){u.$$(e.element).removeClass("magic-box-hasFocus"),e.onblur&&e.onblur(),e.options.inline||e.clearSuggestion()},this.inputManager.onfocus=function(){u.$$(e.element).addClass("magic-box-hasFocus"),e.showSuggestion(),e.onfocus&&e.onfocus()},this.inputManager.onkeydown=function(t){if(t===r.KEYBOARD.UP_ARROW||t===r.KEYBOARD.DOWN_ARROW)return!1;if(t===r.KEYBOARD.ENTER){return null==e.suggestionsManager.selectAndReturnKeyboardFocusedElement()&&e.onsubmit&&e.onsubmit(),!1}return t===r.KEYBOARD.ESCAPE&&(e.clearSuggestion(),e.blur()),!0},this.inputManager.onchangecursor=function(){e.showSuggestion()},this.inputManager.onkeyup=function(t){switch(e.onmove&&e.onmove(),t){case r.KEYBOARD.UP_ARROW:e.suggestionsManager.moveUp();break;case r.KEYBOARD.DOWN_ARROW:e.suggestionsManager.moveDown();break;default:return!0}return e.suggestionsManager.selectedSuggestion&&e.focusOnSuggestion(e.suggestionsManager.selectedSuggestion),e.onchange&&e.onchange(),!1}},e.prototype.showSuggestion=function(){var e=this;this.suggestionsManager.mergeSuggestions(null!=this.getSuggestions?this.getSuggestions():[],function(t){e.updateSuggestion(t)})},e.prototype.updateSuggestion=function(e){var t=this;this.lastSuggestions=e;var n=this.getFirstSuggestionText();this.inputManager.setWordCompletion(n&&n.text),this.onsuggestions&&this.onsuggestions(e),o.each(e,function(e){null==e.onSelect&&null!=e.text&&(e.onSelect=function(){t.setText(e.text),t.onselect&&t.onselect(e)})})},e.prototype.focus=function(){u.$$(this.element).addClass("magic-box-hasFocus"),this.inputManager.focus()},e.prototype.blur=function(){this.inputManager.blur()},e.prototype.clearSuggestion=function(){var e=this;this.suggestionsManager.mergeSuggestions([],function(t){e.updateSuggestion(t)}),this.inputManager.setWordCompletion(null)},e.prototype.focusOnSuggestion=function(e){null==e||null==e.text?(e=this.getFirstSuggestionText(),this.inputManager.setResult(this.displayedResult,e&&e.text)):this.inputManager.setResult(this.grammar.parse(e.text).clean(),e.text)},e.prototype.getFirstSuggestionText=function(){return o.find(this.lastSuggestions,function(e){return null!=e.text})},e.prototype.getText=function(){return this.inputManager.getValue()},e.prototype.getWordCompletion=function(){return this.inputManager.getWordCompletion()},e.prototype.clear=function(){this.setText(""),this.showSuggestion(),this.focus(),this.onclear&&this.onclear()},e.prototype.hasSuggestions=function(){return this.suggestionsManager.hasSuggestions},e}();t.MagicBoxInstance=h,t.createMagicBox=i,t.requestAnimationFrame=s,l.doMagicBoxExport()},209:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(){function e(){}return e.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},e.highlightText=function(e,t,n,i,s){var o=this;if(void 0===n&&(n=!1),void 0===i&&(i="magic-box-hightlight"),void 0===s&&(s=""),0==t.length)return e;var r=this.escapeRegExp(t),u="("+r+")|(.*?(?="+r+")|.+)",l=new RegExp(u,n?"gi":"g");return e.replace(l,function(e,t,n){return o.escapeText(null!=t?i:s,e)})},e.escapeText=function(e,t){return'<span class="'+e+'">'+i.escape(t)+"</span>"},e}();t.MagicBoxUtils=s},427:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),o=n(85),r=n(0),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultTemplate='<td><a class="CoveoResultLink"></a></td>\n                             <td><span class="CoveoExcerpt"></span></td>\n                             <td><span class="CoveoFieldValue" data-field="@date" data-helper="date"></span></td>',t.defaultRoledTemplates={"table-header":'<th style="width: 40%">Link</th>\n                     <th>Excerpt</th>\n                     <th style="width: 20%"\n                         class="CoveoSort coveo-table-header-sort"\n                         data-sort-criteria="date ascending,date descending"\n                         data-display-unselected-icon="false">Date</th>',"table-footer":"<th>Link</th>\n                     <th>Excerpt</th>\n                     <th>Date</th>"},t}return i(t,e),t.prototype.instantiateRoleToString=function(e){var t=r.find(this.templates,function(t){return t.role===e});return t?t.instantiateToString(void 0,{}):this.defaultRoledTemplates[e]},t.prototype.instantiateRoleToElement=function(e){var t=this,n=r.find(this.templates,function(t){return t.role===e});if(n)return n.instantiateToElement(void 0,{});var i=new s.Template(function(){return t.defaultRoledTemplates[e]});return i.layout="table",i.instantiateToElement(void 0)},t.prototype.getFallbackTemplate=function(){var e=this;return new s.Template(function(){return e.defaultTemplate})},t.prototype.hasTemplateWithRole=function(e){return r.find(this.templates,function(t){return t.role===e})},t}(o.TemplateList);t.TableTemplate=u},428:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function u(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(r,u)}l((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(s)throw new TypeError("Generator is already executing.");for(;l;)try{if(s=1,o&&(r=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],o=0}finally{s=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var s,o,r,u,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};Object.defineProperty(t,"__esModule",{value:!0});var r=n(198),u=n(427),l=n(1),a=n(0),c=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.resultListOptions=t,i.autoCreateComponentsFn=n,i.shouldDisplayHeader=!0,i.shouldDisplayFooter=!1,i.resultListOptions.resultTemplate instanceof u.TableTemplate&&(i.resultListOptions.resultTemplate.hasTemplateWithRole("table-footer")&&(i.shouldDisplayFooter=!0),0===i.resultListOptions.resultTemplate.templates.length||i.resultListOptions.resultTemplate.hasTemplateWithRole("table-header")||(i.shouldDisplayHeader=!1)),i}return i(t,e),t.prototype.getStartFragment=function(e,t){if(!t&&!a.isEmpty(e)&&this.shouldDisplayHeader)return this.renderRoledTemplate("table-header")},t.prototype.getEndFragment=function(e,t){if(!t&&!a.isEmpty(e)&&this.shouldDisplayFooter)return this.renderRoledTemplate("table-footer")},t.prototype.renderRoledTemplate=function(e){return s(this,void 0,void 0,function(){var t,n;return o(this,function(i){switch(i.label){case 0:return[4,this.resultListOptions.resultTemplate.instantiateRoleToElement(e)];case 1:return t=i.sent(),l.$$(t).addClass("coveo-result-list-"+e),this.autoCreateComponentsFn(t,void 0),n=document.createDocumentFragment(),n.appendChild(t),[2,n]}})})},t}(r.ResultListRenderer);t.ResultListTableRenderer=c},429:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function u(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(r,u)}l((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(s)throw new TypeError("Generator is already executing.");for(;l;)try{if(s=1,o&&(r=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],o=0}finally{s=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var s,o,r,u,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),r=n(84),u=n(0),l=n(1),a=n(11),c=function(){function e(e){this.args=e}return e.prototype.buildResults=function(e,t,n){return i(this,void 0,void 0,function(){var i,o,l=this;return s(this,function(s){return i=[],o=u.map(e.results,function(e,s){return l.buildResult(e,t,n).then(function(e){return null!=e&&i.push({elem:e,idx:s}),r.ResultList.resultCurrentlyBeingRendered=null,e})}),[2,Promise.all(o).then(function(){return u.pluck(u.sortBy(i,"idx"),"elem")})]})})},e.prototype.buildResult=function(e,t,n){return i(this,void 0,void 0,function(){var i;return s(this,function(s){switch(s.label){case 0:return o.Assert.exists(e),o.QueryUtils.setStateObjectOnQueryResult(this.args.queryStateModel.get(),e),o.QueryUtils.setSearchInterfaceObjectOnQueryResult(this.args.searchInterface,e),r.ResultList.resultCurrentlyBeingRendered=e,[4,this.createHtmlElement(e,t)];case 1:return i=s.sent(),null!=i&&o.Component.bindResultToElement(i,e),n.push(e),[4,this.autoCreateComponentsInsideResult(i,e).initResult];case 2:return s.sent(),this.verifyChildren(i),[2,i]}})})},e.prototype.autoCreateComponentsInsideResult=function(e,t){return o.Assert.exists(e),o.Initialization.automaticallyCreateComponentsInsideResult(e,t)},e.prototype.createHtmlElement=function(e,t){return this.args.resultTemplate.instantiateToElement(e,{wrapInDiv:!0,checkCondition:!0,currentLayout:t,responsiveComponents:this.args.searchInterface.responsiveComponents})},e.prototype.verifyChildren=function(e){l.$$(e).find(".CoveoResultLink")||new a.Logger(e).warn('Result does not contain a "CoveoResultLink" component, please verify the result template',this.args.resultTemplate)},e}();t.TemplateToHtml=c},430:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.instantiateToString=function(e){return'<div class="coveo-result-frame">\n        <div class="coveo-result-row">\n          <div class="coveo-result-cell" style="width:40px;text-align:center;vertical-align:middle;">\n            <span class="CoveoIcon" data-small="true" data-with-label="false">\n            </span>\n          </div>\n          <div class="coveo-result-cell" style="padding:0 0 3px 5px;vertical-align:middle">\n            <div class="coveo-result-row">\n              <div class="coveo-result-cell" style="font-size:10pt;">\n                <a class="CoveoResultLink" style="display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>'},t.prototype.instantiateToElement=function(e){var t=this;return new Promise(function(n,i){var s=document.createElement("div");s.innerHTML=t.instantiateToString(e),n(s)})},t}(s.Template);t.DefaultRecommendationTemplate=o},431:function(e,t,n){"use strict";function i(){var e,t=T.Component.getComponentRef("ResultList");if(t&&(e=t.resultCurrentlyBeingRendered),!e){var n=T.Component.getComponentRef("Quickview");n&&(e=n.resultCurrentlyBeingRendered)}return e}function s(){var e=i();if(e)return e.termsToHighlight}function o(){var e=i();if(e)return e.phrasesToHighlight}function r(e,t){return d.Utils.isNonEmptyArray(w.keys(e))||d.Utils.isNonEmptyArray(w.keys(t))}var u=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n(110),a=n(64),c=n(29),p=n(125),h=n(168),d=n(4),f=n(19),g=n(65),m=n(167),y=n(21),v=n(22),b=n(1),S=n(49),C=n(108),x=n(46),R=n(20),w=n(0),T=n(6),E=n(63),O=function(){function e(){}return e.exportAllHelpersGlobally=function(e){w.each(l.TemplateHelpers.getHelpers(),function(t,n){void 0==e[n]&&(e[n]=t)})},e}();t.CoreHelpers=O,l.TemplateHelpers.registerFieldHelper("javascriptEncode",function(e){return d.Utils.exists(e)?f.StringUtils.javascriptEncode(e):void 0});var A=function(e,t){var n=a.StringAndHoles.shortenString(e,t.length,"...");return d.Utils.exists(t.highlights)?a.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};l.TemplateHelpers.registerTemplateHelper("shorten",function(e,t,n,i){return A(e,{length:t,highlights:n,cssClass:i})}),l.TemplateHelpers.registerTemplateHelper("shortenv2",function(e,t){return A(e,t)});var $=function(e,t){var n=a.StringAndHoles.shortenPath(e,t.length);return d.Utils.exists(t.highlights)?a.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};l.TemplateHelpers.registerTemplateHelper("shortenPath",function(e,t,n,i){return $(e,{length:t,highlights:n,cssClass:i})}),l.TemplateHelpers.registerFieldHelper("shortenPathv2",function(e,t){return $(e,t)});var _=function(e,t){var n=a.StringAndHoles.shortenUri(e,t.length);return d.Utils.exists(t.highlights)?a.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};l.TemplateHelpers.registerTemplateHelper("shortenUri",function(e,t,n,i){return _(e,{length:t,highlights:n,cssClass:i})}),l.TemplateHelpers.registerTemplateHelper("shortenUriv2",function(e,t){return _(e,t)});var F=function(e,t){return d.Utils.exists(e)?d.Utils.exists(t.highlights)?a.HighlightUtils.highlightString(e,t.highlights,null,t.cssClass||"highlight"):e:void 0};l.TemplateHelpers.registerTemplateHelper("highlight",function(e,t,n){return F(e,{highlights:t,cssClass:n})}),l.TemplateHelpers.registerTemplateHelper("highlightv2",function(e,t){return F(e,t)});var M=function(e,t){return d.Utils.exists(e)&&d.Utils.exists(t.termsToHighlight)&&d.Utils.exists(t.phrasesToHighlight)?r(t.termsToHighlight,t.phrasesToHighlight)?C.StreamHighlightUtils.highlightStreamText(e,t.termsToHighlight,t.phrasesToHighlight,t.opts):e:void 0};l.TemplateHelpers.registerTemplateHelper("highlightStreamText",function(e,t,n,i){return void 0===t&&(t=s()),void 0===n&&(n=o()),M(e,{termsToHighlight:t,phrasesToHighlight:n,opts:i})}),l.TemplateHelpers.registerTemplateHelper("highlightStreamTextv2",function(e,t){var n=u({termsToHighlight:s(),phrasesToHighlight:o()},t);return M(e,n)});var L=function(e,t){return d.Utils.exists(e)&&d.Utils.exists(t.termsToHighlight)&&d.Utils.exists(t.phrasesToHighlight)?r(t.termsToHighlight,t.phrasesToHighlight)?C.StreamHighlightUtils.highlightStreamHTML(e,t.termsToHighlight,t.phrasesToHighlight,t.opts):e:void 0};l.TemplateHelpers.registerTemplateHelper("highlightStreamHTML",function(e,t,n,i){return void 0===t&&(t=s()),void 0===n&&(n=o()),L(e,{termsToHighlight:t,phrasesToHighlight:n,opts:i})}),l.TemplateHelpers.registerTemplateHelper("highlightStreamHTMLv2",function(e,t){return L(e,t)}),l.TemplateHelpers.registerFieldHelper("number",function(e,t){var n=Number(e);return d.Utils.exists(e)?w.isString(t)?f.StringUtils.htmlEncode(R.format(n,t)):f.StringUtils.htmlEncode(n.toString()):void 0}),l.TemplateHelpers.registerFieldHelper("date",function(e,t){return c.DateUtils.dateToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),l.TemplateHelpers.registerFieldHelper("time",function(e,t){return c.DateUtils.timeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),l.TemplateHelpers.registerFieldHelper("dateTime",function(e,t){return c.DateUtils.dateTimeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),l.TemplateHelpers.registerFieldHelper("emailDateTime",function(e,t){var n={};n.includeTimeIfThisWeek=!0;var i=w.extend(t,n);return e?c.DateUtils.dateTimeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),i):void 0}),l.TemplateHelpers.registerFieldHelper("currency",function(e,t){return p.CurrencyUtils.currencyToString(e,t)}),l.TemplateHelpers.registerFieldHelper("timeSpan",function(e,t){return void 0===t&&(t={isMilliseconds:!1}),new g.TimeSpan(e,t.isMilliseconds).getHHMMSS()}),l.TemplateHelpers.registerFieldHelper("email",function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i,s,o,r;if(w.isObject(t[0])?(i=t[0].companyDomain,s=t[0].me,o=t[0].lengthLimit,r=t[0].truncateName):(i=t[0],s=t[1],o=t[2],r=t[3]),void 0==o&&(o=2),void 0==r&&(r=!1),w.isString(e)){var u=m.EmailUtils.splitSemicolonSeparatedListOfEmailAddresses(e);return m.EmailUtils.emailAddressesToHyperlinks(u,i,s,o,r)}return w.isArray(e)?m.EmailUtils.emailAddressesToHyperlinks(e,i,s,o,r):void 0}),l.TemplateHelpers.registerTemplateHelper("excessEmailToggle",function(e){b.$$(e).removeClass("coveo-active"),b.$$(e).hasClass("coveo-emails-excess-collapsed")?w.each(b.$$(e).siblings(".coveo-emails-excess-expanded"),function(e){b.$$(e).addClass("coveo-active")}):b.$$(e).hasClass("coveo-hide-expanded")&&(b.$$(e.parentElement).addClass("coveo-inactive"),w.each(b.$$(e.parentElement).siblings(".coveo-emails-excess-collapsed"),function(e){b.$$(e).addClass("coveo-active")}))}),l.TemplateHelpers.registerFieldHelper("anchor",function(e,t){return h.AnchorUtils.buildAnchor(e,t)}),l.TemplateHelpers.registerFieldHelper("image",function(e,t){return h.ImageUtils.buildImage(e,t)}),l.TemplateHelpers.registerTemplateHelper("thumbnail",function(e,t,n){if(void 0===e&&(e=i()),void 0===t&&(t="default"),y.QueryUtils.hasThumbnail(e))return h.ImageUtils.buildImageFromResult(e,S.SearchEndpoint.endpoints[t],n)}),l.TemplateHelpers.registerTemplateHelper("fromFileTypeToIcon",function(e,t){void 0===e&&(e=i()),void 0===t&&(t={});var n=T.Component.getComponentRef("Icon");if(n)return n.createIcon(e,t).outerHTML}),l.TemplateHelpers.registerTemplateHelper("attrEncode",function(e){return(""+e).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/'/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),l.TemplateHelpers.registerTemplateHelper("loadTemplates",function(e,t){void 0===t&&(t=!0);var n,s="",o=i(),r=!1,u=e;return w.each(e,function(e,t,i){"default"==e&&(n=t)}),void 0!=n&&(u=w.omit(e,n)),w.each(u,function(e,n,i){r&&t||(r=r||e,s+=l.TemplateHelpers.getHelper("loadTemplate")(n,e,o))}),r||void 0==n||(s+=l.TemplateHelpers.getHelper("loadTemplate")(n,!0,o)),s});var Q=["B","KB","MB","GB","TB","PB","EB"];l.TemplateHelpers.registerFieldHelper("size",function(e,t){for(var n=parseInt(e,10),i=null!=t&&null!=t.precision?t.precision:2,s=null!=t&&null!=t.base?t.base:0;n>1024&&s+1<Q.length;)n/=1024,s++;return(n=Math.floor(n*Math.pow(10,i))/Math.pow(10,i))+" "+Q[s]}),l.TemplateHelpers.registerFieldHelper("translatedCaption",function(e){return x.FacetUtils.tryToGetTranslatedCaption("@filetype",e)}),l.TemplateHelpers.registerTemplateHelper("loadTemplate",function(e,t,n){return void 0===t&&(t=!0),d.Utils.isNullOrUndefined(n)&&(n=i()),t?E.TemplateCache.getTemplate(e).instantiateToString(n,{checkCondition:!1}):""}),l.TemplateHelpers.registerTemplateHelper("encodeCarriageReturn",function(e){return d.Utils.isNullOrUndefined(e)?void 0:f.StringUtils.encodeCarriageReturn(e)}),l.TemplateHelpers.registerTemplateHelper("isMobileDevice",function(){return v.DeviceUtils.isMobileDevice()?v.DeviceUtils.getDeviceName():null})},454:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),s=n(455),o=n(204),r=n(0),u=function(){function e(e,t,n,i){this.ref=e,this.occurrence=t,this.id=n,this.grammar=i}return e.prototype.parse=function(e,t){var n=this.grammar.getExpression(this.ref);if(null==n)throw new Error("Expression not found:"+this.ref);return"?"==this.occurrence||null==this.occurrence?this.parseOnce(e,t,n):this.parseMany(e,t,n)},e.prototype.parseOnce=function(e,t,n){var u=n.parse(e,t),l=u.isSuccess();return l||"?"!=this.occurrence?new s.RefResult([u],this,e,l?null:u):t?0==e.length?new s.RefResult([],this,e,u):r.all(u.getBestExpect(),function(e){return e.expression==o.ExpressionEndOfInput})?new s.RefResult([new i.Result(null,o.ExpressionEndOfInput,e)],this,e,u):u:new s.RefResult([],this,e,null)},e.prototype.parseMany=function(e,t,n){var u,l,a=[],c=e;do{u=n.parse(c,!1),(l=u.isSuccess())&&(a.push(u),c=c.substr(u.getLength()))}while(l&&u.input!=c);var p=r.isNumber(this.occurrence)?this.occurrence:"+"==this.occurrence?1:0;if(a.length<p)a.push(u);else if(t)if(a.length>0){var h=r.last(a);u=n.parse(h.input,!0),u.isSuccess()?a[a.length-1]=u:(a.push(new i.Result(null,o.ExpressionEndOfInput,h.input.substr(h.getLength()))),u=n.parse(h.input.substr(h.getLength()),!0))}else if(0!=e.length){var d=new i.Result(null,o.ExpressionEndOfInput,e);return new s.RefResult([d],this,e,u)}return new s.RefResult(a,this,e,u)},e.prototype.toString=function(){return this.id},e}();t.ExpressionRef=u},455:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(47),o=n(0),r=function(e){function t(t,n,i,s){var r=e.call(this,t,n,i)||this;return r.expression=n,r.input=i,o.last(t)!=s&&(r.failAttempt=s,null!=r.failAttempt&&(r.failAttempt.parent=r)),r}return i(t,e),t.prototype.getExpect=function(){var t=e.prototype.getExpect.call(this);return null!=this.failAttempt?t.concat(this.failAttempt.getExpect()):t},t.prototype.clean=function(t){if(null!=this.failAttempt&&(null!=t||!this.isSuccess())){t=t||o.last(this.getBestExpect()).path(this);var n=o.first(t);if(null!=n&&n==this.failAttempt){var i=o.last(this.subResults),r=o.map(null!=i&&i.isSuccess()?this.subResults:o.initial(this.subResults),function(e){return e.clean()});return r.push(n.clean(o.rest(t))),new s.Result(r,this.expression,this.input)}}return e.prototype.clean.call(this,t)},t}(s.Result);t.RefResult=r},456:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(457),s=function(){function e(e,t){this.parts=e,this.id=t}return e.prototype.parse=function(e,t){for(var n=[],s=0;s<this.parts.length;s++){var o=this.parts[s].parse(e,t);if(o.isSuccess())return new i.OptionResult(o,this,e,n);n.push(o)}return new i.OptionResult(null,this,e,n)},e.prototype.toString=function(){return this.id},e}();t.ExpressionOptions=s},457:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(47),o=n(0),r=function(e){function t(t,n,i,s){var r=e.call(this,null!=t?[t]:null,n,i)||this;return r.result=t,r.expression=n,r.input=i,r.failAttempt=s,o.forEach(r.failAttempt,function(e){e.parent=r}),r}return i(t,e),t.prototype.getExpect=function(){var e=this,t=[];return null!=this.result&&(t=this.result.getExpect()),t=o.reduce(this.failAttempt,function(e,t){return e.concat(t.getExpect())},t),t.length>0&&o.all(t,function(t){return t.input==e.input})?[this]:t},t.prototype.clean=function(e){if(null!=e||!this.isSuccess()){e=o.rest(e||o.last(this.getBestExpect()).path(this));var t=o.first(e);return null==t?new s.Result(null,this.expression,this.input):new s.Result([t.clean(o.rest(e))],this.expression,this.input)}return new s.Result(o.map(this.result.subResults,function(e){return e.clean()}),this.expression,this.input)},t}(s.Result);t.OptionResult=r},458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),s=n(47),o=function(){function e(e,t,n){this.value=e,this.id=t}return e.prototype.parse=function(e,t){var n=e.match(this.value);null!=n&&0!=n.index&&(n=null);var o=new i.Result(null!=n?n[0]:null,this,e);return o.isSuccess()&&t&&e.length>o.value.length?new s.EndOfInputResult(o):o},e.prototype.toString=function(){return this.id},e}();t.ExpressionRegExp=o},459:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.func=e,this.id=t,this.grammar=n}return e.prototype.parse=function(e,t){return this.func(e,t,this)},e.prototype.toString=function(){return this.id},e}();t.ExpressionFunction=i},46:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),s=n(21),o=n(107),r=n(29),u=n(4),l=n(1),a=n(0),c=n(7),p=function(){function e(){}return e.getRegexToUseForFacetSearch=function(e,t){return new RegExp(i.StringUtils.stringToRegex(e,t),"i")},e.getValuesToUseForSearchInFacet=function(e,t){var n=[e],i=this.getRegexToUseForFacetSearch(e,t.options.facetSearchIgnoreAccents);return t.options.valueCaption?(a.chain(t.options.valueCaption).pairs().filter(function(e){return i.test(e[1])}).each(function(e){n.push(e[0])}),(s.QueryUtils.isStratusAgnosticField(t.options.field,"@objecttype")||s.QueryUtils.isStratusAgnosticField(t.options.field,"@filetype"))&&a.each(o.FileTypes.getFileTypeCaptions(),function(e,s){s in t.options.valueCaption||!i.test(e)||n.push(s)})):s.QueryUtils.isStratusAgnosticField(t.options.field,"@objecttype")||s.QueryUtils.isStratusAgnosticField(t.options.field,"@filetype")?a.each(a.filter(a.pairs(o.FileTypes.getFileTypeCaptions()),function(e){return i.test(e[1])}),function(e){n.push(e[0])}):s.QueryUtils.isStratusAgnosticField(t.options.field,"@month")&&a.each(a.range(1,13),function(e){i.test(r.DateUtils.monthToString(e-1))&&n.push(("0"+e.toString()).substr(-2))}),n},e.buildFacetSearchPattern=function(e){return e=a.map(e,function(e){return u.Utils.escapeRegexCharacter(e)}),e[0]=".*"+e[0]+".*",e.join("|")},e.needAnotherFacetSearch=function(e,t,n,i){return e<t&&e<i&&e>n},e.addNoStateCssClassToFacetValues=function(e,t){if(0!=e.values.getSelected().length){var n=l.$$(t).findAll("li:not(.coveo-selected)");a.each(n,function(e){l.$$(e).addClass("coveo-no-state")})}},e.tryToGetTranslatedCaption=function(t,n){var i;if(s.QueryUtils.isStratusAgnosticField(t.toLowerCase(),"@filetype"))i=o.FileTypes.getFileType(n).caption;else if(s.QueryUtils.isStratusAgnosticField(t.toLowerCase(),"@objecttype"))i=o.FileTypes.getObjectType(n).caption;else if(e.isMonthFieldValue(t,n)){var l=parseInt(n,10);i=r.DateUtils.monthToString(l-1)}else i=c.l(n);return void 0!=i&&u.Utils.isNonEmptyString(i)?i:n},e.isMonthFieldValue=function(e,t){if(!s.QueryUtils.isStratusAgnosticField(e.toLowerCase(),"@month"))return!1;var n=parseInt(t,10);return!isNaN(n)&&!(n<1||n>12)},e}();t.FacetUtils=p},460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),s=function(){function e(e,t){if(this.parts=e,this.id=t,0==e.length)throw new Error(JSON.stringify(t)+" should have at least 1 parts")}return e.prototype.parse=function(e,t){for(var n,s=[],o=e,r=0;r<this.parts.length;r++){if(n=this.parts[r].parse(o,t&&r==this.parts.length-1),s.push(n),!n.isSuccess())break;o=o.substr(n.getLength())}return new i.Result(s,this,e)},e.prototype.toString=function(){return this.id},e}();t.ExpressionList=s},461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(206);t.NestedQuery={basicExpressions:["NestedQuery"],grammars:{NestedQuery:"[[NestedField][OptionalSpaces][Expressions]]",NestedField:"[[Field]]",FieldValue:["NestedQuery"]},include:[i.Field]}},462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(128);t.Date={grammars:{Date:"[DateYear]/[DateMonth]/[DateDay]",DateYear:/([0-9]{4})/,DateMonth:/(1[0-2]|0?[1-9])/,DateDay:/([1-2][0-9]|3[0-1]|0?[1-9])/,DateRange:"[Date][Spaces?]..[Spaces?][Date]",DateRelative:["DateRelativeNegative","DateRelativeTerm"],DateRelativeTerm:/now|today|yesterday/,DateRelativeNegative:"[DateRelativeTerm][DateRelativeNegativeRef]",DateRelativeNegativeRef:/([\-\+][0-9]+(s|m|h|d|mo|y))/},include:[i.Basic]}},463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(128);t.QueryExtension={basicExpressions:["QueryExtension"],grammars:{QueryExtension:"$[QueryExtensionName]([QueryExtensionArguments])",QueryExtensionName:/\w+/,QueryExtensionArguments:"[QueryExtensionArgumentList*][QueryExtensionArgument]",QueryExtensionArgumentList:"[QueryExtensionArgument][Spaces?],[Spaces?]",QueryExtensionArgument:"[QueryExtensionArgumentName]:[Spaces?][QueryExtensionArgumentValue]",QueryExtensionArgumentName:/\w+/,QueryExtensionArgumentValue:["SingleQuoted","Expressions"]},include:[i.Basic]}},464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubExpression={basicExpressions:["SubExpression"],grammars:{SubExpression:"([Expressions])"}}},465:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n(25),o=n(7),r=n(1),u=n(26),l=function(){function e(e,t,n){this.onchange=t,this.magicBox=n,this.hasFocus=!1,this.root=s.Component.resolveRoot(e),this.underlay=document.createElement("div"),this.underlay.className="magic-box-underlay",this.highlightContainer=document.createElement("span"),this.highlightContainer.className="magic-box-highlight-container",this.underlay.appendChild(this.highlightContainer),this.ghostTextContainer=document.createElement("span"),this.ghostTextContainer.className="magic-box-ghost-text",this.underlay.appendChild(this.ghostTextContainer),this.input=r.$$(e).find("input"),this.input?e.insertBefore(this.underlay,this.input):(this.input=document.createElement("input"),e.appendChild(this.underlay),e.appendChild(this.input)),this.setupHandler(),this.addAccessibilitiesProperties()}return e.prototype.updateInput=function(){this.input.value!=this.result.input&&(this.input.value=this.result.input,this.hasFocus&&this.setCursor(this.getValue().length))},e.prototype.updateHighlight=function(){r.$$(this.highlightContainer).empty(),this.highlightContainer.appendChild(this.result.toHtmlElement())},e.prototype.updateWordCompletion=function(){r.$$(this.ghostTextContainer).empty(),this.ghostTextContainer.innerHTML="",null!=this.wordCompletion&&this.ghostTextContainer.appendChild(document.createTextNode(this.wordCompletion.substr(this.result.input.length)))},e.prototype.setResult=function(e,t){this.result=e,this.updateInput(),this.updateHighlight(),i.isUndefined(t)&&null!=this.wordCompletion&&0==this.wordCompletion.indexOf(this.result.input)?this.updateWordCompletion():this.setWordCompletion(t),this.updateScroll()},e.prototype.setWordCompletion=function(e){null!=e&&0!=e.toLowerCase().indexOf(this.result.input.toLowerCase())&&(e=null),this.wordCompletion=e,this.updateWordCompletion(),this.updateScroll()},e.prototype.setCursor=function(e){if(this.input.focus(),this.input.createTextRange){var t=this.input.createTextRange();t.move("character",e),t.select()}else null!=this.input.selectionStart&&(this.input.focus(),this.input.setSelectionRange(e,e))},e.prototype.getCursor=function(){return this.input.selectionStart},e.prototype.updateScroll=function(e){var t=this;void 0===e&&(e=!0);var n=function(){t.underlay.clientWidth<t.underlay.scrollWidth&&(t.underlay.style.visibility="hidden",t.underlay.scrollLeft=t.input.scrollLeft,t.underlay.scrollTop=t.input.scrollTop,t.underlay.style.visibility="visible"),t.updateScrollDefer=null,t.hasFocus&&t.updateScroll()};e?null==this.updateScrollDefer&&(this.updateScrollDefer=requestAnimationFrame(n)):n()},e.prototype.setupHandler=function(){var e=this;this.input.onblur=function(){e.hasFocus=!1,setTimeout(function(){e.hasFocus||e.onblur&&e.onblur()},300),e.updateScroll()},this.input.onfocus=function(){e.hasFocus||(e.hasFocus=!0,e.updateScroll(),e.onfocus&&e.onfocus())},this.input.onkeydown=function(t){e.keydown(t)},this.input.onkeyup=function(t){e.keyup(t)},this.input.oncut=function(){setTimeout(function(){e.onInputChange()})},this.input.onpaste=function(){setTimeout(function(){e.onInputChange()})}},e.prototype.addAccessibilitiesProperties=function(){this.input.setAttribute("type","text"),this.input.setAttribute("role","searchbox"),this.input.setAttribute("form","coveo-dummy-form"),this.input.setAttribute("aria-autocomplete","list"),this.input.setAttribute("title",o.l("InsertAQuery")+". "+o.l("PressEnterToSend"))},e.prototype.focus=function(){var e=this;this.hasFocus=!0,setTimeout(function(){e.input.focus(),e.setCursor(e.getValue().length)})},e.prototype.blur=function(){this.hasFocus&&this.input.blur()},e.prototype.keydown=function(e){var t=this;switch(e.keyCode||e.which){case u.KEYBOARD.TAB:this.tabPress(),this.magicBox.clearSuggestion();break;default:e.stopPropagation(),null==this.onkeydown||this.onkeydown(e.keyCode||e.which)?requestAnimationFrame(function(){t.onInputChange()}):e.preventDefault()}},e.prototype.keyup=function(e){switch(e.keyCode||e.which){case u.KEYBOARD.LEFT_ARROW:case u.KEYBOARD.RIGHT_ARROW:this.handleLeftRightArrow(e);break;default:null==this.onkeydown||this.onkeyup(e.keyCode||e.which)?this.onInputChange():e.preventDefault()}},e.prototype.handleLeftRightArrow=function(e){r.$$(this.root).find("."+s.Component.computeCssClassNameForType("QuerySuggestPreview"))||this.onchangecursor(),null==this.onkeydown||this.onkeyup(e.keyCode||e.which)?this.onInputChange():e.preventDefault()},e.prototype.tabPress=function(){this.ontabpress&&this.ontabpress(),this.onblur&&this.onblur()},e.prototype.onInputChange=function(){this.result.input!=this.input.value&&this.onchange(this.input.value,!1)},e.prototype.getValue=function(){return this.input.value},e.prototype.getWordCompletion=function(){return this.wordCompletion},e}();t.InputManager=l},466:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s=n(0),o=n(32),r=n(6),u=n(171),l=n(1),a=n(4);!function(e){e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right"}(i||(i={}));var c=function(){function e(e,t,n,i){var o=this;this.element=e,this.magicBoxContainer=t,this.inputManager=n,this.root=r.Component.resolveRoot(e),this.options=s.defaults(i,{selectableClass:"magic-box-suggestion",selectedClass:"magic-box-selected"}),void 0==this.options.timeout&&(this.options.timeout=500),this.hasSuggestions=!1,l.$$(this.element).on("mouseover",function(e){o.handleMouseOver(e)}),l.$$(this.element).on("mouseout",function(e){o.handleMouseOut(e)}),this.suggestionsListbox=this.buildSuggestionsContainer(),this.suggestionsPreviewContainer=this.initPreviewForSuggestions(this.suggestionsListbox),l.$$(this.element).append(this.suggestionsPreviewContainer.el),this.addAccessibilityPropertiesForCombobox(),this.appendEmptySuggestionOption()}return e.prototype.handleMouseOver=function(e){var t=l.$$(e.target),n=t.parents(this.options.selectableClass);t.hasClass(this.options.selectableClass)?this.processMouseSelection(t.el):n.length>0&&this.element.contains(n[0])&&this.processMouseSelection(n[0])},e.prototype.handleMouseOut=function(e){var t=l.$$(e.target),n=t.parents(this.options.selectableClass);if(e.relatedTarget&&l.$$(e.relatedTarget).isValid()){var i=l.$$(e.relatedTarget).parents(this.options.selectableClass);t.hasClass(this.options.selectedClass)&&!l.$$(e.relatedTarget).hasClass(this.options.selectableClass)?this.removeSelectedStatus(t.el):0==i.length&&n.length>0&&this.removeSelectedStatus(n[0])}else t.hasClass(this.options.selectedClass)?this.removeSelectedStatus(t.el):n.length>0&&this.removeSelectedStatus(n[0]);l.$$(this.root).trigger(o.OmniboxEvents.querySuggestLoseFocus)},e.prototype.moveDown=function(){this.move(i.Down)},e.prototype.moveUp=function(){this.move(i.Up)},e.prototype.moveLeft=function(){this.move(i.Left)},e.prototype.moveRight=function(){this.move(i.Right)},e.prototype.selectAndReturnKeyboardFocusedElement=function(){var e=this.keyboardFocusedSuggestion;return null!=e&&(l.$$(e).trigger("keyboardSelect"),this.keyboardFocusedSuggestion=null),e},e.prototype.mergeSuggestions=function(e,t){var n,i=this,o=[],r=!0;e=s.compact(e);var u=this.pendingSuggestion=new Promise(function(t,l){s.each(e,function(e){var t=!1;setTimeout(function(){t=!0,r=!1},i.options.timeout),e.then(function(e){!t&&e&&(o=o.concat(e))})});var a=function(){r&&(n&&clearTimeout(n),0==o.length?t([]):u==i.pendingSuggestion||null==i.pendingSuggestion?t(o.sort(function(e,t){return t.index-e.index})):l("new request queued")),r=!1};0==e.length&&a(),void 0==e&&a(),n=setTimeout(function(){a()},i.options.timeout),Promise.all(e).then(function(){return a()})});u.then(function(e){return t&&t(e),i.updateSuggestions(e),e}).catch(function(){return null})},e.prototype.updateSuggestions=function(e){var t=this;if(this.suggestionsListbox.empty(),this.inputManager.input.removeAttribute("aria-activedescendant"),this.hasSuggestions=e.length>0,l.$$(this.element).toggleClass("magic-box-hasSuggestion",this.hasSuggestions),l.$$(this.magicBoxContainer).setAttribute("aria-expanded",this.hasSuggestions.toString()),!this.hasSuggestions)return this.appendEmptySuggestionOption(),void l.$$(this.root).trigger(o.OmniboxEvents.querySuggestLoseFocus);s.each(e,function(n){var i=n.dom?t.modifyDomFromExistingSuggestion(n.dom):t.createDomFromSuggestion(n);i.setAttribute("id","magic-box-suggestion-"+s.indexOf(e,n)),i.setAttribute("role","option"),i.setAttribute("aria-selected","false"),i.setAttribute("aria-label",i.text()),i.suggestion=n,t.suggestionsListbox.append(i.el)}),l.$$(this.root).trigger(o.OmniboxEvents.querySuggestRendered)},Object.defineProperty(e.prototype,"selectedSuggestion",{get:function(){return this.htmlElementIsSuggestion(this.keyboardFocusedSuggestion)?this.returnMoved(this.keyboardFocusedSuggestion):null},enumerable:!0,configurable:!0}),e.prototype.processKeyboardSelection=function(e){this.addSelectedStatus(e),this.updateSelectedSuggestion(e.innerText),this.keyboardFocusedSuggestion=e,l.$$(this.inputManager.input).setAttribute("aria-activedescendant",l.$$(e).getAttribute("id"))},e.prototype.processKeyboardPreviewSelection=function(e){this.addSelectedStatus(e),this.keyboardFocusedSuggestion=e},e.prototype.processMouseSelection=function(e){this.addSelectedStatus(e),this.updateSelectedSuggestion(e.innerText),this.keyboardFocusedSuggestion=null},e.prototype.buildSuggestionsContainer=function(){return l.$$("div",{className:"coveo-magicbox-suggestions",id:"coveo-magicbox-suggestions",role:"listbox"})},e.prototype.buildPreviewContainer=function(){return l.$$("div",{className:"coveo-preview-container"}).el},Object.defineProperty(e.prototype,"querySuggestPreviewComponent",{get:function(){var e=l.$$(this.root).find("."+r.Component.computeCssClassNameForType("QuerySuggestPreview"));if(e)return r.Component.get(e)},enumerable:!0,configurable:!0}),e.prototype.initPreviewForSuggestions=function(e){if(!this.querySuggestPreviewComponent)return e;var t=l.$$("div",{className:"coveo-suggestion-container"}),n=this.buildPreviewContainer();return t.append(e.el),t.append(n),t},e.prototype.createDomFromSuggestion=function(e){var t=this,n=l.$$("div",{className:"magic-box-suggestion "+this.options.selectableClass});if(n.on("click",function(){t.selectSuggestion(e)}),n.on("keyboardSelect",function(){t.selectSuggestion(e)}),e.html)return n.el.innerHTML=e.html,n;if(e.text)return n.text(e.text),n;if(e.separator){n.addClass("magic-box-suggestion-seperator");var i=l.$$("div",{className:"magic-box-suggestion-seperator-label"},e.separator);return n.append(i.el),n}return n},e.prototype.selectSuggestion=function(e){e.onSelect(),l.$$(this.root).trigger(o.OmniboxEvents.querySuggestSelection,{suggestion:e.text})},e.prototype.appendEmptySuggestionOption=function(){this.suggestionsListbox.append(l.$$("div",{role:"option"}).el)},e.prototype.modifyDomFromExistingSuggestion=function(e){this.removeSelectedStatus(e);var t=l.$$(e).find("."+this.options.selectableClass);return this.removeSelectedStatus(t),l.$$(e)},e.prototype.move=function(e){l.$$(this.element).findAll(".coveo-preview-selectable").length>0?this.moveWithQuerySuggestPreview(e):this.moveWithinSuggestion(e)},e.prototype.moveWithinSuggestion=function(e){var t=l.$$(this.element).find("."+this.options.selectedClass),n=l.$$(this.element).findAll("."+this.options.selectableClass),o=s.indexOf(n,t),r=e===i.Up?o-1:o+1;r=(r+n.length)%n.length,this.lastSelectedSuggestion=n[r],this.selectQuerySuggest(this.lastSelectedSuggestion)},e.prototype.selectQuerySuggest=function(e){return e?this.processKeyboardSelection(e):(this.keyboardFocusedSuggestion=null,this.inputManager.input.removeAttribute("aria-activedescendant")),e},e.prototype.moveWithQuerySuggestPreview=function(e){var t=l.$$(this.element).find("."+this.options.selectedClass),n=l.$$(this.element).findAll("."+this.options.selectableClass),o=l.$$(this.element).findAll(".coveo-preview-selectable"),r=s.indexOf(n,t),u=s.indexOf(o,t),a=e===i.Up||e===i.Down;if(r>-1&&a)return void this.moveWithinSuggestion(e);var c=0===o.length,p=e===i.Left,h=-1===u;c||p&&h||this.moveWithinPreview(e)},e.prototype.moveWithinPreview=function(e){var t,n=l.$$(this.element).findAll(".coveo-preview-selectable");e!==i.Up&&e!==i.Down||(t=this.moveVerticallyInPreview(e)),e!==i.Left&&e!==i.Right||(t=this.moveHorizontallyInPreview(e)),a.Utils.isNullOrUndefined(t)||(t=(t+n.length)%n.length,this.processKeyboardPreviewSelection(n[t]))},e.prototype.moveVerticallyInPreview=function(e){var t=l.$$(this.element).find("."+this.options.selectedClass),n=l.$$(this.element).findAll(".coveo-preview-selectable"),o=s.indexOf(n,t);if(n.length<=u.resultPerRow)return null;var r=Math.ceil(n.length/2);return e===i.Up?o-r:o+r},e.prototype.moveHorizontallyInPreview=function(e){var t=l.$$(this.element).find("."+this.options.selectedClass),n=l.$$(this.element).findAll(".coveo-preview-selectable"),o=s.indexOf(n,t);return 0===o&&e===i.Left?void this.selectQuerySuggest(this.lastSelectedSuggestion):e===i.Left?o-1:o+1},e.prototype.returnMoved=function(e){if(null!=e){if(e.suggestion)return e.suggestion;if(e["no-text-suggestion"])return null;if(e instanceof HTMLElement)return{text:l.$$(e).text()}}return null},e.prototype.addSelectedStatus=function(e){for(var t=this.element.getElementsByClassName(this.options.selectedClass),n=0;n<t.length;n++){var i=t.item(n);this.removeSelectedStatus(i)}l.$$(e).addClass(this.options.selectedClass),this.updateSelectedSuggestion(e.innerText),this.updateAreaSelectedIfDefined(e,"true")},e.prototype.updateSelectedSuggestion=function(e){l.$$(this.root).trigger(o.OmniboxEvents.querySuggestGetFocus,{suggestion:e})},e.prototype.removeSelectedStatus=function(e){l.$$(e).removeClass(this.options.selectedClass),this.updateAreaSelectedIfDefined(e,"false")},e.prototype.updateAreaSelectedIfDefined=function(e,t){l.$$(e).getAttribute("aria-selected")&&l.$$(e).setAttribute("aria-selected",t)},e.prototype.addAccessibilityPropertiesForCombobox=function(){var e=l.$$(this.magicBoxContainer),t=l.$$(this.inputManager.input);e.setAttribute("aria-expanded","false"),e.setAttribute("role","combobox"),e.setAttribute("aria-owns","coveo-magicbox-suggestions"),e.setAttribute("aria-haspopup","listbox"),t.el.removeAttribute("aria-activedescendant"),t.setAttribute("aria-controls","coveo-magicbox-suggestions"),t.setAttribute("aria-autocomplete","list")},e.prototype.htmlElementIsSuggestion=function(e){var t=l.$$(this.element).findAll("."+this.options.selectableClass);return s.indexOf(t,e)>-1},e}();t.SuggestionsManager=c},467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(461),s=n(463),o=n(128),r=n(206),u=n(464);t.Complete={include:[i.NestedQuery,s.QueryExtension,u.SubExpression,r.Field,o.Basic]}},468:function(e,t,n){"use strict";function i(e,t,n,i){u.each(i.expressions,function(t){u.contains(e,t)||e.push(t)}),u.each(i.basicExpressions,function(e){u.contains(t,e)||t.push(e)}),u.each(i.grammars,function(e,t){if(t in n){if(!u.isArray(n[t])||!u.isArray(e))throw u.each(e,function(e){n[t].push(e)}),new Error("Can not merge "+t+"("+JSON.stringify(e)+" => "+JSON.stringify(n[t])+")");u.each(e,function(e){n[t].push(e)})}else n[t]=e})}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],s=[],o={Start:["Expressions","Empty"],Expressions:"[OptionalSpaces][Expression][ExpressionsList*][OptionalSpaces]",ExpressionsList:"[Spaces][Expression]",Expression:n,BasicExpression:s,OptionalSpaces:/ */,Spaces:/ +/,Empty:/(?!.)/},r=0;r<e.length;r++)i(n,s,o,e[r]),u.each(e[r].include,function(t){u.contains(e,t)||e.push(t)});return n.push("BasicExpression"),{start:"Start",expressions:o}}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=s.apply(this,e);return new r.Grammar(n.start,n.expressions)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(170),u=n(0);t.Expressions=s,t.ExpressionsGrammar=o},469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n(68),o=function(){function e(e){this.options=e}return e.queryIsBlocked=function(){return!!e.queryIsCurrentlyBlocked||(e.queryIsCurrentlyBlocked=!0,s.Defer.defer(function(){return e.allowDuplicateQuery()}),!1)},e.allowDuplicateQuery=function(){e.queryIsCurrentlyBlocked=!1},e.prototype.addParameters=function(t,n){e.queryIsBlocked()||(this.options.enableWildcards&&(t.enableWildcards=!0),this.options.enableQuestionMarks&&(t.enableQuestionMarks=!0),this.options.enableLowercaseOperators&&(t.enableLowercaseOperators=!0),i.isEmpty(n)||(t.enableQuerySyntax=this.options.enableQuerySyntax,t.expression.add(n),this.options.enablePartialMatch&&(t.enablePartialMatch=this.options.enablePartialMatch,this.options.partialMatchKeywords&&(t.partialMatchKeywords=this.options.partialMatchKeywords),this.options.partialMatchThreshold&&(t.partialMatchThreshold=this.options.partialMatchThreshold))))},e.queryIsCurrentlyBlocked=!1,e}();t.QueryboxQueryParameters=o},47:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(204),o=n(205),r=n(0),u=function(){function e(e,t,n){var i=this;this.expression=t,this.input=n,r.isString(e)?this.value=e:r.isArray(e)&&(this.subResults=e,r.forEach(this.subResults,function(e){e.parent=i}))}return e.prototype.isSuccess=function(){return null!=this.value||null!=this.subResults&&r.all(this.subResults,function(e){return e.isSuccess()})},e.prototype.path=function(e){var t=null!=this.parent&&this.parent!=e?this.parent.path(e):[];return t.push(this),t},e.prototype.findParent=function(e){for(var t=this,n=r.isString(e)?function(t){return e==t.expression.id}:e;null!=t&&!n(t);)t=t.parent;return t},e.prototype.find=function(e){var t=r.isString(e)?function(t){return e==t.expression.id}:e;if(t(this))return this;if(this.subResults)for(var n=0;n<this.subResults.length;n++){var i=this.subResults[n].find(t);if(i)return i}return null},e.prototype.findAll=function(e){var t=[],n=r.isString(e)?function(t){return e==t.expression.id}:e;return n(this)&&t.push(this),this.subResults&&(t=r.reduce(this.subResults,function(e,t){return e.concat(t.findAll(n))},t)),t},e.prototype.resultAt=function(e,t){if(e<0||e>this.getLength())return[];if(null!=t){if(r.isString(t)){if(t==this.expression.id)return[this]}else if(t(this))return[this]}else{if(null!=(null==this.value&&null==this.subResults?this.input:this.value))return[this]}if(null!=this.subResults){for(var n=[],i=0;i<this.subResults.length;i++){var s=this.subResults[i];if(n=n.concat(s.resultAt(e,t)),(e-=s.getLength())<0)break}return n}return[]},e.prototype.getExpect=function(){return null==this.value&&null==this.subResults?[this]:null!=this.subResults?r.reduce(this.subResults,function(e,t){return e.concat(t.getExpect())},[]):[]},e.prototype.getBestExpect=function(){var e=this.getExpect(),t=r.groupBy(e,function(e){return e.input}),n=r.last(r.keys(t).sort(function(e,t){return t.length-e.length})),i=t[n],t=r.groupBy(i,function(e){return e.expression.id});return r.map(t,function(e){return r.chain(e).map(function(e){return{path:e.path().length,result:e}}).sortBy("path").pluck("result").first().value()})},e.prototype.getHumanReadableExpect=function(){var e=this.getBestExpect(),t=e.length>0?r.last(e).input:"";return"Expected "+r.map(e,function(e){return e.getHumanReadable()}).join(" or ")+" but "+(t.length>0?JSON.stringify(t[0]):"end of input")+" found."},e.prototype.before=function(){if(null==this.parent)return"";var e=r.indexOf(this.parent.subResults,this);return this.parent.before()+r.chain(this.parent.subResults).first(e).map(function(e){return e.toString()}).join("").value()},e.prototype.after=function(){if(null==this.parent)return"";var e=r.indexOf(this.parent.subResults,this);return r.chain(this.parent.subResults).last(this.parent.subResults.length-e-1).map(function(e){return e.toString()}).join("").value()+this.parent.after()},e.prototype.getLength=function(){return null!=this.value?this.value.length:null!=this.subResults?r.reduce(this.subResults,function(e,t){return e+t.getLength()},0):this.input.length},e.prototype.toHtmlElement=function(){var e=document.createElement("span"),t=null!=this.expression?this.expression.id:null;return null!=t&&e.setAttribute("data-id",t),e.setAttribute("data-success",this.isSuccess().toString()),null!=this.value?(e.appendChild(document.createTextNode(this.value)),e.setAttribute("data-value",this.value)):null!=this.subResults?r.each(this.subResults,function(t){e.appendChild(t.toHtmlElement())}):(e.appendChild(document.createTextNode(this.input)),e.setAttribute("data-input",this.input),e.className="magic-box-error"+(this.input.length>0?"":" magic-box-error-empty")),e.result=this,e},e.prototype.clean=function(t){if(null!=t||!this.isSuccess()){t=t||r.last(this.getBestExpect()).path(this);var n=r.first(t);if(null!=n){var i=r.indexOf(this.subResults,n),s=-1==i?[]:r.map(r.first(this.subResults,i),function(e){return e.clean()});return s.push(n.clean(r.rest(t))),new e(s,this.expression,this.input)}return new e(null,this.expression,this.input)}return null!=this.value?new e(this.value,this.expression,this.input):null!=this.subResults?new e(r.map(this.subResults,function(e){return e.clean()}),this.expression,this.input):void 0},e.prototype.clone=function(){return null!=this.value?new e(this.value,this.expression,this.input):null!=this.subResults?new e(r.map(this.subResults,function(e){return e.clone()}),this.expression,this.input):new e(null,this.expression,this.input)},e.prototype.toString=function(){return null!=this.value?this.value:null!=this.subResults?r.map(this.subResults,function(e){return e.toString()}).join(""):this.input},e.prototype.getHumanReadable=function(){return this.expression instanceof o.ExpressionConstant?JSON.stringify(this.expression.value):this.expression.id},e}();t.Result=u;var l=function(e){function t(t){var n=e.call(this,[t],s.ExpressionEndOfInput,t.input)||this,i=new u(null,s.ExpressionEndOfInput,t.input.substr(t.getLength()));return i.parent=n,n.subResults.push(i),n}return i(t,e),t}(u);t.EndOfInputResult=l},470:function(e,t,n){"use strict";var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(28),o=function(){function e(e){this.owner=e}return Object.defineProperty(e.prototype,"options",{get:function(){return this.owner.options},set:function(e){this.owner.options=e},enumerable:!0,configurable:!0}),e.prototype.postProcess=function(){this.options=i({},this.options,this.owner.componentOptionsModel.get(s.ComponentOptionsModel.attributesEnum.searchBox)),this.processQueryOnClearVersusEmptyQuery(),this.processQueryOnClearVersusSearchAsYouType()},e.prototype.processQueryOnClearVersusEmptyQuery=function(){this.options.triggerQueryOnClear&&!1===this.owner.searchInterface.options.allowQueriesWithoutKeywords&&(this.owner.logger.warn('Forcing option triggerQueryOnClear to false, as it is not supported when the search interface is configured to not allow queries without keywords (data-allow-queries-without-keywords="false")',this.owner),this.options.triggerQueryOnClear=!1)},e.prototype.processQueryOnClearVersusSearchAsYouType=function(){!0===this.owner.searchInterface.options.allowQueriesWithoutKeywords&&!1===this.options.triggerQueryOnClear&&!0===this.options.enableSearchAsYouType&&(this.owner.logger.warn("Forcing option triggerQueryOnClear to true, since search-as-you-type is enabled",this.owner),this.options.triggerQueryOnClear=!0)},e}();t.QueryboxOptionsProcessing=o},478:function(e,t){},479:function(e,t){},480:function(e,t){},481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(57),s=n(18),o=n(84),r=n(1),u=n(6),l=n(11),a=function(){function e(e,t,n,i){this.coveoRoot=e,this.ID=t,this.searchInterface=u.Component.get(this.coveoRoot.el,s.SearchInterface,!1),this.currentMode="large"}return e.init=function(t,n,s){if(!r.$$(t).find("."+u.Component.computeCssClassName(o.ResultList))){return void new l.Logger("ResponsiveDefaultResultTemplate").trace("No ResultLayout component found : Cannot instantiate ResponsiveResultLayout")}i.ResponsiveComponentsManager.register(e,r.$$(t),o.ResultList.ID,n,s)},e.prototype.registerComponent=function(e){return e instanceof o.ResultList&&(this.resultList=e,!0)},e.prototype.handleResizeEvent=function(){var e=this,t=this.resultList.queryController.getLastResults();this.needSmallMode()?(r.$$(this.resultList.options.resultsContainer).addClass("coveo-card-layout-container"),r.$$(this.resultList.options.resultsContainer).removeClass("coveo-list-layout-container"),"small"!=this.currentMode&&(t&&this.resultList.buildResults(t).then(function(t){e.resultList.renderResults(t)}),this.currentMode="small")):(r.$$(this.resultList.options.resultsContainer).removeClass("coveo-card-layout-container"),r.$$(this.resultList.options.resultsContainer).addClass("coveo-list-layout-container"),"large"!=this.currentMode&&(t&&this.resultList.buildResults(t).then(function(t){e.resultList.renderResults(t)}),this.currentMode="large"))},e.prototype.needSmallMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getSmallScreenWidth()},e}();t.ResponsiveDefaultResultTemplate=a},482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=function(){function e(e,t){this.searchInterface=t,this.resultContainerElement=i.$$(e)}return e.prototype.empty=function(){this.searchInterface.detachComponentsInside(this.resultContainerElement.el),i.$$(this.resultContainerElement).empty()},e.prototype.addClass=function(e){this.resultContainerElement.addClass(e)},e.prototype.isEmpty=function(){return this.resultContainerElement.isEmpty()},e.prototype.hideChildren=function(){this.resultContainerElement.children().forEach(function(e){return i.$$(e).hide()})},e.prototype.getResultElements=function(){return this.resultContainerElement.findAll(".CoveoResult")},Object.defineProperty(e.prototype,"el",{get:function(){return this.resultContainerElement.el},enumerable:!0,configurable:!0}),e.resultCurrentlyBeingRendered=null,e}();t.ResultContainer=s},483:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(198),o=n(1),r=n(0),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getEndFragment=function(e){var t=this;return new Promise(function(n){if(!r.isEmpty(e)){if(t.resultListOptions.enableInfiniteScroll){var i=o.$$(t.resultListOptions.resultsContainer).findAll(".coveo-card-layout-padding");r.each(i,function(e){return o.$$(e).remove()})}var s=document.createDocumentFragment();r.times(3,function(){return s.appendChild(o.$$("div",{className:"coveo-card-layout coveo-card-layout-padding"}).el)}),n(s)}n(null)})},t}(s.ResultListRenderer);t.ResultListCardRenderer=u},524:function(e,t){},526:function(e,t,n){"use strict";function i(){s.exportGlobally({MagicBox:{EndOfInputResult:b.EndOfInputResult,ExpressionConstant:o.ExpressionConstant,ExpressionEndOfInput:r.ExpressionEndOfInput,ExpressionFunction:u.ExpressionFunction,ExpressionList:l.ExpressionList,ExpressionOptions:a.ExpressionOptions,ExpressionRef:c.ExpressionRef,ExpressionRegExp:p.ExpressionRegExp,Grammar:h.Grammar,Grammars:d.Grammars,InputManager:f.InputManager,Instance:g.MagicBoxInstance,OptionResult:y.OptionResult,RefResult:v.RefResult,Result:b.Result,SuggestionsManager:S.SuggestionsManager,Utils:m.MagicBoxUtils,create:g.createMagicBox,requestAnimationFrame:g.requestAnimationFrame}})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),o=n(205),r=n(204),u=n(459),l=n(460),a=n(456),c=n(454),p=n(458),h=n(170),d=n(527),f=n(465),g=n(208),m=n(209),y=n(457),v=n(455),b=n(47),S=n(466);t.GrammarsImportedLocally=d.Grammars,t.doMagicBoxExport=i},527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(128),s=n(467),o=n(462),r=n(468),u=n(206),l=n(461),a=n(463),c=n(464);t.Grammars={Basic:i.Basic,notInWord:i.notInWord,notWordStart:i.notWordStart,Complete:s.Complete,Date:o.Date,Expressions:r.Expressions,ExpressionsGrammar:r.ExpressionsGrammar,Field:u.Field,NestedQuery:l.NestedQuery,QueryExtension:a.QueryExtension,SubExpression:c.SubExpression}},528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(7),o=n(17),r=function(){function e(e){this.element=i.$$("div",{className:"magic-box-clear"});var t=i.$$("div",{className:"magic-box-icon"});this.element.append(t.el),this.element.insertAfter(i.$$(e.element).find("input")),(new o.AccessibleButton).withElement(this.element).withLabel(s.l("Clear")).withSelectAction(function(){return e.clear()}).build(),this.toggleTabindexAndAriaHidden(!1)}return e.prototype.toggleTabindexAndAriaHidden=function(e){var t=e?"0":"-1";this.element.setAttribute("tabindex",t),this.element.setAttribute("aria-hidden",""+!e)},e}();t.MagicBoxClear=r},529:function(e,t){},84:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function u(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(r,u)}l((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(s)throw new TypeError("Generator is already executing.");for(;l;)try{if(s=1,o&&(r=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(o,n[1])).done)return r;switch(o=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],o=0}finally{s=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var s,o,r,u,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};Object.defineProperty(t,"__esModule",{value:!0}),n(478),n(479),n(480);var r=n(0),u=n(10),l=n(124),a=n(31),c=n(3),p=n(5),h=n(30),d=n(16),f=n(13),g=n(22),m=n(1),y=n(79),v=n(4),b=n(9),S=n(6),C=n(8),x=n(2),R=n(166),w=n(58),T=n(481),E=n(431),O=n(430),A=n(111),$=n(427),_=n(63),F=n(85),M=n(482),L=n(483),Q=n(198),I=n(428),P=n(121),D=n(429);E.CoreHelpers.exportAllHelpersGlobally(window.Coveo);var H=function(e){function t(n,i,s,o){void 0===o&&(o=t.ID);var r=e.call(this,n,o,s)||this;return r.element=n,r.options=i,r.bindings=s,r.currentlyDisplayedResults=[],r.reachedTheEndOfResults=!1,r.disableLayoutChange=!1,r.successiveScrollCount=0,r.options=C.ComponentOptions.initComponentOptions(n,t,i),p.Assert.exists(n),p.Assert.exists(r.options),p.Assert.exists(r.options.resultTemplate),p.Assert.exists(r.options.infiniteScrollContainer),r.showOrHideElementsDependingOnState(!1,!1),r.bind.onRootElement(u.QueryEvents.newQuery,function(e){return r.handleNewQuery()}),r.bind.onRootElement(u.QueryEvents.buildingQuery,function(e){return r.handleBuildingQuery(e)}),r.bind.onRootElement(u.QueryEvents.querySuccess,function(e){return r.handleQuerySuccess(e)}),r.bind.onRootElement(u.QueryEvents.duringQuery,function(e){return r.handleDuringQuery()}),r.bind.onRootElement(u.QueryEvents.queryError,function(e){return r.handleQueryError()}),m.$$(r.root).on(a.ResultListEvents.changeLayout,function(e,t){return r.handleChangeLayout(t)}),r.options.enableInfiniteScroll&&(r.handlePageChanged(),r.bind.on(r.options.infiniteScrollContainer,"scroll",function(e){r.successiveScrollCount=0,r.handleScrollOfResultList()})),r.bind.onQueryState(d.MODEL_EVENTS.CHANGE_ONE,f.QUERY_STATE_ATTRIBUTES.FIRST,function(){return r.handlePageChanged()}),r.resultContainer=r.initResultContainer(),p.Assert.exists(r.options.resultsContainer),r.initWaitAnimationContainer(),p.Assert.exists(r.options.waitAnimationContainer),r.setupTemplatesVersusLayouts(),m.$$(r.root).on(l.ResultLayoutEvents.populateResultLayout,function(e,t){return t.layouts.push(r.options.layout)}),r.setupRenderer(),r}return i(t,e),t.getDefaultTemplate=function(e){var n=t.loadTemplatesFromCache();if(null!=n)return n;var i=S.Component.get(e);return Coveo.Recommendation&&i.searchInterface instanceof Coveo.Recommendation?new O.DefaultRecommendationTemplate:new A.DefaultResultTemplate},t.loadTemplatesFromCache=function(){var e=_.TemplateCache.getResultListTemplateNames();return e.length>0?new F.TemplateList(r.compact(r.map(e,function(e){return _.TemplateCache.getTemplate(e)}))):null},t.prototype.getAutoSelectedFieldsToInclude=function(){return r.chain(this.options.resultTemplate.getFields()).concat(this.getMinimalFieldsToInclude()).compact().unique().value()},t.prototype.setupTemplatesVersusLayouts=function(){var e=this,t="coveo-"+this.options.layout+"-layout-container";this.resultContainer.addClass(t),"table"===this.options.layout&&(this.options.resultTemplate=new $.TableTemplate(this.options.resultTemplate.templates||[])),this.options.resultTemplate instanceof F.TemplateList?r.each(this.options.resultTemplate.templates,function(t){t.layout||(t.layout=e.options.layout)}):this.options.resultTemplate instanceof A.DefaultResultTemplate&&"list"==this.options.layout&&T.ResponsiveDefaultResultTemplate.init(this.root,this,{})},t.prototype.renderResults=function(e,t){var n=this;return void 0===t&&(t=!1),t||this.resultContainer.empty(),this.renderer.renderResults(e,t,this.triggerNewResultDisplayed.bind(this)).then(function(){return n.triggerNewResultsDisplayed()})},t.prototype.buildResults=function(e){var t=this.options.layout;return this.templateToHtml.buildResults(e,t,this.currentlyDisplayedResults)},t.prototype.buildResult=function(e){var t=this.options.layout;return this.templateToHtml.buildResult(e,t,this.currentlyDisplayedResults)},t.prototype.displayMoreResults=function(e){var n=this;return p.Assert.isLargerOrEqualsThan(1,e),this.isCurrentlyFetchingMoreResults()?void this.logger.warn("Ignoring request to display more results since we're already doing so"):this.hasPotentiallyMoreResultsToDisplay()?(this.options.enableInfiniteScrollWaitingAnimation&&this.showWaitingAnimationForInfiniteScrolling(),this.fetchingMoreResults=this.queryController.fetchMore(e),this.fetchingMoreResults.then(function(t){p.Assert.exists(t),n.usageAnalytics.logCustomEvent(b.analyticsActionCauseList.pagerScrolling,{},n.element);var i=t.results;n.reachedTheEndOfResults=e>t.results.length,n.buildResults(t).then(function(e){return s(n,void 0,void 0,function(){var t=this;return o(this,function(n){return this.renderResults(e,!0),r.each(i,function(e){t.currentlyDisplayedResults.push(e)}),this.triggerNewResultsDisplayed(),[2]})})})}),this.fetchingMoreResults.finally(function(){n.hideWaitingAnimationForInfiniteScrolling(),n.fetchingMoreResults=void 0,h.Defer.defer(function(){n.successiveScrollCount++,n.successiveScrollCount<=t.MAX_AMOUNT_OF_SUCESSIVE_REQUESTS?n.handleScrollOfResultList():(n.logger.info("Result list has triggered 5 consecutive queries to try and fill up the scrolling container, but it is still unable to do so"),n.logger.info("Try explicitly setting the 'data-infinite-scroll-container-selector' option on the result list. See : https://coveo.github.io/search-ui/components/resultlist.html#options.infinitescrollcontainer"))})}),this.fetchingMoreResults):void this.logger.warn("Ignoring request to display more results since we know there aren't more to display")},Object.defineProperty(t.prototype,"templateToHtml",{get:function(){var e={resultTemplate:this.options.resultTemplate,searchInterface:this.searchInterface,queryStateModel:this.queryStateModel};return new D.TemplateToHtml(e)},enumerable:!0,configurable:!0}),t.prototype.getDisplayedResults=function(){return this.currentlyDisplayedResults},t.prototype.getDisplayedResultsElements=function(){return this.resultContainer.getResultElements()},t.prototype.enable=function(){var t=this;e.prototype.enable.call(this),this.disableLayoutChange=!1,r.each(this.resultLayoutSelectors,function(e){e.enableLayouts([t.options.layout])}),m.$$(this.element).removeClass("coveo-hidden")},t.prototype.disable=function(){var t=this;e.prototype.disable.call(this);var n=r.map(this.otherResultLists,function(e){return e.options.layout});r.contains(n,this.options.layout)||this.disableLayoutChange||r.each(this.resultLayoutSelectors,function(e){e.disableLayouts([t.options.layout])}),this.disableLayoutChange=!1,m.$$(this.element).addClass("coveo-hidden")},t.prototype.autoCreateComponentsInsideResult=function(e,t){return this.templateToHtml.autoCreateComponentsInsideResult(e,t)},t.prototype.triggerNewResultDisplayed=function(e,t){var n={result:e,item:t};m.$$(this.element).trigger(a.ResultListEvents.newResultDisplayed,n)},t.prototype.triggerNewResultsDisplayed=function(){m.$$(this.element).trigger(a.ResultListEvents.newResultsDisplayed,{})},t.prototype.handleDuringQuery=function(){this.logger.trace("Emptying the result container"),this.cancelFetchingMoreResultsIfNeeded(),this.showWaitingAnimation(),this.showOrHideElementsDependingOnState(!1,!1)},t.prototype.handleQueryError=function(){this.hideWaitingAnimation(),this.resultContainer.empty(),this.currentlyDisplayedResults=[],this.reachedTheEndOfResults=!0},t.prototype.handleQuerySuccess=function(e){var n=this;p.Assert.exists(e),p.Assert.exists(e.results);var i=e.results;this.logger.trace("Received query results from new query",i),this.hideWaitingAnimation(),t.resultCurrentlyBeingRendered=void 0,this.reachedTheEndOfResults=e.query.numberOfResults>e.results.results.length,this.currentlyDisplayedResults=[],this.buildResults(e.results).then(function(t){return s(n,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,this.renderResults(t)];case 1:return n.sent(),this.showOrHideElementsDependingOnState(!0,0!=this.currentlyDisplayedResults.length),g.DeviceUtils.isMobileDevice()&&void 0!=this.options.mobileScrollContainer&&(this.options.mobileScrollContainer.scrollTop=0),this.options.enableInfiniteScroll&&i.results.length==e.queryBuilder.numberOfResults&&(this.scrollToTopIfEnabled(),this.handleScrollOfResultList()),[2]}})})})},t.prototype.handleScrollOfResultList=function(){!this.isCurrentlyFetchingMoreResults()&&this.options.enableInfiniteScroll&&this.isScrollingOfResultListAlmostAtTheBottom()&&this.hasPotentiallyMoreResultsToDisplay()&&this.displayMoreResults(this.options.infiniteScrollPageSize)},t.prototype.handlePageChanged=function(){var e=this;this.bind.onRootElement(u.QueryEvents.deferredQuerySuccess,function(){setTimeout(function(){e.scrollToTopIfEnabled()},0)})},t.prototype.scrollToTopIfEnabled=function(){this.options.enableScrollToTop&&P.ResultListUtils.scrollToTop(this.root)},t.prototype.handleNewQuery=function(){m.$$(this.element).removeClass("coveo-hidden"),t.resultCurrentlyBeingRendered=void 0},Object.defineProperty(t.prototype,"otherResultLists",{get:function(){var e=this.searchInterface.getComponents(t.ID);return r.without(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resultLayoutSelectors",{get:function(){return this.searchInterface.getComponents("ResultLayoutSelector")},enumerable:!0,configurable:!0}),t.prototype.handleBuildingQuery=function(e){if(null!=this.options.fieldsToInclude&&e.queryBuilder.addFieldsToInclude(r.map(this.options.fieldsToInclude,function(e){return e.substr(1)})),this.options.autoSelectFieldsToInclude){var t=r.flatten(r.map(this.otherResultLists,function(e){return e.getAutoSelectedFieldsToInclude()}));e.queryBuilder.addRequiredFields(r.unique(t.concat(this.getAutoSelectedFieldsToInclude()))),e.queryBuilder.includeRequiredFields=!0}},t.prototype.handleChangeLayout=function(e){var t=this;e.layout===this.options.layout?(this.disableLayoutChange=!1,this.enable(),this.options.resultTemplate.layout=this.options.layout,e.results&&(this.resultContainer.isEmpty()&&new R.InitializationPlaceholder(this.root).withVisibleRootElement().withPlaceholderForResultList(),h.Defer.defer(function(){return s(t,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,this.buildResults(e.results)];case 1:return t=n.sent(),this.renderResults(t),this.showOrHideElementsDependingOnState(!0,0!==this.currentlyDisplayedResults.length),[2]}})})}))):(this.disableLayoutChange=!0,this.disable(),this.resultContainer.empty())},t.prototype.isCurrentlyFetchingMoreResults=function(){return v.Utils.exists(this.fetchingMoreResults)},t.prototype.getMinimalFieldsToInclude=function(){return["author","language","urihash","objecttype","collection","source","language","permanentid"]},t.prototype.isScrollingOfResultListAlmostAtTheBottom=function(){var e;try{e=this.options.infiniteScrollContainer instanceof Window}catch(t){e=!1}return e?this.isScrollAtBottomForWindowElement():this.isScrollAtBottomForHtmlElement()},t.prototype.isScrollAtBottomForWindowElement=function(){var e=new m.Win(window),t=e.height(),n=e.scrollY();return new m.Doc(document).height()-(t+n)<t/2},t.prototype.isScrollAtBottomForHtmlElement=function(){var e=this.options.infiniteScrollContainer,t=e.clientHeight;return e.scrollHeight-(e.scrollTop+t)<t/2},t.prototype.hasPotentiallyMoreResultsToDisplay=function(){return this.currentlyDisplayedResults.length>0&&!this.reachedTheEndOfResults},t.prototype.cancelFetchingMoreResultsIfNeeded=function(){this.isCurrentlyFetchingMoreResults()&&(this.logger.trace("Cancelling fetching more results"),Promise.reject(this.fetchingMoreResults),this.fetchingMoreResults=void 0)},t.prototype.showOrHideElementsDependingOnState=function(e,t){var n=m.$$(this.element).findAll(".coveo-show-if-query"),i=m.$$(this.element).findAll(".coveo-show-if-no-query"),s=m.$$(this.element).findAll(".coveo-show-if-results"),o=m.$$(this.element).findAll(".coveo-show-if-no-results");r.each(n,function(t){m.$$(t).toggle(e)}),r.each(i,function(t){m.$$(t).toggle(!e)}),r.each(s,function(n){m.$$(n).toggle(e&&t)}),r.each(o,function(n){m.$$(n).toggle(e&&!t)})},Object.defineProperty(t.prototype,"waitAnimation",{get:function(){return this.options.waitAnimation.toLowerCase()},enumerable:!0,configurable:!0}),t.prototype.showWaitingAnimation=function(){switch(this.waitAnimation){case"fade":m.$$(this.options.waitAnimationContainer).addClass("coveo-fade-out");break;case"spinner":this.resultContainer.hideChildren(),void 0==m.$$(this.options.waitAnimationContainer).find(".coveo-wait-animation")&&this.options.waitAnimationContainer.appendChild(y.DomUtils.getBasicLoadingAnimation())}},t.prototype.hideWaitingAnimation=function(){switch(this.waitAnimation){case"fade":m.$$(this.options.waitAnimationContainer).removeClass("coveo-fade-out");break;case"spinner":var e=m.$$(this.options.waitAnimationContainer).find(".coveo-loading-spinner");e&&m.$$(e).detach()}},t.prototype.showWaitingAnimationForInfiniteScrolling=function(){var e=y.DomUtils.getLoadingSpinner();if("card"==this.options.layout&&this.options.enableInfiniteScroll){var t=m.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner-container");r.each(t,function(e){return m.$$(e).remove()});var n=m.$$("div",{className:"coveo-loading-spinner-container"});n.append(e),this.options.waitAnimationContainer.appendChild(n.el)}else this.options.waitAnimationContainer.appendChild(y.DomUtils.getLoadingSpinner())},t.prototype.hideWaitingAnimationForInfiniteScrolling=function(){var e=m.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner"),t=m.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner-container");r.each(e,function(e){return m.$$(e).remove()}),r.each(t,function(e){return m.$$(e).remove()})},t.prototype.initResultContainer=function(){if(!this.options.resultsContainer){var e="table"===this.options.layout?"table":"div";this.options.resultsContainer=m.$$(e,{className:"coveo-result-list-container"}).el,this.initResultContainerAddToDom()}return new M.ResultContainer(this.options.resultsContainer,this.searchInterface)},t.prototype.initResultContainerAddToDom=function(){this.element.appendChild(this.options.resultsContainer)},t.prototype.initWaitAnimationContainer=function(){this.options.waitAnimationContainer||(this.options.waitAnimationContainer=this.resultContainer.el)},t.prototype.setupRenderer=function(){var e={options:this.searchInterface.options.originalOptionsObject,bindings:this.bindings},t=function(t){return x.Initialization.automaticallyCreateComponentsInside(t,e)};switch(this.options.layout){case"card":this.renderer=new L.ResultListCardRenderer(this.options,t);break;case"table":this.renderer=new I.ResultListTableRenderer(this.options,t);break;case"list":default:this.renderer=new Q.ResultListRenderer(this.options,t)}},t.ID="ResultList",t.doExport=function(){c.exportGlobally({ResultList:t})},t.options={resultsContainer:C.ComponentOptions.buildChildHtmlElementOption(),resultTemplate:w.TemplateComponentOptions.buildTemplateOption({defaultFunction:t.getDefaultTemplate}),waitAnimation:C.ComponentOptions.buildStringOption({defaultValue:"none"}),waitAnimationContainer:C.ComponentOptions.buildChildHtmlElementOption({postProcessing:function(e,t){return e||t.resultsContainer}}),enableInfiniteScroll:C.ComponentOptions.buildBooleanOption({defaultValue:!1}),infiniteScrollPageSize:C.ComponentOptions.buildNumberOption({defaultValue:10,min:1,depend:"enableInfiniteScroll"}),infiniteScrollContainer:C.ComponentOptions.buildChildHtmlElementOption({depend:"enableInfiniteScroll",defaultFunction:function(e){return C.ComponentOptions.findParentScrolling(e)}}),enableInfiniteScrollWaitingAnimation:C.ComponentOptions.buildBooleanOption({depend:"enableInfiniteScroll",defaultValue:!0}),mobileScrollContainer:C.ComponentOptions.buildSelectorOption({defaultFunction:function(){return document.querySelector(".coveo-results-column")}}),autoSelectFieldsToInclude:C.ComponentOptions.buildBooleanOption({defaultValue:!1}),fieldsToInclude:C.ComponentOptions.buildFieldsOption({includeInResults:!0}),layout:C.ComponentOptions.buildStringOption({defaultValue:"list",required:!0}),enableScrollToTop:C.ComponentOptions.buildBooleanOption({defaultValue:!0})},t.resultCurrentlyBeingRendered=null,t.MAX_AMOUNT_OF_SUCESSIVE_REQUESTS=5,t}(S.Component);t.ResultList=H,x.Initialization.registerAutoCreateComponent(H)}});