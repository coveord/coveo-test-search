{"version":3,"sources":["ChatterLikedBy.min__5f3280c404a1ee75a113.js","./src/utils/ChatterUtils.ts","./src/ui/ChatterLikedBy/ChatterLikedBy.ts"],"names":["webpackJsonpCoveo__temporary","224","module","exports","__webpack_require__","Object","defineProperty","value","buildURI","objectURI","objectId","newObjectId","replace","bindClickEventToElement","element","openInPrimaryTab","openInSubTab","ChatterUtils","242","__extends","this","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","options","bindings","result","ChatterLikedBy","ID","ComponentOptions","initComponentOptions","Utils","isNullOrUndefined","getFieldValue","likeNames","split","likeIds","rootElement","$$","className","append","el","thumbIcon","fullListElement","renderLikesList","nbLikesToRender","_this","tempElement","i","length","renderLikeLink","l","toLowerCase","othersCount","clickableLink","text","toString","on","e","preventDefault","empty","innerHTML","likeName","likeId","link","href","clickUri","doExport","exportGlobally","buildNumberOption","defaultValue","min","buildBooleanOption","Component","Initialization","registerAutoCreateComponent"],"mappings":"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","file":"ChatterLikedBy.min__5f3280c404a1ee75a113.js","sourcesContent":["webpackJsonpCoveo__temporary([50],{\n\n/***/ 224:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ChatterUtils = /** @class */ (function () {\r\n    function ChatterUtils() {\r\n    }\r\n    ChatterUtils.buildURI = function (objectURI, objectId, newObjectId) {\r\n        return objectURI.replace(objectId, newObjectId);\r\n    };\r\n    ChatterUtils.bindClickEventToElement = function (element, openInPrimaryTab, openInSubTab) {\r\n        return element;\r\n    };\r\n    return ChatterUtils;\r\n}());\r\nexports.ChatterUtils = ChatterUtils;\r\n\n\n/***/ }),\n\n/***/ 242:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Initialization_1 = __webpack_require__(2);\r\nvar ComponentOptions_1 = __webpack_require__(8);\r\nvar Component_1 = __webpack_require__(7);\r\nvar Utils_1 = __webpack_require__(4);\r\nvar Dom_1 = __webpack_require__(1);\r\nvar Strings_1 = __webpack_require__(6);\r\nvar ChatterUtils_1 = __webpack_require__(224);\r\nvar GlobalExports_1 = __webpack_require__(3);\r\nvar ChatterLikedBy = /** @class */ (function (_super) {\r\n    __extends(ChatterLikedBy, _super);\r\n    function ChatterLikedBy(element, options, bindings, result) {\r\n        var _this = _super.call(this, element, ChatterLikedBy.ID, bindings) || this;\r\n        _this.element = element;\r\n        _this.options = options;\r\n        _this.bindings = bindings;\r\n        _this.result = result;\r\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, ChatterLikedBy, options);\r\n        if (!Utils_1.Utils.isNullOrUndefined(Utils_1.Utils.getFieldValue(result, 'sflikedby')) &&\r\n            !Utils_1.Utils.isNullOrUndefined(Utils_1.Utils.getFieldValue(result, 'sflikedbyid'))) {\r\n            var likeNames = Utils_1.Utils.getFieldValue(result, 'sflikedby').split(';');\r\n            var likeIds = Utils_1.Utils.getFieldValue(result, 'sflikedbyid').split(';');\r\n            var rootElement = Dom_1.$$('div', {\r\n                className: 'coveo-chatter-result-box-row'\r\n            });\r\n            Dom_1.$$(element).append(rootElement.el);\r\n            var thumbIcon = Dom_1.$$('div', {\r\n                className: 'coveo-sprites-common-thumbup_inactive coveo-chatter-result-box-icon'\r\n            });\r\n            rootElement.append(thumbIcon.el);\r\n            var fullListElement = Dom_1.$$('div', {\r\n                className: 'coveo-chatter-result-likes'\r\n            });\r\n            rootElement.append(fullListElement.el);\r\n            _this.renderLikesList(fullListElement.el, result, likeNames, likeIds, _this.options.nbLikesToRender);\r\n        }\r\n        return _this;\r\n    }\r\n    ChatterLikedBy.prototype.renderLikesList = function (element, result, likeNames, likeIds, nbLikesToRender) {\r\n        var _this = this;\r\n        var tempElement = Dom_1.$$('div');\r\n        for (var i = 0; i < likeIds.length - 1 && (nbLikesToRender == 0 || i < nbLikesToRender); i++) {\r\n            tempElement.append(this.renderLikeLink(result, likeNames[i], likeIds[i]));\r\n            if ((nbLikesToRender == 0 || i < nbLikesToRender - 1) && i < likeIds.length - 2) {\r\n                tempElement.append(Dom_1.$$('span', {}, ', ').el);\r\n            }\r\n            else if (i < likeIds.length - 1) {\r\n                tempElement.append(Dom_1.$$('span', {}, \" \" + Strings_1.l('And').toLowerCase() + \" \").el);\r\n            }\r\n        }\r\n        if (nbLikesToRender == 0 || likeIds.length <= nbLikesToRender) {\r\n            tempElement.append(this.renderLikeLink(result, likeNames[likeIds.length - 1], likeIds[likeIds.length - 1]));\r\n        }\r\n        else {\r\n            var othersCount = likeIds.length - nbLikesToRender;\r\n            var clickableLink = Dom_1.$$('a');\r\n            clickableLink.text(\" \" + Strings_1.l('Others', othersCount.toString(), othersCount));\r\n            clickableLink.on('click', function (e) {\r\n                e.preventDefault();\r\n                Dom_1.$$(element).empty();\r\n                _this.renderLikesList(element, result, likeNames, likeIds, 0);\r\n            });\r\n            tempElement.append(clickableLink.el);\r\n        }\r\n        if (likeIds.length > 0) {\r\n            var name_1 = Dom_1.$$('span');\r\n            name_1.el.innerHTML = Strings_1.l('LikesThis', tempElement.el.innerHTML, likeIds.length);\r\n            Dom_1.$$(element).append(name_1.el);\r\n        }\r\n    };\r\n    ChatterLikedBy.prototype.renderLikeLink = function (result, likeName, likeId) {\r\n        var link = Dom_1.$$('a', {\r\n            href: ChatterUtils_1.ChatterUtils.buildURI(result.clickUri, Utils_1.Utils.getFieldValue(result, 'sffeeditemid'), likeId)\r\n        });\r\n        link.text(likeName);\r\n        return link.el;\r\n    };\r\n    ChatterLikedBy.ID = 'ChatterLikedBy';\r\n    ChatterLikedBy.doExport = function () {\r\n        GlobalExports_1.exportGlobally({\r\n            ChatterLikedBy: ChatterLikedBy\r\n        });\r\n    };\r\n    ChatterLikedBy.options = {\r\n        nbLikesToRender: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 2, min: 0 }),\r\n        openInPrimaryTab: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n        openInSubTab: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true })\r\n    };\r\n    return ChatterLikedBy;\r\n}(Component_1.Component));\r\nexports.ChatterLikedBy = ChatterLikedBy;\r\nInitialization_1.Initialization.registerAutoCreateComponent(ChatterLikedBy);\r\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// ChatterLikedBy.min__5f3280c404a1ee75a113.js","export class ChatterUtils {\r\n  static buildURI(objectURI: string, objectId: string, newObjectId: string) {\r\n    return objectURI.replace(objectId, newObjectId);\r\n  }\r\n\r\n  static bindClickEventToElement(element: HTMLElement, openInPrimaryTab: boolean, openInSubTab: boolean) {\r\n    return element;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ChatterUtils.ts","import { Initialization } from '../Base/Initialization';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { l } from '../../strings/Strings';\r\nimport { ChatterUtils } from '../../utils/ChatterUtils';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\nexport interface IChatterLikedByOptions {\r\n  nbLikesToRender: number;\r\n  openInPrimaryTab: boolean;\r\n  openInSubTab: boolean;\r\n}\r\n\r\nexport class ChatterLikedBy extends Component {\r\n  static ID = 'ChatterLikedBy';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      ChatterLikedBy: ChatterLikedBy\r\n    });\r\n  };\r\n\r\n  static options: IChatterLikedByOptions = {\r\n    nbLikesToRender: ComponentOptions.buildNumberOption({ defaultValue: 2, min: 0 }),\r\n    openInPrimaryTab: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n    openInSubTab: ComponentOptions.buildBooleanOption({ defaultValue: true })\r\n  };\r\n\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options?: IChatterLikedByOptions,\r\n    public bindings?: IComponentBindings,\r\n    public result?: IQueryResult\r\n  ) {\r\n    super(element, ChatterLikedBy.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, ChatterLikedBy, options);\r\n\r\n    if (\r\n      !Utils.isNullOrUndefined(Utils.getFieldValue(result, 'sflikedby')) &&\r\n      !Utils.isNullOrUndefined(Utils.getFieldValue(result, 'sflikedbyid'))\r\n    ) {\r\n      let likeNames = Utils.getFieldValue(result, 'sflikedby').split(';');\r\n      let likeIds = Utils.getFieldValue(result, 'sflikedbyid').split(';');\r\n\r\n      let rootElement = $$('div', {\r\n        className: 'coveo-chatter-result-box-row'\r\n      });\r\n      $$(element).append(rootElement.el);\r\n\r\n      let thumbIcon = $$('div', {\r\n        className: 'coveo-sprites-common-thumbup_inactive coveo-chatter-result-box-icon'\r\n      });\r\n      rootElement.append(thumbIcon.el);\r\n\r\n      let fullListElement = $$('div', {\r\n        className: 'coveo-chatter-result-likes'\r\n      });\r\n      rootElement.append(fullListElement.el);\r\n\r\n      this.renderLikesList(fullListElement.el, result, likeNames, likeIds, this.options.nbLikesToRender);\r\n    }\r\n  }\r\n\r\n  private renderLikesList(element: HTMLElement, result: IQueryResult, likeNames: string[], likeIds: string[], nbLikesToRender: number) {\r\n    let tempElement = $$('div');\r\n\r\n    for (let i = 0; i < likeIds.length - 1 && (nbLikesToRender == 0 || i < nbLikesToRender); i++) {\r\n      tempElement.append(this.renderLikeLink(result, likeNames[i], likeIds[i]));\r\n\r\n      if ((nbLikesToRender == 0 || i < nbLikesToRender - 1) && i < likeIds.length - 2) {\r\n        tempElement.append($$('span', {}, ', ').el);\r\n      } else if (i < likeIds.length - 1) {\r\n        tempElement.append($$('span', {}, ` ${l('And').toLowerCase()} `).el);\r\n      }\r\n    }\r\n\r\n    if (nbLikesToRender == 0 || likeIds.length <= nbLikesToRender) {\r\n      tempElement.append(this.renderLikeLink(result, likeNames[likeIds.length - 1], likeIds[likeIds.length - 1]));\r\n    } else {\r\n      let othersCount = likeIds.length - nbLikesToRender;\r\n      let clickableLink = $$('a');\r\n      clickableLink.text(` ${l('Others', othersCount.toString(), othersCount)}`);\r\n      clickableLink.on('click', (e: Event) => {\r\n        e.preventDefault();\r\n        $$(element).empty();\r\n        this.renderLikesList(element, result, likeNames, likeIds, 0);\r\n      });\r\n      tempElement.append(clickableLink.el);\r\n    }\r\n\r\n    if (likeIds.length > 0) {\r\n      let name = $$('span');\r\n      name.el.innerHTML = l('LikesThis', tempElement.el.innerHTML, likeIds.length);\r\n      $$(element).append(name.el);\r\n    }\r\n  }\r\n\r\n  private renderLikeLink(result: IQueryResult, likeName: string, likeId: string): HTMLElement {\r\n    let link = $$('a', {\r\n      href: ChatterUtils.buildURI(result.clickUri, Utils.getFieldValue(result, 'sffeeditemid'), likeId)\r\n    });\r\n    link.text(likeName);\r\n    return link.el;\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(ChatterLikedBy);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ChatterLikedBy/ChatterLikedBy.ts"],"sourceRoot":""}