{"version":3,"sources":["./src/ui/YouTube/YouTubeThumbnail.ts","./src/utils/AccessibleModal.ts","./src/ui/Backdrop/Backdrop.ts","./src/ui/FocusTrap/FocusTrap.ts","./sass/_ResultLink.scss","./sass/_Backdrop.scss","./src/ui/ResultLink/ResultLink.ts"],"names":[],"mappings":"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","file":"Backdrop__93518d21988b4536d33d.js","sourcesContent":["import { ModalBox as ModalBoxModule } from '../../ExternalModulesShim';\r\nimport { exportGlobally } from '../../GlobalExports';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { $$, Dom } from '../../utils/Dom';\r\nimport { SVGDom } from '../../utils/SVGDom';\r\nimport { SVGIcons } from '../../utils/SVGIcons';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Component } from '../Base/Component';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { get } from '../Base/RegisteredNamedMethods';\r\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\r\nimport { ResultLink } from '../ResultLink/ResultLink';\r\nimport { AccessibleModal } from '../../utils/AccessibleModal';\r\n\r\nexport interface IYouTubeThumbnailOptions {\r\n  width: string;\r\n  height: string;\r\n  embed: boolean;\r\n}\r\n\r\n/**\r\n * The YouTubeThumbnail component automatically fetches the thumbnail of a YouTube video.\r\n *\r\n * This component differs from the standard {@link Thumbnail} component because the thumbnail it outputs is always\r\n * clickable.\r\n *\r\n * Depending on the component configuration, clicking a YouTube thumbnail can either automatically open a modal box\r\n * containing the `iframe` from YouTube, or open the target URL in the current window (see\r\n * {@link YouTubeThumbnail.options.embed}).\r\n *\r\n * This component is a result template component (see [Result Templates](https://docs.coveo.com/en/413/)).\r\n */\r\nexport class YouTubeThumbnail extends Component {\r\n  static ID = 'YouTubeThumbnail';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      YouTubeThumbnail: YouTubeThumbnail\r\n    });\r\n  };\r\n\r\n  /**\r\n   * @componentOptions\r\n   */\r\n  static options: IYouTubeThumbnailOptions = {\r\n    /**\r\n     * Specifies the width (in pixels) of the YouTube thumbnail.\r\n     *\r\n     * Default value is `200px`.\r\n     */\r\n    width: ComponentOptions.buildStringOption({ defaultValue: '200px' }),\r\n\r\n    /**\r\n     * Specifies the height (in pixels) of the YouTube thumbnail.\r\n     *\r\n     * Default value is `112px`.\r\n     */\r\n    height: ComponentOptions.buildStringOption({ defaultValue: '112px' }),\r\n\r\n    /**\r\n     * Specifies whether clicking on the YouTube thumbnail loads the video in a modal box.\r\n     *\r\n     * Setting this option to `false` causes the browser to change its current location to that of the target URL when\r\n     * the end user clicks the YouTube thumbnail.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    embed: ComponentOptions.buildBooleanOption({ defaultValue: true })\r\n  };\r\n\r\n  public resultLink: Dom;\r\n\r\n  private modalbox: AccessibleModal;\r\n\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options?: IYouTubeThumbnailOptions,\r\n    public bindings?: IResultsComponentBindings,\r\n    public result?: IQueryResult,\r\n    ModalBox = ModalBoxModule,\r\n    private origin?: HTMLElement\r\n  ) {\r\n    super(element, YouTubeThumbnail.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, YouTubeThumbnail, options);\r\n\r\n    this.resultLink = $$('a', {\r\n      className: Component.computeCssClassName(ResultLink)\r\n    });\r\n\r\n    if (!origin) {\r\n      this.origin = this.resultLink.el;\r\n    }\r\n\r\n    const thumbnailDiv = $$('div', {\r\n      className: 'coveo-youtube-thumbnail-container'\r\n    });\r\n\r\n    this.resultLink.append(thumbnailDiv.el);\r\n\r\n    const img = $$('img', {\r\n      src: Utils.getFieldValue(this.result, 'ytthumbnailurl'),\r\n      className: 'coveo-youtube-thumbnail-img',\r\n      alt: this.result.title,\r\n      title: this.result.title\r\n    });\r\n\r\n    img.el.style.width = this.options.width;\r\n    img.el.style.height = this.options.height;\r\n    img.el.onerror = () => {\r\n      const svgVideo = $$('div', {}, SVGIcons.icons.video).el;\r\n      SVGDom.addStyleToSVGInContainer(svgVideo, {\r\n        width: this.options.width\r\n      });\r\n      $$(img).remove();\r\n      thumbnailDiv.append(svgVideo);\r\n    };\r\n    thumbnailDiv.append(img.el);\r\n\r\n    const span = $$('span', {\r\n      className: 'coveo-youtube-thumbnail-play-button'\r\n    });\r\n\r\n    thumbnailDiv.append(span.el);\r\n\r\n    $$(this.element).append(this.resultLink.el);\r\n\r\n    Initialization.automaticallyCreateComponentsInsideResult(element, result, {\r\n      ResultLink: this.options.embed ? { onClick: () => this.openYoutubeIframe() } : null\r\n    });\r\n    this.modalbox = new AccessibleModal('coveo-youtube-player', this.searchInterface.options.modalContainer, ModalBox, {\r\n      overlayClose: true\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Open the result link embedded in this component.\r\n   *\r\n   * With a standard configuration of this component, this will open an iframe that automatically plays the video.\r\n   */\r\n  public openResultLink() {\r\n    let resultLinkComponent = <ResultLink>get(this.resultLink.el);\r\n    resultLinkComponent.openLinkAsConfigured();\r\n  }\r\n\r\n  private openYoutubeIframe() {\r\n    // need to put iframe inside div : iframe with position absolute and left:0, right : 0 , bottom: 0 is not standard/supported\r\n    const iframe = $$('iframe', {\r\n      src: `https://www.youtube.com/embed/${this.extractVideoId()}?autoplay=1`,\r\n      allowfullscreen: 'allowfullscreen',\r\n      width: '100%',\r\n      height: '100%',\r\n      title: this.result.title\r\n    });\r\n\r\n    const div = $$('div');\r\n\r\n    div.append(iframe.el);\r\n\r\n    this.modalbox.openResult({\r\n      result: this.result,\r\n      options: { showDate: true, title: this.result.title },\r\n      bindings: this.bindings,\r\n      content: div.el,\r\n      validation: () => true,\r\n      origin: this.origin\r\n    });\r\n\r\n    $$($$(this.modalbox.wrapper).find('.coveo-quickview-close-button')).on('click', () => {\r\n      this.modalbox.close();\r\n    });\r\n  }\r\n\r\n  private extractVideoId() {\r\n    return this.result.clickUri.split('watch?v=')[1];\r\n  }\r\n}\r\nInitialization.registerAutoCreateComponent(YouTubeThumbnail);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/YouTube/YouTubeThumbnail.ts","import { ModalBox as ModalBoxModule } from '../ExternalModulesShim';\r\nimport { FocusTrap } from '../ui/FocusTrap/FocusTrap';\r\nimport { l } from '../strings/Strings';\r\nimport { $$ } from './Dom';\r\nimport { KeyboardUtils, KEYBOARD } from './KeyboardUtils';\r\nimport { IQuickViewHeaderOptions } from './DomUtils';\r\nimport { IQueryResult } from '../rest/QueryResult';\r\nimport { IComponentBindings } from '../ui/Base/ComponentBindings';\r\nimport { DomUtils } from '../Core';\r\n\r\nexport interface IAccessibleModalOptions {\r\n  overlayClose?: boolean;\r\n  sizeMod: 'small' | 'normal' | 'big';\r\n}\r\n\r\nexport interface IAccessibleModalOpenParameters {\r\n  content: HTMLElement;\r\n  validation: () => boolean;\r\n  origin: HTMLElement;\r\n}\r\n\r\nexport interface IAccessibleModalOpenResultParameters extends IAccessibleModalOpenParameters {\r\n  result: IQueryResult;\r\n  options: IQuickViewHeaderOptions;\r\n  bindings: IComponentBindings;\r\n}\r\n\r\nexport interface IAccessibleModalOpenNormalParameters extends IAccessibleModalOpenParameters {\r\n  title: HTMLElement;\r\n}\r\n\r\nexport class AccessibleModal {\r\n  private focusTrap: FocusTrap;\r\n  private activeModal: Coveo.ModalBox.ModalBox;\r\n  private options: IAccessibleModalOptions;\r\n  private initiallyFocusedElement: HTMLElement;\r\n\r\n  public get isOpen() {\r\n    return !!this.focusTrap;\r\n  }\r\n\r\n  public get element() {\r\n    return this.activeModal && this.activeModal.modalBox;\r\n  }\r\n\r\n  public get content() {\r\n    return this.activeModal && this.activeModal.content;\r\n  }\r\n\r\n  public get wrapper() {\r\n    return this.activeModal && this.activeModal.wrapper;\r\n  }\r\n\r\n  private get headerElement() {\r\n    return this.element && this.element.querySelector<HTMLElement>('.coveo-modal-header h1');\r\n  }\r\n\r\n  constructor(\r\n    private className: string,\r\n    private ownerElement: HTMLElement,\r\n    private modalboxModule: Coveo.ModalBox.ModalBox = ModalBoxModule,\r\n    options: Partial<IAccessibleModalOptions> = {}\r\n  ) {\r\n    this.options = {\r\n      ...{\r\n        sizeMod: 'big'\r\n      },\r\n      ...options\r\n    };\r\n  }\r\n\r\n  public openResult(parameters: IAccessibleModalOpenResultParameters) {\r\n    if (this.isOpen) {\r\n      return;\r\n    }\r\n    this.openModalAndTrap({\r\n      content: parameters.content,\r\n      validation: parameters.validation,\r\n      origin: parameters.origin,\r\n      title: DomUtils.getQuickviewHeader(parameters.result, parameters.options, parameters.bindings).el\r\n    });\r\n    this.makeAccessible(parameters.options.title || parameters.result.title);\r\n  }\r\n\r\n  public open(parameters: IAccessibleModalOpenNormalParameters) {\r\n    if (this.isOpen) {\r\n      return;\r\n    }\r\n    this.openModalAndTrap(parameters);\r\n    this.makeAccessible();\r\n  }\r\n\r\n  private openModalAndTrap(parameters: IAccessibleModalOpenNormalParameters) {\r\n    this.initiallyFocusedElement = parameters.origin || (document.activeElement as HTMLElement);\r\n    this.activeModal = this.modalboxModule.open(parameters.content, {\r\n      title: parameters.title,\r\n      className: this.className,\r\n      validation: () => {\r\n        this.onModalClose();\r\n        return parameters.validation();\r\n      },\r\n      body: this.ownerElement,\r\n      sizeMod: this.options.sizeMod,\r\n      overlayClose: this.options.overlayClose\r\n    });\r\n    this.focusTrap = new FocusTrap(this.element);\r\n  }\r\n\r\n  public close() {\r\n    if (!this.isOpen) {\r\n      return;\r\n    }\r\n    this.activeModal.close();\r\n    this.activeModal = null;\r\n  }\r\n\r\n  private makeAccessible(title?: string) {\r\n    this.element.setAttribute('aria-modal', 'true');\r\n    if (title) {\r\n      this.headerElement.setAttribute('aria-label', title);\r\n    }\r\n    this.makeCloseButtonAccessible();\r\n  }\r\n\r\n  private makeCloseButtonAccessible() {\r\n    const closeButton: HTMLElement = this.element.querySelector('.coveo-small-close');\r\n    closeButton.setAttribute('aria-label', l('Close'));\r\n    closeButton.setAttribute('role', 'button');\r\n    closeButton.tabIndex = 0;\r\n    closeButton.focus();\r\n    $$(closeButton).on('keyup', KeyboardUtils.keypressAction(KEYBOARD.ENTER, () => closeButton.click()));\r\n  }\r\n\r\n  private onModalClose() {\r\n    this.focusTrap.disable();\r\n    this.focusTrap = null;\r\n    if (this.initiallyFocusedElement && document.body.contains(this.initiallyFocusedElement)) {\r\n      this.initiallyFocusedElement.focus();\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/AccessibleModal.ts","import 'styling/_Backdrop';\r\nimport { ModalBox as ModalBoxModule } from '../../ExternalModulesShim';\r\nimport { exportGlobally } from '../../GlobalExports';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { IFieldOption } from '../Base/IComponentOptions';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\r\nimport { IYouTubeThumbnailOptions, YouTubeThumbnail } from '../YouTube/YouTubeThumbnail';\r\nimport { AccessibleButton } from '../../utils/AccessibleButton';\r\n\r\nexport interface IBackdropOptions {\r\n  imageUrl?: string;\r\n  imageField?: IFieldOption;\r\n  overlayColor?: string;\r\n  overlayGradient?: boolean;\r\n}\r\n\r\n/**\r\n * The Backdrop component renders an image URL (either passed as a direct URL or contained in a result field) as a\r\n * background image. It is useful for displaying information in front of a dynamic background image.\r\n *\r\n * The Backdrop component will automatically initialize components embedded within itself:\r\n *\r\n * ```html\r\n *   <div class=\"CoveoBackdrop\" data-image-field=\"ytthumbnailurl\">\r\n *     <div class=\"CoveoFieldValue\" data-field=\"somefield\"></div>\r\n *   </div>\r\n * ```\r\n */\r\nexport class Backdrop extends Component {\r\n  static ID = 'Backdrop';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      Backdrop: Backdrop\r\n    });\r\n  };\r\n\r\n  /**\r\n   * @componentOptions\r\n   */\r\n  static options: IBackdropOptions = {\r\n    /**\r\n     * Specifies a direct URL from which the background image will be sourced.\r\n     *\r\n     * Has priority over {@link Backdrop.options.imageField}.\r\n     */\r\n    imageUrl: ComponentOptions.buildStringOption(),\r\n\r\n    /**\r\n     * Specifies the field from which the background image will be pulled.\r\n     *\r\n     * If {@link Backdrop.options.imageUrl} is specified, it will override this option.\r\n     */\r\n    imageField: ComponentOptions.buildFieldOption(),\r\n\r\n    /**\r\n     * Specifies the color that will be overlaid on top of the background image.\r\n     * This option needs to be declared as a CSS color. Be sure to use RGBA with an alpha value lower than 1 in order to\r\n     * be able to see the image behind the overlay color.\r\n     *\r\n     * Example value : \"`rgba(101, 123, 76, 0.5)`\"\r\n     */\r\n    overlayColor: ComponentOptions.buildColorOption(),\r\n\r\n    /**\r\n     * Specifies whether the overlay color should be instead be rendered as a top-to-bottom gradient from\r\n     * {@link Backdrop.options.overlayColor} to transparent.\r\n     *\r\n     * Default value is `false`.\r\n     */\r\n    overlayGradient: ComponentOptions.buildBooleanOption({ defaultValue: false, depend: 'overlayColor' })\r\n  };\r\n\r\n  /**\r\n   * Creates a new Backdrop component.\r\n   * @param element The HTMLElement on which the component will be instantiated.\r\n   * @param options The options for the Backdrop component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, it will be automatically\r\n   * resolved (with a slower execution time).\r\n   * @param result The {@link IQueryResult}.\r\n   */\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options?: IBackdropOptions,\r\n    bindings?: IComponentBindings,\r\n    public result?: IQueryResult,\r\n    public _window?: Window,\r\n    public ModalBox = ModalBoxModule\r\n  ) {\r\n    super(element, Backdrop.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, Backdrop, options);\r\n\r\n    this._window = this._window || window;\r\n\r\n    let background = '';\r\n    if (this.options.overlayColor) {\r\n      background +=\r\n        `linear-gradient(${this.options.overlayColor}, ` +\r\n        (this.options.overlayGradient ? 'rgba(0,0,0,0)' : this.options.overlayColor) +\r\n        '), ';\r\n    }\r\n\r\n    const imageSource = this.options.imageUrl || Utils.getFieldValue(result, <string>this.options.imageField);\r\n    background += `url('${imageSource}') center center`;\r\n\r\n    this.element.style.background = background;\r\n    this.element.style.backgroundSize = 'cover';\r\n\r\n    Initialization.automaticallyCreateComponentsInsideResult(element, result);\r\n    this.configureSpecialBackdropActions();\r\n  }\r\n\r\n  private configureSpecialBackdropActions() {\r\n    // If the current backdrop is used for a youtube thumbnail, we automatically configure a component for this\r\n    if (Utils.getFieldValue(this.result, 'ytthumbnailurl')) {\r\n      // We create the element \"in memory\", but do not append it to the DOM.\r\n      // We don't want to see a duplicate of the preview for youtube : the backdrop already renders a preview.\r\n      let thumbnailYouTube = new YouTubeThumbnail(\r\n        $$('div').el,\r\n        <IYouTubeThumbnailOptions>{\r\n          embed: true\r\n        },\r\n        <IResultsComponentBindings>this.getBindings(),\r\n        this.result,\r\n        this.ModalBox,\r\n        this.element\r\n      );\r\n\r\n      new AccessibleButton()\r\n        .withElement(this.element)\r\n        .withLabel(this.result.title)\r\n        .withSelectAction(e => {\r\n          // Since the backdrop often contain a result link, we must make sure the click did no originate from one.\r\n          // Otherwise, we might end up opening 2 results at the same time\r\n          if (!$$(<HTMLElement>e.target).hasClass('CoveoResultLink')) {\r\n            thumbnailYouTube.openResultLink();\r\n          }\r\n        })\r\n        .build();\r\n    }\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(Backdrop);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Backdrop/Backdrop.ts","import { Defer } from '../../misc/Defer';\r\nimport { sortBy, without } from 'underscore';\r\nimport { $$ } from '../../utils/Dom';\r\n\r\nexport class FocusTrap {\r\n  private focusInEvent: (e: FocusEvent) => void;\r\n  private focusOutEvent: (e: FocusEvent) => void;\r\n  private hiddenElements: HTMLElement[];\r\n  private enabled: boolean;\r\n\r\n  private get focusableElements(): HTMLElement[] {\r\n    return sortBy(this.container.querySelectorAll('[tabindex]'), element => element.tabIndex);\r\n  }\r\n\r\n  constructor(private container: HTMLElement) {\r\n    this.hiddenElements = [];\r\n    this.enable();\r\n  }\r\n\r\n  public disable() {\r\n    document.removeEventListener('focusin', this.focusInEvent);\r\n    document.removeEventListener('focusout', this.focusOutEvent);\r\n    this.showHiddenElements();\r\n    this.enabled = false;\r\n  }\r\n\r\n  private enable() {\r\n    document.addEventListener('focusin', (this.focusInEvent = e => this.onFocusIn(e)));\r\n    document.addEventListener('focusout', (this.focusOutEvent = e => this.onFocusOut(e)));\r\n    this.hideAllExcept(this.container);\r\n    this.enabled = true;\r\n  }\r\n\r\n  private showHiddenElements() {\r\n    while (this.hiddenElements.length) {\r\n      this.hiddenElements.pop().removeAttribute('aria-hidden');\r\n    }\r\n  }\r\n\r\n  private hideElement(element: HTMLElement) {\r\n    if (element.getAttribute('aria-hidden')) {\r\n      return;\r\n    }\r\n    this.hiddenElements.push(element);\r\n    element.setAttribute('aria-hidden', `${true}`);\r\n  }\r\n\r\n  private hideSiblings(allowedElement: HTMLElement) {\r\n    const parent = allowedElement.parentElement;\r\n    if (parent) {\r\n      without($$(parent).children(), allowedElement).forEach(elementToHide => {\r\n        this.hideElement(elementToHide);\r\n      });\r\n    }\r\n  }\r\n\r\n  private hideAllExcept(allowedElement: HTMLElement) {\r\n    this.hideSiblings(allowedElement);\r\n    const parent = allowedElement.parentElement;\r\n    if (parent && parent !== document.body) {\r\n      this.hideAllExcept(parent);\r\n    }\r\n  }\r\n\r\n  private getFocusableSibling(element: HTMLElement, previous = false) {\r\n    const elements = this.focusableElements;\r\n    const currentIndex = elements.indexOf(element);\r\n    if (currentIndex === -1) {\r\n      return null;\r\n    }\r\n    return elements[(currentIndex + (previous ? -1 : 1) + elements.length) % elements.length];\r\n  }\r\n\r\n  private focusSibling(element: HTMLElement, previous = false) {\r\n    const sibling = this.getFocusableSibling(element, previous);\r\n    if (sibling) {\r\n      sibling.focus();\r\n    }\r\n  }\r\n\r\n  private focusFirstElement() {\r\n    const elements = this.focusableElements;\r\n    if (elements.length) {\r\n      elements[0].focus();\r\n    }\r\n  }\r\n\r\n  private elementIsBefore(oldElement: HTMLElement, newElement: HTMLElement) {\r\n    if (!newElement) {\r\n      return false;\r\n    }\r\n    return oldElement.compareDocumentPosition(newElement) === Node.DOCUMENT_POSITION_PRECEDING;\r\n  }\r\n\r\n  private onLosingFocus(oldElement: HTMLElement, newElement: HTMLElement) {\r\n    Defer.defer(() => {\r\n      if (!this.enabled) {\r\n        return;\r\n      }\r\n      this.enabled = false;\r\n      if (oldElement && this.focusIsAllowed(oldElement)) {\r\n        this.focusSibling(oldElement, this.elementIsBefore(oldElement, newElement));\r\n      } else {\r\n        this.focusFirstElement();\r\n      }\r\n      this.enabled = true;\r\n    });\r\n  }\r\n\r\n  private focusIsAllowed(element: HTMLElement) {\r\n    return this.container.contains(element);\r\n  }\r\n\r\n  private elementIsInPage(element: HTMLElement) {\r\n    return element && element !== document.body.parentElement;\r\n  }\r\n\r\n  private onFocusIn(e: FocusEvent) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n    const oldElement = e.relatedTarget as HTMLElement;\r\n    const handledByFocusOut = this.elementIsInPage(oldElement);\r\n    if (handledByFocusOut) {\r\n      return;\r\n    }\r\n    const newElement = e.target as HTMLElement;\r\n    if (!this.elementIsInPage(newElement)) {\r\n      return;\r\n    }\r\n    if (!this.focusIsAllowed(newElement)) {\r\n      this.onLosingFocus(null, newElement);\r\n    }\r\n  }\r\n\r\n  private onFocusOut(e: FocusEvent) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n    const newElement = e.relatedTarget as HTMLElement;\r\n    if (!this.elementIsInPage(newElement)) {\r\n      return;\r\n    }\r\n    if (!newElement || !this.focusIsAllowed(newElement)) {\r\n      this.onLosingFocus(e.target as HTMLElement, newElement);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/FocusTrap/FocusTrap.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResultLink.scss\n// module id = 532\n// module chunks = 0 12 21 25 34 35 63 88","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_Backdrop.scss\n// module id = 596\n// module chunks = 21 88","import { Component } from '../Base/Component';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { ComponentOptionsModel } from '../../models/ComponentOptionsModel';\r\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\r\nimport { analyticsActionCauseList } from '../Analytics/AnalyticsActionListMeta';\r\nimport { IResultLinkOptions } from './ResultLinkOptions';\r\nimport { ResultListEvents } from '../../events/ResultListEvents';\r\nimport { HighlightUtils } from '../../utils/HighlightUtils';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { DeviceUtils } from '../../utils/DeviceUtils';\r\nimport { OS_NAME, OSUtils } from '../../utils/OSUtils';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { QueryUtils } from '../../utils/QueryUtils';\r\nimport { Assert } from '../../misc/Assert';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Defer } from '../../misc/Defer';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { StreamHighlightUtils } from '../../utils/StreamHighlightUtils';\r\nimport { StringUtils } from '../../utils/StringUtils';\r\nimport { once, debounce, extend, escape } from 'underscore';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\nimport 'styling/_ResultLink';\r\nimport { AccessibleButton } from '../../utils/AccessibleButton';\r\n\r\n/**\r\n * The `ResultLink` component automatically transform a search result title into a clickable link pointing to the\r\n * original item.\r\n *\r\n * This component is a result template component (see [Result Templates](https://docs.coveo.com/en/413/)).\r\n */\r\nexport class ResultLink extends Component {\r\n  static ID = 'ResultLink';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      ResultLink: ResultLink\r\n    });\r\n  };\r\n\r\n  /**\r\n   * The options for the ResultLink\r\n   * @componentOptions\r\n   */\r\n  static options: IResultLinkOptions = {\r\n    /**\r\n     * Specifies the field to use to output the component `href` attribute value.\r\n     *\r\n     * **Tip:**\r\n     * > Instead of specifying a value for the `field` option, you can directly add an `href` attribute to the\r\n     * > `ResultLink` HTML element. Then, you can use a custom script to generate the `href` value.\r\n     *\r\n     * **Examples:**\r\n     * - With the following markup, the `ResultLink` outputs its `href` value using the `@uri` field (rather than the\r\n     * default field):\r\n     *\r\n     * ```html\r\n     * <a class=\"CoveoResultLink\" data-field=\"@uri\"></a>\r\n     * ```\r\n     *\r\n     * - In the following result template, the custom `getMyKBUri()` function provides the `href` value:\r\n     *\r\n     * ```html\r\n     * <script id=\"KnowledgeArticle\" type=\"text/underscore\" class=\"result-template\">\r\n     *   <div class='CoveoIcon>'></div>\r\n     *   <a class=\"CoveoResultLink\" href=\"<%= getMyKBUri(raw) %>\"></a>\r\n     *   <div class=\"CoveoExcerpt\"></div>\r\n     * </script>\r\n     * ```\r\n     *\r\n     * See also [`hrefTemplate`]{@link ResultLink.options.hrefTemplate}, which can override this option.\r\n     *\r\n     * By default, the component uses the `@clickUri` field of the item to output the value of its `href` attribute.\r\n     */\r\n    field: ComponentOptions.buildFieldOption(),\r\n\r\n    /**\r\n     * Specifies whether the component should try to open its link in Microsoft Outlook.\r\n     *\r\n     * Setting this option to `true` is normally useful for `ResultLink` instances related to Microsoft Exchange emails.\r\n     *\r\n     * If this option is `true`, clicking the `ResultLink` calls the\r\n     * [`openLinkInOutlook`]{@link ResultLink.openLinkInOutlook} method instead of the\r\n     * [`openLink`]{@link ResultLink.openLink} method.\r\n     *\r\n     * Default value is `false`.\r\n     */\r\n    openInOutlook: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n\r\n    /**\r\n     * Specifies whether the component should open its link in the [`Quickview`]{@link Quickview} component rather than\r\n     * loading through the original URL.\r\n     *\r\n     * Default value is `false`.\r\n     */\r\n    openQuickview: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n\r\n    /**\r\n     * Specifies whether the component should open its link in a new window instead of opening it in the current\r\n     * context.\r\n     *\r\n     * If this option is `true`, clicking the `ResultLink` calls the\r\n     * [`openLinkInNewWindow`]{@link ResultLink.openLinkInNewWindow} method instead of the\r\n     * [`openLink`]{@link ResultLink.openLink} method.\r\n     *\r\n     * **Note:**\r\n     * > If a search page contains a [`ResultPreferences`]{@link ResultsPreferences} component whose\r\n     * > [`enableOpenInNewWindow`]{@link ResultsPreferences.options.enableOpenInNewWindow} option is `true`, and the end\r\n     * > user checks the <b>Always open results in new window</b> box, `ResultLink` components in this page will always\r\n     * > open their links in a new window when the end user clicks them, no matter what the value of their\r\n     * > `alwaysOpenInNewWindow` option is.\r\n     *\r\n     * Default value is `false`.\r\n     */\r\n    alwaysOpenInNewWindow: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n\r\n    /**\r\n     * Specifies a template literal from which to generate the `ResultLink` `href` attribute value (see\r\n     * [Template literals](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals)).\r\n     *\r\n     * This option overrides the [`field`]{@link ResultLink.options.field} option value.\r\n     *\r\n     * The template literal can reference any number of fields from the parent result. It can also reference global\r\n     * scope properties.\r\n     *\r\n     * **Examples:**\r\n     *\r\n     * - The following markup generates an `href` value such as `http://uri.com?id=itemTitle`:\r\n     *\r\n     * ```html\r\n     * <a class='CoveoResultLink' data-href-template='${clickUri}?id=${raw.title}'></a>\r\n     * ```\r\n     *\r\n     * - The following markup generates an `href` value such as `localhost/fooBar`:\r\n     *\r\n     * ```html\r\n     * <a class='CoveoResultLink' data-href-template='${window.location.hostname}/{Foo.Bar}'></a>\r\n     * ```\r\n     *\r\n     * Default value is `undefined`.\r\n     */\r\n    hrefTemplate: ComponentOptions.buildStringOption(),\r\n\r\n    /**\r\n     * Specifies a template literal from which to generate the `ResultLink` display title (see\r\n     * [Template literals](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals)).\r\n     *\r\n     * This option overrides the default `ResultLink` display title behavior.\r\n     *\r\n     * The template literal can reference any number of fields from the parent result. However, if the template literal\r\n     * references a key whose value is undefined in the parent result fields, the `ResultLink` title displays the\r\n     * name of this key instead.\r\n     *\r\n     * This option is ignored if the `ResultLink` innerHTML contains any value.\r\n     *\r\n     * **Examples:**\r\n     *\r\n     * - The following markup generates a `ResultLink` display title such as `Case number: 123456` if both the\r\n     * `raw.objecttype` and `raw.objectnumber` keys are defined in the parent result fields:\r\n     *\r\n     * ```html\r\n     * <a class=\"CoveoResultLink\" data-title-template=\"${raw.objecttype} number: ${raw.objectnumber}\"></a>\r\n     * ```\r\n     *\r\n     * - The following markup generates `${myField}` as a `ResultLink` display title if the `myField` key is undefined\r\n     * in the parent result fields:\r\n     *\r\n     * ```html\r\n     * <a class=\"CoveoResultLink\" data-title-template=\"${myField}\"></a>\r\n     * ```\r\n     *\r\n     * - The following markup generates `Foobar` as a `ResultLink` display title, because the `ResultLink` innterHTML is\r\n     * not empty:\r\n     *\r\n     * ```html\r\n     * <a class=\"CoveoResultLink\" data-title-template=\"${will} ${be} ${ignored}\">Foobar</a>\r\n     * ```\r\n     *\r\n     * Default value is `undefined`.\r\n     *\r\n     * @availablesince [January 2017 Release (v1.1865.9)](https://docs.coveo.com/en/396/#january-2017-release-v118659)\r\n     */\r\n    titleTemplate: ComponentOptions.buildStringOption(),\r\n\r\n    /**\r\n     * Specifies an event handler function to execute when the user clicks the `ResultLink` component.\r\n     *\r\n     * The handler function takes a JavaScript [`Event`](https://developer.mozilla.org/en/docs/Web/API/Event) object and\r\n     * an [`IQueryResult`]{@link IQueryResult} as its parameters.\r\n     *\r\n     * Overriding the default behavior of the `onClick` event can allow you to execute specific code instead.\r\n     *\r\n     * **Note:**\r\n     * > You cannot set this option directly in the component markup as an HTML attribute. You must either set it in the\r\n     * > [`init`]{@link init} call of your search interface (see\r\n     * > [Passing Component Options in the init Call](https://docs.coveo.com/en/346/#passing-component-options-in-the-init-call)),\r\n     * > or before the `init` call, using the `options` top-level function (see\r\n     * > [Passing Component Options Before the init Call](https://docs.coveo.com/en/346/#passing-component-options-before-the-init-call)).\r\n     *\r\n     * **Example:**\r\n     * ```javascript\r\n     * // You can set the option in the 'init' call:\r\n     * Coveo.init(document.querySelector(\"#search\"), {\r\n     *   ResultLink : {\r\n     *     onClick : function(e, result) {\r\n     *       e.preventDefault();\r\n     *       // Custom code to execute with the item URI and title.\r\n     *       openUriInASpecialTab(result.clickUri, result.title);\r\n     *     }\r\n     *   }\r\n     * });\r\n     *\r\n     * // Or before the 'init' call, using the 'options' top-level function:\r\n     * // Coveo.options(document.querySelector('#search'), {\r\n     * //   ResultLink : {\r\n     * //     onClick : function(e, result) {\r\n     * //       e.preventDefault();\r\n     * //       // Custom code to execute with the item URI and title.\r\n     * //       openUriInASpecialTab(result.clickUri, result.title);\r\n     * //     }\r\n     * //   }\r\n     * // });\r\n     * ```\r\n     */\r\n    onClick: ComponentOptions.buildCustomOption<(e: Event, result: IQueryResult) => any>(() => {\r\n      return null;\r\n    })\r\n  };\r\n\r\n  private toExecuteOnOpen: (e?: Event) => void;\r\n\r\n  /**\r\n   * Creates a new `ResultLink` component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the `ResultLink` component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   * @param result The result to associate the component with.\r\n   * @param os\r\n   */\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options: IResultLinkOptions,\r\n    public bindings?: IResultsComponentBindings,\r\n    public result?: IQueryResult,\r\n    public os?: OS_NAME\r\n  ) {\r\n    super(element, ResultLink.ID, bindings);\r\n\r\n    const initialOptions = ComponentOptions.initComponentOptions(element, ResultLink, options);\r\n    const resultLinkOptions = this.componentOptionsModel.get(ComponentOptionsModel.attributesEnum.resultLink);\r\n    this.options = extend({}, initialOptions, resultLinkOptions);\r\n\r\n    this.result = result || this.resolveResult();\r\n\r\n    if (this.options.openQuickview == null) {\r\n      this.options.openQuickview = result.raw['connectortype'] == 'ExchangeCrawler' && DeviceUtils.isMobileDevice();\r\n    }\r\n    this.element.setAttribute('tabindex', '0');\r\n\r\n    Assert.exists(this.componentOptionsModel);\r\n    Assert.exists(this.result);\r\n\r\n    if (!this.quickviewShouldBeOpened()) {\r\n      // Bind on multiple \"click\" or \"mouse\" events.\r\n      // Create a function that will be executed only once, so as not to log multiple events\r\n      // Once a result link has been opened, and that we log at least one analytics event,\r\n      // it should not matter if the end user open the same link multiple times with different methods.\r\n      // It's still only one \"click\" event as far as UA is concerned.\r\n      // Also need to handle \"longpress\" on mobile (the contextual menu), which we assume to be 1 s long.\r\n\r\n      const executeOnlyOnce = once(() => this.logOpenDocument());\r\n\r\n      $$(element).on(['contextmenu', 'click', 'mousedown', 'mouseup'], executeOnlyOnce);\r\n      let longPressTimer: number;\r\n      $$(element).on('touchstart', () => {\r\n        longPressTimer = window.setTimeout(executeOnlyOnce, 1000);\r\n      });\r\n      $$(element).on('touchend', () => {\r\n        if (longPressTimer) {\r\n          clearTimeout(longPressTimer);\r\n        }\r\n      });\r\n    }\r\n    this.renderUri(element, result);\r\n    this.bindEventToOpen();\r\n  }\r\n  public renderUri(element: HTMLElement, result?: IQueryResult) {\r\n    if (/^\\s*$/.test(this.element.innerHTML)) {\r\n      const title = this.getDisplayedTitle();\r\n      this.element.innerHTML = title;\r\n      if (!this.element.title) {\r\n        this.element.title = this.getDisplayedTitleAsText();\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Opens the result in the same window, no matter how the actual component is configured for the end user.\r\n   * @param logAnalytics Specifies whether the method should log an analytics event.\r\n   */\r\n  public openLink(logAnalytics = true) {\r\n    if (logAnalytics) {\r\n      this.logOpenDocument();\r\n    }\r\n    window.location.href = this.getResultUri();\r\n  }\r\n\r\n  /**\r\n   * Opens the result in a new window, no matter how the actual component is configured for the end user.\r\n   * @param logAnalytics Specifies whether the method should log an analytics event.\r\n   */\r\n  public openLinkInNewWindow(logAnalytics = true) {\r\n    if (logAnalytics) {\r\n      this.logOpenDocument();\r\n    }\r\n    window.open(this.getResultUri(), '_blank');\r\n  }\r\n\r\n  /**\r\n   * Tries to open the result in Microsoft Outlook if the result has an `outlookformacuri` or `outlookuri` field.\r\n   *\r\n   * Normally, this implies the result should be a link to an email.\r\n   *\r\n   * If the needed fields are not present, this method does nothing.\r\n   * @param logAnalytics Specifies whether the method should log an analytics event.\r\n   */\r\n  public openLinkInOutlook(logAnalytics = true) {\r\n    if (this.hasOutlookField()) {\r\n      if (logAnalytics) {\r\n        this.logOpenDocument();\r\n      }\r\n      this.openLink();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens the link in the same manner the end user would.\r\n   *\r\n   * This essentially simulates a click on the result link.\r\n   *\r\n   * @param logAnalytics Specifies whether the method should log an analytics event.\r\n   */\r\n  public openLinkAsConfigured(logAnalytics = true) {\r\n    if (this.toExecuteOnOpen) {\r\n      if (logAnalytics) {\r\n        this.logOpenDocument();\r\n      }\r\n      this.toExecuteOnOpen();\r\n    }\r\n  }\r\n\r\n  protected bindEventToOpen(): boolean {\r\n    return (\r\n      this.bindOnClickIfNotUndefined() ||\r\n      this.bindOpenQuickviewIfNotUndefined() ||\r\n      this.setHrefIfNotAlready() ||\r\n      this.openLinkThatIsNotAnAnchor()\r\n    );\r\n  }\r\n\r\n  private getDisplayedTitle() {\r\n    if (!this.options.titleTemplate) {\r\n      return this.result.title\r\n        ? HighlightUtils.highlightString(this.result.title, this.result.titleHighlights, null, 'coveo-highlight')\r\n        : this.escapedClickUri;\r\n    } else {\r\n      let newTitle = StringUtils.buildStringTemplateFromResult(this.options.titleTemplate, this.result);\r\n      return newTitle\r\n        ? StreamHighlightUtils.highlightStreamText(newTitle, this.result.termsToHighlight, this.result.phrasesToHighlight)\r\n        : this.escapedClickUri;\r\n    }\r\n  }\r\n\r\n  private getDisplayedTitleAsText() {\r\n    const container = $$('div');\r\n    container.setHtml(this.getDisplayedTitle());\r\n    return container.text();\r\n  }\r\n\r\n  private get escapedClickUri() {\r\n    return escape(this.result.clickUri);\r\n  }\r\n\r\n  private bindOnClickIfNotUndefined() {\r\n    if (this.options.onClick != undefined) {\r\n      this.toExecuteOnOpen = (e: MouseEvent) => {\r\n        this.options.onClick.call(this, e, this.result);\r\n      };\r\n\r\n      new AccessibleButton()\r\n        .withElement(this.element)\r\n        .withLabel(this.result.title)\r\n        .withSelectAction((e: Event) => this.toExecuteOnOpen(e))\r\n        .build();\r\n\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private bindOpenQuickviewIfNotUndefined() {\r\n    if (this.quickviewShouldBeOpened()) {\r\n      this.toExecuteOnOpen = () => {\r\n        $$(this.bindings.resultElement).trigger(ResultListEvents.openQuickview);\r\n      };\r\n\r\n      $$(this.element).on('click', (e: Event) => {\r\n        e.preventDefault();\r\n        this.toExecuteOnOpen();\r\n      });\r\n\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private openLinkThatIsNotAnAnchor() {\r\n    if (!this.elementIsAnAnchor()) {\r\n      this.toExecuteOnOpen = () => {\r\n        if (this.options.alwaysOpenInNewWindow) {\r\n          if (this.options.openInOutlook) {\r\n            this.openLinkInOutlook();\r\n          } else {\r\n            this.openLinkInNewWindow();\r\n          }\r\n        } else {\r\n          this.openLink();\r\n        }\r\n      };\r\n\r\n      $$(this.element).on('click', () => {\r\n        this.toExecuteOnOpen();\r\n      });\r\n\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private setHrefIfNotAlready() {\r\n    // Do not erase any value put in href by the template, etc. Allows\r\n    // using custom click urls while still keeping analytics recording\r\n    // and other behavior brought by the component.\r\n    if (this.elementIsAnAnchor() && !Utils.isNonEmptyString($$(this.element).getAttribute('href'))) {\r\n      $$(this.element).setAttribute('href', this.getResultUri());\r\n      if (this.options.alwaysOpenInNewWindow && !(this.options.openInOutlook && this.hasOutlookField())) {\r\n        $$(this.element).setAttribute('target', '_blank');\r\n      }\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private logOpenDocument = debounce(\r\n    () => {\r\n      this.queryController.saveLastQuery();\r\n      let documentURL = $$(this.element).getAttribute('href');\r\n      if (documentURL == undefined || documentURL == '') {\r\n        documentURL = this.escapedClickUri;\r\n      }\r\n      this.usageAnalytics.logClickEvent(\r\n        analyticsActionCauseList.documentOpen,\r\n        {\r\n          documentURL: documentURL,\r\n          documentTitle: this.result.title,\r\n          author: Utils.getFieldValue(this.result, 'author')\r\n        },\r\n        this.result,\r\n        this.root\r\n      );\r\n      Defer.flush();\r\n    },\r\n    1500,\r\n    true\r\n  );\r\n\r\n  private filterProtocol(uri: string) {\r\n    const isAbsolute = /^(https?|ftp|file|mailto|tel):/i.test(uri);\r\n    const isRelative = /^\\//.test(uri);\r\n\r\n    return isAbsolute || isRelative ? uri : '';\r\n  }\r\n\r\n  private getResultUri(): string {\r\n    if (this.options.hrefTemplate) {\r\n      const uri = StringUtils.buildStringTemplateFromResult(this.options.hrefTemplate, this.result);\r\n      return this.filterProtocol(uri);\r\n    }\r\n\r\n    if (this.options.field == undefined && this.options.openInOutlook) {\r\n      this.setField();\r\n    }\r\n\r\n    if (this.options.field != undefined) {\r\n      return this.filterProtocol(Utils.getFieldValue(this.result, <string>this.options.field));\r\n    }\r\n\r\n    return this.filterProtocol(this.result.clickUri);\r\n  }\r\n\r\n  private elementIsAnAnchor() {\r\n    return this.element.tagName == 'A';\r\n  }\r\n\r\n  private setField() {\r\n    let os = Utils.exists(this.os) ? this.os : OSUtils.get();\r\n    if (os == OS_NAME.MACOSX && this.hasOutlookField()) {\r\n      this.options.field = '@outlookformacuri';\r\n    } else if (os == OS_NAME.WINDOWS && this.hasOutlookField()) {\r\n      this.options.field = '@outlookuri';\r\n    }\r\n  }\r\n\r\n  private hasOutlookField() {\r\n    let os = Utils.exists(this.os) ? this.os : OSUtils.get();\r\n    if (os == OS_NAME.MACOSX && this.result.raw['outlookformacuri'] != undefined) {\r\n      return true;\r\n    } else if (os == OS_NAME.WINDOWS && this.result.raw['outlookuri'] != undefined) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isUriThatMustBeOpenedInQuickview(): boolean {\r\n    return this.escapedClickUri.toLowerCase().indexOf('ldap://') == 0;\r\n  }\r\n\r\n  private quickviewShouldBeOpened() {\r\n    return (this.options.openQuickview || this.isUriThatMustBeOpenedInQuickview()) && QueryUtils.hasHTMLVersion(this.result);\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(ResultLink);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultLink/ResultLink.ts"],"sourceRoot":""}