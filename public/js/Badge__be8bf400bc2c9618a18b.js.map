{"version":3,"sources":["./src/ui/ResponsiveComponents/ResponsiveComponentsUtils.ts","./src/ui/DynamicFacet/DynamicFacet.ts","./src/ui/FieldValue/FieldValue.ts","./src/utils/SVGDom.ts","./src/ui/ResponsiveComponents/ResponsiveFacetColumn.ts","./src/rest/Facet/FacetValueState.ts","./src/ui/Badge/Badge.ts","./src/ui/DynamicFacet/DynamicFacetHeader/DynamicFacetHeaderButton.ts","./src/ui/Facet/FacetUtils.ts","./sass/_ResponsiveFacets.scss","./sass/DynamicFacet/_DynamicFacet.scss","./src/ui/ResponsiveComponents/ResponsiveDynamicFacets.ts","./src/ui/DynamicFacet/DynamicFacetBreadcrumbs.ts","./sass/DynamicFacet/_DynamicFacetBreadcrumbs.scss","./src/ui/DynamicFacet/DynamicFacetHeader/DynamicFacetHeader.ts","./sass/DynamicFacet/_DynamicFacetHeader.scss","./src/ui/DynamicFacet/DynamicFacetHeader/DynamicFacetHeaderCollapseToggle.ts","./src/ui/DynamicFacet/DynamicFacetValues/DynamicFacetValues.ts","./sass/DynamicFacet/_DynamicFacetValues.scss","./src/ui/DynamicFacet/DynamicFacetValues/DynamicFacetValue.ts","./src/ui/DynamicFacet/DynamicFacetValues/DynamicFacetValueRenderer.ts","./src/controllers/DynamicFacetQueryController.ts","./src/rest/Facet/FacetSortCriteria.ts","./src/ui/FacetPadding/FacetPadding.ts","./src/ui/ResponsiveComponents/ResponsiveFacetOptions.ts"],"names":[],"mappings":";;;;;;;;AACA,2DAA2F;AAE3F;IAAA;IA4CA,CAAC;IAvCQ,+CAAqB,GAA5B,UAA6B,IAAS,EAAE,kBAAuB;QAC7D,OAAO,qDAAyB,CAAC,4BAA4B,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;IACzH,CAAC;IAEM,8CAAoB,GAA3B,UAA4B,IAAS;QACnC,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAChD,CAAC;IAEM,+CAAqB,GAA5B,UAA6B,IAAS;QACpC,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;IACjD,CAAC;IAEM,wDAA8B,GAArC,UAAsC,IAAS;QAC7C,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;IAC1D,CAAC;IAEM,2CAAiB,GAAxB,UAAyB,IAAS;QAChC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IACzC,CAAC;IAEM,6CAAmB,GAA1B,UAA2B,IAAS;QAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAC5C,CAAC;IAEM,4CAAkB,GAAzB,UAA0B,IAAS;QACjC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;IAC1C,CAAC;IAEM,8CAAoB,GAA3B,UAA4B,IAAS;QACnC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;IAC7C,CAAC;IAEM,qDAA2B,GAAlC,UAAmC,IAAS;QAC1C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;IACnD,CAAC;IAEM,uDAA6B,GAApC,UAAqC,IAAS;QAC5C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;IACtD,CAAC;IA1Cc,4CAAkB,GAAW,kBAAkB,CAAC;IAChD,6CAAmB,GAAW,oBAAoB,CAAC;IACnD,sDAA4B,GAAW,4BAA4B,CAAC;IAyCrF,gCAAC;CAAA;AA5CY,8DAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHtC,yBAA4C;AAC5C,0CAAmD;AACnD,mCAAqC;AACrC,6CAAqD;AACrD,yCAA8C;AAE9C,gDAA0E;AAC1E,8CAAwD;AACxD,uDAAwF;AACxF,yDAA0F;AAC1F,yDAAoE;AACpE,oDAA6E;AAC7E,oDAA6E;AAC7E,4CAA4G;AAC5G,gDAA+D;AAC/D,6DAA4F;AAC5F,qCAA0C;AAC1C,sCAA8E;AAC9E,sCAA2C;AAI3C,mDAAyE;AACzE,uCAA0C;AAC1C,4CAAsD;AACtD,iDAA+F;AAC/F,uDAM8C;AAG9C,8CAA4D;AAkB5D;;;;;;;;;;;;GAYG;AACH;IAAkC,gCAAS;IAmKzC;;;;;;OAMG;IACH,sBAAmB,OAAoB,EAAS,OAA8B,EAAE,QAA6B;QAA7G,YACE,kBAAM,OAAO,EAAE,YAAY,CAAC,EAAE,EAAE,QAAQ,CAAC,SAa1C;QAdkB,aAAO,GAAP,OAAO,CAAa;QAAS,aAAO,GAAP,OAAO,CAAuB;QAhBtE,8BAAwB,GAAG,IAAI,CAAC;QAOjC,cAAQ,GAAW,IAAI,CAAC;QAsUvB,qCAA+B,GAAG,UAAC,mBAA6B;YACtE,IAAM,qBAAqB,GAAG,KAAI,CAAC,MAAM,CAAC,cAAc,CAAC;YACzD,IAAM,cAAc,GAAG,uBAAU,CAAC,mBAAmB,EAAE,qBAAqB,CAAC,CAAC;YAC9E,IAAM,gBAAgB,GAAG,uBAAU,CAAC,qBAAqB,EAAE,mBAAmB,CAAC,CAAC;YAEhF,IAAI,aAAK,CAAC,eAAe,CAAC,cAAc,CAAC,EAAE;gBACzC,KAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;gBAC1C,wDAAwD;gBACxD,KAAI,CAAC,iBAAiB,CAAC,kDAAwB,CAAC,kBAAkB,EAAE,KAAI,CAAC,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC;aACvH;YAED,IAAI,aAAK,CAAC,eAAe,CAAC,gBAAgB,CAAC,EAAE;gBAC3C,KAAI,CAAC,sBAAsB,CAAC,gBAAgB,CAAC,CAAC;gBAC9C,wDAAwD;gBACxD,KAAI,CAAC,iBAAiB,CAAC,kDAAwB,CAAC,oBAAoB,EAAE,KAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC;aAC3H;QACH,CAAC,CAAC;QA3UA,KAAI,CAAC,OAAO,GAAG,mCAAgB,CAAC,oBAAoB,CAAC,OAAO,EAAE,YAAY,EAAE,OAAO,CAAC,CAAC;QAErF,KAAI,CAAC,+BAA+B,EAAE,CAAC;QACvC,KAAI,CAAC,eAAe,EAAE,CAAC;QACvB,KAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,KAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,KAAI,CAAC,wBAAwB,EAAE,CAAC;QAEhC,KAAI,CAAC,MAAM,GAAG,IAAI,uCAAkB,CAAC,KAAI,CAAC,CAAC;QAC3C,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,OAAO,CAAC,cAAc,IAAI,KAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC;QAElF,iDAAuB,CAAC,IAAI,CAAC,KAAI,CAAC,IAAI,EAAE,KAAI,EAAE,KAAI,CAAC,OAAO,CAAC,CAAC;;IAC9D,CAAC;IAED,sBAAW,mCAAS;aAApB;YACE,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACrC,CAAC;;;OAAA;IAED;;;;;;;OAOG;IACI,kCAAW,GAAlB,UAAmB,KAAa;QAC9B,eAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,oBAAoB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;IACrC,CAAC;IAED;;;;;;;OAOG;IACI,2CAAoB,GAA3B,UAA4B,MAAgB;QAA5C,iBAQC;QAPC,eAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACtB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,0BAA0B,EAAE,MAAM,CAAC,CAAC;QACrD,MAAM,CAAC,OAAO,CAAC,eAAK;YAClB,KAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;QAClC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,wBAAwB,EAAE,CAAC;IAClC,CAAC;IAED;;;;;;;OAOG;IACI,oCAAa,GAApB,UAAqB,KAAa;QAChC,eAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,sBAAsB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;IACvC,CAAC;IAED;;;;;;;OAOG;IACI,6CAAsB,GAA7B,UAA8B,MAAgB;QAA9C,iBAQC;QAPC,eAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACtB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,4BAA4B,EAAE,MAAM,CAAC,CAAC;QACvD,MAAM,CAAC,OAAO,CAAC,eAAK;YAClB,KAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE,CAAC;QACpC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,wBAAwB,EAAE,CAAC;IAClC,CAAC;IAED;;;;;;OAMG;IACI,wCAAiB,GAAxB,UAAyB,KAAa;QACpC,eAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACrB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,2BAA2B,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,YAAY,EAAE,CAAC,CAAC;QACrF,IAAI,CAAC,wBAAwB,EAAE,CAAC;IAClC,CAAC;IAED;;;;;OAKG;IACI,qCAAc,GAArB,UAAsB,wBAAsD;QAAtD,sEAA2B,IAAI,CAAC,OAAO,CAAC,cAAc;QAC1E,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACrC,IAAI,CAAC,2BAA2B,CAAC,+BAA+B,CAAC,wBAAwB,CAAC,CAAC;QAC3F,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,6BAA6B,CAAC,kDAAwB,CAAC,aAAa,CAAC,CAAC;IAC7E,CAAC;IAED;;;;OAIG;IACI,qCAAc,GAArB;QACE,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACrC,IAAI,CAAC,2BAA2B,CAAC,4BAA4B,EAAE,CAAC;QAChE,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,6BAA6B,CAAC,kDAAwB,CAAC,aAAa,CAAC,CAAC;IAC7E,CAAC;IAED;;;;;;OAMG;IACI,4BAAK,GAAZ;QACE,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACxC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QACvB,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;QACrB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC/B,CAAC;IAED;;OAEG;IACI,qCAAc,GAArB;QACE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;IACrD,CAAC;IAED;;OAEG;IACI,6BAAM,GAAb;QACE,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACxC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED;;OAEG;IACI,+BAAQ,GAAf;QACE,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAC1C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED;;;;;;OAMG;IACI,oDAA6B,GAApC;QACE,eAAM,CAAC,MAAM,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QAChD,IAAI,CAAC,2BAA2B,CAAC,6BAA6B,EAAE,CAAC;IACnE,CAAC;IAED;;;;;;;;OAQG;IACI,iDAA0B,GAAjC;QACE,eAAM,CAAC,MAAM,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QAChD,IAAI,CAAC,2BAA2B,CAAC,0BAA0B,EAAE,CAAC;IAChE,CAAC;IAEM,uCAAgB,GAAvB;QACE,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACrC,CAAC;IAGD,sBAAW,6CAAmB;QAD9B,gCAAgC;aAChC;YACE,OAAO,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,GAAG,CAAC,oBAAU,IAAI,iBAAU,CAAC,aAAa,EAAxB,CAAwB,CAAC,CAAC;QACnF,CAAC;;;OAAA;IAGD,sBAAW,kDAAwB;QADnC,gCAAgC;aAChC;YACE,OAAO;gBACL,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACpC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;gBACnB,SAAS,EAAE,mDAAyB,CAAC,MAAM;gBAC3C,aAAa,EAAE,IAAI,CAAC,QAAQ;aAC7B,CAAC;QACJ,CAAC;;;OAAA;IAEM,wCAAiB,GAAxB,UAAyB,WAAkC,EAAE,SAAqC;QAChG,IAAI,CAAC,cAAc,CAAC,cAAc,CAA6B,WAAW,EAAE,SAAS,CAAC,CAAC;IACzF,CAAC;IAEM,+CAAwB,GAA/B,UAAgC,YAA0B;QACxD,eAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC5B,IAAI,CAAC,2BAA2B,CAAC,wBAAwB,CAAC,YAAY,CAAC,CAAC;IAC1E,CAAC;IAEM,4CAAqB,GAA5B;QACE,IAAM,YAAY,GAAG,IAAI,CAAC,cAAc,CAAC,qBAAqB,EAAE,CAAC;QACjE,YAAY,IAAI,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;IACvE,CAAC;IAEM,2CAAoB,GAA3B;QACE,IAAI,CAAC,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,EAAE;YACjC,OAAO,KAAK,CAAC;SACd;QAED,IAAI,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;YAC7C,OAAO,KAAK,CAAC;SACd;QAED,OAAO,IAAI,CAAC;IACd,CAAC;IAEO,sCAAe,GAAvB;QAAA,iBAMC;QALC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,WAAW,EAAE,cAAM,YAAI,CAAC,SAAS,EAAE,EAAhB,CAAgB,CAAC,CAAC;QACzE,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,iBAAiB,EAAE,UAAC,IAAiC,IAAK,YAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,EAAlC,CAAkC,CAAC,CAAC;QAClI,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,YAAY,EAAE,UAAC,IAA4B,IAAK,YAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAA7B,CAA6B,CAAC,CAAC;QACnH,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,oBAAoB,EAAE,cAAM,YAAI,CAAC,0BAA0B,EAAE,EAAjC,CAAiC,CAAC,CAAC;QACnG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,UAAU,EAAE,cAAM,YAAI,CAAC,eAAe,EAAE,EAAtB,CAAsB,CAAC,CAAC;IAChF,CAAC;IAEO,2CAAoB,GAA5B;QACE,IAAI,CAAC,mBAAmB,GAAG,iCAAe,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACvE,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAE,CAAC,CAAC;QACxE,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,oBAAY,CAAC,MAAM,EAAE,SAAS,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;IACvF,CAAC;IAES,2CAAoB,GAA9B;QAAA,iBAOC;QANC,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE;YACpC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,mCAAgB,CAAC,kBAAkB,EAAE,UAAC,IAAkC;gBAC9F,YAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC;YAAnC,CAAmC,CACpC,CAAC;YACF,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,mCAAgB,CAAC,eAAe,EAAE,cAAM,YAAI,CAAC,KAAK,EAAE,EAAZ,CAAY,CAAC,CAAC;SAC/E;IACH,CAAC;IAEO,+CAAwB,GAAhC;QACE,IAAM,gBAAgB,GAAG,iCAAe,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACrE,IAAI,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;IACrE,CAAC;IAEO,sDAA+B,GAAvC;QACE,IAAI,CAAC,2BAA2B,GAAG,IAAI,yDAA2B,CAAC,IAAI,CAAC,CAAC;IAC3E,CAAC;IAEO,8CAAuB,GAA/B,UAAgC,IAAiC;QAC/D,mFAAmF;QACnF,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5B,OAAO;SACR;QAED,eAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACpB,eAAM,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACjC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACjD,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC/B,CAAC;IAEO,yCAAkB,GAA1B,UAA2B,IAA4B;QACrD,IAAI,aAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAChD,OAAO,IAAI,CAAC,mBAAmB,EAAE,CAAC;SACnC;QAED,IAAM,KAAK,GAAG,sBAAS,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC;QAC3E,IAAM,QAAQ,GAAG,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAClE,IAAI,CAAC,QAAQ,GAAG,KAAK,GAAG,CAAC,CAAC;QAE1B,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;IACjC,CAAC;IAEO,iDAA0B,GAAlC;QACE,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QAC1B,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;QACrB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,4BAA4B,EAAE,CAAC;IAC9D,CAAC;IAEO,sCAAe,GAAvB,UAAwB,QAAyB;QAC/C,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;IAClF,CAAC;IAEO,8CAAuB,GAA/B,UAAgC,IAAgC;QAC9D,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE;YAClC,OAAO;SACR;QAED,IAAM,mBAAmB,GAAa,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QAChF,IAAI,CAAC,mBAAmB,EAAE;YACxB,OAAO;SACR;QAED,IAAI,CAAC,+BAA+B,CAAC,mBAAmB,CAAC,CAAC;IAC5D,CAAC;IAoBO,+CAAwB,GAAhC,UAAiC,IAAkC;QACjE,eAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAEpB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE;YAChC,OAAO;SACR;QAED,IAAM,WAAW,GAAG,IAAI,iDAAuB,CAAC,IAAI,CAAC,CAAC;QACtD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC;IAC1D,CAAC;IAEM,gCAAS,GAAhB;QACE,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAEO,oCAAa,GAArB;QACE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE;YAClC,OAAO;SACR;QAED,IAAM,YAAY,GAAG,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;QACnE,IAAI,CAAC,YAAY,EAAE;YACjB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,uGAAqG,CAAC,CAAC;SAChI;QAED,IAAI,CAAC,OAAO,GAAG,IAAI,2BAAY,CAAC,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;IAC9D,CAAC;IAEO,oCAAa,GAArB;QACE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAClC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAC9C,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC;IACjD,CAAC;IAEO,mCAAY,GAApB;QACE,OAAO,IAAI,uCAAkB,CAAC,IAAI,CAAC,CAAC;IACtC,CAAC;IAEO,+CAAwB,GAAhC;QACE,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC/B,CAAC;IAEO,4CAAqB,GAA7B;QACE,IAAI,CAAC,wBAAwB,GAAG,KAAK,CAAC;QACtC,IAAI,CAAC,6BAA6B,EAAE,CAAC;QACrC,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;IACvC,CAAC;IAEO,oDAA6B,GAArC;QACE,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;IACjF,CAAC;IAEO,uCAAgB,GAAxB;QACE,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACvD,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC7C,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,+BAA+B,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAChF,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,cAAc,EAAE,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC5E,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,cAAc,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IACpE,CAAC;IAEM,sCAAe,GAAtB,UAAuB,kBAA+B;QACpD,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAE1B,IAAM,OAAO,GAAkB,kBAAkB,CAAC,CAAC,CAAC,EAAE,kBAAkB,sBAAE,CAAC,CAAC,CAAC,EAAE,wBAAwB,EAAE,IAAI,EAAE,CAAC;QAEhH,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IAC7C,CAAC;IAEO,yCAAkB,GAA1B;QACE,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAEO,0CAAmB,GAA3B;QACE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,4FAA4F,CAAC,CAAC;QAChH,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAEO,oDAA6B,GAArC,UAAsC,KAA4B;QAChE,IAAI,CAAC,cAAc,CAAC,cAAc,CAChC,KAAK,EACL;YACE,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YACxB,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE;YACzC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK;SAC/B,EACD,IAAI,CAAC,OAAO,CACb,CAAC;IACJ,CAAC;IAnlBM,eAAE,GAAG,cAAc,CAAC;IACpB,qBAAQ,GAAG,cAAM,qCAAc,CAAC,EAAE,YAAY,gBAAE,CAAC,EAAhC,CAAgC,CAAC;IAEzD;;;OAGG;IACI,oBAAO,gBACT,+CAAsB;QAEzB;;;;;;;;;;;;;;;WAeG;QACH,EAAE,EAAE,mCAAgB,CAAC,iBAAiB,CAAC;YACrC,cAAc,EAAE,UAAC,KAAU,EAAE,OAA6B;gBAAzC,kCAAU;gBACzB,IAAM,aAAa,GAAG,EAAE,CAAC;gBACzB,IAAM,cAAc,GAAG,KAAK,CAAC,OAAO,CAAC,mBAAmB,EAAE,EAAE,CAAC,CAAC;gBAC9D,IAAI,aAAK,CAAC,gBAAgB,CAAC,cAAc,CAAC,EAAE;oBAC1C,OAAO,cAAc,CAAC,KAAK,CAAC,CAAC,EAAE,aAAa,GAAG,CAAC,CAAC,CAAC;iBACnD;gBAED,OAAO,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,aAAa,GAAG,CAAC,CAAC,CAAC;YACnD,CAAC;SACF,CAAC;QAEF;;;;WAIG;QACH,KAAK,EAAE,mCAAgB,CAAC,0BAA0B,CAAC;YACjD,YAAY,EAAE,WAAC,CAAC,SAAS,CAAC;YAC1B,OAAO,EAAE,eAAe;YACxB,QAAQ,EAAE,EAAE;SACb,CAAC;QAEF;;;;;;;;;WASG;QACH,KAAK,EAAE,mCAAgB,CAAC,gBAAgB,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC;QAEtF;;;;;;;;;;;;;;;WAeG;QACH,YAAY,EAAE,mCAAgB,CAAC,iBAAiB,CAAC;YAC/C,cAAc,EAAE,eAAK,IAAI,QAAC,uCAAmB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,EAAhD,CAAgD;YACzE,OAAO,EAAE,SAAS;SACnB,CAAC;QAEF;;;;;;;WAOG;QACH,cAAc,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC;QAEzG;;;;WAIG;QACH,cAAc,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,KAAK,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC;QAElG;;;;;;;WAOG;QACH,kBAAkB,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,KAAK,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC;QAEtG;;;;;;WAMG;QACH,mBAAmB,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC;QAE1G;;;;;;;WAOG;QACH,0BAA0B,EAAE,mCAAgB,CAAC,iBAAiB,CAAC;YAC7D,eAAe,EAAE,cAAM,QAAC,yBAAW,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAtC,CAAsC;YAC7D,GAAG,EAAE,CAAC;YACN,MAAM,EAAE,qBAAqB;YAC7B,OAAO,EAAE,eAAe;SACzB,CAAC;QAEF;;;;;WAKG;QACH,YAAY,EAAE,mCAAgB,CAAC,eAAe,EAAsB;QAEpE;;;;;;WAMG;QACH,gBAAgB,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,IAC7E;IA+bJ,mBAAC;CAAA,CArlBiC,qBAAS,GAqlB1C;AArlBY,oCAAY;AAulBzB,+BAAc,CAAC,2BAA2B,CAAC,YAAY,CAAC,CAAC;AACzD,YAAY,CAAC,QAAQ,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;AC1pBxB,0CAAwH;AACxH,6CAAqD;AACrD,sCAA2C;AAC3C,gDAA+D;AAE/D,iDAAgE;AAChE,0CAAwE;AACxE,mCAAqC;AACrC,4CAAsD;AACtD,qCAA0C;AAC1C,uDAAgF;AAChF,yCAA8C;AAE9C,gDAA6G;AAC7G,8CAAwD;AAExD,2CAAiD;AACjD,iDAA+D;AAC/D,uCAA0C;AAC1C,8CAA4D;AAsB5D,4BAA+B,OAAiB,EAAE,OAAW;IAC3D,IAAI,OAAO,IAAI,IAAI,EAAE;QACnB,OAAO,GAAQ,EAAE,CAAC;KACnB;IACK,OAAQ,CAAC,OAAO,GAAG,OAAO,CAAC;IACjC,OAAO,OAAO,CAAC;AACjB,CAAC;AAED;;;;;;;;GAQG;AACH;IAAgC,8BAAS;IAkJvC;;;;;;;OAOG;IACH,oBACS,OAAoB,EACpB,OAA2B,EAClC,QAA6B,EACtB,MAAqB,EAC5B,iBAAyC;QAAzC,wDAA4B,UAAU,CAAC,EAAE;QAL3C,YAOE,kBAAM,OAAO,EAAE,iBAAiB,EAAE,QAAQ,CAAC,SAqC5C;QA3CQ,aAAO,GAAP,OAAO,CAAa;QACpB,aAAO,GAAP,OAAO,CAAoB;QAE3B,YAAM,GAAN,MAAM,CAAe;QAK5B,KAAI,CAAC,OAAO,GAAG,mCAAgB,CAAC,WAAW,CAAC,OAAO,EAAE,UAAU,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;QAExF,IAAI,KAAI,CAAC,OAAO,CAAC,MAAM,IAAI,IAAI,EAAE;YAC/B,KAAI,CAAC,yBAAyB,EAAE,CAAC;SAClC;QAED,KAAI,CAAC,MAAM,GAAG,KAAI,CAAC,MAAM,IAAI,KAAI,CAAC,aAAa,EAAE,CAAC;QAClD,eAAM,CAAC,MAAM,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC;QAE3B,IAAI,wBAAwB,GAAG,KAAI,CAAC,QAAQ,EAAE,CAAC;QAC/C,IAAI,wBAAwB,IAAI,IAAI,EAAE;YACpC,+EAA+E;YAC/E,IAAI,KAAI,CAAC,OAAO,CAAC,aAAa,IAAI,IAAI,EAAE;gBACtC,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;aACtD;SACF;aAAM;YACL,IAAI,MAAM,SAAU,CAAC;YAErB,IAAI,oBAAO,CAAC,wBAAwB,CAAC,EAAE;gBACrC,MAAM,GAAG,wBAAwB,CAAC;aACnC;iBAAM,IAAI,KAAI,CAAC,OAAO,CAAC,WAAW,EAAE;gBACnC,IAAI,qBAAQ,CAAC,wBAAwB,CAAC,EAAE;oBACtC,MAAM,GAAG,gBAAG,CAAC,wBAAwB,CAAC,KAAK,CAAC,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,UAAC,CAAS;wBAC7E,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;oBAClB,CAAC,CAAC,CAAC;iBACJ;aACF;iBAAM;gBACL,wBAAwB,GAAG,wBAAwB,CAAC,QAAQ,EAAE,CAAC;gBAC/D,MAAM,GAAG,CAAC,wBAAwB,CAAC,CAAC;aACrC;YACD,KAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;YAC/B,IAAI,KAAI,CAAC,OAAO,CAAC,WAAW,IAAI,IAAI,EAAE;gBACpC,KAAI,CAAC,uBAAuB,EAAE,CAAC;aAChC;SACF;;IACH,CAAC;IAED;;;;OAIG;IACI,6BAAQ,GAAf;QACE,IAAI,KAAK,GAAG,aAAK,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,EAAU,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACzE,IAAI,CAAC,oBAAO,CAAC,KAAK,CAAC,IAAI,qBAAQ,CAAC,KAAK,CAAC,EAAE;YACtC,KAAK,GAAG,IAAI,CAAC;SACd;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;;;OAIG;IACI,mCAAc,GAArB,UAAsB,KAAa;QACjC,IAAM,OAAO,GAAG,QAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC;QAC9B,IAAI,QAAQ,GAAG,uBAAU,CAAC,yBAAyB,CAAC,IAAI,CAAC,OAAO,CAAC,KAAe,EAAE,KAAK,CAAC,CAAC;QAEzF,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YACvB,4EAA4E;YAC5E,IAAM,MAAM,GAAG,iCAAe,CAAC,SAAS,CAAI,IAAI,CAAC,OAAO,CAAC,MAAM,OAAI,CAAC,IAAI,iCAAe,CAAC,SAAS,CAAC,KAAG,IAAI,CAAC,OAAO,CAAC,MAAQ,CAAC,CAAC;YAE5H,IAAI,aAAK,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;gBACxB,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;aAC9D;iBAAM;gBACL,IAAI,CAAC,MAAM,CAAC,IAAI,CACd,YAAU,IAAI,CAAC,OAAO,CAAC,MAAM,2EAAwE,EACrG,iBAAI,CAAC,iCAAe,CAAC,UAAU,EAAE,CAAC,CACnC,CAAC;aACH;YAED,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACjE,IAAI,WAAW,EAAE;gBACf,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;aAC5C;YACD,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,UAAU,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,eAAe,EAAE;gBAChH,QAAQ,GAAG,yBAAW,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAC;aACxD;SACF;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;YAC1B,OAAO,CAAC,SAAS,GAAG,QAAQ,CAAC;SAC9B;aAAM;YACL,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;SACxD;QACD,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;QAChD,OAAO,OAAO,CAAC;IACjB,CAAC;IAES,sCAAiB,GAA3B;QACE,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAEO,8CAAyB,GAAjC;QAAA,iBAcC;QAbC,IAAI,CAAC,OAAO,GAAG,mCAAgB,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAClG,IAAM,QAAQ,GAAG,iBAAI,CAAC,UAAU,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC;QACtE,IAAM,MAAM,GAAG,mBAAM,CAAC,QAAQ,EAAE,mBAAS;YACvC,IAAM,gBAAgB,GAAG,UAAU,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,CAAC;YACnF,IAAI,gBAAgB,EAAE;gBACpB,IAAM,OAAO,GAAG,gBAAgB,CAAC,OAAO,CAAC;gBACzC,OAAO,OAAO,IAAI,IAAI,IAAI,qBAAQ,CAAC,OAAO,EAAE,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;aAClE;YACD,OAAO,KAAK,CAAC;QACf,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,iBAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,UAAC,KAAK,EAAE,GAAG;YACvE,OAAO,CAAC,qBAAQ,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,qCAAgB,GAAxB;QACE,IAAM,aAAa,GAAG,mCAAgB,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,EAAE,eAAe,EAAE,EAAE,CAAC,CAAC;QAC3F,IAAI,aAAK,CAAC,gBAAgB,CAAC,aAAa,CAAC,EAAE;YACzC,OAAO,mBAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,GAAG,GAAG,aAAa,GAAG,GAAG,CAAC,CAAC,CAAC;SAChF;QACD,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;IACpC,CAAC;IAEO,gCAAW,GAAnB,UAAoB,IAAY,EAAE,MAAc;QAC9C,IAAM,eAAe,GAAyB;YAC5C,iBAAiB,EAAE,IAAI;YACvB,4BAA4B,EAAE,KAAK;YACnC,oBAAoB,EAAE,KAAK;YAC3B,oBAAoB,EAAE,KAAK;SAC5B,CAAC;QAEF,IAAI,MAAM,IAAI,MAAM,EAAE;YACpB,OAAO,qBAAS,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;SAC1E;aAAM,IAAI,MAAM,IAAI,UAAU,IAAI,MAAM,IAAI,eAAe,EAAE;YAC5D,OAAO,qBAAS,CAAC,gBAAgB,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;SAC9E;QACD,OAAO,EAAE,CAAC;IACZ,CAAC;IAEO,sCAAiB,GAAzB,UAA0B,MAAgB;QAA1C,iBASC;QARC,iBAAI,CAAC,MAAM,EAAE,UAAC,KAAK,EAAE,KAAK;YACxB,IAAI,KAAK,IAAI,SAAS,EAAE;gBACtB,KAAI,CAAC,iBAAiB,EAAE,CAAC,WAAW,CAAC,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;gBACjE,IAAI,KAAK,KAAK,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;oBAC/B,KAAI,CAAC,iBAAiB,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;iBAC9F;aACF;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,sCAAiB,GAAzB;QACE,IAAM,OAAO,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,qBAAqB,EAAE,EAAE,mBAAM,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;QACnG,OAAO,OAAO,CAAC,EAAE,CAAC;IACpB,CAAC;IAES,4CAAuB,GAAjC;QACE,IAAM,IAAI,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACtC,QAAE,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC3C,2EAA2E;QAC3E,QAAE,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;IACxC,CAAC;IAEO,qCAAgB,GAAxB,UAAyB,OAAoB,EAAE,kBAA0B,EAAE,kBAA0B;QACnG,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,kBAAkB,EAAE,kBAAkB,CAAC,CAAC;QACjE,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,kBAAkB,EAAE,kBAAkB,CAAC,CAAC;IAC1E,CAAC;IAEO,+BAAU,GAAlB,UAAmB,OAAoB,EAAE,kBAA0B,EAAE,kBAA0B;QAA/F,iBAkCC;QAjCC,IAAM,kBAAkB,GAAG,iCAAe,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC1E,IAAM,MAAM,GAAG,mBAAM,CAAQ,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,kBAAkB,CAAC,EAAE,UAAC,sBAAiC;YAC/G,0HAA0H;YAC1H,2GAA2G;YAC3G,kLAAkL;YAClL,IAAI,yBAAyB,GAAG,IAAI,CAAC;YACrC,IAAM,2BAA2B,GAAG,qBAAS,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;YAC5E,IAAM,4BAA4B,GAAG,qBAAS,CAAC,eAAe,CAAC,aAAa,CAAC,CAAC;YAE9E,IAAI,sBAAsB,CAAC,QAAQ,EAAE;gBACnC,OAAO,KAAK,CAAC;aACd;YAED,IAAI,yBAAyB,IAAI,2BAA2B,EAAE;gBAC5D,yBAAyB,GAAG,CAAC,CAAC,sBAAsB,YAAY,2BAA2B,CAAC,CAAC;aAC9F;YAED,IAAI,yBAAyB,IAAI,4BAA4B,EAAE;gBAC7D,yBAAyB,GAAG,CAAC,CAAC,sBAAsB,YAAY,4BAA4B,CAAC,CAAC;aAC/F;YAED,OAAO,yBAAyB,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,IAAI,MAAM,CAAC,MAAM,EAAE;YACjB,IAAM,iBAAe,GAAG,CAAC,CAAC,iBAAI,CAAQ,MAAM,EAAE,eAAK;gBACjD,IAAM,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;gBACxD,OAAO,UAAU,IAAI,UAAU,CAAC,QAAQ,CAAC;YAC3C,CAAC,CAAC,CAAC;YAEH,IAAM,YAAY,GAAG,cAAM,YAAI,CAAC,oBAAoB,CAAC,iBAAe,EAAE,MAAM,EAAE,kBAAkB,CAAC,EAAtE,CAAsE,CAAC;YAClG,IAAI,CAAC,qBAAqB,CAAC,OAAO,EAAE,CAAC,CAAC,iBAAe,EAAE,kBAAkB,EAAE,YAAY,CAAC,CAAC;SAC1F;IACH,CAAC;IAEO,qCAAgB,GAAxB;QACE,IAAM,yBAAyB,GAAG,iCAAe,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACjF,OAAO,mBAAM,CACX,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,yBAAyB,CAAC,EACvD,UAAC,SAAoB,IAAK,gBAAS,CAAC,IAAI,KAAK,2BAAY,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAzD,CAAyD,CACpF,CAAC;IACJ,CAAC;IAEO,sCAAiB,GAAzB,UAA0B,OAAoB,EAAE,kBAA0B,EAAE,kBAA0B;QAAtG,iBASC;QARC,IAAM,aAAa,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAE9C,IAAI,aAAa,CAAC,MAAM,EAAE;YACxB,IAAM,iBAAe,GAAG,CAAC,CAAC,iBAAI,CAAe,aAAa,EAAE,sBAAY,IAAI,mBAAY,CAAC,MAAM,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,EAAxD,CAAwD,CAAC,CAAC;YAEtI,IAAM,YAAY,GAAG,cAAM,YAAI,CAAC,2BAA2B,CAAC,iBAAe,EAAE,aAAa,EAAE,kBAAkB,CAAC,EAApF,CAAoF,CAAC;YAChH,IAAI,CAAC,qBAAqB,CAAC,OAAO,EAAE,iBAAe,EAAE,kBAAkB,EAAE,YAAY,CAAC,CAAC;SACxF;IACH,CAAC;IAEO,0CAAqB,GAA7B,UAA8B,OAAoB,EAAE,UAAmB,EAAE,KAAa,EAAE,YAAwB;QAC9G,IAAM,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,WAAC,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,WAAC,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;QAC7E,IAAI,mCAAgB,EAAE;aACnB,SAAS,CAAC,KAAK,CAAC;aAChB,SAAS,CAAC,KAAK,CAAC;aAChB,WAAW,CAAC,OAAO,CAAC;aACpB,gBAAgB,CAAC,YAAY,CAAC;aAC9B,KAAK,EAAE,CAAC;QAEX,IAAI,UAAU,EAAE;YACd,QAAE,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;SACxC;QACD,QAAE,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;IAC1C,CAAC;IAEO,yCAAoB,GAA5B,UAA6B,eAAwB,EAAE,MAAe,EAAE,KAAa;QACnF,MAAM,CAAC,OAAO,CAAC,eAAK;YAClB,eAAe,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC1E,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IAC3B,CAAC;IAEO,gDAA2B,GAAnC,UAAoC,eAAwB,EAAE,MAAsB,EAAE,KAAa;QACjG,MAAM,CAAC,OAAO,CAAC,eAAK;YAClB,eAAe,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC1E,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IAC3B,CAAC;IAEO,iCAAY,GAApB,UAAqB,KAAa;QAAlC,iBASC;QARC,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC;YACrC,kBAAkB,EAAE;gBAClB,YAAI,CAAC,cAAc,CAAC,cAAc,CAA2B,kDAAwB,CAAC,aAAa,EAAE;oBACnG,OAAO,EAAE,KAAI,CAAC,OAAO,CAAC,KAAK;oBAC3B,UAAU,EAAE,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE;oBACzC,UAAU,EAAE,KAAK,CAAC,WAAW,EAAE;iBAChC,CAAC;YAJF,CAIE;SACL,CAAC,CAAC;IACL,CAAC;IAnaM,aAAE,GAAG,YAAY,CAAC;IAElB,mBAAQ,GAAG;QAChB,8BAAc,CAAC;YACb,UAAU,EAAE,UAAU;SACvB,CAAC,CAAC;IACL,CAAC,CAAC;IAEF;;;OAGG;IACI,kBAAO,GAAuB;QACnC;;;;WAIG;QACH,KAAK,EAAE,mCAAgB,CAAC,gBAAgB,CAAC,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;QAEpF;;;;;;;;WAQG;QACH,KAAK,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,EAAE,cAAc,EAAE,UAAC,KAAK,EAAE,OAAO,IAAK,YAAK,IAAI,OAAO,CAAC,KAAK,EAAtB,CAAsB,EAAE,CAAC;QAEzG;;;;WAIG;QACH,SAAS,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC;QAEvE;;;;;;;;WAQG;QACH,WAAW,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC;QAEzE;;;;;;;WAOG;QACH,SAAS,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,EAAE,MAAM,EAAE,aAAa,EAAE,YAAY,EAAE,GAAG,EAAE,CAAC;QAE3F;;;;;;;;;WASG;QACH,gBAAgB,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,EAAE,MAAM,EAAE,aAAa,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC;QAEnG;;;;;WAKG;QACH,MAAM,EAAE,mCAAgB,CAAC,iBAAiB,EAAE;QAE5C;;WAEG;QACH,aAAa,EAAE,mCAAgB,CAAC,iBAAiB,CAAoC;YACnF,UAAU,EAAE;gBACV,IAAI,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACxE,MAAM,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC1E,KAAK,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAEzE,QAAQ,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,UAAU,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC1F,MAAM,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBAE5E,4BAA4B,EAAE,mCAAgB,CAAC,kBAAkB,CAC/D,kBAAkB,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAC1F;gBACD,oBAAoB,EAAE,mCAAgB,CAAC,kBAAkB,CACvD,kBAAkB,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAC1F;gBACD,oBAAoB,EAAE,mCAAgB,CAAC,kBAAkB,CACvD,kBAAkB,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAC1F;gBACD,iBAAiB,EAAE,mCAAgB,CAAC,kBAAkB,CACpD,kBAAkB,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,CAC3F;gBACD,kBAAkB,EAAE,mCAAgB,CAAC,kBAAkB,CACrD,kBAAkB,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAC1F;gBACD,qBAAqB,EAAE,mCAAgB,CAAC,kBAAkB,CACxD,kBAAkB,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAC1F;gBACD,iBAAiB,EAAE,mCAAgB,CAAC,kBAAkB,CACpD,kBAAkB,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,CAC3F;gBACD,gBAAgB,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,CAAC,CAAC,CAAC;gBAEvH,aAAa,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBAChF,EAAE,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACrE,WAAW,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC1F,YAAY,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBAEhF,GAAG,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACtE,MAAM,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACzE,KAAK,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBAExE,SAAS,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC;gBACxG,IAAI,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC;gBACnG,cAAc,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;gBAErF,MAAM,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,CAAC,SAAS,EAAE,aAAa,EAAE,YAAY,CAAC,EAAE,EAAE,YAAY,EAAE,GAAG,EAAE,CAAC,CAAC;aAChI;SACF,CAAC;QAEF;;;;WAIG;QACH,WAAW,EAAE,mCAAgB,CAAC,0BAA0B,EAAE;KAC3D,CAAC;IAEK,wBAAa,GAAG,iBAAI,CAAC,UAAU,CAAC,OAAO,EAAE,eAAe,CAAC,CAAC;IAE1D,wBAAa,GAAQ;QAC1B,aAAa,EAAE,UAAU,CAAC,OAAO,CAAC,aAAa;KAChD,CAAC;IAqRJ,iBAAC;CAAA,CAra+B,qBAAS,GAqaxC;AAraY,gCAAU;AAuavB,+BAAc,CAAC,2BAA2B,CAAC,UAAU,CAAC,CAAC;;;;;;;;;;;AChevD,+BAAgC;AAEhC;IAAA;IAsBA,CAAC;IArBe,+BAAwB,GAAtC,UAAuC,YAAyB,EAAE,UAAkB;QAClF,IAAM,UAAU,GAAG,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACrD,UAAU,CAAC,YAAY,CAAC,OAAO,EAAE,KAAG,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,UAAY,CAAC,CAAC;IAClF,CAAC;IAEa,oCAA6B,GAA3C,UAA4C,YAAyB,EAAE,aAAqB;QAC1F,IAAM,UAAU,GAAG,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACrD,UAAU,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC,CAAC;IAC3F,CAAC;IAEa,+BAAwB,GAAtC,UAAuC,YAAyB,EAAE,UAA2B;QAC3F,IAAM,UAAU,GAAG,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACrD,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,UAAC,UAAU,EAAE,QAAQ;YACtC,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,UAAU,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAEc,eAAQ,GAAvB,UAAwB,UAAsB;QAC5C,IAAM,SAAS,GAAG,UAAU,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACnD,OAAO,SAAS,CAAC,CAAC,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;IAC1C,CAAC;IACH,aAAC;AAAD,CAAC;AAtBY,wBAAM;;;;;;;;;;;ACHnB,yBAAmC;AACnC,4CAA+E;AAC/E,uCAA2C;AAC3C,uCAA0C;AAC1C,mCAA0C;AAC1C,qCAA0C;AAC1C,yCAA8C;AAC9C,gDAAqE;AACrE,qDAA8D;AAC9D,4DAA+H;AAC/H,2DAAwE;AACxE,oDAA6E;AAC7E,2DAA2F;AAC3F,0DAAyF;AACzF,0CAA4C;AAC5C,gDAA8D;AAE9D;IAiCE,+BAAmB,SAAc,EAAS,EAAU,EAAE,OAAoC,EAAE,kBAAuC;QAAhH,cAAS,GAAT,SAAS,CAAK;QAAS,OAAE,GAAF,EAAE,CAAQ;QAzB5C,4BAAuB,GAAU,EAAE,CAAC;QACpC,mCAA8B,GAAc,EAAE,CAAC;QAyBrD,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;QACzD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;QACvD,IAAI,CAAC,eAAe,GAAoB,qBAAS,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,iCAAe,EAAE,KAAK,CAAC,CAAC;QACjG,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACjC,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC9B,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,oBAAoB,CAAC;IACjD,CAAC;IA3Ba,0BAAI,GAAlB,UAAmB,8BAA8B,EAAE,IAAiB,EAAE,SAAS,EAAE,OAAoC,EAAE,EAAU;QAC/H,IAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACrC,IAAI,CAAC,MAAM,EAAE;YACX,OAAO;SACR;QAED,yDAA2B,CAAC,QAAQ,CAAC,qBAAqB,EAAE,QAAE,CAAC,IAAI,CAAC,EAAE,uBAAuB,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;QACnH,yDAA2B,CAAC,QAAQ,CAAC,8BAA8B,EAAE,QAAE,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;IACzG,CAAC;IAEc,gCAAU,GAAzB,UAA0B,IAAiB;QACzC,IAAM,MAAM,GAAG,QAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACpD,IAAI,CAAC,MAAM,EAAE;YACX,IAAM,MAAM,GAAG,IAAI,eAAM,CAAC,kBAAkB,CAAC,CAAC;YAC9C,MAAM,CAAC,IAAI,CAAC,+EAA+E,CAAC,CAAC;SAC9F;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAYM,iDAAiB,GAAxB,UAAyB,MAAiB;QACxC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC1C,IAAI,CAAC,8BAA8B,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;QAC1E,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,mDAAmB,GAA1B;QACE,OAAO,IAAI,CAAC,aAAa,EAAE,CAAC;IAC9B,CAAC;IAEM,iDAAiB,GAAxB;QACE,IAAI,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,qDAAyB,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;YAC5F,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B;aAAM,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,qDAAyB,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;YACnG,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B;QACD,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;YAC1B,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,gBAAgB,EAAE,CAAC;SAClD;IACH,CAAC;IAEM,oDAAoB,GAA3B;QACE,iBAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE,mBAAS;YAC1C,IAAI,SAAS,CAAC,WAAW,IAAI,SAAS,CAAC,WAAW,CAAC,yBAAyB,EAAE;gBAC5E,SAAS,CAAC,WAAW,CAAC,oBAAoB,EAAE,CAAC;aAC9C;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,6CAAa,GAArB;QACE,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YACzB,OAAO,CACL,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE;gBACtB,CAAC,aAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,2CAAoB,EAAE,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CACjH,CAAC;SACH;QACD,QAAQ,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,iBAAiB,EAAE,EAAE;YACrE,KAAK,OAAO,CAAC;YACb,KAAK,QAAQ;gBACX,OAAO,IAAI,CAAC;YACd,KAAK,MAAM;gBACT,OAAO,CACL,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE;oBACtB,CAAC,aAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAChI,CAAC;YACJ;gBACE,OAAO,KAAK,CAAC;SAChB;IACH,CAAC;IAEO,iDAAiB,GAAzB;QACE,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;QACtB,IAAI,CAAC,4BAA4B,EAAE,CAAC;QACpC,QAAE,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAI,yDAA2B,CAAC,iCAAmC,CAAC,CAAC,CAAC,MAAM,CACjG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE,CACxC,CAAC;QACF,qDAAyB,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAC/D,CAAC;IAEO,iDAAiB,GAAzB;QACE,IAAI,CAAC,iCAAiC,EAAE,CAAC;QACzC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QACxB,qDAAyB,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACjE,CAAC;IAEO,6CAAa,GAArB,UAAsB,kBAAuC;QAC3D,IAAI,eAAe,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAClD,IAAI,cAAc,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAChD,IAAI,QAAQ,GAAG,kBAAkB,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,uCAAkB,CAAC,eAAe,EAAE,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QACjI,OAAO,QAAQ,CAAC;IAClB,CAAC;IAEO,oDAAoB,GAA5B;QACE,IAAI,sBAAsB,GAAG,QAAE,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;QAC5E,IAAI,iBAAiB,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,wCAAwC,EAAE,KAAK,EAAE,eAAe,EAAE,CAAC,CAAC;QACnH,IAAI,QAAQ,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,8BAA8B,EAAE,CAAC,CAAC;QACxE,QAAQ,CAAC,IAAI,CAAC,WAAC,CAAC,YAAY,CAAC,CAAC,CAAC;QAC/B,iBAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACtC,sBAAsB,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;QACrD,IAAI,eAAe,GAAG,IAAI,qDAAyB,CACjD,OAAO,EACP,sBAAsB,EACtB,IAAI,CAAC,SAAS,EACd,qBAAqB,CAAC,kBAAkB,EACxC,qBAAqB,CAAC,oBAAoB,CAC3C,CAAC;QACF,OAAO,eAAe,CAAC;IACzB,CAAC;IAEO,mDAAmB,GAA3B;QACE,IAAI,qBAAqB,GAAG,QAAE,CAAC,GAAG,CAAC,CAAC;QACpC,IAAI,OAAO,GAAG,QAAE,CAAC,GAAG,CAAC,CAAC;QACtB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACvC,qBAAqB,CAAC,EAAE,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACjD,IAAI,cAAc,GAAG,IAAI,mDAAwB,CAAC,OAAO,EAAE,qBAAqB,CAAC,CAAC;QAClF,OAAO,cAAc,CAAC;IACxB,CAAC;IAEO,sDAAsB,GAA9B;QACE,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;IACxE,CAAC;IAEO,mDAAmB,GAA3B;QAAA,iBAIC;QAHC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,yBAAW,CAAC,SAAS,EAAE,cAAM,YAAI,CAAC,eAAe,EAAE,EAAtB,CAAsB,CAAC,CAAC;QACvE,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,yBAAW,CAAC,YAAY,EAAE,UAAC,CAAQ,EAAE,IAA4B,IAAK,YAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAA7B,CAA6B,CAAC,CAAC;QACvH,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,yBAAW,CAAC,UAAU,EAAE,cAAM,YAAI,CAAC,gBAAgB,EAAE,EAAvB,CAAuB,CAAC,CAAC;IAC3E,CAAC;IAEO,yDAAyB,GAAjC;QAAA,iBAcC;QAbC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE,CACtC,QAAQ,EACR,qBAAQ,CAAC;YACP,iBAAI,CAAC,KAAI,CAAC,uBAAuB,EAAE,mBAAS;gBAC1C,IAAI,WAAW,GAAG,SAAS,CAAC,WAAW,CAAC;gBACxC,IAAI,WAAW,IAAI,WAAW,CAAC,yBAAyB,IAAI,CAAC,KAAI,CAAC,6BAA6B,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE;oBACnH,SAAS,CAAC,WAAW,CAAC,qBAAqB,CAAC,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;iBACvF;qBAAM,IAAI,WAAW,IAAI,SAAS,CAAC,WAAW,CAAC,yBAAyB,EAAE;oBACzE,SAAS,CAAC,WAAW,CAAC,qBAAqB,EAAE,CAAC;iBAC/C;YACH,CAAC,CAAC,CAAC;QACL,CAAC,EAAE,qBAAqB,CAAC,oBAAoB,CAAC,CAC/C,CAAC;IACJ,CAAC;IAEO,iEAAiC,GAAzC;QAAA,iBAMC;QALC,iBAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE,UAAC,SAAS,EAAE,KAAK;YAClD,IAAI,SAAS,CAAC,OAAO,EAAE;gBACrB,SAAS,CAAC,OAAO,CAAC,gBAAgB,GAAG,KAAI,CAAC,8BAA8B,CAAC,KAAK,CAAC,CAAC;aACjF;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,4DAA4B,GAApC;QACE,iBAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE,mBAAS;YAC1C,IAAI,SAAS,CAAC,OAAO,EAAE;gBACrB,SAAS,CAAC,OAAO,CAAC,gBAAgB,GAAG,KAAK,CAAC;aAC5C;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,6DAA6B,GAArC,UAAsC,kBAA+B;QACnE,IAAI,QAAQ,GAAG,kBAAkB,CAAC,qBAAqB,EAAE,CAAC,GAAG,CAAC;QAC9D,IAAI,WAAW,GAAG,kBAAkB,CAAC,qBAAqB,EAAE,CAAC,MAAM,CAAC;QACpE,IAAI,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE,CAAC,qBAAqB,EAAE,CAAC,GAAG,CAAC;QACvF,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE,CAAC,qBAAqB,EAAE,CAAC,MAAM,CAAC;QAE7F,WAAW,GAAG,WAAW,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;QAEjD,OAAO,QAAQ,IAAI,WAAW,IAAI,WAAW,IAAI,cAAc,CAAC;IAClE,CAAC;IAEO,sDAAsB,GAA9B;QACE,IAAI,mBAA2B,CAAC;QAChC,iCAAe,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,OAAO,CAAC,eAAK;YAC5F,IAAM,OAAO,GAAG,KAAK,CAAC,OAAsC,CAAC;YAE7D,IAAI,CAAC,mBAAmB,IAAI,OAAO,CAAC,mBAAmB,EAAE;gBACvD,mBAAmB,GAAG,OAAO,CAAC,mBAAmB,CAAC;aACnD;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mBAAmB,EAAE;YACxB,mBAAmB,GAAG,WAAC,CAAC,qBAAqB,CAAC,mCAAmC,CAAC,CAAC;SACpF;QAED,OAAO,mBAAmB,CAAC;IAC7B,CAAC;IAEO,+CAAe,GAAvB;QACE,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;IACtC,CAAC;IAEO,gDAAgB,GAAxB;QACE,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;IACtC,CAAC;IAEO,kDAAkB,GAA1B,UAA2B,IAA4B;QACrD,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,KAAK,CAAC,EAAE;YACjC,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;SACrC;aAAM;YACL,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;SACrC;IACH,CAAC;IAhOa,0CAAoB,GAAG,GAAG,CAAC;IAE1B,wCAAkB,GAAW,GAAG,CAAC;IACjC,0CAAoB,GAAW,IAAI,CAAC,CAAC,oDAAoD;IACzF,yDAAmC,GAAG,SAAS,CAAC;IA6NjE,4BAAC;CAAA;AAlOY,sDAAqB;;;;;;;;;;;ACjBlC;;;;GAIG;AACH,IAAY,eAUX;AAVD,WAAY,eAAe;IACzB;;;OAGG;IACH,gCAAa;IACb;;OAEG;IACH,wCAAqB;AACvB,CAAC,EAVW,eAAe,GAAf,uBAAe,KAAf,uBAAe,QAU1B;;;;;;;;;;;;;;;;;;;;;ACdD,gDAA4D;AAE5D,8CAAwD;AACxD,4CAA0E;AAC1E,4CAAsD;AACtD,sCAA2C;AAC3C,mCAAqC;AACrC,+BAAgC;AAChC,6CAAqD;AAkBrD;;;;;GAKG;AACH;IAA2B,yBAAU;IA+CnC;;;;;;;OAOG;IACH,eAAY,OAAoB,EAAS,OAAsB,EAAE,QAA6B,EAAE,MAAqB;QAArH,YACE,kBAAM,OAAO,EAAE,mCAAgB,CAAC,oBAAoB,CAAC,OAAO,EAAE,KAAK,EAAE,OAAO,CAAC,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,CAAC,SAQ3G;QATwC,aAAO,GAAP,OAAO,CAAe;QAE7D,IAAI,CAAC,CAAC,QAAQ,CAAC,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YACnC,oCAAoC;YACpC,KAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC,WAAW,CAAM,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;SACnE;QACD,IAAI,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,IAAI,IAAI,EAAE;YACtC,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,EAAE,CAAC;SACjC;;IACH,CAAC;IAaD;;;;OAIG;IACW,iBAAW,GAAzB,UAA0B,YAAoB;QAC5C,IAAI,YAAY,EAAE;YAChB,IAAI,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;gBACxC,IAAI,aAAW,GAAiB;oBAC9B,MAAM,EAAE,EAAE;iBACX,CAAC;gBACF,IAAI,MAAM,GAAe,yBAAW,CAAC,KAAK,CAAC,YAAY,EAAE,KAAK,CAAC,UAAU,CAAC,CAAC;gBAC3E,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,UAAC,KAAe;oBACtB,yBAAU,EAAE,qBAAU,CAAU;oBACvC,IAAI,UAAU,IAAI,IAAI,EAAE;wBACtB,aAAW,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,GAAG;4BACzD,IAAI,EAAE,UAAU;yBACjB,CAAC;qBACH;yBAAM;wBACL,aAAW,CAAC,IAAI,GAAG,UAAU,CAAC;qBAC/B;gBACH,CAAC,CAAC,CAAC;gBACH,OAAO,aAAW,CAAC;aACpB;YACD,IAAI;gBACF,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;aACjC;YAAC,OAAO,CAAC,EAAE;gBACV,eAAM,CAAC,IAAI,CAAC,+BAA6B,YAAY,MAAG,CAAC,CAAC;aAC3D;SACF;QACD,OAAO,EAAE,CAAC;IACZ,CAAC;IAED;;;;;OAKG;IACI,wBAAQ,GAAf,UAAgB,KAAkB;QAAlB,kCAAkB;QAChC,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,UAAC,GAAW,IAAK,YAAK,CAAC,WAAW,EAAE,IAAI,GAAG,CAAC,WAAW,EAAE,EAAxC,CAAwC,CAAC,CAAC;QACrH,IAAI,KAAK,GAAgB,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC9E,OAAO;YACL,IAAI,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI;YAC5C,IAAI,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI;SAC7C,CAAC;IACJ,CAAC;IAED;;;;;OAKG;IACI,8BAAc,GAArB,UAAsB,KAAa;QACjC,IAAI,QAAQ,GAAG,iBAAM,cAAc,YAAC,KAAK,CAAC,CAAC;QAC3C,QAAE,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAErC,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAEjC,IAAI,IAAI,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,kBAAkB,EAAE,CAAC,CAAC,EAAE,CAAC;QAC5D,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,EAAE;YACtB,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;SAC/B;QAED,IAAI,KAAK,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,mBAAmB,EAAE,EAAE,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC;QAElF,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,EAAE;YACtB,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;SAChC;QAED,QAAE,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE,CAAC;QAErB,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC3B,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC5B,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED,oGAAoG;IAC1F,uCAAuB,GAAjC;QACE,OAAO;IACT,CAAC;IA7JM,QAAE,GAAG,OAAO,CAAC;IAEb,cAAQ,GAAG;QAChB,8BAAc,CAAC;YACb,KAAK,EAAE,KAAK;SACb,CAAC,CAAC;IACL,CAAC,CAAC;IAEF;;;OAGG;IACI,aAAO,GAAkB;QAC9B;;;;;;;;;;;;;;;;;;;;;;;;WAwBG;QACH,MAAM,EAAE,mCAAgB,CAAC,iBAAiB,CAAe,UAAC,KAAa,IAAK,YAAK,CAAC,WAAW,CAAC,KAAK,CAAC,EAAxB,CAAwB,EAAE;YACpG,YAAY,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE;SAC7B,CAAC;QACF,WAAW,EAAE,mCAAgB,CAAC,0BAA0B,EAAE;KAC3D,CAAC;IAEK,YAAM,GAAG,uBAAU,CAAC;IAqB3B,gEAAgE;IAEhE,qEAAqE;IACrE,6CAA6C;IAC7C,6CAA6C;IAC9B,gBAAU,GAAG,0EAA0E,CAAC;IACvG,2FAA2F;IAC3F,wEAAwE;IACxE,wCAAwC;IACzB,iBAAW,GAAG,IAAI,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC,UAAU,CAAC,MAAM,GAAG,cAAc,GAAG,KAAK,CAAC,UAAU,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;IAoFrI,YAAC;CAAA,CA/J0B,uBAAU,GA+JpC;AA/JY,sBAAK;AAiKlB,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;AAErD,+BAAc,CAAC,2BAA2B,CAAC,KAAK,CAAC,CAAC;;;;;;;;;;;ACpMlD,mCAA6C;AAC7C,uCAA+C;AAW/C;IAIE,kCAAoB,WAA6C;QAA7C,gBAAW,GAAX,WAAW,CAAkC;QAC/D,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAEO,yCAAM,GAAd;QACE,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,IAAI,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;QAE3E,IAAI,CAAC,MAAM,GAAG,QAAE,CACd,QAAQ,EACR,EAAE,SAAS,EAAE,sCAAkC,IAAI,CAAC,WAAW,CAAC,SAAS,IAAI,EAAE,CAAE,EAAC,IAAI,EAAE,EAAE,EAC1F,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAC5D,CAAC;QAEF,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAE5E,IAAI,OAAO,EAAE;YACX,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAC/D,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAC1D,eAAM,CAAC,wBAAwB,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;SACjF;QAED,IAAI,IAAI,CAAC,WAAW,CAAC,aAAa,KAAK,SAAS,EAAE;YAChD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;SAC7C;QAED,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC;IAChC,CAAC;IAEM,yCAAM,GAAb,UAAc,aAAsB;QAClC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;IACpC,CAAC;IACH,+BAAC;AAAD,CAAC;AAnCY,4DAAwB;;;;;;;;;;;ACZrC,iCAAiC;AACjC,4CAAsD;AACtD,2CAAoD;AACpD,2CAA8C;AAC9C,0CAAkD;AAClD,qCAA0C;AAC1C,mCAAqC;AACrC,+BAAgC;AAEhC,uCAA0C;AAE1C;IAAA;IAgHA,CAAC;IA/GQ,sCAA2B,GAAlC,UAAmC,KAAa,EAAE,YAAqB;QACrE,OAAO,IAAI,MAAM,CAAC,yBAAW,CAAC,aAAa,CAAC,KAAK,EAAE,YAAY,CAAC,EAAE,GAAG,CAAC,CAAC;IACzE,CAAC;IAEM,yCAA8B,GAArC,UAAsC,QAAgB,EAAE,KAAkC;QACxF,IAAI,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC;QACrB,IAAI,KAAK,GAAG,IAAI,CAAC,2BAA2B,CAAC,QAAQ,EAAE,KAAK,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC;QAC/F,IAAI,KAAK,CAAC,OAAO,CAAC,YAAY,EAAE;YAC9B,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC;iBAChC,KAAK,EAAE;iBACP,MAAM,CAAC,cAAI;gBACV,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7B,CAAC,CAAC;iBACD,IAAI,CAAC,eAAK;gBACT,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACrB,CAAC,CAAC,CAAC;YACL,IACE,uBAAU,CAAC,sBAAsB,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,aAAa,CAAC;gBAC7E,uBAAU,CAAC,sBAAsB,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,WAAW,CAAC,EAC3E;gBACA,CAAC,CAAC,IAAI,CAAC,qBAAS,CAAC,mBAAmB,EAAE,EAAE,UAAC,KAAa,EAAE,GAAW;oBACjE,IAAI,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;wBAC7D,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;qBACf;gBACH,CAAC,CAAC,CAAC;aACJ;SACF;aAAM,IACL,uBAAU,CAAC,sBAAsB,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,aAAa,CAAC;YAC7E,uBAAU,CAAC,sBAAsB,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,WAAW,CAAC,EAC3E;YACA,CAAC,CAAC,IAAI,CACJ,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,qBAAS,CAAC,mBAAmB,EAAE,CAAC,EAAE,cAAI;gBACrD,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7B,CAAC,CAAC,EACF,eAAK;gBACH,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACrB,CAAC,CACF,CAAC;SACH;aAAM,IAAI,uBAAU,CAAC,sBAAsB,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,EAAE;YACnF,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,eAAK;gBAC1B,IAAI,KAAK,CAAC,IAAI,CAAC,qBAAS,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,EAAE;oBAClD,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC/C;YACH,CAAC,CAAC,CAAC;SACJ;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IAEM,kCAAuB,GAA9B,UAA+B,MAAgB;QAC7C,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,eAAK;YAC1B,OAAO,aAAK,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;QACpC,OAAO,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC1B,CAAC;IAEM,iCAAsB,GAA7B,UACE,mBAA2B,EAC3B,eAAuB,EACvB,eAAuB,EACvB,mBAA2B;QAE3B,oDAAoD;QACpD,sFAAsF;QACtF,uHAAuH;QACvH,OAAO,mBAAmB,GAAG,eAAe,IAAI,mBAAmB,GAAG,mBAAmB,IAAI,mBAAmB,GAAG,eAAe,CAAC;IACrI,CAAC;IAEM,0CAA+B,GAAtC,UAAuC,KAAkC,EAAE,SAAsB;QAC/F,iJAAiJ;QACjJ,IAAI,KAAK,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,MAAM,IAAI,CAAC,EAAE;YAC1C,IAAI,QAAQ,GAAG,QAAE,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC;YAChE,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,iBAAO;gBACtB,QAAE,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAEM,oCAAyB,GAAhC,UAAiC,KAAa,EAAE,KAAa;QAC3D,IAAI,KAAa,CAAC;QAElB,IAAI,uBAAU,CAAC,sBAAsB,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,WAAW,CAAC,EAAE;YACvE,KAAK,GAAG,qBAAS,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;SAC9C;aAAM,IAAI,uBAAU,CAAC,sBAAsB,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,aAAa,CAAC,EAAE;YAChF,KAAK,GAAG,qBAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;SAChD;aAAM,IAAI,UAAU,CAAC,iBAAiB,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE;YACrD,IAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;YAClC,KAAK,GAAG,qBAAS,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;SAC5C;aAAM;YACL,KAAK,GAAG,WAAC,CAAC,KAAK,CAAC,CAAC;SAClB;QACD,OAAO,KAAK,IAAI,SAAS,IAAI,aAAK,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC;IAC7E,CAAC;IAEM,4BAAiB,GAAxB,UAAyB,KAAa,EAAE,KAAa;QACnD,IAAI,CAAC,uBAAU,CAAC,sBAAsB,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,QAAQ,CAAC,EAAE;YACrE,OAAO,KAAK,CAAC;SACd;QAED,IAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAElC,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE;YAChB,OAAO,KAAK,CAAC;SACd;QAED,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,GAAG,EAAE,EAAE;YAC3B,OAAO,KAAK,CAAC;SACd;QAED,OAAO,IAAI,CAAC;IACd,CAAC;IACH,iBAAC;AAAD,CAAC;AAhHY,gCAAU;;;;;;;;ACXvB,yC;;;;;;;ACAA,yC;;;;;;;;;;;;;;;;;;;;ACAA,uDAAgE;AAEhE,8CAA4D;AAE5D;IAA6C,2CAAqB;IAAlE;;IAIA,CAAC;IAHe,4BAAI,GAAlB,UAAmB,IAAiB,EAAE,SAAS,EAAE,OAAoC;QACnF,6CAAqB,CAAC,IAAI,CAAC,uBAAuB,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,2BAAY,CAAC,EAAE,CAAC,CAAC;IACjG,CAAC;IACH,8BAAC;AAAD,CAAC,CAJ4C,6CAAqB,GAIjE;AAJY,0DAAuB;;;;;;;;;;;ACJpC,yBAAuD;AACvD,mCAAqC;AACrC,uCAA0C;AAE1C,yCAAgD;AAEhD,uDAAgF;AAEhF;IAGE,iCAAoB,KAAmB;QAAnB,UAAK,GAAL,KAAK,CAAc;QACrC,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAEO,wCAAM,GAAd;QACE,IAAI,CAAC,OAAO,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,sDAAsD,EAAE,CAAC,CAAC,EAAE,CAAC;QACnG,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAE5B,IAAM,iBAAiB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,iBAAiB,CAAC;QAC9D,IAAM,qBAAqB,GAAG,iBAAiB,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC;QACxG,IAAM,oBAAoB,GAAG,iBAAiB,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC;QAEpG,IAAI,CAAC,+BAA+B,CAAC,qBAAqB,CAAC,CAAC;QAE5D,IAAI,oBAAoB,CAAC,MAAM,EAAE;YAC/B,IAAI,CAAC,mCAAmC,CAAC,oBAAoB,CAAC,CAAC;SAChE;IACH,CAAC;IAEO,sDAAoB,GAA5B;QACE,IAAM,YAAY,GAAG,QAAE,CAAC,IAAI,EAAE,EAAE,SAAS,EAAE,sCAAsC,EAAE,EAAK,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,MAAG,CAAC,CAAC,EAAE,CAAC;QACxH,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;IACzC,CAAC;IAEO,iEAA+B,GAAvC,UAAwC,WAAgC;QAAxE,iBAEC;QADC,WAAW,CAAC,OAAO,CAAC,oBAAU,IAAI,YAAI,CAAC,8BAA8B,CAAC,UAAU,CAAC,EAA/C,CAA+C,CAAC,CAAC;IACrF,CAAC;IAEO,gEAA8B,GAAtC,UAAuC,UAA6B;QAApE,iBAeC;QAdC,IAAM,YAAY,GAAG,QAAE,CACrB,QAAQ,EACR;YACE,SAAS,EAAE,sCAAsC;YACjD,SAAS,EAAE,WAAC,CAAC,gBAAgB,EAAE,UAAU,CAAC,YAAY,CAAC;SACxD,EACD,UAAU,CAAC,YAAY,CACxB,CAAC,EAAE,CAAC;QACL,IAAM,YAAY,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,4CAA4C,EAAE,EAAE,mBAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC;QAC1H,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;QAEvC,QAAE,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,cAAM,YAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,EAAlC,CAAkC,CAAC,CAAC;QAEvE,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;IACzC,CAAC;IAEO,mDAAiB,GAAzB,UAA0B,UAA6B;QAAvD,iBAGC;QAFC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAC3C,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,cAAM,YAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,EAArC,CAAqC,CAAC,CAAC;IAC1E,CAAC;IAEO,sDAAoB,GAA5B,UAA6B,UAA6B;QACxD,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,kDAAwB,CAAC,sBAAsB,EAAE,UAAU,CAAC,aAAa,CAAC,CAAC;IAC1G,CAAC;IAEO,qEAAmC,GAA3C,UAA4C,WAAgC;QAA5E,iBAkBC;QAjBC,IAAM,KAAK,GAAG,WAAC,CAAC,OAAO,EAAE,KAAG,WAAW,CAAC,MAAQ,CAAC,CAAC;QAClD,IAAM,KAAK,GAAG,WAAW,CAAC,GAAG,CAAC,UAAC,EAAS;gBAAP,gBAAK;YAAO,YAAK;QAAL,CAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/D,IAAM,gBAAgB,GAAG,QAAE,CACzB,QAAQ,EACR;YACE,SAAS,EAAE,yCAAyC;YACpD,KAAK;SACN,EACD,KAAK,CACN,CAAC,EAAE,CAAC;QAEL,QAAE,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE;YAC/B,QAAE,CAAC,gBAAgB,CAAC,CAAC,MAAM,EAAE,CAAC;YAC9B,KAAI,CAAC,+BAA+B,CAAC,WAAW,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;IAC7C,CAAC;IACH,8BAAC;AAAD,CAAC;AA5EY,0DAAuB;;;;;;;;ACRpC,yC;;;;;;;;;;ACAA,yBAAkD;AAClD,mCAA6C;AAC7C,uCAA6C;AAC7C,yCAAmD;AACnD,uCAA+C;AAE/C,0DAAsE;AACtE,kEAAsF;AACtF,uDAAmF;AAEnF;IASE,4BAAoB,KAAmB;QAAnB,UAAK,GAAL,KAAK,CAAc;QACrC,IAAI,CAAC,OAAO,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,4BAA4B,EAAE,CAAC,CAAC,EAAE,CAAC;QACzE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAChC,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QACvC,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC;QACpD,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAClD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;IAC7D,CAAC;IAEO,8CAAiB,GAAzB;QAAA,iBASC;QARC,IAAI,CAAC,WAAW,GAAG,IAAI,mDAAwB,CAAC;YAC9C,KAAK,EAAE,WAAC,CAAC,OAAO,CAAC;YACjB,SAAS,EAAE,kCAAkC;YAC7C,aAAa,EAAE,KAAK;YACpB,MAAM,EAAE,cAAM,YAAI,CAAC,KAAK,EAAE,EAAZ,CAAY;SAC3B,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC;IAClC,CAAC;IAEO,kCAAK,GAAb;QAAA,iBAIC;QAHC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACnB,IAAI,CAAC,KAAK,CAAC,0BAA0B,EAAE,CAAC;QACxC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,cAAM,YAAI,CAAC,sBAAsB,EAAE,EAA7B,CAA6B,CAAC,CAAC;IAClE,CAAC;IAEO,mDAAsB,GAA9B;QACE,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,kDAAwB,CAAC,oBAAoB,EAAE,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;IACnH,CAAC;IAEO,iDAAoB,GAA5B;QACE,IAAI,CAAC,cAAc,GAAG,IAAI,mEAAgC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACvE,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC;IACrC,CAAC;IAEO,2CAAc,GAAtB;QAAA,iBAIC;QAHC,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC,CAAC;QACrD,QAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;QAC3C,QAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,cAAM,YAAI,CAAC,KAAK,CAAC,cAAc,EAAE,EAA3B,CAA2B,CAAC,CAAC;IAChE,CAAC;IAEM,2CAAc,GAArB,UAAsB,WAAoB;QACxC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;IACtF,CAAC;IAEO,wCAAW,GAAnB;QACE,OAAO,QAAE,CACP,IAAI,EACJ;YACE,SAAS,EAAE,kCAAkC;YAC7C,SAAS,EAAE,KAAG,WAAC,CAAC,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAG;SAC1D,EACD,QAAE,CAAC,MAAM,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAC5F,CAAC;IACJ,CAAC;IAEO,gDAAmB,GAA3B;QACE,IAAI,CAAC,aAAa,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,2CAA2C,EAAE,EAAE,mBAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACnH,eAAM,CAAC,wBAAwB,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,EAAE,+CAA+C,CAAC,CAAC;QACxG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAEjC,OAAO,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC;IAC/B,CAAC;IAEM,wCAAW,GAAlB,UAAmB,OAAgB;QACjC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IACnC,CAAC;IAEM,wCAAW,GAAlB;QAAA,iBAGC;QAFC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACtC,IAAI,CAAC,kBAAkB,GAAG,MAAM,CAAC,UAAU,CAAC,cAAM,YAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,EAA/B,CAA+B,EAAE,kBAAkB,CAAC,gBAAgB,CAAC,CAAC;IAC1H,CAAC;IAEM,wCAAW,GAAlB;QACE,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACtC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACnC,CAAC;IApFa,mCAAgB,GAAG,IAAI,CAAC;IAqFxC,yBAAC;CAAA;AAtFY,gDAAkB;;;;;;;;ACV/B,yC;;;;;;;;;;ACAA,uCAA6C;AAC7C,yCAAmD;AACnD,mCAAwC;AACxC,0DAAsE;AAOtE;IAKE,0CAAoB,KAAmB;QAAnB,UAAK,GAAL,KAAK,CAAc;QACrC,IAAI,CAAC,MAAM,EAAE,CAAC;IAChB,CAAC;IAEO,iDAAM,GAAd;QAAA,iBAwBC;QAvBC,IAAM,MAAM,GAAG,QAAE,CAAC,KAAK,CAAC,CAAC;QAEzB,IAAI,CAAC,cAAc,GAAG,IAAI,mDAAwB,CAAC;YACjD,KAAK,EAAE,WAAC,CAAC,UAAU,CAAC;YACpB,OAAO,EAAE,mBAAQ,CAAC,KAAK,CAAC,OAAO;YAC/B,aAAa,EAAE,yCAAyC;YACxD,SAAS,EAAE,qCAAqC;YAChD,aAAa,EAAE,IAAI;YACnB,MAAM,EAAE,cAAM,YAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAArB,CAAqB;SACpC,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,GAAG,IAAI,mDAAwB,CAAC;YAC/C,KAAK,EAAE,WAAC,CAAC,QAAQ,CAAC;YAClB,OAAO,EAAE,mBAAQ,CAAC,KAAK,CAAC,SAAS;YACjC,aAAa,EAAE,yCAAyC;YACxD,SAAS,EAAE,mCAAmC;YAC9C,aAAa,EAAE,KAAK;YACpB,MAAM,EAAE,cAAM,YAAI,CAAC,KAAK,CAAC,MAAM,EAAE,EAAnB,CAAmB;SAClC,CAAC,CAAC;QAEH,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAC3C,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QAEzC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,EAAE,CAAC;IAC3B,CAAC;IAEM,wDAAa,GAApB,UAAqB,WAAoB;QACvC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,CAAC;QACzC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;IACxC,CAAC;IACH,uCAAC;AAAD,CAAC;AAvCY,4EAAgC;;;;;;;;;;;ACV7C,yBAAkD;AAClD,mCAAwC;AACxC,0CAA6C;AAC7C,mDAAwD;AAGxD,iDAAsE;AACtE,uCAA6C;AAE7C;IAKE,4BAAoB,KAAmB;QAAnB,UAAK,GAAL,KAAK,CAAc;QAH/B,SAAI,GAAG,QAAE,CAAC,IAAI,EAAE,EAAE,SAAS,EAAE,4BAA4B,EAAE,CAAC,CAAC,EAAE,CAAC;QAItE,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAEM,+CAAkB,GAAzB,UAA0B,QAAwB;QAAlD,iBAcC;QAbC,IAAI,CAAC,mBAAmB,GAAG,QAAQ,CAAC,mBAAmB,CAAC;QACxD,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG,CACpC,UAAC,UAAU,EAAE,KAAK;YAChB,WAAI,qCAAiB,CACnB;gBACE,KAAK,EAAE,UAAU,CAAC,KAAK;gBACvB,eAAe,EAAE,UAAU,CAAC,eAAe;gBAC3C,KAAK,EAAE,UAAU,CAAC,KAAK;gBACvB,QAAQ,EAAE,KAAK,GAAG,CAAC;aACpB,EACD,KAAI,CAAC,KAAK,CACX;QARD,CAQC,CACJ,CAAC;IACJ,CAAC;IAEM,wCAAW,GAAlB;QACE,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IACxB,CAAC;IAED,sBAAW,8CAAc;aAAzB;YACE,OAAO,IAAI,CAAC,WAAW,CAAC;QAC1B,CAAC;;;OAAA;IAED,sBAAW,yCAAS;aAApB;YACE,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,oBAAU,IAAI,iBAAU,CAAC,KAAK,EAAhB,CAAgB,CAAC,CAAC;QAC9D,CAAC;;;OAAA;IAED,sBAAW,8CAAc;aAAzB;YACE,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,eAAK,IAAI,YAAK,CAAC,UAAU,EAAhB,CAAgB,CAAC,CAAC,GAAG,CAAC,UAAC,EAAS;oBAAP,gBAAK;gBAAO,YAAK;YAAL,CAAK,CAAC,CAAC;QACtF,CAAC;;;OAAA;IAED,sBAAW,iDAAiB;aAA5B;YACE,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,eAAK,IAAI,QAAC,KAAK,CAAC,MAAM,EAAb,CAAa,CAAC,CAAC;QACzD,CAAC;;;OAAA;IAED,sBAAW,iDAAiB;aAA5B;YACE,OAAO,CAAC,CAAC,sBAAS,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,iCAAe,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC5E,CAAC;;;OAAA;IAED,sBAAW,+CAAe;aAA1B;YACE,OAAO,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;QACzC,CAAC;;;OAAA;IAED,sBAAW,6CAAa;aAAxB;YACE,OAAO,CAAC,CAAC,sBAAS,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,iCAAe,CAAC,IAAI,EAAE,CAAC,CAAC;QACxE,CAAC;;;OAAA;IAEM,qCAAQ,GAAf;QACE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,eAAK,IAAI,YAAK,CAAC,QAAQ,EAAE,EAAhB,CAAgB,CAAC,CAAC;IACtD,CAAC;IAED,sBAAW,uCAAO;aAAlB;YACE,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QAClC,CAAC;;;OAAA;IAEM,6CAAgB,GAAvB,UAAwB,GAA+B;QACrD,IAAM,KAAK,GAAG,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC;QACxD,IAAM,UAAU,GAAG,iBAAI,CAAC,IAAI,CAAC,WAAW,EAAE,oBAAU,IAAI,iBAAU,CAAC,MAAM,CAAC,KAAK,CAAC,EAAxB,CAAwB,CAAC,CAAC;QAClF,OAAO,UAAU,IAAI,UAAU,CAAC,UAAU,CAAC;IAC7C,CAAC;IAEM,gCAAG,GAAV,UAAW,GAA+B;QACxC,IAAM,KAAK,GAAG,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC;QACxD,IAAM,UAAU,GAAG,iBAAI,CAAC,IAAI,CAAC,WAAW,EAAE,oBAAU,IAAI,iBAAU,CAAC,MAAM,CAAC,KAAK,CAAC,EAAxB,CAAwB,CAAC,CAAC;QAElF,IAAI,UAAU,EAAE;YACd,OAAO,UAAU,CAAC;SACnB;QAED,IAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC;QAC7C,IAAM,KAAK,GAAG,iCAAe,CAAC,IAAI,CAAC;QACnC,IAAM,aAAa,GAAG,IAAI,qCAAiB,CAAC,EAAE,KAAK,SAAE,KAAK,SAAE,eAAe,EAAE,CAAC,EAAE,QAAQ,YAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QACxG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACrC,OAAO,aAAa,CAAC;IACvB,CAAC;IAEO,0CAAa,GAArB;QAAA,iBAQC;QAPC,IAAM,WAAW,GAAG,QAAE,CAAC,QAAQ,EAAE,EAAE,SAAS,EAAE,+BAA+B,EAAE,EAAE,WAAC,CAAC,UAAU,CAAC,CAAC,CAAC;QAChG,IAAM,QAAQ,GAAG,QAAE,CAAC,IAAI,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;QAC7C,WAAW,CAAC,EAAE,CAAC,OAAO,EAAE;YACtB,KAAI,CAAC,KAAK,CAAC,0BAA0B,EAAE,CAAC;YACxC,KAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC;QACH,OAAO,QAAQ,CAAC,EAAE,CAAC;IACrB,CAAC;IAEO,0CAAa,GAArB;QAAA,iBAQC;QAPC,IAAM,WAAW,GAAG,QAAE,CAAC,QAAQ,EAAE,EAAE,SAAS,EAAE,+BAA+B,EAAE,EAAE,WAAC,CAAC,UAAU,CAAC,CAAC,CAAC;QAChG,IAAM,QAAQ,GAAG,QAAE,CAAC,IAAI,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;QAC7C,WAAW,CAAC,EAAE,CAAC,OAAO,EAAE;YACtB,KAAI,CAAC,KAAK,CAAC,0BAA0B,EAAE,CAAC;YACxC,KAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC;QACH,OAAO,QAAQ,CAAC,EAAE,CAAC;IACrB,CAAC;IAED,sBAAY,oDAAoB;aAAhC;YACE,IAAM,wBAAwB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC;YAE7F,OAAO,wBAAwB,IAAI,IAAI,CAAC,aAAa,CAAC;QACxD,CAAC;;;OAAA;IAEM,mCAAM,GAAb;QACE,IAAM,QAAQ,GAAG,QAAQ,CAAC,sBAAsB,EAAE,CAAC;QACnD,QAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,CAAC;QAEtB,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,oBAAU;YACjC,QAAQ,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,IAAI,IAAI,CAAC,oBAAoB,EAAE;YAC7B,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;SAC5C;QAED,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5B,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;SAC5C;QAED,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAChC,OAAO,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;IACH,yBAAC;AAAD,CAAC;AApIY,gDAAkB;;;;;;;;ACT/B,yC;;;;;;;;;;;;;;;;;;ACAA,wCAAuC;AACvC,2DAAwE;AACxE,2CAAoD;AAEpD,iDAAsE;AAUtE;IAOE,2BAAY,EAA+D,EAAU,KAAmB;YAA1F,gBAAK,EAAE,gBAAK,EAAE,oCAAe,EAAE,sBAAQ;QAAgC,UAAK,GAAL,KAAK,CAAc;QACtG,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;QACvC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,IAAI,qDAAyB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;IAC7D,CAAC;IAED,sBAAW,yCAAU;aAArB;YACE,OAAO,IAAI,CAAC,KAAK,KAAK,iCAAe,CAAC,QAAQ,CAAC;QACjD,CAAC;;;OAAA;IAED,sBAAW,qCAAM;aAAjB;YACE,OAAO,IAAI,CAAC,KAAK,KAAK,iCAAe,CAAC,IAAI,CAAC;QAC7C,CAAC;;;OAAA;IAEM,wCAAY,GAAnB;QACE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,KAAK,iCAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,iCAAe,CAAC,IAAI,CAAC,CAAC,CAAC,iCAAe,CAAC,QAAQ,CAAC;IACzG,CAAC;IAEM,kCAAM,GAAb;QACE,IAAI,CAAC,KAAK,GAAG,iCAAe,CAAC,QAAQ,CAAC;IACxC,CAAC;IAEM,oCAAQ,GAAf;QACE,IAAI,CAAC,KAAK,GAAG,iCAAe,CAAC,IAAI,CAAC;IACpC,CAAC;IAEM,kCAAM,GAAb,UAAc,GAA+B;QAC3C,IAAM,KAAK,GAAG,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC;QACxD,OAAO,KAAK,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;IAC1D,CAAC;IAED,sBAAW,6CAAc;aAAzB;YACE,OAAO,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACtD,CAAC;;;OAAA;IAED,sBAAW,2CAAY;aAAvB;YACE,IAAI,WAAW,GAAG,uBAAU,CAAC,yBAAyB,CAAS,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YAErG,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,KAAK,QAAQ,EAAE;gBAC1F,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,WAAW,CAAC;aAC1E;YAED,OAAO,WAAW,CAAC;QACrB,CAAC;;;OAAA;IAED,sBAAW,4CAAa;aAAxB;YACE,oBACK,IAAI,CAAC,KAAK,CAAC,wBAAwB,IACtC,KAAK,EAAE,IAAI,CAAC,KAAK,EACjB,aAAa,EAAE,IAAI,CAAC,QAAQ,EAC5B,YAAY,EAAE,IAAI,CAAC,YAAY,EAC/B,KAAK,EAAE,IAAI,CAAC,KAAK,IACjB;QACJ,CAAC;;;OAAA;IAEM,kCAAM,GAAb;QACE,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;IAChC,CAAC;IACH,wBAAC;AAAD,CAAC;AAnEY,8CAAiB;;;;;;;;;;;ACd9B,mCAA6C;AAG7C,yCAAsD;AACtD,uCAA6C;AAC7C,uDAAmF;AACnF,iDAAsE;AAEtE;IAIE,mCAAoB,UAA6B,EAAU,KAAmB;QAA9E,iBAAkF;QAA9D,eAAU,GAAV,UAAU,CAAmB;QAAU,UAAK,GAAL,KAAK,CAAc;QAgDtE,iBAAY,GAAG;YACrB,KAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC;YAC9B,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YACpD,KAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,KAAI,CAAC,KAAK,CAAC,6BAA6B,EAAE,CAAC;YAC3C,KAAI,CAAC,KAAK,CAAC,0BAA0B,EAAE,CAAC;YACxC,KAAI,CAAC,KAAK,CAAC,eAAe,CAAC,cAAM,YAAI,CAAC,oBAAoB,EAAE,EAA3B,CAA2B,CAAC,CAAC;QAChE,CAAC,CAAC;IAvD+E,CAAC;IAE3E,0CAAM,GAAb;QACE,IAAI,CAAC,GAAG,GAAG,QAAE,CAAC,IAAI,EAAE;YAClB,SAAS,EAAE,0DAA0D;YACrE,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK;SACjC,CAAC,CAAC;QAEH,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC;QAE5C,IAAI,CAAC,6BAA6B,EAAE,CAAC;QAErC,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAE3B,OAAO,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;IACrB,CAAC;IAEO,uDAAmB,GAA3B;QACE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,EAAE,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;IACrE,CAAC;IAEO,kDAAc,GAAtB;QAAA,iBAkBC;QAjBC,IAAI,CAAC,QAAQ,GAAG,IAAI,mBAAQ,CAC1B,cAAM,YAAI,CAAC,YAAY,EAAE,EAAnB,CAAmB,EACzB,IAAI,CAAC,UAAU,CAAC,YAAY,EAC5B,IAAI,CAAC,SAAS,EACd,MAAI,IAAI,CAAC,UAAU,CAAC,cAAc,MAAG,CACtC,CAAC;QAEF,IAAM,KAAK,GAAG,QAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;QAChF,IAAM,WAAW,GAAG,QAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC;QAE7F,IAAI,KAAK,IAAI,WAAW,EAAE;YACxB,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;YAC1D,KAAK,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;YAC1C,WAAW,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;SACjD;QAED,IAAI,CAAC,UAAU,CAAC,UAAU,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC5D,CAAC;IAEO,iEAA6B,GAArC;QAAA,iBAIC;QAHC,IAAM,cAAc,GAAG,QAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrE,QAAE,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,SAAS,EAAE,cAAM,YAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAlC,CAAkC,CAAC,CAAC;QAC3E,QAAE,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE,cAAM,YAAI,CAAC,GAAG,CAAC,WAAW,CAAC,eAAe,CAAC,EAArC,CAAqC,CAAC,CAAC;IACjF,CAAC;IAWO,wDAAoB,GAA5B;QACE,IAAM,MAAM,GACV,IAAI,CAAC,UAAU,CAAC,KAAK,KAAK,iCAAe,CAAC,QAAQ;YAChD,CAAC,CAAC,kDAAwB,CAAC,kBAAkB;YAC7C,CAAC,CAAC,kDAAwB,CAAC,oBAAoB,CAAC;QAEpD,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC;IACtE,CAAC;IAED,sBAAY,gDAAS;aAArB;YACE,IAAM,gBAAgB,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,8BAA8B,CAAC;YACrH,IAAM,WAAW,GAAG,WAAC,CAAC,aAAa,EAAE,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;YAErE,OAAO,KAAG,WAAC,CAAC,gBAAgB,EAAE,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,WAAW,CAAG,CAAC;QAC7E,CAAC;;;OAAA;IACH,gCAAC;AAAD,CAAC;AA5EY,8DAAyB;;;;;;;;;;;ACNtC,sCAAwC;AAGxC,4CAAoD;AAEpD;IAKE,qCAAoB,KAAmB;QAAnB,UAAK,GAAL,KAAK,CAAc;QAH/B,wBAAmB,GAAG,KAAK,CAAC;QAC5B,qBAAgB,GAAG,KAAK,CAAC;QAG/B,IAAI,CAAC,4BAA4B,EAAE,CAAC;QACpC,IAAI,CAAC,mCAAmC,EAAE,CAAC;IAC7C,CAAC;IAEO,yEAAmC,GAA3C;QAAA,iBAKC;QAJC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,WAAW,EAAE;YACrD,KAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;YACjC,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAChC,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,qEAA+B,GAAtC,UAAuC,wBAAgC;QACrE,IAAI,CAAC,uBAAuB,IAAI,wBAAwB,CAAC;IAC3D,CAAC;IAEM,kEAA4B,GAAnC;QACE,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC;IACnE,CAAC;IAEM,mEAA6B,GAApC;QACE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;IAClC,CAAC;IAEM,gEAA0B,GAAjC;QACE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IAC/B,CAAC;IAED;;;OAGG;IACI,8DAAwB,GAA/B,UAAgC,YAA0B;QACxD,eAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAE5B,IAAM,YAAY,GAAkB;YAClC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;YAC9B,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS;YAC3B,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAiC;YAClE,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,mBAAmB,EAAE,IAAI,CAAC,mBAAmB;YAC7C,eAAe,EAAE,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc;SAClF,CAAC;QAEF,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC9C,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,YAAY,CAAC,YAAY,CAAC,gBAAgB,GAAG,IAAI,CAAC;SACnD;IACH,CAAC;IAED,sBAAY,sDAAa;aAAzB;YACE,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,UAAC,EAAgB;oBAAd,gBAAK,EAAE,gBAAK;gBAAO,QAAC;oBACjE,KAAK;oBACL,KAAK;iBACN,CAAC;YAHgE,CAGhE,CAAC,CAAC;QACN,CAAC;;;OAAA;IAED,sBAAY,uDAAc;aAA1B;YACE,IAAI,IAAI,CAAC,mBAAmB,EAAE;gBAC5B,OAAO,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;aAClC;YAED,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;QAC5F,CAAC;;;OAAA;IACH,kCAAC;AAAD,CAAC;AAtEY,kEAA2B;;;;;;;;;;;ACPxC;;;GAGG;AACH,IAAY,iBAgBX;AAhBD,WAAY,iBAAiB;IAC3B;;;;;;;;OAQG;IACH,oCAAe;IACf;;OAEG;IACH,kDAA6B;IAC7B,gDAA2B;AAC7B,CAAC,EAhBW,iBAAiB,GAAjB,yBAAiB,KAAjB,yBAAiB,QAgB5B;AAED,6BAAoC,YAAoB;IACtD,OAAO,CAAC,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;AAC3C,CAAC;AAFD,kDAEC;;;;;;;;;;;ACxBD,qCAA0C;AAC1C,mCAA0C;AAE1C;IAME,sBAAoB,OAAoB,EAAU,gBAA6B;QAA3D,YAAO,GAAP,OAAO,CAAa;QAAU,qBAAgB,GAAhB,gBAAgB,CAAa;QAHvE,kBAAa,GAAG,gBAAgB,CAAC;QACjC,mBAAc,GAAG,sBAAsB,CAAC;QAG9C,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,sBAAY,kCAAQ;aAApB;YACE,OAAO,aAAK,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC9C,CAAC;;;OAAA;IAEO,oCAAa,GAArB;QAAA,iBAOC;QANC,QAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,YAAY,EAAE,cAAM,YAAI,CAAC,KAAK,EAAE,EAAZ,CAAY,CAAC,CAAC;QAE/D,IAAI,CAAC,eAAe,GAAG,QAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,MAAI,IAAI,CAAC,aAAe,CAAC,CAAC;QAChF,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YACzB,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;IACH,CAAC;IAEO,qCAAc,GAAtB;QACE,IAAI,CAAC,eAAe,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC;QACvE,QAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,YAAY,CAAc,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;IACvF,CAAC;IAED,sBAAY,0CAAgB;aAA5B;YACE,OAAO,IAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAC,GAAG,CAAC;QAClD,CAAC;;;OAAA;IAEM,0BAAG,GAAV;QACE,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,gBAAgB,CAAC;IACjD,CAAC;IAEO,wCAAiB,GAAzB,UAA0B,MAAc;QACtC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,GAAM,MAAM,OAAI,CAAC;IACpD,CAAC;IAEO,4BAAK,GAAb;QACE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,QAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YACvD,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;SAC3B;QAED,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAChC,CAAC;IAED,sBAAY,yCAAe;aAA3B;YACE,OAAO,IAAI,SAAG,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;QACnC,CAAC;;;OAAA;IAED,sBAAY,gCAAM;aAAlB;YACE,OAAO,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC;QACxD,CAAC;;;OAAA;IAEM,mDAA4B,GAAnC;QACE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,OAAO;SACR;QAED,QAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC1D,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;QAE1B,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;QAEvD,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YACnB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;SAC1C;QAED,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAChC,CAAC;IACH,mBAAC;AAAD,CAAC;AAzEY,oCAAY;;;;;;;;;;;ACHzB,gDAA4D;AAE5D;;GAEG;AACU,8BAAsB,GAAG;IACpC;;;;;;;;;;;;OAYG;IACH,oBAAoB,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC;IAC/G,oBAAoB,EAAE,mCAAgB,CAAC,iBAAiB,CAAC;QACvD,UAAU,EACR,kMAAkM;KACrM,CAAC;IACF;;;;;;;;;OASG;IACH,mBAAmB,EAAE,mCAAgB,CAAC,0BAA0B,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC;CACnG,CAAC","file":"Badge__be8bf400bc2c9618a18b.js","sourcesContent":["import { Dom } from '../../utils/Dom';\nimport { ResponsiveDropdownContent } from './ResponsiveDropdown/ResponsiveDropdownContent';\n\nexport class ResponsiveComponentsUtils {\n  private static smallTabsClassName: string = 'coveo-small-tabs';\n  private static smallFacetClassName: string = 'coveo-small-facets';\n  private static smallRecommendationClassName: string = 'coveo-small-recommendation';\n\n  static shouldDrawFacetSlider(root: Dom, facetSliderElement: Dom): boolean {\n    return ResponsiveDropdownContent.isTargetInsideOpenedDropdown(facetSliderElement) || !this.isSmallFacetActivated(root);\n  }\n\n  static isSmallTabsActivated(root: Dom): boolean {\n    return root.hasClass(this.smallTabsClassName);\n  }\n\n  static isSmallFacetActivated(root: Dom): boolean {\n    return root.hasClass(this.smallFacetClassName);\n  }\n\n  static isSmallRecommendationActivated(root: Dom): boolean {\n    return root.hasClass(this.smallRecommendationClassName);\n  }\n\n  static activateSmallTabs(root: Dom): void {\n    root.addClass(this.smallTabsClassName);\n  }\n\n  static deactivateSmallTabs(root: Dom): void {\n    root.removeClass(this.smallTabsClassName);\n  }\n\n  static activateSmallFacet(root: Dom): void {\n    root.addClass(this.smallFacetClassName);\n  }\n\n  static deactivateSmallFacet(root: Dom): void {\n    root.removeClass(this.smallFacetClassName);\n  }\n\n  static activateSmallRecommendation(root: Dom): void {\n    root.addClass(this.smallRecommendationClassName);\n  }\n\n  static deactivateSmallRecommendation(root: Dom): void {\n    root.removeClass(this.smallRecommendationClassName);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveComponentsUtils.ts","import 'styling/DynamicFacet/_DynamicFacet';\nimport { difference, findIndex } from 'underscore';\nimport { $$ } from '../../utils/Dom';\nimport { exportGlobally } from '../../GlobalExports';\nimport { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions, IFieldOption } from '../Base/ComponentOptions';\nimport { Initialization } from '../Base/Initialization';\nimport { ResponsiveFacetOptions } from '../ResponsiveComponents/ResponsiveFacetOptions';\nimport { ResponsiveDynamicFacets } from '../ResponsiveComponents/ResponsiveDynamicFacets';\nimport { DynamicFacetBreadcrumbs } from './DynamicFacetBreadcrumbs';\nimport { DynamicFacetHeader } from './DynamicFacetHeader/DynamicFacetHeader';\nimport { DynamicFacetValues } from './DynamicFacetValues/DynamicFacetValues';\nimport { QueryEvents, IQuerySuccessEventArgs, IDoneBuildingQueryEventArgs } from '../../events/QueryEvents';\nimport { QueryStateModel } from '../../models/QueryStateModel';\nimport { DynamicFacetQueryController } from '../../controllers/DynamicFacetQueryController';\nimport { Utils } from '../../utils/Utils';\nimport { MODEL_EVENTS, IAttributesChangedEventArg } from '../../models/Model';\nimport { Assert } from '../../misc/Assert';\nimport { IFacetResponse } from '../../rest/Facet/FacetResponse';\nimport { IResponsiveComponentOptions } from '../ResponsiveComponents/ResponsiveComponentsManager';\nimport { IStringMap } from '../../rest/GenericParam';\nimport { isFacetSortCriteria } from '../../rest/Facet/FacetSortCriteria';\nimport { l } from '../../strings/Strings';\nimport { DeviceUtils } from '../../utils/DeviceUtils';\nimport { BreadcrumbEvents, IPopulateBreadcrumbEventArgs } from '../../events/BreadcrumbEvents';\nimport {\n  IAnalyticsActionCause,\n  IAnalyticsDynamicFacetMeta,\n  analyticsActionCauseList,\n  IAnalyticsFacetMeta,\n  AnalyticsDynamicFacetType\n} from '../Analytics/AnalyticsActionListMeta';\nimport { IQueryOptions } from '../../controllers/QueryController';\nimport { DynamicFacetManager } from '../DynamicFacetManager/DynamicFacetManager';\nimport { FacetPadding } from '../FacetPadding/FacetPadding';\nimport { QueryBuilder } from '../Base/QueryBuilder';\nimport { IAutoLayoutAdjustableInsideFacetColumn } from '../SearchInterface/FacetColumnAutoLayoutAdjustment';\n\nexport interface IDynamicFacetOptions extends IResponsiveComponentOptions {\n  id?: string;\n  title?: string;\n  field?: IFieldOption;\n  sortCriteria?: string;\n  numberOfValues?: number;\n  enableCollapse?: boolean;\n  collapsedByDefault?: boolean;\n  includeInBreadcrumb?: boolean;\n  numberOfValuesInBreadcrumb?: number;\n  valueCaption?: any;\n  preservePosition?: boolean;\n}\n\n/**\n * The `DynamicFacet` component displays a *facet* of the results for the current query. A facet is a list of values for a\n * certain field occurring in the results, ordered using a configurable criteria (e.g., number of occurrences).\n *\n * The list of values is obtained using an array of [`FacetRequest`]{@link IFacetRequest} operations performed at the same time\n * as the main query.\n *\n * The `DynamicFacet` component allows the end-user to drill down inside a result set by restricting the result to certain\n * field values.\n *\n * This facet is more easy to use than the original [`Facet`]{@link Facet} component. It implements additional Coveo Machine Learning (Coveo ML) features\n * such as dynamic navigation experience (DNE).\n */\nexport class DynamicFacet extends Component implements IAutoLayoutAdjustableInsideFacetColumn {\n  static ID = 'DynamicFacet';\n  static doExport = () => exportGlobally({ DynamicFacet });\n\n  /**\n   * The options for the DynamicFacet\n   * @componentOptions\n   */\n  static options: IDynamicFacetOptions = {\n    ...ResponsiveFacetOptions,\n\n    /**\n     * The unique identifier for this facet.\n     *\n     * Among other things, this is used to record and read the facet\n     * state in the URL fragment identifier (see the\n     * [`enableHistory`]{@link SearchInterface.options.enableHistory} `SearchInterface`\n     * option).\n     *\n     * **Tip:** When several facets in a given search interface are based on\n     * the same field, ensure that each of those facets has a distinct `id`.\n     *\n     * If specified, must contain between 1 and 60 characters.\n     * Only alphanumeric (A-Za-z0-9), underscore (_), and hyphen (-) characters are kept; other characters are automatically removed.\n     *\n     * **Default:** The [`field`]{@link DynamicFacet.options.field} option value.\n     */\n    id: ComponentOptions.buildStringOption({\n      postProcessing: (value = '', options: IDynamicFacetOptions) => {\n        const maxCharLength = 60;\n        const sanitizedValue = value.replace(/[^A-Za-z0-9-_@]+/g, '');\n        if (Utils.isNonEmptyString(sanitizedValue)) {\n          return sanitizedValue.slice(0, maxCharLength - 1);\n        }\n\n        return options.field.slice(0, maxCharLength - 1);\n      }\n    }),\n\n    /**\n     * The title to display for this facet.\n     *\n     * **Default:** The localized string for `NoTitle`.\n     */\n    title: ComponentOptions.buildLocalizedStringOption({\n      defaultValue: l('NoTitle'),\n      section: 'CommonOptions',\n      priority: 10\n    }),\n\n    /**\n     * The name of the field on which to base this facet.\n     *\n     * Must be prefixed by `@`, and must reference an existing field whose\n     * **Facet** option is enabled (see\n     * [Add or Edit Fields](https://docs.coveo.com/en/1982/)).\n     *\n     * **Required:** Specifying a value for this option is required for the\n     * component to work.\n     */\n    field: ComponentOptions.buildFieldOption({ required: true, section: 'CommonOptions' }),\n\n    /**\n     * The sort criterion to use for this facet.\n     *\n     * See [`FacetSortCriteria`]{@link FacetSortCriteria} for the list and\n     * description of allowed values.\n     *\n     * **Default:** `undefined`, and the following behavior applies:\n     * - If the requested [`numberOfValues`]{@link DynamicFacet.options.numberOfValues}\n     * is greater than or equal to the currently displayed number of values,\n     * the [`alphanumeric`]{@link FacetSortCriteria.alphanumeric} criterion is\n     * used.\n     * - If the requested `numberOfValues` is less than the currently displayed\n     * number of values and the facet is not currently expanded, the [`score`]{@link FacetSortCriteria.score}\n     * criterion is used.\n     * - Otherwise, the `alphanumeric` criterion is used.\n     */\n    sortCriteria: ComponentOptions.buildStringOption({\n      postProcessing: value => (isFacetSortCriteria(value) ? value : undefined),\n      section: 'Sorting'\n    }),\n\n    /**\n     * The number of values to request for this facet.\n     *\n     * Also determines the default maximum number of additional values to request each time this facet is expanded,\n     * and the maximum number of values to display when this facet is collapsed (see [enableCollapse]{@link DynamicFacet.options.enableCollapse}).\n     *\n     * **Default:** `8`\n     */\n    numberOfValues: ComponentOptions.buildNumberOption({ min: 0, defaultValue: 8, section: 'CommonOptions' }),\n\n    /**\n     * Whether to allow the end-user to expand and collapse this facet.\n     *\n     * **Default:** `false`\n     */\n    enableCollapse: ComponentOptions.buildBooleanOption({ defaultValue: false, section: 'Filtering' }),\n\n    /**\n     * Whether this facet should be collapsed by default.\n     *\n     * See also the [`enableCollapse`]{@link DynamicFacet.options.enableCollapse}\n     * option.\n     *\n     * **Default:** `false`\n     */\n    collapsedByDefault: ComponentOptions.buildBooleanOption({ defaultValue: false, section: 'Filtering' }),\n\n    /**\n     * Whether to notify the [Breadcrumb]{@link Breadcrumb} component when toggling values in the facet.\n     *\n     * See also the [numberOfValuesInBreadcrumb]{@link DynamicFacet.options.numberOfValuesInBreadcrumb} option.\n     *\n     * **Default:** `true`\n     */\n    includeInBreadcrumb: ComponentOptions.buildBooleanOption({ defaultValue: true, section: 'CommonOptions' }),\n\n    /**\n     * The maximum number of selected values the [`Breadcrumb`]{@link Breadcrumb} component can display before outputting a **N more...** link for the facet.\n     *\n     * **Note:** This option only has a meaning when the [`includeInBreadcrumb`]{@link DynamicFacet.options.includeInBreadcrumb} option is set to `true`.\n     *\n     * **Minimum:** `0`\n     * **Default:** `5` (desktop), or `3` (mobile)\n     */\n    numberOfValuesInBreadcrumb: ComponentOptions.buildNumberOption({\n      defaultFunction: () => (DeviceUtils.isMobileDevice() ? 3 : 5),\n      min: 0,\n      depend: 'includeInBreadcrumb',\n      section: 'CommonOptions'\n    }),\n\n    /**\n     * A mapping of facet values to their desired captions.\n     *\n     * See [Normalizing Facet Value Captions](https://developers.coveo.com/x/jBsvAg).\n     *\n     */\n    valueCaption: ComponentOptions.buildJsonOption<IStringMap<string>>(),\n\n    /**\n     * Whether the facet should remain in its current position in the viewport when the mouse cursor is over it.\n     *\n     * Leaving this to `true` ensures that the facet does not move around in the search interface while the end-user is interacting with it.\n     *\n     * Default: `true`\n     */\n    preservePosition: ComponentOptions.buildBooleanOption({ defaultValue: true })\n  };\n\n  private dynamicFacetQueryController: DynamicFacetQueryController;\n  private includedAttributeId: string;\n  private listenToQueryStateChange = true;\n  private padding: FacetPadding;\n  private header: DynamicFacetHeader;\n  private isCollapsed: boolean;\n\n  public dynamicFacetManager: DynamicFacetManager;\n  public values: DynamicFacetValues;\n  public position: number = null;\n\n  /**\n   * Creates a new `DynamicFacet` instance.\n   *\n   * @param element The element from which to instantiate the component.\n   * @param options The component options.\n   * @param bindings The component bindings. Automatically resolved by default.\n   */\n  constructor(public element: HTMLElement, public options?: IDynamicFacetOptions, bindings?: IComponentBindings) {\n    super(element, DynamicFacet.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, DynamicFacet, options);\n\n    this.initDynamicFacetQueryController();\n    this.initQueryEvents();\n    this.initQueryStateEvents();\n    this.initBreadCrumbEvents();\n    this.initComponentStateEvents();\n\n    this.values = new DynamicFacetValues(this);\n    this.isCollapsed = this.options.enableCollapse && this.options.collapsedByDefault;\n\n    ResponsiveDynamicFacets.init(this.root, this, this.options);\n  }\n\n  public get fieldName() {\n    return this.options.field.slice(1);\n  }\n\n  /**\n   * Selects a single value in this facet.\n   *\n   * Does **not** trigger a query automatically.\n   * Does **not** update the visual of the facet until a query is performed.\n   *\n   * @param value The name of the facet value to select.\n   */\n  public selectValue(value: string) {\n    Assert.exists(value);\n    this.selectMultipleValues([value]);\n  }\n\n  /**\n   * Selects multiple values in this facet.\n   *\n   * Does **not** trigger a query automatically.\n   * Does **not** update the visual of the facet until a query is performed.\n   *\n   * @param values The names of the facet values to select.\n   */\n  public selectMultipleValues(values: string[]) {\n    Assert.exists(values);\n    this.ensureDom();\n    this.logger.info('Selecting facet value(s)', values);\n    values.forEach(value => {\n      this.values.get(value).select();\n    });\n    this.handleFacetValuesChanged();\n  }\n\n  /**\n   * Deselects a single value in this facet.\n   *\n   * Does **not** trigger a query automatically.\n   * Does **not** update the visual of the facet until a query is performed.\n   *\n   * @param values The name of the facet value to deselect.\n   */\n  public deselectValue(value: string) {\n    Assert.exists(value);\n    this.deselectMultipleValues([value]);\n  }\n\n  /**\n   * Deselects multiple values in this facet.\n   *\n   * Does **not** trigger a query automatically.\n   * Does **not** update the visual of the facet until a query is performed.\n   *\n   * @param values The names of the facet values to deselect.\n   */\n  public deselectMultipleValues(values: string[]) {\n    Assert.exists(values);\n    this.ensureDom();\n    this.logger.info('Deselecting facet value(s)', values);\n    values.forEach(value => {\n      this.values.get(value).deselect();\n    });\n    this.handleFacetValuesChanged();\n  }\n\n  /**\n   * Toggles the selection state of a single value in this facet.\n   *\n   * Does **not** trigger a query automatically.\n   *\n   * @param values The name of the facet value to toggle.\n   */\n  public toggleSelectValue(value: string): void {\n    Assert.exists(value);\n    this.ensureDom();\n    this.logger.info('Toggle select facet value', this.values.get(value).toggleSelect());\n    this.handleFacetValuesChanged();\n  }\n\n  /**\n   * Requests additional values.\n   *\n   * Automatically triggers a query.\n   * @param additionalNumberOfValues The number of additional values to request. Minimum value is 1. Defaults to the [numberOfValues]{@link DynamicFacet.options.numberOfValues} option value.\n   */\n  public showMoreValues(additionalNumberOfValues = this.options.numberOfValues): void {\n    this.ensureDom();\n    this.logger.info('Show more values');\n    this.dynamicFacetQueryController.increaseNumberOfValuesToRequest(additionalNumberOfValues);\n    this.triggerNewQuery();\n    this.logAnalyticsFacetShowMoreLess(analyticsActionCauseList.facetShowMore);\n  }\n\n  /**\n   * Reduces the number of displayed facet values down to [numberOfValues]{@link DynamicFacet.options.numberOfValues}.\n   *\n   * Automatically triggers a query.\n   */\n  public showLessValues(): void {\n    this.ensureDom();\n    this.logger.info('Show less values');\n    this.dynamicFacetQueryController.resetNumberOfValuesToRequest();\n    this.triggerNewQuery();\n    this.logAnalyticsFacetShowMoreLess(analyticsActionCauseList.facetShowLess);\n  }\n\n  /**\n   * Deselects all values in this facet.\n   *\n   * Does **not** trigger a query automatically.\n   * Updates the visual of the facet.\n   *\n   */\n  public reset() {\n    this.ensureDom();\n    this.logger.info('Deselect all values');\n    this.values.clearAll();\n    this.values.render();\n    this.updateAppearance();\n    this.updateQueryStateModel();\n  }\n\n  /**\n   * Collapses or expands the facet depending on it's current state.\n   */\n  public toggleCollapse() {\n    this.isCollapsed ? this.expand() : this.collapse();\n  }\n\n  /**\n   * Expands the facet, displaying all of its currently fetched values.\n   */\n  public expand() {\n    this.ensureDom();\n    this.logger.info('Expand facet values');\n    this.isCollapsed = false;\n    this.updateAppearance();\n  }\n\n  /**\n   * Collapses the facet, displaying only its currently selected values.\n   */\n  public collapse() {\n    this.ensureDom();\n    this.logger.info('Collapse facet values');\n    this.isCollapsed = true;\n    this.updateAppearance();\n  }\n\n  /**\n   * Sets a flag indicating whether the facet values should be returned in their current order.\n   *\n   * Setting the flag to `true` helps ensuring that the values do not move around while the end-user is interacting with them.\n   *\n   * The flag is automatically set back to `false` after a query is built.\n   */\n  public enableFreezeCurrentValuesFlag() {\n    Assert.exists(this.dynamicFacetQueryController);\n    this.dynamicFacetQueryController.enableFreezeCurrentValuesFlag();\n  }\n\n  /**\n   * For this method to work, the component has to be the child of a [DynamicFacetManager]{@link DynamicFacetManager} component.\n   *\n   * Sets a flag indicating whether the facets should be returned in their current order.\n   *\n   * Setting the flag to `true` helps ensuring that the facets do not move around while the end-user is interacting with them.\n   *\n   * The flag is automatically set back to `false` after a query is built.\n   */\n  public enableFreezeFacetOrderFlag() {\n    Assert.exists(this.dynamicFacetQueryController);\n    this.dynamicFacetQueryController.enableFreezeFacetOrderFlag();\n  }\n\n  public pinFacetPosition() {\n    this.padding && this.padding.pin();\n  }\n\n  // Complete facet analytics meta\n  public get analyticsFacetState(): IAnalyticsDynamicFacetMeta[] {\n    return this.values.activeFacetValues.map(facetValue => facetValue.analyticsMeta);\n  }\n\n  // Facet specific analytics meta\n  public get basicAnalyticsFacetState(): IAnalyticsDynamicFacetMeta {\n    return {\n      field: this.options.field.toString(),\n      id: this.options.id,\n      facetType: AnalyticsDynamicFacetType.string,\n      facetPosition: this.position\n    };\n  }\n\n  public logAnalyticsEvent(actionCause: IAnalyticsActionCause, facetMeta: IAnalyticsDynamicFacetMeta) {\n    this.usageAnalytics.logSearchEvent<IAnalyticsDynamicFacetMeta>(actionCause, facetMeta);\n  }\n\n  public putStateIntoQueryBuilder(queryBuilder: QueryBuilder) {\n    Assert.exists(queryBuilder);\n    this.dynamicFacetQueryController.putFacetIntoQueryBuilder(queryBuilder);\n  }\n\n  public putStateIntoAnalytics() {\n    const pendingEvent = this.usageAnalytics.getPendingSearchEvent();\n    pendingEvent && pendingEvent.addFacetState(this.analyticsFacetState);\n  }\n\n  public isCurrentlyDisplayed() {\n    if (!$$(this.element).isVisible()) {\n      return false;\n    }\n\n    if ($$(this.element).hasClass('coveo-hidden')) {\n      return false;\n    }\n\n    return true;\n  }\n\n  private initQueryEvents() {\n    this.bind.onRootElement(QueryEvents.duringQuery, () => this.ensureDom());\n    this.bind.onRootElement(QueryEvents.doneBuildingQuery, (data: IDoneBuildingQueryEventArgs) => this.handleDoneBuildingQuery(data));\n    this.bind.onRootElement(QueryEvents.querySuccess, (data: IQuerySuccessEventArgs) => this.handleQuerySuccess(data));\n    this.bind.onRootElement(QueryEvents.deferredQuerySuccess, () => this.handleDeferredQuerySuccess());\n    this.bind.onRootElement(QueryEvents.queryError, () => this.onQueryResponse());\n  }\n\n  private initQueryStateEvents() {\n    this.includedAttributeId = QueryStateModel.getFacetId(this.options.id);\n    this.queryStateModel.registerNewAttribute(this.includedAttributeId, []);\n    this.bind.onQueryState(MODEL_EVENTS.CHANGE, undefined, this.handleQueryStateChanged);\n  }\n\n  protected initBreadCrumbEvents() {\n    if (this.options.includeInBreadcrumb) {\n      this.bind.onRootElement(BreadcrumbEvents.populateBreadcrumb, (args: IPopulateBreadcrumbEventArgs) =>\n        this.handlePopulateBreadcrumb(args)\n      );\n      this.bind.onRootElement(BreadcrumbEvents.clearBreadcrumb, () => this.reset());\n    }\n  }\n\n  private initComponentStateEvents() {\n    const componentStateId = QueryStateModel.getFacetId(this.options.id);\n    this.componentStateModel.registerComponent(componentStateId, this);\n  }\n\n  private initDynamicFacetQueryController() {\n    this.dynamicFacetQueryController = new DynamicFacetQueryController(this);\n  }\n\n  private handleDoneBuildingQuery(data: IDoneBuildingQueryEventArgs) {\n    // If there is a DynamicFacetManager, it will take care of adding the facet's state\n    if (this.dynamicFacetManager) {\n      return;\n    }\n\n    Assert.exists(data);\n    Assert.exists(data.queryBuilder);\n    this.putStateIntoQueryBuilder(data.queryBuilder);\n    this.putStateIntoAnalytics();\n  }\n\n  private handleQuerySuccess(data: IQuerySuccessEventArgs) {\n    if (Utils.isNullOrUndefined(data.results.facets)) {\n      return this.notImplementedError();\n    }\n\n    const index = findIndex(data.results.facets, { facetId: this.options.id });\n    const response = index !== -1 ? data.results.facets[index] : null;\n    this.position = index + 1;\n\n    this.onQueryResponse(response);\n  }\n\n  private handleDeferredQuerySuccess() {\n    this.header.hideLoading();\n    this.values.render();\n    this.updateAppearance();\n    this.padding && this.padding.ensurePinnedFacetHasNotMoved();\n  }\n\n  private onQueryResponse(response?: IFacetResponse) {\n    response ? this.values.createFromResponse(response) : this.values.resetValues();\n  }\n\n  private handleQueryStateChanged(data: IAttributesChangedEventArg) {\n    if (!this.listenToQueryStateChange) {\n      return;\n    }\n\n    const querySelectedValues: string[] = data.attributes[this.includedAttributeId];\n    if (!querySelectedValues) {\n      return;\n    }\n\n    this.handleQueryStateChangedIncluded(querySelectedValues);\n  }\n\n  private handleQueryStateChangedIncluded = (querySelectedValues: string[]) => {\n    const currentSelectedValues = this.values.selectedValues;\n    const valuesToSelect = difference(querySelectedValues, currentSelectedValues);\n    const valuesToDeselect = difference(currentSelectedValues, querySelectedValues);\n\n    if (Utils.isNonEmptyArray(valuesToSelect)) {\n      this.selectMultipleValues(valuesToSelect);\n      // Only one search event is sent, pick first facet value\n      this.logAnalyticsEvent(analyticsActionCauseList.dynamicFacetSelect, this.values.get(valuesToSelect[0]).analyticsMeta);\n    }\n\n    if (Utils.isNonEmptyArray(valuesToDeselect)) {\n      this.deselectMultipleValues(valuesToDeselect);\n      // Only one search event is sent, pick first facet value\n      this.logAnalyticsEvent(analyticsActionCauseList.dynamicFacetDeselect, this.values.get(valuesToDeselect[0]).analyticsMeta);\n    }\n  };\n\n  private handlePopulateBreadcrumb(args: IPopulateBreadcrumbEventArgs) {\n    Assert.exists(args);\n\n    if (!this.values.hasActiveValues) {\n      return;\n    }\n\n    const breadcrumbs = new DynamicFacetBreadcrumbs(this);\n    args.breadcrumbs.push({ element: breadcrumbs.element });\n  }\n\n  public createDom() {\n    this.createPadding();\n    this.createContent();\n    this.updateAppearance();\n  }\n\n  private createPadding() {\n    if (!this.options.preservePosition) {\n      return;\n    }\n\n    const columnParent = $$(this.element).parent('coveo-facet-column');\n    if (!columnParent) {\n      return this.logger.info(`Padding feature deactivated because facet doesn't have a parent with the class \"coveo-facet-column\"`);\n    }\n\n    this.padding = new FacetPadding(this.element, columnParent);\n  }\n\n  private createContent() {\n    this.header = this.createHeader();\n    this.element.appendChild(this.header.element);\n    this.element.appendChild(this.values.render());\n  }\n\n  private createHeader() {\n    return new DynamicFacetHeader(this);\n  }\n\n  private handleFacetValuesChanged() {\n    this.updateQueryStateModel();\n  }\n\n  private updateQueryStateModel() {\n    this.listenToQueryStateChange = false;\n    this.updateIncludedQueryStateModel();\n    this.listenToQueryStateChange = true;\n  }\n\n  private updateIncludedQueryStateModel() {\n    this.queryStateModel.set(this.includedAttributeId, this.values.selectedValues);\n  }\n\n  private updateAppearance() {\n    this.header.toggleClear(this.values.hasSelectedValues);\n    this.header.toggleCollapse(this.isCollapsed);\n    $$(this.element).toggleClass('coveo-dynamic-facet-collapsed', this.isCollapsed);\n    $$(this.element).toggleClass('coveo-active', this.values.hasSelectedValues);\n    $$(this.element).toggleClass('coveo-hidden', this.values.isEmpty);\n  }\n\n  public triggerNewQuery(beforeExecuteQuery?: () => void) {\n    this.beforeSendingQuery();\n\n    const options: IQueryOptions = beforeExecuteQuery ? { beforeExecuteQuery } : { ignoreWarningSearchEvent: true };\n\n    this.queryController.executeQuery(options);\n  }\n\n  private beforeSendingQuery() {\n    this.header.showLoading();\n    this.updateAppearance();\n  }\n\n  private notImplementedError() {\n    this.logger.error('DynamicFacets are not supported by your current search endpoint. Disabling this component.');\n    this.disable();\n    this.updateAppearance();\n  }\n\n  private logAnalyticsFacetShowMoreLess(cause: IAnalyticsActionCause) {\n    this.usageAnalytics.logCustomEvent<IAnalyticsFacetMeta>(\n      cause,\n      {\n        facetId: this.options.id,\n        facetField: this.options.field.toString(),\n        facetTitle: this.options.title\n      },\n      this.element\n    );\n  }\n}\n\nInitialization.registerAutoCreateComponent(DynamicFacet);\nDynamicFacet.doExport();\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/DynamicFacet/DynamicFacet.ts","import { contains, each, escape, extend, filter, find, isArray, isObject, isString, keys, map, omit } from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\nimport { Assert } from '../../misc/Assert';\nimport { QueryStateModel } from '../../models/QueryStateModel';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { AccessibleButton } from '../../utils/AccessibleButton';\nimport { DateUtils, IDateToStringOptions } from '../../utils/DateUtils';\nimport { $$ } from '../../utils/Dom';\nimport { StringUtils } from '../../utils/StringUtils';\nimport { Utils } from '../../utils/Utils';\nimport { analyticsActionCauseList } from '../Analytics/AnalyticsActionListMeta';\nimport { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions, IComponentOptionsObjectOptionArgs, IFieldOption } from '../Base/ComponentOptions';\nimport { Initialization } from '../Base/Initialization';\nimport { Facet } from '../Facet/Facet';\nimport { FacetUtils } from '../Facet/FacetUtils';\nimport { TemplateHelpers } from '../Templates/TemplateHelpers';\nimport { l } from '../../strings/Strings';\nimport { DynamicFacet } from '../DynamicFacet/DynamicFacet';\n\nexport interface IFieldValueOptions {\n  field?: IFieldOption;\n  facet?: string;\n  dynamicFacet?: string;\n  htmlValue?: boolean;\n  helper?: string;\n  helperOptions?: { [key: string]: any };\n  splitValues?: boolean;\n  separator?: string;\n  displaySeparator?: string;\n  textCaption?: string;\n}\n\nexport interface IAnalyticsFieldValueMeta {\n  facetId: string;\n  facetField: string;\n  facetValue?: string;\n  facetTitle?: string;\n}\n\nfunction showOnlyWithHelper<T>(helpers: string[], options?: T): T {\n  if (options == null) {\n    options = <any>{};\n  }\n  (<any>options).helpers = helpers;\n  return options;\n}\n\n/**\n * The FieldValue component displays the value of a field associated to its parent search result. It is normally usable\n * within a {@link FieldTable}.\n *\n * This component is a result template component (see [Result Templates](https://developers.coveo.com/x/aIGfAQ)).\n *\n * A common use of this component is to display a specific field value which also happens to be an existing\n * {@link Facet.options.field}. When the user clicks on the FieldValue component, it activates the corresponding Facet.\n */\nexport class FieldValue extends Component {\n  static ID = 'FieldValue';\n\n  static doExport = () => {\n    exportGlobally({\n      FieldValue: FieldValue\n    });\n  };\n\n  /**\n   * The options for the component\n   * @componentOptions\n   */\n  static options: IFieldValueOptions = {\n    /**\n     * Specifies the field that the FieldValue should display.\n     *\n     * Specifying a value for this parameter is required in order for the FieldValue component to work.\n     */\n    field: ComponentOptions.buildFieldOption({ defaultValue: '@field', required: true }),\n\n    /**\n     * Specifies the {@link Facet} component to toggle when the end user clicks the FieldValue.\n     *\n     * Default value is the value of {@link FieldValue.options.field}.\n     *\n     * **Note:**\n     * > If the target {@link Facet.options.id} is is not the same as its {@link Facet.options.field}), you must specify\n     * > this option manually in order to link to the correct Facet.\n     */\n    facet: ComponentOptions.buildStringOption({ postProcessing: (value, options) => value || options.field }),\n\n    /**\n     * Specifies whether the content to display is an HTML element.\n     *\n     * Default value is `false`.\n     */\n    htmlValue: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\n    /**\n     * Specifies whether to split the FieldValue at each {@link FieldValue.options.separator}.\n     *\n     * This is useful for splitting groups using a {@link Facet.options.field}.\n     *\n     * When this option is `true`, the displayed values are split by the {@link FieldValue.options.displaySeparator}.\n     *\n     * Default value is `false`.\n     */\n    splitValues: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\n    /**\n     * If {@link FieldValue.options.splitValues} is `true`, specifies the separator string which separates multi-value\n     * fields in the index.\n     *\n     * See {@link FieldValue.options.displaySeparator}.\n     *\n     * Default value is `\";\"`.\n     */\n    separator: ComponentOptions.buildStringOption({ depend: 'splitValues', defaultValue: ';' }),\n\n    /**\n     * If {@link FieldValue.options.splitValues} is `true`, specifies the string to use when displaying multi-value\n     * fields in the UI.\n     *\n     * The component will insert this string between each value it displays from a multi-value field.\n     *\n     * See also {@link FieldValue.options.separator}.\n     *\n     * Default value is `\", \"`.\n     */\n    displaySeparator: ComponentOptions.buildStringOption({ depend: 'splitValues', defaultValue: ', ' }),\n\n    /**\n     * Specifies the helper that the FieldValue should use to display its content.\n     *\n     * While several helpers exist by default (see {@link ICoreHelpers}), it is also possible for you to create your own\n     * custom helpers (see {@link TemplateHelpers}).\n     */\n    helper: ComponentOptions.buildHelperOption(),\n\n    /**\n     * Specifies the options to call on the specified helper.\n     */\n    helperOptions: ComponentOptions.buildObjectOption(<IComponentOptionsObjectOptionArgs>{\n      subOptions: {\n        text: ComponentOptions.buildStringOption(showOnlyWithHelper(['anchor'])),\n        target: ComponentOptions.buildStringOption(showOnlyWithHelper(['anchor'])),\n        class: ComponentOptions.buildStringOption(showOnlyWithHelper(['anchor'])),\n\n        decimals: ComponentOptions.buildNumberOption(showOnlyWithHelper(['currency'], { min: 0 })),\n        symbol: ComponentOptions.buildStringOption(showOnlyWithHelper(['currency'])),\n\n        useTodayYesterdayAndTomorrow: ComponentOptions.buildBooleanOption(\n          showOnlyWithHelper(['date', 'dateTime', 'emailDateTime', 'time'], { defaultValue: true })\n        ),\n        useWeekdayIfThisWeek: ComponentOptions.buildBooleanOption(\n          showOnlyWithHelper(['date', 'dateTime', 'emailDateTime', 'time'], { defaultValue: true })\n        ),\n        omitYearIfCurrentOne: ComponentOptions.buildBooleanOption(\n          showOnlyWithHelper(['date', 'dateTime', 'emailDateTime', 'time'], { defaultValue: true })\n        ),\n        useLongDateFormat: ComponentOptions.buildBooleanOption(\n          showOnlyWithHelper(['date', 'dateTime', 'emailDateTime', 'time'], { defaultValue: false })\n        ),\n        includeTimeIfToday: ComponentOptions.buildBooleanOption(\n          showOnlyWithHelper(['date', 'dateTime', 'emailDateTime', 'time'], { defaultValue: true })\n        ),\n        includeTimeIfThisWeek: ComponentOptions.buildBooleanOption(\n          showOnlyWithHelper(['date', 'dateTime', 'emailDateTime', 'time'], { defaultValue: true })\n        ),\n        alwaysIncludeTime: ComponentOptions.buildBooleanOption(\n          showOnlyWithHelper(['date', 'dateTime', 'emailDateTime', 'time'], { defaultValue: false })\n        ),\n        predefinedFormat: ComponentOptions.buildStringOption(showOnlyWithHelper(['date', 'dateTime', 'emailDateTime', 'time'])),\n\n        companyDomain: ComponentOptions.buildStringOption(showOnlyWithHelper(['email'])),\n        me: ComponentOptions.buildStringOption(showOnlyWithHelper(['email'])),\n        lengthLimit: ComponentOptions.buildNumberOption(showOnlyWithHelper(['email'], { min: 1 })),\n        truncateName: ComponentOptions.buildBooleanOption(showOnlyWithHelper(['email'])),\n\n        alt: ComponentOptions.buildStringOption(showOnlyWithHelper(['image'])),\n        height: ComponentOptions.buildStringOption(showOnlyWithHelper(['image'])),\n        width: ComponentOptions.buildStringOption(showOnlyWithHelper(['image'])),\n\n        precision: ComponentOptions.buildNumberOption(showOnlyWithHelper(['size'], { min: 0, defaultValue: 2 })),\n        base: ComponentOptions.buildNumberOption(showOnlyWithHelper(['size'], { min: 0, defaultValue: 0 })),\n        isMilliseconds: ComponentOptions.buildBooleanOption(showOnlyWithHelper(['timeSpan'])),\n\n        length: ComponentOptions.buildNumberOption(showOnlyWithHelper(['shorten', 'shortenPath', 'shortenUri'], { defaultValue: 200 }))\n      }\n    }),\n\n    /**\n     * Specifies a caption to display before the value.\n     *\n     * Default value is `undefined`.\n     */\n    textCaption: ComponentOptions.buildLocalizedStringOption()\n  };\n\n  static simpleOptions = omit(FieldValue.options, 'helperOptions');\n\n  static helperOptions = <any>{\n    helperOptions: FieldValue.options.helperOptions\n  };\n\n  /**\n   * Creates a new FieldValue.\n   * @param element The HTMLElement on which to instantiate the component.\n   * @param options The options for the FieldValue component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   * @param result The result to associate the component with.\n   */\n  constructor(\n    public element: HTMLElement,\n    public options: IFieldValueOptions,\n    bindings?: IComponentBindings,\n    public result?: IQueryResult,\n    fieldValueClassId: string = FieldValue.ID\n  ) {\n    super(element, fieldValueClassId, bindings);\n\n    this.options = ComponentOptions.initOptions(element, FieldValue.simpleOptions, options);\n\n    if (this.options.helper != null) {\n      this.normalizeHelperAndOptions();\n    }\n\n    this.result = this.result || this.resolveResult();\n    Assert.exists(this.result);\n\n    let loadedValueFromComponent = this.getValue();\n    if (loadedValueFromComponent == null) {\n      // Completely remove the element to ease stuff such as adding separators in CSS\n      if (this.element.parentElement != null) {\n        this.element.parentElement.removeChild(this.element);\n      }\n    } else {\n      let values: string[];\n\n      if (isArray(loadedValueFromComponent)) {\n        values = loadedValueFromComponent;\n      } else if (this.options.splitValues) {\n        if (isString(loadedValueFromComponent)) {\n          values = map(loadedValueFromComponent.split(this.options.separator), (v: string) => {\n            return v.trim();\n          });\n        }\n      } else {\n        loadedValueFromComponent = loadedValueFromComponent.toString();\n        values = [loadedValueFromComponent];\n      }\n      this.appendValuesToDom(values);\n      if (this.options.textCaption != null) {\n        this.prependTextCaptionToDom();\n      }\n    }\n  }\n\n  /**\n   * Gets the current FieldValue from the current {@link IQueryResult}.\n   *\n   * @returns {any} The current FieldValue or `null` if value is and `Object`.\n   */\n  public getValue() {\n    let value = Utils.getFieldValue(this.result, <string>this.options.field);\n    if (!isArray(value) && isObject(value)) {\n      value = null;\n    }\n    return value;\n  }\n\n  /**\n   * Renders a value to HTML using all of the current FieldValue component options.\n   * @param value The value to render.\n   * @returns {HTMLElement} The element containing the rendered value.\n   */\n  public renderOneValue(value: string): HTMLElement {\n    const element = $$('span').el;\n    let toRender = FacetUtils.tryToGetTranslatedCaption(this.options.field as string, value);\n\n    if (this.options.helper) {\n      // Try to resolve and execute version 2 of each helper function if available\n      const helper = TemplateHelpers.getHelper(`${this.options.helper}v2`) || TemplateHelpers.getHelper(`${this.options.helper}`);\n\n      if (Utils.exists(helper)) {\n        toRender = helper.call(this, value, this.getHelperOptions());\n      } else {\n        this.logger.warn(\n          `Helper ${this.options.helper} is not found in available helpers. The list of supported helpers is :`,\n          keys(TemplateHelpers.getHelpers())\n        );\n      }\n\n      const fullDateStr = this.getFullDate(value, this.options.helper);\n      if (fullDateStr) {\n        element.setAttribute('title', fullDateStr);\n      }\n      if (this.options.helper == 'date' || this.options.helper == 'dateTime' || this.options.helper == 'emailDateTime') {\n        toRender = StringUtils.capitalizeFirstLetter(toRender);\n      }\n    }\n\n    if (this.options.htmlValue) {\n      element.innerHTML = toRender;\n    } else {\n      element.appendChild(document.createTextNode(toRender));\n    }\n    this.bindEventOnValue(element, value, toRender);\n    return element;\n  }\n\n  protected getValueContainer() {\n    return this.element;\n  }\n\n  private normalizeHelperAndOptions() {\n    this.options = ComponentOptions.initOptions(this.element, FieldValue.helperOptions, this.options);\n    const toFilter = keys(FieldValue.options.helperOptions['subOptions']);\n    const toKeep = filter(toFilter, optionKey => {\n      const optionDefinition = FieldValue.options.helperOptions['subOptions'][optionKey];\n      if (optionDefinition) {\n        const helpers = optionDefinition.helpers;\n        return helpers != null && contains(helpers, this.options.helper);\n      }\n      return false;\n    });\n    this.options.helperOptions = omit(this.options.helperOptions, (value, key) => {\n      return !contains(toKeep, key);\n    });\n  }\n\n  private getHelperOptions() {\n    const inlineOptions = ComponentOptions.loadStringOption(this.element, 'helperOptions', {});\n    if (Utils.isNonEmptyString(inlineOptions)) {\n      return extend({}, this.options.helperOptions, eval('(' + inlineOptions + ')'));\n    }\n    return this.options.helperOptions;\n  }\n\n  private getFullDate(date: string, helper: string) {\n    const fullDateOptions: IDateToStringOptions = {\n      useLongDateFormat: true,\n      useTodayYesterdayAndTomorrow: false,\n      useWeekdayIfThisWeek: false,\n      omitYearIfCurrentOne: false\n    };\n\n    if (helper == 'date') {\n      return DateUtils.dateToString(new Date(parseInt(date)), fullDateOptions);\n    } else if (helper == 'dateTime' || helper == 'emailDateTime') {\n      return DateUtils.dateTimeToString(new Date(parseInt(date)), fullDateOptions);\n    }\n    return '';\n  }\n\n  private appendValuesToDom(values: string[]): void {\n    each(values, (value, index) => {\n      if (value != undefined) {\n        this.getValueContainer().appendChild(this.renderOneValue(value));\n        if (index !== values.length - 1) {\n          this.getValueContainer().appendChild(document.createTextNode(this.options.displaySeparator));\n        }\n      }\n    });\n  }\n\n  private renderTextCaption(): HTMLElement {\n    const element = $$('span', { className: 'coveo-field-caption' }, escape(this.options.textCaption));\n    return element.el;\n  }\n\n  protected prependTextCaptionToDom(): void {\n    const elem = this.getValueContainer();\n    $$(elem).prepend(this.renderTextCaption());\n    // Add a class to the container so the value and the caption wrap together.\n    $$(elem).addClass('coveo-with-label');\n  }\n\n  private bindEventOnValue(element: HTMLElement, originalFacetValue: string, renderedFacetValue: string) {\n    this.bindFacets(element, originalFacetValue, renderedFacetValue);\n    this.bindDynamicFacets(element, originalFacetValue, renderedFacetValue);\n  }\n\n  private bindFacets(element: HTMLElement, originalFacetValue: string, renderedFacetValue: string) {\n    const facetAttributeName = QueryStateModel.getFacetId(this.options.facet);\n    const facets = filter<Facet>(this.componentStateModel.get(facetAttributeName), (possibleFacetComponent: Component) => {\n      // Here, we need to check if a potential facet component (as returned by the component state model) is a \"standard\" facet.\n      // It's also possible that the FacetRange and FacetSlider constructor are not available (lazy loading mode)\n      // For that reason we also need to check that the constructor event exist before calling the instanceof operator or an exception would explode (cannot use instanceof \"undefined\")\n      let componentIsAStandardFacet = true;\n      const facetRangeConstructorExists = Component.getComponentRef('FacetRange');\n      const facetSliderConstructorExists = Component.getComponentRef('FacetSlider');\n\n      if (possibleFacetComponent.disabled) {\n        return false;\n      }\n\n      if (componentIsAStandardFacet && facetRangeConstructorExists) {\n        componentIsAStandardFacet = !(possibleFacetComponent instanceof facetRangeConstructorExists);\n      }\n\n      if (componentIsAStandardFacet && facetSliderConstructorExists) {\n        componentIsAStandardFacet = !(possibleFacetComponent instanceof facetSliderConstructorExists);\n      }\n\n      return componentIsAStandardFacet;\n    });\n\n    if (facets.length) {\n      const isValueSelected = !!find<Facet>(facets, facet => {\n        const facetValue = facet.values.get(originalFacetValue);\n        return facetValue && facetValue.selected;\n      });\n\n      const selectAction = () => this.handleFacetSelection(isValueSelected, facets, originalFacetValue);\n      this.buildClickableElement(element, !!isValueSelected, renderedFacetValue, selectAction);\n    }\n  }\n\n  private getDynamicFacets() {\n    const dynamicFacetAttributeName = QueryStateModel.getFacetId(this.options.facet);\n    return filter<DynamicFacet>(\n      this.componentStateModel.get(dynamicFacetAttributeName),\n      (component: Component) => component.type === DynamicFacet.ID && !component.disabled\n    );\n  }\n\n  private bindDynamicFacets(element: HTMLElement, originalFacetValue: string, renderedFacetValue: string) {\n    const dynamicFacets = this.getDynamicFacets();\n\n    if (dynamicFacets.length) {\n      const isValueSelected = !!find<DynamicFacet>(dynamicFacets, dynamicFacet => dynamicFacet.values.hasSelectedValue(originalFacetValue));\n\n      const selectAction = () => this.handleDynamicFacetSelection(isValueSelected, dynamicFacets, originalFacetValue);\n      this.buildClickableElement(element, isValueSelected, renderedFacetValue, selectAction);\n    }\n  }\n\n  private buildClickableElement(element: HTMLElement, isSelected: boolean, value: string, selectAction: () => void) {\n    const label = isSelected ? l('RemoveFilterOn', value) : l('FilterOn', value);\n    new AccessibleButton()\n      .withTitle(label)\n      .withLabel(label)\n      .withElement(element)\n      .withSelectAction(selectAction)\n      .build();\n\n    if (isSelected) {\n      $$(element).addClass('coveo-selected');\n    }\n    $$(element).addClass('coveo-clickable');\n  }\n\n  private handleFacetSelection(isValueSelected: boolean, facets: Facet[], value: string) {\n    facets.forEach(facet => {\n      isValueSelected ? facet.deselectValue(value) : facet.selectValue(value);\n    });\n\n    this.executeQuery(value);\n  }\n\n  private handleDynamicFacetSelection(isValueSelected: boolean, facets: DynamicFacet[], value: string) {\n    facets.forEach(facet => {\n      isValueSelected ? facet.deselectValue(value) : facet.selectValue(value);\n    });\n\n    this.executeQuery(value);\n  }\n\n  private executeQuery(value: string) {\n    this.queryController.deferExecuteQuery({\n      beforeExecuteQuery: () =>\n        this.usageAnalytics.logSearchEvent<IAnalyticsFieldValueMeta>(analyticsActionCauseList.documentField, {\n          facetId: this.options.facet,\n          facetField: this.options.field.toString(),\n          facetValue: value.toLowerCase()\n        })\n    });\n  }\n}\n\nInitialization.registerAutoCreateComponent(FieldValue);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/FieldValue/FieldValue.ts","import { IStringMap } from '../rest/GenericParam';\nimport * as _ from 'underscore';\n\nexport class SVGDom {\n  public static addClassToSVGInContainer(svgContainer: HTMLElement, classToAdd: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', `${SVGDom.getClass(svgElement)}${classToAdd}`);\n  }\n\n  public static removeClassFromSVGInContainer(svgContainer: HTMLElement, classToRemove: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', SVGDom.getClass(svgElement).replace(classToRemove, ''));\n  }\n\n  public static addStyleToSVGInContainer(svgContainer: HTMLElement, styleToAdd: IStringMap<any>) {\n    const svgElement = svgContainer.querySelector('svg');\n    _.each(styleToAdd, (styleValue, styleKey) => {\n      svgElement.style[styleKey] = styleValue;\n    });\n  }\n\n  private static getClass(svgElement: SVGElement) {\n    const className = svgElement.getAttribute('class');\n    return className ? className + ' ' : '';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/SVGDom.ts","import 'styling/_ResponsiveFacets';\nimport { IQuerySuccessEventArgs, QueryEvents } from '../../events/QueryEvents';\nimport { Logger } from '../../misc/Logger';\nimport { l } from '../../strings/Strings';\nimport { $$, Dom } from '../../utils/Dom';\nimport { Utils } from '../../utils/Utils';\nimport { Component } from '../Base/Component';\nimport { SearchInterface } from '../SearchInterface/SearchInterface';\nimport { ResponsiveComponents } from './ResponsiveComponents';\nimport { IResponsiveComponent, IResponsiveComponentOptions, ResponsiveComponentsManager } from './ResponsiveComponentsManager';\nimport { ResponsiveComponentsUtils } from './ResponsiveComponentsUtils';\nimport { ResponsiveDropdown } from './ResponsiveDropdown/ResponsiveDropdown';\nimport { ResponsiveDropdownContent } from './ResponsiveDropdown/ResponsiveDropdownContent';\nimport { ResponsiveDropdownHeader } from './ResponsiveDropdown/ResponsiveDropdownHeader';\nimport { each, debounce } from 'underscore';\nimport { ComponentsTypes } from '../../utils/ComponentsTypes';\n\nexport class ResponsiveFacetColumn implements IResponsiveComponent {\n  public static DEBOUNCE_SCROLL_WAIT = 250;\n\n  private static DROPDOWN_MIN_WIDTH: number = 280;\n  private static DROPDOWN_WIDTH_RATIO: number = 0.35; // Used to set the width relative to the coveo root.\n  private static DROPDOWN_HEADER_LABEL_DEFAULT_VALUE = 'Filters';\n\n  private searchInterface: SearchInterface;\n  private componentsInFacetColumn: any[] = [];\n  private preservePositionOriginalValues: boolean[] = [];\n  private breakpoint: number;\n  protected dropdown: ResponsiveDropdown;\n  private dropdownHeaderLabel: string;\n\n  public static init(responsiveComponentConstructor, root: HTMLElement, component, options: IResponsiveComponentOptions, ID: string) {\n    const column = this.findColumn(root);\n    if (!column) {\n      return;\n    }\n\n    ResponsiveComponentsManager.register(ResponsiveFacetColumn, $$(root), 'ResponsiveFacetColumn', component, options);\n    ResponsiveComponentsManager.register(responsiveComponentConstructor, $$(root), ID, component, options);\n  }\n\n  private static findColumn(root: HTMLElement) {\n    const column = $$(root).find('.coveo-facet-column');\n    if (!column) {\n      const logger = new Logger('ResponsiveFacets');\n      logger.info('No element with class coveo-facet-column. Responsive facets cannot be enabled');\n    }\n    return column;\n  }\n\n  constructor(public coveoRoot: Dom, public ID: string, options: IResponsiveComponentOptions, responsiveDropdown?: ResponsiveDropdown) {\n    this.dropdownHeaderLabel = this.getDropdownHeaderLabel();\n    this.dropdown = this.buildDropdown(responsiveDropdown);\n    this.searchInterface = <SearchInterface>Component.get(this.coveoRoot.el, SearchInterface, false);\n    this.bindDropdownContentEvents();\n    this.registerOnCloseHandler();\n    this.registerQueryEvents();\n    this.breakpoint = options.responsiveBreakpoint;\n  }\n\n  public registerComponent(accept: Component) {\n    this.componentsInFacetColumn.push(accept);\n    this.preservePositionOriginalValues.push(accept.options.preservePosition);\n    return true;\n  }\n\n  public needDropdownWrapper() {\n    return this.needSmallMode();\n  }\n\n  public handleResizeEvent() {\n    if (this.needSmallMode() && !ResponsiveComponentsUtils.isSmallFacetActivated(this.coveoRoot)) {\n      this.changeToSmallMode();\n    } else if (!this.needSmallMode() && ResponsiveComponentsUtils.isSmallFacetActivated(this.coveoRoot)) {\n      this.changeToLargeMode();\n    }\n    if (this.dropdown.isOpened) {\n      this.dropdown.dropdownContent.positionDropdown();\n    }\n  }\n\n  public dismissFacetSearches() {\n    each(this.componentsInFacetColumn, component => {\n      if (component.facetSearch && component.facetSearch.currentlyDisplayedResults) {\n        component.facetSearch.dismissSearchResults();\n      }\n    });\n  }\n\n  private needSmallMode(): boolean {\n    if (!this.searchInterface) {\n      return (\n        this.coveoRoot.width() <=\n        (Utils.isNullOrUndefined(this.breakpoint) ? new ResponsiveComponents().getMediumScreenWidth() : this.breakpoint)\n      );\n    }\n    switch (this.searchInterface.responsiveComponents.getResponsiveMode()) {\n      case 'small':\n      case 'medium':\n        return true;\n      case 'auto':\n        return (\n          this.coveoRoot.width() <=\n          (Utils.isNullOrUndefined(this.breakpoint) ? this.searchInterface.responsiveComponents.getMediumScreenWidth() : this.breakpoint)\n        );\n      default:\n        return false;\n    }\n  }\n\n  private changeToSmallMode() {\n    this.dropdown.close();\n    this.disableFacetPreservePosition();\n    $$(this.coveoRoot.find(`.${ResponsiveComponentsManager.DROPDOWN_HEADER_WRAPPER_CSS_CLASS}`)).append(\n      this.dropdown.dropdownHeader.element.el\n    );\n    ResponsiveComponentsUtils.activateSmallFacet(this.coveoRoot);\n  }\n\n  private changeToLargeMode() {\n    this.restoreFacetPreservePositionValue();\n    this.dropdown.cleanUp();\n    ResponsiveComponentsUtils.deactivateSmallFacet(this.coveoRoot);\n  }\n\n  private buildDropdown(responsiveDropdown?: ResponsiveDropdown) {\n    let dropdownContent = this.buildDropdownContent();\n    let dropdownHeader = this.buildDropdownHeader();\n    let dropdown = responsiveDropdown ? responsiveDropdown : new ResponsiveDropdown(dropdownContent, dropdownHeader, this.coveoRoot);\n    return dropdown;\n  }\n\n  private buildDropdownContent(): ResponsiveDropdownContent {\n    let dropdownContentElement = $$(this.coveoRoot.find('.coveo-facet-column'));\n    let filterByContainer = $$('div', { className: 'coveo-facet-header-filter-by-container', style: 'display: none' });\n    let filterBy = $$('div', { className: 'coveo-facet-header-filter-by' });\n    filterBy.text(l('Filter by:'));\n    filterByContainer.append(filterBy.el);\n    dropdownContentElement.prepend(filterByContainer.el);\n    let dropdownContent = new ResponsiveDropdownContent(\n      'facet',\n      dropdownContentElement,\n      this.coveoRoot,\n      ResponsiveFacetColumn.DROPDOWN_MIN_WIDTH,\n      ResponsiveFacetColumn.DROPDOWN_WIDTH_RATIO\n    );\n    return dropdownContent;\n  }\n\n  private buildDropdownHeader(): ResponsiveDropdownHeader {\n    let dropdownHeaderElement = $$('a');\n    let content = $$('p');\n    content.text(this.dropdownHeaderLabel);\n    dropdownHeaderElement.el.appendChild(content.el);\n    let dropdownHeader = new ResponsiveDropdownHeader('facet', dropdownHeaderElement);\n    return dropdownHeader;\n  }\n\n  private registerOnCloseHandler() {\n    this.dropdown.registerOnCloseHandler(this.dismissFacetSearches, this);\n  }\n\n  private registerQueryEvents() {\n    this.coveoRoot.on(QueryEvents.noResults, () => this.handleNoResults());\n    this.coveoRoot.on(QueryEvents.querySuccess, (e: Event, data: IQuerySuccessEventArgs) => this.handleQuerySuccess(data));\n    this.coveoRoot.on(QueryEvents.queryError, () => this.handleQueryError());\n  }\n\n  private bindDropdownContentEvents() {\n    this.dropdown.dropdownContent.element.on(\n      'scroll',\n      debounce(() => {\n        each(this.componentsInFacetColumn, component => {\n          let facetSearch = component.facetSearch;\n          if (facetSearch && facetSearch.currentlyDisplayedResults && !this.isFacetSearchScrolledIntoView(facetSearch.search)) {\n            component.facetSearch.positionSearchResults(this.dropdown.dropdownContent.element.el);\n          } else if (facetSearch && component.facetSearch.currentlyDisplayedResults) {\n            component.facetSearch.positionSearchResults();\n          }\n        });\n      }, ResponsiveFacetColumn.DEBOUNCE_SCROLL_WAIT)\n    );\n  }\n\n  private restoreFacetPreservePositionValue() {\n    each(this.componentsInFacetColumn, (component, index) => {\n      if (component.options) {\n        component.options.preservePosition = this.preservePositionOriginalValues[index];\n      }\n    });\n  }\n\n  private disableFacetPreservePosition() {\n    each(this.componentsInFacetColumn, component => {\n      if (component.options) {\n        component.options.preservePosition = false;\n      }\n    });\n  }\n\n  private isFacetSearchScrolledIntoView(facetSearchElement: HTMLElement) {\n    let facetTop = facetSearchElement.getBoundingClientRect().top;\n    let facetBottom = facetSearchElement.getBoundingClientRect().bottom;\n    let dropdownTop = this.dropdown.dropdownContent.element.el.getBoundingClientRect().top;\n    let dropdownBottom = this.dropdown.dropdownContent.element.el.getBoundingClientRect().bottom;\n\n    dropdownTop = dropdownTop >= 0 ? dropdownTop : 0;\n\n    return facetTop >= dropdownTop && facetBottom <= dropdownBottom;\n  }\n\n  private getDropdownHeaderLabel() {\n    let dropdownHeaderLabel: string;\n    ComponentsTypes.getAllFacetsInstance(this.coveoRoot.find('.coveo-facet-column')).forEach(facet => {\n      const options = facet.options as IResponsiveComponentOptions;\n\n      if (!dropdownHeaderLabel && options.dropdownHeaderLabel) {\n        dropdownHeaderLabel = options.dropdownHeaderLabel;\n      }\n    });\n\n    if (!dropdownHeaderLabel) {\n      dropdownHeaderLabel = l(ResponsiveFacetColumn.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE);\n    }\n\n    return dropdownHeaderLabel;\n  }\n\n  private handleNoResults() {\n    this.dropdown.dropdownHeader.hide();\n  }\n\n  private handleQueryError() {\n    this.dropdown.dropdownHeader.hide();\n  }\n\n  private handleQuerySuccess(data: IQuerySuccessEventArgs) {\n    if (data.results.totalCount === 0) {\n      this.dropdown.dropdownHeader.hide();\n    } else {\n      this.dropdown.dropdownHeader.show();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveFacetColumn.ts","/**\n * The allowed states of a facet value in a Search API facet\n * [request]{@link IFacetRequestValue.state} or\n * [response]{@link IFacetResponseValue.state}.\n */\nexport enum FacetValueState {\n  /**\n   * The facet value is not currently selected or excluded in the search\n   * interface.\n   */\n  idle = 'idle',\n  /**\n   * The facet value is currently selected in the search interface.\n   */\n  selected = 'selected'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/rest/Facet/FacetValueState.ts","import { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { Initialization } from '../Base/Initialization';\nimport { FieldValue, IFieldValueOptions } from '../FieldValue/FieldValue';\nimport { StringUtils } from '../../utils/StringUtils';\nimport { Assert } from '../../misc/Assert';\nimport { $$ } from '../../utils/Dom';\nimport * as _ from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\n\nexport interface IBadgeOptions extends IFieldValueOptions {\n  colors: IBadgeColors;\n}\n\n/**\n * Badge Colors\n */\nexport interface IBadgeColors extends IBadgeColor {\n  values?: { [value: string]: IBadgeColors };\n}\n\nexport interface IBadgeColor {\n  icon?: string;\n  text?: string;\n}\n\n/**\n * The Badge component outputs a field value with customizable colors and an icon preceding it.\n *\n * This component is a result template component (see [Result Templates](https://developers.coveo.com/x/aIGfAQ)). It\n * extends the {@link FieldValue} component. Therefore all FieldValue options are also available for a Badge component.\n */\nexport class Badge extends FieldValue implements IComponentBindings {\n  static ID = 'Badge';\n\n  static doExport = () => {\n    exportGlobally({\n      Badge: Badge\n    });\n  };\n\n  /**\n   * The options for the component\n   * @componentOptions\n   */\n  static options: IBadgeOptions = {\n    /**\n     * Specifies the colors for the Badge component.\n     *\n     * You must specify the colors in a JSON format similar to what follows:\n     * ```json\n     * {\n     *   \"values\":{\n     *     \"foo\":{\n     *       \"icon\":\"blue\",\n     *       \"text\":\"#222\"\n     *     },\n     *     \"bar\":{\n     *       \"icon\":\"green\",\n     *       \"text\":\"lightgreen\"\n     *     }\n     *   },\n     *   \"icon\":\"red\",\n     *   \"text\":\"#9ab52b\"\n     * }\n     * ```\n     * This format allows you to customize both the icon and text colors for each field value as well as the default\n     * values.\n     *\n     * Colors can be specified in HTML or hexadecimal format.\n     */\n    colors: ComponentOptions.buildCustomOption<IBadgeColors>((value: string) => Badge.parseColors(value), {\n      defaultValue: { values: {} }\n    }),\n    textCaption: ComponentOptions.buildLocalizedStringOption()\n  };\n\n  static parent = FieldValue;\n\n  /**\n   * Creates a new Badge component.\n   * @param element The HTMLElement on which to instantiate the component.\n   * @param options The options for the Badge component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   * @param result The result to associate the component with.\n   */\n  constructor(element: HTMLElement, public options: IBadgeOptions, bindings?: IComponentBindings, result?: IQueryResult) {\n    super(element, ComponentOptions.initComponentOptions(element, Badge, options), bindings, result, Badge.ID);\n    if (_.isString(this.options.colors)) {\n      // to support the old string options\n      this.options.colors = Badge.parseColors(<any>this.options.colors);\n    }\n    if (this.options.colors.values == null) {\n      this.options.colors.values = {};\n    }\n  }\n\n  // The following regexes are used to match the old color format:\n\n  // This one matches a single color, e.g. either \"red\" or \"foo: blue\".\n  // Its capture groups will be the following :\n  // 0:( 1:() 2:(red)) or 0:( 1:(foo) 2:(blue))\n  private static colorRegex = /(?:\\s*((?:[^:;]|\\\\[;:])*)\\s*:\\s*)?(\\w+|#[A-Fa-f0-9]{6}|#[A-Fa-f0-9]{3})/g;\n  // This one matches all colors, separated by semicolons, e.g. \"red; foo: blue; bar: green\".\n  // It wraps 'colorRegex' in other capture groups, such as the following:\n  // 0:(red) 1:(foo: blue;) 2:(bar: green)\n  private static colorsRegex = new RegExp('^(\\\\s*' + Badge.colorRegex.source + '\\\\s*;)*(\\\\s*' + Badge.colorRegex.source + ')?\\\\s*$');\n\n  /**\n   * Parses a {@link Badge.options.colors} option string into a workable JSON format.\n   *\n   * @param colorsOption The colors option string to parse. See {@link Badge.options.colors}.\n   */\n  public static parseColors(colorsOption: string): IBadgeColors {\n    if (colorsOption) {\n      if (Badge.colorsRegex.test(colorsOption)) {\n        let badgeColors: IBadgeColors = {\n          values: {}\n        };\n        let colors: string[][] = StringUtils.match(colorsOption, Badge.colorRegex);\n        _.each(colors, (color: string[]) => {\n          let [, fieldValue, colorValue] = color;\n          if (fieldValue != null) {\n            badgeColors.values[fieldValue.replace(/\\\\(:|;)/g, '$1')] = {\n              icon: colorValue\n            };\n          } else {\n            badgeColors.icon = colorValue;\n          }\n        });\n        return badgeColors;\n      }\n      try {\n        return JSON.parse(colorsOption);\n      } catch (e) {\n        Assert.fail(`Invalid colors for badge '${colorsOption}'`);\n      }\n    }\n    return {};\n  }\n\n  /**\n   * Gets the icon and text color of a field value.\n   *\n   * @param value The field value whose colors to return.\n   * @returns {{icon: string, text: string}} An object with the `icon` and `text` keys.\n   */\n  public getColor(value: string = ''): IBadgeColor {\n    var colorKey = _.find(_.keys(this.options.colors.values), (key: string) => value.toLowerCase() == key.toLowerCase());\n    var color: IBadgeColor = colorKey ? this.options.colors.values[colorKey] : {};\n    return {\n      icon: color.icon || this.options.colors.icon,\n      text: color.text || this.options.colors.text\n    };\n  }\n\n  /**\n   * Renders one string value with the appropriate colors and icon.\n   *\n   * @param value The field value to render.\n   * @returns {HTMLElement} An HTML `<span>` tag containing the rendered value.\n   */\n  public renderOneValue(value: string): HTMLElement {\n    let valueDom = super.renderOneValue(value);\n    $$(valueDom).addClass('coveo-value');\n\n    let color = this.getColor(value);\n\n    var icon = $$('span', { className: 'coveo-badge-icon' }).el;\n    if (color.icon != null) {\n      icon.style.color = color.icon;\n    }\n\n    let label = $$('span', { className: 'coveo-badge-label' }, valueDom.innerHTML).el;\n\n    if (color.text != null) {\n      label.style.color = color.text;\n    }\n\n    $$(valueDom).empty();\n\n    valueDom.appendChild(icon);\n    valueDom.appendChild(label);\n    return valueDom;\n  }\n\n  // Override the protected method from FieldValue class to ignore a potential textCaption on a Badge.\n  protected prependTextCaptionToDom(): void {\n    return;\n  }\n}\n\nBadge.options = _.omit(Badge.options, 'textCaption');\n\nInitialization.registerAutoCreateComponent(Badge);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Badge/Badge.ts","import { $$, Dom } from '../../../utils/Dom';\nimport { SVGDom } from '../../../utils/SVGDom';\n\nexport interface IDynamicFacetHeaderButtonOptions {\n  label: string;\n  shouldDisplay?: boolean;\n  className?: string;\n  iconSVG?: string;\n  iconClassName?: string;\n  action?: () => void;\n}\n\nexport class DynamicFacetHeaderButton {\n  private button: Dom;\n  public element: HTMLElement;\n\n  constructor(private rootOptions: IDynamicFacetHeaderButtonOptions) {\n    this.create();\n  }\n\n  private create() {\n    const hasIcon = this.rootOptions.iconSVG && this.rootOptions.iconClassName;\n\n    this.button = $$(\n      'button',\n      { className: `coveo-dynamic-facet-header-btn ${this.rootOptions.className || ''}`.trim() },\n      hasIcon ? this.rootOptions.iconSVG : this.rootOptions.label\n    );\n\n    this.rootOptions.action && this.button.on('click', this.rootOptions.action);\n\n    if (hasIcon) {\n      this.button.setAttribute('aria-label', this.rootOptions.label);\n      this.button.setAttribute('title', this.rootOptions.label);\n      SVGDom.addClassToSVGInContainer(this.button.el, this.rootOptions.iconClassName);\n    }\n\n    if (this.rootOptions.shouldDisplay !== undefined) {\n      this.toggle(this.rootOptions.shouldDisplay);\n    }\n\n    this.element = this.button.el;\n  }\n\n  public toggle(shouldDisplay: boolean) {\n    this.button.toggle(shouldDisplay);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/DynamicFacet/DynamicFacetHeader/DynamicFacetHeaderButton.ts","/// <reference path='Facet.ts' />\nimport { StringUtils } from '../../utils/StringUtils';\nimport { QueryUtils } from '../../utils/QueryUtils';\nimport { FileTypes } from '../Misc/FileTypes';\nimport { DateUtils } from '../../utils/DateUtils';\nimport { Utils } from '../../utils/Utils';\nimport { $$ } from '../../utils/Dom';\nimport * as _ from 'underscore';\nimport FacetModuleDefinition = require('./Facet');\nimport { l } from '../../strings/Strings';\n\nexport class FacetUtils {\n  static getRegexToUseForFacetSearch(value: string, ignoreAccent: boolean) {\n    return new RegExp(StringUtils.stringToRegex(value, ignoreAccent), 'i');\n  }\n\n  static getValuesToUseForSearchInFacet(original: string, facet: FacetModuleDefinition.Facet): string[] {\n    let ret = [original];\n    let regex = this.getRegexToUseForFacetSearch(original, facet.options.facetSearchIgnoreAccents);\n    if (facet.options.valueCaption) {\n      _.chain(facet.options.valueCaption)\n        .pairs()\n        .filter(pair => {\n          return regex.test(pair[1]);\n        })\n        .each(match => {\n          ret.push(match[0]);\n        });\n      if (\n        QueryUtils.isStratusAgnosticField(<string>facet.options.field, '@objecttype') ||\n        QueryUtils.isStratusAgnosticField(<string>facet.options.field, '@filetype')\n      ) {\n        _.each(FileTypes.getFileTypeCaptions(), (value: string, key: string) => {\n          if (!(key in facet.options.valueCaption) && regex.test(value)) {\n            ret.push(key);\n          }\n        });\n      }\n    } else if (\n      QueryUtils.isStratusAgnosticField(<string>facet.options.field, '@objecttype') ||\n      QueryUtils.isStratusAgnosticField(<string>facet.options.field, '@filetype')\n    ) {\n      _.each(\n        _.filter(_.pairs(FileTypes.getFileTypeCaptions()), pair => {\n          return regex.test(pair[1]);\n        }),\n        match => {\n          ret.push(match[0]);\n        }\n      );\n    } else if (QueryUtils.isStratusAgnosticField(<string>facet.options.field, '@month')) {\n      _.each(_.range(1, 13), month => {\n        if (regex.test(DateUtils.monthToString(month - 1))) {\n          ret.push(('0' + month.toString()).substr(-2));\n        }\n      });\n    }\n    return ret;\n  }\n\n  static buildFacetSearchPattern(values: string[]) {\n    values = _.map(values, value => {\n      return Utils.escapeRegexCharacter(value);\n    });\n    values[0] = '.*' + values[0] + '.*';\n    return values.join('|');\n  }\n\n  static needAnotherFacetSearch(\n    currentSearchLength: number,\n    newSearchLength: number,\n    oldSearchLength: number,\n    desiredSearchLength: number\n  ) {\n    // Something was removed (currentSearch < newSearch)\n    // && we might want to display more facet search result(currentSearch < desiredSearch)\n    // && the new query returned more stuff than the old one so there's still more results(currentSearchLength > oldLength)\n    return currentSearchLength < newSearchLength && currentSearchLength < desiredSearchLength && currentSearchLength > oldSearchLength;\n  }\n\n  static addNoStateCssClassToFacetValues(facet: FacetModuleDefinition.Facet, container: HTMLElement) {\n    // This takes care of adding the correct css class on each facet value checkbox (empty white box) if at least one value is selected in that facet\n    if (facet.values.getSelected().length != 0) {\n      let noStates = $$(container).findAll('li:not(.coveo-selected)');\n      _.each(noStates, noState => {\n        $$(noState).addClass('coveo-no-state');\n      });\n    }\n  }\n\n  static tryToGetTranslatedCaption(field: string, value: string) {\n    let found: string;\n\n    if (QueryUtils.isStratusAgnosticField(field.toLowerCase(), '@filetype')) {\n      found = FileTypes.getFileType(value).caption;\n    } else if (QueryUtils.isStratusAgnosticField(field.toLowerCase(), '@objecttype')) {\n      found = FileTypes.getObjectType(value).caption;\n    } else if (FacetUtils.isMonthFieldValue(field, value)) {\n      const month = parseInt(value, 10);\n      found = DateUtils.monthToString(month - 1);\n    } else {\n      found = l(value);\n    }\n    return found != undefined && Utils.isNonEmptyString(found) ? found : value;\n  }\n\n  static isMonthFieldValue(field: string, value: string) {\n    if (!QueryUtils.isStratusAgnosticField(field.toLowerCase(), '@month')) {\n      return false;\n    }\n\n    const asInt = parseInt(value, 10);\n\n    if (isNaN(asInt)) {\n      return false;\n    }\n\n    if (asInt < 1 || asInt > 12) {\n      return false;\n    }\n\n    return true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Facet/FacetUtils.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResponsiveFacets.scss\n// module id = 464\n// module chunks = 1 2 3 4 5 9 10 11 13 78","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/DynamicFacet/_DynamicFacet.scss\n// module id = 467\n// module chunks = 2 9 10 11 78","import { ResponsiveFacetColumn } from './ResponsiveFacetColumn';\nimport { IResponsiveComponentOptions } from './ResponsiveComponentsManager';\nimport { DynamicFacet } from '../DynamicFacet/DynamicFacet';\n\nexport class ResponsiveDynamicFacets extends ResponsiveFacetColumn {\n  public static init(root: HTMLElement, component, options: IResponsiveComponentOptions) {\n    ResponsiveFacetColumn.init(ResponsiveDynamicFacets, root, component, options, DynamicFacet.ID);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveDynamicFacets.ts","import 'styling/DynamicFacet/_DynamicFacetBreadcrumbs';\nimport { $$ } from '../../utils/Dom';\nimport { l } from '../../strings/Strings';\nimport { DynamicFacet } from './DynamicFacet';\nimport { SVGIcons } from '../../utils/SVGIcons';\nimport { DynamicFacetValue } from './DynamicFacetValues/DynamicFacetValue';\nimport { analyticsActionCauseList } from '../Analytics/AnalyticsActionListMeta';\n\nexport class DynamicFacetBreadcrumbs {\n  public element: HTMLElement;\n\n  constructor(private facet: DynamicFacet) {\n    this.create();\n  }\n\n  private create() {\n    this.element = $$('div', { className: 'coveo-dynamic-facet-breadcrumb coveo-breadcrumb-item' }).el;\n    this.createAndAppendTitle();\n\n    const activeFacetValues = this.facet.values.activeFacetValues;\n    const breadcrumbFacetValues = activeFacetValues.slice(0, this.facet.options.numberOfValuesInBreadcrumb);\n    const collapsedFacetValues = activeFacetValues.slice(this.facet.options.numberOfValuesInBreadcrumb);\n\n    this.createAndAppendBreadcrumbValues(breadcrumbFacetValues);\n\n    if (collapsedFacetValues.length) {\n      this.createAndAppendCollapsedBreadcrumbs(collapsedFacetValues);\n    }\n  }\n\n  private createAndAppendTitle() {\n    const titleElement = $$('h3', { className: 'coveo-dynamic-facet-breadcrumb-title' }, `${this.facet.options.title}:`).el;\n    this.element.appendChild(titleElement);\n  }\n\n  private createAndAppendBreadcrumbValues(facetValues: DynamicFacetValue[]) {\n    facetValues.forEach(facetValue => this.createAndAppendBreadcrumbValue(facetValue));\n  }\n\n  private createAndAppendBreadcrumbValue(facetValue: DynamicFacetValue) {\n    const valueElement = $$(\n      'button',\n      {\n        className: 'coveo-dynamic-facet-breadcrumb-value',\n        ariaLabel: l('RemoveFilterOn', facetValue.valueCaption)\n      },\n      facetValue.valueCaption\n    ).el;\n    const clearElement = $$('span', { className: 'coveo-dynamic-facet-breadcrumb-value-clear' }, SVGIcons.icons.mainClear).el;\n    valueElement.appendChild(clearElement);\n\n    $$(valueElement).on('click', () => this.valueSelectAction(facetValue));\n\n    this.element.appendChild(valueElement);\n  }\n\n  private valueSelectAction(facetValue: DynamicFacetValue) {\n    this.facet.deselectValue(facetValue.value);\n    this.facet.triggerNewQuery(() => this.logActionToAnalytics(facetValue));\n  }\n\n  private logActionToAnalytics(facetValue: DynamicFacetValue) {\n    this.facet.logAnalyticsEvent(analyticsActionCauseList.breadcrumbDynamicFacet, facetValue.analyticsMeta);\n  }\n\n  private createAndAppendCollapsedBreadcrumbs(facetValues: DynamicFacetValue[]) {\n    const label = l('NMore', `${facetValues.length}`);\n    const title = facetValues.map(({ value }) => value).join('\\n');\n    const collapsedElement = $$(\n      'button',\n      {\n        className: 'coveo-dynamic-facet-breadcrumb-collapse',\n        title\n      },\n      label\n    ).el;\n\n    $$(collapsedElement).on('click', () => {\n      $$(collapsedElement).remove();\n      this.createAndAppendBreadcrumbValues(facetValues);\n    });\n\n    this.element.appendChild(collapsedElement);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/DynamicFacet/DynamicFacetBreadcrumbs.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/DynamicFacet/_DynamicFacetBreadcrumbs.scss\n// module id = 470\n// module chunks = 2 9 10 11 78","import 'styling/DynamicFacet/_DynamicFacetHeader';\nimport { $$, Dom } from '../../../utils/Dom';\nimport { l } from '../../../strings/Strings';\nimport { SVGIcons } from '../../../utils/SVGIcons';\nimport { SVGDom } from '../../../utils/SVGDom';\nimport { DynamicFacet } from '../DynamicFacet';\nimport { DynamicFacetHeaderButton } from './DynamicFacetHeaderButton';\nimport { DynamicFacetHeaderCollapseToggle } from './DynamicFacetHeaderCollapseToggle';\nimport { analyticsActionCauseList } from '../../Analytics/AnalyticsActionListMeta';\n\nexport class DynamicFacetHeader {\n  public static showLoadingDelay = 2000;\n  public element: HTMLElement;\n  private title: Dom;\n  private waitAnimation: Dom;\n  private clearButton: DynamicFacetHeaderButton;\n  private collapseToggle: DynamicFacetHeaderCollapseToggle;\n  private showLoadingTimeout: number;\n\n  constructor(private facet: DynamicFacet) {\n    this.element = $$('div', { className: 'coveo-dynamic-facet-header' }).el;\n    this.title = this.createTitle();\n    $$(this.element).append(this.title.el);\n    $$(this.element).append(this.createWaitAnimation());\n    $$(this.element).append(this.createClearButton());\n    this.facet.options.enableCollapse && this.enableCollapse();\n  }\n\n  private createClearButton() {\n    this.clearButton = new DynamicFacetHeaderButton({\n      label: l('Clear'),\n      className: 'coveo-dynamic-facet-header-clear',\n      shouldDisplay: false,\n      action: () => this.clear()\n    });\n\n    return this.clearButton.element;\n  }\n\n  private clear() {\n    this.facet.reset();\n    this.facet.enableFreezeFacetOrderFlag();\n    this.facet.triggerNewQuery(() => this.logClearAllToAnalytics());\n  }\n\n  private logClearAllToAnalytics() {\n    this.facet.logAnalyticsEvent(analyticsActionCauseList.dynamicFacetClearAll, this.facet.basicAnalyticsFacetState);\n  }\n\n  private createCollapseToggle() {\n    this.collapseToggle = new DynamicFacetHeaderCollapseToggle(this.facet);\n    return this.collapseToggle.element;\n  }\n\n  private enableCollapse() {\n    $$(this.element).append(this.createCollapseToggle());\n    $$(this.title).addClass('coveo-clickable');\n    $$(this.title).on('click', () => this.facet.toggleCollapse());\n  }\n\n  public toggleCollapse(isCollapsed: boolean) {\n    this.facet.options.enableCollapse && this.collapseToggle.toggleButtons(isCollapsed);\n  }\n\n  private createTitle() {\n    return $$(\n      'h2',\n      {\n        className: 'coveo-dynamic-facet-header-title',\n        ariaLabel: `${l('FacetTitle', this.facet.options.title)}`\n      },\n      $$('span', { ariaHidden: true, title: this.facet.options.title }, this.facet.options.title)\n    );\n  }\n\n  private createWaitAnimation() {\n    this.waitAnimation = $$('div', { className: 'coveo-dynamic-facet-header-wait-animation' }, SVGIcons.icons.loading);\n    SVGDom.addClassToSVGInContainer(this.waitAnimation.el, 'coveo-dynamic-facet-header-wait-animation-svg');\n    this.waitAnimation.toggle(false);\n\n    return this.waitAnimation.el;\n  }\n\n  public toggleClear(visible: boolean) {\n    this.clearButton.toggle(visible);\n  }\n\n  public showLoading() {\n    clearTimeout(this.showLoadingTimeout);\n    this.showLoadingTimeout = window.setTimeout(() => this.waitAnimation.toggle(true), DynamicFacetHeader.showLoadingDelay);\n  }\n\n  public hideLoading() {\n    clearTimeout(this.showLoadingTimeout);\n    this.waitAnimation.toggle(false);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/DynamicFacet/DynamicFacetHeader/DynamicFacetHeader.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/DynamicFacet/_DynamicFacetHeader.scss\n// module id = 472\n// module chunks = 2 9 10 11 78","import { l } from '../../../strings/Strings';\nimport { SVGIcons } from '../../../utils/SVGIcons';\nimport { $$ } from '../../../utils/Dom';\nimport { DynamicFacetHeaderButton } from './DynamicFacetHeaderButton';\nimport { DynamicFacet } from '../DynamicFacet';\n\nexport interface IDynamicFacetCollapseToggleOptions {\n  collapsed: boolean;\n}\n\nexport class DynamicFacetHeaderCollapseToggle {\n  public element: HTMLElement;\n  private collapseButton: DynamicFacetHeaderButton;\n  private expandButton: DynamicFacetHeaderButton;\n\n  constructor(private facet: DynamicFacet) {\n    this.create();\n  }\n\n  private create() {\n    const parent = $$('div');\n\n    this.collapseButton = new DynamicFacetHeaderButton({\n      label: l('Collapse'),\n      iconSVG: SVGIcons.icons.arrowUp,\n      iconClassName: 'coveo-dynamic-facet-collapse-toggle-svg',\n      className: 'coveo-dynamic-facet-header-collapse',\n      shouldDisplay: true,\n      action: () => this.facet.collapse()\n    });\n    this.expandButton = new DynamicFacetHeaderButton({\n      label: l('Expand'),\n      iconSVG: SVGIcons.icons.arrowDown,\n      iconClassName: 'coveo-dynamic-facet-collapse-toggle-svg',\n      className: 'coveo-dynamic-facet-header-expand',\n      shouldDisplay: false,\n      action: () => this.facet.expand()\n    });\n\n    parent.append(this.collapseButton.element);\n    parent.append(this.expandButton.element);\n\n    this.element = parent.el;\n  }\n\n  public toggleButtons(isCollapsed: boolean) {\n    this.collapseButton.toggle(!isCollapsed);\n    this.expandButton.toggle(isCollapsed);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/DynamicFacet/DynamicFacetHeader/DynamicFacetHeaderCollapseToggle.ts","import 'styling/DynamicFacet/_DynamicFacetValues';\nimport { $$ } from '../../../utils/Dom';\nimport { findWhere, find } from 'underscore';\nimport { DynamicFacetValue } from './DynamicFacetValue';\nimport { DynamicFacet } from '../DynamicFacet';\nimport { IFacetResponse } from '../../../rest/Facet/FacetResponse';\nimport { FacetValueState } from '../../../rest/Facet/FacetValueState';\nimport { l } from '../../../strings/Strings';\n\nexport class DynamicFacetValues {\n  private facetValues: DynamicFacetValue[];\n  private list = $$('ul', { className: 'coveo-dynamic-facet-values' }).el;\n  private moreValuesAvailable: boolean;\n\n  constructor(private facet: DynamicFacet) {\n    this.resetValues();\n  }\n\n  public createFromResponse(response: IFacetResponse) {\n    this.moreValuesAvailable = response.moreValuesAvailable;\n    this.facetValues = response.values.map(\n      (facetValue, index) =>\n        new DynamicFacetValue(\n          {\n            value: facetValue.value,\n            numberOfResults: facetValue.numberOfResults,\n            state: facetValue.state,\n            position: index + 1\n          },\n          this.facet\n        )\n    );\n  }\n\n  public resetValues() {\n    this.moreValuesAvailable = false;\n    this.facetValues = [];\n  }\n\n  public get allFacetValues() {\n    return this.facetValues;\n  }\n\n  public get allValues() {\n    return this.facetValues.map(facetValue => facetValue.value);\n  }\n\n  public get selectedValues() {\n    return this.facetValues.filter(value => value.isSelected).map(({ value }) => value);\n  }\n\n  public get activeFacetValues() {\n    return this.facetValues.filter(value => !value.isIdle);\n  }\n\n  public get hasSelectedValues() {\n    return !!findWhere(this.facetValues, { state: FacetValueState.selected });\n  }\n\n  public get hasActiveValues() {\n    return !!this.activeFacetValues.length;\n  }\n\n  public get hasIdleValues() {\n    return !!findWhere(this.facetValues, { state: FacetValueState.idle });\n  }\n\n  public clearAll() {\n    this.facetValues.forEach(value => value.deselect());\n  }\n\n  public get isEmpty() {\n    return !this.facetValues.length;\n  }\n\n  public hasSelectedValue(arg: string | DynamicFacetValue) {\n    const value = typeof arg === 'string' ? arg : arg.value;\n    const foundValue = find(this.facetValues, facetValue => facetValue.equals(value));\n    return foundValue && foundValue.isSelected;\n  }\n\n  public get(arg: string | DynamicFacetValue) {\n    const value = typeof arg === 'string' ? arg : arg.value;\n    const facetValue = find(this.facetValues, facetValue => facetValue.equals(value));\n\n    if (facetValue) {\n      return facetValue;\n    }\n\n    const position = this.facetValues.length + 1;\n    const state = FacetValueState.idle;\n    const newFacetValue = new DynamicFacetValue({ value, state, numberOfResults: 0, position }, this.facet);\n    this.facetValues.push(newFacetValue);\n    return newFacetValue;\n  }\n\n  private buildShowLess() {\n    const showLessBtn = $$('button', { className: 'coveo-dynamic-facet-show-less' }, l('ShowLess'));\n    const showLess = $$('li', null, showLessBtn);\n    showLessBtn.on('click', () => {\n      this.facet.enableFreezeFacetOrderFlag();\n      this.facet.showLessValues();\n    });\n    return showLess.el;\n  }\n\n  private buildShowMore() {\n    const showMoreBtn = $$('button', { className: 'coveo-dynamic-facet-show-more' }, l('ShowMore'));\n    const showMore = $$('li', null, showMoreBtn);\n    showMoreBtn.on('click', () => {\n      this.facet.enableFreezeFacetOrderFlag();\n      this.facet.showMoreValues();\n    });\n    return showMore.el;\n  }\n\n  private get shouldEnableShowLess() {\n    const hasMoreValuesThenDefault = this.facetValues.length > this.facet.options.numberOfValues;\n\n    return hasMoreValuesThenDefault && this.hasIdleValues;\n  }\n\n  public render() {\n    const fragment = document.createDocumentFragment();\n    $$(this.list).empty();\n\n    this.facetValues.forEach(facetValue => {\n      fragment.appendChild(facetValue.render());\n    });\n\n    if (this.shouldEnableShowLess) {\n      fragment.appendChild(this.buildShowLess());\n    }\n\n    if (this.moreValuesAvailable) {\n      fragment.appendChild(this.buildShowMore());\n    }\n\n    this.list.appendChild(fragment);\n    return this.list;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/DynamicFacet/DynamicFacetValues/DynamicFacetValues.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/DynamicFacet/_DynamicFacetValues.scss\n// module id = 475\n// module chunks = 2 9 10 11 78","import * as Globalize from 'globalize';\nimport { DynamicFacetValueRenderer } from './DynamicFacetValueRenderer';\nimport { FacetUtils } from '../../Facet/FacetUtils';\nimport { DynamicFacet } from '../DynamicFacet';\nimport { FacetValueState } from '../../../rest/Facet/FacetValueState';\nimport { IAnalyticsDynamicFacetMeta } from '../../Analytics/AnalyticsActionListMeta';\n\nexport interface IDynamicFacetValue {\n  value: string;\n  state: FacetValueState;\n  numberOfResults: number;\n  position: number;\n}\n\nexport class DynamicFacetValue implements IDynamicFacetValue {\n  public value: string;\n  public state: FacetValueState;\n  public numberOfResults: number;\n  public position: number;\n  private renderer: DynamicFacetValueRenderer;\n\n  constructor({ value, state, numberOfResults, position }: IDynamicFacetValue, private facet: DynamicFacet) {\n    this.value = value;\n    this.state = state;\n    this.numberOfResults = numberOfResults;\n    this.position = position;\n    this.renderer = new DynamicFacetValueRenderer(this, facet);\n  }\n\n  public get isSelected() {\n    return this.state === FacetValueState.selected;\n  }\n\n  public get isIdle() {\n    return this.state === FacetValueState.idle;\n  }\n\n  public toggleSelect() {\n    this.state = this.state === FacetValueState.selected ? FacetValueState.idle : FacetValueState.selected;\n  }\n\n  public select() {\n    this.state = FacetValueState.selected;\n  }\n\n  public deselect() {\n    this.state = FacetValueState.idle;\n  }\n\n  public equals(arg: string | DynamicFacetValue) {\n    const value = typeof arg === 'string' ? arg : arg.value;\n    return value.toLowerCase() === this.value.toLowerCase();\n  }\n\n  public get formattedCount(): string {\n    return Globalize.format(this.numberOfResults, 'n0');\n  }\n\n  public get valueCaption(): string {\n    let returnValue = FacetUtils.tryToGetTranslatedCaption(<string>this.facet.options.field, this.value);\n\n    if (this.facet.options.valueCaption && typeof this.facet.options.valueCaption === 'object') {\n      returnValue = this.facet.options.valueCaption[this.value] || returnValue;\n    }\n\n    return returnValue;\n  }\n\n  public get analyticsMeta(): IAnalyticsDynamicFacetMeta {\n    return {\n      ...this.facet.basicAnalyticsFacetState,\n      value: this.value,\n      valuePosition: this.position,\n      displayValue: this.valueCaption,\n      state: this.state\n    };\n  }\n\n  public render() {\n    return this.renderer.render();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/DynamicFacet/DynamicFacetValues/DynamicFacetValue.ts","import { $$, Dom } from '../../../utils/Dom';\nimport { DynamicFacet } from '../DynamicFacet';\nimport { DynamicFacetValue } from './DynamicFacetValue';\nimport { Checkbox } from '../../FormWidgets/Checkbox';\nimport { l } from '../../../strings/Strings';\nimport { analyticsActionCauseList } from '../../Analytics/AnalyticsActionListMeta';\nimport { FacetValueState } from '../../../rest/Facet/FacetValueState';\n\nexport class DynamicFacetValueRenderer {\n  private dom: Dom;\n  private checkbox: Checkbox;\n\n  constructor(private facetValue: DynamicFacetValue, private facet: DynamicFacet) {}\n\n  public render() {\n    this.dom = $$('li', {\n      className: 'coveo-dynamic-facet-value coveo-dynamic-facet-selectable',\n      dataValue: this.facetValue.value\n    });\n\n    this.createCheckbox();\n    this.dom.append(this.checkbox.getElement());\n\n    this.addFocusAndBlurEventListeners();\n\n    this.toggleSelectedClass();\n\n    return this.dom.el;\n  }\n\n  private toggleSelectedClass() {\n    this.dom.toggleClass('coveo-selected', this.facetValue.isSelected);\n  }\n\n  private createCheckbox() {\n    this.checkbox = new Checkbox(\n      () => this.selectAction(),\n      this.facetValue.valueCaption,\n      this.ariaLabel,\n      `(${this.facetValue.formattedCount})`\n    );\n\n    const label = $$(this.checkbox.getElement()).find('.coveo-checkbox-span-label');\n    const labelSuffix = $$(this.checkbox.getElement()).find('.coveo-checkbox-span-label-suffix');\n\n    if (label && labelSuffix) {\n      label.setAttribute('title', this.facetValue.valueCaption);\n      label.setAttribute('aria-hidden', 'true');\n      labelSuffix.setAttribute('aria-hidden', 'true');\n    }\n\n    this.facetValue.isSelected && this.checkbox.select(false);\n  }\n\n  private addFocusAndBlurEventListeners() {\n    const checkboxButton = $$(this.checkbox.getElement()).find('button');\n    $$(checkboxButton).on('focusin', () => this.dom.addClass('coveo-focused'));\n    $$(checkboxButton).on('focusout', () => this.dom.removeClass('coveo-focused'));\n  }\n\n  private selectAction = () => {\n    this.facet.pinFacetPosition();\n    this.facet.toggleSelectValue(this.facetValue.value);\n    this.toggleSelectedClass();\n    this.facet.enableFreezeCurrentValuesFlag();\n    this.facet.enableFreezeFacetOrderFlag();\n    this.facet.triggerNewQuery(() => this.logActionToAnalytics());\n  };\n\n  private logActionToAnalytics() {\n    const action =\n      this.facetValue.state === FacetValueState.selected\n        ? analyticsActionCauseList.dynamicFacetSelect\n        : analyticsActionCauseList.dynamicFacetDeselect;\n\n    this.facet.logAnalyticsEvent(action, this.facetValue.analyticsMeta);\n  }\n\n  private get ariaLabel() {\n    const selectOrUnselect = !this.facetValue.isSelected ? 'SelectValueWithResultCount' : 'UnselectValueWithResultCount';\n    const resultCount = l('ResultCount', this.facetValue.formattedCount);\n\n    return `${l(selectOrUnselect, this.facetValue.valueCaption, resultCount)}`;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/DynamicFacet/DynamicFacetValues/DynamicFacetValueRenderer.ts","import { DynamicFacet } from '../ui/DynamicFacet/DynamicFacet';\nimport { QueryBuilder } from '../ui/Base/QueryBuilder';\nimport { Assert } from '../misc/Assert';\nimport { IFacetRequest, IFacetRequestValue } from '../rest/Facet/FacetRequest';\nimport { FacetSortCriteria } from '../rest/Facet/FacetSortCriteria';\nimport { QueryEvents } from '../events/QueryEvents';\n\nexport class DynamicFacetQueryController {\n  private numberOfValuesToRequest: number;\n  private freezeCurrentValues = false;\n  private freezeFacetOrder = false;\n\n  constructor(private facet: DynamicFacet) {\n    this.resetNumberOfValuesToRequest();\n    this.resetFreezeCurrentValuesDuringQuery();\n  }\n\n  private resetFreezeCurrentValuesDuringQuery() {\n    this.facet.bind.onRootElement(QueryEvents.duringQuery, () => {\n      this.freezeCurrentValues = false;\n      this.freezeFacetOrder = false;\n    });\n  }\n\n  public increaseNumberOfValuesToRequest(additionalNumberOfValues: number) {\n    this.numberOfValuesToRequest += additionalNumberOfValues;\n  }\n\n  public resetNumberOfValuesToRequest() {\n    this.numberOfValuesToRequest = this.facet.options.numberOfValues;\n  }\n\n  public enableFreezeCurrentValuesFlag() {\n    this.freezeCurrentValues = true;\n  }\n\n  public enableFreezeFacetOrderFlag() {\n    this.freezeFacetOrder = true;\n  }\n\n  /**\n   * Build the facets request for the DynamicFacet, and insert it in the query builder\n   * @param queryBuilder\n   */\n  public putFacetIntoQueryBuilder(queryBuilder: QueryBuilder) {\n    Assert.exists(queryBuilder);\n\n    const facetRequest: IFacetRequest = {\n      facetId: this.facet.options.id,\n      field: this.facet.fieldName,\n      sortCriteria: this.facet.options.sortCriteria as FacetSortCriteria,\n      currentValues: this.currentValues,\n      numberOfValues: this.numberOfValues,\n      freezeCurrentValues: this.freezeCurrentValues,\n      isFieldExpanded: this.numberOfValuesToRequest > this.facet.options.numberOfValues\n    };\n\n    queryBuilder.facetRequests.push(facetRequest);\n    if (this.freezeFacetOrder) {\n      queryBuilder.facetOptions.freezeFacetOrder = true;\n    }\n  }\n\n  private get currentValues(): IFacetRequestValue[] {\n    return this.facet.values.allFacetValues.map(({ value, state }) => ({\n      value,\n      state\n    }));\n  }\n\n  private get numberOfValues() {\n    if (this.freezeCurrentValues) {\n      return this.currentValues.length;\n    }\n\n    return Math.max(this.numberOfValuesToRequest, this.facet.values.activeFacetValues.length);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/DynamicFacetQueryController.ts","/**\n * The allowed sort criteria for a Search API\n * [facet request]{@link IFacetRequest}.\n */\nexport enum FacetSortCriteria {\n  /**\n   * Sort facet values in descending score order.\n   *\n   * Facet value scores are based on number of occurrences and position in the\n   * ranked query result set.\n   *\n   * The Coveo Machine Learning dynamic navigation experience feature only\n   * works with this sort criterion.\n   */\n  score = 'score',\n  /**\n   * Sort facet values in ascending alphanumeric order.\n   */\n  alphanumeric = 'alphanumeric',\n  occurrences = 'occurrences'\n}\n\nexport function isFacetSortCriteria(sortCriteria: string) {\n  return !!FacetSortCriteria[sortCriteria];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/rest/Facet/FacetSortCriteria.ts","import { Utils } from '../../utils/Utils';\nimport { $$, Win } from '../../utils/Dom';\n\nexport class FacetPadding {\n  private pinnedTopPosition: number;\n  private topSpaceElement: HTMLElement;\n  private topSpaceClass = 'coveo-topSpace';\n  private animationClass = 'coveo-with-animation';\n\n  constructor(private element: HTMLElement, private paddingContainer: HTMLElement) {\n    this.initTopSpacer();\n  }\n\n  private get isPinned(): boolean {\n    return Utils.exists(this.pinnedTopPosition);\n  }\n\n  private initTopSpacer() {\n    $$(this.paddingContainer).on('mouseleave', () => this.unpin());\n\n    this.topSpaceElement = $$(this.paddingContainer).find(`.${this.topSpaceClass}`);\n    if (!this.topSpaceElement) {\n      this.createTopSpace();\n    }\n  }\n\n  private createTopSpace() {\n    this.topSpaceElement = $$('div', { className: this.topSpaceClass }).el;\n    $$(this.topSpaceElement).insertBefore(<HTMLElement>this.paddingContainer.firstChild);\n  }\n\n  private get facetTopPosition() {\n    return this.element.getBoundingClientRect().top;\n  }\n\n  public pin() {\n    this.pinnedTopPosition = this.facetTopPosition;\n  }\n\n  private setTopSpaceHeight(height: number) {\n    this.topSpaceElement.style.height = `${height}px`;\n  }\n\n  private unpin() {\n    if (!this.isPinned) {\n      $$(this.topSpaceElement).addClass(this.animationClass);\n      this.setTopSpaceHeight(0);\n    }\n\n    this.pinnedTopPosition = null;\n  }\n\n  private get scrollYPosition() {\n    return new Win(window).scrollY();\n  }\n\n  private get offset() {\n    return this.facetTopPosition - this.pinnedTopPosition;\n  }\n\n  public ensurePinnedFacetHasNotMoved() {\n    if (!this.isPinned) {\n      return;\n    }\n\n    $$(this.topSpaceElement).removeClass(this.animationClass);\n    this.setTopSpaceHeight(0);\n\n    window.scrollTo(0, this.scrollYPosition + this.offset);\n\n    if (this.offset < 0) {\n      this.setTopSpaceHeight(this.offset * -1);\n    }\n\n    this.pinnedTopPosition = null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/FacetPadding/FacetPadding.ts","import { ComponentOptions } from '../Base/ComponentOptions';\n\n/**\n * ResponsiveFacets options\n */\nexport const ResponsiveFacetOptions = {\n  /**\n   * Specifies whether to enable *responsive mode* for facets. Setting this options to `false` on any `Facet`, or\n   * [`FacetSlider`]{@link FacetSlider} component in a search interface disables responsive mode for all other facets\n   * in the search interface.\n   *\n   * Responsive mode displays all facets under a single dropdown button whenever the width of the HTML element which\n   * the search interface is bound to reaches or falls behind a certain threshold (see\n   * {@link SearchInterface.responsiveComponents}).\n   *\n   * See also the [`dropdownHeaderLabel`]{@link Facet.options.dropdownHeaderLabel} option.\n   *\n   * Default value is `true`.\n   */\n  enableResponsiveMode: ComponentOptions.buildBooleanOption({ defaultValue: true, section: 'ResponsiveOptions' }),\n  responsiveBreakpoint: ComponentOptions.buildNumberOption({\n    deprecated:\n      'This option is exposed for legacy reasons. It is not recommended to use this option. Instead, use `SearchInterface.options.responsiveMediumBreakpoint` options exposed on the `SearchInterface`.'\n  }),\n  /**\n   * If the [`enableResponsiveMode`]{@link Facet.options.enableResponsiveMode} option is `true` for all facets and\n   * {@link FacetSlider.options.enableResponsiveMode} is also `true` for all sliders, specifies the label of the\n   * dropdown button that allows to display the facets when in responsive mode.\n   *\n   * If more than one `Facet` or {@link FacetSlider} component in the search interface specifies a value for this\n   * option, the framework uses the first occurrence of the option.\n   *\n   * Default value is `Filters`.\n   */\n  dropdownHeaderLabel: ComponentOptions.buildLocalizedStringOption({ section: 'ResponsiveOptions' })\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveFacetOptions.ts"],"sourceRoot":""}