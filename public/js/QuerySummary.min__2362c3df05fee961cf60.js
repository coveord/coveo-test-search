webpackJsonpCoveo__temporary([45],{203:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),i=n(8),r=n(10),l=n(2),a=n(5),u=n(7),p=n(9),h=n(1),c=n(13),y=n(25),d=n(357),g=n(3),f=n(0),m=n(27);n(447),t.noResultsCssClass="coveo-show-if-no-results";var C=function(e){function n(t,o,s){var a=e.call(this,t,n.ID,s)||this;return a.element=t,a.options=o,a.options=i.ComponentOptions.initComponentOptions(t,n,o),a.bind.onRootElement(r.QueryEvents.querySuccess,function(e){return a.handleQuerySuccess(e)}),a.bind.onRootElement(r.QueryEvents.queryError,function(){return a.hide()}),a.hide(),a.textContainer=l.$$("span").el,l.$$(a.element).prepend(a.textContainer),a}return o(n,e),n.prototype.hide=function(){l.$$(this.element).addClass("coveo-hidden")},n.prototype.show=function(){l.$$(this.element).removeClass("coveo-hidden")},n.prototype.render=function(e,t){if(l.$$(this.textContainer).empty(),this.show(),this.updateNoResultsSnapshot(),this.hideNoResultsPage(),this.options.onlyDisplaySearchTips||(this.isInfiniteScrollingMode()?this.renderSummaryInInfiniteScrollingMode(e,t):this.renderSummaryInStandardMode(e,t)),null!=t.exception&&null!=t.exception.code){var n=("QueryException"+t.exception.code).toLocaleString();this.textContainer.innerHTML=u.l("QueryException",n)}else 0==t.results.length?(this.updateQueryTagsInNoResultsContainer(),this.displayInfoOnNoResults()):this.lastKnownGoodState=this.queryStateModel.getAttributes()},n.prototype.handleQuerySuccess=function(e){a.Assert.exists(e),this.render(e.query,e.results)},n.prototype.isInfiniteScrollingMode=function(){var e=l.$$(this.root).findAll("."+s.Component.computeCssClassNameForType("ResultList"));return f.any(e,function(e){return m.get(e).options.enableInfiniteScroll})},n.prototype.formatSummary=function(e,t){var n=y.format(e.firstResult+1,"n0"),o=y.format(e.firstResult+t.results.length,"n0"),s=y.format(t.totalCountFiltered,"n0"),i=e.q?f.escape(e.q.trim()):"";return{first:n,last:o,totalCount:s,query:i,highlightFirst:l.$$("span",{className:"coveo-highlight"},n).el,highlightLast:l.$$("span",{className:"coveo-highlight"},o).el,highlightTotal:l.$$("span",{className:"coveo-highlight"},s).el,highlightQuery:l.$$("span",{className:"coveo-highlight"},i).el}},n.prototype.renderSummaryInStandardMode=function(e,t){if(t.results.length>0){var n=this.formatSummary(e,t),o=n.query,s=n.highlightFirst,i=n.highlightLast,r=n.highlightTotal,l=n.highlightQuery;this.textContainer.innerHTML=o?u.l("ShowingResultsOfWithQuery",s.outerHTML,i.outerHTML,r.outerHTML,l.outerHTML,t.results.length):u.l("ShowingResultsOf",s.outerHTML,i.outerHTML,r.outerHTML,t.results.length)}},n.prototype.renderSummaryInInfiniteScrollingMode=function(e,t){if(t.results.length>0){var n=this.formatSummary(e,t),o=n.query,s=n.highlightQuery,i=n.highlightTotal;this.textContainer.innerHTML=o?u.l("ShowingResultsWithQuery",i.outerHTML,s.outerHTML,t.results.length):u.l("ShowingResults",i.outerHTML,t.results.length)}},n.prototype.updateNoResultsSnapshot=function(){var e=this.getNoResultsContainer();null==this.noResultsSnapshot&&e&&(this.noResultsSnapshot=e.innerHTML)},n.prototype.updateQueryTagsInNoResultsContainer=function(){var e=this.getNoResultsContainer();e&&(e.innerHTML=this.parseQueryTags(this.noResultsSnapshot))},n.prototype.parseQueryTags=function(e){if(!e)return"";var t='<span class="coveo-highlight">'+this.queryEscaped+"</span>";return e.replace(new RegExp(/\$\{query\}/g),t)},Object.defineProperty(n.prototype,"queryEscaped",{get:function(){return f.escape(this.queryStateModel.get(c.QueryStateModel.attributesEnum.q))},enumerable:!0,configurable:!0}),n.prototype.displayInfoOnNoResults=function(){if(this.showNoResultsPage(),this.options.enableNoResultsFoundMessage){var e=this.getNoResultsFoundMessageElement();this.textContainer.appendChild(e.el)}if(this.options.enableCancelLastAction){var t=this.getCancelLastActionElement();this.textContainer.appendChild(t.el)}if(this.options.enableSearchTips){var n=this.getSearchTipsTitleElement(),o=this.getSearchTipsListElement();this.textContainer.appendChild(n.el),this.textContainer.appendChild(o.el)}},n.prototype.hideNoResultsPage=function(){this.getAllNoResultsContainer().forEach(function(e){l.$$(e).removeClass("coveo-no-results")})},n.prototype.showNoResultsPage=function(){this.getAllNoResultsContainer().forEach(function(e){l.$$(e).addClass("coveo-no-results")})},n.prototype.getNoResultsContainer=function(){return l.$$(this.element).find("."+t.noResultsCssClass)},n.prototype.getAllNoResultsContainer=function(){return l.$$(this.element).findAll("."+t.noResultsCssClass)},n.prototype.getNoResultsFoundMessageElement=function(){var e=this.parseQueryTags(this.options.noResultsFoundMessage);return l.$$("div",{className:"coveo-query-summary-no-results-string"},e)},n.prototype.getCancelLastActionElement=function(){var e=this,t=l.$$("div",{className:"coveo-query-summary-cancel-last"},u.l("CancelLastAction"));return t.on("click",function(){e.usageAnalytics.logCustomEvent(p.analyticsActionCauseList.noResultsBack,{},e.root),e.usageAnalytics.logSearchEvent(p.analyticsActionCauseList.noResultsBack,{}),e.lastKnownGoodState?(e.queryStateModel.reset(),e.queryStateModel.setMultiple(e.lastKnownGoodState),l.$$(e.root).trigger(d.QuerySummaryEvents.cancelLastAction),e.queryController.executeQuery()):history.back()}),t},n.prototype.getSearchTipsTitleElement=function(){var e=l.$$("div",{className:"coveo-query-summary-search-tips-info"});return e.text(u.l("SearchTips")),e},n.prototype.getSearchTipsListElement=function(){var e=l.$$("ul"),t=l.$$("li");t.text(u.l("CheckSpelling"));var n=l.$$("li");if(n.text(u.l("TryUsingFewerKeywords")),e.el.appendChild(t.el),e.el.appendChild(n.el),this.queryStateModel.atLeastOneFacetIsActive()){var o=l.$$("li");o.text(u.l("SelectFewerFilters")),e.el.appendChild(o.el)}return e},n.ID="QuerySummary",n.doExport=function(){g.exportGlobally({QuerySummary:n})},n.options={onlyDisplaySearchTips:i.ComponentOptions.buildBooleanOption({defaultValue:!1}),enableNoResultsFoundMessage:i.ComponentOptions.buildBooleanOption({defaultValue:!0}),noResultsFoundMessage:i.ComponentOptions.buildStringOption({defaultValue:u.l("noResultFor","${query}"),depend:"enableNoResultsFoundMessage"}),enableCancelLastAction:i.ComponentOptions.buildBooleanOption({defaultValue:!0}),enableSearchTips:i.ComponentOptions.buildBooleanOption({defaultValue:!0})},n}(s.Component);t.QuerySummary=C,h.Initialization.registerAutoCreateComponent(C)},357:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.cancelLastAction="cancelLastAction",e}();t.QuerySummaryEvents=o},447:function(e,t){}});