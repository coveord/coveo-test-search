{"version":3,"sources":["QueryDuration.min__5f3280c404a1ee75a113.js","./src/ui/QueryDuration/QueryDuration.ts"],"names":["webpackJsonpCoveo__temporary","264","module","exports","__webpack_require__","__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","element","options","bindings","QueryDuration","ID","ComponentOptions","initComponentOptions","bind","onRootElement","QueryEvents","querySuccess","data","handleQuerySuccess","queryError","$$","hide","style","display","textContainer","el","appendChild","_this","disabled","results","length","Assert","exists","tooltip","l","formatQueryDuration","duration","searchAPIDuration","indexDuration","join","textContent","setAttribute","durationInMillis","undefined","seconds","Math","max","String","Globalize","format","doExport","exportGlobally","Component","Initialization","registerAutoCreateComponent","634"],"mappings":"AAAAA,8BAA8B,KAExBC,IACA,SAAUC,EAAQC,EAASC,GAEjC,YAEA,IAAIC,GAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBC,OAAOC,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOV,KAAKW,YAAcL,EADnCL,EAAcK,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAaL,OAAOW,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,OAGvFR,QAAOY,eAAejB,EAAS,cAAgBkB,OAAO,GCjBtD,YAEA,OACA,QACA,OACA,OACA,OACA,OACA,QACA,MAEA,OAYA,mBAqBE,WAAmBC,EAA6BC,EAAiCC,GAAjF,MACE,YAAMF,EAASG,EAAcC,GAAIF,IAAS,IDWtC,OCZa,GAAAF,UAA6B,EAAAC,UAG9C,EAAKA,QAAU,EAAAI,iBAAiBC,qBAAqBN,EAASG,EAAeF,GAE7E,EAAKM,KAAKC,cAAc,EAAAC,YAAYC,aAAc,SAACC,GAAiC,SAAKC,mBAAmBD,KAC5G,EAAKJ,KAAKC,cAAc,EAAAC,YAAYI,WAAY,WAAM,SAAAC,GAAG,EAAKd,SAASe,SACvE,EAAKf,QAAQgB,MAAMC,QAAU,OAC7B,EAAKC,cAAgB,EAAAJ,GAAG,QAAQK,GAChC,EAAKnB,QAAQoB,YAAY,EAAKF,eDGnBG,EC8Bf,MA/DmC,QAiCzB,YAAAT,mBAAR,SAA2BD,GACzB,IAAK3B,KAAKsC,UAAYX,EAAKY,QAAQA,QAAQC,OAAS,EAAG,CACrD,EAAAC,OAAOC,OAAOf,EAEd,IAAIgB,IACF,EAAAC,EAAE,WAAY5C,KAAK6C,oBAAoBlB,EAAKY,QAAQO,WACpD,EAAAF,EAAE,oBAAqB5C,KAAK6C,oBAAoBlB,EAAKY,QAAQQ,oBAC7D,EAAAH,EAAE,gBAAiB5C,KAAK6C,oBAAoBlB,EAAKY,QAAQS,iBACzDC,KAAK,KAEPjD,MAAKkC,cAAcgB,YAAclD,KAAK6C,oBAAoBlB,EAAKY,QAAQO,UACvE9C,KAAKgB,QAAQmC,aAAa,QAASR,GACnC3C,KAAKgB,QAAQgB,MAAMC,QAAU,aAE7BjC,MAAKgB,QAAQgB,MAAMC,QAAU,QAIzB,YAAAY,oBAAR,SAA4BO,GAC1B,OAAwBC,IAApBD,EACF,MAAO,GAAAR,EAAE,cAET,IAAIU,GAAUC,KAAKC,IAAIJ,EAAmB,IAAM,IAChD,OAAyB,OAArBK,OAAe,OACV,EAAAb,EAAE,UAAWc,EAAUC,OAAOL,EAAS,MAAOA,GAAS,GAEvD,EAAAV,EAAE,UAAWc,EAAUC,OAAOL,EAAS,MAAOA,IA1DpD,EAAAlC,GAAK,gBAEL,EAAAwC,SAAW,WAChB,EAAAC,gBACE1C,cAAeA,KAIZ,EAAAF,WAsDT,GA/DmC,EAAA6C,UAAtB,GAAA3C,gBAgEb,EAAA4C,eAAeC,4BAA4B7C,IDgBrC8C,IACA,SAAUrE,EAAQC","file":"QueryDuration.min__5f3280c404a1ee75a113.js","sourcesContent":["webpackJsonpCoveo__temporary([65],{\n\n/***/ 264:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(7);\r\nvar ComponentOptions_1 = __webpack_require__(8);\r\nvar QueryEvents_1 = __webpack_require__(11);\r\nvar Assert_1 = __webpack_require__(5);\r\nvar Dom_1 = __webpack_require__(1);\r\nvar Strings_1 = __webpack_require__(6);\r\nvar Initialization_1 = __webpack_require__(2);\r\nvar Globalize = __webpack_require__(23);\r\nvar GlobalExports_1 = __webpack_require__(3);\r\n__webpack_require__(634);\r\n/**\r\n * The QueryDuration component displays the duration of the last query execution.\r\n *\r\n * When a {@link QueryEvents.querySuccess} event is triggered, the QueryDuration component becomes visible. It also\r\n * displays the global duration, the index duration, and the client duration in a single tooltip.\r\n *\r\n * If a {@link QueryEvents.queryError} event is triggered, the QueryDuration component becomes hidden.\r\n */\r\nvar QueryDuration = /** @class */ (function (_super) {\r\n    __extends(QueryDuration, _super);\r\n    /**\r\n     * Creates a new QueryDuration component.\r\n     * Binds handlers on the {@link QueryEvents.querySuccess} and {@link QueryEvents.queryError} events.\r\n     * @param element The HTMLElement on which to instantiate the component.\r\n     * @param options The options for the QueryDuration component.\r\n     * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n     * automatically resolved (with a slower execution time).\r\n     */\r\n    function QueryDuration(element, options, bindings) {\r\n        var _this = _super.call(this, element, QueryDuration.ID, bindings) || this;\r\n        _this.element = element;\r\n        _this.options = options;\r\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, QueryDuration, options);\r\n        _this.bind.onRootElement(QueryEvents_1.QueryEvents.querySuccess, function (data) { return _this.handleQuerySuccess(data); });\r\n        _this.bind.onRootElement(QueryEvents_1.QueryEvents.queryError, function () { return Dom_1.$$(_this.element).hide(); });\r\n        _this.element.style.display = 'none';\r\n        _this.textContainer = Dom_1.$$('span').el;\r\n        _this.element.appendChild(_this.textContainer);\r\n        return _this;\r\n    }\r\n    QueryDuration.prototype.handleQuerySuccess = function (data) {\r\n        if (!this.disabled && data.results.results.length > 0) {\r\n            Assert_1.Assert.exists(data);\r\n            var tooltip = [\r\n                Strings_1.l('Duration', this.formatQueryDuration(data.results.duration)),\r\n                Strings_1.l('SearchAPIDuration', this.formatQueryDuration(data.results.searchAPIDuration)),\r\n                Strings_1.l('IndexDuration', this.formatQueryDuration(data.results.indexDuration))\r\n            ].join('\\n');\r\n            this.textContainer.textContent = this.formatQueryDuration(data.results.duration);\r\n            this.element.setAttribute('title', tooltip);\r\n            this.element.style.display = 'inline';\r\n        }\r\n        else {\r\n            this.element.style.display = 'none';\r\n        }\r\n    };\r\n    QueryDuration.prototype.formatQueryDuration = function (durationInMillis) {\r\n        if (durationInMillis == undefined) {\r\n            return Strings_1.l('Unavailable');\r\n        }\r\n        else {\r\n            var seconds = Math.max(durationInMillis / 1000, 0.01);\r\n            if (String['locale'] === 'en') {\r\n                return Strings_1.l('Seconds', Globalize.format(seconds, 'n2'), seconds, true);\r\n            }\r\n            else {\r\n                return Strings_1.l('Seconds', Globalize.format(seconds, 'n2'), seconds);\r\n            }\r\n        }\r\n    };\r\n    QueryDuration.ID = 'QueryDuration';\r\n    QueryDuration.doExport = function () {\r\n        GlobalExports_1.exportGlobally({\r\n            QueryDuration: QueryDuration\r\n        });\r\n    };\r\n    QueryDuration.options = {};\r\n    return QueryDuration;\r\n}(Component_1.Component));\r\nexports.QueryDuration = QueryDuration;\r\nInitialization_1.Initialization.registerAutoCreateComponent(QueryDuration);\r\n\n\n/***/ }),\n\n/***/ 634:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// QueryDuration.min__5f3280c404a1ee75a113.js","import { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { QueryEvents, IQuerySuccessEventArgs } from '../../events/QueryEvents';\r\nimport { Assert } from '../../misc/Assert';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { l } from '../../strings/Strings';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport * as Globalize from 'globalize';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\nimport 'styling/_QueryDuration';\r\n\r\nexport interface IQueryDurationOptions {}\r\n\r\n/**\r\n * The QueryDuration component displays the duration of the last query execution.\r\n *\r\n * When a {@link QueryEvents.querySuccess} event is triggered, the QueryDuration component becomes visible. It also\r\n * displays the global duration, the index duration, and the client duration in a single tooltip.\r\n *\r\n * If a {@link QueryEvents.queryError} event is triggered, the QueryDuration component becomes hidden.\r\n */\r\nexport class QueryDuration extends Component {\r\n  static ID = 'QueryDuration';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      QueryDuration: QueryDuration\r\n    });\r\n  };\r\n\r\n  static options: IQueryDurationOptions = {};\r\n\r\n  private textContainer: HTMLElement;\r\n\r\n  /**\r\n   * Creates a new QueryDuration component.\r\n   * Binds handlers on the {@link QueryEvents.querySuccess} and {@link QueryEvents.queryError} events.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the QueryDuration component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   */\r\n  constructor(public element: HTMLElement, public options?: IQueryDurationOptions, bindings?: IComponentBindings) {\r\n    super(element, QueryDuration.ID, bindings);\r\n\r\n    this.options = ComponentOptions.initComponentOptions(element, QueryDuration, options);\r\n\r\n    this.bind.onRootElement(QueryEvents.querySuccess, (data: IQuerySuccessEventArgs) => this.handleQuerySuccess(data));\r\n    this.bind.onRootElement(QueryEvents.queryError, () => $$(this.element).hide());\r\n    this.element.style.display = 'none';\r\n    this.textContainer = $$('span').el;\r\n    this.element.appendChild(this.textContainer);\r\n  }\r\n\r\n  private handleQuerySuccess(data: IQuerySuccessEventArgs) {\r\n    if (!this.disabled && data.results.results.length > 0) {\r\n      Assert.exists(data);\r\n\r\n      let tooltip = [\r\n        l('Duration', this.formatQueryDuration(data.results.duration)),\r\n        l('SearchAPIDuration', this.formatQueryDuration(data.results.searchAPIDuration)),\r\n        l('IndexDuration', this.formatQueryDuration(data.results.indexDuration))\r\n      ].join('\\n');\r\n\r\n      this.textContainer.textContent = this.formatQueryDuration(data.results.duration);\r\n      this.element.setAttribute('title', tooltip);\r\n      this.element.style.display = 'inline';\r\n    } else {\r\n      this.element.style.display = 'none';\r\n    }\r\n  }\r\n\r\n  private formatQueryDuration(durationInMillis: number): string {\r\n    if (durationInMillis == undefined) {\r\n      return l('Unavailable');\r\n    } else {\r\n      var seconds = Math.max(durationInMillis / 1000, 0.01);\r\n      if (String['locale'] === 'en') {\r\n        return l('Seconds', Globalize.format(seconds, 'n2'), seconds, true);\r\n      } else {\r\n        return l('Seconds', Globalize.format(seconds, 'n2'), seconds);\r\n      }\r\n    }\r\n  }\r\n}\r\nInitialization.registerAutoCreateComponent(QueryDuration);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/QueryDuration/QueryDuration.ts"],"sourceRoot":""}