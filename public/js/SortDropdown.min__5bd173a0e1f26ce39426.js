webpackJsonpCoveo__temporary([25,33,81],{14:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=function(){function t(){}return t.addClassToSVGInContainer=function(e,n){var o=e.querySelector("svg");o.setAttribute("class",""+t.getClass(o)+n)},t.removeClassFromSVGInContainer=function(e,n){var o=e.querySelector("svg");o.setAttribute("class",t.getClass(o).replace(n,""))},t.addStyleToSVGInContainer=function(t,e){var n=t.querySelector("svg");o.each(e,function(t,e){n.style[e]=t})},t.getClass=function(t){var e=t.getAttribute("class");return e?e+" ":""},t}();e.SVGDom=i},187:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0}),n(557);var i=n(0),r=n(3),s=n(11),u=n(5),a=n(15),c=n(13),l=n(1),p=n(14),d=n(12),h=n(4),f=n(119),y=n(7),C=n(8),v=n(2),g=n(485),m=n(17),S=n(6),E=function(t){function e(n,o,i){var r=t.call(this,n,e.ID,i)||this;if(r.element=n,r.options=o,r.options=C.ComponentOptions.initComponentOptions(n,e,o),u.Assert.isLargerOrEqualsThan(1,r.options.sortCriteria.length),r.bind.onQueryState(a.MODEL_EVENTS.CHANGE_ONE,c.QUERY_STATE_ATTRIBUTES.SORT,function(t){return r.handleQueryStateChanged(t)}),r.bind.onRootElement(s.QueryEvents.querySuccess,function(t){return r.handleQuerySuccess(t)}),r.bind.onRootElement(s.QueryEvents.buildingQuery,function(t){return r.handleBuildingQuery(t)}),r.bind.onRootElement(s.QueryEvents.queryError,function(t){return r.handleQueryError(t)}),r.setTextToCaptionIfDefined(),r.addAccessiblityAttributes(),r.isToggle()){r.icon=l.$$("span",{className:"coveo-icon"}).el;var h=l.$$("span",{className:"coveo-sort-icon-ascending"},d.SVGIcons.icons.arrowUp);p.SVGDom.addClassToSVGInContainer(h.el,"coveo-sort-icon-ascending-svg");var f=l.$$("span",{className:"coveo-sort-icon-descending"},d.SVGIcons.icons.arrowDown);p.SVGDom.addClassToSVGInContainer(f.el,"coveo-sort-icon-descending-svg"),r.icon.appendChild(h.el),r.icon.appendChild(f.el),r.element.appendChild(r.icon)}return r.update(),r.updateAppearance(),r}return o(e,t),e.prototype.select=function(t){if(t)this.currentCriteria=i.find(this.options.sortCriteria,function(e){return e.direction==t});else if(h.Utils.exists(this.currentCriteria)){var e=i.indexOf(this.options.sortCriteria,this.currentCriteria);u.Assert.check(e>=0),this.currentCriteria=this.options.sortCriteria[(e+1)%this.options.sortCriteria.length]}else this.currentCriteria=this.options.sortCriteria[0];this.queryStateModel.set(c.QueryStateModel.attributesEnum.sort,this.currentCriteria.toString())},e.prototype.selectAndExecuteQuery=function(){var t=this,e=this.currentCriteria;this.select(),e!=this.currentCriteria&&this.queryController.deferExecuteQuery({beforeExecuteQuery:function(){return f.logSortEvent(t.usageAnalytics,t.currentCriteria.sort+t.currentCriteria.direction)}})},e.prototype.enable=function(){l.$$(this.element).removeClass("coveo-tab-disabled"),this.update(),t.prototype.enable.call(this)},e.prototype.disable=function(){l.$$(this.element).addClass("coveo-tab-disabled"),t.prototype.disable.call(this)},e.prototype.getCurrentCriteria=function(){return this.currentCriteria},e.prototype.match=function(t){return i.any(this.options.sortCriteria,function(e){return t==e.toString()})},e.prototype.handleQueryStateChanged=function(t){this.update()},e.prototype.update=function(){var t=this.queryStateModel.get(c.QueryStateModel.attributesEnum.sort);if(h.Utils.isNonEmptyString(t)){var e=g.SortCriteria.parse(t);this.currentCriteria=i.find(this.options.sortCriteria,function(t){return e.equals(t)})}else this.currentCriteria=null;this.updateAppearance()},e.prototype.setTextToCaptionIfDefined=function(){this.captionIsDefined&&l.$$(this.element).text(this.options.caption)},Object.defineProperty(e.prototype,"captionIsDefined",{get:function(){return h.Utils.isNonEmptyString(this.options.caption)},enumerable:!0,configurable:!0}),e.prototype.addAccessiblityAttributes=function(){var t=this,e=S.l(this.displayedSortText);(new m.AccessibleButton).withElement(this.element).withSelectAction(function(){return t.handleClick()}).withLabel(S.l("SortResultsBy",e)).build()},Object.defineProperty(e.prototype,"displayedSortText",{get:function(){return this.captionIsDefined?this.options.caption:this.element.textContent},enumerable:!0,configurable:!0}),e.prototype.handleBuildingQuery=function(t){u.Assert.exists(t),(this.queryStateModel.get(c.QueryStateModel.attributesEnum.sort)==c.QueryStateModel.defaultAttributes.sort||this.isSelected())&&this.currentCriteria&&this.currentCriteria.putInQueryBuilder(t.queryBuilder)},e.prototype.handleQuerySuccess=function(t){0==t.results.results.length?l.$$(this.element).addClass("coveo-sort-hidden"):l.$$(this.element).removeClass("coveo-sort-hidden")},e.prototype.handleQueryError=function(t){l.$$(this.element).addClass("coveo-sort-hidden")},e.prototype.handleClick=function(){this.selectAndExecuteQuery()},e.prototype.isToggle=function(){return this.options.sortCriteria.length>1},e.prototype.isSelected=function(){return h.Utils.exists(this.currentCriteria)},e.prototype.updateAppearance=function(){if(l.$$(this.element).toggleClass("coveo-selected",this.isSelected()),this.isToggle()){var t=this.currentCriteria?this.currentCriteria.direction:this.options.sortCriteria[0].direction;l.$$(this.element).removeClass("coveo-ascending"),l.$$(this.element).removeClass("coveo-descending"),this.isSelected()&&l.$$(this.element).addClass("ascending"===t?"coveo-ascending":"coveo-descending")}},e.ID="Sort",e.doExport=function(){r.exportGlobally({Sort:e,SortCriteria:g.SortCriteria})},e.options={sortCriteria:C.ComponentOptions.buildCustomListOption(function(t){return i.map(t,function(t){return"string"==typeof t?new g.SortCriteria(t):t})},{required:!0}),caption:C.ComponentOptions.buildLocalizedStringOption({required:!0})},e}(y.Component);e.Sort=E,v.Initialization.registerAutoCreateComponent(E)},287:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0}),n(665);var i=n(0),r=n(3),s=n(11),u=n(15),a=n(13),c=n(1),l=n(7),p=n(8),d=n(2),h=n(16),f=n(187),y=n(61),C=n(6),v=function(t){function e(n,o,i){var r=t.call(this,n,e.ID,i)||this;return r.element=n,r.options=o,r.sortComponents=[],r.options=p.ComponentOptions.initComponentOptions(n,e,o),r.bind.oneRootElement(h.InitializationEvents.afterInitialization,function(){return r.handleAfterInitialization()}),r.bind.onQueryState(u.MODEL_EVENTS.CHANGE_ONE,a.QUERY_STATE_ATTRIBUTES.SORT,function(t){return r.handleQueryStateChanged(t)}),r.bind.onRootElement(s.QueryEvents.querySuccess,function(t){return r.handleQuerySuccess(t)}),r.bind.onRootElement(s.QueryEvents.queryError,function(t){return r.handleQueryError(t)}),r}return o(e,t),e.prototype.handleAfterInitialization=function(){this.buildDropdown()},e.prototype.buildDropdown=function(){var t=this;this.sortComponents=this.getSortComponents(),this.dropdown=new y.Dropdown(function(){return t.handleChange()},this.getValuesForDropdown(),function(e){return t.getCaptionForValue(e)},C.l("SortBy")),this.element.appendChild(this.dropdown.getElement()),this.update()},e.prototype.getSortComponents=function(){var t=this;return c.$$(this.element).findAll("."+l.Component.computeCssClassNameForType("Sort")).map(function(e){var n=l.Component.get(e,f.Sort);return 1==n.options.sortCriteria.length?n:void t.logger.warn("Each Sort component inside a SortDropdown should have only one sort criteria. Skipping "+n.options.caption+" in the SortDropdown.")}).filter(function(t){return t})},e.prototype.getValuesForDropdown=function(){return this.sortComponents.map(function(t){return t.options.sortCriteria.toString()})},e.prototype.handleQueryStateChanged=function(t){this.update()},e.prototype.update=function(){if(this.dropdown){var t=this.queryStateModel.get(a.QueryStateModel.attributesEnum.sort);this.select(t)}},e.prototype.select=function(t,e){void 0===e&&(e=!1);var n=this.getSortIndex(t);n>-1&&this.dropdown.select(n,e),c.$$(this.dropdown.getElement()).toggleClass("coveo-selected",n>-1)},e.prototype.handleQuerySuccess=function(t){t.results.results.length?this.showElement():this.hideElement()},e.prototype.handleQueryError=function(t){this.hideElement()},e.prototype.handleChange=function(){var t=this.dropdown.getValue(),e=this.getSortIndex(t);e>-1&&this.sortComponents[e].selectAndExecuteQuery()},e.prototype.getCaptionForValue=function(t){var e=this.getSortIndex(t);return e>-1?this.sortComponents[e].options.caption:""},e.prototype.getSortIndex=function(t){return i.findIndex(this.sortComponents,function(e){return e.options.sortCriteria.toString()===t})},e.prototype.hideElement=function(){c.$$(this.element).hide()},e.prototype.showElement=function(){c.$$(this.element).show()},e.ID="SortDropdown",e.options={},e.doExport=function(){r.exportGlobally({SortDropdown:e})},e}(l.Component);e.SortDropdown=v,d.Initialization.registerAutoCreateComponent(v)},485:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(0),r=n(5);!function(t){t.RELEVANCY="relevancy",t.DATE="date",t.QRE="qre"}(o=e.VALID_SORT||(e.VALID_SORT={}));var s;!function(t){t.ASCENDING="ascending",t.DESCENDING="descending"}(s=e.VALID_DIRECTION||(e.VALID_DIRECTION={}));var u=function(){function t(e,n){void 0===n&&(n=""),this.sort=e,this.direction=n,t.sortIsField(e)||r.Assert.check(this.isValidSort(e),e+" is not a valid sort criteria. Valid values are "+i.values(o)+" or a valid index sortable index field."),t.sortNeedsDirection(e)?r.Assert.check(this.isValidDirection(n),n+" is not a valid sort criteria direction. Valid values are "+i.values(s)):r.Assert.check(""==n)}return t.prototype.isValidDirection=function(t){return i.chain(s).values().contains(t).value()},t.prototype.isValidSort=function(t){return i.chain(o).values().contains(t).value()},t.sortIsField=function(t){return"@"==t.charAt(0)},t.sortNeedsDirection=function(e){return i.contains(t.sortsNeedingDirection,e)||t.sortIsField(e)},t.sortsNeedingDirection=[o.DATE],t}();e.SortCriterion=u;var a=function(){function t(t){var e=this;this.criteria=[],t.split(";").forEach(function(t){var n=t.match(/\S+/g);e.criteria.push(new u(n[0],n[1]))})}return Object.defineProperty(t.prototype,"direction",{get:function(){return i.first(this.criteria).direction},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sort",{get:function(){return i.first(this.criteria).sort},enumerable:!0,configurable:!0}),t.parse=function(e){return new t(e)},t.prototype.putInQueryBuilder=function(t){r.Assert.exists(t),t.sortCriteria=this.toString().split(";").join(",")},t.prototype.toString=function(){return this.criteria.map(function(t){return t.direction?t.sort+" "+t.direction:""+t.sort}).join(";")},t.prototype.equals=function(t){return t.toString()==this.toString()},t}();e.SortCriteria=a},557:function(t,e){},61:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(6),r=n(0),s=n(3),u=function(){function t(t,e,n,o){void 0===t&&(t=function(t){}),void 0===n&&(n=i.l),this.onChange=t,this.listOfValues=e,this.getDisplayValue=n,this.label=o,this.optionsElement=[],this.buildContent(),this.select(0,!1),this.bindEvents()}return t.doExport=function(){s.exportGlobally({Dropdown:t})},t.prototype.reset=function(){this.select(0,!1)},t.prototype.setId=function(t){o.$$(this.element).setAttribute("id",t)},t.prototype.getElement=function(){return this.element},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.select=function(t,e){void 0===e&&(e=!0),this.selectOption(this.optionsElement[t],e)},t.prototype.build=function(){return this.element},t.prototype.setValue=function(t){var e=this;r.each(this.optionsElement,function(n){o.$$(n).getAttribute("data-value")==t&&e.selectOption(n)})},t.prototype.selectOption=function(t,e){void 0===e&&(e=!0),this.selectElement.value=t.value,e&&this.onChange(this)},t.prototype.buildContent=function(){var t=this;this.selectElement=o.$$("select",{className:"coveo-dropdown"}).el,this.label&&this.selectElement.setAttribute("aria-label",i.l(this.label));var e=this.buildOptions();r.each(e,function(e){o.$$(t.selectElement).append(e)}),this.element=this.selectElement},t.prototype.buildOptions=function(){var t=this,e=[];return r.each(this.listOfValues,function(n){e.push(t.buildOption(n))}),e},t.prototype.buildOption=function(t){var e=o.$$("option");return e.setAttribute("data-value",t),e.setAttribute("value",t),e.text(this.getDisplayValue(t)),this.optionsElement.push(e.el),e.el},t.prototype.bindEvents=function(){var t=this;o.$$(this.selectElement).on("change",function(){return t.onChange(t)})},t}();e.Dropdown=u},665:function(t,e){}});