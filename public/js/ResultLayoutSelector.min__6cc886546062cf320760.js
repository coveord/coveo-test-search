webpackJsonpCoveo__temporary([19],{14:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),i=function(){function t(){}return t.addClassToSVGInContainer=function(e,o){var n=e.querySelector("svg");n.setAttribute("class",""+t.getClass(n)+o)},t.removeClassFromSVGInContainer=function(e,o){var n=e.querySelector("svg");n.setAttribute("class",t.getClass(n).replace(o,""))},t.addStyleToSVGInContainer=function(t,e){var o=t.querySelector("svg");n.each(e,function(t,e){o.style[e]=t})},t.getClass=function(t){var e=t.getAttribute("class");return e?e+" ":""},t}();e.SVGDom=i},143:function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),o(468);var i=o(0),s=o(15),r=o(10),a=o(101),u=o(33),c=o(5),l=o(16),h=o(12),p=o(3),d=o(7),y=o(1),f=o(14),v=o(13),m=o(4),b=o(9),L=o(6),A=o(8),C=o(2),g=o(469),S=o(18);e.defaultLayout="list";var R=function(t){function e(o,n,i){var a=t.call(this,o,e.ID,i)||this;return a.element=o,a.options=n,a.options=A.ComponentOptions.initComponentOptions(o,e,n),a.currentActiveLayouts={},a.bind.onQueryState(l.MODEL_EVENTS.CHANGE_ONE,h.QUERY_STATE_ATTRIBUTES.LAYOUT,a.handleQueryStateChanged.bind(a)),a.bind.onRootElement(r.QueryEvents.querySuccess,function(t){return a.handleQuerySuccess(t)}),a.bind.onRootElement(r.QueryEvents.queryError,function(t){return a.handleQueryError(t)}),a.resultLayoutSection=y.$$(a.element).closest(".coveo-result-layout-section"),a.bind.oneRootElement(s.InitializationEvents.afterComponentsInitialization,function(){return a.populate()}),a.bind.oneRootElement(s.InitializationEvents.afterInitialization,function(){return a.handleQueryStateChanged()}),g.ResponsiveResultLayout.init(a.root,a,{}),a}return n(e,t),Object.defineProperty(e.prototype,"activeLayouts",{get:function(){return this.currentActiveLayouts},enumerable:!0,configurable:!0}),e.prototype.changeLayout=function(t){if(c.Assert.check(this.isLayoutDisplayedByButton(t),"Layout not available or invalid"),t!==this.currentLayout||""===this.getModelValue()){this.setModelValue(t);var e=this.queryController.getLastResults();this.setLayout(t,e),e?this.usageAnalytics.logCustomEvent(b.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:t},this.element):(this.usageAnalytics.logSearchEvent(b.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:t}),this.queryController.firstQuery||this.queryController.executeQuery())}},e.prototype.getCurrentLayout=function(){return this.currentLayout},e.prototype.disableLayouts=function(t){var e=this;if(m.Utils.isNonEmptyArray(t)){i.each(t,function(t){return e.disableLayout(t)});var o=i.difference(i.keys(this.currentActiveLayouts),t);if(i.isEmpty(o)){this.logger.error("Cannot disable the last valid layout ... Re-enabling the first one possible");var n=i.keys(this.currentActiveLayouts)[0];this.enableLayout(n),this.setLayout(n)}else{var s=i.contains(o,this.currentLayout)?this.currentLayout:o[0];this.changeLayout(s)}}},e.prototype.enableLayouts=function(t){var e=this;i.each(t,function(t){e.enableLayout(t)})},e.prototype.disableLayout=function(t){this.isLayoutDisplayedByButton(t)&&this.hideButton(t)},e.prototype.enableLayout=function(t){var e=this.activeResultLists;i.find(e,function(e){return e.options.layout==t})&&this.isLayoutDisplayedByButton(t)&&(this.showButton(t),this.updateSelectorAppearance())},Object.defineProperty(e.prototype,"resultLists",{get:function(){return this.searchInterface.getComponents("ResultList")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeResultLists",{get:function(){return i.filter(this.resultLists,function(t){return!t.disabled})},enumerable:!0,configurable:!0}),e.prototype.hideButton=function(t){if(this.isLayoutDisplayedByButton(t)){var e=this.currentActiveLayouts[t].button;y.$$(e.el).addClass("coveo-hidden"),e.visible=!1,this.updateSelectorAppearance()}},e.prototype.showButton=function(t){if(this.isLayoutDisplayedByButton(t)){var e=this.currentActiveLayouts[t].button;y.$$(e.el).removeClass("coveo-hidden"),e.visible=!0}},e.prototype.setLayout=function(t,e){t&&(this.currentLayout&&y.$$(this.currentActiveLayouts[this.currentLayout].button.el).removeClass("coveo-selected"),y.$$(this.currentActiveLayouts[t].button.el).addClass("coveo-selected"),this.currentLayout=t,y.$$(this.element).trigger(u.ResultListEvents.changeLayout,{layout:t,results:e}))},e.prototype.handleQuerySuccess=function(t){this.hasNoResults=0==t.results.results.length,this.shouldShowSelector()?this.show():this.hide()},e.prototype.handleQueryStateChanged=function(t){var e=this.getModelValue(),o=i.find(i.keys(this.currentActiveLayouts),function(t){return t===e});void 0!==o?this.setLayout(o):this.setLayout(i.keys(this.currentActiveLayouts)[0])},e.prototype.handleQueryError=function(t){this.hasNoResults=!0,this.hide()},e.prototype.updateSelectorAppearance=function(){this.shouldShowSelector()?this.show():this.hide()},e.prototype.populate=function(){var t=this,o={layouts:[]};y.$$(this.root).trigger(a.ResultLayoutEvents.populateResultLayout,o);var n=i.uniq(o.layouts.map(function(t){return t.toLowerCase()}));i.each(n,function(t){return c.Assert.check(i.contains(e.validLayouts,t),"Invalid layout")}),i.isEmpty(n)||(i.each(n,function(e){return t.addButton(e)}),this.shouldShowSelector()||this.hide())},e.prototype.addButton=function(t){var e=this,o=y.$$("span",{className:"coveo-result-layout-selector"}),n=y.$$("span",{className:"coveo-result-layout-selector-caption"},d.l(t));o.append(n.el);var i=y.$$("span",{className:"coveo-icon coveo-"+t+"-layout-icon"},v.SVGIcons.icons[t+"Layout"]);f.SVGDom.addClassToSVGInContainer(i.el,"coveo-"+t+"-svg"),o.prepend(i.el);var s=function(){return e.changeLayout(t)};(new S.AccessibleButton).withElement(o).withLabel(d.l("DisplayResultsAs",d.l(t))).withSelectAction(s).withOwner(this.bind).build(),t===this.currentLayout&&o.addClass("coveo-selected"),y.$$(this.element).append(o.el),this.currentActiveLayouts[t]={button:{visible:!0,el:o.el},enabled:!0}},e.prototype.hide=function(){var t=this.resultLayoutSection||this.element;y.$$(t).addClass("coveo-result-layout-hidden")},e.prototype.show=function(){var t=this.resultLayoutSection||this.element;y.$$(t).removeClass("coveo-result-layout-hidden")},e.prototype.getModelValue=function(){return this.queryStateModel.get(h.QueryStateModel.attributesEnum.layout)},e.prototype.setModelValue=function(t){this.queryStateModel.set(h.QueryStateModel.attributesEnum.layout,t)},e.prototype.shouldShowSelector=function(){return i.keys(this.currentActiveLayouts).length>1&&i.filter(this.currentActiveLayouts,function(t){return t.button.visible}).length>1&&!this.hasNoResults},e.prototype.isLayoutDisplayedByButton=function(t){return i.contains(i.keys(this.currentActiveLayouts),t)},e.ID="ResultLayoutSelector",e.aliases=["ResultLayout"],e.doExport=function(){p.exportGlobally({ResultLayoutSelector:e,ResultLayout:e})},e.validLayouts=["list","card","table"],e.options={mobileLayouts:A.ComponentOptions.buildListOption({defaultValue:["card","table"]}),tabletLayouts:A.ComponentOptions.buildListOption({defaultValue:["list","card","table"]}),desktopLayouts:A.ComponentOptions.buildListOption({defaultValue:["list","card","table"]})},e}(L.Component);e.ResultLayoutSelector=R,C.Initialization.registerAutoCreateComponent(R)},18:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(11),i=o(28),s=o(1);o(364);var r=function(){function t(){this.logger=new n.Logger(this)}return t.prototype.withOwner=function(t){return this.eventOwner=t,this},t.prototype.withElement=function(t){return t instanceof HTMLElement?this.element=s.$$(t):this.element=t,this},t.prototype.withLabel=function(t){return this.label=t,this},t.prototype.withTitle=function(t){return this.title=t,this},t.prototype.withSelectAction=function(t){return this.clickAction=t,this.enterKeyboardAction=t,this},t.prototype.withClickAction=function(t){return this.clickAction=t,this},t.prototype.withEnterKeyboardAction=function(t){return this.enterKeyboardAction=t,this},t.prototype.withFocusAndMouseEnterAction=function(t){return this.focusAction=t,this.mouseenterAction=t,this},t.prototype.withFocusAction=function(t){return this.focusAction=t,this},t.prototype.withMouseEnterAction=function(t){return this.mouseenterAction=t,this},t.prototype.withBlurAndMouseLeaveAction=function(t){return this.mouseleaveAction=t,this.blurAction=t,this},t.prototype.withMouseLeaveAction=function(t){return this.mouseleaveAction=t,this},t.prototype.withBlurAction=function(t){return this.blurAction=t,this},t.prototype.build=function(){return this.element||(this.element=s.$$("div")),this.ensureCorrectRole(),this.ensureCorrectLabel(),this.ensureTitle(),this.ensureSelectAction(),this.ensureUnselectAction(),this.ensureMouseenterAndFocusAction(),this.ensureMouseleaveAndBlurAction(),this.ensureDifferentiationBetweenKeyboardAndMouseFocus(),this},t.prototype.ensureDifferentiationBetweenKeyboardAndMouseFocus=function(){var t=this,e="coveo-accessible-button-pressed",o="coveo-accessible-button-focused";s.$$(this.element).addClass("coveo-accessible-button"),s.$$(this.element).on("mousedown",function(){s.$$(t.element).addClass(e),s.$$(t.element).removeClass(o)}),s.$$(this.element).on("mouseup",function(){return s.$$(t.element).removeClass(e)}),s.$$(this.element).on("focus",function(){s.$$(t.element).hasClass(e)||s.$$(t.element).addClass(o)}),s.$$(this.element).on("blur",function(){return s.$$(t.element).removeClass(o)})},t.prototype.ensureCorrectRole=function(){this.element.getAttribute("role")||this.element.setAttribute("role","button")},t.prototype.ensureCorrectLabel=function(){if(!this.label)return void this.logger.error("Missing label to create an accessible button !");this.element.setAttribute("aria-label",this.label)},t.prototype.ensureTitle=function(){this.title&&this.element.setAttribute("title",this.title)},t.prototype.ensureTabIndex=function(){this.element.setAttribute("tabindex","0")},t.prototype.ensureSelectAction=function(){var t=this;this.enterKeyboardAction&&(this.ensureTabIndex(),this.bindEvent("keyup",i.KeyboardUtils.keypressAction(i.KEYBOARD.ENTER,function(e){return t.enterKeyboardAction(e)}))),this.clickAction&&this.bindEvent("click",this.clickAction)},t.prototype.ensureUnselectAction=function(){this.blurAction&&this.bindEvent("blur",this.blurAction),this.mouseleaveAction&&this.bindEvent("mouseleave",this.mouseleaveAction)},t.prototype.ensureMouseenterAndFocusAction=function(){this.mouseenterAction&&this.bindEvent("mouseenter",this.mouseenterAction),this.focusAction&&this.bindEvent("focus",this.focusAction)},t.prototype.ensureMouseleaveAndBlurAction=function(){this.mouseleaveAction&&this.bindEvent("mouseleave",this.mouseleaveAction),this.blurAction&&this.bindEvent("blur",this.blurAction)},t.prototype.bindEvent=function(t,e){this.eventOwner?this.eventOwner.on(this.element,t,e):s.$$(this.element).on(t,e)},t}();e.AccessibleButton=r},364:function(t,e){},468:function(t,e){},469:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),i=o(11),s=o(1),r=o(6),a=o(143),u=o(17),c=o(79),l=function(){function t(t,e,o,n){this.coveoRoot=t,this.ID=e,this.searchInterface=r.Component.get(this.coveoRoot.el,u.SearchInterface,!1)}return t.init=function(e,o,n){if(!s.$$(e).find("."+r.Component.computeCssClassName(a.ResultLayoutSelector))){return void new i.Logger("ResponsiveResultLayout").trace("No ResultLayout component found : Cannot instantiate ResponsiveResultLayout")}c.ResponsiveComponentsManager.register(t,s.$$(e),a.ResultLayoutSelector.ID,o,n)},t.prototype.registerComponent=function(t){return t instanceof a.ResultLayoutSelector&&(this.resultLayout=t,!0)},t.prototype.handleResizeEvent=function(){this.needSmallMode()?this.enableAndDisableLayouts(this.resultLayout.options.mobileLayouts):this.needMediumMode()?this.enableAndDisableLayouts(this.resultLayout.options.tabletLayouts):this.enableAndDisableLayouts(this.resultLayout.options.desktopLayouts)},t.prototype.enableAndDisableLayouts=function(t){var e=n.difference(a.ResultLayoutSelector.validLayouts,t),o=n.intersection(a.ResultLayoutSelector.validLayouts,t);this.resultLayout.disableLayouts(e),this.resultLayout.enableLayouts(o)},t.prototype.needSmallMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getSmallScreenWidth()},t.prototype.needMediumMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth()},t}();e.ResponsiveResultLayout=l},79:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),i=o(15),s=o(6),r=o(17),a=o(4),u=o(0),c=o(10),l=o(11),h=o(22),p=o(0),d=function(){function t(e){var o=this;this.disabledComponents=[],this.responsiveComponents=[],this.coveoRoot=e,this.searchInterface=s.Component.get(this.coveoRoot.el,r.SearchInterface,!1),this.dropdownHeadersWrapper=n.$$("div",{className:t.DROPDOWN_HEADER_WRAPPER_CSS_CLASS}),this.searchBoxElement=this.getSearchBoxElement(),this.logger=new l.Logger(this),this.resizeListener=p.debounce(function(){0!=o.coveoRoot.width()?(o.addDropdownHeaderWrapperIfNeeded(),o.shouldSwitchToSmallMode()?o.coveoRoot.addClass("coveo-small-interface"):o.shouldSwitchToSmallMode()||o.coveoRoot.removeClass("coveo-small-interface"),u.each(o.responsiveComponents,function(t){t.handleResizeEvent()})):o.logger.warn("The width of the search interface is 0, cannot dispatch resize events to responsive components. This means that the tabs will not\n        automatically fit in the tab section. Also, the facet and recommendation component will not hide in a menu. Could the search\n        interface display property be none? Could its visibility property be set to hidden? Also, if either of these scenarios happen during\n        loading, it could be the cause of this issue.")},250),h.DeviceUtils.isMobileDevice()||window.addEventListener("resize",this.resizeListener),this.bindNukeEvents()}return t.register=function(e,o,n,s,r){var h=this;(r.initializationEventRoot||o).on(i.InitializationEvents.afterInitialization,function(){if(h.shouldEnableResponsiveMode(o)){var i=u.find(h.componentManagers,function(t){return o.el==t.coveoRoot.el});if(i||(i=new t(o),h.componentManagers.push(i)),!a.Utils.isNullOrUndefined(r.enableResponsiveMode)&&!r.enableResponsiveMode)return void i.disableComponent(n);h.componentInitializations.push({responsiveComponentsManager:i,arguments:[e,o,n,s,r]})}if(0==--h.remainingComponentInitializations)if(h.instantiateResponsiveComponents(),0==o.width()){var p=new l.Logger("ResponsiveComponentsManager");p.info("Search interface width is 0, cannot dispatch resize events to responsive components. Will try again after first\n          query success."),o.one(c.QueryEvents.querySuccess,function(){h.resizeAllComponentsManager()})}else h.resizeAllComponentsManager()}),this.remainingComponentInitializations++},t.shouldEnableResponsiveMode=function(t){var e=s.Component.get(t.el,r.SearchInterface,!0);return e instanceof r.SearchInterface&&e.options.enableAutomaticResponsiveMode},t.instantiateResponsiveComponents=function(){u.each(this.componentInitializations,function(t){var e=t.responsiveComponentsManager;e.register.apply(e,t.arguments)})},t.resizeAllComponentsManager=function(){u.each(this.componentManagers,function(t){t.resizeListener()})},t.prototype.register=function(t,e,o,n,i){if(!this.isDisabled(o)){if(!this.isActivated(o)){var s=new t(e,o,i);this.isTabs(o)?this.responsiveComponents.push(s):this.responsiveComponents.unshift(s)}u.each(this.responsiveComponents,function(t){null!=t.registerComponent&&t.registerComponent(n)})}},t.prototype.disableComponent=function(t){this.disabledComponents.push(t)},t.prototype.isDisabled=function(t){return-1!=u.indexOf(this.disabledComponents,t)},t.prototype.shouldSwitchToSmallMode=function(){var t=this.needDropdownWrapper(),e=this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth();return t||e},t.prototype.needDropdownWrapper=function(){for(var t=0;t<this.responsiveComponents.length;t++){var e=this.responsiveComponents[t];if(e.needDropdownWrapper&&e.needDropdownWrapper())return!0}return!1},t.prototype.addDropdownHeaderWrapperIfNeeded=function(){if(this.needDropdownWrapper()){var t=n.$$(this.coveoRoot).find(".coveo-tab-section");this.searchBoxElement?this.dropdownHeadersWrapper.insertAfter(this.searchBoxElement):t?this.dropdownHeadersWrapper.insertAfter(t):this.coveoRoot.prepend(this.dropdownHeadersWrapper.el)}},t.prototype.isTabs=function(t){return"Tab"==t},t.prototype.isActivated=function(t){return void 0!=u.find(this.responsiveComponents,function(e){return e.ID==t})},t.prototype.getSearchBoxElement=function(){var t=this.coveoRoot.find(".coveo-search-section");return t||this.coveoRoot.find(".CoveoSearchbox")},t.prototype.bindNukeEvents=function(){var e=this;n.$$(this.coveoRoot).on(i.InitializationEvents.nuke,function(){window.removeEventListener("resize",e.resizeListener),t.componentManagers=u.filter(t.componentManagers,function(t){return t.coveoRoot.el!=e.coveoRoot.el})})},t.DROPDOWN_HEADER_WRAPPER_CSS_CLASS="coveo-dropdown-header-wrapper",t.componentManagers=[],t.remainingComponentInitializations=0,t.componentInitializations=[],t}();e.ResponsiveComponentsManager=d}});