webpackJsonpCoveo__temporary([8,20],{14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=function(){function e(){}return e.addClassToSVGInContainer=function(t,n){var o=t.querySelector("svg");o.setAttribute("class",""+e.getClass(o)+n)},e.removeClassFromSVGInContainer=function(t,n){var o=t.querySelector("svg");o.setAttribute("class",e.getClass(o).replace(n,""))},e.addStyleToSVGInContainer=function(e,t){var n=e.querySelector("svg");o.each(t,function(e,t){n.style[t]=e})},e.getClass=function(e){var t=e.getAttribute("class");return t?t+" ":""},e}();t.SVGDom=i},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=n(0),s=function(){function e(e,t){this.resultListOptions=e,this.autoCreateComponentsFn=t}return e.prototype.renderResults=function(e,t,n){var s=this;return void 0===t&&(t=!1),Promise.all([this.getStartFragment(e,t),this.getEndFragment(e,t)]).then(function(t){var r=t[0],l=t[1],a=document.createDocumentFragment();r&&a.appendChild(r),i.each(e,function(e){a.appendChild(e),n(o.Component.getResult(e),e)}),l&&a.appendChild(l),s.resultListOptions.resultContainer.appendChild(a)})},e.prototype.getStartFragment=function(e,t){return Promise.resolve(document.createDocumentFragment())},e.prototype.getEndFragment=function(e,t){return Promise.resolve(document.createDocumentFragment())},e}();t.ResultListRenderer=s},327:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),s=n(70),r=n(0),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultTemplate='<td><a class="CoveoResultLink"></a></td>\n                             <td><span class="CoveoExcerpt"></span></td>\n                             <td><span class="CoveoFieldValue" data-field="@date" data-helper="date"></span></td>',t.defaultRoledTemplates={"table-header":'<th style="width: 40%">Link</th>\n                     <th>Excerpt</th>\n                     <th style="width: 20%"\n                         class="CoveoSort coveo-table-header-sort"\n                         data-sort-criteria="date ascending,date descending"\n                         data-display-unselected-icon="false">Date</th>',"table-footer":"<th>Link</th>\n                     <th>Excerpt</th>\n                     <th>Date</th>"},t}return o(t,e),t.prototype.instantiateRoleToString=function(e){var t=r.find(this.templates,function(t){return t.role===e});return t?t.instantiateToString(void 0,{}):this.defaultRoledTemplates[e]},t.prototype.instantiateRoleToElement=function(e){var t=this,n=r.find(this.templates,function(t){return t.role===e});if(n)return n.instantiateToElement(void 0,{});var o=new i.Template(function(){return t.defaultRoledTemplates[e]});return o.layout="table",o.instantiateToElement(void 0)},t.prototype.getFallbackTemplate=function(){var e=this;return new i.Template(function(){return e.defaultTemplate})},t.prototype.hasTemplateWithRole=function(e){return r.find(this.templates,function(t){return t.role===e})},t}(s.TemplateList);t.TableTemplate=l},328:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.instantiateToString=function(e){return'<div class="coveo-result-frame">\n        <div class="coveo-result-row">\n          <div class="coveo-result-cell" style="width:40px;text-align:center;vertical-align:middle;">\n            <span class="CoveoIcon" data-small="true" data-with-label="false">\n            </span>\n          </div>\n          <div class="coveo-result-cell" style="padding:0 0 3px 5px;vertical-align:middle">\n            <div class="coveo-result-row">\n              <div class="coveo-result-cell" style="font-size:10pt;">\n                <a class="CoveoResultLink" style="display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>'},t.prototype.instantiateToElement=function(e){var t=this;return new Promise(function(n,o){var i=document.createElement("div");i.innerHTML=t.instantiateToString(e),n(i)})},t}(i.Template);t.DefaultRecommendationTemplate=s},332:function(e,t,n){"use strict";function o(){var e,t=w.Component.getComponentRef("ResultList");if(t&&(e=t.resultCurrentlyBeingRendered),!e){var n=w.Component.getComponentRef("Quickview");n&&(e=n.resultCurrentlyBeingRendered)}return e}function i(){var e=o();if(e)return e.termsToHighlight}function s(){var e=o();if(e)return e.phrasesToHighlight}function r(e,t){return d.Utils.isNonEmptyArray(L.keys(e))||d.Utils.isNonEmptyArray(L.keys(t))}var l=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(80),u=n(50),c=n(29),p=n(104),h=n(137),d=n(4),f=n(18),m=n(56),y=n(136),g=n(19),v=n(21),C=n(2),T=n(42),R=n(79),b=n(45),S=n(25),L=n(0),w=n(6),E=n(55),A=function(){function e(){}return e.exportAllHelpersGlobally=function(e){L.each(a.TemplateHelpers.getHelpers(),function(t,n){void 0==e[n]&&(e[n]=t)})},e}();t.CoreHelpers=A,a.TemplateHelpers.registerFieldHelper("javascriptEncode",function(e){return d.Utils.exists(e)?f.StringUtils.javascriptEncode(e):void 0});var O=function(e,t){var n=u.StringAndHoles.shortenString(e,t.length,"...");return d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};a.TemplateHelpers.registerTemplateHelper("shorten",function(e,t,n,o){return O(e,{length:t,highlights:n,cssClass:o})}),a.TemplateHelpers.registerTemplateHelper("shortenv2",function(e,t){return O(e,t)});var H=function(e,t){var n=u.StringAndHoles.shortenPath(e,t.length);return d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};a.TemplateHelpers.registerTemplateHelper("shortenPath",function(e,t,n,o){return H(e,{length:t,highlights:n,cssClass:o})}),a.TemplateHelpers.registerFieldHelper("shortenPathv2",function(e,t){return H(e,t)});var $=function(e,t){var n=u.StringAndHoles.shortenUri(e,t.length);return d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};a.TemplateHelpers.registerTemplateHelper("shortenUri",function(e,t,n,o){return $(e,{length:t,highlights:n,cssClass:o})}),a.TemplateHelpers.registerTemplateHelper("shortenUriv2",function(e,t){return $(e,t)});var D=function(e,t){return d.Utils.exists(e)?d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(e,t.highlights,null,t.cssClass||"highlight"):e:void 0};a.TemplateHelpers.registerTemplateHelper("highlight",function(e,t,n){return D(e,{highlights:t,cssClass:n})}),a.TemplateHelpers.registerTemplateHelper("highlightv2",function(e,t){return D(e,t)});var _=function(e,t){return d.Utils.exists(e)&&d.Utils.exists(t.termsToHighlight)&&d.Utils.exists(t.phrasesToHighlight)?r(t.termsToHighlight,t.phrasesToHighlight)?R.StreamHighlightUtils.highlightStreamText(e,t.termsToHighlight,t.phrasesToHighlight,t.opts):e:void 0};a.TemplateHelpers.registerTemplateHelper("highlightStreamText",function(e,t,n,o){return void 0===t&&(t=i()),void 0===n&&(n=s()),_(e,{termsToHighlight:t,phrasesToHighlight:n,opts:o})}),a.TemplateHelpers.registerTemplateHelper("highlightStreamTextv2",function(e,t){var n=l({termsToHighlight:i(),phrasesToHighlight:s()},t);return _(e,n)});var I=function(e,t){return d.Utils.exists(e)&&d.Utils.exists(t.termsToHighlight)&&d.Utils.exists(t.phrasesToHighlight)?r(t.termsToHighlight,t.phrasesToHighlight)?R.StreamHighlightUtils.highlightStreamHTML(e,t.termsToHighlight,t.phrasesToHighlight,t.opts):e:void 0};a.TemplateHelpers.registerTemplateHelper("highlightStreamHTML",function(e,t,n,o){return void 0===t&&(t=i()),void 0===n&&(n=s()),I(e,{termsToHighlight:t,phrasesToHighlight:n,opts:o})}),a.TemplateHelpers.registerTemplateHelper("highlightStreamHTMLv2",function(e,t){return I(e,t)}),a.TemplateHelpers.registerFieldHelper("number",function(e,t){var n=Number(e);return d.Utils.exists(e)?L.isString(t)?f.StringUtils.htmlEncode(S.format(n,t)):f.StringUtils.htmlEncode(n.toString()):void 0}),a.TemplateHelpers.registerFieldHelper("date",function(e,t){return c.DateUtils.dateToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),a.TemplateHelpers.registerFieldHelper("time",function(e,t){return c.DateUtils.timeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),a.TemplateHelpers.registerFieldHelper("dateTime",function(e,t){return c.DateUtils.dateTimeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),a.TemplateHelpers.registerFieldHelper("emailDateTime",function(e,t){var n={};n.includeTimeIfThisWeek=!0;var o=L.extend(t,n);return e?c.DateUtils.dateTimeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),o):void 0}),a.TemplateHelpers.registerFieldHelper("currency",function(e,t){return p.CurrencyUtils.currencyToString(e,t)}),a.TemplateHelpers.registerFieldHelper("timeSpan",function(e,t){return void 0===t&&(t={isMilliseconds:!1}),new m.TimeSpan(e,t.isMilliseconds).getHHMMSS()}),a.TemplateHelpers.registerFieldHelper("email",function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o,i,s,r;if(L.isObject(t[0])?(o=t[0].companyDomain,i=t[0].me,s=t[0].lengthLimit,r=t[0].truncateName):(o=t[0],i=t[1],s=t[2],r=t[3]),void 0==s&&(s=2),void 0==r&&(r=!1),L.isString(e)){var l=y.EmailUtils.splitSemicolonSeparatedListOfEmailAddresses(e);return y.EmailUtils.emailAddressesToHyperlinks(l,o,i,s,r)}return L.isArray(e)?y.EmailUtils.emailAddressesToHyperlinks(e,o,i,s,r):void 0}),a.TemplateHelpers.registerTemplateHelper("excessEmailToggle",function(e){C.$$(e).removeClass("coveo-active"),C.$$(e).hasClass("coveo-emails-excess-collapsed")?L.each(C.$$(e).siblings(".coveo-emails-excess-expanded"),function(e){C.$$(e).addClass("coveo-active")}):C.$$(e).hasClass("coveo-hide-expanded")&&(C.$$(e.parentElement).addClass("coveo-inactive"),L.each(C.$$(e.parentElement).siblings(".coveo-emails-excess-collapsed"),function(e){C.$$(e).addClass("coveo-active")}))}),a.TemplateHelpers.registerFieldHelper("anchor",function(e,t){return h.AnchorUtils.buildAnchor(e,t)}),a.TemplateHelpers.registerFieldHelper("image",function(e,t){return h.ImageUtils.buildImage(e,t)}),a.TemplateHelpers.registerTemplateHelper("thumbnail",function(e,t,n){if(void 0===e&&(e=o()),void 0===t&&(t="default"),g.QueryUtils.hasThumbnail(e))return h.ImageUtils.buildImageFromResult(e,T.SearchEndpoint.endpoints[t],n)}),a.TemplateHelpers.registerTemplateHelper("fromFileTypeToIcon",function(e,t){void 0===e&&(e=o()),void 0===t&&(t={});var n=w.Component.getComponentRef("Icon");if(n)return n.createIcon(e,t).outerHTML}),a.TemplateHelpers.registerTemplateHelper("attrEncode",function(e){return(""+e).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/'/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),a.TemplateHelpers.registerTemplateHelper("loadTemplates",function(e,t){void 0===t&&(t=!0);var n,i="",s=o(),r=!1,l=e;return L.each(e,function(e,t,o){"default"==e&&(n=t)}),void 0!=n&&(l=L.omit(e,n)),L.each(l,function(e,n,o){r&&t||(r=r||e,i+=a.TemplateHelpers.getHelper("loadTemplate")(n,e,s))}),r||void 0==n||(i+=a.TemplateHelpers.getHelper("loadTemplate")(n,!0,s)),i});var M=["B","KB","MB","GB","TB","PB","EB"];a.TemplateHelpers.registerFieldHelper("size",function(e,t){for(var n=parseInt(e,10),o=null!=t&&null!=t.precision?t.precision:2,i=null!=t&&null!=t.base?t.base:0;n>1024&&i+1<M.length;)n/=1024,i++;return(n=Math.floor(n*Math.pow(10,o))/Math.pow(10,o))+" "+M[i]}),a.TemplateHelpers.registerFieldHelper("translatedCaption",function(e){return b.FacetUtils.tryToGetTranslatedCaption("@filetype",e)}),a.TemplateHelpers.registerTemplateHelper("loadTemplate",function(e,t,n){return void 0===t&&(t=!0),d.Utils.isNullOrUndefined(n)&&(n=o()),t?E.TemplateCache.getTemplate(e).instantiateToString(n,{checkCondition:!1}):""}),a.TemplateHelpers.registerTemplateHelper("encodeCarriageReturn",function(e){return d.Utils.isNullOrUndefined(e)?void 0:f.StringUtils.encodeCarriageReturn(e)}),a.TemplateHelpers.registerTemplateHelper("isMobileDevice",function(){return v.DeviceUtils.isMobileDevice()?v.DeviceUtils.getDeviceName():null})},347:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(77),i=n(2),s=n(6),r=n(93),l=n(11),a=n(17),u=n(0),c=function(){function e(e,t,n,o){this.coveoRoot=e,this.ID=t,this.searchInterface=s.Component.get(this.coveoRoot.el,a.SearchInterface,!1)}return e.init=function(t,n,a){if(!i.$$(t).find("."+s.Component.computeCssClassName(r.ResultLayoutSelector))){return void new l.Logger("ResponsiveResultLayout").trace("No ResultLayout component found : Cannot instantiate ResponsiveResultLayout")}o.ResponsiveComponentsManager.register(e,i.$$(t),r.ResultLayoutSelector.ID,n,a)},e.prototype.registerComponent=function(e){return e instanceof r.ResultLayoutSelector&&(this.resultLayout=e,!0)},e.prototype.handleResizeEvent=function(){this.needSmallMode()?this.enableAndDisableLayouts(this.resultLayout.options.mobileLayouts):this.needMediumMode()?this.enableAndDisableLayouts(this.resultLayout.options.tabletLayouts):this.enableAndDisableLayouts(this.resultLayout.options.desktopLayouts)},e.prototype.enableAndDisableLayouts=function(e){var t=u.difference(r.ResultLayoutSelector.validLayouts,e),n=u.intersection(r.ResultLayoutSelector.validLayouts,e);this.resultLayout.disableLayouts(t),this.resultLayout.enableLayouts(n)},e.prototype.needSmallMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getSmallScreenWidth()},e.prototype.needMediumMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth()},e}();t.ResponsiveResultLayout=c},348:function(e,t){},357:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(77),i=n(17),s=n(98),r=n(2),l=n(6),a=n(11),u=function(){function e(e,t,n,o){this.coveoRoot=e,this.ID=t,this.searchInterface=l.Component.get(this.coveoRoot.el,i.SearchInterface,!1),this.currentMode="large"}return e.init=function(t,n,i){if(!r.$$(t).find("."+l.Component.computeCssClassName(s.ResultList))){return void new a.Logger("ResponsiveDefaultResultTemplate").trace("No ResultLayout component found : Cannot instantiate ResponsiveResultLayout")}o.ResponsiveComponentsManager.register(e,r.$$(t),s.ResultList.ID,n,i)},e.prototype.registerComponent=function(e){return e instanceof s.ResultList&&(this.resultList=e,!0)},e.prototype.handleResizeEvent=function(){var e=this,t=this.resultList.queryController.getLastResults();this.needSmallMode()?(r.$$(this.resultList.options.resultContainer).addClass("coveo-card-layout-container"),r.$$(this.resultList.options.resultContainer).removeClass("coveo-list-layout-container"),"small"!=this.currentMode&&(t&&this.resultList.buildResults(t).then(function(t){e.resultList.renderResults(t)}),this.currentMode="small")):(r.$$(this.resultList.options.resultContainer).removeClass("coveo-card-layout-container"),r.$$(this.resultList.options.resultContainer).addClass("coveo-list-layout-container"),"large"!=this.currentMode&&(t&&this.resultList.buildResults(t).then(function(t){e.resultList.renderResults(t)}),this.currentMode="large"))},e.prototype.needSmallMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getSmallScreenWidth()},e}();t.ResponsiveDefaultResultTemplate=u},358:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function l(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,l)}a((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,s=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){a.label=n[1];break}if(6===n[0]&&a.label<r[1]){a.label=r[1],r=n;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(n);break}r[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],s=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,r,l,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l};Object.defineProperty(t,"__esModule",{value:!0});var r=n(153),l=n(327),a=n(2),u=n(0),c=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.resultListOptions=t,o.autoCreateComponentsFn=n,o.shouldDisplayHeader=!0,o.shouldDisplayFooter=!1,o.resultListOptions.resultTemplate instanceof l.TableTemplate&&(o.resultListOptions.resultTemplate.hasTemplateWithRole("table-footer")&&(o.shouldDisplayFooter=!0),0===o.resultListOptions.resultTemplate.templates.length||o.resultListOptions.resultTemplate.hasTemplateWithRole("table-header")||(o.shouldDisplayHeader=!1)),o}return o(t,e),t.prototype.getStartFragment=function(e,t){if(!t&&!u.isEmpty(e)&&this.shouldDisplayHeader)return this.renderRoledTemplate("table-header")},t.prototype.getEndFragment=function(e,t){if(!t&&!u.isEmpty(e)&&this.shouldDisplayFooter)return this.renderRoledTemplate("table-footer")},t.prototype.renderRoledTemplate=function(e){return i(this,void 0,void 0,function(){var t,n;return s(this,function(o){switch(o.label){case 0:return[4,this.resultListOptions.resultTemplate.instantiateRoleToElement(e)];case 1:return t=o.sent(),a.$$(t).addClass("coveo-result-list-"+e),this.autoCreateComponentsFn(t,void 0),n=document.createDocumentFragment(),n.appendChild(t),[2,n]}})})},t}(r.ResultListRenderer);t.ResultListTableRenderer=c},359:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(153),s=n(2),r=n(0),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getEndFragment=function(e){var t=this;return new Promise(function(n){if(!r.isEmpty(e)){if(t.resultListOptions.enableInfiniteScroll){var o=s.$$(t.resultListOptions.resultContainer).findAll(".coveo-card-layout-padding");r.each(o,function(e){return s.$$(e).remove()})}var i=document.createDocumentFragment();r.times(3,function(){return i.appendChild(s.$$("div",{className:"coveo-card-layout coveo-card-layout-padding"}).el)}),n(i)}n(null)})},t}(i.ResultListRenderer);t.ResultListCardRenderer=l},360:function(e,t){},361:function(e,t){},362:function(e,t){},363:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=function(){function e(e,t){this.searchInterface=t,this.resultContainerElement=o.$$(e)}return e.prototype.empty=function(){this.searchInterface.detachComponentsInside(this.resultContainerElement.el),this.resultContainerElement.el.innerHTML=""},e.prototype.addClass=function(e){this.resultContainerElement.addClass(e)},e.prototype.isEmpty=function(){return this.resultContainerElement.isEmpty()},e.prototype.hideChildren=function(){this.resultContainerElement.children().forEach(function(e){return o.$$(e).hide()})},e.prototype.getResultElements=function(){return this.resultContainerElement.findAll(".CoveoResult")},Object.defineProperty(e.prototype,"el",{get:function(){return this.resultContainerElement.el},enumerable:!0,configurable:!0}),e.resultCurrentlyBeingRendered=null,e}();t.ResultContainer=i},45:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(19),s=n(92),r=n(29),l=n(4),a=n(2),u=n(0),c=n(8),p=function(){function e(){}return e.getRegexToUseForFacetSearch=function(e,t){return new RegExp(o.StringUtils.stringToRegex(e,t),"i")},e.getValuesToUseForSearchInFacet=function(e,t){var n=[e],o=this.getRegexToUseForFacetSearch(e,t.options.facetSearchIgnoreAccents);return t.options.valueCaption?(u.chain(t.options.valueCaption).pairs().filter(function(e){return o.test(e[1])}).each(function(e){n.push(e[0])}),(i.QueryUtils.isStratusAgnosticField(t.options.field,"@objecttype")||i.QueryUtils.isStratusAgnosticField(t.options.field,"@filetype"))&&u.each(s.FileTypes.getFileTypeCaptions(),function(e,i){i in t.options.valueCaption||!o.test(e)||n.push(i)})):i.QueryUtils.isStratusAgnosticField(t.options.field,"@objecttype")||i.QueryUtils.isStratusAgnosticField(t.options.field,"@filetype")?u.each(u.filter(u.pairs(s.FileTypes.getFileTypeCaptions()),function(e){return o.test(e[1])}),function(e){n.push(e[0])}):i.QueryUtils.isStratusAgnosticField(t.options.field,"@month")&&u.each(u.range(1,13),function(e){o.test(r.DateUtils.monthToString(e-1))&&n.push(("0"+e.toString()).substr(-2))}),n},e.buildFacetSearchPattern=function(e){return e=u.map(e,function(e){return l.Utils.escapeRegexCharacter(e)}),e[0]=".*"+e[0]+".*",e.join("|")},e.needAnotherFacetSearch=function(e,t,n,o){return e<t&&e<o&&e>n},e.addNoStateCssClassToFacetValues=function(e,t){if(0!=e.values.getSelected().length){var n=a.$$(t).findAll("li:not(.coveo-selected)");u.each(n,function(e){a.$$(e).addClass("coveo-no-state")})}},e.tryToGetTranslatedCaption=function(e,t){var n;if(i.QueryUtils.isStratusAgnosticField(e.toLowerCase(),"@filetype"))n=s.FileTypes.getFileType(t).caption;else if(i.QueryUtils.isStratusAgnosticField(e.toLowerCase(),"@objecttype"))n=s.FileTypes.getObjectType(t).caption;else if(i.QueryUtils.isStratusAgnosticField(e.toLowerCase(),"@month")&&"Search"!=t)try{var o=parseInt(t);n=r.DateUtils.monthToString(o-1)}catch(e){}else n=c.l(t);return void 0!=n&&l.Utils.isNonEmptyString(n)?n:t},e}();t.FacetUtils=p},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(15),s=n(6),r=n(17),l=n(4),a=n(0),u=n(10),c=n(11),p=n(21),h=function(){function e(t){var n=this;this.disabledComponents=[],this.responsiveComponents=[],this.coveoRoot=t,this.searchInterface=s.Component.get(this.coveoRoot.el,r.SearchInterface,!1),this.dropdownHeadersWrapper=o.$$("div",{className:e.DROPDOWN_HEADER_WRAPPER_CSS_CLASS}),this.searchBoxElement=this.getSearchBoxElement(),this.logger=new c.Logger(this),this.resizeListener=function(){0!=n.coveoRoot.width()?(n.addDropdownHeaderWrapperIfNeeded(),n.shouldSwitchToSmallMode()?n.coveoRoot.addClass("coveo-small-interface"):n.shouldSwitchToSmallMode()||n.coveoRoot.removeClass("coveo-small-interface"),a.each(n.responsiveComponents,function(e){e.handleResizeEvent()})):n.logger.warn("The width of the search interface is 0, cannot dispatch resize events to responsive components. This means that the tabs will not\n        automatically fit in the tab section. Also, the facet and recommendation component will not hide in a menu. Could the search\n        interface display property be none? Could its visibility property be set to hidden? Also, if either of these scenarios happen during\n        loading, it could be the cause of this issue.")},p.DeviceUtils.isMobileDevice()||window.addEventListener("resize",this.resizeListener),this.bindNukeEvents()}return e.register=function(t,n,o,s,r){var p=this;(r.initializationEventRoot||n).on(i.InitializationEvents.afterInitialization,function(){if(p.shouldEnableResponsiveMode(n)){var i=a.find(p.componentManagers,function(e){return n.el==e.coveoRoot.el});if(i||(i=new e(n),p.componentManagers.push(i)),!l.Utils.isNullOrUndefined(r.enableResponsiveMode)&&!r.enableResponsiveMode)return void i.disableComponent(o);p.componentInitializations.push({responsiveComponentsManager:i,arguments:[t,n,o,s,r]})}if(0==--p.remainingComponentInitializations)if(p.instantiateResponsiveComponents(),0==n.width()){var h=new c.Logger("ResponsiveComponentsManager");h.info("Search interface width is 0, cannot dispatch resize events to responsive components. Will try again after first\n          query success."),n.one(u.QueryEvents.querySuccess,function(){p.resizeAllComponentsManager()})}else p.resizeAllComponentsManager()}),this.remainingComponentInitializations++},e.shouldEnableResponsiveMode=function(e){var t=s.Component.get(e.el,r.SearchInterface,!0);return t instanceof r.SearchInterface&&t.options.enableAutomaticResponsiveMode},e.instantiateResponsiveComponents=function(){a.each(this.componentInitializations,function(e){var t=e.responsiveComponentsManager;t.register.apply(t,e.arguments)})},e.resizeAllComponentsManager=function(){a.each(this.componentManagers,function(e){e.resizeListener()})},e.prototype.register=function(e,t,n,o,i){if(!this.isDisabled(n)){if(!this.isActivated(n)){var s=new e(t,n,i);this.isTabs(n)?this.responsiveComponents.push(s):this.responsiveComponents.unshift(s)}a.each(this.responsiveComponents,function(e){null!=e.registerComponent&&e.registerComponent(o)})}},e.prototype.disableComponent=function(e){this.disabledComponents.push(e)},e.prototype.isDisabled=function(e){return-1!=a.indexOf(this.disabledComponents,e)},e.prototype.shouldSwitchToSmallMode=function(){var e=this.needDropdownWrapper(),t=this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth();return e||t},e.prototype.needDropdownWrapper=function(){for(var e=0;e<this.responsiveComponents.length;e++){var t=this.responsiveComponents[e];if(t.needDropdownWrapper&&t.needDropdownWrapper())return!0}return!1},e.prototype.addDropdownHeaderWrapperIfNeeded=function(){if(this.needDropdownWrapper()){var e=o.$$(this.coveoRoot).find(".coveo-tab-section");this.searchBoxElement?this.dropdownHeadersWrapper.insertAfter(this.searchBoxElement):e?this.dropdownHeadersWrapper.insertAfter(e):this.coveoRoot.prepend(this.dropdownHeadersWrapper.el)}},e.prototype.isTabs=function(e){return"Tab"==e},e.prototype.isActivated=function(e){return void 0!=a.find(this.responsiveComponents,function(t){return t.ID==e})},e.prototype.getSearchBoxElement=function(){var e=this.coveoRoot.find(".coveo-search-section");return e||this.coveoRoot.find(".CoveoSearchbox")},e.prototype.bindNukeEvents=function(){var t=this;o.$$(this.coveoRoot).on(i.InitializationEvents.nuke,function(){window.removeEventListener("resize",t.resizeListener),e.componentManagers=a.filter(e.componentManagers,function(e){return e.coveoRoot.el!=t.coveoRoot.el})})},e.DROPDOWN_HEADER_WRAPPER_CSS_CLASS="coveo-dropdown-header-wrapper",e.componentManagers=[],e.remainingComponentInitializations=0,e.componentInitializations=[],e}();t.ResponsiveComponentsManager=h},93:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),s=n(7),r=n(10),l=n(1),a=n(15),u=n(5),c=n(32),p=n(96),h=n(2),d=n(12),f=n(16),m=n(9),y=n(20),g=n(347),v=n(4),C=n(0),T=n(3),R=n(8);n(348);var b=n(13),S=n(14);t.defaultLayout="list";var L=function(e){function t(n,o,i){var l=e.call(this,n,t.ID,i)||this;return l.element=n,l.options=o,l.options=s.ComponentOptions.initComponentOptions(n,t,o),l.currentActiveLayouts={},l.bind.onQueryState(f.MODEL_EVENTS.CHANGE_ONE,d.QUERY_STATE_ATTRIBUTES.LAYOUT,l.handleQueryStateChanged.bind(l)),l.bind.onRootElement(r.QueryEvents.querySuccess,function(e){return l.handleQuerySuccess(e)}),l.bind.onRootElement(r.QueryEvents.queryError,function(e){return l.handleQueryError(e)}),l.resultLayoutSection=h.$$(l.element).closest(".coveo-result-layout-section"),l.bind.oneRootElement(a.InitializationEvents.afterComponentsInitialization,function(){return l.populate()}),l.bind.oneRootElement(a.InitializationEvents.afterInitialization,function(){return l.handleQueryStateChanged()}),g.ResponsiveResultLayout.init(l.root,l,{}),l}return o(t,e),Object.defineProperty(t.prototype,"activeLayouts",{get:function(){return this.currentActiveLayouts},enumerable:!0,configurable:!0}),t.prototype.changeLayout=function(e){if(u.Assert.check(this.isLayoutDisplayedByButton(e),"Layout not available or invalid"),e!==this.currentLayout||""===this.getModelValue()){this.setModelValue(e);var t=this.queryController.getLastResults();this.setLayout(e,t),t?this.usageAnalytics.logCustomEvent(m.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:e},this.element):(this.usageAnalytics.logSearchEvent(m.analyticsActionCauseList.resultsLayoutChange,{resultsLayoutChangeTo:e}),this.queryController.executeQuery())}},t.prototype.getCurrentLayout=function(){return this.currentLayout},t.prototype.disableLayouts=function(e){var t=this;if(v.Utils.isNonEmptyArray(e)){C.each(e,function(e){return t.disableLayout(e)});var n=C.difference(C.keys(this.currentActiveLayouts),e);if(C.isEmpty(n)){this.logger.error("Cannot disable the last valid layout ... Re-enabling the first one possible");var o=C.keys(this.currentActiveLayouts)[0];this.enableLayout(o),this.setLayout(o)}else{var i=C.contains(n,this.currentLayout)?this.currentLayout:n[0];this.changeLayout(i)}}},t.prototype.enableLayouts=function(e){var t=this;C.each(e,function(e){t.enableLayout(e)})},t.prototype.disableLayout=function(e){this.isLayoutDisplayedByButton(e)&&this.hideButton(e)},t.prototype.enableLayout=function(e){this.isLayoutDisplayedByButton(e)&&(this.showButton(e),this.updateSelectorAppearance())},t.prototype.hideButton=function(e){if(this.isLayoutDisplayedByButton(e)){var t=this.currentActiveLayouts[e].button;h.$$(t.el).addClass("coveo-hidden"),t.visible=!1,this.updateSelectorAppearance()}},t.prototype.showButton=function(e){if(this.isLayoutDisplayedByButton(e)){var t=this.currentActiveLayouts[e].button;h.$$(t.el).removeClass("coveo-hidden"),t.visible=!0}},t.prototype.setLayout=function(e,t){e&&(this.currentLayout&&h.$$(this.currentActiveLayouts[this.currentLayout].button.el).removeClass("coveo-selected"),h.$$(this.currentActiveLayouts[e].button.el).addClass("coveo-selected"),this.currentLayout=e,h.$$(this.element).trigger(c.ResultListEvents.changeLayout,{layout:e,results:t}))},t.prototype.handleQuerySuccess=function(e){this.hasNoResults=0==e.results.results.length,this.shouldShowSelector()?this.show():this.hide()},t.prototype.handleQueryStateChanged=function(e){var t=this.getModelValue(),n=C.find(C.keys(this.currentActiveLayouts),function(e){return e===t});void 0!==n?this.setLayout(n):this.setLayout(C.keys(this.currentActiveLayouts)[0])},t.prototype.handleQueryError=function(e){this.hasNoResults=!0,this.hide()},t.prototype.updateSelectorAppearance=function(){this.shouldShowSelector()?this.show():this.hide()},t.prototype.populate=function(){var e=this,n={layouts:[]};h.$$(this.root).trigger(p.ResultLayoutEvents.populateResultLayout,n);var o=C.uniq(n.layouts.map(function(e){return e.toLowerCase()}));C.each(o,function(e){return u.Assert.check(C.contains(t.validLayouts,e),"Invalid layout")}),C.isEmpty(o)||(C.each(o,function(t){return e.addButton(t)}),this.shouldShowSelector()||this.hide())},t.prototype.addButton=function(e){var t=this,n=h.$$("span",{className:"coveo-result-layout-selector",tabindex:0},h.$$("span",{className:"coveo-result-layout-selector-caption"},R.l(e))),o=h.$$("span",{className:"coveo-icon coveo-"+e+"-layout-icon"},b.SVGIcons.icons[e+"Layout"]);S.SVGDom.addClassToSVGInContainer(o.el,"coveo-"+e+"-svg"),n.prepend(o.el),e===this.currentLayout&&n.addClass("coveo-selected");var i=function(){return t.changeLayout(e)};n.on("click",i),n.on("keyup",y.KeyboardUtils.keypressAction(y.KEYBOARD.ENTER,i)),h.$$(this.element).append(n.el),this.currentActiveLayouts[e]={button:{visible:!0,el:n.el},enabled:!0}},t.prototype.hide=function(){var e=this.resultLayoutSection||this.element;h.$$(e).addClass("coveo-result-layout-hidden")},t.prototype.show=function(){var e=this.resultLayoutSection||this.element;h.$$(e).removeClass("coveo-result-layout-hidden")},t.prototype.getModelValue=function(){return this.queryStateModel.get(d.QueryStateModel.attributesEnum.layout)},t.prototype.setModelValue=function(e){this.queryStateModel.set(d.QueryStateModel.attributesEnum.layout,e)},t.prototype.shouldShowSelector=function(){return C.keys(this.currentActiveLayouts).length>1&&C.filter(this.currentActiveLayouts,function(e){return e.button.visible}).length>1&&!this.hasNoResults},t.prototype.isLayoutDisplayedByButton=function(e){return C.contains(C.keys(this.currentActiveLayouts),e)},t.ID="ResultLayoutSelector",t.aliases=["ResultLayout"],t.doExport=function(){T.exportGlobally({ResultLayoutSelector:t,ResultLayout:t})},t.validLayouts=["list","card","table"],t.options={mobileLayouts:s.ComponentOptions.buildListOption({defaultValue:["card","table"]}),tabletLayouts:s.ComponentOptions.buildListOption({defaultValue:["list","card","table"]}),desktopLayouts:s.ComponentOptions.buildListOption({defaultValue:["list","card","table"]})},t}(i.Component);t.ResultLayoutSelector=L,l.Initialization.registerAutoCreateComponent(L)},98:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(327),s=n(86),r=n(6),l=n(7),a=n(5),u=n(10),c=n(16),p=n(12),h=n(19),d=n(2),f=n(9),m=n(1),y=n(28),g=n(21),v=n(32),C=n(96),T=n(4),R=n(63),b=n(328),S=n(70),L=n(55),w=n(357),E=n(153),A=n(358),O=n(359),H=n(3);n(360),n(361),n(362);var $=n(135),D=n(52),_=n(332),I=n(0),M=n(93),F=n(363);_.CoreHelpers.exportAllHelpersGlobally(window.Coveo);var U=function(e){function t(n,o,i,s){void 0===s&&(s=t.ID);var r=e.call(this,n,s,i)||this;return r.element=n,r.options=o,r.bindings=i,r.currentlyDisplayedResults=[],r.reachedTheEndOfResults=!1,r.disableLayoutChange=!1,r.successiveScrollCount=0,r.options=l.ComponentOptions.initComponentOptions(n,t,o),a.Assert.exists(n),a.Assert.exists(r.options),a.Assert.exists(r.options.resultTemplate),a.Assert.exists(r.options.infiniteScrollContainer),r.showOrHideElementsDependingOnState(!1,!1),r.bind.onRootElement(u.QueryEvents.newQuery,function(e){return r.handleNewQuery()}),r.bind.onRootElement(u.QueryEvents.buildingQuery,function(e){return r.handleBuildingQuery(e)}),r.bind.onRootElement(u.QueryEvents.querySuccess,function(e){return r.handleQuerySuccess(e)}),r.bind.onRootElement(u.QueryEvents.duringQuery,function(e){return r.handleDuringQuery()}),r.bind.onRootElement(u.QueryEvents.queryError,function(e){return r.handleQueryError()}),d.$$(r.root).on(v.ResultListEvents.changeLayout,function(e,t){return r.handleChangeLayout(t)}),r.options.enableInfiniteScroll&&(r.handlePageChanged(),r.bind.on(r.options.infiniteScrollContainer,"scroll",function(e){r.successiveScrollCount=0,r.handleScrollOfResultList()})),r.bind.onQueryState(c.MODEL_EVENTS.CHANGE_ONE,p.QUERY_STATE_ATTRIBUTES.FIRST,function(){return r.handlePageChanged()}),r.initResultContainer(),a.Assert.exists(r.options.resultContainer),r.initWaitAnimationContainer(),a.Assert.exists(r.options.waitAnimationContainer),r.setupTemplatesVersusLayouts(),d.$$(r.root).on(C.ResultLayoutEvents.populateResultLayout,function(e,t){return t.layouts.push(r.options.layout)}),r.setupRenderer(),r}return o(t,e),t.getDefaultTemplate=function(e){var n=t.loadTemplatesFromCache();if(null!=n)return n;var o=r.Component.get(e);return Coveo.Recommendation&&o.searchInterface instanceof Coveo.Recommendation?new b.DefaultRecommendationTemplate:new s.DefaultResultTemplate},t.loadTemplatesFromCache=function(){var e=L.TemplateCache.getResultListTemplateNames();return e.length>0?new S.TemplateList(I.compact(I.map(e,function(e){return L.TemplateCache.getTemplate(e)}))):null},t.prototype.getAutoSelectedFieldsToInclude=function(){return I.chain(this.options.resultTemplate.getFields()).concat(this.getMinimalFieldsToInclude()).compact().unique().value()},t.prototype.setupTemplatesVersusLayouts=function(){var e=this,t="coveo-"+this.options.layout+"-layout-container";this.resultContainer.addClass(t),"table"===this.options.layout&&(this.options.resultTemplate=new i.TableTemplate(this.options.resultTemplate.templates||[])),this.options.resultTemplate instanceof S.TemplateList?I.each(this.options.resultTemplate.templates,function(t){t.layout||(t.layout=e.options.layout)}):this.options.resultTemplate instanceof s.DefaultResultTemplate&&"list"==this.options.layout&&w.ResponsiveDefaultResultTemplate.init(this.root,this,{})},t.prototype.renderResults=function(e,t){var n=this;return void 0===t&&(t=!1),t||this.resultContainer.empty(),this.renderer.renderResults(e,t,this.triggerNewResultDisplayed.bind(this)).then(function(){return n.triggerNewResultsDisplayed()})},t.prototype.buildResults=function(e){var n=this,o=[],i=I.map(e.results,function(e,i){return n.buildResult(e).then(function(e){return null!=e&&o.push({elem:e,idx:i}),t.resultCurrentlyBeingRendered=null,e})});return Promise.all(i).then(function(){return I.pluck(I.sortBy(o,"idx"),"elem")})},t.prototype.buildResult=function(e){var n=this;return a.Assert.exists(e),h.QueryUtils.setStateObjectOnQueryResult(this.queryStateModel.get(),e),h.QueryUtils.setSearchInterfaceObjectOnQueryResult(this.searchInterface,e),t.resultCurrentlyBeingRendered=e,this.options.resultTemplate.instantiateToElement(e,{wrapInDiv:!0,checkCondition:!0,currentLayout:this.options.layout,responsiveComponents:this.searchInterface.responsiveComponents}).then(function(t){return null!=t&&r.Component.bindResultToElement(t,e),n.currentlyDisplayedResults.push(e),n.autoCreateComponentsInsideResult(t,e).initResult.then(function(){return t})})},t.prototype.displayMoreResults=function(e){var n=this;return a.Assert.isLargerOrEqualsThan(1,e),this.isCurrentlyFetchingMoreResults()?void this.logger.warn("Ignoring request to display more results since we're already doing so"):this.hasPotentiallyMoreResultsToDisplay()?(this.options.enableInfiniteScrollWaitingAnimation&&this.showWaitingAnimationForInfiniteScrolling(),this.fetchingMoreResults=this.queryController.fetchMore(e),this.fetchingMoreResults.then(function(t){a.Assert.exists(t),n.usageAnalytics.logCustomEvent(f.analyticsActionCauseList.pagerScrolling,{},n.element);var o=t.results;n.reachedTheEndOfResults=e>t.results.length,n.buildResults(t).then(function(e){n.renderResults(e,!0),I.each(o,function(e){n.currentlyDisplayedResults.push(e)}),n.triggerNewResultsDisplayed()})}),this.fetchingMoreResults.finally(function(){n.hideWaitingAnimationForInfiniteScrolling(),n.fetchingMoreResults=void 0,y.Defer.defer(function(){n.successiveScrollCount++,n.successiveScrollCount<=t.MAX_AMOUNT_OF_SUCESSIVE_REQUESTS?n.handleScrollOfResultList():(n.logger.info("Result list has triggered 5 consecutive queries to try and fill up the scrolling container, but it is still unable to do so"),n.logger.info("Try explicitly setting the 'data-infinite-scroll-container-selector' option on the result list. See : https://coveo.github.io/search-ui/components/resultlist.html#options.infinitescrollcontainer"))})}),this.fetchingMoreResults):void this.logger.warn("Ignoring request to display more results since we know there aren't more to display")},t.prototype.getDisplayedResults=function(){return this.currentlyDisplayedResults},t.prototype.getDisplayedResultsElements=function(){return this.resultContainer.getResultElements()},t.prototype.enable=function(){var t=this;e.prototype.enable.call(this),this.disableLayoutChange=!1,I.each(this.resultLayoutSelectors,function(e){e.enableLayouts([t.options.layout])}),d.$$(this.element).removeClass("coveo-hidden")},t.prototype.disable=function(){var t=this;e.prototype.disable.call(this);var n=I.map(this.otherResultLists,function(e){return e.options.layout});I.contains(n,this.options.layout)||this.disableLayoutChange||I.each(this.resultLayoutSelectors,function(e){e.disableLayouts([t.options.layout])}),this.disableLayoutChange=!1,d.$$(this.element).addClass("coveo-hidden")},t.prototype.autoCreateComponentsInsideResult=function(e,t){return a.Assert.exists(e),m.Initialization.automaticallyCreateComponentsInsideResult(e,t)},t.prototype.triggerNewResultDisplayed=function(e,t){var n={result:e,item:t};d.$$(this.element).trigger(v.ResultListEvents.newResultDisplayed,n)},t.prototype.triggerNewResultsDisplayed=function(){d.$$(this.element).trigger(v.ResultListEvents.newResultsDisplayed,{})},t.prototype.handleDuringQuery=function(){this.logger.trace("Emptying the result container"),this.cancelFetchingMoreResultsIfNeeded(),this.showWaitingAnimation(),this.showOrHideElementsDependingOnState(!1,!1)},t.prototype.handleQueryError=function(){this.hideWaitingAnimation(),this.resultContainer.empty(),this.currentlyDisplayedResults=[],this.reachedTheEndOfResults=!0},t.prototype.handleQuerySuccess=function(e){var n=this;a.Assert.exists(e),a.Assert.exists(e.results);var o=e.results;this.logger.trace("Received query results from new query",o),this.hideWaitingAnimation(),t.resultCurrentlyBeingRendered=void 0,this.reachedTheEndOfResults=e.query.numberOfResults>e.results.results.length,this.currentlyDisplayedResults=[],this.buildResults(e.results).then(function(t){n.renderResults(t),n.showOrHideElementsDependingOnState(!0,0!=n.currentlyDisplayedResults.length),g.DeviceUtils.isMobileDevice()&&void 0!=n.options.mobileScrollContainer&&(n.options.mobileScrollContainer.scrollTop=0),n.options.enableInfiniteScroll&&o.results.length==e.queryBuilder.numberOfResults&&(n.scrollBackToTop(),n.handleScrollOfResultList())})},t.prototype.handleScrollOfResultList=function(){!this.isCurrentlyFetchingMoreResults()&&this.options.enableInfiniteScroll&&this.isScrollingOfResultListAlmostAtTheBottom()&&this.hasPotentiallyMoreResultsToDisplay()&&this.displayMoreResults(this.options.infiniteScrollPageSize)},t.prototype.handlePageChanged=function(){var e=this;this.bind.onRootElement(u.QueryEvents.deferredQuerySuccess,function(){setTimeout(function(){e.scrollBackToTop()},0)})},t.prototype.scrollBackToTop=function(){if(this.options.infiniteScrollContainer instanceof Window){var e=this.options.infiniteScrollContainer,t=e.pageYOffset+this.searchInterface.element.getBoundingClientRect().top;e.scrollTo(0,t)}else{this.options.infiniteScrollContainer.scrollTop=0}},t.prototype.handleNewQuery=function(){d.$$(this.element).removeClass("coveo-hidden"),t.resultCurrentlyBeingRendered=void 0},Object.defineProperty(t.prototype,"otherResultLists",{get:function(){var e=this.searchInterface.getComponents(t.ID);return I.without(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resultLayoutSelectors",{get:function(){return this.searchInterface.getComponents(M.ResultLayoutSelector.ID)},enumerable:!0,configurable:!0}),t.prototype.handleBuildingQuery=function(e){if(null!=this.options.fieldsToInclude&&e.queryBuilder.addFieldsToInclude(I.map(this.options.fieldsToInclude,function(e){return e.substr(1)})),this.options.autoSelectFieldsToInclude){var t=I.flatten(I.map(this.otherResultLists,function(e){return e.getAutoSelectedFieldsToInclude()}));e.queryBuilder.addRequiredFields(I.unique(t.concat(this.getAutoSelectedFieldsToInclude()))),e.queryBuilder.includeRequiredFields=!0}},t.prototype.handleChangeLayout=function(e){var t=this;e.layout===this.options.layout?(this.disableLayoutChange=!1,this.enable(),this.options.resultTemplate.layout=this.options.layout,e.results&&(this.resultContainer.isEmpty()&&new $.InitializationPlaceholder(this.root).withVisibleRootElement().withPlaceholderForResultList(),y.Defer.defer(function(){t.buildResults(e.results).then(function(e){t.renderResults(e)})}))):(this.disableLayoutChange=!0,this.disable(),this.resultContainer.empty())},t.prototype.isCurrentlyFetchingMoreResults=function(){return T.Utils.exists(this.fetchingMoreResults)},t.prototype.getMinimalFieldsToInclude=function(){return["author","language","urihash","objecttype","collection","source","language","permanentid"]},t.prototype.isScrollingOfResultListAlmostAtTheBottom=function(){var e;try{e=this.options.infiniteScrollContainer instanceof Window}catch(t){e=!1}return e?this.isScrollAtBottomForWindowElement():this.isScrollAtBottomForHtmlElement()},t.prototype.isScrollAtBottomForWindowElement=function(){var e=new d.Win(window),t=e.height(),n=e.scrollY();return new d.Doc(document).height()-(t+n)<t/2},t.prototype.isScrollAtBottomForHtmlElement=function(){var e=this.options.infiniteScrollContainer,t=e.clientHeight;return e.scrollHeight-(e.scrollTop+t)<t/2},t.prototype.hasPotentiallyMoreResultsToDisplay=function(){return this.currentlyDisplayedResults.length>0&&!this.reachedTheEndOfResults},t.prototype.cancelFetchingMoreResultsIfNeeded=function(){this.isCurrentlyFetchingMoreResults()&&(this.logger.trace("Cancelling fetching more results"),Promise.reject(this.fetchingMoreResults),this.fetchingMoreResults=void 0)},t.prototype.showOrHideElementsDependingOnState=function(e,t){var n=d.$$(this.element).findAll(".coveo-show-if-query"),o=d.$$(this.element).findAll(".coveo-show-if-no-query"),i=d.$$(this.element).findAll(".coveo-show-if-results"),s=d.$$(this.element).findAll(".coveo-show-if-no-results");I.each(n,function(t){d.$$(t).toggle(e)}),I.each(o,function(t){d.$$(t).toggle(!e)}),I.each(i,function(n){d.$$(n).toggle(e&&t)}),I.each(s,function(n){d.$$(n).toggle(e&&!t)})},t.prototype.showWaitingAnimation=function(){switch(this.options.waitAnimation.toLowerCase()){case"fade":d.$$(this.options.waitAnimationContainer).addClass("coveo-fade-out");break;case"spinner":this.resultContainer.hideChildren(),void 0==d.$$(this.options.waitAnimationContainer).find(".coveo-wait-animation")&&this.options.waitAnimationContainer.appendChild(R.DomUtils.getBasicLoadingAnimation())}},t.prototype.hideWaitingAnimation=function(){switch(this.options.waitAnimation.toLowerCase()){case"fade":d.$$(this.options.waitAnimationContainer).removeClass("coveo-fade-out");break;case"spinner":var e=d.$$(this.options.waitAnimationContainer).find(".coveo-loading-spinner");e&&d.$$(e).detach()}},t.prototype.showWaitingAnimationForInfiniteScrolling=function(){var e=R.DomUtils.getLoadingSpinner();if("card"==this.options.layout&&this.options.enableInfiniteScroll){var t=d.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner-container");I.each(t,function(e){return d.$$(e).remove()});var n=d.$$("div",{className:"coveo-loading-spinner-container"});n.append(e),this.options.waitAnimationContainer.appendChild(n.el)}else this.options.waitAnimationContainer.appendChild(R.DomUtils.getLoadingSpinner())},t.prototype.hideWaitingAnimationForInfiniteScrolling=function(){var e=d.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner"),t=d.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner-container");I.each(e,function(e){return d.$$(e).remove()}),I.each(t,function(e){return d.$$(e).remove()})},t.prototype.initResultContainer=function(){if(!this.options.resultContainer){var e="table"===this.options.layout?"table":"div";this.options.resultContainer=d.$$(e,{className:"coveo-result-list-container"}).el,this.element.appendChild(this.options.resultContainer)}this.resultContainer=new F.ResultContainer(this.options.resultContainer,this.searchInterface)},t.prototype.initWaitAnimationContainer=function(){this.options.waitAnimationContainer||(this.options.waitAnimationContainer=this.resultContainer.el)},t.prototype.setupRenderer=function(){var e={options:this.searchInterface.options.originalOptionsObject,bindings:this.bindings},t=function(t){return m.Initialization.automaticallyCreateComponentsInside(t,e)};switch(this.options.layout){case"card":this.renderer=new O.ResultListCardRenderer(this.options,t);break;case"table":this.renderer=new A.ResultListTableRenderer(this.options,t);break;case"list":default:this.renderer=new E.ResultListRenderer(this.options,t)}},t.ID="ResultList",t.doExport=function(){H.exportGlobally({ResultList:t})},t.options={resultContainer:l.ComponentOptions.buildChildHtmlElementOption(),resultTemplate:D.TemplateComponentOptions.buildTemplateOption({defaultFunction:t.getDefaultTemplate}),waitAnimation:l.ComponentOptions.buildStringOption({defaultValue:"none"}),waitAnimationContainer:l.ComponentOptions.buildChildHtmlElementOption({postProcessing:function(e,t){return e||t.resultContainer}}),enableInfiniteScroll:l.ComponentOptions.buildBooleanOption({defaultValue:!1}),infiniteScrollPageSize:l.ComponentOptions.buildNumberOption({defaultValue:10,min:1,depend:"enableInfiniteScroll"}),infiniteScrollContainer:l.ComponentOptions.buildChildHtmlElementOption({depend:"enableInfiniteScroll",defaultFunction:function(e){return l.ComponentOptions.findParentScrolling(e)}}),enableInfiniteScrollWaitingAnimation:l.ComponentOptions.buildBooleanOption({depend:"enableInfiniteScroll",defaultValue:!0}),mobileScrollContainer:l.ComponentOptions.buildSelectorOption({defaultFunction:function(){return document.querySelector(".coveo-results-column")}}),autoSelectFieldsToInclude:l.ComponentOptions.buildBooleanOption({defaultValue:!1}),fieldsToInclude:l.ComponentOptions.buildFieldsOption({includeInResults:!0}),layout:l.ComponentOptions.buildStringOption({defaultValue:"list",required:!0})},t.resultCurrentlyBeingRendered=null,t.MAX_AMOUNT_OF_SUCESSIVE_REQUESTS=5,t}(r.Component);t.ResultList=U,m.Initialization.registerAutoCreateComponent(U)}});