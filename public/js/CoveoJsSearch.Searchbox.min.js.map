{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","CoveoJsSearch.Searchbox.min.js","webpack:///webpack/bootstrap 164a25d9a2d8a3768e58?cb2a","./src/SearchboxIndex.ts","webpack:///./src/BaseModules.ts?81e3","webpack:///./src/strings/DefaultLanguage.ts?3429","webpack:///./lib/globalize.min.js?b81d","webpack:///./src/misc/PromisesShim.ts?2dd1","webpack:///./~/es6-promise/dist/es6-promise.js?0397","webpack:///(webpack)/~/node-libs-browser/~/process/browser.js?6f0e","webpack:///./src/misc/CustomEventPolyfill.ts?2316","webpack:///./src/misc/Version.ts?7c9b","webpack:///./src/rest/SearchEndpoint.ts?ebfb","webpack:///./~/underscore/underscore-min.js?d09e","webpack:///(webpack)/buildin/amd-options.js?5f71","webpack:///./src/rest/EndpointCaller.ts?9524","webpack:///./src/misc/Logger.ts?812a","webpack:///./src/misc/Assert.ts?ab17","webpack:///./src/utils/Utils.ts?4fa9","webpack:///./src/utils/TimeSpanUtils.ts?7e8d","webpack:///./src/utils/DeviceUtils.ts?da24","webpack:///./src/rest/AjaxError.ts?9fd8","webpack:///./src/rest/MissingAuthenticationError.ts?847b","webpack:///./src/utils/QueryUtils.ts?2baa","webpack:///./src/rest/QueryError.ts?b451","webpack:///./src/ExternalModulesShim.ts?c85a","webpack:///./~/modal-box/bin/ModalBox.min.js?f25b","webpack:///./~/coveomagicbox/bin/MagicBox.min.js?52c3","webpack:///./lib/l10n.min.js?0911","webpack:///./src/MiscModules.ts?f1fb","webpack:///./src/misc/Cache.ts?344e","webpack:///./src/misc/Defer.ts?85dc","webpack:///./src/misc/L10N.ts?d79f","webpack:///./src/misc/Options.ts?167a","webpack:///./src/strings/Strings.ts?298f","webpack:///./src/RestModules.ts?3eeb","webpack:///./src/rest/AnalyticsEndpoint.ts?d5bd","webpack:///./src/utils/CookieUtils.ts?567c","webpack:///./src/EventsModules.ts?ea18","webpack:///./src/events/AdvancedSearchEvents.ts?fdef","webpack:///./src/events/AnalyticsEvents.ts?a536","webpack:///./src/events/BreadcrumbEvents.ts?0f5b","webpack:///./src/events/DebugEvents.ts?502a","webpack:///./src/events/ImageResultListEvents.ts?e7fd","webpack:///./src/events/InitializationEvents.ts?4eb6","webpack:///./src/events/OmniboxEvents.ts?4bc0","webpack:///./src/events/PreferencesPanelEvents.ts?3a7a","webpack:///./src/events/QueryEvents.ts?adeb","webpack:///./src/events/ResultListEvents.ts?4069","webpack:///./src/events/SearchAlertEvents.ts?f78f","webpack:///./src/events/SettingsEvents.ts?6f8d","webpack:///./src/events/SliderEvents.ts?3778","webpack:///./src/events/StandaloneSearchInterfaceEvents.ts?443d","webpack:///./src/UtilsModules.ts?0b52","webpack:///./src/utils/ColorUtils.ts?b3ee","webpack:///./src/utils/CurrencyUtils.ts?b430","webpack:///./src/utils/DateUtils.ts?f2a9","webpack:///./src/utils/Dom.ts?2cc3","webpack:///./src/utils/JQueryutils.ts?4df1","webpack:///./src/utils/DomUtils.ts?1c03","webpack:///./src/ui/Misc/FileTypes.ts?463e","webpack:///./src/utils/StringUtils.ts?a4a1","webpack:///./src/utils/EmailActionsUtils.ts?8d42","webpack:///./src/utils/EmailUtils.ts?a8cc","webpack:///./src/utils/FeatureDetectionUtils.ts?827f","webpack:///./src/utils/HashUtils.ts?8529","webpack:///./src/utils/HighlightUtils.ts?fdc3","webpack:///./src/utils/HtmlUtils.ts?36bc","webpack:///./src/utils/KeyboardUtils.ts?dfdd","webpack:///./src/utils/LocalStorageUtils.ts?d196","webpack:///./src/utils/OSUtils.ts?1e1b","webpack:///./src/utils/PopupUtils.ts?d693","webpack:///./src/utils/StreamHighlightUtils.ts?5a26","webpack:///./src/ControllersModules.ts?5ebc","webpack:///./src/controllers/QueryController.ts?3762","webpack:///./src/ui/Base/RootComponent.ts?7b17","webpack:///./src/ui/Base/BaseComponent.ts?c9e3","webpack:///./src/ui/Base/QueryBuilder.ts?f1dc","webpack:///./src/ui/Base/ExpressionBuilder.ts?f51e","webpack:///./src/rest/SearchEndpointWithDefaultCallOptions.ts?27b4","webpack:///./src/controllers/FacetQueryController.ts?9ae2","webpack:///./src/ui/Facet/FacetSearchParameters.ts?fafe","webpack:///./src/ui/Facet/FacetUtils.ts?0e7e","webpack:///./src/controllers/FacetRangeQueryController.ts?4e0f","webpack:///./src/controllers/FacetSliderQueryController.ts?5a80","webpack:///./src/controllers/HierarchicalFacetQueryController.ts?f80c","webpack:///./src/controllers/HistoryController.ts?81ae","webpack:///./src/models/Model.ts?2199","webpack:///./src/controllers/LocalStorageHistoryController.ts?fe30","webpack:///./src/ModelsModules.ts?7f2a","webpack:///./src/models/QueryStateModel.ts?f2ee","webpack:///./src/models/ComponentOptionsModel.ts?b90a","webpack:///./src/models/ComponentStateModel.ts?a4c3","webpack:///./src/UIBaseModules.ts?e0b5","webpack:///./src/ui/Base/RegisteredNamedMethods.ts?f718","webpack:///./src/ui/Base/Initialization.ts?7693","webpack:///./src/ui/Base/Component.ts?2a0e","webpack:///./src/ui/SearchInterface/SearchInterface.ts?fe45","webpack:///./src/ui/Base/ComponentOptions.ts?7973","webpack:///./src/ui/Templates/TemplateCache.ts?9176","webpack:///./src/ui/Templates/Template.ts?b639","webpack:///./src/ui/Templates/UnderscoreTemplate.ts?fb59","webpack:///./src/ui/Templates/HtmlTemplate.ts?d1db","webpack:///./src/ui/Templates/TemplateList.ts?e0bf","webpack:///./src/ui/Templates/DefaultResultTemplate.ts?b52f","webpack:///./src/ui/Analytics/NoopAnalyticsClient.ts?2a0e","webpack:///./src/ui/Debug/Debug.ts?438d","webpack:///./lib/fastclick.min.js?d169","webpack:///./lib/jstz.min.js?966a","webpack:///./src/misc/SentryLogger.ts?a1ee","webpack:///./src/ui/Analytics/AnalyticsActionListMeta.ts?1d51","webpack:///./src/ui/Recommendation/Recommendation.ts?73b3","webpack:///./src/events/QuickviewEvents.ts?03e4","webpack:///./src/ui/Analytics/Analytics.ts?a7b9","webpack:///./src/ui/Analytics/LiveAnalyticsClient.ts?817b","webpack:///./src/ui/Analytics/PendingSearchEvent.ts?772e","webpack:///./src/rest/APIAnalyticsBuilder.ts?3797","webpack:///./src/ui/Analytics/PendingSearchAsYouTypeSearchEvent.ts?e507","webpack:///./src/ui/Analytics/MultiAnalyticsClient.ts?83e1","webpack:///./src/ui/Analytics/RecommendationAnalyticsClient.ts?9378","webpack:///./src/ui/Base/CoveoJQuery.ts?464a","webpack:///./src/TemplatesModules.ts?348c","webpack:///./src/ui/Templates/TemplateHelpers.ts?8909","webpack:///./src/ui/Templates/CoreHelpers.ts?3c29","webpack:///./src/ui/Icon/Icon.ts?95e4","webpack:///./src/ui/Quickview/Quickview.ts?0067","webpack:///./src/ui/Quickview/DefaultQuickviewTemplate.ts?ca63","webpack:///./src/ui/Quickview/QuickviewDocument.ts?3253","webpack:///./src/ui/ResultList/ResultList.ts?b63f","webpack:///./src/ui/Templates/DefaultRecommendationTemplate.ts?8c6e","webpack:///./src/ui/Querybox/Querybox.ts?c246","webpack:///./src/ui/Querybox/QueryboxQueryParameters.ts?2ba3","webpack:///./src/ui/SearchButton/SearchButton.ts?9e41","webpack:///./src/ui/Searchbox/Searchbox.ts?2a27","webpack:///./src/ui/Omnibox/Omnibox.ts?a863","webpack:///./src/ui/Omnibox/FieldAddon.ts?e792","webpack:///./src/ui/Omnibox/QueryExtensionAddon.ts?ffad","webpack:///./src/ui/Omnibox/RevealQuerySuggestAddon.ts?37d9","webpack:///./src/ui/Omnibox/OldOmniboxAddon.ts?0e5e","webpack:///./src/ui/Misc/SuggestionForOmnibox.ts?c160","webpack:///./src/ui/AnalyticsSuggestions/AnalyticsSuggestions.ts?f86f","webpack:///./src/ui/FieldSuggestions/FieldSuggestions.ts?4053","webpack:///./src/SwapVar.ts?ac32"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__export","hasOwnProperty","Analytics_1","Analytics","AnalyticsSuggestions_1","AnalyticsSuggestions","FieldSuggestions_1","FieldSuggestions","Omnibox_1","Omnibox","Querybox_1","Querybox","SearchButton_1","SearchButton","Searchbox_1","Searchbox","SwapVar_1","swapVar","DefaultLanguage_1","defaultLanguage","DefaultLanguage_2","setLanguageAfterPageLoaded","PromisesShim_1","shim","CustomEventPolyfill_1","customEventPolyfill","Version_1","version","SearchEndpoint_1","SearchEndpoint","undefined","window","fn","jquery","$","locales","String","merge","dict","en","Globalize","culture","document","addEventListener","event","obj1","obj2","obj3","attrname","Unknown","And","Authenticating","Clear","CompleteQuery","Exclude","EnterTag","Next","Last","Link","Or","Previous","QueryDidntMatchAnyDocuments","QueryException","Me","Remove","Search","SearchFor","ShareQuery","Preferences","LinkOpeningSettings","Reauthenticate","ResultsFilteringExpression","FiltersInYourPreferences","Create","SearchIn","Seconds","ShowingResultsOf","SwitchTo","Unexclude","ClearAllFilters","SkipLogin","LoginInProgress","Login","GetStarted","More","NMore","Less","Settings","Score","ScoreDescription","Occurrences","OccurrencesDescription","Label","Of","LabelDescription","Value","ValueDescription","AlphaAscending","AlphaDescending","ChiSquare","Nosort","RelativeFrequency","RelativeFrequencyDescription","DateDistribution","Custom","CustomDescription","ComputedField","Ascending","Descending","noResultFor","autoCorrectedQueryTo","didYouMean","SuggestedResults","SuggestedQueries","MostRelevantItems","AllItems","ShowLess","ShowMore","HideFacet","ShowFacet","AndOthers","Others","MostRelevantPosts","CompleteThread","ShowCompleteThread","ShowOnlyTopMatchingPosts","MostRelevantReplies","AllConversation","ShowAllConversation","ShowAllReplies","ShowOnlyMostRelevantReplies","Close","Open","OpenInOutlookWhenPossible","AlwaysOpenInNewWindow","Quickview","NoQuickview","ErrorReport","OopsError","ProblemPersists","GoBack","Reset","Retry","MoreInfo","Username","Password","PostedBy","CannotConnect","BadUserPass","PleaseEnterYourCredentials","PleaseEnterYourSearchPage","Collapse","Collapsable","Expand","Today","Yesterday","Tomorrow","Duration","IndexDuration","ProxyDuration","ClientDuration","Unavailable","Reply","ReplyAll","Forward","From","Caption","Expression","Tab","Tabs","EnterExpressionName","EnterExpressionToFilterWith","SelectTab","SelectAll","PageUrl","ErrorSavingToDevice","ErrorReadingFromDevice","AppIntro","TryDemo","ContactUs","NewToCoveo","LetUsHelpGetStarted","LikesThis","CannotConnectSearchPage","AreYouSureDeleteFilter","OnlineHelp","Done","SaveFacetState","ClearFacetState","DisplayingTheOnlyMessage","NoNetworkConnection","UnknownConnection","EthernetConnection","WiFi","CELL","CELL_2G","CELL_3G","CELL_4G","Relevance","Date","Amount","QueryExceptionNoException","QueryExceptionInvalidSyntax","QueryExceptionInvalidCustomField","QueryExceptionInvalidDate","QueryExceptionInvalidExactPhrase","QueryExceptionInvalidDateOp","QueryExceptionInvalidNear","QueryExceptionInvalidWeightedNear","QueryExceptionInvalidTerm","QueryExceptionTooManyTerms","QueryExceptionWildcardTooGeneral","QueryExceptionInvalidSortField","QueryExceptionInvalidSmallStringOp","QueryExceptionRequestedResultsMax","QueryExceptionAggregatedMirrorDead","QueryExceptionAggregatedMirrorQueryTimeOut","QueryExceptionAggregatedMirrorInvalidBuildNumber","QueryExceptionAggregatedMirrorCannotConnect","QueryExceptionNotEnoughLeadingCharsWildcard","QueryExceptionSecurityInverterNotFound","QueryExceptionSecurityInverterAccessDenied","QueryExceptionAggregatedMirrorCannotImpersonate","QueryExceptionUnexpected","QueryExceptionAccessDenied","QueryExceptionSuperUserTokenInvalid","QueryExceptionSuperUserTokenExpired","QueryExceptionLicenseQueriesExpired","QueryExceptionLicenseSuperUserTokenNotSupported","QueryExceptionInvalidSession","QueryExceptionInvalidDocument","QueryExceptionSearchDisabled","FileType","ShowAttachment","OnFeed","Author","NoTitle","CurrentSelections","AllContent","CancelLastAction","SearchTips","CheckSpelling","TryUsingFewerKeywords","SelectFewerFilters","Document","Time","StartDate","StartTime","DurationTitle","UserQuery","ShowUserActions","NoData","EventType","GoToFullSearch","GoToEdition","RemoveContext","BoxAttachToCase","AttachToCase","Attach","Attached","Detach","Details","AdditionalFilters","SelectNonContextualSearch","CopyPasteToSupport","FollowQueryDescription","SearchAlerts_Panel","SearchAlerts_PanelDescription","SearchAlerts_PanelNoSearchAlerts","SearchAlerts_Fail","SearchAlerts_Type","SearchAlerts_Content","SearchAlerts_Actions","EmptyQuery","SearchAlerts_Type_followQuery","SearchAlerts_Type_followDocument","SearchAlerts_unFollowing","SearchAlerts_follow","SearchAlerts_followed","SearchAlerts_followQuery","Subscription_StopFollowingQuery","SearchAlerts_Frequency","SubscriptionsManageSubscriptions","SubscriptionsMessageFollowQuery","SubscriptionsMessageFollow","Expiration","Monthly","Daily","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","StartTypingCaseForSuggestions","ExportToExcel","ExportToExcelDescription","CaseCreationNoResults","SortBy","BoxCreateArticle","Facets","AdvancedSearch","Keywords","AllTheseWords","ExactPhrase","AnyOfTheseWords","NoneOfTheseWords","Anytime","InTheLast","Days","Months","Between","Language","Size","AtLeast","AtMost","Contains","DoesNotContain","Matches","Bytes","objecttype_people","objecttype_message","objecttype_feed","objecttype_thread","objecttype_file","objecttype_board","objecttype_category","objecttype_account","objecttype_campaign","objecttype_case","objecttype_contact","objecttype_contract","objecttype_event","objecttype_lead","objecttype_solution","objecttype_task","objecttype_user","objecttype_attachment","objecttype_casecomment","objecttype_opportunity","objecttype_feeditem","objecttype_feedcomment","objecttype_note","objecttype_product","objecttype_partner","objecttype_kbdocumentation","objecttype_kbtechnicalarticle","objecttype_kbsolution","objecttype_kbknowledgearticle","objecttype_kbattachment","filetype_html","filetype_wiki","filetype_webscraperwebpage","filetype_image","filetype_folder","filetype_txt","filetype_zip","filetype_pdf","filetype_xml","filetype_doc","filetype_xls","filetype_ppt","filetype_video","filetype_youtube","filetype_saleforceitem","filetype_exchangemessage","filetype_exchangeappointment","filetype_exchangenote","filetype_exchangetask","filetype_exchangeperson","filetype_activedirperson","filetype_exchangeactivity","filetype_exchangecalendarmessage","filetype_exchangedocument","filetype_exchangerssfeed","filetype_exchangejunkmessage","filetype_exchangeofficecom","filetype_lithiummessage","filetype_lithiumthread","filetype_lithiumboard","filetype_lithiumcategory","filetype_lithiumcommunity","filetype_spportal","filetype_spsite","filetype_spuserprofile","filetype_sparea","filetype_spannouncement","filetype_spannouncementlist","filetype_spcontact","filetype_spcontactlist","filetype_spcustomlist","filetype_spdiscussionboard","filetype_spdiscussionboardlist","filetype_spdocumentlibrarylist","filetype_spevent","filetype_speventlist","filetype_spformlibrarylist","filetype_spissue","filetype_spissuelist","filetype_splink","filetype_splinklist","filetype_sppicturelibrarylist","filetype_spsurvey","filetype_spsurveylist","filetype_sptask","filetype_sptasklist","filetype_spagenda","filetype_spagendalist","filetype_spattendee","filetype_spattendeelist","filetype_spcustomgridlist","filetype_spdecision","filetype_spdecisionlist","filetype_spobjective","filetype_spobjectivelist","filetype_sptextbox","filetype_sptextboxlist","filetype_spthingstobring","filetype_spthingstobringlist","filetype_sparealisting","filetype_spmeetingserie","filetype_spmeetingserielist","filetype_spsitedirectory","filetype_spsitedirectorylist","filetype_spdatasource","filetype_spdatasourcelist","filetype_splisttemplatecataloglist","filetype_spwebpartcataloglist","filetype_spwebtemplatecataloglist","filetype_spworkspacepagelist","filetype_spunknownlist","filetype_spadministratortask","filetype_spadministratortasklist","filetype_spareadocumentlibrarylist","filetype_spblogcategory","filetype_spblogcategorylist","filetype_spblogcomment","filetype_spblogcommentlist","filetype_spblogpost","filetype_spblogpostlist","filetype_spdataconnectionlibrarylist","filetype_spdistributiongroup","filetype_spdistributiongrouplist","filetype_spipfslist","filetype_spkeyperformanceindicator","filetype_spkeyperformanceindicatorlist","filetype_splanguagesandtranslator","filetype_splanguagesandtranslatorlist","filetype_spmasterpagescataloglist","filetype_spnocodeworkflowlibrarylist","filetype_spprojecttask","filetype_spprojecttasklist","filetype_sppublishingpageslibrarylist","filetype_spreportdocumentlibrarylist","filetype_spreportlibrarylist","filetype_spslidelibrarylist","filetype_sptab","filetype_sptablist","filetype_sptranslationmanagementlibrarylist","filetype_spuserinformation","filetype_spuserinformationlist","filetype_spwikipagelibrarylist","filetype_spworkflowhistory","filetype_spworkflowhistorylist","filetype_spworkflowprocess","filetype_spworkflowprocesslist","filetype_sppublishingimageslibrarylist","filetype_spcirculation","filetype_spcirculationlist","filetype_spdashboardslibrarylist","filetype_spdataconnectionforperformancepointlibrarylist","filetype_sphealthreport","filetype_sphealthreportlist","filetype_sphealthrule","filetype_sphealthrulelist","filetype_spimedictionary","filetype_spimedictionarylist","filetype_spperformancepointcontent","filetype_spperformancepointcontentlist","filetype_spphonecallmemo","filetype_spphonecallmemolist","filetype_sprecordlibrarylist","filetype_spresource","filetype_spresourcelist","filetype_spprocessdiagramslibrarylist","filetype_spsitethemeslibrarylist","filetype_spsolutionslibrarylist","filetype_spwfpublibrarylist","filetype_spwhereabout","filetype_spwhereaboutlist","filetype_spdocumentlink","filetype_spdocumentset","filetype_spmicrofeedpost","filetype_spmicrofeedlist","filetype_splistfolder","filetype_youtubevideo","filetype_youtubeplaylistitem","e","r","t","n","a","s","u","l","i","o","f","d","h","g","b","y","M","v","k","z","F","A","x","prototype","init","cultures","constructor","cultureSelector","name","englishName","nativeName","isRTL","language","numberFormat","pattern","decimals",",",".","groupSizes","+","-","NaN","negativeInfinity","positiveInfinity","percent","symbol","currency","calendars","standard","/",":","firstDay","days","names","namesAbbr","namesShort","months","AM","PM","eras","start","offset","twoDigitYearMax","patterns","D","T","Y","S","messages","calendar","indexOf","length","substr","arguments","Array","isArray","Object","toString","replace","isNaN","Math","charAt","push","test","getFullYear","getMonth","getDate","convert","getTime","setFullYear","toLocaleString","I","fromGregorian","lastIndex","w","exec","C","slice","index","H","O","getDay","N","monthsGenitive","getHours","getMinutes","getSeconds","getMilliseconds","getTimezoneOffset","floor","abs","join","pow","round","isFinite","split","parseInt","toUpperCase","_upperDays","_upperMonths","_upperMonthsGen","_parseRegExp","regExp","groups","RegExp","toLowerCase","j","P","G","E","toGregorian","setHours","findClosestCulture","format","localize","parseFloat","addCultureInfo","lang","pri","sort","lastIndexOf","parseDate","es6_promise_1","Promise","callback","then","value","resolve","reason","rethrowError","self","err","setTimeout","onFulfilled","onRejected","apply","process","global","objectOrFunction","isFunction","setScheduler","scheduleFn","customSchedulerFn","setAsap","asapFn","asap","useNextTick","nextTick","flush","useVertxTimer","vertxNext","useMutationObserver","iterations","observer","BrowserMutationObserver","node","createTextNode","observe","characterData","data","useMessageChannel","channel","MessageChannel","port1","onmessage","port2","postMessage","useSetTimeout","globalSetTimeout","len","queue","arg","attemptVertx","vertx","runOnLoop","runOnContext","onFulfillment","onRejection","_arguments","parent","child","noop","PROMISE_ID","makePromise","_state","invokeCallback","_result","subscribe","object","Constructor","promise","_resolve","selfFulfillment","TypeError","cannotReturnOwn","getThen","error","GET_THEN_ERROR","tryThen","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","_reject","_label","handleOwnThenable","FULFILLED","REJECTED","handleMaybeThenable","maybeThenable","then$$","publishRejection","_onerror","publish","PENDING","_subscribers","subscribers","settled","detail","ErrorObject","tryCatch","TRY_CATCH_ERROR","hasCallback","succeeded","failed","initializePromise","resolver","nextId","Enumerator","input","_instanceConstructor","_input","_remaining","_enumerate","validationError","Error","all","entries","race","reject","_","needsResolver","needsNew","polyfill","local","Function","promiseToString","cast","_isArray","scheduleFlush","browserWindow","browserGlobal","MutationObserver","WebKitMutationObserver","isNode","isWorker","Uint8ClampedArray","importScripts","random","substring","_eachEntry","entry","resolve$$","_then","_settledAt","_willSettleAt","state","enumerator","_setScheduler","_setAsap","_asap","catch","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","concat","queueIndex","drainQueue","timeout","run","Item","array","args","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask","CustomEvent","params","bubbles","cancelable","customEvent","createEvent","initCustomEvent","Event","lib","product","supportedApiVersion","path","target","key","descriptor","originalMethod","nbParams","_i","uri","buildBaseUri","url","queryString","requestData","method","responseType","errorsAsSuccess","result","alertsPath","buildSearchAlertsUri","requestDataType","type","met","resp","accessTokenInUrl","tokenKey","buildAccessToken","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","EndpointCaller_1","Logger_1","Assert_1","AjaxError_1","MissingAuthenticationError_1","QueryUtils_1","QueryError_1","Utils_1","DefaultSearchEndpointOptions","queryStringArguments","anonymous","isGuestUser","options","_this","Assert","exists","restUri","defaultOptions","location","href","Utils","isNonEmptyString","accessToken","extend","isDebugArgumentPresent","onUnload","handleUnload","logger","Logger","createEndpointCaller","configureSampleEndpoint","otherOptions","isUseLocalArgumentPresent","endpoints","searchAlertsUri","configureSampleEndpointV2","optionsOPtions","organizationID","configureCloudEndpoint","organization","token","organizationId","merged","mergeConfigOptions","removeUndefinedConfigOption","configureCloudV2Endpoint","configureOnPremiseEndpoint","config","each","keys","first","second","reset","setRequestModifier","requestModifier","caller","getBaseUri","getBaseAlertsUri","getAuthenticationProviderUri","provider","returnUri","message","callOptions","callParams","buildBaseQueryString","encodeURIComponent","isJsonp","useJsonp","search","query","info","performOneCall","results","apiVersion","isNullOrEmptyString","searchUid","QueryUtils","createGuid","setIndexAndUidOnQueryResults","pipeline","splitTestRun","setTermsToHighlightOnQueryResults","getExportToExcelLink","numberOfResults","buildCompleteQueryString","getRawDataStream","documentUniqueId","dataStreamType","buildViewAsHtmlQueryString","getViewAsDatastreamUri","documentUniqueID","queryObject","getDocument","getDocumentText","content","getDocumentHtml","q","getViewAsHtmlUri","uniq","batchFieldValues","request","values","listFieldValues","listFields","fields","extensions","rateDocument","ratingRequest","tagDocument","taggingRequest","getRevealQuerySuggest","follow","listSubscriptions","page","currentListSubscriptions","status","updateSubscription","subscription","deleteSubscription","logError","sentryLog","nuke","removeEventListener","EndpointCaller","isRedirecting","isString","removeTrailingSlash","name_1","authentication","context","uniqueId","requestedOutputSize","contentType","autoRenewToken","response","clientDuration","duration","canRenewAccessToken","isAccessTokenExpiredStatus","statusCode","renewAccessToken","handleErrorResponse","defer","errorResponse","isMissingAuthenticationProviderStatus","MissingAuthenticationError","QueryError","AjaxError","hasTrailingSlash","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","max","min","has","contains","bind","create","_wrapped","VERSION","identity","isObject","matcher","property","iteratee","forEach","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","findIndex","findKey","filter","select","negate","every","some","any","includes","include","invoke","pluck","where","findWhere","shuffle","sample","sortBy","criteria","groupBy","indexBy","countBy","toArray","size","partition","head","take","initial","last","rest","tail","drop","compact","isArguments","flatten","without","difference","unique","isBoolean","union","intersection","zip","unzip","findLastIndex","sortedIndex","range","ceil","partial","bindAll","memoize","cache","delay","throttle","leading","now","trailing","debounce","wrap","compose","after","before","propertyIsEnumerable","allKeys","mapObject","pairs","invert","functions","methods","extendOwn","assign","pick","omit","defaults","clone","tap","isMatch","pop","isEqual","isEmpty","isElement","nodeType","Int8Array","isNumber","isNull","isUndefined","noConflict","constant","propertyOf","matches","times","B","&","<",">","\"","'","`","R","escape","unescape","templateSettings","evaluate","interpolate","K","\\","\r","\n"," "," ","L","template","source","variable","chain","_chain","mixin","valueOf","toJSON","__webpack_amd_options__","XMLHttpRequestStatus","TimeSpanUtils_1","DeviceUtils_1","XMLHttpRequest","OPENED","HEADERS_RECEIVED","DONE","requestInfo","begun","headers","buildRequestHeaders","trace","urlObject","parseURL","isLocalHost","hostname","currentPort","port","protocol","isSamePort","isCrossOrigin","callUsingAjaxJsonP","isCORSSupported","callUsingXMLHttpRequest","isXDomainRequestSupported","callUsingXDomainRequest","xmlHttpRequest","sent","onreadystatechange","ev","readyState","isSuccessHttpStatus","DeviceUtils","getDeviceName","JSON","parse","tryParseResponseText","responseText","getResponseHeader","handleSuccessfulResponseThatMightBeAnError","handleError","withCredentials","headerValue","headerKey","setRequestHeader","send","stringify","convertJsonToFormBody","convertJsonToQueryString","open","combineUrlAndQueryString","xDomainRequest","XDomainRequest","onload","onerror","ontimeout","onprogress","success","createElement","json","isErrorResponseBody","handleSuccess","querySuccess","TimeSpan","fromDates","queryError","questionMark","match","ex","username","password","btoa","console","log","debug","warn","assert","clear","count","dirxml","group","groupCollapsed","groupEnd","msIsIndependentlyComposed","element","profile","profileEnd","time","timeEnd","owner","stuff","level","TRACE","DEBUG","INFO","WARN","ERROR","executionTime","enable","disable","NOTHING","fail","failureHandler","check","condition","obj","isNotUndefined","isNotNull","isNullOrUndefined","doesNotExists","stringStartsWith","str","isLargerThan","expected","actual","isLargerOrEqualsThan","isSmallerThan","isSmallerOrEqualsThan","PreconditionFailedException","isCoveoFieldRegex","toNotNullString","anyTypeToString","isEmptyString","startWith","isNonEmptyArray","isEmptyArray","isHtmlElement","HTMLElement","parseIntIfNotUndefined","parseFloatIfNotUndefined","num","parseBooleanIfNotUndefined","trim","encodeHTMLEntities","rawStr","ret","unshift","charCodeAt","decodeHTMLEntities","rawString","dec","fromCharCode","arrayEqual","array1","array2","sameOrder","arrays_1","objectEqual","isCoveoField","field","escapeRegexCharacter","getCaseInsensitiveProperty","lowerCaseName_1","matchingKey","getFieldValue","parts","reverse","raw","func","wait","previous","later","remaining","extendDeep","src","toReturn","getQueryStringValue","isValidUrl","regexp","stackTraceTimeout","readCookie","nameEQ","ca","cookie","toDashCase","camelCased","parseXml","xml","DOMParser","parseFromString","ActiveXObject","xmlDoc","async","loadXML","copyObject","copyObjectAttributes","attributes","isMilliseconds","milliseconds","getDays","getWeeks","getHHMMSS","hoursString","minutesString","secondsString","hours","minutes","seconds","hhmmss","from","to","mobile","navigator","userAgent","isAndroid","isIos","deviceName","isIE8or9","myNav","isMobileDevice","isSmallScreenWidth","body","clientWidth","isSmallScreenHeight","clientHeight","isMissingAuthentication","crypto","generateWithCrypto","generateWithRandom","buf","Uint16Array","getRandomValues","S4","setStateObjectOnQueryResults","setPropertyOnResults","setStateObjectOnQueryResult","setPropertyOnResult","queryUid","firstResult","termsToHighlight","phrasesToHighlight","splitFlags","flags","delimiter","isAttachment","containsAttachment","hasHTMLVersion","hasThumbnail","hasExcerpt","excerpt","quoteAndEscapeIfNeeded","isAtomicString","isRangeString","isRangeWithoutOuterBoundsString","quoteAndEscape","escapeString","buildFieldExpression","operator","buildFieldNotEqualExpression","mergeQueryString","queryStringPosition","mergePath","urlSplit","afterOneLoop","childResults","parentResult","getUrlParameter","decodeURIComponent","isStratusAgnosticField","fieldToVerify","fieldToMatch","checkForSystem","matchFieldToVerify","matchFieldToMatch","queryExecutionReport","executionReport","ModalBox","MagicBox","LocaleString","Coveo","className","appendChild","fullscreen","innerHTML","titleClose","validation","parentElement","removeChild","splice","querySelector","textContent","buttons","OK","APPLY","YES","NO","CANCEL","overlayClose","modalBox","overlay","wrapper","close","BUTTON","__extends","expression","subResults","isSuccess","findParent","findAll","resultAt","getLength","getExpect","getBestExpect","getHumanReadableExpect","getHumanReadable","toHtmlElement","createAttribute","setAttributeNode","clean","ExpressionConstant","Result","ExpressionEndOfInput","EndOfInputResult","failAttempt","OptionResult","RefResult","grammar","ExpressionFunction","ExpressionList","ExpressionOptions","ref","occurrence","getExpression","parseOnce","parseMany","ExpressionRef","ExpressionRegExp","expressions","addExpressions","addExpression","buildExpression","buildStringExpression","isRegExp","stringMatch","spliter","Number","Grammar","onchange","magicBox","hasFocus","underlay","highlightContainer","ghostTextContainer","spellcheck","setAttribute","setupHandler","updateInput","updateHighlight","updateWordCompletion","wordCompletion","updateScroll","scrollWidth","style","visibility","scrollLeft","scrollTop","updateScrollDefer","requestAnimationFrame","setResult","setWordCompletion","setCursor","focus","createTextRange","move","selectionStart","setSelectionRange","getCursor","onblur","onfocus","onkeydown","keydown","onkeyup","keyup","onclick","onchangecursor","oncut","onInputChange","onpaste","blur","keyCode","which","hasSuggestions","preventDefault","stopPropagation","tabPress","ontabpress","getValue","getWordCompletion","InputManager","selectableClass","selectedClass","onmouseover","$$","hasClass","getElementsByClassName","item","removeClass","addClass","onmouseout","moveDown","suggestion","moveUp","trigger","mergeSuggestions","pendingSuggestion","updateSuggestions","dom","html","text","separator","onSelect","SuggestionsManager","highlightText","el","innerText","nodeListToArray","empty","firstChild","show","display","hide","toggle","is","tagName","getAttribute","closest","querySelectorAll","findClass","findId","getElementById","toggleClass","getClass","CLASS_NAME_REGEX","detach","getJQuery","handlers","eventHandle","one","dispatchEvent","ONLY_WHITE_SPACE_REGEX","isDescendant","parentNode","jQuery","Dom","basicExpressions","grammars","Start","Expressions","ExpressionsList","BasicExpression","OptionalSpaces","Spaces","Empty","ExpressionsGrammar","Grammars","notWordStart","notInWord","Basic","DoubleQuoted","NotDoubleQuote","SingleQuoted","NotSingleQuote","Word","SubExpression","DateYear","DateMonth","DateDay","DateRange","DateRelative","DateRelativeTerm","DateRelativeNegative","DateRelativeNegativeRef","Field","FieldQuery","FieldQueryOperation","FieldQueryValue","FieldQueryNumeric","FieldSimpleQuery","FieldName","FieldOperator","FieldOperatorNumeric","FieldValue","FieldValueNumeric","FieldValueString","FieldValueList","FieldValueStringList","FieldValueSeparator","FieldValueNotQuoted","NumberRange","QueryExtension","QueryExtensionName","QueryExtensionArguments","QueryExtensionArgumentList","QueryExtensionArgument","QueryExtensionArgumentName","QueryExtensionArgumentValue","NestedQuery","NestedField","Complete","lastSuggestions","inline","displayedResult","clearDom","inputManager","setText","onselect","getFirstSuggestionText","showSuggestion","suggestionsManager","selectableSuggestionClass","selectedSuggestionClass","suggestionTimeout","getResult","getDisplayedResult","resultAtCursor","clearSuggestion","onsubmit","onmove","focusOnSuggestion","getSuggestions","updateSuggestion","onsuggestions","getText","onclear","Instance","userLanguage","getElementsByTagName","X","Cache_1","Cache","Defer_1","Defer","L10N_1","L10N","Options_1","Options","Strings_1","onEmpty","get","code","arm","popOne","ExternalModulesShim_1","pluralRegex","singularRegex","formatPlSn","isPlural","provided","mergeDeep","AnalyticsEndpoint_1","AnalyticsEndpoint","CookieUtils_1","endpointCallerOptions","endpointCaller","getCurrentVisitId","visitId","getCurrentVisitIdPromise","buildAnalyticsUrl","getFromService","sendSearchEvents","searchEvents","sendToService","sendDocumentViewEvent","documentViewEvent","sendCustomEvent","getTopQueries","paramName","serviceUrl","CUSTOM_ANALYTICS_VERSION","DEFAULT_ANALYTICS_VERSION","Cookie","pendingRequest","res","handleAnalyticsEventResponse","paramsToSend","access_token","visitorId","set","VISITOR_COOKIE_TIME","DEFAULT_ANALYTICS_URI","expiration","domain","domainParts","date","expires","host","setTime","toGMTString","prefix","shift","erase","AdvancedSearchEvents_1","AdvancedSearchEvents","AnalyticsEvents_1","AnalyticsEvents","BreadcrumbEvents_1","BreadcrumbEvents","DebugEvents_1","DebugEvents","ImageResultListEvents_1","ImageResultListEvents","InitializationEvents_1","InitializationEvents","OmniboxEvents_1","OmniboxEvents","PreferencesPanelEvents_1","PreferencesPanelEvents","QueryEvents_1","QueryEvents","ResultListEvents_1","ResultListEvents","SearchAlertEvents_1","SearchAlertsEvents","SettingsEvents_1","SettingsEvents","SliderEvents_1","SliderEvents","StandaloneSearchInterfaceEvents_1","StandaloneSearchInterfaceEvents","buildingAdvancedSearch","executeAdvancedSearch","searchEvent","changeAnalyticsCustomData","populateBreadcrumb","clearBreadcrumb","redrawBreadcrumb","showDebugPanel","imageResultsLayoutComplete","beforeInitialization","afterComponentsInitialization","restoreHistoryState","afterInitialization","populateOmnibox","openOmnibox","closeOmnibox","populateOmniboxSuggestions","omniboxPreprocessResultForQuery","savePreferences","exitPreferencesWithoutSave","newQuery","buildingQuery","doneBuildingQuery","duringQuery","duringFetchMoreQuery","fetchMoreSuccess","deferredQuerySuccess","preprocessResults","preprocessMoreResults","noResults","buildingCallOptions","newResultsDisplayed","newResultDisplayed","openQuickview","searchAlertsCreated","searchAlertsDeleted","searchAlertsFail","searchAlertsPopulateMessage","settingsPopulateMenu","startSlide","duringSlide","endSlide","graphValueSelected","beforeRedirect","ColorUtils_1","ColorUtils","CurrencyUtils_1","CurrencyUtils","DateUtils_1","DateUtils","Dom_1","DomUtils_1","DomUtils","EmailActionsUtils_1","EmailActionsUtils","EmailUtils_1","EmailUtils","FeatureDetectionUtils_1","FeatureDetectionUtils","HashUtils_1","HashUtils","HighlightUtils_1","HighlightUtils","StringAndHoles","HtmlUtils_1","HTMLUtils","KeyboardUtils_1","KEYBOARD","KeyboardUtils","LocalStorageUtils_1","LocalStorageUtils","OSUtils_1","OSUtils","OS_NAME","PopupUtils_1","PopupUtils","StreamHighlightUtils_1","StreamHighlightUtils","StringUtils_1","StringUtils","hsvToRgb","rgbToHsv","__","DefaultCurrencyToStringOptions","_super","currencyToString","backup","DefaultDateToStringOptions","useTodayYesterdayAndTomorrow","useWeekdayIfThisWeek","omitYearIfCurrentOne","useLongDateFormat","includeTimeIfToday","includeTimeIfThisWeek","alwaysIncludeTime","predefinedFormat","convertFromJsonDateIfNeeded","isDate","dateForQuery","padNumber","keepOnlyDatePart","offsetDateByDays","newDate","setDate","dateToString","dateOnly","today","tomorrow","yesterday","isThisWeek","timeToString","dateTimeToString","datePart","dateWithoutTime","monthToString","month","isValid","timeBetween","toFixed","toISOString","pad","nber","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","htmlToDom","parsedHtml","children","JQueryutils_1","props","elem","attr","append","css","getComputedStyle","getPropertyValue","txt","nodeList","arr","remove","visible","selector","traverseAncestorForClass","parents","parentsFound","parentFound","siblings","sibs","currentElement","nextSibling","swtch","setHtml","insertAfter","refNode","insertBefore","prepend","toPrepend","jq","JQueryUtils","idx","found","handlerObj","replaceWith","otherElem","position","offsetParent","parentOffset","top","left","borderTopWidth","borderLeftWidth","marginTop","marginLeft","documentElement","getClientRects","rect","getBoundingClientRect","width","height","doc","ownerDocument","docElem","pageYOffset","clientTop","pageXOffset","clientLeft","offsetWidth","offsetHeight","current","Win","win","innerHeight","innerWidth","Doc","scrollHeight","isInstanceOfJQuery","isInstanceOfJqueryEvent","FileTypes_1","getPopUpCloseButton","captionForClose","captionForReminder","container","closeButton","iconClose","closeReminder","outerHTML","getBasicLoadingAnimation","loadDotClass","highlightElement","initialString","valueToSearch","regex","firstChar","lastChar","htmlEncode","getLoadingSpinner","loading","getModalBoxHeader","header","getQuickviewHeader","bindings","showDate","fileType","FileTypes","icon","fileTypeCaptions","objecttype","filetype","getObjectType","getFileType","caption","localizedString","getFileTypeCaptions","strings","javascriptEncode","div","toAdd","removeMiddle","toRemove","regexEncode","stringToRegex","ignoreAccent","encoded","char","accented","wildcardsToRegex","getHighlights","strToSearch","regexToFind","dataHighlightGroupTerm","indexes","desiredMatch","undesiredMatch","encodeCarriageReturn","strToEncode","equalsCaseInsensitive","str1","str2","hashCode","hash","removePunctuation","punctRE","spaceRE","J","Q","U","V","W","Z","buildMailToString","mailTo","parameters","buildMailToParametersString","subject","cc","bcc","parametersArray","buildMailToParameter","shortenBody","getShortenBody","MailTo","maxLength","maxBodyLength","shortenString","param","encodeShortenBodyIndication","shortenBodyIndicator","sliced","shortenStr","appendShortenBodyToMailToString","removeCurrentUserEmailFromString","currentUserEmail","email","buildReplyMailToFromResult","originalFrom","conversationsubject","buildReplyAllMailToFromResult","buildForwardMailToFromResult","encodeMailToBody","linesArray","line","enter","DefaultMailToOptions","bodyHeader","removeCurrentUserFromParameters","bodyIsHTML","ensureValueIsSet","valueBodyIsSet","setValueBody","setValue","setMailToBodyFromText","bodyIsSet","splitSemicolonSeparatedListOfEmailAddresses","addresses","addressesAsList","emailAddressesToHyperlinks","companyDomain","me","lengthLimit","truncateName","hyperlinks","emailArray","parseEmail","domainIndex","encodeURI","excess","andOthers","buildEmailAddressesAndOthers","excessHyperLinks","supportSVG","implementation","hasFeature","getHash","getAjaxcrawlableHash","toParse","paramValue","getRawValue","getValueDependingOnType","encodeValues","valueToEncode","encodedValue","encodeArray","encodeObject","toParseArray","paramPos","loop","paramValuePair","returnValue","getValueType","decodeObject","decodeArray","isArrayStartNotEncoded","DELIMITER","arrayStart","isArrayStartEncoded","isArrayEndNotEncoded","isArrayEndEncoded","arrayEnd","isObjectStartNotEncoded","objectStart","isObjectStartEncoded","isObjectEndNotEncoded","objectEnd","isObjectEndEncoded","isObjectStart","isObjectEnd","isArrayStart","isArrayEnd","arrayReturn","retArray","val","encodeValue","objectStartRegExp","objectEndRegExp","arrayStartRegExp","arrayEndRegExp","highlightString","hightlightTemplate","strAndHoles","holes","hole","begin","replacementSize","shortenPath","uriOrig","removed","next","SHORTEN_END","over","toShortenOrig","toAppend","toShorten","pos","WORD_SHORTER","shortenUri","highlights","cssClass","maxIndex","highlighted","highlight","end","skip","holeBegin","holeEnd","dataHighlightGroup","buildAttributeString","AnchorUtils","buildAnchor","ImageUtils","buildImage","selectImageFromResult","buildImageWithDirectSrcAttribute","endpoint","image","Image","dataStreamUri","buildImageWithBase64SrcAttribute","rawBinary","Uint8Array","buildImageFromResult","img","data-coveo-uri-hash","keysEqual","isAllowedKeyForOmnibox","keycode","valid","isNumberKeyPushed","isLetterKeyPushed","BACKSPACE","DELETE","isArrowKeyPushed","isAllowedKeyForSearchAsYouType","isDeleteOrBackspace","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","keypressAction","action","eventCode","charCode","localStorage","save","setItem","getLocalStorageKey","load","getItem","removeItem","oldObj","nav","osName","appVersion","WINDOWS","MACOSX","UNIX","LINUX","UNKNOWN","VerticalAlignment","HorizontalAlignment","positionPopup","popUp","nextTo","boundary","desiredPosition","appendTo","checkForBoundary","verticalOffset","horizontalOffset","popUpPosition","basicVerticalAlignment","basicHorizontalAlignment","finalAdjustement","popUpBoundary","getBoundary","boundaryPosition","checkBoundary","checkForOutOfBoundary","horizontal","horizontalClip","right","vertical","newDesiredPosition","alignInsideBoundary","popUpOffSet","TOP","BOTTOM","MIDDLE","INNERTOP","INNERBOTTOM","LEFT","RIGHT","CENTER","offSetToAlignCenter","INNERLEFT","INNERRIGHT","oldPosition","toAddVertically","boundaryOffset","bottom","getRestHighlightsForAllTerms","toHighlight","opts","sortedTerms","termsSorting","term","termsToIterate","regexStart","nonWordBoundary","indexesFound","regexFlags","phrase","origPhrase","origWord","keysFromTerms","keysFromPhrases","createStreamHTMLContainer","stream","DefaultStreamHighlightOptions","shorten","highlightStreamHTML","highlightStreamText","QueryController_1","QueryController","FacetQueryController_1","FacetQueryController","FacetRangeQueryController_1","FacetRangeQueryController","FacetSliderQueryController_1","FacetSliderQueryController","HierarchicalFacetQueryController_1","HierarchicalFacetQueryController","HistoryController_1","HistoryController","LocalStorageHistoryController_1","LocalStorageHistoryController","RootComponent_1","QueryBuilder_1","SearchEndpointWithDefaultCallOptions_1","BaseComponent_1","DefaultQueryOptions","searchAsYouType","closeModalBox","cancel","logInActionsHistory","usageAnalytics","searchInterface","ID","showingExecutingQueryAnimation","firstQuery","setEndpoint","overrideEndpoint","getEndpoint","SearchEndpointWithDefaultCallOptions","getCallOptions","getLastQuery","lastQuery","QueryBuilder","build","executeQuery","cancelAnyCurrentPendingQuery","beforeExecuteQuery","ignoreWarningSearchEvent","warnAboutSearchEvent","showExecutingQueryAnimation","dataToSendOnNewQuery","origin","newQueryEvent","cancelQuery","queryBuilder","createQueryBuilder","logQueryInActionsHistory","isFirstQuery","endpointToUse","currentPendingQuery","queryResults","enableHistory","keepLastSearchUid","lastQueryHash","queryHash","lastSearchUid","getLastSearchUid","_reusedSearchUid","lastQueryResults","currentError","dataToSendOnPreprocessResult","preprocessResultsEvent","dataToSendOnNoResult","retryTheQuery","noResultEvent","lastQueryBuilder","dataToSendOnSuccess_1","querySuccessEvent","deferredQuerySuccessEvent","hideExecutingQueryAnimation","dataToSendOnError","dataToSendDuringQuery","duringQueryEvent","fetchMore","sendAllPendingEvents","continueLastQueryBuilder","dataToSendOnFetchMoreSuccess","fetchMoreSuccessEvent","deferExecuteQuery","ensureCreatedQueryBuilder","createdOneQueryBuilder","dataToSendDuringBuildingQuery","buildingQueryEvent","dataToSendDuringDoneBuildingQuery","doneBuildingQueryEvent","getPipelineInUrl","isStandaloneSearchbox","searchPageUri","saveLastQuery","expire","uid","getLastQueryHash","loadLastQueryHash","debugInfo","queryDuration","buildQueryDurationSection","graph","debugRef","BaseComponent","getComponentRef","durationKeys","data-id","legend","keyDom","durationDom","coveoanalytics","store","history","HistoryStore","queryElement","addElement","RootComponent","disabled","initDebugInfo","bindComponentToElement","altKey","component","computeCssClassNameForType","getBoundComponentsForElement","computeCssClassName","componentClass","computeSelectorForType","CoveoBoundComponents","ExpressionBuilder_1","ExpressionBuilder","advancedExpression","constantExpression","disjunctionExpression","disableQuerySyntax","requiredFields","includeRequiredFields","enableDidYouMean","enableDebug","sortCriteria","retrieveFirstSentences","queryFunctions","rankingFunctions","groupByRequests","enableDuplicateFiltering","aq","cq","dq","searchHub","tab","maximumAge","wildcards","enableWildcards","enableQuestionMarks","lowercaseOperators","enableLowercaseOperators","partialMatch","enablePartialMatch","partialMatchKeywords","partialMatchThreshold","excerptLength","filterField","filterFieldRange","parentField","childField","fieldsToInclude","computeFieldsToInclude","fieldsToExclude","sortField","timezone","enableCollaborativeRating","actionsHistory","recommendation","computeCompleteExpression","computeCompleteExpressionParts","full","withoutConstant","mergeUsingOr","basic","advanced","computeCompleteExpressionExcept","except","computeCompleteExpressionPartsExcept","withoutConstantAndExcept","basicAndExcept","fromExpressionBuilder","advancedAndExcept","addFieldsToInclude","addRequiredFields","addFieldsToExclude","addContextValue","addContext","wrapParts","add","addFieldExpression","addFieldNotEqualExpression","exp","builders","builder","nonEmpty","enrichCallOptions","FacetSearchParameters_1","FacetUtils_1","facet","prepareForNewQuery","lastGroupByRequestIndex","expressionToUseForFacetSearch","constantExpressionToUseForFacetSearch","computeOurFilterExpression","selected","getSelected","useAnd","excluded","getExcluded","additionalFilter","putGroupByIntoQueryBuilder","allowedValues","createGroupByAllowedValues","groupByRequest","createBasicGroupByRequest","queryOverrideObject","createGroupByQueryOverride","queryOverride","advancedQueryOverride","constantQueryOverride","lastGroupByRequest","oldLength","nbResults","onResult","fieldValues","newLength","checkForFacetSearchValuesToRemove","FacetUtils","needAnotherFacetSearch","getQuery","isNewDesign","valuesCropped_1","groupByResults","lookupValue","alwaysExclude","numberOfValuesToFetch","FacetSearchParameters","alwaysInclude","getAll","searchInFacetToUpdateDelta","facetValues","facetValue","waitingForDelta","completeFacetWithStandardValues","customSort","toCompare_1","filtered","getAllowedValuesFromSelected","toMap","keepDisplayedValuesNextTime","hasSelectedOrExcludedValues","addComputedField","nbOfRequestedValues","numberOfValues","usedValues","maximumNumberOfValues","enableMoreLess","injectionDepth","lookupField","computedField","computedFields","operation","computedFieldOperation","valueToCheckAgainst","getRegexToUseForFacetSearch","facetSearchIgnoreAccents","fieldValue","isAllowed","getValueCaption","numberOfValuesInFacetSearch","ignoreAccents","searchEvenIfEmpty","setValueToSearch","getValuesToUseForSearchInFacet","excludeCurrentlyDisplayedValuesInSearch","searchResults","getCurrentlyShowedValueInSearch","expandedValues","expanded","getDisplayedFacetValues","getGroupByRequest","lowerCaseAll","typedByUser","queryController","facetQueryController","original","valueCaption","pair","buildFacetSearchPattern","currentSearchLength","newSearchLength","oldSearchLength","desiredSearchLength","addNoStateCssClassToFacetValues","noStates","noState","tryToGetTranslatedCaption","clipCaptionsToAvoidOverflowingTheirContainer","forceClip","getBindings","HierarchicalFacet","captions","labels","labelsMaxWidth","label","labelWidth","labelVisibleWidth","captionWidth","crop","labelMaxWidth","groupByQuery","ranges","buildGroupByQueryForPredefinedRanges","buildGroupByQueryForAutomaticRanges","generateAutomaticRanges","rangeValues","onRootElement","handleQuerySuccess","putGroupByForGraphIntoQueryBuilder","putGroupByForSliderIntoQueryBuilder","buildGroupByQueryForSlider","startOfSlider","endOfSlider","excludeOuterBounds","addFilterExpressionWithOuterBoundsExcluded","addFilterExpressionWithOuterBoundsIncluded","rangeValuesForGraphToUse","rawValues","graphGroupByQueriesIndex","rawValue","rawSplit","dateField","getISOFormat","getFilterDateFormat","startCompare","endCompare","startCompared","endCompared","endInclusive","basicGroupByRequestForGraph","basicRangeRequest","createRangeValuesForGraph","getSliderBoundaryForQuery","completeExpression","steps","basicGroupByRequestForSlider","usePrebuiltRange","buildRange","oneStep","step","newStart","newEnd","getBrowserCompatibleFormat","Model_1","windoh","model","ignoreNextHashChange","initialHashChange","willUpdateHash","updateModelFromHash","getEventName","Model","eventTypes","updateHashFromModel","hashchange","handleHashChange","handleNuke","setHashValues","diff","attributesThatDoNotTriggerQuery","getAttributes","toSet","valToSet","getHashValue","defaultAttributes","setMultiple","MODEL_EVENTS","PREPROCESS","CHANGE_ONE","CHANGE","RESET","ALL","eventNameSpace","attribute","anythingChanged","preprocessEvent","customAttribute","checkIfAttributeExists","parseToCorrectType","validateType","checkIfAttributeChanged","silent","attributeHasChangedEvent","attributesHasChangedEvent","anyEvent","setNewDefault","setDefault","getDefault","modelWasResetEvent","registerNewAttribute","defaultValue","change","createAttributesChangedArgument","changeOne","createAttributeChangedArgument","preprocess","createModelChangedArgument","newValue","oldValue","storage","updateModelFromLocalStorage","updateLocalStorageFromModel","withoutThoseAttribute","setStorageValues","loadedFromStorage","QueryStateModel_1","QueryStateModel","ComponentOptionsModel_1","ComponentOptionsModel","ComponentStateModel_1","ComponentStateModel","setState","QUERY_STATE_ATTRIBUTES","FIRST","TG","SORT","HD","HQ","QUICKVIEW","getFacetId","getFacetOperator","getFacetLookupValue","atLeastOneFacetIsActive","validate","attributesEnum","hd","hq","tg","quickview","resultLink","registerComponent","componentId","currentAttribute","ComponentOptions_1","ComponentOptions","ComponentOptionsType","Component_1","Component","Initialization_1","Initialization","Initialization_2","CoveoJQuery","CoveoJQuery_1","initCoveoJQuery","initializeFramework","initSearchInterface","initSearchbox","searchInterfaceOptions","autoTriggerQuery","hideUntilFirstQuery","StandaloneSearchInterface","initStandaloneSearchInterface","initRecommendation","mainSearchInterface","userContext","recommendationOptions","Recommendation","initRecommendationInterface","resolveBinding","noThrow","getCoveoAnalyticsClient","analytics","getCoveoAnalytics","client","analyticsElement","logCustomEvent","customEventCause","metadata","logSearchEvent","searchEventCause","logSearchAsYouTypeEvent","searchAsYouTypeEventCause","logSearchAsYouType","logClickEvent","clickEventCause","optionsToSet","registerDefaultOptions","patch","methodName","handler","monkeyPatchComponentMethod","initBox","injectMarkup","SearchInterface","initBoxInterface","registerNamedMethod","SearchInterface_1","AnalyticsActionListMeta_1","Recommendation_1","existing","updated","resolveDefaultOptions","optionsSoFar","optionsForThisElement","registerAutoCreateComponent","autoCreateComponents","namedMethods","isComponentClassIdRegistered","componentClassId","getListOfRegisteredComponents","getRegisteredComponent","initSearchInterfaceFunction","alreadyInitialized","performInitFunctionsOption","initExternalComponents","elemsHidden","logFirstQueryCause","originalOptionsObject","initParameters","automaticallyCreateComponentsInside","triggerQueryOnClear","triggerOnQueryClear","optionsForRecommendation","ignore","codeToExecute","classname","elements","createFunctionThatInitializesComponentOnElements","createComponentOfThisClassOnElement","isNamedMethodRegistered","splitArg","boundComponent","originalMethodName","fromInitTypeToBoxReference","boxRef","injectFunction","getInjection","box","dispatchNamedMethodCall","namedMethodHandler","dispatchNamedMethodCallOrComponentCreation","isThereASingleComponentBoundToThisElement","dispatchMethodCallOnBoundComponent","isSearchFromLink","queryStateModel","firstQueryCause","meta","analyticsActionCauseList","searchFromLink","interfaceLoad","performFunctions","option","componentStateModel","componentOptionsModel","initParameters_1","externalComponent","elementToInstantiate","matchingElement","optionsToUse","optionsForComponentClass","optionsForElementId","initOptions","initParamToUse","NoopAnalyticsClient_1","ComponentEvents","resolveRoot","resolveQueryStateModel","resolveComponentStateModel","resolveQueryController","resolveSearchInterface","resolveUA","resolveComponentOptionsModel","ensureDom","createDom","attachComponent","resolvedSearchInterface","NoopAnalyticsClient","resolveResult","boundComponents","resultElement","bindResultToElement","findDown","findUp","pointElementsToDummyForm","inputs","wrapToCallIfEnabled","htmlEl","oneRootElement","onQueryState","eventType","getQueryStateEventName","oneQueryState","evtName","Debug_1","FastClick","SentryLogger_1","analyticsOptions","_window","isNewDesignAttribute","attach","initComponentOptions","showAndHideFirstQueryAnimation","initializeAnalytics","SentryLogger","eventName","handlePreprocessQueryStateModel","handleBuildingQuery","handleQueryError","useLocalStorageForHistory","eventNameQuickview","handleQuickviewChanged","setupDebugInfo","showWaitAnimation","firstLoadingAnimation","hideWaitAnimation","getComponents","detachComponent","components","attachedComponents","analyticsRef","enableDebugInfo","Debug","tgFromModel","tFromModel","getTabGroupId","getTabId","getSort","getQuickview","tabGroupId","tabGroupRef","tabGroups","tabGroup","tabId","tabRef","tabs","tabGroup_1","isElementIncludedInTabGroup","sortId","sortRef","sorts","tab_1","isElementIncludedInTab","quickviewId","quickviewRef","quickviews","getHashId","quickviewsPartition","resultsPerPage","toggleSectionState","resultsHeader","facetSection","resultsSection","facetSearchs","facetSearch","buildBooleanOption","enableAutomaticResponsiveMode","buildNumberOption","buildStringOption","buildChildHtmlElementOption","childSelector","defaultFunction","buildCustomOption","jstz","determine","SMALL_INTERFACE_CLASS_NAME","handleRedirect","dataToSendOnBeforeRedirect","searchboxIsEmpty","redirectIfEmpty","redirectToSearchPage","searchPage","stateValues","uaCausedBy","getCurrentEventCause","uaMeta","getCurrentEventMeta","TemplateCache_1","TemplateList_1","UnderscoreTemplate_1","HtmlTemplate_1","camelCaseToHyphenRegex","fieldsSeperator","localizer","optionArgs","buildOption","BOOLEAN","loadBooleanOption","NUMBER","loadNumberOption","STRING","loadStringOption","buildIconOption","ICON","buildHelperOption","HELPER","buildJsonOption","buildLocalizedStringOption","LOCALIZED_STRING","loadLocalizedStringOption","buildFieldOption","FIELD","loadFieldOption","buildFieldsOption","FIELDS","loadFieldsOption","buildListOption","LIST","loadListOption","buildSelectorOption","SELECTOR","loadSelectorOption","CHILD_HTML_ELEMENT","loadChildHtmlElementOption","buildTemplateOption","TEMPLATE","loadTemplateOption","converter","loadOption","stringvalue","buildCustomListOption","buildObjectOption","subOptions","scopedOptions","scopedValues","scopedkey","mergeCamelCase","resultValues","resultFound","OBJECT","optionArg","attrNameFromName","attrName","camelCaseToHyphen","componentID","optionDefinition","loadFromAttribute","deprecated","validator","required","name_2","postProcessing","getAttributeFromAlias","fieldsAttr","attributeValue","locale","localeParts_1","part","localizers","numberValue","loadEnumOption","_enum","enumAsString","htmlElement","selectorAttr","loadChildHtmlElementFromSelector","loadChildrenHtmlElementFromSelector","templateElement","createResultTemplateFromElement","idAttr","loadResultTemplateFromId","loadChildrenResultTemplateFromSelector","templateId","TemplateCache","getTemplate","foundElements","TemplateList","findParentScrolling","isElementScrollable","overflowY","alias","mimeTypes","UnderscoreTemplate","HtmlTemplate","Template_1","registerTemplate","publicTemplate","defaultTemplate","Template","templates","templateNames","defaultTemplates","getTemplates","getTemplateNames","getDefaultTemplates","getDefaultTemplate","scanAndRegisterTemplates","isLibraryAvailable","scanAndRegisterUnderscoreTemplates","scanAndRegisterHtmlTemplates","scriptList","dataToString","getFieldFromString","componentFields","instantiateToString","checkCondition","instantiateToElement","getFields","getType","templateString","extended","templateHelpers","additionalFields","includeInResults","script","fromString","registerTemplateHelper","helperName","helper","DefaultResultTemplate_1","DefaultResultTemplate","queryResult","isContextual","isActivated","actionCause","cancelAllPendingEvents","getPendingSearchEvent","highlightRecommendation","handleNewResultDisplayed","handleShowDebugPanel","unbindEscapeEvent","localStorageDebug","collapsedSections","modalbox","bindEscapeEvent","buildSearchBox","downloadLink","download","downloadHref","bodyBuilder","buildEnabledHighlightRecommendation","buildEnableDebugCheckbox","handleEscapeEvent","ESCAPE","boundEscapeKey","stackDebug","buildStackPanel","isRecommendation","handleResultDoubleClick","index_1","findResult_1","debugPanel","buildFieldsSection","rankingInfo","buildRankingInfoSection","templateToJson","indexA","customOrder","indexB","section","buildSection","buildStackPanelSection","toJson","buildProperty","lastSearch","rootProperties","findInProperty","jElement","highlightSearch","removeHighlightSearch","submatch_1","checkbox","fetchFields","fieldDescriptions","fieldDescription","fieldType","splitGroupByField","parseRankingInfo","infos","parseWeights","terms","words","word","Correlation","TF-IDF","weights","Weights","listOfWeight","weight","weightGroup","buildPromise","buildBasicProperty","buildObjectProperty","resolvedDom","valueContainer","buildKeys","labelDom","stringValue","valueDom","ondblclick","selectElementText","depth","done","componentToJson","htmlToJson","toJsonRef","maxDepth","subValue","result_1","classList","templateObject","getSelection","createRange","selection","selectNodeContents","removeAllRanges","addRange","textRange","moveToElementText","span","trackingClick","trackingClickStart","targetElement","touchStartX","touchStartY","lastTouchIdentifier","touchBoundary","layer","tapDelay","tapTimeout","notNeeded","onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","stopImmediatePropagation","Node","hijacked","propagationStopped","needsClick","nodeName","needsFocus","readOnly","sendClick","activeElement","changedTouches","initMouseEvent","determineEventType","screenX","screenY","clientX","clientY","forwardedTouchEvent","updateScrollParent","fastClickScrollParent","fastClickLastScrollTop","getTargetElementFromEventTarget","TEXT_NODE","targetTouches","rangeCount","isCollapsed","identifier","timeStamp","pageX","pageY","lastClickTime","touchHasMoved","findControl","control","htmlFor","cancelNextClick","elementFromPoint","destroy","ontouchstart","outerWidth","msTouchAction","touchAction","setMonth","TimeZone","olson","timezones","America/Denver","America/Mazatlan","America/Chicago","America/Mexico_City","America/Asuncion","America/Santiago","America/Campo_Grande","America/Montevideo","America/Sao_Paulo","America/Los_Angeles","America/Santa_Isabel","America/Havana","America/New_York","Asia/Beirut","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Asia/Gaza","Africa/Cairo","Pacific/Auckland","Pacific/Fiji","America/Halifax","America/Goose_Bay","America/Miquelon","America/Godthab","Europe/Moscow","Asia/Yekaterinburg","Asia/Omsk","Asia/Krasnoyarsk","Asia/Irkutsk","Asia/Yakutsk","Asia/Vladivostok","Asia/Kamchatka","Europe/Minsk","Pacific/Apia","Australia/Perth","date_is_dst","dst_start_for","Asia/Dubai","Asia/Dhaka","Asia/Jakarta","Asia/Shanghai","Asia/Tokyo","Australia/Brisbane","Pacific/Noumea","Pacific/Tarawa","Pacific/Tongatapu","Africa/Johannesburg","Asia/Baghdad","-720,0","-660,0","-600,1","-600,0","-570,0","-540,0","-540,1","-480,1","-480,0","-420,0","-420,1","-360,0","-360,1","-360,1,s","-300,0","-300,1","-270,0","-240,1","-240,0","-240,1,s","-210,1","-180,1","-180,0","-180,1,s","-120,0","-120,1","-60,1","-60,0","0,0","0,1","60,1","60,0","60,1,s","120,1","120,0","180,0","180,1","210,1","240,0","240,1","270,0","300,1","300,0","330,0","345,0","360,0","360,1","390,0","420,1","420,0","480,0","480,1","525,0","525,1,s","540,1","540,0","570,0","570,1,s","600,0","600,1","600,1,s","630,1,s","660,1","660,0","690,0","720,1,s","720,0","765,1,s","780,0","780,1,s","840,0","bindErrorHandler","oldHandler","filename","lineno","colno","errorInfo","column","errorStack","device","interfaceChange","metaMap","interfaceChangeTo","contextRemove","contextName","didyoumeanAutomatic","didyoumeanClick","resultsSort","resultsSortBy","searchboxSubmit","searchboxClear","searchboxAsYouType","breadcrumbFacet","facetId","facetTitle","breadcrumbResetAll","documentTag","documentField","documentQuickview","documentTitle","documentURL","documentOpen","omniboxFacetSelect","omniboxFacetExclude","omniboxFacetDeselect","omniboxFacetUnexclude","faceId","omniboxAnalytics","partialQuery","suggestionRanking","partialQueries","suggestions","omniboxField","facetClearAll","facetToggle","facetOperatorBefore","facetOperatorAfter","facetRangeSlider","facetRangeStart","facetRangeEnd","facetRangeGraph","facetSelect","facetSelectAll","facetDeselect","facetExclude","facetUnexclude","errorBack","errorClearQuery","errorRetry","noResultsBack","expandToFullUI","caseCreationInputChange","caseCreationSubmitButton","caseCreationCancelButton","caseCreationUnloadPage","casecontextAdd","caseID","casecontextRemove","preferencesChange","preferenceName","preferenceType","getUserHistory","userActionDocumentClick","caseAttach","resultUriHash","articleID","caseDetach","customfiltersChange","customFilterName","customFilterType","customFilterExpression","pagerNumber","pagerNext","pagerPrevious","pagerScrolling","pagerResize","triggerNotify","triggerExecute","triggerQuery","triggerRedirect","errorType","errorMessage","exportToExcel","recommendationInterfaceLoad","recommendationOpen","advancedSearch","QuickviewEvents_1","generateDefaultId","bindToMainSearchInterface","handleRecommendationBuildingQuery","handleRecommendationQuerySuccess","hideIfNoResults","preventEventPropagation","getId","displayStyle","mainInterfaceQuery","mainQuerySearchUID","modifyQueryForRecommendation","addRecommendationInfoInQuery","totalCount","sendActionsHistory","getHistory","preventEventPropagationOn","QuickviewEvents","getAllModelEvents","event_1","events","NEXT_ID","quickviewLoaded","LiveAnalyticsClient_1","MultiAnalyticsClient_1","RecommendationAnalyticsClient_1","retrieveInfoFromDefaultSearchEndpoint","initializeAnalyticsClient","cmpOptionElement","handleSearchHubChanged","initializeAnalyticsEndpoint","elementToInitializeClient","instantiateAnalyticsClient","RecommendationAnalyticsClient","user","userDisplayName","splitTestRunName","splitTestRunVersion","sendToCloud","LiveAnalyticsClient","defaultEndpoint","ignoreElementsInsideRecommendationInterface","getClient","MultiAnalyticsClient","foundOnElement","PendingSearchEvent_1","PendingSearchAsYouTypeSearchEvent_1","APIAnalyticsBuilder_1","rootElement","userId","originLevel1","pendingSearchEvent","getEventCause","pendingSearchAsYouTypeSearchEvent","getEventMeta","metaObject","buildMetaObject","pushSearchEvent","pushSearchAsYouTypeEvent","pushClickEvent","pushCustomEvent","sendRightNow","buildCustomEvent","triggerChangeAnalyticsCustomData","checkToSendAnyPendingSearchAsYouType","APIAnalyticsBuilder","convertCustomEventToAPI","stopRecording","buildSearchEvent","PendingSearchEvent","eventIsNotRelatedToSearchbox","cancelAnyPendingSearchAsYouTypeEvent","PendingSearchAsYouTypeSearchEvent","buildClickEvent","resultData","searchQueryUid","collectionName","sourceName","documentPosition","convertDocumentViewToAPI","buildAnalyticsEvent","actionType","responseTime","originLevel2","getOriginLevel2","originLevel3","referrer","customData","queryText","advancedQuery","pageNumber","facets","contextual","queryPipeline","documentUri","documentUriHash","documentUrl","clickUri","documentCategory","viewMethod","rankingModifier","eventValue","resolveActiveTabFromElement","changeableAnalyticsDataObject","metaDataAsString","metaDataAsNumber","templateSearchEvent","searchPromises","cancelled","finished","evt","handleDuringQuery","eventTarget","fillSearchEvent","apiSearchEvents","convertSearchEventToAPI","currentQuery","apiSearchEvent","customMetadatas","documentView","apiDocumentView","apiCustomEvent","delayBeforeSending","armBatchDelay","beforeUnloadHandler","onWindowUnload","beforeResolve","toSendRightNow","isCancelledOrFinished","modifyCustomData","newData","modifyEventCause","newCause","analyticsClients","analyticsClient","currentEventCause","currentEventMeta","mergeTopQueries","pageSize","mainInterface","jQueryIsDefined","jQueryInstance","coveo","returnValueForThisElement","jQueryDefinedOnWindow","jQueryDefinedOnCoveoObject","TemplateHelpers_1","TemplateHelpers","registerFieldHelper","fieldHelpers","registerTemplateHelperInUnderscore","helpers","getHelper","getHelpers","resolveQueryResult","ResultList_1","ResultList","resultCurrentlyBeingRendered","Quickview_1","resolveTermsToHighlight","currentQueryResult","resolvePhrasesToHighlight","Icon_1","CoreHelpers","exportAllHelpersGlobally","scope","listOfAddresses","sibling","Icon","createIcon","rows","tableField","tr","templatesToLoad","defaultTmpl","atLeastOneWasLoaded","toLoad","byteMeasure","presision","base","possibleInternalQuickview","qv","preprocessIconInfo","small","shouldDisplayLabel","withLabel","labelValue","DefaultQuickviewTemplate_1","QuickviewDocument_1","bindedHandleEscapeEvent","contentTemplate","DefaultQuickviewTemplate","iconForQuickview","captionForQuickview","tabindex","bindClick","openerObject","prepareOpenQuickviewObject","createModalBox","bindQuickviewEvents","animateAndOpen","hasHtmlVersion","alwaysShow","clickAction","ENTER","closeQuickview","loadingAnimation","bindIFrameEscape","bindEscape","animationDuration","quickviewDocument","QuickviewDocument","durationMs","computedModalBoxContent","setQuickviewSize","prepareQuickviewContent","enableLoadingAnimation","contentWindow","maxWidth","maxHeight","NONE","loadingAnimationSelector","loadingAnimationTemplate","HIGHLIGHT_PREFIX","termsToHighlightWereModified","buildHeader","iframe","buildIFrame","author","beforeLoad","dataToSendOnOpenQuickView","checkIfTermsToHighlightWereModified","handleTermsToHighlight","maximumDocumentSize","contentDocument","renderHTMLDocument","triggerQuickviewLoaded","renderErrorReport","computeHighlights","isNewQuickviewDocument","padding","paddingTop","paddingLeft","writeToIFrame","wrapPreElementsInIframe","errorStatus","errorString","toWrite","write","cssText","margin","afterLoad","eventArgs","keywordsState","highlightsCount","idParts","getHighlightIdParts","idIndexPart","idOccurencePart","idTermPart","getHighlightInnerText","termsCount","occurence","embeddedWordParts","getHightlightEmbeddedWordIdParts","embeddedWord","childNodes","nodeValue","minHeight","resolvedWords","resolveOriginalTermFromHighlight","color","backgroundColor","currentIndex","buildWordButton","embedded","originalTerm","expansion","wordState","wordHtml","quickviewName","navigate","quickviewUpArrow","quickviewUpArrowIcon","quickviewDownArrow","quickviewDownArrowIcon","borderColor","getSaturatedColor","backward","toIndex","fromIndex","scroll","getScrollingElement","border","pdf","scrollIntoView","animateScroll","offsetLeft","offsetTop","iFrame","iFrameWrapper","iframeWindow","hsv","rgb","scrollLeftValue","scrollTopValue","leftStep","topStep","interval","setInterval","clearInterval","DefaultRecommendationTemplate_1","elementClassId","currentlyDisplayedResults","reachedTheEndOfResults","resultContainer","resultTemplate","waitAnimationContainer","infiniteScrollContainer","showOrHideElementsDependingOnState","handleNewQuery","enableInfiniteScroll","handleScrollOfResultList","handlePageChanged","renderResults","resultsElement","triggerNewResultDisplayed","triggerNewResultsDisplayed","buildResults","buildResult","autoCreateComponentsInsideResult","displayMoreResults","isCurrentlyFetchingMoreResults","hasPotentiallyMoreResultsToDisplay","enableInfiniteScrollWaitingAnimation","showWaitingAnimationForInfiniteScrolling","fetchingMoreResults","hideWaitingAnimationForInfiniteScrolling","getDisplayedResults","getDisplayedResultsElements","resultComponentBindings","cancelFetchingMoreResultsIfNeeded","showWaitingAnimation","hideWaitingAnimation","mobileScrollContainer","isScrollingOfResultListAlmostAtTheBottom","infiniteScrollPageSize","Window","scrollTo","autoSelectFieldsToInclude","getAutoSelectedFieldsToInclude","isWindow","isScrollAtBottomForWindowElement","isScrollAtBottomForHtmlElement","windowHeight","scrollY","bodyHeight","elementHeight","bottomPosition","hasQuery","hasResults","showIfQuery","showIfNoQuery","showIfResults","showIfNoResults","waitAnimation","spinner","DefaultRecommendationTemplate","depend","QueryboxQueryParameters_1","HTMLInputElement","Query","Term","updateQueryState","handleQueryStateChanged","enableSearchAsYouType","submit","triggerNewQuery","autoFocus","QueryboxQueryParameters","addParameters","searchAsYouTypeTimeout","searchAsYouTypeDelay","enableQuerySyntax","placeholder","handleClick","click","addSearchButton","anchor","searchButton","enableOmnibox","searchbox","QueryStateModel_2","FieldAddon_1","QueryExtensionAddon_1","RevealQuerySuggestAddon_1","OldOmniboxAddon_1","MINIMUM_EXECUTABLE_CONFIDENCE","movedOnce","skipRevealAutoSuggest","enableFieldAddon","FieldAddon","fieldAlias","listOfFields","enableQueryExtensionAddon","QueryExtensionAddon","Any","enableRevealQuerySuggestAddon","RevealQuerySuggestAddon","OldOmniboxAddon","omniboxTimeout","handleBeforeRedirect","isRevealAutoSuggestion","setupMagicBox","getInput","modifyEventTo","handleRevealAutoSuggestionWithKeyboard","handleRevealAutoSuggestionsWithMouse","buildCustomDataForPartialQueries","handleSuggestions","modifyCustomDataOnPending","clearSearchAsYouType","pendingEvt","newCustomData_1","cleanCustomData","toClean","rejectLength","reducedToRejectLengthOrLess","memo","totalSoFar","suggestionsEventArgs","omnibox","preprocessResultForQueryArgs","notQuotedValues","fieldNames","analyticsEvent","shouldExecuteQuery","textSuggestion","pendingEvent","forceExecuteQuery","suggestionShouldTriggerQuery","suggestions_1","executableConfidence","enableSimpleFieldAddon","getSuggestion","hashString","hashToString","hashValueToSuggestion","simpleFieldNames","fieldName","currentField","fieldQuery","INDEX","includeInQuery","groupByField","withAt","fieldNameLC","matchFields","patternType","attributeNames","used","queryExtension","queryExtensionArgumentResults","getExtensions","extensionName","matchExtensions","extension","argumentNames","argumentName","suggestiontHtml","notMatched","matched","corrected","suggestiontHtmlTemplate","isPartialMatch","firstFail","payload","completions","completion","buildPopulateOmniboxEventArgs","rowsToSuggestions","getCurrentQueryExpression","cursorPos","getRegexToSearch","strValue","getQueryExpressionBreakDown","queryWords","searchValue","clearCurrentExpression","insertAt","at","toInsert","replaceCurrentExpression","currentQueryExpression","completeQueryExpression","allQueryExpressions","cursorPosition","row","deferred","zIndex","SuggestionForOmnibox","structure","buildOmniboxElement","buildElementHeader","buildRowElements","headerTitle","SuggestionForOmnibox_1","resultsToBuildWith","rowTemplate","onRowSelection","suggestionStructure","headerTemplate","suggestionForOmnibox","handlePopulateOmnibox","selectSuggestion","currentlyDisplayedSuggestions","currentlySuggested","searchPromise","numberOfSuggestions","selectable","omniboxZIndex","buildListFieldValueRequest","CoreHelpers_1"],"mappings":"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U,GAClB,MAAK5iG,GAAAa,MAAM4X,kBAAkBmqF,EAAI3rF,SAOrBjX,EAAAa,MAAM4X,kBAAkBmqF,EAAIC,UAcjC,KAbE,GAAI3xG,SAA8B,SAACI,GACxCsxG,EAAIC,SAASzxG,KAAK,SAACwxG,GAEftxG,EADiB,MAAfsxG,EAAI3rF,UAEJkU,IAAKy3E,EAAI3rF,QACT5oB,MAAOu0G,EAAIE,SAGL,UAfP,GAAI5xG,SAA8B,SAACI,GACxCA,IACE65B,IAAKy3E,EAAI3rF,QACT5oB,MAAOu0G,EAAIE,eAoBvB1F,IApJal1H,GAAAk1H,gBAAeA,IzI+olBEv0H,KAAKX,EAASM,EAAoB,MAGvD,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CAEH,SAASL,EAAQD,EAASM,IAEH,SAASiwB,GAAI,Y0I5ulB1C,IAAAkjC,GAAAnzD,EAAuB,IACvBkzD,EAAAlzD,EAAiB,IAyBjBu6H,EAAA,WAEE,QAAAA,GAAmBC,EAAiDz3E,GAAjDjjD,KAAA06H,YAAiD16H,KAAAijD,WA0CtE,MAvCSw3E,GAAAr5G,UAAAu5G,oBAAP,SAA2Bh/F,EAAwCrI,GACjE,GAAIqb,EACJ,IAAsB,GAAlBhT,EAAQvX,OAAa,CAEvB,GADAuqB,EAAUykB,EAAArR,GAAG,OAAOqB,GAChBpjD,KAAK06H,UAAU18D,OAAQ,CACzB,GAAIA,GAASh+D,KAAK46H,oBAClBjsF,GAAQ2L,YAAY0jB,GAEtB,GAAI+nD,GAAO/lH,KAAK6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,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CAEH,SAASL,EAAQD,EAASM,IAEH,SAASiwB,GAAI,Y6I1ymB1C,SAAAvuB,GAAwB8jH,GAStB,GARuBjjH,QAAnBC,OAAc,MAChBA,OAAc,MAAIgjH,EAElBv1F,EAAEgK,KAAKhK,EAAEiK,KAAKsrF,GAAQ,SAAC3kG,GACrBre,OAAc,MAAEqe,GAAK2kG,EAAM3kG,KAG/Bg7G,EAAAvW,YAAYC,yBAAyB/iH,OAAc,OACxBD,QAAvBC,OAAkB,UAAgB,CACpC,GAAIk5C,GAAY,SAAUp7B,EAAGG,GAM3B,QAAAy0C,KACEp1D,KAAKuhB,YAAcf,EANrB,IAAK,GAAI9f,KAAKigB,GACRA,EAAE/f,eAAeF,KACnB8f,EAAE9f,GAAKigB,EAAEjgB,GAOb8f,GAAEY,UAAkB,OAANT,EAAa8D,OAAOsc,OAAOpgB,IAAMy0C,EAAGh0C,UAAYT,EAAES,UAAW,GAAIg0C,IAEjF1yD,QAAkB,UAAIk5C,GA7B1B,GAAAmgF,GAAA77H,EAA0B,IAOVN,GAAAgC,QAAOA,I7I00mBOrB,KAAKX,EAASM,EAAoB","file":"CoveoJsSearch.Searchbox.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Coveo__temporary\"] = factory();\n\telse\n\t\troot[\"Coveo__temporary\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Coveo__temporary\"] = factory();\n\telse\n\t\troot[\"Coveo__temporary\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/js/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tfunction __export(m) {\n\t    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t}\n\t__export(__webpack_require__(2));\n\t__export(__webpack_require__(28));\n\t__export(__webpack_require__(34));\n\t__export(__webpack_require__(37));\n\t__export(__webpack_require__(52));\n\t__export(__webpack_require__(72));\n\t__export(__webpack_require__(88));\n\t__export(__webpack_require__(92));\n\t__export(__webpack_require__(120));\n\tvar Analytics_1 = __webpack_require__(112);\n\texports.Analytics = Analytics_1.Analytics;\n\tvar AnalyticsSuggestions_1 = __webpack_require__(221);\n\texports.AnalyticsSuggestions = AnalyticsSuggestions_1.AnalyticsSuggestions;\n\tvar FieldSuggestions_1 = __webpack_require__(222);\n\texports.FieldSuggestions = FieldSuggestions_1.FieldSuggestions;\n\tvar Omnibox_1 = __webpack_require__(134);\n\texports.Omnibox = Omnibox_1.Omnibox;\n\tvar Querybox_1 = __webpack_require__(130);\n\texports.Querybox = Querybox_1.Querybox;\n\tvar SearchButton_1 = __webpack_require__(132);\n\texports.SearchButton = SearchButton_1.SearchButton;\n\tvar Searchbox_1 = __webpack_require__(133);\n\texports.Searchbox = Searchbox_1.Searchbox;\n\tvar SwapVar_1 = __webpack_require__(371);\n\tSwapVar_1.swapVar(this);\n\n\n/***/ },\n/* 1 */,\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tfunction __export(m) {\n\t    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t}\n\tvar DefaultLanguage_1 = __webpack_require__(3);\n\tDefaultLanguage_1.defaultLanguage();\n\tvar DefaultLanguage_2 = __webpack_require__(3);\n\texports.setLanguageAfterPageLoaded = DefaultLanguage_2.setLanguageAfterPageLoaded;\n\tvar PromisesShim_1 = __webpack_require__(5);\n\tPromisesShim_1.shim();\n\tvar CustomEventPolyfill_1 = __webpack_require__(9);\n\tCustomEventPolyfill_1.customEventPolyfill();\n\t// MISC\n\tvar Version_1 = __webpack_require__(10);\n\texports.version = Version_1.version;\n\tvar SearchEndpoint_1 = __webpack_require__(11);\n\texports.SearchEndpoint = SearchEndpoint_1.SearchEndpoint;\n\t__export(__webpack_require__(24));\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Globalize = __webpack_require__(4);\n\tvar merge = function (obj1, obj2) {\n\t    var obj3 = {};\n\t    for (var attrname in obj1) {\n\t        obj3[attrname] = obj1[attrname];\n\t    }\n\t    for (var attrname in obj2) {\n\t        obj3[attrname] = obj2[attrname];\n\t    }\n\t    return obj3;\n\t};\n\tvar dict = {\n\t    \"Unknown\": \"Unknown\",\n\t    \"And\": \"AND\",\n\t    \"Authenticating\": \"Authenticating {0}...\",\n\t    \"Clear\": \"Clear {0}\",\n\t    \"CompleteQuery\": \"Complete Query\",\n\t    \"Exclude\": \"Exclude {0}\",\n\t    \"EnterTag\": \"Add Tag\",\n\t    \"Next\": \"Next\",\n\t    \"Last\": \"Last\",\n\t    \"Link\": \"Link\",\n\t    \"Or\": \"OR\",\n\t    \"Previous\": \"Previous\",\n\t    \"QueryDidntMatchAnyDocuments\": \"Your query did not match any documents.\",\n\t    \"QueryException\": \"Your query has an error: {0}.\",\n\t    \"Me\": \"Me\",\n\t    \"Remove\": \"Remove\",\n\t    \"Search\": \"Search\",\n\t    \"SearchFor\": \"Search for {0}\",\n\t    \"ShareQuery\": \"Share Query\",\n\t    \"Preferences\": \"Preferences\",\n\t    \"LinkOpeningSettings\": \"Link Opening Settings\",\n\t    \"Reauthenticate\": \"Reauthenticate {0}\",\n\t    \"ResultsFilteringExpression\": \"Results Filtering Expressions\",\n\t    \"FiltersInYourPreferences\": \"Filters in your preferences\",\n\t    \"Create\": \"Create\",\n\t    \"SearchIn\": \"Search in {0}\",\n\t    \"Seconds\": \"in {0} second<pl>s</pl>\",\n\t    \"ShowingResultsOf\": \"Result<pl>s</pl> {0}<pl>-{1}</pl> of {2}\",\n\t    \"SwitchTo\": \"Switch to {0}\",\n\t    \"Unexclude\": \"Unexclude {0}\",\n\t    \"ClearAllFilters\": \"Clear All Filters\",\n\t    \"SkipLogin\": \"Skip login\",\n\t    \"LoginInProgress\": \"Login in progress, please wait ...\",\n\t    \"Login\": \"Log In\",\n\t    \"GetStarted\": \"Get Started\",\n\t    \"More\": \"More\",\n\t    \"NMore\": \"{0} more...\",\n\t    \"Less\": \"Fewer\",\n\t    \"Settings\": \"Settings\",\n\t    \"Score\": \"Score\",\n\t    \"ScoreDescription\": \"The score is computed from the number of occurrences as well as from the position in the result set.\",\n\t    \"Occurrences\": \"Occurrences\",\n\t    \"OccurrencesDescription\": \"Sort by number of occurrences, with values having the highest number appearing first.\",\n\t    \"Label\": \"Label\",\n\t    \"Of\": \"of\",\n\t    \"LabelDescription\": \"Sort alphabetically on the field values.\",\n\t    \"Value\": \"Value\",\n\t    \"ValueDescription\": \"Sort on the values of the first computed field\",\n\t    \"AlphaAscending\": \"Value Ascending\",\n\t    \"AlphaDescending\": \"Value Descending\",\n\t    \"ChiSquare\": \"Chi Square\",\n\t    \"Nosort\": \"No Sort\",\n\t    \"RelativeFrequency\": \"Relative Frequency\",\n\t    \"RelativeFrequencyDescription\": \"Sort based on the relative frequency of values. Less common values will appear higher.\",\n\t    \"DateDistribution\": \"Date distribution\",\n\t    \"Custom\": \"Custom\",\n\t    \"CustomDescription\": \"Sort based on a custom order\",\n\t    \"ComputedField\": \"Computed Field\",\n\t    \"Ascending\": \"Ascending\",\n\t    \"Descending\": \"Descending\",\n\t    \"noResultFor\": \"No results for {0}\",\n\t    \"autoCorrectedQueryTo\": \"Query was automatically corrected to {0}\",\n\t    \"didYouMean\": \"Did you mean: {0}\",\n\t    \"SuggestedResults\": \"Suggested Results\",\n\t    \"SuggestedQueries\": \"Suggested Queries\",\n\t    \"MostRelevantItems\": \"Most relevant items:\",\n\t    \"AllItems\": \"All items:\",\n\t    \"ShowLess\": \"Show less\",\n\t    \"ShowMore\": \"Show more\",\n\t    \"HideFacet\": \"Hide Facet\",\n\t    \"ShowFacet\": \"Show Facet\",\n\t    \"AndOthers\": \"and {0} other<pl>s</pl>\",\n\t    \"Others\": \"{0} other<pl>s</pl>\",\n\t    \"MostRelevantPosts\": \"Most Relevant Posts:\",\n\t    \"CompleteThread\": \"Complete Thread:\",\n\t    \"ShowCompleteThread\": \"Show Complete Thread\",\n\t    \"ShowOnlyTopMatchingPosts\": \"Show Only Top Matching Posts\",\n\t    \"MostRelevantReplies\": \"Most Relevant Replies:\",\n\t    \"AllConversation\": \"All Conversation:\",\n\t    \"ShowAllConversation\": \"Show All Conversation\",\n\t    \"ShowAllReplies\": \"Show All Replies\",\n\t    \"ShowOnlyMostRelevantReplies\": \"Show Only Most Relevant Replies\",\n\t    \"Close\": \"Close\",\n\t    \"Open\": \"Open\",\n\t    \"OpenInOutlookWhenPossible\": \"Open in Outlook (when possible)\",\n\t    \"AlwaysOpenInNewWindow\": \"Always open results in new window\",\n\t    \"Quickview\": \"Quick View\",\n\t    \"NoQuickview\": \"The Quick View for this document is unavailable\",\n\t    \"ErrorReport\": \"Error Report\",\n\t    \"OopsError\": \"Something went wrong.\",\n\t    \"ProblemPersists\": \"If the problem persists contact the administrator.\",\n\t    \"GoBack\": \"Go Back\",\n\t    \"Reset\": \"Reset\",\n\t    \"Retry\": \"Retry\",\n\t    \"MoreInfo\": \"More Information\",\n\t    \"Username\": \"Username\",\n\t    \"Password\": \"Password\",\n\t    \"PostedBy\": \"Posted by\",\n\t    \"CannotConnect\": \"Cannot connect to the server address.\",\n\t    \"BadUserPass\": \"Password does not match with username.\",\n\t    \"PleaseEnterYourCredentials\": \"Please enter your credentials for {0}.\",\n\t    \"PleaseEnterYourSearchPage\": \"Please enter your search page URL\",\n\t    \"Collapse\": \"Collapse\",\n\t    \"Collapsable\": \"Collapsible\",\n\t    \"Expand\": \"Expand\",\n\t    \"Today\": \"Today\",\n\t    \"Yesterday\": \"Yesterday\",\n\t    \"Tomorrow\": \"Tomorrow\",\n\t    \"Duration\": \"Duration: {0}\",\n\t    \"IndexDuration\": \"Index Duration: {0}\",\n\t    \"ProxyDuration\": \"Proxy Duration: {0}\",\n\t    \"ClientDuration\": \"Client Duration: {0}\",\n\t    \"Unavailable\": \"Unavailable\",\n\t    \"Reply\": \"Reply\",\n\t    \"ReplyAll\": \"Reply All\",\n\t    \"Forward\": \"Forward\",\n\t    \"From\": \"From\",\n\t    \"Caption\": \"Caption\",\n\t    \"Expression\": \"Expression\",\n\t    \"Tab\": \"Tab\",\n\t    \"Tabs\": \"Tabs\",\n\t    \"EnterExpressionName\": \"Enter expression name\",\n\t    \"EnterExpressionToFilterWith\": \"Enter expression to filter results with\",\n\t    \"SelectTab\": \"Select Tab\",\n\t    \"SelectAll\": \"Select All\",\n\t    \"PageUrl\": \"Search page URL\",\n\t    \"ErrorSavingToDevice\": \"Error while saving the information to your device\",\n\t    \"ErrorReadingFromDevice\": \"Error while reading the information from your device\",\n\t    \"AppIntro\": \"Speak with a product specialist who can answer your questions about Coveo and help you decide which Coveo solution is right for you. Or, try a live demo !\",\n\t    \"TryDemo\": \"Try the demo\",\n\t    \"ContactUs\": \"Contact us\",\n\t    \"NewToCoveo\": \"New to Coveo?\",\n\t    \"LetUsHelpGetStarted\": \"Let us help you get started\",\n\t    \"LikesThis\": \"{0} like<sn>s</sn> this.\",\n\t    \"CannotConnectSearchPage\": \"Cannot connect to your search page\",\n\t    \"AreYouSureDeleteFilter\": \"Are you sure you want to delete the filter {0} with the expression {1}\",\n\t    \"OnlineHelp\": \"Online Help\",\n\t    \"Done\": \"Done\",\n\t    \"SaveFacetState\": \"Save this facet state\",\n\t    \"ClearFacetState\": \"Clear facet state\",\n\t    \"DisplayingTheOnlyMessage\": \"Displaying the only message in this conversation\",\n\t    \"NoNetworkConnection\": \"No network connection\",\n\t    \"UnknownConnection\": \"Unknown connection\",\n\t    \"EthernetConnection\": \"Ethernet connection\",\n\t    \"WiFi\": \"WiFi connection\",\n\t    \"CELL\": \"Cellular connection\",\n\t    \"CELL_2G\": \"Cellular 2G connection\",\n\t    \"CELL_3G\": \"Cellular 3G connection\",\n\t    \"CELL_4G\": \"Cellular 4G connection\",\n\t    \"Relevance\": \"Relevance\",\n\t    \"Date\": \"Date\",\n\t    \"Amount\": \"Amount\",\n\t    \"QueryExceptionNoException\": \"No exception\",\n\t    \"QueryExceptionInvalidSyntax\": \"Invalid syntax\",\n\t    \"QueryExceptionInvalidCustomField\": \"Invalid custom field\",\n\t    \"QueryExceptionInvalidDate\": \"Invalid date\",\n\t    \"QueryExceptionInvalidExactPhrase\": \"Invalid exact phrase\",\n\t    \"QueryExceptionInvalidDateOp\": \"Invalid date operator\",\n\t    \"QueryExceptionInvalidNear\": \"Invalid NEAR operator\",\n\t    \"QueryExceptionInvalidWeightedNear\": \"Invalid weighted NEAR\",\n\t    \"QueryExceptionInvalidTerm\": \"Invalid term\",\n\t    \"QueryExceptionTooManyTerms\": \"Too many terms\",\n\t    \"QueryExceptionWildcardTooGeneral\": \"Wildcard too general\",\n\t    \"QueryExceptionInvalidSortField\": \"Invalid sort field\",\n\t    \"QueryExceptionInvalidSmallStringOp\": \"Invalid small string operator\",\n\t    \"QueryExceptionRequestedResultsMax\": \"Requested results maximum\",\n\t    \"QueryExceptionAggregatedMirrorDead\": \"Aggregated mirror is offline\",\n\t    \"QueryExceptionAggregatedMirrorQueryTimeOut\": \"Aggregated mirror query timeout\",\n\t    \"QueryExceptionAggregatedMirrorInvalidBuildNumber\": \"Aggregated mirror invalid build number\",\n\t    \"QueryExceptionAggregatedMirrorCannotConnect\": \"Aggregated mirror cannot connect\",\n\t    \"QueryExceptionNotEnoughLeadingCharsWildcard\": \"Not enough leading character wildcard\",\n\t    \"QueryExceptionSecurityInverterNotFound\": \"Security inverter not found\",\n\t    \"QueryExceptionSecurityInverterAccessDenied\": \"Security inverter access denied\",\n\t    \"QueryExceptionAggregatedMirrorCannotImpersonate\": \"Aggregated mirror cannot impersonate\",\n\t    \"QueryExceptionUnexpected\": \"Unexpected\",\n\t    \"QueryExceptionAccessDenied\": \"Access denied\",\n\t    \"QueryExceptionSuperUserTokenInvalid\": \"Super user token invalid\",\n\t    \"QueryExceptionSuperUserTokenExpired\": \"Super user token is expired\",\n\t    \"QueryExceptionLicenseQueriesExpired\": \"Queries license expired\",\n\t    \"QueryExceptionLicenseSuperUserTokenNotSupported\": \"License super user token not supported\",\n\t    \"QueryExceptionInvalidSession\": \"Invalid session\",\n\t    \"QueryExceptionInvalidDocument\": \"Invalid document\",\n\t    \"QueryExceptionSearchDisabled\": \"Search disabled\",\n\t    \"FileType\": \"File type\",\n\t    \"ShowAttachment\": \"Show attachment\",\n\t    \"OnFeed\": \"on {0}'s feed.\",\n\t    \"Author\": \"Author\",\n\t    \"NoTitle\": \"No title\",\n\t    \"CurrentSelections\": \"Current selections\",\n\t    \"AllContent\": \"All content\",\n\t    \"CancelLastAction\": \"Cancel last action\",\n\t    \"SearchTips\": \"Search tips\",\n\t    \"CheckSpelling\": \"Check the spelling of your keywords.\",\n\t    \"TryUsingFewerKeywords\": \"Try using fewer, different or more general keywords.\",\n\t    \"SelectFewerFilters\": \"Select fewer filters to broaden your search.\",\n\t    \"Document\": \"Document\",\n\t    \"Time\": \"Time\",\n\t    \"StartDate\": \"Start Date\",\n\t    \"StartTime\": \"Start Time\",\n\t    \"DurationTitle\": \"Duration\",\n\t    \"UserQuery\": \"User query\",\n\t    \"ShowUserActions\": \"Show User Actions\",\n\t    \"NoData\": \"No data available\",\n\t    \"EventType\": \"Event type\",\n\t    \"GoToFullSearch\": \"Full search\",\n\t    \"GoToEdition\": \"Customize Panel\",\n\t    \"RemoveContext\": \"Remove context\",\n\t    \"BoxAttachToCase\": \"Attach to case\",\n\t    \"AttachToCase\": \"Attach to case\",\n\t    \"Attach\": \"Attach\",\n\t    \"Attached\": \"Attached\",\n\t    \"Detach\": \"Detach\",\n\t    \"Details\": \"Details\",\n\t    \"AdditionalFilters\": \"Additional filters\",\n\t    \"SelectNonContextualSearch\": \"Remove the context from the current record to broaden your search\",\n\t    \"CopyPasteToSupport\": \"Copy paste this message to Coveo Support team for more information.\",\n\t    \"FollowQueryDescription\": \"Alert me for changes to the search results of this query.\",\n\t    \"SearchAlerts_Panel\": \"Manage Alerts\",\n\t    \"SearchAlerts_PanelDescription\": \"View and manage your search alerts.\",\n\t    \"SearchAlerts_PanelNoSearchAlerts\": \"You have no subscriptions.\",\n\t    \"SearchAlerts_Fail\": \"The Search Alerts service is currently unavailable.\",\n\t    \"SearchAlerts_Type\": \"Type\",\n\t    \"SearchAlerts_Content\": \"Content\",\n\t    \"SearchAlerts_Actions\": \"Action\",\n\t    \"EmptyQuery\": \"&lt;empty&gt;\",\n\t    \"SearchAlerts_Type_followQuery\": \"Query\",\n\t    \"SearchAlerts_Type_followDocument\": \"Item\",\n\t    \"SearchAlerts_unFollowing\": \"Stop Following\",\n\t    \"SearchAlerts_follow\": \"Follow\",\n\t    \"SearchAlerts_followed\": \"Followed\",\n\t    \"SearchAlerts_followQuery\": \"Follow Query\",\n\t    \"Subscription_StopFollowingQuery\": \"Stop Following Query\",\n\t    \"SearchAlerts_Frequency\": \"When\",\n\t    \"SubscriptionsManageSubscriptions\": \"Manage Alerts\",\n\t    \"SubscriptionsMessageFollowQuery\": \"You will receive alerts when the query <b>{0}</b> returns new or updated items.\",\n\t    \"SubscriptionsMessageFollow\": \"You will receive alerts for changes to the item <b>{0}</b>.\",\n\t    \"Expiration\": \"Expiration\",\n\t    \"Monthly\": \"Monthly\",\n\t    \"Daily\": \"Daily\",\n\t    \"Monday\": \"Monday\",\n\t    \"Tuesday\": \"Tuesday\",\n\t    \"Wednesday\": \"Wednesday\",\n\t    \"Thursday\": \"Thursday\",\n\t    \"Friday\": \"Friday\",\n\t    \"Saturday\": \"Saturday\",\n\t    \"Sunday\": \"Sunday\",\n\t    \"StartTypingCaseForSuggestions\": \"Describe your problem to see possible solutions\",\n\t    \"ExportToExcel\": \"Export to Excel\",\n\t    \"ExportToExcelDescription\": \"Export search results to Excel\",\n\t    \"CaseCreationNoResults\": \"No recommended solutions were found\",\n\t    \"SortBy\": \"Sort by\",\n\t    \"BoxCreateArticle\": \"Create Article\",\n\t    \"Facets\": \"Facets\",\n\t    \"AdvancedSearch\": \"Advanced Search\",\n\t    \"Keywords\": \"Keywords\",\n\t    \"AllTheseWords\": \"All these words\",\n\t    \"ExactPhrase\": \"This exact phrase\",\n\t    \"AnyOfTheseWords\": \"Any of these words\",\n\t    \"NoneOfTheseWords\": \"None of these words\",\n\t    \"Anytime\": \"Anytime\",\n\t    \"InTheLast\": \"In the last\",\n\t    \"Days\": \"days\",\n\t    \"Months\": \"months\",\n\t    \"Between\": \"Between\",\n\t    \"Language\": \"Language\",\n\t    \"Size\": \"Size\",\n\t    \"AtLeast\": \"at least\",\n\t    \"AtMost\": \"at most\",\n\t    \"Contains\": \"contains\",\n\t    \"DoesNotContain\": \"does not contain\",\n\t    \"Matches\": \"matches\",\n\t    \"Bytes\": \"bytes\",\n\t    \"objecttype_people\": \"People\",\n\t    \"objecttype_message\": \"Message\",\n\t    \"objecttype_feed\": \"RSS Feed\",\n\t    \"objecttype_thread\": \"Thread\",\n\t    \"objecttype_file\": \"File\",\n\t    \"objecttype_board\": \"\",\n\t    \"objecttype_category\": \"\",\n\t    \"objecttype_account\": \"Account\",\n\t    \"objecttype_campaign\": \"Campaign\",\n\t    \"objecttype_case\": \"Case\",\n\t    \"objecttype_contact\": \"Contact\",\n\t    \"objecttype_contract\": \"Contract\",\n\t    \"objecttype_event\": \"Event\",\n\t    \"objecttype_lead\": \"Lead\",\n\t    \"objecttype_solution\": \"Solution\",\n\t    \"objecttype_task\": \"Task\",\n\t    \"objecttype_user\": \"User\",\n\t    \"objecttype_attachment\": \"Attachment\",\n\t    \"objecttype_casecomment\": \"Case Comment\",\n\t    \"objecttype_opportunity\": \"Opportunity\",\n\t    \"objecttype_feeditem\": \"Chatter\",\n\t    \"objecttype_feedcomment\": \"Chatter\",\n\t    \"objecttype_note\": \"Note\",\n\t    \"objecttype_product\": \"Product\",\n\t    \"objecttype_partner\": \"Partner\",\n\t    \"objecttype_kbdocumentation\": \"Documentation\",\n\t    \"objecttype_kbtechnicalarticle\": \"Documentation\",\n\t    \"objecttype_kbsolution\": \"Solution\",\n\t    \"objecttype_kbknowledgearticle\": \"Knowledge Article\",\n\t    \"objecttype_kbattachment\": \"Attachment\",\n\t    \"filetype_html\": \"HTML File\",\n\t    \"filetype_wiki\": \"Wiki\",\n\t    \"filetype_webscraperwebpage\": \"Web page\",\n\t    \"filetype_image\": \"Image\",\n\t    \"filetype_folder\": \"Folder\",\n\t    \"filetype_txt\": \"Text\",\n\t    \"filetype_zip\": \"Zip File\",\n\t    \"filetype_pdf\": \"PDF File\",\n\t    \"filetype_xml\": \"XML File\",\n\t    \"filetype_doc\": \"Document\",\n\t    \"filetype_xls\": \"Spreadsheet Document\",\n\t    \"filetype_ppt\": \"Presentation Document\",\n\t    \"filetype_video\": \"Video\",\n\t    \"filetype_youtube\": \"YouTube video\",\n\t    \"filetype_saleforceitem\": \"Salesforce\",\n\t    \"filetype_exchangemessage\": \"Message\",\n\t    \"filetype_exchangeappointment\": \"Appointment\",\n\t    \"filetype_exchangenote\": \"Note\",\n\t    \"filetype_exchangetask\": \"Task\",\n\t    \"filetype_exchangeperson\": \"Exchange user\",\n\t    \"filetype_activedirperson\": \"Active Directory user\",\n\t    \"filetype_exchangeactivity\": \"Activity\",\n\t    \"filetype_exchangecalendarmessage\": \"Calendar message\",\n\t    \"filetype_exchangedocument\": \"Exchange document\",\n\t    \"filetype_exchangerssfeed\": \"RSS Feed\",\n\t    \"filetype_exchangejunkmessage\": \"Junk email\",\n\t    \"filetype_exchangeofficecom\": \"Communications\",\n\t    \"filetype_lithiummessage\": \"Message\",\n\t    \"filetype_lithiumthread\": \"Thread\",\n\t    \"filetype_lithiumboard\": \"Board\",\n\t    \"filetype_lithiumcategory\": \"Category\",\n\t    \"filetype_lithiumcommunity\": \"Community\",\n\t    \"filetype_spportal\": \"Portal\",\n\t    \"filetype_spsite\": \"Site\",\n\t    \"filetype_spuserprofile\": \"SharePoint User\",\n\t    \"filetype_sparea\": \"Area\",\n\t    \"filetype_spannouncement\": \"Announcement\",\n\t    \"filetype_spannouncementlist\": \"Announcements\",\n\t    \"filetype_spcontact\": \"Contact\",\n\t    \"filetype_spcontactlist\": \"Contacts\",\n\t    \"filetype_spcustomlist\": \"Custom Lists\",\n\t    \"filetype_spdiscussionboard\": \"Discussion Board\",\n\t    \"filetype_spdiscussionboardlist\": \"Discussion Boards\",\n\t    \"filetype_spdocumentlibrarylist\": \"Document Library\",\n\t    \"filetype_spevent\": \"Event\",\n\t    \"filetype_speventlist\": \"Events\",\n\t    \"filetype_spformlibrarylist\": \"Form Library\",\n\t    \"filetype_spissue\": \"Issue\",\n\t    \"filetype_spissuelist\": \"Issues\",\n\t    \"filetype_splink\": \"Link\",\n\t    \"filetype_splinklist\": \"Links\",\n\t    \"filetype_sppicturelibrarylist\": \"Picture Library\",\n\t    \"filetype_spsurvey\": \"Survey\",\n\t    \"filetype_spsurveylist\": \"Surveys\",\n\t    \"filetype_sptask\": \"Task\",\n\t    \"filetype_sptasklist\": \"Tasks\",\n\t    \"filetype_spagenda\": \"Agenda\",\n\t    \"filetype_spagendalist\": \"Agendas\",\n\t    \"filetype_spattendee\": \"Attendee\",\n\t    \"filetype_spattendeelist\": \"Attendees\",\n\t    \"filetype_spcustomgridlist\": \"Custom Grids\",\n\t    \"filetype_spdecision\": \"Decision\",\n\t    \"filetype_spdecisionlist\": \"Decisions\",\n\t    \"filetype_spobjective\": \"Objective\",\n\t    \"filetype_spobjectivelist\": \"Objectives\",\n\t    \"filetype_sptextbox\": \"Textbox\",\n\t    \"filetype_sptextboxlist\": \"Textbox list\",\n\t    \"filetype_spthingstobring\": \"Thing To Bring\",\n\t    \"filetype_spthingstobringlist\": \"Things To Bring\",\n\t    \"filetype_sparealisting\": \"Area Listing\",\n\t    \"filetype_spmeetingserie\": \"Meeting series\",\n\t    \"filetype_spmeetingserielist\": \"Meeting Series List\",\n\t    \"filetype_spsitedirectory\": \"Site Directory Item\",\n\t    \"filetype_spsitedirectorylist\": \"Site Directory\",\n\t    \"filetype_spdatasource\": \"Data Source\",\n\t    \"filetype_spdatasourcelist\": \"Data Source List\",\n\t    \"filetype_splisttemplatecataloglist\": \"List Template Catalog List\",\n\t    \"filetype_spwebpartcataloglist\": \"WebPart catalog list\",\n\t    \"filetype_spwebtemplatecataloglist\": \"Web Template Catalog List\",\n\t    \"filetype_spworkspacepagelist\": \"Workspace Page List\",\n\t    \"filetype_spunknownlist\": \"Custom List\",\n\t    \"filetype_spadministratortask\": \"Administrator Task\",\n\t    \"filetype_spadministratortasklist\": \"Administrator Tasks\",\n\t    \"filetype_spareadocumentlibrarylist\": \"Area Document Library\",\n\t    \"filetype_spblogcategory\": \"Blog Category\",\n\t    \"filetype_spblogcategorylist\": \"Blog Category\",\n\t    \"filetype_spblogcomment\": \"Blog Comment\",\n\t    \"filetype_spblogcommentlist\": \"Blog Comments\",\n\t    \"filetype_spblogpost\": \"Blog Post\",\n\t    \"filetype_spblogpostlist\": \"Blog Posts\",\n\t    \"filetype_spdataconnectionlibrarylist\": \"Data Connection Library\",\n\t    \"filetype_spdistributiongroup\": \"Distribution Group\",\n\t    \"filetype_spdistributiongrouplist\": \"Distribution Groups\",\n\t    \"filetype_spipfslist\": \"InfoPath Form Servers\",\n\t    \"filetype_spkeyperformanceindicator\": \"Key Performance Indicator\",\n\t    \"filetype_spkeyperformanceindicatorlist\": \"Key Performance Indicators\",\n\t    \"filetype_splanguagesandtranslator\": \"Languages and Translator\",\n\t    \"filetype_splanguagesandtranslatorlist\": \"Languages and Translators\",\n\t    \"filetype_spmasterpagescataloglist\": \"Master Pages Library\",\n\t    \"filetype_spnocodeworkflowlibrarylist\": \"No Code Workflow Library\",\n\t    \"filetype_spprojecttask\": \"Project Task\",\n\t    \"filetype_spprojecttasklist\": \"Project Tasks\",\n\t    \"filetype_sppublishingpageslibrarylist\": \"Page Library\",\n\t    \"filetype_spreportdocumentlibrarylist\": \"Report Document Library\",\n\t    \"filetype_spreportlibrarylist\": \"Report Library\",\n\t    \"filetype_spslidelibrarylist\": \"Slide Library\",\n\t    \"filetype_sptab\": \"Tabs\",\n\t    \"filetype_sptablist\": \"Tabs List\",\n\t    \"filetype_sptranslationmanagementlibrarylist\": \"Translation Management Library\",\n\t    \"filetype_spuserinformation\": \"User Information\",\n\t    \"filetype_spuserinformationlist\": \"User Information List\",\n\t    \"filetype_spwikipagelibrarylist\": \"Wiki Page Library\",\n\t    \"filetype_spworkflowhistory\": \"Workflow History\",\n\t    \"filetype_spworkflowhistorylist\": \"Workflow Histories\",\n\t    \"filetype_spworkflowprocess\": \"Custom Workflow Process\",\n\t    \"filetype_spworkflowprocesslist\": \"Custom Workflow Processes\",\n\t    \"filetype_sppublishingimageslibrarylist\": \"Publishing Image Library\",\n\t    \"filetype_spcirculation\": \"Circulation\",\n\t    \"filetype_spcirculationlist\": \"Circulations\",\n\t    \"filetype_spdashboardslibrarylist\": \"Dashboard Library\",\n\t    \"filetype_spdataconnectionforperformancepointlibrarylist\": \"Data Connection for Performance Point Library\",\n\t    \"filetype_sphealthreport\": \"Health Report\",\n\t    \"filetype_sphealthreportlist\": \"Health Reports\",\n\t    \"filetype_sphealthrule\": \"Health Rule\",\n\t    \"filetype_sphealthrulelist\": \"Health Rules\",\n\t    \"filetype_spimedictionary\": \"IME Dictionary\",\n\t    \"filetype_spimedictionarylist\": \"IME Dictionaries\",\n\t    \"filetype_spperformancepointcontent\": \"Performance Point Content\",\n\t    \"filetype_spperformancepointcontentlist\": \"Performance Point Contents\",\n\t    \"filetype_spphonecallmemo\": \"Phone Call Memo\",\n\t    \"filetype_spphonecallmemolist\": \"Phone Call Memos\",\n\t    \"filetype_sprecordlibrarylist\": \"Record Library\",\n\t    \"filetype_spresource\": \"Resource\",\n\t    \"filetype_spresourcelist\": \"Resources\",\n\t    \"filetype_spprocessdiagramslibrarylist\": \"Process Diagram Library\",\n\t    \"filetype_spsitethemeslibrarylist\": \"Site Theme Library\",\n\t    \"filetype_spsolutionslibrarylist\": \"Solution Library\",\n\t    \"filetype_spwfpublibrarylist\": \"WFPUB Library\",\n\t    \"filetype_spwhereabout\": \"Whereabout\",\n\t    \"filetype_spwhereaboutlist\": \"Whereabouts\",\n\t    \"filetype_spdocumentlink\": \"Link to a Document\",\n\t    \"filetype_spdocumentset\": \"Document Set\",\n\t    \"filetype_spmicrofeedpost\": \"Microfeed Post\",\n\t    \"filetype_spmicrofeedlist\": \"Microfeed\",\n\t    \"filetype_splistfolder\": \"List Folder\",\n\t    \"filetype_youtubevideo\": \"YouTube video\",\n\t    \"filetype_youtubeplaylistitem\": \"YouTube playlist item\",\n\t};\n\tfunction defaultLanguage() {\n\t    if (window['$'] != undefined && window['$'].fn != undefined && window['$'].fn.jquery != undefined) {\n\t        $(function () {\n\t            var locales = String[\"locales\"] || (String[\"locales\"] = {});\n\t            locales[\"en\"] = merge(locales[\"en\"], dict);\n\t            String[\"toLocaleString\"].call(this, { \"en\": dict });\n\t            String[\"locale\"] = \"en\";\n\t            String[\"defaultLocale\"] = \"en\";\n\t            Globalize.culture(\"en\");\n\t        });\n\t    }\n\t    else {\n\t        document.addEventListener('DOMContentLoaded', function (event) {\n\t            var locales = String[\"locales\"] || (String[\"locales\"] = {});\n\t            locales[\"en\"] = merge(locales[\"en\"], dict);\n\t            String[\"toLocaleString\"].call(this, { \"en\": dict });\n\t            String[\"locale\"] = \"en\";\n\t            String[\"defaultLocale\"] = \"en\";\n\t            Globalize.culture(\"en\");\n\t        });\n\t    }\n\t}\n\texports.defaultLanguage = defaultLanguage;\n\tfunction setLanguageAfterPageLoaded() {\n\t    var locales = String[\"locales\"] || (String[\"locales\"] = {});\n\t    locales[\"en\"] = merge(locales[\"en\"], dict);\n\t    String[\"toLocaleString\"].call(this, { \"en\": dict });\n\t    String[\"locale\"] = \"en\";\n\t    String[\"defaultLocale\"] = \"en\";\n\t    Globalize.culture(\"en\");\n\t}\n\texports.setLanguageAfterPageLoaded = setLanguageAfterPageLoaded;\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*! globalize - v0.1.1 - 2013-04-30\n\t* https://github.com/jquery/globalize\n\t* Copyright 2013 ; Licensed MIT */\n\tvar Globalize = (function(e,r){var t,n,a,s,u,l,i,c,o,f,d,p,h,g,b,m,y,M,v,k,z,F,A,x;t=function(e){return new t.prototype.init(e)}, true?module.exports=t:e.Globalize=t,t.cultures={},t.prototype={constructor:t,init:function(e){return this.cultures=t.cultures,this.cultureSelector=e,this}},t.prototype.init.prototype=t.prototype,t.cultures[\"default\"]={name:\"en\",englishName:\"English\",nativeName:\"English\",isRTL:!1,language:\"en\",numberFormat:{pattern:[\"-n\"],decimals:2,\",\":\",\",\".\":\".\",groupSizes:[3],\"+\":\"+\",\"-\":\"-\",NaN:\"NaN\",negativeInfinity:\"-Infinity\",positiveInfinity:\"Infinity\",percent:{pattern:[\"-n %\",\"n %\"],decimals:2,groupSizes:[3],\",\":\",\",\".\":\".\",symbol:\"%\"},currency:{pattern:[\"($n)\",\"$n\"],decimals:2,groupSizes:[3],\",\":\",\",\".\":\".\",symbol:\"$\"}},calendars:{standard:{name:\"Gregorian_USEnglish\",\"/\":\"/\",\":\":\":\",firstDay:0,days:{names:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],namesAbbr:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],namesShort:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"]},months:{names:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\",\"\"],namesAbbr:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\",\"\"]},AM:[\"AM\",\"am\",\"AM\"],PM:[\"PM\",\"pm\",\"PM\"],eras:[{name:\"A.D.\",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:\"M/d/yyyy\",D:\"dddd, MMMM dd, yyyy\",t:\"h:mm tt\",T:\"h:mm:ss tt\",f:\"dddd, MMMM dd, yyyy h:mm tt\",F:\"dddd, MMMM dd, yyyy h:mm:ss tt\",M:\"MMMM dd\",Y:\"yyyy MMMM\",S:\"yyyy'-'MM'-'dd'T'HH':'mm':'ss\"}}},messages:{}},t.cultures[\"default\"].calendar=t.cultures[\"default\"].calendars.standard,t.cultures.en=t.cultures[\"default\"],t.cultureSelector=\"en\",n=/^0x[a-f0-9]+$/i,a=/^[+\\-]?infinity$/i,s=/^[+\\-]?\\d*\\.?\\d*(e[+\\-]?\\d+)?$/,u=/^\\s+|\\s+$/g,l=function(e,r){if(e.indexOf)return e.indexOf(r);for(var t=0,n=e.length;n>t;t++)if(e[t]===r)return t;return-1},i=function(e,r){return e.substr(e.length-r.length)===r},c=function(){var e,t,n,a,s,u,l=arguments[0]||{},i=1,p=arguments.length,h=!1;for(\"boolean\"==typeof l&&(h=l,l=arguments[1]||{},i=2),\"object\"==typeof l||f(l)||(l={});p>i;i++)if(null!=(e=arguments[i]))for(t in e)n=l[t],a=e[t],l!==a&&(h&&a&&(d(a)||(s=o(a)))?(s?(s=!1,u=n&&o(n)?n:[]):u=n&&d(n)?n:{},l[t]=c(h,u,a)):a!==r&&(l[t]=a));return l},o=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},f=function(e){return\"[object Function]\"===Object.prototype.toString.call(e)},d=function(e){return\"[object Object]\"===Object.prototype.toString.call(e)},p=function(e,r){return 0===e.indexOf(r)},h=function(e){return(e+\"\").replace(u,\"\")},g=function(e){return isNaN(e)?0/0:Math[0>e?\"ceil\":\"floor\"](e)},b=function(e,r,t){var n;for(n=e.length;r>n;n+=1)e=t?\"0\"+e:e+\"0\";return e},m=function(e,r){for(var t=0,n=!1,a=0,s=e.length;s>a;a++){var u=e.charAt(a);switch(u){case\"'\":n?r.push(\"'\"):t++,n=!1;break;case\"\\\\\":n&&r.push(\"\\\\\"),n=!n;break;default:r.push(u),n=!1}}return t},y=function(e,r){r=r||\"F\";var t,n=e.patterns,a=r.length;if(1===a){if(t=n[r],!t)throw\"Invalid date format string '\"+r+\"'.\";r=t}else 2===a&&\"%\"===r.charAt(0)&&(r=r.charAt(1));return r},M=function(e,r,t){function n(e,r){var t,n=e+\"\";return r>1&&r>n.length?(t=v[r-2]+n,t.substr(t.length-r,r)):t=n}function a(){return h||g?h:(h=A.test(r),g=!0,h)}function s(e,r){if(b)return b[r];switch(r){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw\"Invalid part value \"+r}}var u,l=t.calendar,i=l.convert;if(!r||!r.length||\"i\"===r){if(t&&t.name.length)if(i)u=M(e,l.patterns.F,t);else{var c=new Date(e.getTime()),o=z(e,l.eras);c.setFullYear(F(e,l,o)),u=c.toLocaleString()}else u=\"\"+e;return u}var f=l.eras,d=\"s\"===r;r=y(l,r),u=[];var p,h,g,b,v=[\"0\",\"00\",\"000\"],A=/([^d]|^)(d|dd)([^d]|$)/g,x=0,I=k();for(!d&&i&&(b=i.fromGregorian(e));;){var S=I.lastIndex,w=I.exec(r),C=r.slice(S,w?w.index:r.length);if(x+=m(C,u),!w)break;if(x%2)u.push(w[0]);else{var D=w[0],H=D.length;switch(D){case\"ddd\":case\"dddd\":var O=3===H?l.days.namesAbbr:l.days.names;u.push(O[e.getDay()]);break;case\"d\":case\"dd\":h=!0,u.push(n(s(e,2),H));break;case\"MMM\":case\"MMMM\":var N=s(e,1);u.push(l.monthsGenitive&&a()?l.monthsGenitive[3===H?\"namesAbbr\":\"names\"][N]:l.months[3===H?\"namesAbbr\":\"names\"][N]);break;case\"M\":case\"MM\":u.push(n(s(e,1)+1,H));break;case\"y\":case\"yy\":case\"yyyy\":N=b?b[0]:F(e,l,z(e,f),d),4>H&&(N%=100),u.push(n(N,H));break;case\"h\":case\"hh\":p=e.getHours()%12,0===p&&(p=12),u.push(n(p,H));break;case\"H\":case\"HH\":u.push(n(e.getHours(),H));break;case\"m\":case\"mm\":u.push(n(e.getMinutes(),H));break;case\"s\":case\"ss\":u.push(n(e.getSeconds(),H));break;case\"t\":case\"tt\":N=12>e.getHours()?l.AM?l.AM[0]:\" \":l.PM?l.PM[0]:\" \",u.push(1===H?N.charAt(0):N);break;case\"f\":case\"ff\":case\"fff\":u.push(n(e.getMilliseconds(),3).substr(0,H));break;case\"z\":case\"zz\":p=e.getTimezoneOffset()/60,u.push((0>=p?\"+\":\"-\")+n(Math.floor(Math.abs(p)),H));break;case\"zzz\":p=e.getTimezoneOffset()/60,u.push((0>=p?\"+\":\"-\")+n(Math.floor(Math.abs(p)),2)+\":\"+n(Math.abs(e.getTimezoneOffset()%60),2));break;case\"g\":case\"gg\":l.eras&&u.push(l.eras[z(e,f)].name);break;case\"/\":u.push(l[\"/\"]);break;default:throw\"Invalid date format pattern '\"+D+\"'.\"}}}return u.join(\"\")},function(){var e;e=function(e,r,t){var n=t.groupSizes,a=n[0],s=1,u=Math.pow(10,r),l=Math.round(e*u)/u;isFinite(l)||(l=e),e=l;var i=e+\"\",c=\"\",o=i.split(/e/i),f=o.length>1?parseInt(o[1],10):0;i=o[0],o=i.split(\".\"),i=o[0],c=o.length>1?o[1]:\"\",f>0?(c=b(c,f,!1),i+=c.slice(0,f),c=c.substr(f)):0>f&&(f=-f,i=b(i,f+1,!0),c=i.slice(-f,i.length)+c,i=i.slice(0,-f)),c=r>0?t[\".\"]+(c.length>r?c.slice(0,r):b(c,r)):\"\";for(var d=i.length-1,p=t[\",\"],h=\"\";d>=0;){if(0===a||a>d)return i.slice(0,d+1)+(h.length?p+h+c:c);h=i.slice(d-a+1,d+1)+(h.length?p+h:\"\"),d-=a,n.length>s&&(a=n[s],s++)}return i.slice(0,d+1)+p+h+c},v=function(r,t,n){if(!isFinite(r))return 1/0===r?n.numberFormat.positiveInfinity:r===-1/0?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!t||\"i\"===t)return n.name.length?r.toLocaleString():\"\"+r;t=t||\"D\";var a,s=n.numberFormat,u=Math.abs(r),l=-1;t.length>1&&(l=parseInt(t.slice(1),10));var i,c=t.charAt(0).toUpperCase();switch(c){case\"D\":a=\"n\",u=g(u),-1!==l&&(u=b(\"\"+u,l,!0)),0>r&&(u=\"-\"+u);break;case\"N\":i=s;case\"C\":i=i||s.currency;case\"P\":i=i||s.percent,a=0>r?i.pattern[0]:i.pattern[1]||\"n\",-1===l&&(l=i.decimals),u=e(u*(\"P\"===c?100:1),l,i);break;default:throw\"Bad number format specifier: \"+c}for(var o=/n|\\$|-|%/g,f=\"\";;){var d=o.lastIndex,p=o.exec(a);if(f+=a.slice(d,p?p.index:a.length),!p)break;switch(p[0]){case\"n\":f+=u;break;case\"$\":f+=s.currency.symbol;break;case\"-\":/[1-9]/.test(u)&&(f+=s[\"-\"]);break;case\"%\":f+=s.percent.symbol}}return f}}(),k=function(){return/\\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},z=function(e,r){if(!r)return 0;for(var t,n=e.getTime(),a=0,s=r.length;s>a;a++)if(t=r[a].start,null===t||n>=t)return a;return 0},F=function(e,r,t,n){var a=e.getFullYear();return!n&&r.eras&&(a-=r.eras[t].offset),a},function(){var e,r,t,n,a,s,u;e=function(e,r){if(100>r){var t=new Date,n=z(t),a=F(t,e,n),s=e.twoDigitYearMax;s=\"string\"==typeof s?(new Date).getFullYear()%100+parseInt(s,10):s,r+=a-a%100,r>s&&(r-=100)}return r},r=function(e,r,t){var n,a=e.days,i=e._upperDays;return i||(e._upperDays=i=[u(a.names),u(a.namesAbbr),u(a.namesShort)]),r=s(r),t?(n=l(i[1],r),-1===n&&(n=l(i[2],r))):n=l(i[0],r),n},t=function(e,r,t){var n=e.months,a=e.monthsGenitive||e.months,i=e._upperMonths,c=e._upperMonthsGen;i||(e._upperMonths=i=[u(n.names),u(n.namesAbbr)],e._upperMonthsGen=c=[u(a.names),u(a.namesAbbr)]),r=s(r);var o=l(t?i[1]:i[0],r);return 0>o&&(o=l(t?c[1]:c[0],r)),o},n=function(e,r){var t=e._parseRegExp;if(t){var n=t[r];if(n)return n}else e._parseRegExp=t={};for(var a,s=y(e,r).replace(/([\\^\\$\\.\\*\\+\\?\\|\\[\\]\\(\\)\\{\\}])/g,\"\\\\\\\\$1\"),u=[\"^\"],l=[],i=0,c=0,o=k();null!==(a=o.exec(s));){var f=s.slice(i,a.index);if(i=o.lastIndex,c+=m(f,u),c%2)u.push(a[0]);else{var d,p=a[0],h=p.length;switch(p){case\"dddd\":case\"ddd\":case\"MMMM\":case\"MMM\":case\"gg\":case\"g\":d=\"(\\\\D+)\";break;case\"tt\":case\"t\":d=\"(\\\\D*)\";break;case\"yyyy\":case\"fff\":case\"ff\":case\"f\":d=\"(\\\\d{\"+h+\"})\";break;case\"dd\":case\"d\":case\"MM\":case\"M\":case\"yy\":case\"y\":case\"HH\":case\"H\":case\"hh\":case\"h\":case\"mm\":case\"m\":case\"ss\":case\"s\":d=\"(\\\\d\\\\d?)\";break;case\"zzz\":d=\"([+-]?\\\\d\\\\d?:\\\\d{2})\";break;case\"zz\":case\"z\":d=\"([+-]?\\\\d\\\\d?)\";break;case\"/\":d=\"(\\\\/)\";break;default:throw\"Invalid date format pattern '\"+p+\"'.\"}d&&u.push(d),l.push(a[0])}}m(s.slice(i),u),u.push(\"$\");var g=u.join(\"\").replace(/\\s+/g,\"\\\\s+\"),b={regExp:g,groups:l};return t[r]=b},a=function(e,r,t){return r>e||e>t},s=function(e){return e.split(\"\\u00a0\").join(\" \").toUpperCase()},u=function(e){for(var r=[],t=0,n=e.length;n>t;t++)r[t]=s(e[t]);return r},A=function(s,u,l){s=h(s);var i=l.calendar,c=n(i,u),o=RegExp(c.regExp).exec(s);if(null===o)return null;for(var f,d=c.groups,g=null,b=null,m=null,y=null,M=null,v=0,k=0,z=0,F=0,A=null,x=!1,I=0,S=d.length;S>I;I++){var w=o[I+1];if(w){var C=d[I],D=C.length,H=parseInt(w,10);switch(C){case\"dd\":case\"d\":if(y=H,a(y,1,31))return null;break;case\"MMM\":case\"MMMM\":if(m=t(i,w,3===D),a(m,0,11))return null;break;case\"M\":case\"MM\":if(m=H-1,a(m,0,11))return null;break;case\"y\":case\"yy\":case\"yyyy\":if(b=4>D?e(i,H):H,a(b,0,9999))return null;break;case\"h\":case\"hh\":if(v=H,12===v&&(v=0),a(v,0,11))return null;break;case\"H\":case\"HH\":if(v=H,a(v,0,23))return null;break;case\"m\":case\"mm\":if(k=H,a(k,0,59))return null;break;case\"s\":case\"ss\":if(z=H,a(z,0,59))return null;break;case\"tt\":case\"t\":if(x=i.PM&&(w===i.PM[0]||w===i.PM[1]||w===i.PM[2]),!x&&(!i.AM||w!==i.AM[0]&&w!==i.AM[1]&&w!==i.AM[2]))return null;break;case\"f\":case\"ff\":case\"fff\":if(F=H*Math.pow(10,3-D),a(F,0,999))return null;break;case\"ddd\":case\"dddd\":if(M=r(i,w,3===D),a(M,0,6))return null;break;case\"zzz\":var O=w.split(/:/);if(2!==O.length)return null;if(f=parseInt(O[0],10),a(f,-12,13))return null;var N=parseInt(O[1],10);if(a(N,0,59))return null;A=60*f+(p(w,\"-\")?-N:N);break;case\"z\":case\"zz\":if(f=H,a(f,-12,13))return null;A=60*f;break;case\"g\":case\"gg\":var T=w;if(!T||!i.eras)return null;T=h(T.toLowerCase());for(var j=0,$=i.eras.length;$>j;j++)if(T===i.eras[j].name.toLowerCase()){g=j;break}if(null===g)return null}}}var P,G=new Date,E=i.convert;if(P=E?E.fromGregorian(G)[0]:G.getFullYear(),null===b?b=P:i.eras&&(b+=i.eras[g||0].offset),null===m&&(m=0),null===y&&(y=1),E){if(G=E.toGregorian(b,m,y),null===G)return null}else{if(G.setFullYear(b,m,y),G.getDate()!==y)return null;if(null!==M&&G.getDay()!==M)return null}if(x&&12>v&&(v+=12),G.setHours(v,k,z,F),null!==A){var Y=G.getMinutes()-(A+G.getTimezoneOffset());G.setHours(G.getHours()+parseInt(Y/60,10),Y%60)}return G}}(),x=function(e,r,t){var n,a=r[\"-\"],s=r[\"+\"];switch(t){case\"n -\":a=\" \"+a,s=\" \"+s;case\"n-\":i(e,a)?n=[\"-\",e.substr(0,e.length-a.length)]:i(e,s)&&(n=[\"+\",e.substr(0,e.length-s.length)]);break;case\"- n\":a+=\" \",s+=\" \";case\"-n\":p(e,a)?n=[\"-\",e.substr(a.length)]:p(e,s)&&(n=[\"+\",e.substr(s.length)]);break;case\"(n)\":p(e,\"(\")&&i(e,\")\")&&(n=[\"-\",e.substr(1,e.length-2)])}return n||[\"\",e]},t.prototype.findClosestCulture=function(e){return t.findClosestCulture.call(this,e)},t.prototype.format=function(e,r,n){return t.format.call(this,e,r,n)},t.prototype.localize=function(e,r){return t.localize.call(this,e,r)},t.prototype.parseInt=function(e,r,n){return t.parseInt.call(this,e,r,n)},t.prototype.parseFloat=function(e,r,n){return t.parseFloat.call(this,e,r,n)},t.prototype.culture=function(e){return t.culture.call(this,e)},t.addCultureInfo=function(e,r,t){var n={},a=!1;\"string\"!=typeof e?(t=e,e=this.culture().name,n=this.cultures[e]):\"string\"!=typeof r?(t=r,a=null==this.cultures[e],n=this.cultures[e]||this.cultures[\"default\"]):(a=!0,n=this.cultures[r]),this.cultures[e]=c(!0,{},n,t),a&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},t.findClosestCulture=function(e){var r;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures[\"default\"];if(\"string\"==typeof e&&(e=e.split(\",\")),o(e)){var t,n,a=this.cultures,s=e,u=s.length,l=[];for(n=0;u>n;n++){e=h(s[n]);var i,c=e.split(\";\");t=h(c[0]),1===c.length?i=1:(e=h(c[1]),0===e.indexOf(\"q=\")?(e=e.substr(2),i=parseFloat(e),i=isNaN(i)?0:i):i=1),l.push({lang:t,pri:i})}for(l.sort(function(e,r){return e.pri<r.pri?1:e.pri>r.pri?-1:0}),n=0;u>n;n++)if(t=l[n].lang,r=a[t])return r;for(n=0;u>n;n++)for(t=l[n].lang;;){var f=t.lastIndexOf(\"-\");if(-1===f)break;if(t=t.substr(0,f),r=a[t])return r}for(n=0;u>n;n++){t=l[n].lang;for(var d in a){var p=a[d];if(p.language===t)return p}}}else if(\"object\"==typeof e)return e;return r||null},t.format=function(e,r,t){var n=this.findClosestCulture(t);return e instanceof Date?e=M(e,r,n):\"number\"==typeof e&&(e=v(e,r,n)),e},t.localize=function(e,r){return this.findClosestCulture(r).messages[e]||this.cultures[\"default\"].messages[e]},t.parseDate=function(e,r,t){t=this.findClosestCulture(t);var n,a,s;if(r){if(\"string\"==typeof r&&(r=[r]),r.length)for(var u=0,l=r.length;l>u;u++){var i=r[u];if(i&&(n=A(e,i,t)))break}}else{s=t.calendar.patterns;for(a in s)if(n=A(e,s[a],t))break}return n||null},t.parseInt=function(e,r,n){return g(t.parseFloat(e,r,n))},t.parseFloat=function(e,r,t){\"number\"!=typeof r&&(t=r,r=10);var u=this.findClosestCulture(t),l=0/0,i=u.numberFormat;if(e.indexOf(u.numberFormat.currency.symbol)>-1&&(e=e.replace(u.numberFormat.currency.symbol,\"\"),e=e.replace(u.numberFormat.currency[\".\"],u.numberFormat[\".\"])),e.indexOf(u.numberFormat.percent.symbol)>-1&&(e=e.replace(u.numberFormat.percent.symbol,\"\")),e=e.replace(/ /g,\"\"),a.test(e))l=parseFloat(e);else if(!r&&n.test(e))l=parseInt(e,16);else{var c=x(e,i,i.pattern[0]),o=c[0],f=c[1];\"\"===o&&\"(n)\"!==i.pattern[0]&&(c=x(e,i,\"(n)\"),o=c[0],f=c[1]),\"\"===o&&\"-n\"!==i.pattern[0]&&(c=x(e,i,\"-n\"),o=c[0],f=c[1]),o=o||\"+\";var d,p,h=f.indexOf(\"e\");0>h&&(h=f.indexOf(\"E\")),0>h?(p=f,d=null):(p=f.substr(0,h),d=f.substr(h+1));var g,b,m=i[\".\"],y=p.indexOf(m);0>y?(g=p,b=null):(g=p.substr(0,y),b=p.substr(y+m.length));var M=i[\",\"];g=g.split(M).join(\"\");var v=M.replace(/\\u00A0/g,\" \");M!==v&&(g=g.split(v).join(\"\"));var k=o+g;if(null!==b&&(k+=\".\"+b),null!==d){var z=x(d,i,\"-n\");k+=\"e\"+(z[0]||\"+\")+z[1]}s.test(k)&&(l=parseFloat(k))}return l},t.culture=function(e){return e!==r&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures[\"default\"]}; return Globalize;}(this));\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar es6_promise_1 = __webpack_require__(6);\n\tfunction shim() {\n\t    es6_promise_1.Promise.prototype['finally'] = function finallyPolyfill(callback) {\n\t        var constructor = this.constructor;\n\t        return this.then(function (value) {\n\t            return constructor.resolve(callback()).then(function () {\n\t                return value;\n\t            });\n\t        }, function (reason) {\n\t            return constructor.resolve(callback()).then(function () {\n\t                throw reason;\n\t            });\n\t        });\n\t    };\n\t    var rethrowError = function (self) {\n\t        self.then(null, function (err) {\n\t            setTimeout(function () {\n\t                throw err;\n\t            }, 0);\n\t        });\n\t    };\n\t    if (typeof es6_promise_1.Promise.prototype['done'] !== 'function') {\n\t        es6_promise_1.Promise.prototype['done'] = function (onFulfilled, onRejected) {\n\t            var self = arguments.length ? this.then.apply(this, arguments) : this;\n\t            rethrowError(self);\n\t            return this;\n\t        };\n\t    }\n\t    if (typeof es6_promise_1.Promise.prototype['fail'] !== 'function') {\n\t        es6_promise_1.Promise.prototype['fail'] = function (onFulfilled, onRejected) {\n\t            var self = arguments.length ? this.catch.apply(this, arguments) : this;\n\t            rethrowError(self);\n\t            return this;\n\t        };\n\t    }\n\t}\n\texports.shim = shim;\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar require;/* WEBPACK VAR INJECTION */(function(process, global) {/*!\n\t * @overview es6-promise - a tiny implementation of Promises/A+.\n\t * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n\t * @license   Licensed under MIT license\n\t *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n\t * @version   3.3.1\n\t */\n\t\n\t(function (global, factory) {\n\t     true ? module.exports = factory() :\n\t    typeof define === 'function' && define.amd ? define(factory) :\n\t    (global.ES6Promise = factory());\n\t}(this, (function () { 'use strict';\n\t\n\tfunction objectOrFunction(x) {\n\t  return typeof x === 'function' || typeof x === 'object' && x !== null;\n\t}\n\t\n\tfunction isFunction(x) {\n\t  return typeof x === 'function';\n\t}\n\t\n\tvar _isArray = undefined;\n\tif (!Array.isArray) {\n\t  _isArray = function (x) {\n\t    return Object.prototype.toString.call(x) === '[object Array]';\n\t  };\n\t} else {\n\t  _isArray = Array.isArray;\n\t}\n\t\n\tvar isArray = _isArray;\n\t\n\tvar len = 0;\n\tvar vertxNext = undefined;\n\tvar customSchedulerFn = undefined;\n\t\n\tvar asap = function asap(callback, arg) {\n\t  queue[len] = callback;\n\t  queue[len + 1] = arg;\n\t  len += 2;\n\t  if (len === 2) {\n\t    // If len is 2, that means that we need to schedule an async flush.\n\t    // If additional callbacks are queued before the queue is flushed, they\n\t    // will be processed by this flush that we are scheduling.\n\t    if (customSchedulerFn) {\n\t      customSchedulerFn(flush);\n\t    } else {\n\t      scheduleFlush();\n\t    }\n\t  }\n\t};\n\t\n\tfunction setScheduler(scheduleFn) {\n\t  customSchedulerFn = scheduleFn;\n\t}\n\t\n\tfunction setAsap(asapFn) {\n\t  asap = asapFn;\n\t}\n\t\n\tvar browserWindow = typeof window !== 'undefined' ? window : undefined;\n\tvar browserGlobal = browserWindow || {};\n\tvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\n\tvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\t\n\t// test for web worker but not in IE10\n\tvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\t\n\t// node\n\tfunction useNextTick() {\n\t  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n\t  // see https://github.com/cujojs/when/issues/410 for details\n\t  return function () {\n\t    return process.nextTick(flush);\n\t  };\n\t}\n\t\n\t// vertx\n\tfunction useVertxTimer() {\n\t  return function () {\n\t    vertxNext(flush);\n\t  };\n\t}\n\t\n\tfunction useMutationObserver() {\n\t  var iterations = 0;\n\t  var observer = new BrowserMutationObserver(flush);\n\t  var node = document.createTextNode('');\n\t  observer.observe(node, { characterData: true });\n\t\n\t  return function () {\n\t    node.data = iterations = ++iterations % 2;\n\t  };\n\t}\n\t\n\t// web worker\n\tfunction useMessageChannel() {\n\t  var channel = new MessageChannel();\n\t  channel.port1.onmessage = flush;\n\t  return function () {\n\t    return channel.port2.postMessage(0);\n\t  };\n\t}\n\t\n\tfunction useSetTimeout() {\n\t  // Store setTimeout reference so es6-promise will be unaffected by\n\t  // other code modifying setTimeout (like sinon.useFakeTimers())\n\t  var globalSetTimeout = setTimeout;\n\t  return function () {\n\t    return globalSetTimeout(flush, 1);\n\t  };\n\t}\n\t\n\tvar queue = new Array(1000);\n\tfunction flush() {\n\t  for (var i = 0; i < len; i += 2) {\n\t    var callback = queue[i];\n\t    var arg = queue[i + 1];\n\t\n\t    callback(arg);\n\t\n\t    queue[i] = undefined;\n\t    queue[i + 1] = undefined;\n\t  }\n\t\n\t  len = 0;\n\t}\n\t\n\tfunction attemptVertx() {\n\t  try {\n\t    var r = require;\n\t    var vertx = __webpack_require__(8);\n\t    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n\t    return useVertxTimer();\n\t  } catch (e) {\n\t    return useSetTimeout();\n\t  }\n\t}\n\t\n\tvar scheduleFlush = undefined;\n\t// Decide what async method to use to triggering processing of queued callbacks:\n\tif (isNode) {\n\t  scheduleFlush = useNextTick();\n\t} else if (BrowserMutationObserver) {\n\t  scheduleFlush = useMutationObserver();\n\t} else if (isWorker) {\n\t  scheduleFlush = useMessageChannel();\n\t} else if (browserWindow === undefined && \"function\" === 'function') {\n\t  scheduleFlush = attemptVertx();\n\t} else {\n\t  scheduleFlush = useSetTimeout();\n\t}\n\t\n\tfunction then(onFulfillment, onRejection) {\n\t  var _arguments = arguments;\n\t\n\t  var parent = this;\n\t\n\t  var child = new this.constructor(noop);\n\t\n\t  if (child[PROMISE_ID] === undefined) {\n\t    makePromise(child);\n\t  }\n\t\n\t  var _state = parent._state;\n\t\n\t  if (_state) {\n\t    (function () {\n\t      var callback = _arguments[_state - 1];\n\t      asap(function () {\n\t        return invokeCallback(_state, child, callback, parent._result);\n\t      });\n\t    })();\n\t  } else {\n\t    subscribe(parent, child, onFulfillment, onRejection);\n\t  }\n\t\n\t  return child;\n\t}\n\t\n\t/**\n\t  `Promise.resolve` returns a promise that will become resolved with the\n\t  passed `value`. It is shorthand for the following:\n\t\n\t  ```javascript\n\t  let promise = new Promise(function(resolve, reject){\n\t    resolve(1);\n\t  });\n\t\n\t  promise.then(function(value){\n\t    // value === 1\n\t  });\n\t  ```\n\t\n\t  Instead of writing the above, your code now simply becomes the following:\n\t\n\t  ```javascript\n\t  let promise = Promise.resolve(1);\n\t\n\t  promise.then(function(value){\n\t    // value === 1\n\t  });\n\t  ```\n\t\n\t  @method resolve\n\t  @static\n\t  @param {Any} value value that the returned promise will be resolved with\n\t  Useful for tooling.\n\t  @return {Promise} a promise that will become fulfilled with the given\n\t  `value`\n\t*/\n\tfunction resolve(object) {\n\t  /*jshint validthis:true */\n\t  var Constructor = this;\n\t\n\t  if (object && typeof object === 'object' && object.constructor === Constructor) {\n\t    return object;\n\t  }\n\t\n\t  var promise = new Constructor(noop);\n\t  _resolve(promise, object);\n\t  return promise;\n\t}\n\t\n\tvar PROMISE_ID = Math.random().toString(36).substring(16);\n\t\n\tfunction noop() {}\n\t\n\tvar PENDING = void 0;\n\tvar FULFILLED = 1;\n\tvar REJECTED = 2;\n\t\n\tvar GET_THEN_ERROR = new ErrorObject();\n\t\n\tfunction selfFulfillment() {\n\t  return new TypeError(\"You cannot resolve a promise with itself\");\n\t}\n\t\n\tfunction cannotReturnOwn() {\n\t  return new TypeError('A promises callback cannot return that same promise.');\n\t}\n\t\n\tfunction getThen(promise) {\n\t  try {\n\t    return promise.then;\n\t  } catch (error) {\n\t    GET_THEN_ERROR.error = error;\n\t    return GET_THEN_ERROR;\n\t  }\n\t}\n\t\n\tfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n\t  try {\n\t    then.call(value, fulfillmentHandler, rejectionHandler);\n\t  } catch (e) {\n\t    return e;\n\t  }\n\t}\n\t\n\tfunction handleForeignThenable(promise, thenable, then) {\n\t  asap(function (promise) {\n\t    var sealed = false;\n\t    var error = tryThen(then, thenable, function (value) {\n\t      if (sealed) {\n\t        return;\n\t      }\n\t      sealed = true;\n\t      if (thenable !== value) {\n\t        _resolve(promise, value);\n\t      } else {\n\t        fulfill(promise, value);\n\t      }\n\t    }, function (reason) {\n\t      if (sealed) {\n\t        return;\n\t      }\n\t      sealed = true;\n\t\n\t      _reject(promise, reason);\n\t    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\t\n\t    if (!sealed && error) {\n\t      sealed = true;\n\t      _reject(promise, error);\n\t    }\n\t  }, promise);\n\t}\n\t\n\tfunction handleOwnThenable(promise, thenable) {\n\t  if (thenable._state === FULFILLED) {\n\t    fulfill(promise, thenable._result);\n\t  } else if (thenable._state === REJECTED) {\n\t    _reject(promise, thenable._result);\n\t  } else {\n\t    subscribe(thenable, undefined, function (value) {\n\t      return _resolve(promise, value);\n\t    }, function (reason) {\n\t      return _reject(promise, reason);\n\t    });\n\t  }\n\t}\n\t\n\tfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n\t  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n\t    handleOwnThenable(promise, maybeThenable);\n\t  } else {\n\t    if (then$$ === GET_THEN_ERROR) {\n\t      _reject(promise, GET_THEN_ERROR.error);\n\t    } else if (then$$ === undefined) {\n\t      fulfill(promise, maybeThenable);\n\t    } else if (isFunction(then$$)) {\n\t      handleForeignThenable(promise, maybeThenable, then$$);\n\t    } else {\n\t      fulfill(promise, maybeThenable);\n\t    }\n\t  }\n\t}\n\t\n\tfunction _resolve(promise, value) {\n\t  if (promise === value) {\n\t    _reject(promise, selfFulfillment());\n\t  } else if (objectOrFunction(value)) {\n\t    handleMaybeThenable(promise, value, getThen(value));\n\t  } else {\n\t    fulfill(promise, value);\n\t  }\n\t}\n\t\n\tfunction publishRejection(promise) {\n\t  if (promise._onerror) {\n\t    promise._onerror(promise._result);\n\t  }\n\t\n\t  publish(promise);\n\t}\n\t\n\tfunction fulfill(promise, value) {\n\t  if (promise._state !== PENDING) {\n\t    return;\n\t  }\n\t\n\t  promise._result = value;\n\t  promise._state = FULFILLED;\n\t\n\t  if (promise._subscribers.length !== 0) {\n\t    asap(publish, promise);\n\t  }\n\t}\n\t\n\tfunction _reject(promise, reason) {\n\t  if (promise._state !== PENDING) {\n\t    return;\n\t  }\n\t  promise._state = REJECTED;\n\t  promise._result = reason;\n\t\n\t  asap(publishRejection, promise);\n\t}\n\t\n\tfunction subscribe(parent, child, onFulfillment, onRejection) {\n\t  var _subscribers = parent._subscribers;\n\t  var length = _subscribers.length;\n\t\n\t  parent._onerror = null;\n\t\n\t  _subscribers[length] = child;\n\t  _subscribers[length + FULFILLED] = onFulfillment;\n\t  _subscribers[length + REJECTED] = onRejection;\n\t\n\t  if (length === 0 && parent._state) {\n\t    asap(publish, parent);\n\t  }\n\t}\n\t\n\tfunction publish(promise) {\n\t  var subscribers = promise._subscribers;\n\t  var settled = promise._state;\n\t\n\t  if (subscribers.length === 0) {\n\t    return;\n\t  }\n\t\n\t  var child = undefined,\n\t      callback = undefined,\n\t      detail = promise._result;\n\t\n\t  for (var i = 0; i < subscribers.length; i += 3) {\n\t    child = subscribers[i];\n\t    callback = subscribers[i + settled];\n\t\n\t    if (child) {\n\t      invokeCallback(settled, child, callback, detail);\n\t    } else {\n\t      callback(detail);\n\t    }\n\t  }\n\t\n\t  promise._subscribers.length = 0;\n\t}\n\t\n\tfunction ErrorObject() {\n\t  this.error = null;\n\t}\n\t\n\tvar TRY_CATCH_ERROR = new ErrorObject();\n\t\n\tfunction tryCatch(callback, detail) {\n\t  try {\n\t    return callback(detail);\n\t  } catch (e) {\n\t    TRY_CATCH_ERROR.error = e;\n\t    return TRY_CATCH_ERROR;\n\t  }\n\t}\n\t\n\tfunction invokeCallback(settled, promise, callback, detail) {\n\t  var hasCallback = isFunction(callback),\n\t      value = undefined,\n\t      error = undefined,\n\t      succeeded = undefined,\n\t      failed = undefined;\n\t\n\t  if (hasCallback) {\n\t    value = tryCatch(callback, detail);\n\t\n\t    if (value === TRY_CATCH_ERROR) {\n\t      failed = true;\n\t      error = value.error;\n\t      value = null;\n\t    } else {\n\t      succeeded = true;\n\t    }\n\t\n\t    if (promise === value) {\n\t      _reject(promise, cannotReturnOwn());\n\t      return;\n\t    }\n\t  } else {\n\t    value = detail;\n\t    succeeded = true;\n\t  }\n\t\n\t  if (promise._state !== PENDING) {\n\t    // noop\n\t  } else if (hasCallback && succeeded) {\n\t      _resolve(promise, value);\n\t    } else if (failed) {\n\t      _reject(promise, error);\n\t    } else if (settled === FULFILLED) {\n\t      fulfill(promise, value);\n\t    } else if (settled === REJECTED) {\n\t      _reject(promise, value);\n\t    }\n\t}\n\t\n\tfunction initializePromise(promise, resolver) {\n\t  try {\n\t    resolver(function resolvePromise(value) {\n\t      _resolve(promise, value);\n\t    }, function rejectPromise(reason) {\n\t      _reject(promise, reason);\n\t    });\n\t  } catch (e) {\n\t    _reject(promise, e);\n\t  }\n\t}\n\t\n\tvar id = 0;\n\tfunction nextId() {\n\t  return id++;\n\t}\n\t\n\tfunction makePromise(promise) {\n\t  promise[PROMISE_ID] = id++;\n\t  promise._state = undefined;\n\t  promise._result = undefined;\n\t  promise._subscribers = [];\n\t}\n\t\n\tfunction Enumerator(Constructor, input) {\n\t  this._instanceConstructor = Constructor;\n\t  this.promise = new Constructor(noop);\n\t\n\t  if (!this.promise[PROMISE_ID]) {\n\t    makePromise(this.promise);\n\t  }\n\t\n\t  if (isArray(input)) {\n\t    this._input = input;\n\t    this.length = input.length;\n\t    this._remaining = input.length;\n\t\n\t    this._result = new Array(this.length);\n\t\n\t    if (this.length === 0) {\n\t      fulfill(this.promise, this._result);\n\t    } else {\n\t      this.length = this.length || 0;\n\t      this._enumerate();\n\t      if (this._remaining === 0) {\n\t        fulfill(this.promise, this._result);\n\t      }\n\t    }\n\t  } else {\n\t    _reject(this.promise, validationError());\n\t  }\n\t}\n\t\n\tfunction validationError() {\n\t  return new Error('Array Methods must be provided an Array');\n\t};\n\t\n\tEnumerator.prototype._enumerate = function () {\n\t  var length = this.length;\n\t  var _input = this._input;\n\t\n\t  for (var i = 0; this._state === PENDING && i < length; i++) {\n\t    this._eachEntry(_input[i], i);\n\t  }\n\t};\n\t\n\tEnumerator.prototype._eachEntry = function (entry, i) {\n\t  var c = this._instanceConstructor;\n\t  var resolve$$ = c.resolve;\n\t\n\t  if (resolve$$ === resolve) {\n\t    var _then = getThen(entry);\n\t\n\t    if (_then === then && entry._state !== PENDING) {\n\t      this._settledAt(entry._state, i, entry._result);\n\t    } else if (typeof _then !== 'function') {\n\t      this._remaining--;\n\t      this._result[i] = entry;\n\t    } else if (c === Promise) {\n\t      var promise = new c(noop);\n\t      handleMaybeThenable(promise, entry, _then);\n\t      this._willSettleAt(promise, i);\n\t    } else {\n\t      this._willSettleAt(new c(function (resolve$$) {\n\t        return resolve$$(entry);\n\t      }), i);\n\t    }\n\t  } else {\n\t    this._willSettleAt(resolve$$(entry), i);\n\t  }\n\t};\n\t\n\tEnumerator.prototype._settledAt = function (state, i, value) {\n\t  var promise = this.promise;\n\t\n\t  if (promise._state === PENDING) {\n\t    this._remaining--;\n\t\n\t    if (state === REJECTED) {\n\t      _reject(promise, value);\n\t    } else {\n\t      this._result[i] = value;\n\t    }\n\t  }\n\t\n\t  if (this._remaining === 0) {\n\t    fulfill(promise, this._result);\n\t  }\n\t};\n\t\n\tEnumerator.prototype._willSettleAt = function (promise, i) {\n\t  var enumerator = this;\n\t\n\t  subscribe(promise, undefined, function (value) {\n\t    return enumerator._settledAt(FULFILLED, i, value);\n\t  }, function (reason) {\n\t    return enumerator._settledAt(REJECTED, i, reason);\n\t  });\n\t};\n\t\n\t/**\n\t  `Promise.all` accepts an array of promises, and returns a new promise which\n\t  is fulfilled with an array of fulfillment values for the passed promises, or\n\t  rejected with the reason of the first passed promise to be rejected. It casts all\n\t  elements of the passed iterable to promises as it runs this algorithm.\n\t\n\t  Example:\n\t\n\t  ```javascript\n\t  let promise1 = resolve(1);\n\t  let promise2 = resolve(2);\n\t  let promise3 = resolve(3);\n\t  let promises = [ promise1, promise2, promise3 ];\n\t\n\t  Promise.all(promises).then(function(array){\n\t    // The array here would be [ 1, 2, 3 ];\n\t  });\n\t  ```\n\t\n\t  If any of the `promises` given to `all` are rejected, the first promise\n\t  that is rejected will be given as an argument to the returned promises's\n\t  rejection handler. For example:\n\t\n\t  Example:\n\t\n\t  ```javascript\n\t  let promise1 = resolve(1);\n\t  let promise2 = reject(new Error(\"2\"));\n\t  let promise3 = reject(new Error(\"3\"));\n\t  let promises = [ promise1, promise2, promise3 ];\n\t\n\t  Promise.all(promises).then(function(array){\n\t    // Code here never runs because there are rejected promises!\n\t  }, function(error) {\n\t    // error.message === \"2\"\n\t  });\n\t  ```\n\t\n\t  @method all\n\t  @static\n\t  @param {Array} entries array of promises\n\t  @param {String} label optional string for labeling the promise.\n\t  Useful for tooling.\n\t  @return {Promise} promise that is fulfilled when all `promises` have been\n\t  fulfilled, or rejected if any of them become rejected.\n\t  @static\n\t*/\n\tfunction all(entries) {\n\t  return new Enumerator(this, entries).promise;\n\t}\n\t\n\t/**\n\t  `Promise.race` returns a new promise which is settled in the same way as the\n\t  first passed promise to settle.\n\t\n\t  Example:\n\t\n\t  ```javascript\n\t  let promise1 = new Promise(function(resolve, reject){\n\t    setTimeout(function(){\n\t      resolve('promise 1');\n\t    }, 200);\n\t  });\n\t\n\t  let promise2 = new Promise(function(resolve, reject){\n\t    setTimeout(function(){\n\t      resolve('promise 2');\n\t    }, 100);\n\t  });\n\t\n\t  Promise.race([promise1, promise2]).then(function(result){\n\t    // result === 'promise 2' because it was resolved before promise1\n\t    // was resolved.\n\t  });\n\t  ```\n\t\n\t  `Promise.race` is deterministic in that only the state of the first\n\t  settled promise matters. For example, even if other promises given to the\n\t  `promises` array argument are resolved, but the first settled promise has\n\t  become rejected before the other promises became fulfilled, the returned\n\t  promise will become rejected:\n\t\n\t  ```javascript\n\t  let promise1 = new Promise(function(resolve, reject){\n\t    setTimeout(function(){\n\t      resolve('promise 1');\n\t    }, 200);\n\t  });\n\t\n\t  let promise2 = new Promise(function(resolve, reject){\n\t    setTimeout(function(){\n\t      reject(new Error('promise 2'));\n\t    }, 100);\n\t  });\n\t\n\t  Promise.race([promise1, promise2]).then(function(result){\n\t    // Code here never runs\n\t  }, function(reason){\n\t    // reason.message === 'promise 2' because promise 2 became rejected before\n\t    // promise 1 became fulfilled\n\t  });\n\t  ```\n\t\n\t  An example real-world use case is implementing timeouts:\n\t\n\t  ```javascript\n\t  Promise.race([ajax('foo.json'), timeout(5000)])\n\t  ```\n\t\n\t  @method race\n\t  @static\n\t  @param {Array} promises array of promises to observe\n\t  Useful for tooling.\n\t  @return {Promise} a promise which settles in the same way as the first passed\n\t  promise to settle.\n\t*/\n\tfunction race(entries) {\n\t  /*jshint validthis:true */\n\t  var Constructor = this;\n\t\n\t  if (!isArray(entries)) {\n\t    return new Constructor(function (_, reject) {\n\t      return reject(new TypeError('You must pass an array to race.'));\n\t    });\n\t  } else {\n\t    return new Constructor(function (resolve, reject) {\n\t      var length = entries.length;\n\t      for (var i = 0; i < length; i++) {\n\t        Constructor.resolve(entries[i]).then(resolve, reject);\n\t      }\n\t    });\n\t  }\n\t}\n\t\n\t/**\n\t  `Promise.reject` returns a promise rejected with the passed `reason`.\n\t  It is shorthand for the following:\n\t\n\t  ```javascript\n\t  let promise = new Promise(function(resolve, reject){\n\t    reject(new Error('WHOOPS'));\n\t  });\n\t\n\t  promise.then(function(value){\n\t    // Code here doesn't run because the promise is rejected!\n\t  }, function(reason){\n\t    // reason.message === 'WHOOPS'\n\t  });\n\t  ```\n\t\n\t  Instead of writing the above, your code now simply becomes the following:\n\t\n\t  ```javascript\n\t  let promise = Promise.reject(new Error('WHOOPS'));\n\t\n\t  promise.then(function(value){\n\t    // Code here doesn't run because the promise is rejected!\n\t  }, function(reason){\n\t    // reason.message === 'WHOOPS'\n\t  });\n\t  ```\n\t\n\t  @method reject\n\t  @static\n\t  @param {Any} reason value that the returned promise will be rejected with.\n\t  Useful for tooling.\n\t  @return {Promise} a promise rejected with the given `reason`.\n\t*/\n\tfunction reject(reason) {\n\t  /*jshint validthis:true */\n\t  var Constructor = this;\n\t  var promise = new Constructor(noop);\n\t  _reject(promise, reason);\n\t  return promise;\n\t}\n\t\n\tfunction needsResolver() {\n\t  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n\t}\n\t\n\tfunction needsNew() {\n\t  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n\t}\n\t\n\t/**\n\t  Promise objects represent the eventual result of an asynchronous operation. The\n\t  primary way of interacting with a promise is through its `then` method, which\n\t  registers callbacks to receive either a promise's eventual value or the reason\n\t  why the promise cannot be fulfilled.\n\t\n\t  Terminology\n\t  -----------\n\t\n\t  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n\t  - `thenable` is an object or function that defines a `then` method.\n\t  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n\t  - `exception` is a value that is thrown using the throw statement.\n\t  - `reason` is a value that indicates why a promise was rejected.\n\t  - `settled` the final resting state of a promise, fulfilled or rejected.\n\t\n\t  A promise can be in one of three states: pending, fulfilled, or rejected.\n\t\n\t  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n\t  state.  Promises that are rejected have a rejection reason and are in the\n\t  rejected state.  A fulfillment value is never a thenable.\n\t\n\t  Promises can also be said to *resolve* a value.  If this value is also a\n\t  promise, then the original promise's settled state will match the value's\n\t  settled state.  So a promise that *resolves* a promise that rejects will\n\t  itself reject, and a promise that *resolves* a promise that fulfills will\n\t  itself fulfill.\n\t\n\t\n\t  Basic Usage:\n\t  ------------\n\t\n\t  ```js\n\t  let promise = new Promise(function(resolve, reject) {\n\t    // on success\n\t    resolve(value);\n\t\n\t    // on failure\n\t    reject(reason);\n\t  });\n\t\n\t  promise.then(function(value) {\n\t    // on fulfillment\n\t  }, function(reason) {\n\t    // on rejection\n\t  });\n\t  ```\n\t\n\t  Advanced Usage:\n\t  ---------------\n\t\n\t  Promises shine when abstracting away asynchronous interactions such as\n\t  `XMLHttpRequest`s.\n\t\n\t  ```js\n\t  function getJSON(url) {\n\t    return new Promise(function(resolve, reject){\n\t      let xhr = new XMLHttpRequest();\n\t\n\t      xhr.open('GET', url);\n\t      xhr.onreadystatechange = handler;\n\t      xhr.responseType = 'json';\n\t      xhr.setRequestHeader('Accept', 'application/json');\n\t      xhr.send();\n\t\n\t      function handler() {\n\t        if (this.readyState === this.DONE) {\n\t          if (this.status === 200) {\n\t            resolve(this.response);\n\t          } else {\n\t            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n\t          }\n\t        }\n\t      };\n\t    });\n\t  }\n\t\n\t  getJSON('/posts.json').then(function(json) {\n\t    // on fulfillment\n\t  }, function(reason) {\n\t    // on rejection\n\t  });\n\t  ```\n\t\n\t  Unlike callbacks, promises are great composable primitives.\n\t\n\t  ```js\n\t  Promise.all([\n\t    getJSON('/posts'),\n\t    getJSON('/comments')\n\t  ]).then(function(values){\n\t    values[0] // => postsJSON\n\t    values[1] // => commentsJSON\n\t\n\t    return values;\n\t  });\n\t  ```\n\t\n\t  @class Promise\n\t  @param {function} resolver\n\t  Useful for tooling.\n\t  @constructor\n\t*/\n\tfunction Promise(resolver) {\n\t  this[PROMISE_ID] = nextId();\n\t  this._result = this._state = undefined;\n\t  this._subscribers = [];\n\t\n\t  if (noop !== resolver) {\n\t    typeof resolver !== 'function' && needsResolver();\n\t    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n\t  }\n\t}\n\t\n\tPromise.all = all;\n\tPromise.race = race;\n\tPromise.resolve = resolve;\n\tPromise.reject = reject;\n\tPromise._setScheduler = setScheduler;\n\tPromise._setAsap = setAsap;\n\tPromise._asap = asap;\n\t\n\tPromise.prototype = {\n\t  constructor: Promise,\n\t\n\t  /**\n\t    The primary way of interacting with a promise is through its `then` method,\n\t    which registers callbacks to receive either a promise's eventual value or the\n\t    reason why the promise cannot be fulfilled.\n\t  \n\t    ```js\n\t    findUser().then(function(user){\n\t      // user is available\n\t    }, function(reason){\n\t      // user is unavailable, and you are given the reason why\n\t    });\n\t    ```\n\t  \n\t    Chaining\n\t    --------\n\t  \n\t    The return value of `then` is itself a promise.  This second, 'downstream'\n\t    promise is resolved with the return value of the first promise's fulfillment\n\t    or rejection handler, or rejected if the handler throws an exception.\n\t  \n\t    ```js\n\t    findUser().then(function (user) {\n\t      return user.name;\n\t    }, function (reason) {\n\t      return 'default name';\n\t    }).then(function (userName) {\n\t      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n\t      // will be `'default name'`\n\t    });\n\t  \n\t    findUser().then(function (user) {\n\t      throw new Error('Found user, but still unhappy');\n\t    }, function (reason) {\n\t      throw new Error('`findUser` rejected and we're unhappy');\n\t    }).then(function (value) {\n\t      // never reached\n\t    }, function (reason) {\n\t      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n\t      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n\t    });\n\t    ```\n\t    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\t  \n\t    ```js\n\t    findUser().then(function (user) {\n\t      throw new PedagogicalException('Upstream error');\n\t    }).then(function (value) {\n\t      // never reached\n\t    }).then(function (value) {\n\t      // never reached\n\t    }, function (reason) {\n\t      // The `PedgagocialException` is propagated all the way down to here\n\t    });\n\t    ```\n\t  \n\t    Assimilation\n\t    ------------\n\t  \n\t    Sometimes the value you want to propagate to a downstream promise can only be\n\t    retrieved asynchronously. This can be achieved by returning a promise in the\n\t    fulfillment or rejection handler. The downstream promise will then be pending\n\t    until the returned promise is settled. This is called *assimilation*.\n\t  \n\t    ```js\n\t    findUser().then(function (user) {\n\t      return findCommentsByAuthor(user);\n\t    }).then(function (comments) {\n\t      // The user's comments are now available\n\t    });\n\t    ```\n\t  \n\t    If the assimliated promise rejects, then the downstream promise will also reject.\n\t  \n\t    ```js\n\t    findUser().then(function (user) {\n\t      return findCommentsByAuthor(user);\n\t    }).then(function (comments) {\n\t      // If `findCommentsByAuthor` fulfills, we'll have the value here\n\t    }, function (reason) {\n\t      // If `findCommentsByAuthor` rejects, we'll have the reason here\n\t    });\n\t    ```\n\t  \n\t    Simple Example\n\t    --------------\n\t  \n\t    Synchronous Example\n\t  \n\t    ```javascript\n\t    let result;\n\t  \n\t    try {\n\t      result = findResult();\n\t      // success\n\t    } catch(reason) {\n\t      // failure\n\t    }\n\t    ```\n\t  \n\t    Errback Example\n\t  \n\t    ```js\n\t    findResult(function(result, err){\n\t      if (err) {\n\t        // failure\n\t      } else {\n\t        // success\n\t      }\n\t    });\n\t    ```\n\t  \n\t    Promise Example;\n\t  \n\t    ```javascript\n\t    findResult().then(function(result){\n\t      // success\n\t    }, function(reason){\n\t      // failure\n\t    });\n\t    ```\n\t  \n\t    Advanced Example\n\t    --------------\n\t  \n\t    Synchronous Example\n\t  \n\t    ```javascript\n\t    let author, books;\n\t  \n\t    try {\n\t      author = findAuthor();\n\t      books  = findBooksByAuthor(author);\n\t      // success\n\t    } catch(reason) {\n\t      // failure\n\t    }\n\t    ```\n\t  \n\t    Errback Example\n\t  \n\t    ```js\n\t  \n\t    function foundBooks(books) {\n\t  \n\t    }\n\t  \n\t    function failure(reason) {\n\t  \n\t    }\n\t  \n\t    findAuthor(function(author, err){\n\t      if (err) {\n\t        failure(err);\n\t        // failure\n\t      } else {\n\t        try {\n\t          findBoooksByAuthor(author, function(books, err) {\n\t            if (err) {\n\t              failure(err);\n\t            } else {\n\t              try {\n\t                foundBooks(books);\n\t              } catch(reason) {\n\t                failure(reason);\n\t              }\n\t            }\n\t          });\n\t        } catch(error) {\n\t          failure(err);\n\t        }\n\t        // success\n\t      }\n\t    });\n\t    ```\n\t  \n\t    Promise Example;\n\t  \n\t    ```javascript\n\t    findAuthor().\n\t      then(findBooksByAuthor).\n\t      then(function(books){\n\t        // found books\n\t    }).catch(function(reason){\n\t      // something went wrong\n\t    });\n\t    ```\n\t  \n\t    @method then\n\t    @param {Function} onFulfilled\n\t    @param {Function} onRejected\n\t    Useful for tooling.\n\t    @return {Promise}\n\t  */\n\t  then: then,\n\t\n\t  /**\n\t    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n\t    as the catch block of a try/catch statement.\n\t  \n\t    ```js\n\t    function findAuthor(){\n\t      throw new Error('couldn't find that author');\n\t    }\n\t  \n\t    // synchronous\n\t    try {\n\t      findAuthor();\n\t    } catch(reason) {\n\t      // something went wrong\n\t    }\n\t  \n\t    // async with promises\n\t    findAuthor().catch(function(reason){\n\t      // something went wrong\n\t    });\n\t    ```\n\t  \n\t    @method catch\n\t    @param {Function} onRejection\n\t    Useful for tooling.\n\t    @return {Promise}\n\t  */\n\t  'catch': function _catch(onRejection) {\n\t    return this.then(null, onRejection);\n\t  }\n\t};\n\t\n\tfunction polyfill() {\n\t    var local = undefined;\n\t\n\t    if (typeof global !== 'undefined') {\n\t        local = global;\n\t    } else if (typeof self !== 'undefined') {\n\t        local = self;\n\t    } else {\n\t        try {\n\t            local = Function('return this')();\n\t        } catch (e) {\n\t            throw new Error('polyfill failed because global object is unavailable in this environment');\n\t        }\n\t    }\n\t\n\t    var P = local.Promise;\n\t\n\t    if (P) {\n\t        var promiseToString = null;\n\t        try {\n\t            promiseToString = Object.prototype.toString.call(P.resolve());\n\t        } catch (e) {\n\t            // silently ignored\n\t        }\n\t\n\t        if (promiseToString === '[object Promise]' && !P.cast) {\n\t            return;\n\t        }\n\t    }\n\t\n\t    local.Promise = Promise;\n\t}\n\t\n\tpolyfill();\n\t// Strange compat..\n\tPromise.polyfill = polyfill;\n\tPromise.Promise = Promise;\n\t\n\treturn Promise;\n\t\n\t})));\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(7), (function() { return this; }())))\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t// CustomEvent polyfill from MDN\n\t// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\n\tfunction customEventPolyfill() {\n\t    // window.CustomEvent is missing from the definitions\n\t    if (typeof window.CustomEvent === 'function') {\n\t        return;\n\t    }\n\t    var CustomEvent = function (event, params) {\n\t        params = params || { bubbles: false, cancelable: false, detail: undefined };\n\t        var customEvent = document.createEvent('CustomEvent');\n\t        customEvent.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n\t        return customEvent;\n\t    };\n\t    // window.Event is specific to IE\n\t    CustomEvent.prototype = window.Event.prototype;\n\t    window.CustomEvent = CustomEvent;\n\t}\n\texports.customEventPolyfill = customEventPolyfill;\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\texports.version = {\n\t    'lib': '1.1550.6',\n\t    'product': '1.1550.6',\n\t    'supportedApiVersion': 2\n\t};\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\tvar EndpointCaller_1 = __webpack_require__(14);\n\tvar Logger_1 = __webpack_require__(15);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Version_1 = __webpack_require__(10);\n\tvar AjaxError_1 = __webpack_require__(20);\n\tvar MissingAuthenticationError_1 = __webpack_require__(21);\n\tvar QueryUtils_1 = __webpack_require__(22);\n\tvar QueryError_1 = __webpack_require__(23);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar es6_promise_1 = __webpack_require__(6);\n\tvar DefaultSearchEndpointOptions = (function () {\n\t    function DefaultSearchEndpointOptions() {\n\t        this.version = 'v2';\n\t        this.queryStringArguments = {};\n\t        this.anonymous = false;\n\t        this.isGuestUser = false;\n\t    }\n\t    return DefaultSearchEndpointOptions;\n\t}());\n\texports.DefaultSearchEndpointOptions = DefaultSearchEndpointOptions;\n\t/**\n\t * A search endpoint allows to execute letious actions against the Coveo Search API and index.<br/>\n\t * For example, you can search, list field values, get the quickview content for a document, etc.<br/>\n\t * Any actions that you execute using this class will not trigger a full query cycle for the Coveo components.<br/>\n\t * This is because this class will not trigger any query events directly.<br/>\n\t * If you wish to execute a query that all components will react to (and trigger the corresponding query events), use the {@link QueryController}\n\t */\n\tvar SearchEndpoint = (function () {\n\t    /**\n\t     * Create a new SearchEndpoint.<br/>\n\t     * Will use a set of sane default options, and merge them with the options parameter.<br/>\n\t     * Will create an {@link EndpointCaller} and use it to communicate with the endpoint internally\n\t     * @param options\n\t     */\n\t    function SearchEndpoint(options) {\n\t        var _this = this;\n\t        this.options = options;\n\t        Assert_1.Assert.exists(options);\n\t        Assert_1.Assert.exists(options.restUri);\n\t        // For backward compatibility, we set anonymous to true when an access token\n\t        // is specified on a page loaded through the filesystem. This causes withCredentials\n\t        // to NOT be set, allowing those pages to work with non Windows/Basic/Cookie\n\t        // authentication. If anonymous is explicitly set to false, we'll use withCredentials.\n\t        var defaultOptions = new DefaultSearchEndpointOptions();\n\t        defaultOptions.anonymous = window.location.href.indexOf('file://') == 0 && Utils_1.Utils.isNonEmptyString(options.accessToken);\n\t        this.options = _.extend({}, defaultOptions, options);\n\t        // Forward any debug=1 query argument to the REST API to ease debugging\n\t        if (SearchEndpoint.isDebugArgumentPresent()) {\n\t            this.options.queryStringArguments['debug'] = 1;\n\t        }\n\t        this.onUnload = function () {\n\t            _this.handleUnload();\n\t        };\n\t        window.addEventListener('beforeunload', this.onUnload);\n\t        this.logger = new Logger_1.Logger(this);\n\t        this.createEndpointCaller();\n\t    }\n\t    /**\n\t     * Configure an endpoint that will point to a Coveo Cloud index, which contains a set of public sources with no security on them.<br/>\n\t     * Used for demo purposes and ease of setup.\n\t     * @param otherOptions A set of additional options to use when configuring this endpoint\n\t     */\n\t    SearchEndpoint.configureSampleEndpoint = function (otherOptions) {\n\t        if (SearchEndpoint.isUseLocalArgumentPresent()) {\n\t            // This is a handy flag to quickly test a local search API and alerts\n\t            SearchEndpoint.endpoints['default'] = new SearchEndpoint(_.extend({\n\t                restUri: 'http://localhost:8100/rest/search',\n\t                searchAlertsUri: 'http://localhost:8088/rest/search/alerts/'\n\t            }, otherOptions));\n\t        }\n\t        else {\n\t            // This OAuth token points to the organization used for samples.\n\t            // It contains a set of harmless content sources.\n\t            SearchEndpoint.endpoints['default'] = new SearchEndpoint(_.extend({\n\t                restUri: 'https://cloudplatform.coveo.com/rest/search',\n\t                accessToken: '52d806a2-0f64-4390-a3f2-e0f41a4a73ec'\n\t            }, otherOptions));\n\t        }\n\t    };\n\t    /**\n\t     * Configure an endpoint that will point to a Coveo Cloud index V2, which contains a set of public sources with no security on them.<br/>\n\t     * Used for demo purposes and ease of setup.\n\t     * @param otherOptions A set of additional options to use when configuring this endpoint\n\t     */\n\t    SearchEndpoint.configureSampleEndpointV2 = function (optionsOPtions) {\n\t        SearchEndpoint.endpoints['default'] = new SearchEndpoint(_.extend({\n\t            restUri: 'https://platform.cloud.coveo.com/rest/search',\n\t            accessToken: 'xx564559b1-0045-48e1-953c-3addd1ee4457',\n\t            queryStringArguments: {\n\t                organizationID: 'searchuisamples'\n\t            }\n\t        }));\n\t    };\n\t    /**\n\t     * Configure an endpoint to a Coveo Cloud index.\n\t     * @param organization The organization id of your Coveo cloud index\n\t     * @param token The token to use to execute query. If null, you will most probably need to login when querying.\n\t     * @param uri The uri of your cloud Search API. By default, will point to the production environment\n\t     * @param otherOptions A set of additional options to use when configuring this endpoint\n\t     */\n\t    SearchEndpoint.configureCloudEndpoint = function (organization, token, uri, otherOptions) {\n\t        if (uri === void 0) { uri = 'https://cloudplatform.coveo.com/rest/search'; }\n\t        var options = {\n\t            restUri: uri,\n\t            accessToken: token,\n\t            queryStringArguments: { organizationId: organization }\n\t        };\n\t        var merged = SearchEndpoint.mergeConfigOptions(options, otherOptions);\n\t        SearchEndpoint.endpoints['default'] = new SearchEndpoint(SearchEndpoint.removeUndefinedConfigOption(merged));\n\t    };\n\t    SearchEndpoint.configureCloudV2Endpoint = function (organization, token, uri, otherOptions) {\n\t        if (uri === void 0) { uri = 'https://platform.cloud.coveo.com/rest/search'; }\n\t        return SearchEndpoint.configureCloudEndpoint(organization, token, uri, otherOptions);\n\t    };\n\t    /**\n\t     * Configure an endpoint to a Coveo on premise index.\n\t     * @param uri The uri of your Coveo Search API endpoint. eg : http://myserver:8080/rest/search\n\t     * @param token The token to use to execute query. If null, you will most probably need to login when querying (unless the search api is configured using advanced auth options, like windows auth or claims)\n\t     * @param otherOptions A set of additional options to use when configuring this endpoint\n\t     */\n\t    SearchEndpoint.configureOnPremiseEndpoint = function (uri, token, otherOptions) {\n\t        var merged = SearchEndpoint.mergeConfigOptions({\n\t            restUri: uri,\n\t            accessToken: token\n\t        }, otherOptions);\n\t        SearchEndpoint.endpoints['default'] = new SearchEndpoint(SearchEndpoint.removeUndefinedConfigOption(merged));\n\t    };\n\t    SearchEndpoint.removeUndefinedConfigOption = function (config) {\n\t        _.each(_.keys(config), function (key) {\n\t            if (config[key] == undefined) {\n\t                delete config[key];\n\t            }\n\t        });\n\t        return config;\n\t    };\n\t    SearchEndpoint.mergeConfigOptions = function (first, second) {\n\t        first = SearchEndpoint.removeUndefinedConfigOption(first);\n\t        second = SearchEndpoint.removeUndefinedConfigOption(second);\n\t        return _.extend({}, first, second);\n\t    };\n\t    SearchEndpoint.prototype.reset = function () {\n\t        this.createEndpointCaller();\n\t    };\n\t    /**\n\t     * Set a function which will allow external code to modify all endpoint call parameters before they are sent by the browser.\n\t     *\n\t     * Used in very specific scenario where the network infrastructure require special request headers to be added or removed, for example.\n\t     * @param requestModifier\n\t     */\n\t    SearchEndpoint.prototype.setRequestModifier = function (requestModifier) {\n\t        this.caller.options.requestModifier = requestModifier;\n\t    };\n\t    /**\n\t     * Return the base uri of the endpoint to perform search\n\t     * @returns {string}\n\t     */\n\t    SearchEndpoint.prototype.getBaseUri = function () {\n\t        return this.buildBaseUri('');\n\t    };\n\t    /**\n\t     * Return the base uri of the endpoint for search alert\n\t     * @returns {string}\n\t     */\n\t    SearchEndpoint.prototype.getBaseAlertsUri = function () {\n\t        return this.buildSearchAlertsUri('');\n\t    };\n\t    /**\n\t     * Get the uri that can be used to authenticate against the given provider\n\t     * @param provider The provider name\n\t     * @param returnUri The uri at which to return after the authentication is completed\n\t     * @param message The message for authentication\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {string}\n\t     */\n\t    SearchEndpoint.prototype.getAuthenticationProviderUri = function (provider, returnUri, message, callOptions, callParams) {\n\t        var queryString = this.buildBaseQueryString(callOptions);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        callParams.url += provider + '?';\n\t        if (Utils_1.Utils.isNonEmptyString(returnUri)) {\n\t            callParams.url += 'redirectUri=' + encodeURIComponent(returnUri) + '&';\n\t        }\n\t        else if (Utils_1.Utils.isNonEmptyString(message)) {\n\t            callParams.url += 'message=' + encodeURIComponent(message) + '&';\n\t        }\n\t        callParams.url += callParams.queryString.join('&');\n\t        return callParams.url;\n\t    };\n\t    /**\n\t     * is the search endpoint using jsonp internally to communicate with Search API\n\t     * @returns {boolean}\n\t     */\n\t    SearchEndpoint.prototype.isJsonp = function () {\n\t        return this.caller.useJsonp;\n\t    };\n\t    /**\n\t     * Perform a search on the index and returns a Promise of {@link IQueryResults}.<br/>\n\t     * Will modify the query results slightly, by adding additional information on each results (an id, the state object, etc.)\n\t     * @param query The query to execute. Typically, the query object is built using a {@link QueryBuilder}\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<IQueryResults>}\n\t     */\n\t    SearchEndpoint.prototype.search = function (query, callOptions, callParams) {\n\t        var _this = this;\n\t        Assert_1.Assert.exists(query);\n\t        callParams.requestData = query;\n\t        this.logger.info('Performing REST query', query);\n\t        return this.performOneCall(callParams, callOptions).then(function (results) {\n\t            _this.logger.info('REST query successful', results, query);\n\t            // Version check\n\t            // If the SearchAPI doesn't give us any apiVersion info, we assume version 1 (before apiVersion was implemented)\n\t            if (results.apiVersion == null) {\n\t                results.apiVersion = 1;\n\t            }\n\t            if (results.apiVersion < Version_1.version.supportedApiVersion) {\n\t                _this.logger.error('Please update your REST Search API');\n\t            }\n\t            // If the server specified no search ID generated one using the client-side\n\t            // GUID generator. We prefer server generated guids to allow tracking a query\n\t            // all the way from the analytics to the logs.\n\t            if (Utils_1.Utils.isNullOrEmptyString(results.searchUid)) {\n\t                results.searchUid = QueryUtils_1.QueryUtils.createGuid();\n\t            }\n\t            QueryUtils_1.QueryUtils.setIndexAndUidOnQueryResults(query, results, results.searchUid, results.pipeline, results.splitTestRun);\n\t            QueryUtils_1.QueryUtils.setTermsToHighlightOnQueryResults(query, results);\n\t            return results;\n\t        });\n\t    };\n\t    /**\n\t     * Get a link/uri to download a set of results, for a given query, to an xlsx format.<br/>\n\t     * Note : This does not download automatically the documents, merely provide an url at which to download them.\n\t     * @param query The query for which to get the xlsx documents\n\t     * @param numberOfResults The number of results that should be downloaded\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {string}\n\t     */\n\t    SearchEndpoint.prototype.getExportToExcelLink = function (query, numberOfResults, callOptions, callParams) {\n\t        var queryString = this.buildBaseQueryString(callOptions);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        queryString = this.buildCompleteQueryString(null, query);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        if (numberOfResults != null) {\n\t            callParams.queryString.push('numberOfResults=' + numberOfResults);\n\t        }\n\t        callParams.queryString.push('format=xlsx');\n\t        return callParams.url + '?' + callParams.queryString.join('&');\n\t    };\n\t    /**\n\t     * Get the raw datastream for a given document. This is typically used to get a thumbnail for a document.<br/>\n\t     * Return an array buffer : <br/>\n\t     * eg : let rawBinary = String.fromCharCode.apply(null, new Uint8Array(response));<br/>\n\t     * img.setAttribute('src', 'data:image/png;base64,' + btoa(rawBinary));\n\t     * @param documentUniqueId Typically the {@link IQueryResult.uniqueId} on each result\n\t     * @param dataStreamType Normally : '$Thumbnail'\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<TResult>|Promise<U>}\n\t     */\n\t    SearchEndpoint.prototype.getRawDataStream = function (documentUniqueId, dataStreamType, callOptions, callParams) {\n\t        var _this = this;\n\t        Assert_1.Assert.exists(documentUniqueId);\n\t        var queryString = this.buildViewAsHtmlQueryString(documentUniqueId, callOptions);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        this.logger.info('Performing REST query for datastream ' + dataStreamType + ' on document uniqueID' + documentUniqueId);\n\t        callParams.queryString.push('dataStream=' + dataStreamType);\n\t        return this.performOneCall(callParams).then(function (results) {\n\t            _this.logger.info('REST query successful', results, documentUniqueId);\n\t            return results;\n\t        });\n\t    };\n\t    /**\n\t     * Return an url that will allow to see the datastream for a given document. This is typically used to get a thumbnail for a document.<br/>\n\t     * @param documentUniqueID Typically the {@link IQueryResult.uniqueId} on each result\n\t     * @param dataStreamType Normally : '$Thumbnail'\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {string}\n\t     */\n\t    SearchEndpoint.prototype.getViewAsDatastreamUri = function (documentUniqueID, dataStreamType, callOptions, callParams) {\n\t        callOptions = _.extend({}, callOptions);\n\t        var queryString = this.buildBaseQueryString(callOptions);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        queryString = this.buildViewAsHtmlQueryString(documentUniqueID, callOptions);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        queryString = this.buildCompleteQueryString(callOptions.query, callOptions.queryObject);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        return callParams.url + '?' + callParams.queryString.join('&') + '&dataStream=' + encodeURIComponent(dataStreamType);\n\t    };\n\t    /**\n\t     * Return a single document, using it's uniqueId\n\t     * @param documentUniqueID Typically the {@link IQueryResult.uniqueId} on each result\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<IQueryResult>}\n\t     */\n\t    SearchEndpoint.prototype.getDocument = function (documentUniqueID, callOptions, callParams) {\n\t        var queryString = this.buildViewAsHtmlQueryString(documentUniqueID, callOptions);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        return this.performOneCall(callParams);\n\t    };\n\t    /**\n\t     * Return the content for a single document, as text.<br/>\n\t     * Think : quickview\n\t     * @param documentUniqueID Typically the {@link IQueryResult.uniqueId} on each result\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<string>}\n\t     */\n\t    SearchEndpoint.prototype.getDocumentText = function (documentUniqueID, callOptions, callParams) {\n\t        var queryString = this.buildViewAsHtmlQueryString(documentUniqueID, callOptions);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        return this.performOneCall(callParams)\n\t            .then(function (data) {\n\t            return data.content;\n\t        });\n\t    };\n\t    /**\n\t     * Return the content for a single document, as an HTMLDocument.<br/>\n\t     * Think : quickview\n\t     * @param documentUniqueID Typically the {@link IQueryResult.uniqueId} on each result\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<HTMLDocument>}\n\t     */\n\t    SearchEndpoint.prototype.getDocumentHtml = function (documentUniqueID, callOptions, callParams) {\n\t        callOptions = _.extend({}, callOptions);\n\t        var queryString = this.buildViewAsHtmlQueryString(documentUniqueID, callOptions);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        callParams.requestData = callOptions.queryObject || { q: callOptions.query };\n\t        return this.performOneCall(callParams);\n\t    };\n\t    /**\n\t     * Return an url that will allow to see a single document content, as HTML.<br/>\n\t     * Think : quickview\n\t     * @param documentUniqueID Typically the {@link IQueryResult.uniqueId} on each result\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {string}\n\t     */\n\t    SearchEndpoint.prototype.getViewAsHtmlUri = function (documentUniqueID, callOptions, callParams) {\n\t        var queryString = this.buildBaseQueryString(callOptions);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        queryString = this.buildViewAsHtmlQueryString(documentUniqueID, callOptions);\n\t        callParams.queryString = callParams.queryString.concat(queryString);\n\t        callParams.queryString = _.uniq(callParams.queryString);\n\t        return callParams.url + '?' + callParams.queryString.join('&');\n\t    };\n\t    SearchEndpoint.prototype.batchFieldValues = function (request, callOptions, callParams) {\n\t        var _this = this;\n\t        Assert_1.Assert.exists(request);\n\t        return this.performOneCall(callParams)\n\t            .then(function (data) {\n\t            _this.logger.info('REST list field values successful', data.values, request);\n\t            return data.values;\n\t        });\n\t    };\n\t    /**\n\t     * List the possible values for a given request\n\t     * @param request The request for which to list the possible field values\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<TResult>|Promise<U>}\n\t     */\n\t    SearchEndpoint.prototype.listFieldValues = function (request, callOptions, callParams) {\n\t        var _this = this;\n\t        Assert_1.Assert.exists(request);\n\t        callParams.requestData = request;\n\t        this.logger.info('Listing field values', request);\n\t        return this.performOneCall(callParams)\n\t            .then(function (data) {\n\t            _this.logger.info('REST list field values successful', data.values, request);\n\t            return data.values;\n\t        });\n\t    };\n\t    /**\n\t     * List all fields for the index, and return an array of their description\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<TResult>|Promise<U>}\n\t     */\n\t    SearchEndpoint.prototype.listFields = function (callOptions, callParams) {\n\t        this.logger.info('Listing fields');\n\t        return this.performOneCall(callParams).then(function (data) {\n\t            return data.fields;\n\t        });\n\t    };\n\t    /**\n\t     * List all available query extensions for the search endpoint\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<IExtension[]>}\n\t     */\n\t    SearchEndpoint.prototype.extensions = function (callOptions, callParams) {\n\t        this.logger.info('Listing extensions');\n\t        return this.performOneCall(callParams);\n\t    };\n\t    /**\n\t     * Allow to rate a single document in the index (granted that collaborative rating is enabled on your index)\n\t     * @param ratingRequest Document id and rating\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<boolean>|Promise<T>}\n\t     */\n\t    SearchEndpoint.prototype.rateDocument = function (ratingRequest, callOptions, callParams) {\n\t        this.logger.info('Rating a document', ratingRequest);\n\t        callParams.requestData = ratingRequest;\n\t        return this.performOneCall(callParams).then(function () {\n\t            return true;\n\t        });\n\t    };\n\t    /**\n\t     * Allow to tag a single document\n\t     * @param taggingRequest Document id and tag action to perform\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<boolean>|Promise<T>}\n\t     */\n\t    SearchEndpoint.prototype.tagDocument = function (taggingRequest, callOptions, callParams) {\n\t        this.logger.info('Tagging a document', taggingRequest);\n\t        callParams.requestData = taggingRequest;\n\t        return this.performOneCall(callParams).then(function () {\n\t            return true;\n\t        });\n\t    };\n\t    /**\n\t     * Return a list of reveal query suggestions, based on the given request\n\t     * @param request query and number of suggestions to return\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<IRevealQuerySuggestResponse>}\n\t     */\n\t    SearchEndpoint.prototype.getRevealQuerySuggest = function (request, callOptions, callParams) {\n\t        this.logger.info('Get Reveal Query Suggest', request);\n\t        callParams.requestData = request;\n\t        return this.performOneCall(callParams);\n\t    };\n\t    /**\n\t     * Allow to follow a document or a query on the search alerts service\n\t     * @param request\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<ISubscription>}\n\t     */\n\t    SearchEndpoint.prototype.follow = function (request, callOptions, callParams) {\n\t        callParams.requestData = request;\n\t        this.logger.info('Following a document or a query', request);\n\t        return this.performOneCall(callParams);\n\t    };\n\t    /**\n\t     * Return a Promise of array of current subscriptions\n\t     * @param page The page of the subsctiptions\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {any}\n\t     */\n\t    SearchEndpoint.prototype.listSubscriptions = function (page, callOptions, callParams) {\n\t        var _this = this;\n\t        if (this.options.isGuestUser) {\n\t            return new es6_promise_1.Promise(function (resolve, reject) {\n\t                reject();\n\t            });\n\t        }\n\t        if (this.currentListSubscriptions == null) {\n\t            callParams.queryString.push('page=' + (page || 0));\n\t            this.currentListSubscriptions = this.performOneCall(callParams);\n\t            this.currentListSubscriptions.then(function (data) {\n\t                _this.currentListSubscriptions = null;\n\t                return data;\n\t            }).catch(function (e) {\n\t                // Trap 503 error, as the listSubscription call is called on every page initialization\n\t                // to check for current subscriptions. By default, the search alert service is not enabled for most organization\n\t                // Don't want to pollute the console with un-needed noise and confusion\n\t                if (e.status != 503) {\n\t                    throw e;\n\t                }\n\t            });\n\t        }\n\t        return this.currentListSubscriptions;\n\t    };\n\t    /**\n\t     * Update a subscription with new parameters\n\t     * @param subscription The subscription to update with new parameters\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<ISubscription>}\n\t     */\n\t    SearchEndpoint.prototype.updateSubscription = function (subscription, callOptions, callParams) {\n\t        callParams.requestData = subscription;\n\t        this.logger.info('Updating a subscription', subscription);\n\t        callParams.url += subscription.id;\n\t        return this.performOneCall(callParams);\n\t    };\n\t    /**\n\t     * Delete a subscription\n\t     * @param subscription The subscription to delete\n\t     * @param callOptions Additional set of options to use for this call.\n\t     * @param callParams Options injected by the applied decorators.\n\t     * @returns {Promise<ISubscription>}\n\t     */\n\t    SearchEndpoint.prototype.deleteSubscription = function (subscription, callOptions, callParams) {\n\t        callParams.url += subscription.id;\n\t        return this.performOneCall(callParams);\n\t    };\n\t    SearchEndpoint.prototype.logError = function (sentryLog, callOptions, callParams) {\n\t        callParams.requestData = sentryLog;\n\t        return this.performOneCall(callParams, callOptions)\n\t            .then(function () {\n\t            return true;\n\t        })\n\t            .catch(function () {\n\t            return false;\n\t        });\n\t    };\n\t    SearchEndpoint.prototype.nuke = function () {\n\t        window.removeEventListener('beforeunload', this.onUnload);\n\t    };\n\t    SearchEndpoint.prototype.createEndpointCaller = function () {\n\t        this.caller = new EndpointCaller_1.EndpointCaller(this.options);\n\t    };\n\t    SearchEndpoint.isDebugArgumentPresent = function () {\n\t        return /[?&]debug=1([&]|$)/.test(window.location.search);\n\t    };\n\t    SearchEndpoint.isUseLocalArgumentPresent = function () {\n\t        return /[?&]useLocal=1([&]|$)/.test(window.location.search);\n\t    };\n\t    SearchEndpoint.prototype.handleUnload = function () {\n\t        this.isRedirecting = true;\n\t    };\n\t    SearchEndpoint.prototype.buildBaseUri = function (path) {\n\t        Assert_1.Assert.isString(path);\n\t        var uri = this.options.restUri;\n\t        uri = this.removeTrailingSlash(uri);\n\t        if (Utils_1.Utils.isNonEmptyString(this.options.version)) {\n\t            uri += '/' + this.options.version;\n\t        }\n\t        uri += path;\n\t        return uri;\n\t    };\n\t    SearchEndpoint.prototype.buildSearchAlertsUri = function (path) {\n\t        Assert_1.Assert.isString(path);\n\t        var uri = this.options.searchAlertsUri || this.options.restUri + '/alerts';\n\t        if (uri == null) {\n\t            return null;\n\t        }\n\t        uri = this.removeTrailingSlash(uri);\n\t        uri += path;\n\t        return uri;\n\t    };\n\t    // see https://github.com/palantir/tslint/issues/1421\n\t    // tslint:disable-next-line:no-unused-variable\n\t    SearchEndpoint.prototype.buildAccessToken = function (tokenKey) {\n\t        var queryString = [];\n\t        if (Utils_1.Utils.isNonEmptyString(this.options.accessToken)) {\n\t            queryString.push(tokenKey + '=' + encodeURIComponent(this.options.accessToken));\n\t        }\n\t        return queryString;\n\t    };\n\t    SearchEndpoint.prototype.buildBaseQueryString = function (callOptions) {\n\t        callOptions = _.extend({}, callOptions);\n\t        var queryString = [];\n\t        for (var name_1 in this.options.queryStringArguments) {\n\t            queryString.push(name_1 + '=' + encodeURIComponent(this.options.queryStringArguments[name_1]));\n\t        }\n\t        if (callOptions && _.isArray(callOptions.authentication) && callOptions.authentication.length != 0) {\n\t            queryString.push('authentication=' + callOptions.authentication.join(','));\n\t        }\n\t        return queryString;\n\t    };\n\t    SearchEndpoint.prototype.buildCompleteQueryString = function (query, queryObject) {\n\t        // In an ideal parallel reality, the entire query used in the 'search' call is used here.\n\t        // In this reality however, we must support GET calls (ex: GET /html) for CORS/JSONP/IE reasons.\n\t        // Therefore, we cherry-pick parts of the query to include in a 'query string' instead of a body payload.\n\t        var queryString = [];\n\t        if (queryObject) {\n\t            _.each(['q', 'aq', 'cq', 'dq', 'searchHub', 'tab', 'language', 'pipeline', 'lowercaseOperators'], function (key) {\n\t                if (queryObject[key]) {\n\t                    queryString.push(key + '=' + encodeURIComponent(queryObject[key]));\n\t                }\n\t            });\n\t            _.each(queryObject.context, function (value, key) {\n\t                queryString.push('context[' + key + ']=' + encodeURIComponent(value));\n\t            });\n\t        }\n\t        else if (query) {\n\t            queryString.push('q=' + encodeURIComponent(query));\n\t        }\n\t        return queryString;\n\t    };\n\t    SearchEndpoint.prototype.buildViewAsHtmlQueryString = function (uniqueId, callOptions) {\n\t        callOptions = _.extend({}, callOptions);\n\t        var queryString = this.buildBaseQueryString(callOptions);\n\t        queryString.push('uniqueId=' + encodeURIComponent(uniqueId));\n\t        if (callOptions.query || callOptions.queryObject) {\n\t            queryString.push('enableNavigation=true');\n\t        }\n\t        if (callOptions.requestedOutputSize) {\n\t            queryString.push('requestedOutputSize=' + encodeURIComponent(callOptions.requestedOutputSize.toString()));\n\t        }\n\t        if (callOptions.contentType) {\n\t            queryString.push('contentType=' + encodeURIComponent(callOptions.contentType));\n\t        }\n\t        return queryString;\n\t    };\n\t    SearchEndpoint.prototype.performOneCall = function (params, callOptions, autoRenewToken) {\n\t        var _this = this;\n\t        if (autoRenewToken === void 0) { autoRenewToken = true; }\n\t        var queryString = this.buildBaseQueryString(callOptions);\n\t        params.queryString = params.queryString.concat(queryString);\n\t        params.queryString = _.uniq(params.queryString);\n\t        return this.caller.call(params)\n\t            .then(function (response) {\n\t            if (response.data && response.data.clientDuration) {\n\t                response.data.clientDuration = response.duration;\n\t            }\n\t            return response.data;\n\t        }).catch(function (error) {\n\t            if (autoRenewToken && _this.canRenewAccessToken() && _this.isAccessTokenExpiredStatus(error.statusCode)) {\n\t                _this.renewAccessToken()\n\t                    .then(function () {\n\t                    return _this.performOneCall(params, callOptions, autoRenewToken);\n\t                })\n\t                    .catch(function () {\n\t                    return es6_promise_1.Promise.reject(_this.handleErrorResponse(error));\n\t                });\n\t            }\n\t            else if (error.statusCode == 0 && _this.isRedirecting) {\n\t                // The page is getting redirected\n\t                // Set timeout on return with empty string, since it does not really matter\n\t                _.defer(function () {\n\t                    return '';\n\t                });\n\t            }\n\t            else {\n\t                return es6_promise_1.Promise.reject(_this.handleErrorResponse(error));\n\t            }\n\t        });\n\t    };\n\t    SearchEndpoint.prototype.handleErrorResponse = function (errorResponse) {\n\t        if (this.isMissingAuthenticationProviderStatus(errorResponse.statusCode)) {\n\t            return new MissingAuthenticationError_1.MissingAuthenticationError(errorResponse.data['provider']);\n\t        }\n\t        else if (errorResponse.data && errorResponse.data.message && errorResponse.data.type) {\n\t            return new QueryError_1.QueryError(errorResponse);\n\t        }\n\t        else if (errorResponse.data && errorResponse.data.message) {\n\t            return new AjaxError_1.AjaxError(\"Request Error : \" + errorResponse.data.message, errorResponse.statusCode);\n\t        }\n\t        else {\n\t            return new AjaxError_1.AjaxError('Request Error', errorResponse.statusCode);\n\t        }\n\t    };\n\t    SearchEndpoint.prototype.canRenewAccessToken = function () {\n\t        return Utils_1.Utils.isNonEmptyString(this.options.accessToken) && _.isFunction(this.options.renewAccessToken);\n\t    };\n\t    SearchEndpoint.prototype.renewAccessToken = function () {\n\t        var _this = this;\n\t        this.logger.info('Renewing expired access token');\n\t        return this.options.renewAccessToken().then(function (token) {\n\t            Assert_1.Assert.isNonEmptyString(token);\n\t            _this.options.accessToken = token;\n\t            _this.createEndpointCaller();\n\t            return token;\n\t        })\n\t            .catch(function (e) {\n\t            _this.logger.error('Failed to renew access token', e);\n\t            return e;\n\t        });\n\t    };\n\t    SearchEndpoint.prototype.removeTrailingSlash = function (uri) {\n\t        if (this.hasTrailingSlash(uri)) {\n\t            uri = uri.substr(0, uri.length - 1);\n\t        }\n\t        return uri;\n\t    };\n\t    SearchEndpoint.prototype.hasTrailingSlash = function (uri) {\n\t        return uri.charAt(uri.length - 1) == '/';\n\t    };\n\t    SearchEndpoint.prototype.isMissingAuthenticationProviderStatus = function (status) {\n\t        return status == 402;\n\t    };\n\t    SearchEndpoint.prototype.isAccessTokenExpiredStatus = function (status) {\n\t        return status == 419;\n\t    };\n\t    /**\n\t     * A map of all the initialized endpoint.<br/>\n\t     * eg : Coveo.SearchEndpoint.endpoints['default'] will return the default endpoint that was created at initialization\n\t     * @type {{}}\n\t     */\n\t    SearchEndpoint.endpoints = {};\n\t    __decorate([\n\t        path('/login/'),\n\t        accessTokenInUrl()\n\t    ], SearchEndpoint.prototype, \"getAuthenticationProviderUri\", null);\n\t    __decorate([\n\t        path('/'),\n\t        method('POST'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"search\", null);\n\t    __decorate([\n\t        path('/'),\n\t        accessTokenInUrl()\n\t    ], SearchEndpoint.prototype, \"getExportToExcelLink\", null);\n\t    __decorate([\n\t        path('/datastream'),\n\t        accessTokenInUrl(),\n\t        method('GET'),\n\t        responseType('arraybuffer')\n\t    ], SearchEndpoint.prototype, \"getRawDataStream\", null);\n\t    __decorate([\n\t        path('/datastream'),\n\t        accessTokenInUrl()\n\t    ], SearchEndpoint.prototype, \"getViewAsDatastreamUri\", null);\n\t    __decorate([\n\t        path('/document'),\n\t        method('GET'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"getDocument\", null);\n\t    __decorate([\n\t        path('/text'),\n\t        method('GET'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"getDocumentText\", null);\n\t    __decorate([\n\t        path('/html'),\n\t        method('POST'),\n\t        responseType('document')\n\t    ], SearchEndpoint.prototype, \"getDocumentHtml\", null);\n\t    __decorate([\n\t        path('/html'),\n\t        accessTokenInUrl()\n\t    ], SearchEndpoint.prototype, \"getViewAsHtmlUri\", null);\n\t    __decorate([\n\t        path('/values'),\n\t        method('POST'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"batchFieldValues\", null);\n\t    __decorate([\n\t        path('/values'),\n\t        method('POST'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"listFieldValues\", null);\n\t    __decorate([\n\t        path('/fields'),\n\t        method('GET'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"listFields\", null);\n\t    __decorate([\n\t        path('/extensions'),\n\t        method('GET'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"extensions\", null);\n\t    __decorate([\n\t        path('/rating'),\n\t        method('POST'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"rateDocument\", null);\n\t    __decorate([\n\t        path('/tag'),\n\t        method('POST'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"tagDocument\", null);\n\t    __decorate([\n\t        path('/querySuggest'),\n\t        method('GET'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"getRevealQuerySuggest\", null);\n\t    __decorate([\n\t        alertsPath('/subscriptions'),\n\t        accessTokenInUrl('accessToken'),\n\t        method('POST'),\n\t        requestDataType('application/json'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"follow\", null);\n\t    __decorate([\n\t        alertsPath('/subscriptions'),\n\t        accessTokenInUrl('accessToken'),\n\t        method('GET'),\n\t        requestDataType('application/json'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"listSubscriptions\", null);\n\t    __decorate([\n\t        alertsPath('/subscriptions/'),\n\t        accessTokenInUrl('accessToken'),\n\t        method('PUT'),\n\t        requestDataType('application/json'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"updateSubscription\", null);\n\t    __decorate([\n\t        alertsPath('/subscriptions/'),\n\t        accessTokenInUrl('accessToken'),\n\t        method('DELETE'),\n\t        requestDataType('application/json'),\n\t        responseType('text')\n\t    ], SearchEndpoint.prototype, \"deleteSubscription\", null);\n\t    __decorate([\n\t        path('/log'),\n\t        method('POST')\n\t    ], SearchEndpoint.prototype, \"logError\", null);\n\t    return SearchEndpoint;\n\t}());\n\texports.SearchEndpoint = SearchEndpoint;\n\t/**\n\t * It's taken for granted that methods using decorators have :\n\t * {@link IEndpointCallOptions} as their second to last parameter\n\t * {@link IEndpointCallParameters} as their last parameter\n\t * The default parameters for each member of the injected {@link IEndpointCallParameters} are the following:\n\t * url: '',\n\t * queryString: [],\n\t * requestData: {},\n\t * requestDataType: undefined,\n\t * method: '',\n\t * responseType: '',\n\t * errorsAsSuccess: false\n\t */\n\t/**\n\t * Add the base url\n\t * @param path The path to append to the url\n\t */\n\tfunction path(path) {\n\t    return function (target, key, descriptor) {\n\t        var originalMethod = descriptor.value;\n\t        var nbParams = target[key].prototype.constructor.length;\n\t        descriptor.value = function () {\n\t            var args = [];\n\t            for (var _i = 0; _i < arguments.length; _i++) {\n\t                args[_i - 0] = arguments[_i];\n\t            }\n\t            var uri = this.buildBaseUri(path);\n\t            if (args[nbParams - 1]) {\n\t                args[nbParams - 1].url = uri;\n\t            }\n\t            else {\n\t                var params = {\n\t                    url: uri,\n\t                    queryString: [],\n\t                    requestData: {},\n\t                    method: '',\n\t                    responseType: '',\n\t                    errorsAsSuccess: false\n\t                };\n\t                args[nbParams - 1] = params;\n\t            }\n\t            var result = originalMethod.apply(this, args);\n\t            return result;\n\t        };\n\t        return descriptor;\n\t    };\n\t}\n\t/**\n\t * Add the alert url\n\t * @param path The path to append to the url\n\t */\n\tfunction alertsPath(path) {\n\t    return function (target, key, descriptor) {\n\t        var originalMethod = descriptor.value;\n\t        var nbParams = target[key].prototype.constructor.length;\n\t        descriptor.value = function () {\n\t            var args = [];\n\t            for (var _i = 0; _i < arguments.length; _i++) {\n\t                args[_i - 0] = arguments[_i];\n\t            }\n\t            var uri = this.buildSearchAlertsUri(path);\n\t            if (args[nbParams - 1]) {\n\t                args[nbParams - 1].url = uri;\n\t            }\n\t            else {\n\t                var params = {\n\t                    url: uri,\n\t                    queryString: [],\n\t                    requestData: {},\n\t                    method: '',\n\t                    responseType: '',\n\t                    errorsAsSuccess: false\n\t                };\n\t                args[nbParams - 1] = params;\n\t            }\n\t            var result = originalMethod.apply(this, args);\n\t            return result;\n\t        };\n\t        return descriptor;\n\t    };\n\t}\n\t/**\n\t * Set the request data type\n\t * @param type The type to set\n\t */\n\tfunction requestDataType(type) {\n\t    return function (target, key, descriptor) {\n\t        var originalMethod = descriptor.value;\n\t        var nbParams = target[key].prototype.constructor.length;\n\t        descriptor.value = function () {\n\t            var args = [];\n\t            for (var _i = 0; _i < arguments.length; _i++) {\n\t                args[_i - 0] = arguments[_i];\n\t            }\n\t            if (args[nbParams - 1]) {\n\t                args[nbParams - 1].requestDataType = type;\n\t            }\n\t            else {\n\t                var params = {\n\t                    url: '',\n\t                    queryString: [],\n\t                    requestData: {},\n\t                    requestDataType: type,\n\t                    method: '',\n\t                    responseType: '',\n\t                    errorsAsSuccess: false\n\t                };\n\t                args[nbParams - 1] = params;\n\t            }\n\t            var result = originalMethod.apply(this, args);\n\t            return result;\n\t        };\n\t        return descriptor;\n\t    };\n\t}\n\t/**\n\t * Set the request data type\n\t * @param met The type to set\n\t */\n\tfunction method(met) {\n\t    return function (target, key, descriptor) {\n\t        var originalMethod = descriptor.value;\n\t        var nbParams = target[key].prototype.constructor.length;\n\t        descriptor.value = function () {\n\t            var args = [];\n\t            for (var _i = 0; _i < arguments.length; _i++) {\n\t                args[_i - 0] = arguments[_i];\n\t            }\n\t            if (args[nbParams - 1]) {\n\t                args[nbParams - 1].method = met;\n\t            }\n\t            else {\n\t                var params = {\n\t                    url: '',\n\t                    queryString: [],\n\t                    requestData: {},\n\t                    method: met,\n\t                    responseType: '',\n\t                    errorsAsSuccess: false\n\t                };\n\t                args[nbParams - 1] = params;\n\t            }\n\t            var result = originalMethod.apply(this, args);\n\t            return result;\n\t        };\n\t        return descriptor;\n\t    };\n\t}\n\t/**\n\t * Set the response type\n\t * @param resp The response type to set\n\t */\n\tfunction responseType(resp) {\n\t    return function (target, key, descriptor) {\n\t        var originalMethod = descriptor.value;\n\t        var nbParams = target[key].prototype.constructor.length;\n\t        descriptor.value = function () {\n\t            var args = [];\n\t            for (var _i = 0; _i < arguments.length; _i++) {\n\t                args[_i - 0] = arguments[_i];\n\t            }\n\t            if (args[nbParams - 1]) {\n\t                args[nbParams - 1].responseType = resp;\n\t            }\n\t            else {\n\t                var params = {\n\t                    url: '',\n\t                    queryString: [],\n\t                    requestData: {},\n\t                    method: '',\n\t                    responseType: resp,\n\t                    errorsAsSuccess: false\n\t                };\n\t                args[nbParams - 1] = params;\n\t            }\n\t            var result = originalMethod.apply(this, args);\n\t            return result;\n\t        };\n\t        return descriptor;\n\t    };\n\t}\n\t/**\n\t * Add the accessToken to the query string arguments\n\t */\n\tfunction accessTokenInUrl(tokenKey) {\n\t    if (tokenKey === void 0) { tokenKey = 'access_token'; }\n\t    return function (target, key, descriptor) {\n\t        var originalMethod = descriptor.value;\n\t        var nbParams = target[key].prototype.constructor.length;\n\t        descriptor.value = function () {\n\t            var args = [];\n\t            for (var _i = 0; _i < arguments.length; _i++) {\n\t                args[_i - 0] = arguments[_i];\n\t            }\n\t            var queryString = this.buildAccessToken(tokenKey);\n\t            if (args[nbParams - 1]) {\n\t                args[nbParams - 1].queryString = args[nbParams - 1].queryString.concat(queryString);\n\t            }\n\t            else {\n\t                var params = {\n\t                    url: '',\n\t                    queryString: queryString,\n\t                    requestData: {},\n\t                    method: '',\n\t                    responseType: '',\n\t                    errorsAsSuccess: false\n\t                };\n\t                args[nbParams - 1] = params;\n\t            }\n\t            var result = originalMethod.apply(this, args);\n\t            return result;\n\t        };\n\t        return descriptor;\n\t    };\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;//     Underscore.js 1.8.3\n\t//     http://underscorejs.org\n\t//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t//     Underscore may be freely distributed under the MIT license.\n\t(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if(\"number\"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i=\"constructor\";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)}; true?(\"undefined\"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION=\"1.8.3\";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w(\"length\"),k=function(n){var t=O(n);return\"number\"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),(\"number\"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),\"value\")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError(\"Bind must be called on a function\");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error(\"bindAll must be passed function names\");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=\"\"+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable(\"toString\"),I=[\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case\"[object RegExp]\":case\"[object String]\":return\"\"+n==\"\"+t;case\"[object Number]\":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case\"[object Date]\":case\"[object Boolean]\":return+n===+t}var i=\"[object Array]\"===u;if(!i){if(\"object\"!=typeof n||\"object\"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&\"constructor\"in n&&\"constructor\"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return\"[object Array]\"===s.call(n)},m.isObject=function(n){var t=typeof n;return\"function\"===t||\"object\"===t&&!!n},m.each([\"Arguments\",\"Function\",\"String\",\"Number\",\"Date\",\"RegExp\",\"Error\"],function(n){m[\"is\"+n]=function(t){return s.call(t)===\"[object \"+n+\"]\"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,\"callee\")}),\"function\"!=typeof/./&&\"object\"!=typeof Int8Array&&(m.isFunction=function(n){return\"function\"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||\"[object Boolean]\"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r=\"(?:\"+m.keys(n).join(\"|\")+\")\",e=RegExp(r),u=RegExp(r,\"g\");return function(n){return n=null==n?\"\":\"\"+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+\"\";return n?n+t:t},m.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var K=/(.)^/,z={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},D=/\\\\|'|\\r|\\n|\\u2028|\\u2029/g,L=function(n){return\"\\\\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join(\"|\")+\"|$\",\"g\"),u=0,i=\"__p+='\";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+=\"'+\\n((__t=(\"+r+\"))==null?'':_.escape(__t))+\\n'\":e?i+=\"'+\\n((__t=(\"+e+\"))==null?'':__t)+\\n'\":o&&(i+=\"';\\n\"+o+\"\\n__p+='\"),t}),i+=\"';\\n\",t.variable||(i=\"with(obj||{}){\\n\"+i+\"}\\n\"),i=\"var __t,__p='',__j=Array.prototype.join,\"+\"print=function(){__p+=__j.call(arguments,'');};\\n\"+i+\"return __p;\\n\";try{var o=new Function(t.variable||\"obj\",\"_\",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||\"obj\";return c.source=\"function(\"+f+\"){\\n\"+i+\"}\",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),\"shift\"!==n&&\"splice\"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each([\"concat\",\"join\",\"slice\"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return\"\"+this._wrapped},\"function\"==\"function\"&&__webpack_require__(13)&&!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function(){return m}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))}).call(this);\n\t\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {module.exports = __webpack_amd_options__;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Logger_1 = __webpack_require__(15);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar TimeSpanUtils_1 = __webpack_require__(18);\n\tvar DeviceUtils_1 = __webpack_require__(19);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar es6_promise_1 = __webpack_require__(6);\n\t// In ie8, XMLHttpRequest has no status property, so let's use this enum instead\n\tvar XMLHttpRequestStatus;\n\t(function (XMLHttpRequestStatus) {\n\t    XMLHttpRequestStatus[XMLHttpRequestStatus[\"OPENED\"] = XMLHttpRequest.OPENED || 1] = \"OPENED\";\n\t    XMLHttpRequestStatus[XMLHttpRequestStatus[\"HEADERS_RECEIVED\"] = XMLHttpRequest.HEADERS_RECEIVED || 2] = \"HEADERS_RECEIVED\";\n\t    XMLHttpRequestStatus[XMLHttpRequestStatus[\"DONE\"] = XMLHttpRequest.DONE || 4] = \"DONE\";\n\t})(XMLHttpRequestStatus || (XMLHttpRequestStatus = {}));\n\t/**\n\t * This class is in charge of calling an endpoint (eg: a {@link SearchEndpoint}).\n\t *\n\t * This means it's only uses to execute an XMLHttpRequest (for example), massage the response and check if there are errors.\n\t *\n\t * Will execute the call and return a Promise.\n\t *\n\t * Call using one of those options :\n\t *\n\t * * XMLHttpRequest for recent browser that support CORS, or if the endpoint is on the same origin.\n\t * * XDomainRequest for older IE browser that do not support CORS.\n\t * * Jsonp if all else fails, or is explicitly enabled.\n\t */\n\tvar EndpointCaller = (function () {\n\t    /**\n\t     * Create a new EndpointCaller.\n\t     * @param options Specify the authentication that will be used for this endpoint. Not needed if the endpoint is public and has no authentication\n\t     */\n\t    function EndpointCaller(options) {\n\t        if (options === void 0) { options = {}; }\n\t        this.options = options;\n\t        /**\n\t         * Set this property to true to enable Jsonp call to the endpoint.<br/>\n\t         * Be aware that jsonp is \"easier\" to setup endpoint wise, but has a lot of drawback and limitation for the client code.<br/>\n\t         * Default to false.\n\t         * @type {boolean}\n\t         */\n\t        this.useJsonp = false;\n\t        this.logger = new Logger_1.Logger(this);\n\t    }\n\t    /**\n\t     * Generic call to the endpoint using the provided {@link IEndpointCallParameters}.<br/>\n\t     * Internally, will decide which method to use to call the endpoint :<br/>\n\t     * -- XMLHttpRequest for recent browser that support CORS, or if the endpoint is on the same origin.<br/>\n\t     * -- XDomainRequest for older IE browser that do not support CORS.<br/>\n\t     * -- Jsonp if all else fails, or is explicitly enabled.\n\t     * @param params The parameters to use for the call\n\t     * @returns {any} A promise of the given type\n\t     */\n\t    EndpointCaller.prototype.call = function (params) {\n\t        var requestInfo = {\n\t            url: params.url,\n\t            queryString: params.errorsAsSuccess ? params.queryString.concat(['errorsAsSuccess=1']) : params.queryString,\n\t            requestData: params.requestData,\n\t            requestDataType: params.requestDataType || 'application/x-www-form-urlencoded; charset=\"UTF-8\"',\n\t            begun: new Date(),\n\t            method: params.method\n\t        };\n\t        requestInfo.headers = this.buildRequestHeaders(requestInfo);\n\t        if (_.isFunction(this.options.requestModifier)) {\n\t            requestInfo = this.options.requestModifier(requestInfo);\n\t        }\n\t        this.logger.trace('Performing REST request', requestInfo);\n\t        var urlObject = this.parseURL(requestInfo.url);\n\t        // In IE8, hostname and port return \"\" when we are on the same domain.\n\t        var isLocalHost = (window.location.hostname === urlObject.hostname) || (urlObject.hostname === '');\n\t        var currentPort = (window.location.port != '' ? window.location.port : (window.location.protocol == 'https:' ? '443' : '80'));\n\t        var isSamePort = currentPort == urlObject.port;\n\t        var isCrossOrigin = !(isLocalHost && isSamePort);\n\t        if (!this.useJsonp) {\n\t            if (this.isCORSSupported() || !isCrossOrigin) {\n\t                return this.callUsingXMLHttpRequest(requestInfo, params.responseType);\n\t            }\n\t            else if (this.isXDomainRequestSupported()) {\n\t                return this.callUsingXDomainRequest(requestInfo);\n\t            }\n\t            else {\n\t                return this.callUsingAjaxJsonP(requestInfo);\n\t            }\n\t        }\n\t        else {\n\t            return this.callUsingAjaxJsonP(requestInfo);\n\t        }\n\t    };\n\t    /**\n\t     * Call the endpoint using XMLHttpRequest. Used internally by {@link EndpointCaller.call}.<br/>\n\t     * Will try internally to handle error if it can.<br/>\n\t     * Promise will otherwise fail with the error type.\n\t     * @param requestInfo The info about the request\n\t     * @param responseType The responseType. Default to text. https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType\n\t     * @returns {Promise<T>|Promise}\n\t     */\n\t    EndpointCaller.prototype.callUsingXMLHttpRequest = function (requestInfo, responseType) {\n\t        var _this = this;\n\t        if (responseType === void 0) { responseType = 'text'; }\n\t        return new es6_promise_1.Promise(function (resolve, reject) {\n\t            var xmlHttpRequest = new XMLHttpRequest();\n\t            // Beware, most stuff must be set on the event that says the request is OPENED.\n\t            // Otherwise it'll bork on some browsers. Gotta love standards.\n\t            // This sent variable allowed to remove the second call of onreadystatechange with the state OPENED in IE11\n\t            var sent = false;\n\t            xmlHttpRequest.onreadystatechange = function (ev) {\n\t                if (xmlHttpRequest.readyState == XMLHttpRequestStatus.OPENED && !sent) {\n\t                    sent = true;\n\t                    xmlHttpRequest.withCredentials = true;\n\t                    _.each(requestInfo.headers, function (headerValue, headerKey) {\n\t                        xmlHttpRequest.setRequestHeader(headerKey, headerValue);\n\t                    });\n\t                    if (requestInfo.method == 'GET') {\n\t                        xmlHttpRequest.send();\n\t                    }\n\t                    else if (requestInfo.requestDataType.indexOf('application/json') === 0) {\n\t                        xmlHttpRequest.send(JSON.stringify(requestInfo.requestData));\n\t                    }\n\t                    else {\n\t                        xmlHttpRequest.send(_this.convertJsonToFormBody(requestInfo.requestData));\n\t                    }\n\t                }\n\t                else if (xmlHttpRequest.readyState == XMLHttpRequestStatus.HEADERS_RECEIVED) {\n\t                    var status = xmlHttpRequest.status;\n\t                    if (_this.isSuccessHttpStatus(status)) {\n\t                        xmlHttpRequest.responseType = responseType;\n\t                    }\n\t                    else {\n\t                        xmlHttpRequest.responseType = 'text';\n\t                    }\n\t                }\n\t                else if (xmlHttpRequest.readyState == XMLHttpRequestStatus.DONE) {\n\t                    var status = xmlHttpRequest.status;\n\t                    var data;\n\t                    switch (responseType) {\n\t                        case 'json':\n\t                            data = xmlHttpRequest.response;\n\t                            // Work around a bug in IE11 where responseType jsonis not supported : the response comes back as a plain string\n\t                            // Force the json parse manually\n\t                            if (responseType == 'json' && DeviceUtils_1.DeviceUtils.getDeviceName() == 'IE') {\n\t                                try {\n\t                                    data = JSON.parse(data);\n\t                                }\n\t                                catch (e) {\n\t                                }\n\t                            }\n\t                            break;\n\t                        case 'text':\n\t                            data = _this.tryParseResponseText(xmlHttpRequest.responseText, xmlHttpRequest.getResponseHeader('Content-Type'));\n\t                            break;\n\t                        default:\n\t                            data = xmlHttpRequest.response;\n\t                            break;\n\t                    }\n\t                    if (data == undefined) {\n\t                        data = _this.tryParseResponseText(xmlHttpRequest.responseText, xmlHttpRequest.getResponseHeader('Content-Type'));\n\t                    }\n\t                    if (_this.isSuccessHttpStatus(status)) {\n\t                        _this.handleSuccessfulResponseThatMightBeAnError(requestInfo, data, resolve, reject);\n\t                    }\n\t                    else {\n\t                        _this.handleError(requestInfo, xmlHttpRequest.status, data, reject);\n\t                    }\n\t                }\n\t            };\n\t            var queryString = requestInfo.queryString;\n\t            if (requestInfo.method == 'GET') {\n\t                queryString = queryString.concat(_this.convertJsonToQueryString(requestInfo.requestData));\n\t            }\n\t            xmlHttpRequest.open(requestInfo.method, _this.combineUrlAndQueryString(requestInfo.url, queryString));\n\t        });\n\t    };\n\t    /**\n\t     * Call the endpoint using XDomainRequest https://msdn.microsoft.com/en-us/library/cc288060(v=vs.85).aspx<br/>\n\t     * Used for IE8/9\n\t     * @param requestInfo The info about the request\n\t     * @returns {Promise<T>|Promise}\n\t     */\n\t    EndpointCaller.prototype.callUsingXDomainRequest = function (requestInfo) {\n\t        var _this = this;\n\t        return new es6_promise_1.Promise(function (resolve, reject) {\n\t            var queryString = requestInfo.queryString.concat([]);\n\t            // XDomainRequest don't support including stuff in the header, so we must\n\t            // put the access token in the query string if we have one.\n\t            if (_this.options.accessToken) {\n\t                queryString.push('access_token=' + encodeURIComponent(_this.options.accessToken));\n\t            }\n\t            var xDomainRequest = new XDomainRequest();\n\t            if (requestInfo.method == 'GET') {\n\t                queryString = queryString.concat(_this.convertJsonToQueryString(requestInfo.requestData));\n\t            }\n\t            xDomainRequest.open(requestInfo.method, _this.combineUrlAndQueryString(requestInfo.url, queryString));\n\t            xDomainRequest.onload = function () {\n\t                var data = _this.tryParseResponseText(xDomainRequest.responseText, xDomainRequest.contentType);\n\t                _this.handleSuccessfulResponseThatMightBeAnError(requestInfo, data, resolve, reject);\n\t            };\n\t            xDomainRequest.onerror = function () {\n\t                var data = _this.tryParseResponseText(xDomainRequest.responseText, xDomainRequest.contentType);\n\t                _this.handleError(requestInfo, 0, data, reject);\n\t            };\n\t            // We must set those functions otherwise it will sometime fail in IE\n\t            xDomainRequest.ontimeout = function () { return _this.logger.error('Request timeout', xDomainRequest, requestInfo.requestData); };\n\t            xDomainRequest.onprogress = function () { return _this.logger.trace('Request progress', xDomainRequest, requestInfo.requestData); };\n\t            // We must open the request in a separate thread, for obscure reasons\n\t            _.defer(function () {\n\t                if (requestInfo.method == 'GET') {\n\t                    xDomainRequest.send();\n\t                }\n\t                else {\n\t                    xDomainRequest.send(_this.convertJsonToFormBody(requestInfo.requestData));\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Call the endpoint using Jsonp https://en.wikipedia.org/wiki/JSONP<br/>\n\t     * Should be used for dev only, or for very special setup as using jsonp has a lot of drawbacks.\n\t     * @param requestInfo The info about the request\n\t     * @returns {Promise<T>|Promise}\n\t     */\n\t    EndpointCaller.prototype.callUsingAjaxJsonP = function (requestInfo) {\n\t        var _this = this;\n\t        return new es6_promise_1.Promise(function (resolve, reject) {\n\t            var queryString = requestInfo.queryString.concat(_this.convertJsonToQueryString(requestInfo.requestData));\n\t            // JSONP don't support including stuff in the header, so we must\n\t            // put the access token in the query string if we have one.\n\t            if (_this.options.accessToken) {\n\t                queryString.push('access_token=' + encodeURIComponent(_this.options.accessToken));\n\t            }\n\t            queryString.push('callback=?');\n\t            $['jsonp']({\n\t                url: _this.combineUrlAndQueryString(requestInfo.url, queryString),\n\t                success: function (data) { return _this.handleSuccessfulResponseThatMightBeAnError(requestInfo, data, resolve, reject); },\n\t                error: function () { return _this.handleError(requestInfo, 0, undefined, reject); }\n\t            });\n\t        });\n\t    };\n\t    EndpointCaller.prototype.parseURL = function (url) {\n\t        var urlObject = document.createElement('a');\n\t        urlObject.href = url;\n\t        return urlObject;\n\t    };\n\t    EndpointCaller.prototype.convertJsonToQueryString = function (json) {\n\t        Assert_1.Assert.exists(json);\n\t        var result = [];\n\t        _.each(json, function (value, key) {\n\t            if (value != null) {\n\t                if (_.isObject(value)) {\n\t                    result.push(key + '=' + encodeURIComponent(JSON.stringify(value)));\n\t                }\n\t                else {\n\t                    result.push(key + '=' + encodeURIComponent(value.toString()));\n\t                }\n\t            }\n\t        });\n\t        return result;\n\t    };\n\t    EndpointCaller.prototype.convertJsonToFormBody = function (json) {\n\t        return this.convertJsonToQueryString(json).join('&');\n\t    };\n\t    EndpointCaller.prototype.handleSuccessfulResponseThatMightBeAnError = function (requestInfo, data, success, error) {\n\t        if (this.isErrorResponseBody(data)) {\n\t            this.handleError(requestInfo, data.statusCode, data, error);\n\t        }\n\t        else {\n\t            this.handleSuccess(requestInfo, data, success);\n\t        }\n\t    };\n\t    EndpointCaller.prototype.handleSuccess = function (requestInfo, data, success) {\n\t        var querySuccess = {\n\t            duration: TimeSpanUtils_1.TimeSpan.fromDates(requestInfo.begun, new Date()).getMilliseconds(),\n\t            data: data\n\t        };\n\t        this.logger.trace('REST request successful', data, requestInfo);\n\t        success(querySuccess);\n\t    };\n\t    EndpointCaller.prototype.handleError = function (requestInfo, status, data, error) {\n\t        var queryError = {\n\t            statusCode: status,\n\t            data: data\n\t        };\n\t        this.logger.error('REST request failed', status, data, requestInfo);\n\t        error(queryError);\n\t    };\n\t    EndpointCaller.prototype.combineUrlAndQueryString = function (url, queryString) {\n\t        var questionMark = '?';\n\t        if (url.match(/\\?$/)) {\n\t            questionMark = '';\n\t        }\n\t        return url + (queryString.length > 0 ? questionMark + queryString.join('&') : '');\n\t    };\n\t    EndpointCaller.prototype.isXDomainRequestSupported = function () {\n\t        return 'XDomainRequest' in window;\n\t    };\n\t    EndpointCaller.prototype.isCORSSupported = function () {\n\t        return 'withCredentials' in new XMLHttpRequest();\n\t    };\n\t    EndpointCaller.prototype.isSuccessHttpStatus = function (status) {\n\t        return status >= 200 && status < 300 || status === 304;\n\t    };\n\t    EndpointCaller.prototype.tryParseResponseText = function (json, contentType) {\n\t        if (contentType != null && contentType.indexOf('application/json') != -1) {\n\t            if (Utils_1.Utils.isNonEmptyString(json)) {\n\t                try {\n\t                    return JSON.parse(json);\n\t                }\n\t                catch (ex) {\n\t                    return undefined;\n\t                }\n\t            }\n\t            else {\n\t                return undefined;\n\t            }\n\t        }\n\t        else {\n\t            return json;\n\t        }\n\t    };\n\t    EndpointCaller.prototype.isErrorResponseBody = function (data) {\n\t        if (data && data.statusCode) {\n\t            return !this.isSuccessHttpStatus(data.statusCode);\n\t        }\n\t        else {\n\t            return false;\n\t        }\n\t    };\n\t    EndpointCaller.prototype.buildRequestHeaders = function (requestInfo) {\n\t        var headers = {};\n\t        if (this.options.accessToken) {\n\t            headers['Authorization'] = \"Bearer \" + this.options.accessToken;\n\t        }\n\t        else if (this.options.username && this.options.password) {\n\t            headers['Authorization'] = \"Basic \" + btoa(this.options.username + ':' + this.options.password);\n\t        }\n\t        if (requestInfo.method == 'GET') {\n\t            return headers;\n\t        }\n\t        if (requestInfo.requestDataType.indexOf('application/json') === 0) {\n\t            headers['Content-Type'] = 'application/json; charset=\"UTF-8\"';\n\t        }\n\t        else {\n\t            headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=\"UTF-8\"';\n\t        }\n\t        return headers;\n\t    };\n\t    return EndpointCaller;\n\t}());\n\texports.EndpointCaller = EndpointCaller;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t// Ensure that we're not going to get console is undefined error in IE8-9\n\tif (!window['console']) {\n\t    console = {\n\t        log: function () {\n\t        },\n\t        debug: function () {\n\t        },\n\t        info: function () {\n\t        },\n\t        warn: function () {\n\t        },\n\t        error: function () {\n\t        },\n\t        assert: function () {\n\t        },\n\t        clear: function () {\n\t        },\n\t        count: function () {\n\t        },\n\t        dir: function () {\n\t        },\n\t        dirxml: function () {\n\t        },\n\t        group: function () {\n\t        },\n\t        groupCollapsed: function () {\n\t        },\n\t        groupEnd: function () {\n\t        },\n\t        msIsIndependentlyComposed: function (element) {\n\t        },\n\t        profile: function () {\n\t        },\n\t        profileEnd: function () {\n\t        },\n\t        select: function () {\n\t        },\n\t        time: function () {\n\t        },\n\t        timeEnd: function () {\n\t        },\n\t        trace: function () {\n\t        }\n\t    };\n\t}\n\tvar Logger = (function () {\n\t    function Logger(owner) {\n\t        this.owner = owner;\n\t    }\n\t    Logger.prototype.trace = function () {\n\t        var stuff = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            stuff[_i - 0] = arguments[_i];\n\t        }\n\t        if (Logger.level <= Logger.TRACE) {\n\t            this.log('TRACE', stuff);\n\t        }\n\t    };\n\t    Logger.prototype.debug = function () {\n\t        var stuff = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            stuff[_i - 0] = arguments[_i];\n\t        }\n\t        if (Logger.level <= Logger.DEBUG) {\n\t            this.log('DEBUG', stuff);\n\t        }\n\t    };\n\t    Logger.prototype.info = function () {\n\t        var stuff = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            stuff[_i - 0] = arguments[_i];\n\t        }\n\t        if (Logger.level <= Logger.INFO) {\n\t            this.log('INFO', stuff);\n\t        }\n\t    };\n\t    Logger.prototype.warn = function () {\n\t        var stuff = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            stuff[_i - 0] = arguments[_i];\n\t        }\n\t        if (Logger.level <= Logger.WARN) {\n\t            this.log('WARN', stuff);\n\t        }\n\t    };\n\t    Logger.prototype.error = function () {\n\t        var stuff = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            stuff[_i - 0] = arguments[_i];\n\t        }\n\t        if (Logger.level <= Logger.ERROR) {\n\t            this.log('ERROR', stuff);\n\t        }\n\t    };\n\t    Logger.prototype.log = function (level, stuff) {\n\t        if (window['console'] && console.log) {\n\t            console.log([level, this.owner].concat(stuff));\n\t            if (Logger.executionTime) {\n\t                console.timeEnd('Execution time');\n\t                console.time('Execution time');\n\t            }\n\t        }\n\t    };\n\t    Logger.enable = function () {\n\t        Logger.level = Logger.TRACE;\n\t    };\n\t    Logger.disable = function () {\n\t        Logger.level = Logger.NOTHING;\n\t    };\n\t    Logger.TRACE = 1;\n\t    Logger.DEBUG = 2;\n\t    Logger.INFO = 3;\n\t    Logger.WARN = 4;\n\t    Logger.ERROR = 5;\n\t    Logger.NOTHING = 6;\n\t    Logger.level = Logger.INFO;\n\t    Logger.executionTime = false;\n\t    return Logger;\n\t}());\n\texports.Logger = Logger;\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Logger_1 = __webpack_require__(15);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Assert = (function () {\n\t    function Assert() {\n\t    }\n\t    Assert.fail = function (message) {\n\t        Assert.failureHandler(message);\n\t    };\n\t    Assert.check = function (condition, message) {\n\t        if (!condition) {\n\t            Assert.fail(message);\n\t        }\n\t    };\n\t    Assert.isUndefined = function (obj) {\n\t        Assert.check(Utils_1.Utils.isUndefined(obj), 'Value should be undefined.');\n\t    };\n\t    Assert.isNotUndefined = function (obj) {\n\t        Assert.check(!Utils_1.Utils.isUndefined(obj), 'Value should not be undefined.');\n\t    };\n\t    Assert.isNull = function (obj) {\n\t        Assert.check(Utils_1.Utils.isNull(obj), 'Value should be null.');\n\t    };\n\t    Assert.isNotNull = function (obj) {\n\t        Assert.check(!Utils_1.Utils.isNull(obj), 'Value should not be null.');\n\t    };\n\t    Assert.exists = function (obj) {\n\t        Assert.check(!Utils_1.Utils.isNullOrUndefined(obj), 'Value should not be null or undefined');\n\t    };\n\t    Assert.doesNotExists = function (obj) {\n\t        Assert.check(Utils_1.Utils.isNullOrUndefined(obj), 'Value should be null or undefined');\n\t    };\n\t    Assert.isString = function (obj) {\n\t        Assert.check(_.isString(obj), 'Value should be a string.');\n\t    };\n\t    Assert.stringStartsWith = function (str, start) {\n\t        Assert.isNonEmptyString(str);\n\t        Assert.isNonEmptyString(start);\n\t        Assert.check(str.indexOf(start) == 0, 'Value should start with ' + start);\n\t    };\n\t    Assert.isNonEmptyString = function (str) {\n\t        Assert.check(Utils_1.Utils.isNonEmptyString(str), 'Value should be a non-empty string.');\n\t    };\n\t    Assert.isNumber = function (obj) {\n\t        Assert.check(_.isNumber(obj), 'Value should be a number.');\n\t    };\n\t    Assert.isLargerThan = function (expected, actual) {\n\t        Assert.check(actual > expected, 'Value ' + actual + ' should be larger than ' + expected);\n\t    };\n\t    Assert.isLargerOrEqualsThan = function (expected, actual) {\n\t        Assert.check(actual >= expected, 'Value ' + actual + ' should be larger or equal than ' + expected);\n\t    };\n\t    Assert.isSmallerThan = function (expected, actual) {\n\t        Assert.check(actual < expected, 'Value ' + actual + ' should be smaller than ' + expected);\n\t    };\n\t    Assert.isSmallerOrEqualsThan = function (expected, actual) {\n\t        Assert.check(actual <= expected, 'Value ' + actual + ' should be smaller or equal than ' + expected);\n\t    };\n\t    Assert.logger = new Logger_1.Logger('Assert');\n\t    Assert.failureHandler = function (message) {\n\t        Assert.logger.error('Assertion Failed!', message);\n\t        if (window['console'] && console.trace) {\n\t            console.trace();\n\t        }\n\t        if (Utils_1.Utils.isNonEmptyString(message)) {\n\t            throw new PreconditionFailedException(message);\n\t        }\n\t        else {\n\t            throw new PreconditionFailedException('Assertion Failed!');\n\t        }\n\t    };\n\t    return Assert;\n\t}());\n\texports.Assert = Assert;\n\tvar PreconditionFailedException = (function () {\n\t    function PreconditionFailedException(message) {\n\t        this.message = message;\n\t    }\n\t    PreconditionFailedException.prototype.toString = function () {\n\t        return this.message;\n\t    };\n\t    return PreconditionFailedException;\n\t}());\n\texports.PreconditionFailedException = PreconditionFailedException;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar isCoveoFieldRegex = /^@[a-zA-Z0-9_\\.]+$/;\n\tvar Utils = (function () {\n\t    function Utils() {\n\t    }\n\t    Utils.isUndefined = function (obj) {\n\t        return typeof obj == 'undefined';\n\t    };\n\t    Utils.isNull = function (obj) {\n\t        return obj === null;\n\t    };\n\t    Utils.isNullOrUndefined = function (obj) {\n\t        return Utils.isUndefined(obj) || Utils.isNull(obj);\n\t    };\n\t    Utils.exists = function (obj) {\n\t        return !Utils.isNullOrUndefined(obj);\n\t    };\n\t    Utils.toNotNullString = function (str) {\n\t        return _.isString(str) ? str : '';\n\t    };\n\t    Utils.anyTypeToString = function (value) {\n\t        return value ? value.toString() : '';\n\t    };\n\t    Utils.isNullOrEmptyString = function (str) {\n\t        return Utils.isNullOrUndefined(str) || !Utils.isNonEmptyString(str);\n\t    };\n\t    Utils.isNonEmptyString = function (str) {\n\t        return _.isString(str) && str !== '';\n\t    };\n\t    Utils.isEmptyString = function (str) {\n\t        return !Utils.isNonEmptyString(str);\n\t    };\n\t    Utils.stringStartsWith = function (str, startWith) {\n\t        return str.slice(0, startWith.length) == startWith;\n\t    };\n\t    Utils.isNonEmptyArray = function (obj) {\n\t        return _.isArray(obj) && obj.length > 0;\n\t    };\n\t    Utils.isEmptyArray = function (obj) {\n\t        return !Utils.isNonEmptyArray(obj);\n\t    };\n\t    Utils.isHtmlElement = function (obj) {\n\t        if (window['HTMLElement'] != undefined) {\n\t            return obj instanceof HTMLElement;\n\t        }\n\t        else {\n\t            return obj && obj.nodeType && obj.nodeType == 1;\n\t        }\n\t    };\n\t    Utils.parseIntIfNotUndefined = function (str) {\n\t        if (Utils.isNonEmptyString(str)) {\n\t            return parseInt(str, 10);\n\t        }\n\t        else {\n\t            return undefined;\n\t        }\n\t    };\n\t    Utils.parseFloatIfNotUndefined = function (str) {\n\t        if (Utils.isNonEmptyString(str)) {\n\t            return parseFloat(str);\n\t        }\n\t        else {\n\t            return undefined;\n\t        }\n\t    };\n\t    Utils.round = function (num, decimals) {\n\t        return Math.round(num * Math.pow(10, decimals)) / Math.pow(10, decimals);\n\t    };\n\t    Utils.parseBooleanIfNotUndefined = function (str) {\n\t        if (Utils.isNonEmptyString(str)) {\n\t            switch (str.toLowerCase()) {\n\t                case 'true':\n\t                case '1':\n\t                case 'yes':\n\t                    return true;\n\t                case 'false':\n\t                case '0':\n\t                case 'no':\n\t                    return false;\n\t                default:\n\t                    return undefined;\n\t            }\n\t        }\n\t        else {\n\t            return undefined;\n\t        }\n\t    };\n\t    Utils.trim = function (value) {\n\t        if (value == null) {\n\t            return null;\n\t        }\n\t        return value.replace(/^\\s+|\\s+$/g, '');\n\t    };\n\t    Utils.encodeHTMLEntities = function (rawStr) {\n\t        var ret = [];\n\t        for (var i = rawStr.length - 1; i >= 0; i--) {\n\t            if (/^[a-z0-9]/i.test(rawStr[i])) {\n\t                ret.unshift(rawStr[i]);\n\t            }\n\t            else {\n\t                ret.unshift(['&#', rawStr.charCodeAt(i), ';'].join(''));\n\t            }\n\t        }\n\t        return ret.join('');\n\t    };\n\t    Utils.decodeHTMLEntities = function (rawString) {\n\t        return rawString.replace(/&#(\\d+);/g, function (match, dec) {\n\t            return String.fromCharCode(dec);\n\t        });\n\t    };\n\t    Utils.arrayEqual = function (array1, array2, sameOrder) {\n\t        if (sameOrder === void 0) { sameOrder = true; }\n\t        if (sameOrder) {\n\t            return _.isEqual(array1, array2);\n\t        }\n\t        else {\n\t            var arrays_1 = [array1, array2];\n\t            return _.all(arrays_1, function (array) {\n\t                return array.length == arrays_1[0].length && _.difference(array, arrays_1[0]).length == 0;\n\t            });\n\t        }\n\t    };\n\t    Utils.objectEqual = function (obj1, obj2) {\n\t        return _.isEqual(obj1, obj2);\n\t    };\n\t    Utils.isCoveoField = function (field) {\n\t        return isCoveoFieldRegex.test(field);\n\t    };\n\t    Utils.escapeRegexCharacter = function (str) {\n\t        var ret = str.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n\t        return ret;\n\t    };\n\t    Utils.getCaseInsensitiveProperty = function (object, name) {\n\t        // First try using a fast case-sensitive lookup\n\t        var value = object[name];\n\t        // Then try a fast case-sensitive lookup with lowercase name\n\t        if (value == null) {\n\t            var lowerCaseName_1 = name.toLowerCase();\n\t            value = object[lowerCaseName_1];\n\t            // Then try a slow scanning of all the properties\n\t            if (value == null) {\n\t                var matchingKey = _.find(_.keys(object), function (key) { return key.toLowerCase() == lowerCaseName_1; });\n\t                if (matchingKey != null) {\n\t                    value = object[matchingKey];\n\t                }\n\t            }\n\t        }\n\t        return value;\n\t    };\n\t    Utils.getFieldValue = function (result, name) {\n\t        // Be as forgiving as possible about the field name, since we expect\n\t        // user provided values.\n\t        if (name == null) {\n\t            return undefined;\n\t        }\n\t        name = Utils.trim(name);\n\t        if (name[0] == '@') {\n\t            name = name.substr(1);\n\t        }\n\t        if (name == '') {\n\t            return undefined;\n\t        }\n\t        // At this point the name should be well formed\n\t        if (!Utils.isCoveoField('@' + name)) {\n\t            throw \"Not a valid field : \" + name;\n\t        }\n\t        // Handle namespace field values of the form sf.Foo.Bar\n\t        var parts = name.split('.').reverse();\n\t        var obj = result.raw;\n\t        while (parts.length > 1) {\n\t            obj = Utils.getCaseInsensitiveProperty(obj, parts.pop());\n\t            if (Utils.isUndefined(obj)) {\n\t                return undefined;\n\t            }\n\t        }\n\t        var value = Utils.getCaseInsensitiveProperty(obj, parts[0]);\n\t        // If still nothing, look at the root of the result\n\t        if (value == null) {\n\t            value = Utils.getCaseInsensitiveProperty(result, name);\n\t        }\n\t        return value;\n\t    };\n\t    Utils.throttle = function (func, wait, options, context, args) {\n\t        if (options === void 0) { options = {}; }\n\t        var result;\n\t        var timeout = null;\n\t        var previous = 0;\n\t        var later = function () {\n\t            previous = options.leading === false ? 0 : new Date().getTime();\n\t            timeout = null;\n\t            result = func.apply(context, args);\n\t        };\n\t        return function () {\n\t            var now = new Date().getTime();\n\t            if (!previous && options.leading === false) {\n\t                previous = now;\n\t            }\n\t            var remaining = wait - (now - previous);\n\t            context = this;\n\t            args = arguments;\n\t            if (remaining <= 0) {\n\t                clearTimeout(timeout);\n\t                timeout = null;\n\t                previous = now;\n\t                result = func.apply(context, args);\n\t            }\n\t            else if (!timeout && options.trailing !== false) {\n\t                timeout = setTimeout(later, remaining);\n\t            }\n\t            return result;\n\t        };\n\t    };\n\t    Utils.extendDeep = function (target, src) {\n\t        if (!target) {\n\t            target = {};\n\t        }\n\t        var isArray = _.isArray(src);\n\t        var toReturn = isArray && [] || {};\n\t        if (isArray) {\n\t            target = target || [];\n\t            toReturn = toReturn['concat'](target);\n\t            _.each(src, function (e, i, obj) {\n\t                if (typeof target[i] === 'undefined') {\n\t                    toReturn[i] = e;\n\t                }\n\t                else if (typeof e === 'object') {\n\t                    toReturn[i] = Utils.extendDeep(target[i], e);\n\t                }\n\t                else {\n\t                    if (target.indexOf(e) === -1) {\n\t                        toReturn['push'](e);\n\t                    }\n\t                }\n\t            });\n\t        }\n\t        else {\n\t            if (target && typeof target === 'object') {\n\t                _.each(_.keys(target), function (key) {\n\t                    toReturn[key] = target[key];\n\t                });\n\t            }\n\t            _.each(_.keys(src), function (key) {\n\t                if (typeof src[key] !== 'object' || !src[key]) {\n\t                    toReturn[key] = src[key];\n\t                }\n\t                else {\n\t                    if (!target[key]) {\n\t                        toReturn[key] = src[key];\n\t                    }\n\t                    else {\n\t                        toReturn[key] = Utils.extendDeep(target[key], src[key]);\n\t                    }\n\t                }\n\t            });\n\t        }\n\t        return toReturn;\n\t    };\n\t    Utils.getQueryStringValue = function (key, queryString) {\n\t        if (queryString === void 0) { queryString = window.location.search; }\n\t        return queryString.replace(new RegExp('^(?:.*[&\\\\?]' + key.replace(/[\\.\\+\\*]/g, '\\\\$&') + '(?:\\\\=([^&]*))?)?.*$', 'i'), '$1');\n\t    };\n\t    Utils.isValidUrl = function (str) {\n\t        var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n\t        return regexp.test(str);\n\t    };\n\t    Utils.debounce = function (func, wait) {\n\t        var timeout;\n\t        var stackTraceTimeout;\n\t        return function () {\n\t            var _this = this;\n\t            var args = [];\n\t            for (var _i = 0; _i < arguments.length; _i++) {\n\t                args[_i - 0] = arguments[_i];\n\t            }\n\t            if (timeout == null) {\n\t                timeout = setTimeout(function () {\n\t                    timeout = null;\n\t                }, wait);\n\t                stackTraceTimeout = setTimeout(function () {\n\t                    func.apply(_this, args);\n\t                    stackTraceTimeout = null;\n\t                });\n\t            }\n\t            else if (stackTraceTimeout == null) {\n\t                clearTimeout(timeout);\n\t                timeout = setTimeout(function () {\n\t                    func.apply(_this, args);\n\t                    timeout = null;\n\t                }, wait);\n\t            }\n\t        };\n\t    };\n\t    Utils.readCookie = function (name) {\n\t        var nameEQ = name + '=';\n\t        var ca = document.cookie.split(';');\n\t        for (var i = 0; i < ca.length; i++) {\n\t            var c = ca[i];\n\t            while (c.charAt(0) == ' ') {\n\t                c = c.substring(1, c.length);\n\t            }\n\t            if (c.indexOf(nameEQ) == 0) {\n\t                return c.substring(nameEQ.length, c.length);\n\t            }\n\t        }\n\t        return null;\n\t    };\n\t    Utils.toDashCase = function (camelCased) {\n\t        return camelCased.replace(/([a-z][A-Z])/g, function (g) { return g[0] + '-' + g[1].toLowerCase(); });\n\t    };\n\t    // Based on http://stackoverflow.com/a/8412989\n\t    Utils.parseXml = function (xml) {\n\t        if (typeof DOMParser != 'undefined') {\n\t            return (new DOMParser()).parseFromString(xml, 'text/xml');\n\t        }\n\t        else if (typeof ActiveXObject != 'undefined' && new ActiveXObject('Microsoft.XMLDOM')) {\n\t            var xmlDoc = new ActiveXObject('Microsoft.XMLDOM');\n\t            xmlDoc.async = 'false';\n\t            xmlDoc.loadXML(xml);\n\t            return xmlDoc;\n\t        }\n\t        else {\n\t            throw new Error('No XML parser found');\n\t        }\n\t    };\n\t    Utils.copyObject = function (target, src) {\n\t        var _this = this;\n\t        _.each(_.keys(src), function (key) {\n\t            if (typeof src[key] !== 'object' || !src[key]) {\n\t                target[key] = src[key];\n\t            }\n\t            else if (!target[key]) {\n\t                target[key] = src[key];\n\t            }\n\t            else {\n\t                _this.copyObject(target[key], src[key]);\n\t            }\n\t        });\n\t    };\n\t    Utils.copyObjectAttributes = function (target, src, attributes) {\n\t        var _this = this;\n\t        _.each(_.keys(src), function (key) {\n\t            if (_.contains(attributes, key)) {\n\t                if (typeof src[key] !== 'object' || !src[key]) {\n\t                    target[key] = src[key];\n\t                }\n\t                else if (!target[key]) {\n\t                    target[key] = src[key];\n\t                }\n\t                else {\n\t                    _this.copyObject(target[key], src[key]);\n\t                }\n\t            }\n\t        });\n\t    };\n\t    return Utils;\n\t}());\n\texports.Utils = Utils;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\tvar TimeSpan = (function () {\n\t    function TimeSpan(time, isMilliseconds) {\n\t        if (isMilliseconds === void 0) { isMilliseconds = true; }\n\t        if (isMilliseconds) {\n\t            this.milliseconds = time;\n\t        }\n\t        else {\n\t            this.milliseconds = time * 1000;\n\t        }\n\t    }\n\t    TimeSpan.prototype.getMilliseconds = function () {\n\t        return this.milliseconds;\n\t    };\n\t    TimeSpan.prototype.getSeconds = function () {\n\t        return this.getMilliseconds() / 1000;\n\t    };\n\t    TimeSpan.prototype.getMinutes = function () {\n\t        return this.getSeconds() / 60;\n\t    };\n\t    TimeSpan.prototype.getHours = function () {\n\t        return this.getMinutes() / 60;\n\t    };\n\t    TimeSpan.prototype.getDays = function () {\n\t        return this.getHours() / 24;\n\t    };\n\t    TimeSpan.prototype.getWeeks = function () {\n\t        return this.getDays() / 7;\n\t    };\n\t    TimeSpan.prototype.getHHMMSS = function () {\n\t        var hours = Math.floor(this.getHours());\n\t        var minutes = Math.floor(this.getMinutes()) % 60;\n\t        var seconds = Math.floor(this.getSeconds()) % 60;\n\t        var hoursString, minutesString, secondsString;\n\t        if (hours == 0) {\n\t            hoursString = '';\n\t        }\n\t        else {\n\t            hoursString = hours < 10 ? '0' + hours.toString() : hours.toString();\n\t        }\n\t        minutesString = minutes < 10 ? '0' + minutes.toString() : minutes.toString();\n\t        secondsString = seconds < 10 ? '0' + seconds.toString() : seconds.toString();\n\t        var hhmmss = (hoursString != '' ? hoursString + ':' : '') + minutesString + ':' + secondsString;\n\t        return hhmmss;\n\t    };\n\t    TimeSpan.fromDates = function (from, to) {\n\t        Assert_1.Assert.exists(from);\n\t        Assert_1.Assert.exists(to);\n\t        return new TimeSpan(to.valueOf() - from.valueOf());\n\t    };\n\t    return TimeSpan;\n\t}());\n\texports.TimeSpan = TimeSpan;\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t// Not sure about this : In year 2033 who's to say that this list won't be 50 pages long !\n\tvar mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\tvar DeviceUtils = (function () {\n\t    function DeviceUtils() {\n\t    }\n\t    DeviceUtils.getDeviceName = function () {\n\t        var userAgent = navigator.userAgent;\n\t        if (userAgent.match(/Android/i)) {\n\t            return 'Android';\n\t        }\n\t        if (userAgent.match(/BlackBerry/i)) {\n\t            return 'BlackBerry';\n\t        }\n\t        if (userAgent.match(/iPhone/i)) {\n\t            return 'iPhone';\n\t        }\n\t        if (userAgent.match(/iPad/i)) {\n\t            return 'iPad';\n\t        }\n\t        if (userAgent.match(/iPod/i)) {\n\t            return 'iPod';\n\t        }\n\t        if (userAgent.match(/Opera Mini/i)) {\n\t            return 'Opera Mini';\n\t        }\n\t        if (userAgent.match(/IEMobile/i)) {\n\t            return 'IE Mobile';\n\t        }\n\t        if (userAgent.match(/Chrome/i)) {\n\t            return 'Chrome';\n\t        }\n\t        if (userAgent.match(/MSIE/i) || userAgent.match(/Trident/i)) {\n\t            return 'IE';\n\t        }\n\t        if (userAgent.match(/Opera/i)) {\n\t            return 'Opera';\n\t        }\n\t        if (userAgent.match(/Firefox/i)) {\n\t            return 'Firefox';\n\t        }\n\t        if (userAgent.match(/Safari/i)) {\n\t            return 'Safari';\n\t        }\n\t        return 'Others';\n\t    };\n\t    DeviceUtils.isAndroid = function () {\n\t        return DeviceUtils.getDeviceName() == 'Android';\n\t    };\n\t    DeviceUtils.isIos = function () {\n\t        var deviceName = DeviceUtils.getDeviceName();\n\t        return deviceName == 'iPhone' || deviceName == 'iPad' || deviceName == 'iPod';\n\t    };\n\t    DeviceUtils.isIE8or9 = function () {\n\t        var myNav = navigator.userAgent.toLowerCase();\n\t        if (myNav.indexOf('msie') == -1) {\n\t            return false;\n\t        }\n\t        return parseInt(myNav.split('msie')[1]) < 10;\n\t    };\n\t    DeviceUtils.isMobileDevice = function () {\n\t        return mobile;\n\t    };\n\t    DeviceUtils.isSmallScreenWidth = function () {\n\t        if (window['clientWidth'] != null && window['clientWidth'] <= 480) {\n\t            return true;\n\t        }\n\t        return document.body.clientWidth <= 480;\n\t    };\n\t    DeviceUtils.isSmallScreenHeight = function () {\n\t        return document.body.clientHeight <= 640;\n\t    };\n\t    return DeviceUtils;\n\t}());\n\texports.DeviceUtils = DeviceUtils;\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\tvar AjaxError = (function () {\n\t    function AjaxError(message, status) {\n\t        this.message = message;\n\t        this.status = status;\n\t        Assert_1.Assert.exists(message);\n\t        Assert_1.Assert.exists(status);\n\t        this.name = this.type = 'Ajax Error (status: ' + status + ')';\n\t    }\n\t    return AjaxError;\n\t}());\n\texports.AjaxError = AjaxError;\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar MissingAuthenticationError = (function () {\n\t    function MissingAuthenticationError(provider) {\n\t        this.provider = provider;\n\t        this.isMissingAuthentication = true;\n\t        this.name = this.type = this.message = \"Missing Authentication (provider: \" + provider + \")\";\n\t    }\n\t    return MissingAuthenticationError;\n\t}());\n\texports.MissingAuthenticationError = MissingAuthenticationError;\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar QueryUtils = (function () {\n\t    function QueryUtils() {\n\t    }\n\t    QueryUtils.createGuid = function () {\n\t        return (typeof (crypto) != 'undefined' && typeof (crypto.getRandomValues) != 'undefined') ? QueryUtils.generateWithCrypto() : QueryUtils.generateWithRandom();\n\t    };\n\t    // This method is a fallback as it's generate a lot of collisions in Chrome.\n\t    QueryUtils.generateWithRandom = function () {\n\t        // http://stackoverflow.com/a/2117523\n\t        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n\t            return v.toString(16);\n\t        });\n\t    };\n\t    QueryUtils.generateWithCrypto = function () {\n\t        var buf = new Uint16Array(8);\n\t        crypto.getRandomValues(buf);\n\t        var S4 = function (num) {\n\t            var ret = num.toString(16);\n\t            while (ret.length < 4) {\n\t                ret = '0' + ret;\n\t            }\n\t            return ret;\n\t        };\n\t        return (S4(buf[0]) + S4(buf[1]) + '-' + S4(buf[2]) + '-' + S4(buf[3]) + '-' + S4(buf[4]) + '-' + S4(buf[5]) + S4(buf[6]) + S4(buf[7]));\n\t    };\n\t    QueryUtils.setStateObjectOnQueryResults = function (state, results) {\n\t        QueryUtils.setPropertyOnResults(results, 'state', state);\n\t    };\n\t    QueryUtils.setStateObjectOnQueryResult = function (state, result) {\n\t        QueryUtils.setPropertyOnResult(result, 'state', state);\n\t    };\n\t    QueryUtils.setIndexAndUidOnQueryResults = function (query, results, queryUid, pipeline, splitTestRun) {\n\t        Assert_1.Assert.exists(query);\n\t        Assert_1.Assert.exists(results);\n\t        var index = query.firstResult;\n\t        QueryUtils.setPropertyOnResults(results, 'queryUid', queryUid);\n\t        QueryUtils.setPropertyOnResults(results, 'pipeline', pipeline);\n\t        QueryUtils.setPropertyOnResults(results, 'splitTestRun', splitTestRun);\n\t        QueryUtils.setPropertyOnResults(results, 'index', index, function () { return ++index; });\n\t    };\n\t    QueryUtils.setTermsToHighlightOnQueryResults = function (query, results) {\n\t        QueryUtils.setPropertyOnResults(results, 'termsToHighlight', results.termsToHighlight);\n\t        QueryUtils.setPropertyOnResults(results, 'phrasesToHighlight', results.phrasesToHighlight);\n\t    };\n\t    QueryUtils.splitFlags = function (flags, delimiter) {\n\t        if (delimiter === void 0) { delimiter = ';'; }\n\t        Assert_1.Assert.exists(flags);\n\t        return flags.split(delimiter);\n\t    };\n\t    QueryUtils.isAttachment = function (result) {\n\t        return _.contains(QueryUtils.splitFlags(result.flags), 'IsAttachment');\n\t    };\n\t    QueryUtils.containsAttachment = function (result) {\n\t        return _.contains(QueryUtils.splitFlags(result.flags), 'ContainsAttachment');\n\t    };\n\t    QueryUtils.hasHTMLVersion = function (result) {\n\t        return _.contains(QueryUtils.splitFlags(result.flags), 'HasHtmlVersion');\n\t    };\n\t    QueryUtils.hasThumbnail = function (result) {\n\t        return _.contains(QueryUtils.splitFlags(result.flags), 'HasThumbnail');\n\t    };\n\t    QueryUtils.hasExcerpt = function (result) {\n\t        return result.excerpt != undefined && result.excerpt != '';\n\t    };\n\t    QueryUtils.quoteAndEscapeIfNeeded = function (str) {\n\t        Assert_1.Assert.isString(str);\n\t        return QueryUtils.isAtomicString(str) || (QueryUtils.isRangeString(str) || QueryUtils.isRangeWithoutOuterBoundsString(str)) ? str : QueryUtils.quoteAndEscape(str);\n\t    };\n\t    QueryUtils.quoteAndEscape = function (str) {\n\t        Assert_1.Assert.isString(str);\n\t        return \"\\\"\" + QueryUtils.escapeString(str) + \"\\\"\";\n\t    };\n\t    QueryUtils.escapeString = function (str) {\n\t        Assert_1.Assert.isString(str);\n\t        return str.replace(/\"/g, ' ');\n\t    };\n\t    QueryUtils.isAtomicString = function (str) {\n\t        Assert_1.Assert.isString(str);\n\t        return /^\\d+(\\.\\d+)?$|^[\\d\\w]+$/.test(str);\n\t    };\n\t    QueryUtils.isRangeString = function (str) {\n\t        Assert_1.Assert.isString(str);\n\t        return /^\\d+(\\.\\d+)?\\.\\.\\d+(\\.\\d+)?$|^\\d{4}\\/\\d{2}\\/\\d{2}@\\d{2}:\\d{2}:\\d{2}\\.\\.\\d{4}\\/\\d{2}\\/\\d{2}@\\d{2}:\\d{2}:\\d{2}$/.test(str);\n\t    };\n\t    QueryUtils.isRangeWithoutOuterBoundsString = function (str) {\n\t        Assert_1.Assert.isString(str);\n\t        return /^\\d+(\\.\\d+)?$|^\\d{4}\\/\\d{2}\\/\\d{2}@\\d{2}:\\d{2}:\\d{2}$/.test(str);\n\t    };\n\t    QueryUtils.buildFieldExpression = function (field, operator, values) {\n\t        Assert_1.Assert.isNonEmptyString(field);\n\t        Assert_1.Assert.stringStartsWith(field, '@');\n\t        Assert_1.Assert.isNonEmptyString(operator);\n\t        Assert_1.Assert.isLargerOrEqualsThan(1, values.length);\n\t        if (values.length == 1) {\n\t            return field + operator + QueryUtils.quoteAndEscapeIfNeeded(values[0]);\n\t        }\n\t        else {\n\t            return field + operator + '(' + _.map(values, function (str) { return QueryUtils.quoteAndEscapeIfNeeded(str); }).join(',') + ')';\n\t        }\n\t    };\n\t    QueryUtils.buildFieldNotEqualExpression = function (field, values) {\n\t        Assert_1.Assert.isNonEmptyString(field);\n\t        Assert_1.Assert.stringStartsWith(field, '@');\n\t        Assert_1.Assert.isLargerOrEqualsThan(1, values.length);\n\t        var filter;\n\t        if (values.length == 1) {\n\t            filter = field + '==' + QueryUtils.quoteAndEscapeIfNeeded(values[0]);\n\t        }\n\t        else {\n\t            filter = field + '==' + '(' + _.map(values, function (str) { return QueryUtils.quoteAndEscapeIfNeeded(str); }).join(',') + ')';\n\t        }\n\t        return '(NOT ' + filter + ')';\n\t    };\n\t    QueryUtils.mergeQueryString = function (url, queryString) {\n\t        var queryStringPosition = url.indexOf('?');\n\t        if (queryStringPosition != -1) {\n\t            url += '&' + queryString;\n\t        }\n\t        else {\n\t            url += '?' + queryString;\n\t        }\n\t        return url;\n\t    };\n\t    QueryUtils.mergePath = function (url, path) {\n\t        var urlSplit = url.split('?');\n\t        return urlSplit[0] + path + '?' + (urlSplit[1] || '');\n\t    };\n\t    QueryUtils.setPropertyOnResults = function (results, property, value, afterOneLoop) {\n\t        _.each(results.results, function (result) {\n\t            QueryUtils.setPropertyOnResult(result, property, value);\n\t            value = afterOneLoop ? afterOneLoop() : value;\n\t        });\n\t    };\n\t    QueryUtils.setPropertyOnResult = function (result, property, value) {\n\t        result[property] = value;\n\t        _.each(result.childResults, function (child) {\n\t            child[property] = value;\n\t        });\n\t        if (!Utils_1.Utils.isNullOrUndefined(result.parentResult)) {\n\t            result.parentResult[property] = value;\n\t        }\n\t    };\n\t    // http://stackoverflow.com/a/11582513\n\t    QueryUtils.getUrlParameter = function (name) {\n\t        return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [, ''])[1].replace(/\\+/g, '%20')) || null;\n\t    };\n\t    QueryUtils.isStratusAgnosticField = function (fieldToVerify, fieldToMatch) {\n\t        var checkForSystem = /^(@?)(sys)?(.*)/i;\n\t        var matchFieldToVerify = checkForSystem.exec(fieldToVerify);\n\t        var matchFieldToMatch = checkForSystem.exec(fieldToMatch);\n\t        if (matchFieldToVerify && matchFieldToMatch) {\n\t            return (matchFieldToVerify[1] + matchFieldToVerify[3]).toLowerCase() == (matchFieldToMatch[1] + matchFieldToMatch[3]).toLowerCase();\n\t        }\n\t        return false;\n\t    };\n\t    return QueryUtils;\n\t}());\n\texports.QueryUtils = QueryUtils;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\tvar QueryError = (function () {\n\t    function QueryError(errorResponse) {\n\t        this.status = errorResponse.statusCode;\n\t        this.message = errorResponse.data.message;\n\t        this.name = this.type = errorResponse.data.type;\n\t        this.queryExecutionReport = errorResponse.data.executionReport;\n\t        Assert_1.Assert.isNumber(this.status);\n\t        Assert_1.Assert.isNonEmptyString(this.message);\n\t        Assert_1.Assert.isNonEmptyString(this.type);\n\t    }\n\t    return QueryError;\n\t}());\n\texports.QueryError = QueryError;\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\texports.ModalBox = __webpack_require__(25);\n\texports.MagicBox = __webpack_require__(26);\n\texports.LocaleString = __webpack_require__(27);\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\tvar Coveo;!function(e){var o;!function(e){function o(e,o){void 0===o&&(o={});var n=o.body||document.body;n.className?n.className.indexOf(\"coveo-modalBox-opened\")==-1&&(n.className+=\" coveo-modalBox-opened\"):n.className=\"coveo-modalBox-opened\";var c=document.createElement(\"div\");c.className=\"coveo-modalBox\",n.appendChild(c),o.fullscreen===!0&&(c.className+=\" coveo-fullscreen\");var d=document.createElement(\"div\");d.className=\"coveo-overlay\",c.appendChild(d);var s=document.createElement(\"div\");if(s.className=\"coveo-wrapper\",c.appendChild(s),null!=o.title){var r=document.createElement(\"div\");r.className=\"coveo-title\",s.appendChild(r),r.innerHTML=o.title,o.titleClose===!0&&r.addEventListener(\"click\",function(){return v()})}e.className+=\" coveo-body\",s.appendChild(e);var i,v=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var d=null==o.validation||o.validation(e);if(d!==!1||t){c.parentElement&&c.parentElement.removeChild(c);var s=l.indexOf(v);return s>=0&&l.splice(s,1),null==n.querySelector(\".coveo-modalBox\")&&a(n,\"coveo-modalBox-opened\"),!0}return!1},u=function(e,o){var n=document.createElement(\"div\");n.className=\"coveo-button\",n.textContent=e,n.addEventListener(\"click\",function(){return v(o)}),i.appendChild(n)};return null!=o.buttons&&(i=document.createElement(\"div\"),i.className=\"coveo-buttons\",s.appendChild(i),o.buttons&t.OK&&u(\"Ok\",t.OK),o.buttons&t.APPLY&&u(\"Apply\",t.APPLY),o.buttons&t.YES&&u(\"Yes\",t.YES),o.buttons&t.NO&&u(\"No\",t.NO),o.buttons&t.CANCEL&&u(\"Cancel\",t.CANCEL)),l.push(v),o.overlayClose===!0&&d.addEventListener(\"click\",function(e){return v()}),null!=o.className&&(c.className+=\" \"+o.className),{modalBox:c,overlay:d,wrapper:s,buttons:i,content:e,close:v}}function n(e){void 0===e&&(e=!1);for(var o=0;l.length>o;){var n=l[o](0,e);n||o++}}function a(e,o){e.className=e.className.replace(new RegExp(\"(^|\\\\s)\"+o+\"(\\\\s|\\\\b)\",\"g\"),\"$1\")}!function(e){e[e.OK=1]=\"OK\",e[e.APPLY=2]=\"APPLY\",e[e.YES=4]=\"YES\",e[e.NO=8]=\"NO\",e[e.CANCEL=16]=\"CANCEL\"}(e.BUTTON||(e.BUTTON={}));var t=e.BUTTON,l=[];e.open=o,e.close=n}(o=e.ModalBox||(e.ModalBox={}))}(Coveo||(Coveo={}));\n\t\n\t/*** EXPORTS FROM exports-loader ***/\n\tmodule.exports = Coveo.ModalBox;\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e,n){var s=this;this.expression=e,this.input=n,_.isString(t)?this.value=t:_.isArray(t)&&(this.subResults=t,_.forEach(this.subResults,function(t){t.parent=s}))}return e.prototype.isSuccess=function(){return null!=this.value||null!=this.subResults&&_.all(this.subResults,function(t){return t.isSuccess()})},e.prototype.path=function(t){var e=null!=this.parent&&this.parent!=t?this.parent.path(t):[];return e.push(this),e},e.prototype.findParent=function(t){for(var e=this,n=_.isString(t)?function(e){return t==e.expression.id}:t;null!=e&&!n(e);)e=e.parent;return e},e.prototype.find=function(t){var e=_.isString(t)?function(e){return t==e.expression.id}:t;if(e(this))return this;if(this.subResults)for(var n=0;n<this.subResults.length;n++){var s=this.subResults[n].find(e);if(s)return s}return null},e.prototype.findAll=function(t){var e=[],n=_.isString(t)?function(e){return t==e.expression.id}:t;return n(this)&&e.push(this),this.subResults&&(e=_.reduce(this.subResults,function(t,e){return t.concat(e.findAll(n))},e)),e},e.prototype.resultAt=function(t,e){if(t<0||t>this.getLength())return[];if(null!=e){if(_.isString(e)){if(e==this.expression.id)return[this]}else if(e(this))return[this]}else{var n=null==this.value&&null==this.subResults?this.input:this.value;if(null!=n)return[this]}if(null!=this.subResults){for(var s=[],i=0;i<this.subResults.length;i++){var o=this.subResults[i];if(s=s.concat(o.resultAt(t,e)),t-=o.getLength(),t<0)break}return s}return[]},e.prototype.getExpect=function(){return null==this.value&&null==this.subResults?[this]:null!=this.subResults?_.reduce(this.subResults,function(t,e){return t.concat(e.getExpect())},[]):[]},e.prototype.getBestExpect=function(){var t=this.getExpect(),e=_.groupBy(t,function(t){return t.input}),n=_.last(_.keys(e).sort(function(t,e){return e.length-t.length})),s=e[n],e=_.groupBy(s,function(t){return t.expression.id});return _.map(e,function(t){return _.chain(t).map(function(t){return{path:t.path().length,result:t}}).sortBy(\"path\").pluck(\"result\").first().value()})},e.prototype.getHumanReadableExpect=function(){var t=this.getBestExpect(),e=t.length>0?_.last(t).input:\"\";return\"Expected \"+_.map(t,function(t){return t.getHumanReadable()}).join(\" or \")+\" but \"+(e.length>0?JSON.stringify(e[0]):\"end of input\")+\" found.\"},e.prototype.before=function(){if(null==this.parent)return\"\";var t=_.indexOf(this.parent.subResults,this);return this.parent.before()+_.chain(this.parent.subResults).first(t).map(function(t){return t.toString()}).join(\"\").value()},e.prototype.after=function(){if(null==this.parent)return\"\";var t=_.indexOf(this.parent.subResults,this);return _.chain(this.parent.subResults).last(this.parent.subResults.length-t-1).map(function(t){return t.toString()}).join(\"\").value()+this.parent.after()},e.prototype.getLength=function(){return null!=this.value?this.value.length:null!=this.subResults?_.reduce(this.subResults,function(t,e){return t+e.getLength()},0):this.input.length},e.prototype.toHtmlElement=function(){var t=document.createElement(\"span\"),e=null!=this.expression?this.expression.id:null;if(null!=e){var n=document.createAttribute(\"data-id\");n.value=e,t.setAttributeNode(n)}var s=document.createAttribute(\"data-success\");if(s.value=this.isSuccess().toString(),t.setAttributeNode(s),null!=this.value){t.appendChild(document.createTextNode(this.value));var i=document.createAttribute(\"data-value\");i.value=this.value,t.setAttributeNode(i)}else if(null!=this.subResults)_.each(this.subResults,function(e){t.appendChild(e.toHtmlElement())});else{t.appendChild(document.createTextNode(this.input));var o=document.createAttribute(\"data-input\");o.value=this.input,t.setAttributeNode(o),t.className=\"magic-box-error\"+(this.input.length>0?\"\":\" magic-box-error-empty\")}return t.result=this,t},e.prototype.clean=function(t){if(null!=t||!this.isSuccess()){t=t||_.last(this.getBestExpect()).path(this);var n=_.first(t);if(null!=n){var s=_.indexOf(this.subResults,n),i=s==-1?[]:_.map(_.first(this.subResults,s),function(t){return t.clean()});return i.push(n.clean(_.rest(t))),new e(i,this.expression,this.input)}return new e(null,this.expression,this.input)}return null!=this.value?new e(this.value,this.expression,this.input):null!=this.subResults?new e(_.map(this.subResults,function(t){return t.clean()}),this.expression,this.input):void 0},e.prototype.clone=function(){return null!=this.value?new e(this.value,this.expression,this.input):null!=this.subResults?new e(_.map(this.subResults,function(t){return t.clone()}),this.expression,this.input):new e(null,this.expression,this.input)},e.prototype.toString=function(){return null!=this.value?this.value:null!=this.subResults?_.map(this.subResults,function(t){return t.toString()}).join(\"\"):this.input},e.prototype.getHumanReadable=function(){return this.expression instanceof t.ExpressionConstant?JSON.stringify(this.expression.value):this.expression.id},e}();t.Result=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(e){function n(n){e.call(this,[n],t.ExpressionEndOfInput,n.input);var s=new t.Result(null,t.ExpressionEndOfInput,n.input.substr(n.getLength()));s.parent=this,this.subResults.push(s)}return __extends(n,e),n}(t.Result);t.EndOfInputResult=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(e){function n(t,n,s,i){var o=this;e.call(this,null!=t?[t]:null,n,s),this.result=t,this.expression=n,this.input=s,this.failAttempt=i,_.forEach(this.failAttempt,function(t){t.parent=o})}return __extends(n,e),n.prototype.getExpect=function(){var t=this,e=[];return null!=this.result&&(e=this.result.getExpect()),e=_.reduce(this.failAttempt,function(t,e){return t.concat(e.getExpect())},e),e.length>0&&_.all(e,function(e){return e.input==t.input})?[this]:e},n.prototype.clean=function(e){if(null!=e||!this.isSuccess()){e=_.rest(e||_.last(this.getBestExpect()).path(this));var n=_.first(e);return null==n?new t.Result(null,this.expression,this.input):new t.Result([n.clean(_.rest(e))],this.expression,this.input)}return new t.Result(_.map(this.result.subResults,function(t){return t.clean()}),this.expression,this.input)},n}(t.Result);t.OptionResult=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(e){function n(t,n,s,i){e.call(this,t,n,s),this.results=t,this.expression=n,this.input=s,_.last(t)!=i&&(this.failAttempt=i,null!=this.failAttempt&&(this.failAttempt.parent=this))}return __extends(n,e),n.prototype.getExpect=function(){var t=e.prototype.getExpect.call(this);return null!=this.failAttempt?t.concat(this.failAttempt.getExpect()):t},n.prototype.clean=function(n){if(null!=this.failAttempt&&(null!=n||!this.isSuccess())){n=n||_.last(this.getBestExpect()).path(this);var s=_.first(n);if(null!=s&&s==this.failAttempt){var i=_.last(this.subResults),o=_.map(null!=i&&i.isSuccess()?this.subResults:_.initial(this.subResults),function(t){return t.clean()});return o.push(s.clean(_.rest(n))),new t.Result(o,this.expression,this.input)}}return e.prototype.clean.call(this,n)},n}(t.Result);t.RefResult=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e){this.value=t,this.id=e}return e.prototype.parse=function(e,n){var s=0==e.indexOf(this.value),i=new t.Result(s?this.value:null,this,e);return s&&n&&e.length>this.value.length?new t.EndOfInputResult(i):i},e.prototype.toString=function(){return this.value},e}();t.ExpressionConstant=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){t.ExpressionEndOfInput={id:\"end of input\",parse:null}}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function t(t,e,n){this.func=t,this.id=e,this.grammar=n}return t.prototype.parse=function(t,e){return this.func(t,e,this)},t.prototype.toString=function(){return this.id},t}();t.ExpressionFunction=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e){if(this.parts=t,this.id=e,0==t.length)throw JSON.stringify(e)+\" should have at least 1 parts\"}return e.prototype.parse=function(e,n){for(var s,i=[],o=e,r=0;r<this.parts.length;r++){var u=this.parts[r];if(s=u.parse(o,n&&r==this.parts.length-1),i.push(s),!s.isSuccess())break;o=o.substr(s.getLength())}return new t.Result(i,this,e)},e.prototype.toString=function(){return this.id},e}();t.ExpressionList=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e){this.parts=t,this.id=e}return e.prototype.parse=function(e,n){for(var s=[],i=0;i<this.parts.length;i++){var o=this.parts[i].parse(e,n);if(o.isSuccess())return new t.OptionResult(o,this,e,s);s.push(o)}return new t.OptionResult(null,this,e,s)},e.prototype.toString=function(){return this.id},e}();t.ExpressionOptions=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e,n,s){this.ref=t,this.occurrence=e,this.id=n,this.grammar=s}return e.prototype.parse=function(t,e){var n=this.grammar.getExpression(this.ref);if(null==n)throw\"Expression not found:\"+this.ref;return\"?\"==this.occurrence||null==this.occurrence?this.parseOnce(t,e,n):this.parseMany(t,e,n)},e.prototype.parseOnce=function(e,n,s){var i=s.parse(e,n),o=i.isSuccess();return o||\"?\"!=this.occurrence?new t.RefResult([i],this,e,o?null:i):n?0==e.length?new t.RefResult([],this,e,i):_.all(i.getBestExpect(),function(e){return e.expression==t.ExpressionEndOfInput})?new t.RefResult([new t.Result(null,t.ExpressionEndOfInput,e)],this,e,i):i:new t.RefResult([],this,e,null)},e.prototype.parseMany=function(e,n,s){var i,o,r=[],u=e;do i=s.parse(u,!1),o=i.isSuccess(),o&&(r.push(i),u=u.substr(i.getLength()));while(o&&i.input!=u);var a=_.isNumber(this.occurrence)?this.occurrence:\"+\"==this.occurrence?1:0;if(r.length<a)r.push(i);else if(n)if(r.length>0){var l=_.last(r);i=s.parse(l.input,!0),i.isSuccess()?r[r.length-1]=i:(r.push(new t.Result(null,t.ExpressionEndOfInput,l.input.substr(l.getLength()))),i=s.parse(l.input.substr(l.getLength()),!0))}else if(0!=e.length){var c=new t.Result(null,t.ExpressionEndOfInput,e);return new t.RefResult([c],this,e,i)}return new t.RefResult(r,this,e,i)},e.prototype.toString=function(){return this.id},e}();t.ExpressionRef=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e,n){this.value=t,this.id=e}return e.prototype.parse=function(e,n){var s=e.match(this.value);null!=s&&0!=s.index&&(s=null);var i=new t.Result(null!=s?s[0]:null,this,e);return i.isSuccess()&&n&&e.length>i.value.length?new t.EndOfInputResult(i):i},e.prototype.toString=function(){return this.id},e}();t.ExpressionRegExp=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(e,n){void 0===n&&(n={}),this.expressions={},this.start=new t.ExpressionRef(e,null,\"start\",this),this.addExpressions(n)}return e.prototype.addExpressions=function(t){var e=this;_.each(t,function(t,n){e.addExpression(n,t)})},e.prototype.addExpression=function(t,n){if(t in this.expressions)throw\"Grammar already contain the id:\"+t;this.expressions[t]=e.buildExpression(n,t,this)},e.prototype.getExpression=function(t){return this.expressions[t]},e.prototype.parse=function(t){return this.start.parse(t,!0)},e.buildExpression=function(e,n,s){var i=typeof e;if(\"undefined\"==i)throw\"Invalid Expression: \"+e;if(_.isString(e))return this.buildStringExpression(e,n,s);if(_.isArray(e))return new t.ExpressionOptions(_.map(e,function(e,i){return new t.ExpressionRef(e,null,n+\"_\"+i,s)}),n);if(_.isRegExp(e))return new t.ExpressionRegExp(e,n,s);if(_.isFunction(e))return new t.ExpressionFunction(e,n,s);throw\"Invalid Expression: \"+e},e.buildStringExpression=function(n,s,i){var o=e.stringMatch(n,e.spliter),r=_.map(o,function(e,n){if(e[1]){var o=e[1],r=e[3]?Number(e[3]):e[2]||null;return new t.ExpressionRef(o,r,s+\"_\"+n,i)}return new t.ExpressionConstant(e[4],s+\"_\"+n)});if(1==r.length){var u=r[0];return u.id=s,u}return new t.ExpressionList(r,s)},e.stringMatch=function(t,e){for(var n,s=[],i=new RegExp(e.source,\"g\");null!==(n=i.exec(t));)s.push(n);return s},e.spliter=/\\[(\\w+)(\\*|\\+|\\?|\\{([1-9][0-9]*)\\})?\\]|(.[^\\[]*)/,e}();t.Grammar=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e,n){this.element=t,this.onchange=e,this.magicBox=n,this.hasFocus=!1,this.underlay=document.createElement(\"div\"),this.underlay.className=\"magic-box-underlay\",t.appendChild(this.underlay),this.highlightContainer=document.createElement(\"span\"),this.highlightContainer.className=\"magic-box-highlight-container\",this.underlay.appendChild(this.highlightContainer),this.ghostTextContainer=document.createElement(\"span\"),this.ghostTextContainer.className=\"magic-box-ghost-text\",this.underlay.appendChild(this.ghostTextContainer),this.input=document.createElement(\"input\"),this.input.spellcheck=!1,this.input.setAttribute(\"form\",\"coveo-dummy-form\"),t.appendChild(this.input),this.setupHandler()}return e.prototype.updateInput=function(){this.input.value!=this.result.input&&(this.input.value=this.result.input)},e.prototype.updateHighlight=function(){this.highlightContainer.innerHTML=\"\",this.highlightContainer.appendChild(this.result.toHtmlElement())},e.prototype.updateWordCompletion=function(){this.ghostTextContainer.innerHTML=\"\",null!=this.wordCompletion&&this.ghostTextContainer.appendChild(document.createTextNode(this.wordCompletion.substr(this.result.input.length)))},e.prototype.updateScroll=function(e){var n=this;void 0===e&&(e=!0);var s=function(){n.underlay.clientWidth<n.underlay.scrollWidth&&(n.underlay.style.visibility=\"hidden\",n.underlay.scrollLeft=n.input.scrollLeft,n.underlay.scrollTop=n.input.scrollTop,n.underlay.style.visibility=\"visible\"),n.updateScrollDefer=null,n.hasFocus&&n.updateScroll()};e?null==this.updateScrollDefer&&(this.updateScrollDefer=t.requestAnimationFrame(s)):s()},e.prototype.setResult=function(t,e){this.result=t,this.updateInput(),this.updateHighlight(),_.isUndefined(e)&&null!=this.wordCompletion&&0==this.wordCompletion.indexOf(this.result.input)?this.updateWordCompletion():this.setWordCompletion(e),this.updateScroll()},e.prototype.setWordCompletion=function(t){null!=t&&0!=t.toLowerCase().indexOf(this.result.input.toLowerCase())&&(t=null),this.wordCompletion=t,this.updateWordCompletion(),this.updateScroll()},e.prototype.setCursor=function(t){if(this.input.focus(),this.input.createTextRange){var e=this.input.createTextRange();e.move(\"character\",t),e.select()}else null!=this.input.selectionStart&&(this.input.focus(),this.input.setSelectionRange(t,t))},e.prototype.getCursor=function(){return this.input.selectionStart},e.prototype.setupHandler=function(){var t=this;this.input.onblur=function(){t.hasFocus=!1,setTimeout(function(){t.hasFocus||t.onblur&&t.onblur()},300),t.updateScroll()},this.input.onfocus=function(){t.hasFocus||(t.hasFocus=!0,t.updateScroll(),t.onfocus&&t.onfocus())},this.input.onkeydown=function(e){t.keydown(e)},this.input.onkeyup=function(e){t.keyup(e)},this.input.onclick=function(){t.onchangecursor()},this.input.select=function(){t.onchangecursor()},this.input.oncut=function(){setTimeout(function(){t.onInputChange()})},this.input.onpaste=function(){setTimeout(function(){t.onInputChange()})}},e.prototype.focus=function(){var t=this;this.hasFocus=!0,setTimeout(function(){t.input.focus()})},e.prototype.blur=function(){this.hasFocus&&this.input.blur()},e.prototype.keydown=function(e){var n=this;switch(e.keyCode||e.which){case 9:this.magicBox.hasSuggestions()&&e.preventDefault();break;default:e.stopPropagation(),null==this.onkeydown||this.onkeydown(e.keyCode||e.which)?t.requestAnimationFrame(function(){n.onInputChange()}):e.preventDefault()}},e.prototype.keyup=function(t){switch(t.keyCode||t.which){case 9:this.tabPress();break;case 37:case 39:this.onchangecursor();break;default:null==this.onkeydown||this.onkeyup(t.keyCode||t.which)?this.onInputChange():t.preventDefault()}},e.prototype.tabPress=function(){null!=this.wordCompletion&&(this.input.value=this.wordCompletion,this.ontabpress&&this.ontabpress(),this.onchange(this.wordCompletion,!0))},e.prototype.onInputChange=function(){this.result.input!=this.input.value&&this.onchange(this.input.value,!1)},e.prototype.getValue=function(){return this.input.value},e.prototype.getWordCompletion=function(){return this.wordCompletion},e}();t.InputManager=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(e,n){var s=this;this.element=e,this.options=_.defaults(n,{selectableClass:\"magic-box-suggestion\",selectedClass:\"magic-box-selected\"}),void 0==this.options.timeout&&(this.options.timeout=500),this.hasSuggestions=!1,this.element.onmouseover=function(e){if(t.$$(e.target).hasClass(s.options.selectableClass)){for(var n=s.element.getElementsByClassName(s.options.selectedClass),i=0;i<n.length;i++){var o=n.item(i);t.$$(o).removeClass(s.options.selectedClass)}t.$$(e.target).addClass(s.options.selectedClass)}},this.element.onmouseout=function(e){t.$$(e.target).hasClass(s.options.selectableClass)&&t.$$(e.target).removeClass(s.options.selectedClass)}}return e.prototype.moveDown=function(){var e=this.element.getElementsByClassName(this.options.selectedClass).item(0),n=this.element.getElementsByClassName(this.options.selectableClass),s=-1;if(null!=e){t.$$(e).removeClass(this.options.selectedClass);for(var i=0;i<n.length;i++)if(e==n.item(i)){s=i;break}s=s==-1?0:s+1}else s=0;return e=n.item(s),null!=e&&t.$$(e).addClass(this.options.selectedClass),e&&e.suggestion},e.prototype.moveUp=function(){var e=this.element.getElementsByClassName(this.options.selectedClass).item(0),n=this.element.getElementsByClassName(this.options.selectableClass),s=-1;if(null!=e){t.$$(e).removeClass(this.options.selectedClass);for(var i=0;i<n.length;i++)if(e==n.item(i)){s=i;break}s=s==-1?n.length-1:s-1}else s=n.length-1;return e=n.item(s),null!=e&&t.$$(e).addClass(this.options.selectedClass),e&&e.suggestion},e.prototype.select=function(){var e=this.element.getElementsByClassName(this.options.selectedClass).item(0);return null!=e&&t.$$(e).trigger(\"keyboardSelect\"),e},e.prototype.mergeSuggestions=function(t,e){var n,s=this,i=[];t=_.compact(t);var o=this.pendingSuggestion=new Promise(function(e,r){_.each(t,function(t){var e=!1;setTimeout(function(){e=!0},s.options.timeout),t.then(function(t){!e&&t&&(i=i.concat(t))})});var u=function(){n&&clearTimeout(n),0==i.length?e([]):o==s.pendingSuggestion||null==s.pendingSuggestion?e(i.sort(function(t,e){return e.index-t.index})):r(\"new request queued\")};0==t.length&&u(),void 0==t&&u(),n=setTimeout(function(){u()},s.options.timeout),Promise.all(t).then(function(){return u()})});o.then(function(t){return e&&e(t),s.updateSuggestions(t),t})[\"catch\"](function(){return null})},e.prototype.updateSuggestions=function(e){var n=this;this.element.innerHTML=\"\",this.element.className=\"magic-box-suggestions\",_.each(e,function(e){var s=e.dom;if(s){t.$$(s).removeClass(n.options.selectedClass);var i=t.$$(s).find(\".\"+n.options.selectableClass);t.$$(i).removeClass(n.options.selectedClass)}else{if(s=document.createElement(\"div\"),s.className=\"magic-box-suggestion\",null!=e.html)s.innerHTML=e.html;else if(null!=e.text)s.appendChild(document.createTextNode(e.text));else if(null!=e.separator){s.className=\"magic-box-suggestion-seperator\";var o=document.createElement(\"div\");o.className=\"magic-box-suggestion-seperator-label\",o.appendChild(document.createTextNode(e.separator)),s.appendChild(o)}t.$$(s).on(\"click\",function(){e.onSelect()}),t.$$(s).on(\"keyboardSelect\",function(){e.onSelect()}),t.$$(s).addClass(n.options.selectableClass)}s.suggestion=e,n.element.appendChild(s)}),e.length>0?(t.$$(this.element).addClass(\"magic-box-hasSuggestion\"),this.hasSuggestions=!0):(t.$$(this.element).removeClass(\"magic-box-hasSuggestion\"),this.hasSuggestions=!1)},e}();t.SuggestionsManager=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(e){function n(t){return t.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\")}function s(t,e,s,o,r){if(void 0===s&&(s=!1),void 0===o&&(o=\"magic-box-hightlight\"),void 0===r&&(r=\"\"),0==e.length)return t;var u=n(e),a=\"(\"+u+\")|(.*?(?=\"+u+\")|.+)\",l=new RegExp(a,s?\"gi\":\"g\");return t.replace(l,function(t,e,n){return i(null!=e?o:r,t)})}var i=function(t,e){return'<span class=\"'+t+'\">'+_.escape(e)+\"</span>\"};e.highlightText=s;var o=function(){function e(t){this.el=t}return e.prototype.text=function(t){return t?void(void 0!=this.el.innerText?this.el.innerText=t:void 0!=this.el.textContent&&(this.el.textContent=t)):this.el.innerText||this.el.textContent},e.prototype.nodeListToArray=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t.item(e);return n},e.prototype.empty=function(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild)},e.prototype.show=function(){this.el.style.display=\"visible\"},e.prototype.hide=function(){this.el.style.display=\"none\"},e.prototype.toggle=function(t){void 0===t?\"visible\"==this.el.style.display?this.hide():this.show():t?this.show():this.hide()},e.prototype.find=function(t){return this.el.querySelector(t)},e.prototype.is=function(t){return this.el.tagName.toLowerCase()==t.toLowerCase()||(!(\".\"!=t[0]||!this.hasClass(t.substr(1)))||\"#\"==t[0]&&this.el.getAttribute(\"id\")==t.substr(1))},e.prototype.closest=function(e){for(var n=this.el,s=!1;!s&&(t.$$(n).hasClass(e)&&(s=!0),\"body\"!=n.tagName.toLowerCase())&&null!=n.parentElement;)s||(n=n.parentElement);if(s)return n},e.prototype.findAll=function(t){return this.nodeListToArray(this.el.querySelectorAll(t))},e.prototype.findClass=function(t){return\"getElementsByClassName\"in this.el?this.nodeListToArray(this.el.getElementsByClassName(t)):this.nodeListToArray(this.el.querySelectorAll(\".\"+t))},e.prototype.findId=function(t){return document.getElementById(t)},e.prototype.addClass=function(t){this.hasClass(t)||(this.el.className?this.el.className+=\" \"+t:this.el.className=t)},e.prototype.removeClass=function(t){this.el.className=this.el.className.replace(new RegExp(\"(^|\\\\s)\"+t+\"(\\\\s|\\\\b)\",\"g\"),\"$1\")},e.prototype.toggleClass=function(t,e){e?this.addClass(t):this.removeClass(t)},e.prototype.getClass=function(){return this.el.className.match(e.CLASS_NAME_REGEX)||[]},e.prototype.hasClass=function(t){return _.contains(this.getClass(),t)},e.prototype.detach=function(){this.el.parentElement&&this.el.parentElement.removeChild(this.el)},e.prototype.on=function(t,n){var s=this;if(_.isArray(t))_.each(t,function(t){s.on(t,n)});else{var i=this.getJQuery();if(i)i(this.el).on(t,n);else if(this.el.addEventListener){var o=function(t){n(t,t.detail)};e.handlers.push({eventHandle:n,fn:o}),this.el.addEventListener(t,o,!1)}else this.el.on&&this.el.on(\"on\"+t,n)}},e.prototype.one=function(t,e){var n=this;if(_.isArray(t))_.each(t,function(t){n.one(t,e)});else{var s=function(i){return n.off(t,s),e(i)};this.on(t,s)}},e.prototype.off=function(t,n){var s=this;if(_.isArray(t))_.each(t,function(t){s.off(t,n)});else{var i=this.getJQuery();if(i)i(this.el).off(t,n);else if(this.el.removeEventListener){var o=0,r=_.find(e.handlers,function(t,e){if(t.eventHandle==n)return o=e,!0});r&&(this.el.removeEventListener(t,r.fn,!1),e.handlers.splice(o,1))}else this.el.off&&this.el.off(\"on\"+t,n)}},e.prototype.trigger=function(t,e){var n=this.getJQuery();if(n)n(this.el).trigger(t,e);else if(void 0!==CustomEvent){var s=new CustomEvent(t,{detail:e,bubbles:!0});this.el.dispatchEvent(s)}},e.prototype.isEmpty=function(){return e.ONLY_WHITE_SPACE_REGEX.test(this.el.innerHTML)},e.prototype.isDescendant=function(t){for(var e=this.el.parentNode;null!=e;){if(e==t)return!0;e=e.parentNode}return!1},e.prototype.getJQuery=function(){return void 0!=window.jQuery&&window.jQuery},e.CLASS_NAME_REGEX=/-?[_a-zA-Z]+[_a-zA-Z0-9-]*/g,e.ONLY_WHITE_SPACE_REGEX=/^\\s*$/,e.handlers=[],e}();e.Dom=o}(e=t.Utils||(t.Utils={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){t.$$=function(e){return new t.Utils.Dom(e)}}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(e){function n(t,e,n,s){_.each(s.expressions,function(e){_.contains(t,e)||t.push(e)}),_.each(s.basicExpressions,function(t){_.contains(e,t)||e.push(t)}),_.each(s.grammars,function(t,e){if(e in n){if(!_.isArray(n[e])||!_.isArray(t))throw _.each(t,function(t){n[e].push(t)}),\"Can not merge \"+e+\"(\"+new String(t)+\" => \"+new String(n[e])+\")\";_.each(t,function(t){n[e].push(t)})}else n[e]=t})}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var s=[],i=[],o={Start:[\"Expressions\",\"Empty\"],Expressions:\"[OptionalSpaces][Expression][ExpressionsList*][OptionalSpaces]\",ExpressionsList:\"[Spaces][Expression]\",Expression:s,BasicExpression:i,OptionalSpaces:/ */,Spaces:/ +/,Empty:/(?!.)/},r=0;r<t.length;r++)n(s,i,o,t[r]),_.each(t[r].include,function(e){_.contains(t,e)||t.push(e)});return s.push(\"BasicExpression\"),{start:\"Start\",expressions:o}}function i(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=s.apply(this,e);return new t.Grammar(i.start,i.expressions)}e.Expressions=s,e.ExpressionsGrammar=i}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(e){e.notWordStart=\" ()[],$@'\\\"\",e.notInWord=\" ()[],:\",e.Basic={basicExpressions:[\"Word\",\"DoubleQuoted\"],grammars:{DoubleQuoted:'\"[NotDoubleQuote]\"',NotDoubleQuote:/[^\"]*/,SingleQuoted:\"'[NotSingleQuote]'\",NotSingleQuote:/[^']*/,Number:/[0-9]+/,Word:function(n,s,i){var o=new RegExp(\"[^\"+e.notWordStart.replace(/(.)/g,\"\\\\$1\")+\"][^\"+e.notInWord.replace(/(.)/g,\"\\\\$1\")+\"]*\"),r=n.match(o);null!=r&&0!=r.index&&(r=null);var u=new t.Result(null!=r?r[0]:null,i,n);return u.isSuccess()&&s&&n.length>u.value.length?new t.EndOfInputResult(u):u}}}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.SubExpression={basicExpressions:[\"SubExpression\"],grammars:{SubExpression:\"([Expressions])\"}}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.Date={grammars:{Date:\"[DateYear]/[DateMonth]/[DateDay]\",DateYear:/([0-9]{4})/,DateMonth:/(1[0-2]|0?[1-9])/,DateDay:/([1-2][0-9]|3[0-1]|0?[1-9])/,DateRange:\"[Date][Spaces?]..[Spaces?][Date]\",DateRelative:[\"DateRelativeNegative\",\"DateRelativeTerm\"],DateRelativeTerm:/now|today|yesterday/,DateRelativeNegative:\"[DateRelativeTerm][DateRelativeNegativeRef]\",DateRelativeNegativeRef:/([\\-\\+][0-9]+(s|m|h|d|mo|y))/},include:[t.Basic]}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.Field={basicExpressions:[\"FieldSimpleQuery\",\"FieldQuery\",\"Field\"],grammars:{FieldQuery:\"[Field][OptionalSpaces][FieldQueryOperation]\",FieldQueryOperation:[\"FieldQueryValue\",\"FieldQueryNumeric\"],FieldQueryValue:\"[FieldOperator][OptionalSpaces][FieldValue]\",FieldQueryNumeric:\"[FieldOperatorNumeric][OptionalSpaces][FieldValueNumeric]\",FieldSimpleQuery:\"[FieldName]:[OptionalSpaces][FieldValue]\",Field:\"@[FieldName]\",FieldName:/[a-zA-Z][a-zA-Z0-9\\.\\_]*/,FieldOperator:/==|=|<>/,FieldOperatorNumeric:/<=|>=|<|>/,FieldValue:[\"DateRange\",\"NumberRange\",\"DateRelative\",\"Date\",\"Number\",\"FieldValueList\",\"FieldValueString\"],FieldValueNumeric:[\"DateRelative\",\"Date\",\"Number\"],FieldValueString:[\"DoubleQuoted\",\"FieldValueNotQuoted\"],FieldValueList:\"([FieldValueString][FieldValueStringList*])\",FieldValueStringList:\"[FieldValueSeparator][FieldValueString]\",FieldValueSeparator:/ *, */,FieldValueNotQuoted:/[^ \\(\\),]+/,NumberRange:\"[Number][Spaces?]..[Spaces?][Number]\"},include:[t.Date,t.Basic]}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.QueryExtension={basicExpressions:[\"QueryExtension\"],grammars:{QueryExtension:\"$[QueryExtensionName]([QueryExtensionArguments])\",QueryExtensionName:/\\w+/,QueryExtensionArguments:\"[QueryExtensionArgumentList*][QueryExtensionArgument]\",QueryExtensionArgumentList:\"[QueryExtensionArgument][Spaces?],[Spaces?]\",QueryExtensionArgument:\"[QueryExtensionArgumentName]:[Spaces?][QueryExtensionArgumentValue]\",QueryExtensionArgumentName:/\\w+/,QueryExtensionArgumentValue:[\"SingleQuoted\",\"Expressions\"]},include:[t.Basic]}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.NestedQuery={basicExpressions:[\"NestedQuery\"],grammars:{NestedQuery:\"[[NestedField][OptionalSpaces][Expressions]]\",NestedField:\"[[Field]]\",FieldValue:[\"NestedQuery\"]},include:[t.Field]}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.Complete={include:[t.NestedQuery,t.QueryExtension,t.SubExpression,t.Field,t.Basic]}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){function e(t,e,n){return new s(t,e,n)}function n(t){return\"requestAnimationFrame\"in window?window.requestAnimationFrame(t):setTimeout(t)}var s=function(){function e(e,n,s){var i=this;void 0===s&&(s={}),this.element=e,this.grammar=n,this.options=s,this.lastSuggestions=[],_.isUndefined(this.options.inline)&&(this.options.inline=!1),t.$$(e).addClass(\"magic-box\"),this.options.inline&&t.$$(e).addClass(\"magic-box-inline\"),this.result=this.grammar.parse(\"\"),this.displayedResult=this.result.clean(),this.clearDom=document.createElement(\"div\"),this.clearDom.className=\"magic-box-clear\",this.element.appendChild(this.clearDom);var o=document.createElement(\"div\");o.className=\"magic-box-icon\",this.clearDom.appendChild(o);var r=document.createElement(\"div\");r.className=\"magic-box-input\",e.appendChild(r),this.inputManager=new t.InputManager(r,function(t,e){e?(i.setText(t),i.onselect&&i.onselect(i.getFirstSuggestionText())):(i.setText(t),i.showSuggestion(),i.onchange&&i.onchange())},this),this.inputManager.ontabpress=function(){i.ontabpress&&i.ontabpress()},this.inputManager.setResult(this.displayedResult);var u=document.createElement(\"div\");u.className=\"magic-box-suggestions\",this.element.appendChild(u),this.suggestionsManager=new t.SuggestionsManager(u,{selectableClass:this.options.selectableSuggestionClass,selectedClass:this.options.selectedSuggestionClass,timeout:this.options.suggestionTimeout}),this.setupHandler()}return e.prototype.getResult=function(){return this.result},e.prototype.getDisplayedResult=function(){return this.displayedResult},e.prototype.setText=function(e){t.$$(this.element).toggleClass(\"magic-box-notEmpty\",e.length>0),this.result=this.grammar.parse(e),this.displayedResult=this.result.clean(),this.inputManager.setResult(this.displayedResult)},e.prototype.setCursor=function(t){this.inputManager.setCursor(t)},e.prototype.getCursor=function(){return this.inputManager.getCursor()},e.prototype.resultAtCursor=function(t){return this.displayedResult.resultAt(this.getCursor(),t)},e.prototype.setupHandler=function(){var e=this;this.inputManager.onblur=function(){t.$$(e.element).removeClass(\"magic-box-hasFocus\"),e.onblur&&e.onblur(),e.options.inline||e.clearSuggestion()},this.inputManager.onfocus=function(){t.$$(e.element).addClass(\"magic-box-hasFocus\"),e.showSuggestion(),e.onfocus&&e.onfocus();\n\t},this.inputManager.onkeydown=function(t){if(38==t||40==t)return!1;if(13==t){var n=e.suggestionsManager.select();return null==n&&e.onsubmit&&e.onsubmit(),!1}return 27==t&&e.clearSuggestion(),!0},this.inputManager.onchangecursor=function(){e.showSuggestion()},this.inputManager.onkeyup=function(t){if(38==t)e.onmove&&e.onmove(),e.focusOnSuggestion(e.suggestionsManager.moveUp()),e.onchange&&e.onchange();else{if(40!=t)return!0;e.onmove&&e.onmove(),e.focusOnSuggestion(e.suggestionsManager.moveDown()),e.onchange&&e.onchange()}return!1},this.clearDom.onclick=function(){e.clear()}},e.prototype.showSuggestion=function(){var t=this;this.suggestionsManager.mergeSuggestions(null!=this.getSuggestions?this.getSuggestions():[],function(e){t.updateSuggestion(e)})},e.prototype.updateSuggestion=function(t){var e=this;this.lastSuggestions=t;var n=this.getFirstSuggestionText();this.inputManager.setWordCompletion(n&&n.text),this.onsuggestions&&this.onsuggestions(t),_.each(t,function(t){null==t.onSelect&&null!=t.text&&(t.onSelect=function(){e.setText(t.text),e.onselect&&e.onselect(t)})})},e.prototype.focus=function(){t.$$(this.element).addClass(\"magic-box-hasFocus\"),this.inputManager.focus()},e.prototype.blur=function(){this.inputManager.blur()},e.prototype.clearSuggestion=function(){var t=this;this.suggestionsManager.mergeSuggestions([],function(e){t.updateSuggestion(e)}),this.inputManager.setWordCompletion(null)},e.prototype.focusOnSuggestion=function(t){null==t||null==t.text?(t=this.getFirstSuggestionText(),this.inputManager.setResult(this.displayedResult,t&&t.text)):this.inputManager.setResult(this.grammar.parse(t.text).clean(),t.text)},e.prototype.getFirstSuggestionText=function(){return _.find(this.lastSuggestions,function(t){return null!=t.text})},e.prototype.getText=function(){return this.inputManager.getValue()},e.prototype.getWordCompletion=function(){return this.inputManager.getWordCompletion()},e.prototype.clear=function(){this.setText(\"\"),this.showSuggestion(),this.focus(),this.onclear&&this.onclear()},e.prototype.hasSuggestions=function(){return this.suggestionsManager.hasSuggestions},e}();t.Instance=s,t.create=e,t.requestAnimationFrame=n}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));\n\t\n\t/*** EXPORTS FROM exports-loader ***/\n\tmodule.exports = Coveo.MagicBox;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t!function(){\"use strict\";var t,e,n=\"undefined\",r=\"string\",i=self.navigator,o=String,a=Object.prototype.hasOwnProperty,l={},u={},s=!1,f=!0,c=/^\\s*application\\/(?:vnd\\.oftn\\.|x-)?l10n\\+json\\s*(?:$|;)/i,p=\"locale\",g=\"defaultLocale\",h=\"toLocaleString\",y=\"toLowerCase\",v=Array.prototype.indexOf||function(t){for(var e=this.length,n=0;e>n;n++)if(n in this&&this[n]===t)return n;return-1},d=function(e){var n=new t;return n.open(\"GET\",e,s),n.send(null),200!==n.status?(setTimeout(function(){var t=new Error(\"Unable to load localization data: \"+e);throw t.name=\"Localization Error\",t},0),{}):JSON.parse(n.responseText)},m=o[h]=function(t){if(arguments.length>0&&\"number\"!=typeof t)if(typeof t===r)m(d(t));else if(t===s)u={};else{var e,n,i;for(e in t)if(a.call(t,e)){if(n=t[e],e=e[y](),e in u&&n!==s||(u[e]={}),n===s)continue;if(typeof n===r){if(0!==o[p][y]().indexOf(e)){e in l||(l[e]=[]),l[e].push(n);continue}n=d(n)}for(i in n)a.call(n,i)&&(u[e][i]=n[i])}}return Function.prototype[h].apply(o,arguments)},w=function(t){for(var e,n=l[t],r=0,i=n.length;i>r;r++)e={},e[t]=d(n[r]),m(e);delete l[t]},b=o.prototype[h]=function(){var t,n=e,r=o[n?g:p],i=r[y]().split(\"-\"),a=i.length,c=this.valueOf();e=s;do if(t=i.slice(0,a).join(\"-\"),t in l&&w(t),t in u&&c in u[t])return u[t][c];while(a-->1);return!n&&o[g]?(e=f,b.call(c)):c};if(typeof XMLHttpRequest===n&&typeof ActiveXObject!==n){var L=ActiveXObject;t=function(){try{return new L(\"Msxml2.XMLHTTP.6.0\")}catch(t){}try{return new L(\"Msxml2.XMLHTTP.3.0\")}catch(e){}try{return new L(\"Msxml2.XMLHTTP\")}catch(n){}throw new Error(\"XMLHttpRequest not supported by this browser.\")}}else t=XMLHttpRequest;if(o[g]=o[g]||\"\",o[p]=i&&(i.language||i.userLanguage)||\"\",typeof document!==n)for(var T,M=document.getElementsByTagName(\"link\"),O=M.length;O--;){var X=M[O],x=(X.getAttribute(\"rel\")||\"\")[y]().split(/\\s+/);c.test(X.type)&&(-1!==v.call(x,\"localizations\")?m(X.getAttribute(\"href\")):-1!==v.call(x,\"localization\")&&(T={},T[(X.getAttribute(\"hreflang\")||\"\")[y]()]=X.getAttribute(\"href\"),m(T)))}}();\n\t\n\t/*** EXPORTS FROM exports-loader ***/\n\tmodule.exports = window.String.toLocaleString;\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\texports.Assert = Assert_1.Assert;\n\tvar Cache_1 = __webpack_require__(29);\n\texports.Cache = Cache_1.Cache;\n\tvar Defer_1 = __webpack_require__(30);\n\texports.Defer = Defer_1.Defer;\n\tvar L10N_1 = __webpack_require__(31);\n\texports.L10N = L10N_1.L10N;\n\tvar Logger_1 = __webpack_require__(15);\n\texports.Logger = Logger_1.Logger;\n\tvar Options_1 = __webpack_require__(32);\n\texports.Options = Options_1.Options;\n\tvar Strings_1 = __webpack_require__(33);\n\texports.l = Strings_1.l;\n\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar Cache = (function () {\n\t    function Cache(onEmpty) {\n\t        this.onEmpty = onEmpty;\n\t        this.cache = [];\n\t    }\n\t    Cache.prototype.get = function () {\n\t        if (this.cache.length == 0) {\n\t            return this.onEmpty();\n\t        }\n\t        else {\n\t            return this.cache.pop();\n\t        }\n\t    };\n\t    Cache.prototype.push = function (value) {\n\t        this.cache.push(value);\n\t    };\n\t    return Cache;\n\t}());\n\texports.Cache = Cache;\n\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Defer = (function () {\n\t    function Defer() {\n\t    }\n\t    Defer.defer = function (code) {\n\t        Defer.functions.push(code);\n\t        Defer.arm();\n\t    };\n\t    Defer.flush = function () {\n\t        while (Defer.popOne()) {\n\t        }\n\t    };\n\t    Defer.arm = function () {\n\t        _.defer(function () {\n\t            if (Defer.popOne()) {\n\t                Defer.arm();\n\t            }\n\t        });\n\t    };\n\t    Defer.popOne = function () {\n\t        if (Defer.functions.length > 0) {\n\t            var fun = Defer.functions[0];\n\t            Defer.functions = _.rest(Defer.functions);\n\t            fun();\n\t            return Defer.functions.length > 0;\n\t        }\n\t        else {\n\t            return false;\n\t        }\n\t    };\n\t    Defer.functions = [];\n\t    return Defer;\n\t}());\n\texports.Defer = Defer;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar ExternalModulesShim_1 = __webpack_require__(24);\n\tString.toLocaleString = ExternalModulesShim_1.LocaleString;\n\tvar pluralRegex = /<pl>(((?!<\\/pl>).)*)<\\/pl>/g;\n\tvar singularRegex = /<sn>(((?!<\\/sn>).)*)<\\/sn>/g;\n\texports.L10N = {\n\t    format: function (key) {\n\t        var args = [];\n\t        for (var _i = 1; _i < arguments.length; _i++) {\n\t            args[_i - 1] = arguments[_i];\n\t        }\n\t        var value = key.toLocaleString();\n\t        if (args.length > 0) {\n\t            var last = _.last(args);\n\t            // Last argument is either the count or a boolean forcing plural (true) or singular (false)\n\t            if (_.isBoolean(last) || _.isNumber(last)) {\n\t                args.pop();\n\t                value = exports.L10N.formatPlSn(value, last);\n\t            }\n\t            _.each(args, function (arg, i) { return value = value.replace(\"{\" + i + \"}\", arg); });\n\t        }\n\t        return value;\n\t    },\n\t    formatPlSn: function (value, count) {\n\t        var isPlural = _.isBoolean(count) ? count : count > 1;\n\t        if (isPlural) {\n\t            value = value.replace(pluralRegex, '$1').replace(singularRegex, '');\n\t        }\n\t        else {\n\t            value = value.replace(pluralRegex, '').replace(singularRegex, '$1');\n\t        }\n\t        return value;\n\t    }\n\t};\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Options = (function () {\n\t    function Options() {\n\t    }\n\t    Options.prototype.merge = function (provided) {\n\t        return _.extend({}, this, provided);\n\t    };\n\t    Options.prototype.mergeDeep = function (provided) {\n\t        return _.extend({}, Utils_1.Utils.extendDeep(this, provided));\n\t    };\n\t    return Options;\n\t}());\n\texports.Options = Options;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar L10N_1 = __webpack_require__(31);\n\tfunction l() {\n\t    var params = [];\n\t    for (var _i = 0; _i < arguments.length; _i++) {\n\t        params[_i - 0] = arguments[_i];\n\t    }\n\t    return L10N_1.L10N.format.apply(this, arguments);\n\t}\n\texports.l = l;\n\t;\n\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar AnalyticsEndpoint_1 = __webpack_require__(35);\n\texports.AnalyticsEndpoint = AnalyticsEndpoint_1.AnalyticsEndpoint;\n\tvar EndpointCaller_1 = __webpack_require__(14);\n\texports.EndpointCaller = EndpointCaller_1.EndpointCaller;\n\tvar QueryError_1 = __webpack_require__(23);\n\texports.QueryError = QueryError_1.QueryError;\n\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Logger_1 = __webpack_require__(15);\n\tvar EndpointCaller_1 = __webpack_require__(14);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar QueryUtils_1 = __webpack_require__(22);\n\tvar CookieUtils_1 = __webpack_require__(36);\n\tvar es6_promise_1 = __webpack_require__(6);\n\tvar AnalyticsEndpoint = (function () {\n\t    function AnalyticsEndpoint(options) {\n\t        this.options = options;\n\t        this.logger = new Logger_1.Logger(this);\n\t        var endpointCallerOptions = {\n\t            accessToken: (this.options.token && this.options.token != '') ? this.options.token : null\n\t        };\n\t        this.endpointCaller = new EndpointCaller_1.EndpointCaller(endpointCallerOptions);\n\t        this.organization = options.organization;\n\t    }\n\t    AnalyticsEndpoint.prototype.getCurrentVisitId = function () {\n\t        return this.visitId;\n\t    };\n\t    AnalyticsEndpoint.prototype.getCurrentVisitIdPromise = function () {\n\t        var _this = this;\n\t        return new es6_promise_1.Promise(function (resolve, reject) {\n\t            if (_this.getCurrentVisitId()) {\n\t                resolve(_this.getCurrentVisitId());\n\t            }\n\t            else {\n\t                var url = _this.buildAnalyticsUrl('/analytics/visit');\n\t                _this.getFromService(url, {})\n\t                    .then(function (response) {\n\t                    _this.visitId = response.id;\n\t                    resolve(_this.visitId);\n\t                })\n\t                    .catch(function (response) {\n\t                    reject(response);\n\t                });\n\t            }\n\t        });\n\t    };\n\t    AnalyticsEndpoint.prototype.sendSearchEvents = function (searchEvents) {\n\t        if (searchEvents.length > 0) {\n\t            this.logger.info('Logging analytics search events', searchEvents);\n\t            return this.sendToService(searchEvents, 'searches', 'searchEvents');\n\t        }\n\t    };\n\t    AnalyticsEndpoint.prototype.sendDocumentViewEvent = function (documentViewEvent) {\n\t        Assert_1.Assert.exists(documentViewEvent);\n\t        this.logger.info('Logging analytics document view', documentViewEvent);\n\t        return this.sendToService(documentViewEvent, 'click', 'clickEvent');\n\t    };\n\t    AnalyticsEndpoint.prototype.sendCustomEvent = function (customEvent) {\n\t        Assert_1.Assert.exists(customEvent);\n\t        this.logger.info('Logging analytics custom event', customEvent);\n\t        return this.sendToService(customEvent, 'custom', 'customEvent');\n\t    };\n\t    AnalyticsEndpoint.prototype.getTopQueries = function (params) {\n\t        var url = this.buildAnalyticsUrl('/stats/topQueries');\n\t        return this.getFromService(url, params);\n\t    };\n\t    AnalyticsEndpoint.prototype.sendToService = function (data, path, paramName) {\n\t        var _this = this;\n\t        var url = QueryUtils_1.QueryUtils.mergePath(this.options.serviceUrl, '/rest/' + (AnalyticsEndpoint.CUSTOM_ANALYTICS_VERSION || AnalyticsEndpoint.DEFAULT_ANALYTICS_VERSION) + '/analytics/' + path);\n\t        var queryString = [];\n\t        if (this.organization) {\n\t            queryString.push('org=' + this.organization);\n\t        }\n\t        if (CookieUtils_1.Cookie.get('visitorId')) {\n\t            queryString.push('visitor=' + encodeURIComponent(CookieUtils_1.Cookie.get('visitorId')));\n\t        }\n\t        // We use pendingRequest because we don't want to have 2 request to analytics at the same time.\n\t        // Otherwise the cookie visitId won't be set correctly.\n\t        if (AnalyticsEndpoint.pendingRequest == null) {\n\t            AnalyticsEndpoint.pendingRequest = this.endpointCaller.call({\n\t                errorsAsSuccess: false,\n\t                method: 'POST',\n\t                queryString: queryString,\n\t                requestData: data,\n\t                url: url,\n\t                responseType: 'text',\n\t                requestDataType: 'application/json'\n\t            }).then(function (res) {\n\t                return _this.handleAnalyticsEventResponse(res.data);\n\t            }).finally(function () {\n\t                AnalyticsEndpoint.pendingRequest = null;\n\t            });\n\t            return AnalyticsEndpoint.pendingRequest;\n\t        }\n\t        else {\n\t            return AnalyticsEndpoint.pendingRequest.finally(function () {\n\t                return _this.sendToService(data, path, paramName);\n\t            });\n\t        }\n\t    };\n\t    AnalyticsEndpoint.prototype.getFromService = function (url, params) {\n\t        var paramsToSend = (this.options.token && this.options.token != '') ? _.extend({ 'access_token': this.options.token }, params) : params;\n\t        return this.endpointCaller.call({\n\t            errorsAsSuccess: false,\n\t            method: 'GET',\n\t            queryString: this.options.organization ? ['org=' + encodeURIComponent(this.options.organization)] : [],\n\t            requestData: paramsToSend,\n\t            responseType: 'json',\n\t            url: url\n\t        }).then(function (res) {\n\t            return res.data;\n\t        });\n\t    };\n\t    AnalyticsEndpoint.prototype.handleAnalyticsEventResponse = function (response) {\n\t        var visitId;\n\t        var visitorId;\n\t        if (response['visitId']) {\n\t            visitId = response['visitId'];\n\t            visitorId = response['visitorId'];\n\t        }\n\t        else if (response['searchEventResponses']) {\n\t            visitId = _.first(response['searchEventResponses']).visitId;\n\t            visitorId = _.first(response['searchEventResponses']).visitorId;\n\t        }\n\t        if (visitId) {\n\t            this.visitId = visitId;\n\t        }\n\t        if (visitorId) {\n\t            CookieUtils_1.Cookie.set('visitorId', visitorId, AnalyticsEndpoint.VISITOR_COOKIE_TIME);\n\t        }\n\t        return response;\n\t    };\n\t    AnalyticsEndpoint.prototype.buildAnalyticsUrl = function (path) {\n\t        return this.options.serviceUrl + '/rest/' + (AnalyticsEndpoint.CUSTOM_ANALYTICS_VERSION || AnalyticsEndpoint.DEFAULT_ANALYTICS_VERSION) + path;\n\t    };\n\t    AnalyticsEndpoint.DEFAULT_ANALYTICS_URI = 'https://usageanalytics.coveo.com';\n\t    AnalyticsEndpoint.DEFAULT_ANALYTICS_VERSION = 'v15';\n\t    AnalyticsEndpoint.CUSTOM_ANALYTICS_VERSION = undefined;\n\t    AnalyticsEndpoint.VISITOR_COOKIE_TIME = 10000 * 24 * 60 * 60 * 1000;\n\t    return AnalyticsEndpoint;\n\t}());\n\texports.AnalyticsEndpoint = AnalyticsEndpoint;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 36 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t// Code originally taken from : https://developers.livechatinc.com/blog/setting-cookies-to-subdomains-in-javascript/\n\tvar Cookie = (function () {\n\t    function Cookie() {\n\t    }\n\t    Cookie.set = function (name, value, expiration) {\n\t        var domain, domainParts, date, expires, host;\n\t        if (expiration) {\n\t            date = new Date();\n\t            date.setTime(date.getTime() + expiration);\n\t            expires = '; expires=' + date.toGMTString();\n\t        }\n\t        else {\n\t            expires = '';\n\t        }\n\t        host = location.hostname;\n\t        if (host.split('.').length === 1) {\n\t            // no '.' in a domain - it's localhost or something similar\n\t            document.cookie = this.prefix + name + '=' + value + expires + '; path=/';\n\t        }\n\t        else {\n\t            // Remember the cookie on all subdomains.\n\t            //\n\t            // Start with trying to set cookie to the top domain.\n\t            // (example: if user is on foo.com, try to set\n\t            //  cookie to domain '.com')\n\t            //\n\t            // If the cookie will not be set, it means '.com'\n\t            // is a top level domain and we need to\n\t            // set the cookie to '.foo.com'\n\t            domainParts = host.split('.');\n\t            domainParts.shift();\n\t            domain = '.' + domainParts.join('.');\n\t            document.cookie = this.prefix + name + '=' + value + expires + '; path=/; domain=' + domain;\n\t            // check if cookie was successfuly set to the given domain\n\t            // (otherwise it was a Top-Level Domain)\n\t            if (Cookie.get(name) == null || Cookie.get(name) != value) {\n\t                // append '.' to current domain\n\t                domain = '.' + host;\n\t                document.cookie = this.prefix + name + '=' + value + expires + '; path=/; domain=' + domain;\n\t            }\n\t        }\n\t    };\n\t    Cookie.get = function (name) {\n\t        var nameEQ = this.prefix + name + '=';\n\t        var ca = document.cookie.split(';');\n\t        for (var i = 0; i < ca.length; i++) {\n\t            var c = ca[i];\n\t            while (c.charAt(0) == ' ') {\n\t                c = c.substring(1, c.length);\n\t            }\n\t            if (c.indexOf(nameEQ) == 0) {\n\t                return c.substring(nameEQ.length, c.length);\n\t            }\n\t        }\n\t        return null;\n\t    };\n\t    Cookie.erase = function (name) {\n\t        Cookie.set(name, '', -1);\n\t    };\n\t    Cookie.prefix = 'coveo_';\n\t    return Cookie;\n\t}());\n\texports.Cookie = Cookie;\n\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar AdvancedSearchEvents_1 = __webpack_require__(38);\n\texports.AdvancedSearchEvents = AdvancedSearchEvents_1.AdvancedSearchEvents;\n\tvar AnalyticsEvents_1 = __webpack_require__(39);\n\texports.AnalyticsEvents = AnalyticsEvents_1.AnalyticsEvents;\n\tvar BreadcrumbEvents_1 = __webpack_require__(40);\n\texports.BreadcrumbEvents = BreadcrumbEvents_1.BreadcrumbEvents;\n\tvar DebugEvents_1 = __webpack_require__(41);\n\texports.DebugEvents = DebugEvents_1.DebugEvents;\n\tvar ImageResultListEvents_1 = __webpack_require__(42);\n\texports.ImageResultListEvents = ImageResultListEvents_1.ImageResultListEvents;\n\tvar InitializationEvents_1 = __webpack_require__(43);\n\texports.InitializationEvents = InitializationEvents_1.InitializationEvents;\n\tvar OmniboxEvents_1 = __webpack_require__(44);\n\texports.OmniboxEvents = OmniboxEvents_1.OmniboxEvents;\n\tvar PreferencesPanelEvents_1 = __webpack_require__(45);\n\texports.PreferencesPanelEvents = PreferencesPanelEvents_1.PreferencesPanelEvents;\n\tvar QueryEvents_1 = __webpack_require__(46);\n\texports.QueryEvents = QueryEvents_1.QueryEvents;\n\tvar ResultListEvents_1 = __webpack_require__(47);\n\texports.ResultListEvents = ResultListEvents_1.ResultListEvents;\n\tvar SearchAlertEvents_1 = __webpack_require__(48);\n\texports.SearchAlertsEvents = SearchAlertEvents_1.SearchAlertsEvents;\n\tvar SettingsEvents_1 = __webpack_require__(49);\n\texports.SettingsEvents = SettingsEvents_1.SettingsEvents;\n\tvar SliderEvents_1 = __webpack_require__(50);\n\texports.SliderEvents = SliderEvents_1.SliderEvents;\n\tvar StandaloneSearchInterfaceEvents_1 = __webpack_require__(51);\n\texports.StandaloneSearchInterfaceEvents = StandaloneSearchInterfaceEvents_1.StandaloneSearchInterfaceEvents;\n\n\n/***/ },\n/* 38 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t/**\n\t * This static class is there to contains the different string definition for all the events related to the {@link AdvancedSearch} component.\n\t */\n\tvar AdvancedSearchEvents = (function () {\n\t    function AdvancedSearchEvents() {\n\t    }\n\t    /**\n\t     * Triggered when the advanced search component is being built.\n\t     *\n\t     * Allows external code to add new sections in the advanced search panel.\n\t     *\n\t     * All handlers bound will receive {@link IBuildingAdvancedSearchEventArgs} as an argument\n\t     * @type {string}\n\t     */\n\t    AdvancedSearchEvents.buildingAdvancedSearch = 'buildingAdvancedSearch';\n\t    AdvancedSearchEvents.executeAdvancedSearch = 'executeAdvancedSearch';\n\t    return AdvancedSearchEvents;\n\t}());\n\texports.AdvancedSearchEvents = AdvancedSearchEvents;\n\n\n/***/ },\n/* 39 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar AnalyticsEvents = (function () {\n\t    function AnalyticsEvents() {\n\t    }\n\t    AnalyticsEvents.searchEvent = 'analyticsSearchEvent';\n\t    AnalyticsEvents.documentViewEvent = 'analyticsDocumentViewEvent';\n\t    AnalyticsEvents.customEvent = 'analyticsCustomEvent';\n\t    AnalyticsEvents.changeAnalyticsCustomData = 'changeAnalyticsCustomData';\n\t    return AnalyticsEvents;\n\t}());\n\texports.AnalyticsEvents = AnalyticsEvents;\n\n\n/***/ },\n/* 40 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t/**\n\t * This static class is there to contains the different string definition for all the events related to {@link Breadcrumb}.\n\t */\n\tvar BreadcrumbEvents = (function () {\n\t    function BreadcrumbEvents() {\n\t    }\n\t    /**\n\t     * Triggered when the breadcrumb needs to update its content. External code can use this event to provide bits of HTML that should be included in the breadcrumb.\n\t     *\n\t     * All handlers bound to this event will receive a {@link IPopulateBreadcrumbEventArgs} as an argument.\n\t     */\n\t    BreadcrumbEvents.populateBreadcrumb = 'populateBreadcrumb';\n\t    /**\n\t     * Triggered when the user clicks the Clear All button in the breadcrumb. When this event is raised, every filter that is included in the breadcrumb should be removed.\n\t     *\n\t     * This event does not provide custom event data.\n\t     */\n\t    BreadcrumbEvents.clearBreadcrumb = 'clearBreadcrumb';\n\t    BreadcrumbEvents.redrawBreadcrumb = 'redrawBreadcrumb';\n\t    return BreadcrumbEvents;\n\t}());\n\texports.BreadcrumbEvents = BreadcrumbEvents;\n\n\n/***/ },\n/* 41 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar DebugEvents = (function () {\n\t    function DebugEvents() {\n\t    }\n\t    DebugEvents.showDebugPanel = 'showDebugPanel';\n\t    return DebugEvents;\n\t}());\n\texports.DebugEvents = DebugEvents;\n\n\n/***/ },\n/* 42 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar ImageResultListEvents = (function () {\n\t    function ImageResultListEvents() {\n\t    }\n\t    ImageResultListEvents.imageResultsLayoutComplete = 'imageResultsLayoutComplete';\n\t    return ImageResultListEvents;\n\t}());\n\texports.ImageResultListEvents = ImageResultListEvents;\n\n\n/***/ },\n/* 43 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t/**\n\t * This static class is there to contain the different string definitions for all the events related to initialization.\n\t *\n\t * Note that these events will only be triggered when the {@link init} function is called.\n\t *\n\t * This means these events are normally called only once when the search interface is initialized.\n\t */\n\tvar InitializationEvents = (function () {\n\t    function InitializationEvents() {\n\t    }\n\t    /**\n\t     * This event is triggered right before each components inside the search interface get initialized (eg: Before the constructor of each component is executed).\n\t     *\n\t     * The string value is `beforeInitialization`.\n\t     * @type {string}\n\t     */\n\t    InitializationEvents.beforeInitialization = 'beforeInitialization';\n\t    /**\n\t     * Triggered after the components are initialized (eg: After the constructor of each component is executed)\n\t     * but before their state is set from the hash portion of the URL (e.g., http://mysearchinterface#q=myQuery ).\n\t     *\n\t     * This is also before the first query is launched (if the {@link SearchInterface.options.autoTriggerQuery} is `true`).\n\t     *\n\t     * The string value is `afterComponentsInitialization`.\n\t     * @type {string}\n\t     */\n\t    InitializationEvents.afterComponentsInitialization = 'afterComponentsInitialization';\n\t    /**\n\t     * Triggered right before the state from the URL (e.g., http://mysearchinterface#q=myQuery ) gets applied in the interface.\n\t     *\n\t     * This will typically only be useful if the {@link SearchInterface.options.enableHistory} is set to `true`.\n\t     *\n\t     * The string value is `restoreHistoryState`.\n\t     * @type {string}\n\t     */\n\t    InitializationEvents.restoreHistoryState = 'restoreHistoryState';\n\t    /**\n\t     * Triggered right after the UI is fully initialized.\n\t     *\n\t     * Concretely this means that the constructor of each component has been executed, and that the state coming for the URL (e.g., http://mysearchinterface#q=myquery) has been applied.\n\t     *\n\t     * It is triggered *before* the first query is launched, and if the {@link SearchInterface.options.autoTriggerQuery} is `true`.\n\t     *\n\t     * The string value is `afterInitialization`.\n\t     * @type {string}\n\t     */\n\t    InitializationEvents.afterInitialization = 'afterInitialization';\n\t    /**\n\t     * This is triggered when the UI needs to be dynamically removed so that components can unbind any internal handlers they might have set globally on the window or the document.\n\t     *\n\t     * After this event has been executed, the search interface can be dynamically removed and all handlers can be considered cleanly removed.\n\t     *\n\t     * The string value is `nuke`.\n\t     * @type {string}\n\t     */\n\t    InitializationEvents.nuke = 'nuke';\n\t    return InitializationEvents;\n\t}());\n\texports.InitializationEvents = InitializationEvents;\n\n\n/***/ },\n/* 44 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar OmniboxEvents = (function () {\n\t    function OmniboxEvents() {\n\t    }\n\t    OmniboxEvents.populateOmnibox = 'populateOmnibox';\n\t    OmniboxEvents.openOmnibox = 'openOmnibox';\n\t    OmniboxEvents.closeOmnibox = 'closeOmnibox';\n\t    OmniboxEvents.populateOmniboxSuggestions = 'populateOmniboxSuggestions';\n\t    OmniboxEvents.omniboxPreprocessResultForQuery = 'omniboxPreprocessResultForQuery';\n\t    return OmniboxEvents;\n\t}());\n\texports.OmniboxEvents = OmniboxEvents;\n\n\n/***/ },\n/* 45 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar PreferencesPanelEvents = (function () {\n\t    function PreferencesPanelEvents() {\n\t    }\n\t    PreferencesPanelEvents.savePreferences = 'savePreferences';\n\t    PreferencesPanelEvents.exitPreferencesWithoutSave = 'exitPreferencesWithoutSave';\n\t    return PreferencesPanelEvents;\n\t}());\n\texports.PreferencesPanelEvents = PreferencesPanelEvents;\n\n\n/***/ },\n/* 46 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t/**\n\t * This static class is there to contains the different string definition for all the events related to query.\n\t *\n\t * Note that these events will only be triggered when the {@link QueryController.executeQuery} method is used, either directly or by using {@link executeQuery}\n\t */\n\tvar QueryEvents = (function () {\n\t    function QueryEvents() {\n\t    }\n\t    /**\n\t     * Triggered when a new query is launched.\n\t     *\n\t     * All bound handlers will receive {@link INewQueryEventArgs} as an argument.\n\t     *\n\t     * The string value is `newQuery`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.newQuery = 'newQuery';\n\t    /**\n\t     * Triggered when the query is being built.\n\t     *\n\t     * This is typically where all components will contribute their part to the {@link IQuery} using the {@link QueryBuilder}.\n\t     *\n\t     * All bound handlers will receive {@link IBuildingQueryEventArgs} as an argument.\n\t     *\n\t     * The string value is `buildingQuery`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.buildingQuery = 'buildingQuery';\n\t    /**\n\t     * Triggered when the query is done being built.\n\t     *\n\t     * This is typically where the facet will add it's {@link IGroupByRequest} to the {@link IQuery}.\n\t     *\n\t     * All bound handlers will receive {@link IDoneBuildingQueryEventArgs} as an argument.\n\t     *\n\t     * The string value is `doneBuildingQuery`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.doneBuildingQuery = 'doneBuildingQuery';\n\t    /**\n\t     * Triggered when the query is being executed on the Search API.\n\t     *\n\t     * All bound handlers will receive {@link IDuringQueryEventArgs} as an argument.\n\t     *\n\t     * The string value is `duringQuery`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.duringQuery = 'duringQuery';\n\t    /**\n\t     * Triggered when more results are being fetched on the Search API (think : infinite scrolling, or pager).\n\t     *\n\t     * All bound handlers will receive {@link IDuringQueryEventArgs} as an argument.\n\t     *\n\t     * The string value is `duringFetchMoreQuery`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.duringFetchMoreQuery = 'duringFetchMoreQuery';\n\t    /**\n\t     * Triggered when a query successfully returns from the Search API.\n\t     *\n\t     * All bound handlers will receive {@link IQuerySuccessEventArgs} as an argument.\n\t     *\n\t     * The string value is `querySuccess`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.querySuccess = 'querySuccess';\n\t    /**\n\t     * Triggered when a more results were successfully returned from the Search API. (think : infinite scrolling, or pager).\n\t     *\n\t     * All bound handlers will receive {@link IFetchMoreSuccessEventArgs} as an argument.\n\t     *\n\t     * The string value is `fetchMoreSuccess`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.fetchMoreSuccess = 'fetchMoreSuccess';\n\t    /**\n\t     * Triggered after the main query success event has finished executing.\n\t     *\n\t     * This is typically where facets will process the {@link IGroupByResult} and render themselves.\n\t     *\n\t     * All bound handlers will receive {@link IQuerySuccessEventArgs} as an argument.\n\t     *\n\t     * The string value is `deferredQuerySuccess`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.deferredQuerySuccess = 'deferredQuerySuccess';\n\t    /**\n\t     * Triggered when there was an error executing a query on the Search API.\n\t     *\n\t     * All bound handlers will receive {@link IQueryErrorEventArgs} as an argument.\n\t     *\n\t     * The string value is `queryError`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.queryError = 'queryError';\n\t    /**\n\t     * Triggered before the {@link QueryEvents.querySuccess} event.\n\t     *\n\t     * This allows external code to modify the results before rendering them.\n\t     *\n\t     * For example, the {@link Folding} component might use this event to construct a coherent parent child relationship between query results.\n\t     *\n\t     * All bound handlers will receive {@link IPreprocessResultsEventArgs} as an argument.\n\t     *\n\t     * The string value is `preprocessResults`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.preprocessResults = 'preprocessResults';\n\t    /**\n\t     * Triggered before the {@link QueryEvents.fetchMoreSuccess} event.\n\t     *\n\t     * This allows external code to modify the results before rendering them.\n\t     *\n\t     * For example, the {@link Folding} component might use this event to construct a coherent parent child relationship between query results.\n\t     *\n\t     * All bound handlers will receive {@link IPreprocessResultsEventArgs} as an argument.\n\t     *\n\t     * The string value is `preprocessMoreResults`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.preprocessMoreResults = 'preprocessMoreResults';\n\t    /**\n\t     * Triggered when there is no result for a particular query.\n\t     *\n\t     * All bound handlers will receive {@link INoResultsEventArgs} as an argument.\n\t     *\n\t     * The string value is `noResults`.\n\t     * @type {string}\n\t     */\n\t    QueryEvents.noResults = 'noResults';\n\t    QueryEvents.buildingCallOptions = 'buildingCallOptions';\n\t    return QueryEvents;\n\t}());\n\texports.QueryEvents = QueryEvents;\n\n\n/***/ },\n/* 47 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar ResultListEvents = (function () {\n\t    function ResultListEvents() {\n\t    }\n\t    ResultListEvents.newResultsDisplayed = 'newResultsDisplayed';\n\t    ResultListEvents.newResultDisplayed = 'newResultDisplayed';\n\t    ResultListEvents.openQuickview = 'openQuickview';\n\t    return ResultListEvents;\n\t}());\n\texports.ResultListEvents = ResultListEvents;\n\n\n/***/ },\n/* 48 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar SearchAlertsEvents = (function () {\n\t    function SearchAlertsEvents() {\n\t    }\n\t    SearchAlertsEvents.searchAlertsCreated = 'searchAlertsCreated';\n\t    SearchAlertsEvents.searchAlertsDeleted = 'searchAlertsDeleted';\n\t    SearchAlertsEvents.searchAlertsFail = 'searchAlertsFail';\n\t    SearchAlertsEvents.searchAlertsPopulateMessage = 'searchAlertsPopulateMessage';\n\t    return SearchAlertsEvents;\n\t}());\n\texports.SearchAlertsEvents = SearchAlertsEvents;\n\n\n/***/ },\n/* 49 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar SettingsEvents = (function () {\n\t    function SettingsEvents() {\n\t    }\n\t    SettingsEvents.settingsPopulateMenu = 'settingsPopulateMenu';\n\t    return SettingsEvents;\n\t}());\n\texports.SettingsEvents = SettingsEvents;\n\n\n/***/ },\n/* 50 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar SliderEvents = (function () {\n\t    function SliderEvents() {\n\t    }\n\t    SliderEvents.startSlide = 'startSlide';\n\t    SliderEvents.duringSlide = 'duringSlide';\n\t    SliderEvents.endSlide = 'endSlide';\n\t    SliderEvents.graphValueSelected = 'graphValueSelected';\n\t    return SliderEvents;\n\t}());\n\texports.SliderEvents = SliderEvents;\n\n\n/***/ },\n/* 51 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar StandaloneSearchInterfaceEvents = (function () {\n\t    function StandaloneSearchInterfaceEvents() {\n\t    }\n\t    StandaloneSearchInterfaceEvents.beforeRedirect = 'beforeRedirect';\n\t    return StandaloneSearchInterfaceEvents;\n\t}());\n\texports.StandaloneSearchInterfaceEvents = StandaloneSearchInterfaceEvents;\n\n\n/***/ },\n/* 52 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar ColorUtils_1 = __webpack_require__(53);\n\texports.ColorUtils = ColorUtils_1.ColorUtils;\n\tvar CookieUtils_1 = __webpack_require__(36);\n\texports.Cookie = CookieUtils_1.Cookie;\n\tvar CurrencyUtils_1 = __webpack_require__(54);\n\texports.CurrencyUtils = CurrencyUtils_1.CurrencyUtils;\n\tvar DateUtils_1 = __webpack_require__(55);\n\texports.DateUtils = DateUtils_1.DateUtils;\n\tvar DeviceUtils_1 = __webpack_require__(19);\n\texports.DeviceUtils = DeviceUtils_1.DeviceUtils;\n\tvar Dom_1 = __webpack_require__(56);\n\texports.Dom = Dom_1.Dom;\n\texports.$$ = Dom_1.$$;\n\tvar DomUtils_1 = __webpack_require__(58);\n\texports.DomUtils = DomUtils_1.DomUtils;\n\tvar EmailActionsUtils_1 = __webpack_require__(61);\n\texports.EmailActionsUtils = EmailActionsUtils_1.EmailActionsUtils;\n\tvar EmailUtils_1 = __webpack_require__(62);\n\texports.EmailUtils = EmailUtils_1.EmailUtils;\n\tvar FeatureDetectionUtils_1 = __webpack_require__(63);\n\texports.FeatureDetectionUtils = FeatureDetectionUtils_1.FeatureDetectionUtils;\n\tvar HashUtils_1 = __webpack_require__(64);\n\texports.HashUtils = HashUtils_1.HashUtils;\n\tvar HighlightUtils_1 = __webpack_require__(65);\n\texports.HighlightUtils = HighlightUtils_1.HighlightUtils;\n\texports.StringAndHoles = HighlightUtils_1.StringAndHoles;\n\tvar HtmlUtils_1 = __webpack_require__(66);\n\texports.HTMLUtils = HtmlUtils_1.HTMLUtils;\n\tvar KeyboardUtils_1 = __webpack_require__(67);\n\texports.KEYBOARD = KeyboardUtils_1.KEYBOARD;\n\texports.KeyboardUtils = KeyboardUtils_1.KeyboardUtils;\n\tvar LocalStorageUtils_1 = __webpack_require__(68);\n\texports.LocalStorageUtils = LocalStorageUtils_1.LocalStorageUtils;\n\tvar OSUtils_1 = __webpack_require__(69);\n\texports.OSUtils = OSUtils_1.OSUtils;\n\texports.OS_NAME = OSUtils_1.OS_NAME;\n\tvar PopupUtils_1 = __webpack_require__(70);\n\texports.PopupUtils = PopupUtils_1.PopupUtils;\n\tvar QueryUtils_1 = __webpack_require__(22);\n\texports.QueryUtils = QueryUtils_1.QueryUtils;\n\tvar StreamHighlightUtils_1 = __webpack_require__(71);\n\texports.StreamHighlightUtils = StreamHighlightUtils_1.StreamHighlightUtils;\n\tvar StringUtils_1 = __webpack_require__(60);\n\texports.StringUtils = StringUtils_1.StringUtils;\n\tvar TimeSpanUtils_1 = __webpack_require__(18);\n\texports.TimeSpan = TimeSpanUtils_1.TimeSpan;\n\tvar Utils_1 = __webpack_require__(17);\n\texports.Utils = Utils_1.Utils;\n\n\n/***/ },\n/* 53 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar ColorUtils = (function () {\n\t    function ColorUtils() {\n\t    }\n\t    ColorUtils.hsvToRgb = function (h, s, v) {\n\t        var r, g, b;\n\t        var i = Math.floor(h * 6);\n\t        var f = h * 6 - i;\n\t        var p = v * (1 - s);\n\t        var q = v * (1 - f * s);\n\t        var t = v * (1 - (1 - f) * s);\n\t        switch (i % 6) {\n\t            case 0:\n\t                r = v, g = t, b = p;\n\t                break;\n\t            case 1:\n\t                r = q, g = v, b = p;\n\t                break;\n\t            case 2:\n\t                r = p, g = v, b = t;\n\t                break;\n\t            case 3:\n\t                r = p, g = q, b = v;\n\t                break;\n\t            case 4:\n\t                r = t, g = p, b = v;\n\t                break;\n\t            case 5:\n\t                r = v, g = p, b = q;\n\t                break;\n\t        }\n\t        return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n\t    };\n\t    ColorUtils.rgbToHsv = function (r, g, b) {\n\t        r = r / 255, g = g / 255, b = b / 255;\n\t        var max = Math.max(r, g, b), min = Math.min(r, g, b);\n\t        var h, s, v = max;\n\t        var d = max - min;\n\t        s = max == 0 ? 0 : d / max;\n\t        if (max == min) {\n\t            h = 0; // achromatic\n\t        }\n\t        else {\n\t            switch (max) {\n\t                case r:\n\t                    h = (g - b) / d + (g < b ? 6 : 0);\n\t                    break;\n\t                case g:\n\t                    h = (b - r) / d + 2;\n\t                    break;\n\t                case b:\n\t                    h = (r - g) / d + 4;\n\t                    break;\n\t            }\n\t            h /= 6;\n\t        }\n\t        return [h, s, v];\n\t    };\n\t    return ColorUtils;\n\t}());\n\texports.ColorUtils = ColorUtils;\n\n\n/***/ },\n/* 54 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Options_1 = __webpack_require__(32);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Globalize = __webpack_require__(4);\n\tvar DefaultCurrencyToStringOptions = (function (_super) {\n\t    __extends(DefaultCurrencyToStringOptions, _super);\n\t    function DefaultCurrencyToStringOptions() {\n\t        _super.apply(this, arguments);\n\t        this.decimals = 0;\n\t    }\n\t    return DefaultCurrencyToStringOptions;\n\t}(Options_1.Options));\n\tvar CurrencyUtils = (function () {\n\t    function CurrencyUtils() {\n\t    }\n\t    CurrencyUtils.currencyToString = function (value, options) {\n\t        if (Utils_1.Utils.isNullOrUndefined(value)) {\n\t            return '';\n\t        }\n\t        value = Number(value);\n\t        Assert_1.Assert.isNumber(value);\n\t        options = new DefaultCurrencyToStringOptions().merge(options);\n\t        var currency = Globalize.culture().numberFormat.currency;\n\t        var backup = currency.symbol;\n\t        if (Utils_1.Utils.isNonEmptyString(options.symbol)) {\n\t            currency.symbol = options.symbol;\n\t        }\n\t        var str = Globalize.format(value, 'c' + options.decimals.toString());\n\t        currency.symbol = backup;\n\t        return str;\n\t    };\n\t    return CurrencyUtils;\n\t}());\n\texports.CurrencyUtils = CurrencyUtils;\n\n\n/***/ },\n/* 55 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Options_1 = __webpack_require__(32);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Strings_1 = __webpack_require__(33);\n\tvar TimeSpanUtils_1 = __webpack_require__(18);\n\tvar Globalize = __webpack_require__(4);\n\tvar DefaultDateToStringOptions = (function (_super) {\n\t    __extends(DefaultDateToStringOptions, _super);\n\t    function DefaultDateToStringOptions() {\n\t        _super.apply(this, arguments);\n\t        this.now = new Date();\n\t        this.useTodayYesterdayAndTomorrow = true;\n\t        this.useWeekdayIfThisWeek = true;\n\t        this.omitYearIfCurrentOne = true;\n\t        this.useLongDateFormat = false;\n\t        this.includeTimeIfToday = true;\n\t        this.includeTimeIfThisWeek = true;\n\t        this.alwaysIncludeTime = false;\n\t        this.predefinedFormat = undefined;\n\t    }\n\t    return DefaultDateToStringOptions;\n\t}(Options_1.Options));\n\tvar DateUtils = (function () {\n\t    function DateUtils() {\n\t    }\n\t    DateUtils.convertFromJsonDateIfNeeded = function (date) {\n\t        if (_.isDate(date)) {\n\t            return date;\n\t        }\n\t        else if (date !== null && !isNaN(Number(date))) {\n\t            return new Date(Number(date));\n\t        }\n\t        else if (_.isString(date)) {\n\t            return new Date(date.replace('@', ' '));\n\t        }\n\t        else {\n\t            return undefined;\n\t        }\n\t    };\n\t    DateUtils.dateForQuery = function (date) {\n\t        return date.getFullYear() + '/' + DateUtils.padNumber((date.getMonth() + 1).toString()) + '/' + DateUtils.padNumber(date.getDate().toString());\n\t    };\n\t    DateUtils.padNumber = function (num, length) {\n\t        if (length === void 0) { length = 2; }\n\t        while (num.length < length) {\n\t            num = '0' + num;\n\t        }\n\t        return num;\n\t    };\n\t    DateUtils.keepOnlyDatePart = function (date) {\n\t        return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\t    };\n\t    DateUtils.offsetDateByDays = function (date, offset) {\n\t        var newDate = new Date(date.valueOf());\n\t        newDate.setDate(newDate.getDate() + offset);\n\t        return newDate;\n\t    };\n\t    DateUtils.dateToString = function (d, options) {\n\t        if (Utils_1.Utils.isNullOrUndefined(d)) {\n\t            return '';\n\t        }\n\t        options = new DefaultDateToStringOptions().merge(options);\n\t        var dateOnly = DateUtils.keepOnlyDatePart(d);\n\t        if (options.predefinedFormat) {\n\t            return Globalize.format(dateOnly, options.predefinedFormat);\n\t        }\n\t        var today = DateUtils.keepOnlyDatePart(options.now);\n\t        if (options.useTodayYesterdayAndTomorrow) {\n\t            if (dateOnly.valueOf() == today.valueOf()) {\n\t                return Strings_1.l('Today');\n\t            }\n\t            var tomorrow = DateUtils.offsetDateByDays(today, 1);\n\t            if (dateOnly.valueOf() == tomorrow.valueOf()) {\n\t                return Strings_1.l('Tomorrow');\n\t            }\n\t            var yesterday = DateUtils.offsetDateByDays(today, -1);\n\t            if (dateOnly.valueOf() == yesterday.valueOf()) {\n\t                return Strings_1.l('Yesterday');\n\t            }\n\t        }\n\t        var isThisWeek = Math.abs(TimeSpanUtils_1.TimeSpan.fromDates(dateOnly, today).getDays()) < 7;\n\t        if (options.useWeekdayIfThisWeek && isThisWeek) {\n\t            if (dateOnly.valueOf() > today.valueOf()) {\n\t                return Strings_1.l('Next') + ' ' + Globalize.format(dateOnly, 'dddd');\n\t            }\n\t            else {\n\t                return Strings_1.l('Last') + ' ' + Globalize.format(dateOnly, 'dddd');\n\t            }\n\t        }\n\t        if (options.omitYearIfCurrentOne && dateOnly.getFullYear() === today.getFullYear()) {\n\t            return Globalize.format(dateOnly, 'M');\n\t        }\n\t        if (options.useLongDateFormat) {\n\t            return Globalize.format(dateOnly, 'D');\n\t        }\n\t        return Globalize.format(dateOnly, 'd');\n\t    };\n\t    DateUtils.timeToString = function (date, options) {\n\t        if (Utils_1.Utils.isNullOrUndefined(date)) {\n\t            return '';\n\t        }\n\t        return Globalize.format(date, 't');\n\t    };\n\t    DateUtils.dateTimeToString = function (date, options) {\n\t        if (Utils_1.Utils.isNullOrUndefined(date)) {\n\t            return '';\n\t        }\n\t        options = new DefaultDateToStringOptions().merge(options);\n\t        var today = DateUtils.keepOnlyDatePart(options.now);\n\t        var isThisWeek = Math.abs(TimeSpanUtils_1.TimeSpan.fromDates(date, today).getDays()) < 7;\n\t        var datePart = DateUtils.dateToString(date, options);\n\t        var dateWithoutTime = DateUtils.keepOnlyDatePart(date);\n\t        if (options.alwaysIncludeTime || (options.includeTimeIfThisWeek && isThisWeek) || (options.includeTimeIfToday && dateWithoutTime.valueOf() == today.valueOf())) {\n\t            return datePart + ', ' + DateUtils.timeToString(date);\n\t        }\n\t        else {\n\t            return datePart;\n\t        }\n\t    };\n\t    DateUtils.monthToString = function (month) {\n\t        var date = new Date(1980, month);\n\t        return Globalize.format(date, 'MMMM');\n\t    };\n\t    DateUtils.isValid = function (date) {\n\t        if (date instanceof Date) {\n\t            return !isNaN(date.getTime());\n\t        }\n\t        return false;\n\t    };\n\t    DateUtils.timeBetween = function (from, to) {\n\t        if (Utils_1.Utils.isNullOrUndefined(from) || Utils_1.Utils.isNullOrUndefined(to)) {\n\t            return '';\n\t        }\n\t        return ('0' + ((to.getTime() - from.getTime()) / (1000 * 60 * 60)).toFixed()).slice(-2) +\n\t            ':' + ('0' + ((to.getTime() - from.getTime()) % (1000 * 60 * 60) / (1000 * 60)).toFixed()).slice(-2) +\n\t            ':' + ('0' + ((to.getTime() - from.getTime()) % (1000 * 60) / (1000)).toFixed()).slice(-2);\n\t    };\n\t    return DateUtils;\n\t}());\n\texports.DateUtils = DateUtils;\n\t// Shim for IE8 Date.toISOString\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString\n\tif (!Date.prototype.toISOString) {\n\t    (function () {\n\t        function pad(nber) {\n\t            if (nber < 10) {\n\t                return '0' + nber;\n\t            }\n\t            return nber;\n\t        }\n\t        Date.prototype.toISOString = function () {\n\t            return this.getUTCFullYear() +\n\t                '-' + pad(this.getUTCMonth() + 1) +\n\t                '-' + pad(this.getUTCDate()) +\n\t                'T' + pad(this.getUTCHours()) +\n\t                ':' + pad(this.getUTCMinutes()) +\n\t                ':' + pad(this.getUTCSeconds()) +\n\t                '.' + (this.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) +\n\t                'Z';\n\t        };\n\t    }());\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 56 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Utils_1 = __webpack_require__(17);\n\tvar JQueryutils_1 = __webpack_require__(57);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Logger_1 = __webpack_require__(15);\n\t/**\n\t * This is essentially an helper class for dom manipulation.<br/>\n\t * This is intended to provide some basic functionality normally offered by jQuery.<br/>\n\t * To minimize the multiple jQuery conflict we have while integrating in various system, we implemented the very small subset that the framework needs.<br/>\n\t * See {@link $$}, which is a function that wraps this class constructor, for less verbose code.\n\t */\n\tvar Dom = (function () {\n\t    /**\n\t     * Create a new Dom object with the given HTMLElement\n\t     * @param el The HTMLElement to wrap in a Dom object\n\t     */\n\t    function Dom(el) {\n\t        Assert_1.Assert.exists(el);\n\t        this.el = el;\n\t    }\n\t    /**\n\t     * Helper function to quickly create an HTMLElement\n\t     * @param type The type of the element (e.g. div, span)\n\t     * @param props The props (id, className, attributes) of the element<br/>\n\t     * Can be either specified in dashed-case strings ('my-attribute') or camelCased keys (myAttribute),\n\t     * the latter of which will automatically get replaced to dash-case.\n\t     * @param innerHTML The contents of the new HTMLElement, either in string form or as another HTMLElement\n\t     */\n\t    Dom.createElement = function (type, props) {\n\t        var children = [];\n\t        for (var _i = 2; _i < arguments.length; _i++) {\n\t            children[_i - 2] = arguments[_i];\n\t        }\n\t        var elem = document.createElement(type);\n\t        for (var key in props) {\n\t            if (key === 'className') {\n\t                elem.className = props['className'];\n\t            }\n\t            else {\n\t                var attr = key.indexOf('-') !== -1 ? key : Utils_1.Utils.toDashCase(key);\n\t                elem.setAttribute(attr, props[key]);\n\t            }\n\t        }\n\t        _.each(children, function (child) {\n\t            if (child instanceof HTMLElement) {\n\t                elem.appendChild(child);\n\t            }\n\t            else if (_.isString(child)) {\n\t                elem.innerHTML += child;\n\t            }\n\t            else if (child instanceof Dom) {\n\t                elem.appendChild(child.el);\n\t            }\n\t        });\n\t        return elem;\n\t    };\n\t    /**\n\t     * Adds the element to the children of the current element\n\t     * @param element The element to append\n\t     * @returns {string}\n\t     */\n\t    Dom.prototype.append = function (element) {\n\t        this.el.appendChild(element);\n\t    };\n\t    /**\n\t     * Get the css value of the specified property.<br/>\n\t     * @param property The property\n\t     * @returns {string}\n\t     */\n\t    Dom.prototype.css = function (property) {\n\t        if (this.el.style[property]) {\n\t            return this.el.style[property];\n\t        }\n\t        return window.getComputedStyle(this.el).getPropertyValue(property);\n\t    };\n\t    /**\n\t     * Get or set the text content of the HTMLElement.<br/>\n\t     * @param txt Optional. If given, this will set the text content of the element. If not, will return the text content.\n\t     * @returns {string}\n\t     */\n\t    Dom.prototype.text = function (txt) {\n\t        if (Utils_1.Utils.isUndefined(txt)) {\n\t            return this.el.innerText || this.el.textContent;\n\t        }\n\t        else {\n\t            if (this.el.innerText != undefined) {\n\t                this.el.innerText = txt;\n\t            }\n\t            else if (this.el.textContent != undefined) {\n\t                this.el.textContent = txt;\n\t            }\n\t        }\n\t    };\n\t    /**\n\t     * Performant way to transform a NodeList to an array of HTMLElement, for manipulation<br/>\n\t     * http://jsperf.com/nodelist-to-array/72\n\t     * @param nodeList a {NodeList} to convert to an array\n\t     * @returns {HTMLElement[]}\n\t     */\n\t    Dom.prototype.nodeListToArray = function (nodeList) {\n\t        var i = nodeList.length;\n\t        var arr = new Array(i);\n\t        while (i--) {\n\t            arr[i] = nodeList.item(i);\n\t        }\n\t        return arr;\n\t    };\n\t    /**\n\t     * Empty (remove all child) from the element;\n\t     */\n\t    Dom.prototype.empty = function () {\n\t        while (this.el.firstChild) {\n\t            this.el.removeChild(this.el.firstChild);\n\t        }\n\t    };\n\t    /**\n\t     * Empty the element and all childs from the dom;\n\t     */\n\t    Dom.prototype.remove = function () {\n\t        this.el.parentNode.removeChild(this.el);\n\t    };\n\t    /**\n\t     * Show the element;\n\t     */\n\t    Dom.prototype.show = function () {\n\t        this.el.style.display = 'block';\n\t    };\n\t    /**\n\t     * Hide the element;\n\t     */\n\t    Dom.prototype.hide = function () {\n\t        this.el.style.display = 'none';\n\t    };\n\t    /**\n\t     * Toggle the element visibility.<br/>\n\t     * Optional visible parameter, if specified will set the element visibility\n\t     * @param visible Optional parameter to display or hide the element\n\t     */\n\t    Dom.prototype.toggle = function (visible) {\n\t        if (visible === undefined) {\n\t            if (this.el.style.display == 'block') {\n\t                this.hide();\n\t            }\n\t            else {\n\t                this.show();\n\t            }\n\t        }\n\t        else {\n\t            if (visible) {\n\t                this.show();\n\t            }\n\t            else {\n\t                this.hide();\n\t            }\n\t        }\n\t    };\n\t    /**\n\t     * Returns the value of the specified attribute.\n\t     * @param name The name of the attribute\n\t     */\n\t    Dom.prototype.getAttribute = function (name) {\n\t        return this.el.getAttribute(name);\n\t    };\n\t    /**\n\t     * Sets the value of the specified attribute.\n\t     * @param name The name of the attribute\n\t     * @param value The value to set\n\t     */\n\t    Dom.prototype.setAttribute = function (name, value) {\n\t        this.el.setAttribute(name, value);\n\t    };\n\t    /**\n\t     * Find a child element, given a CSS selector\n\t     * @param selector A CSS selector, can be a .className or #id\n\t     * @returns {HTMLElement}\n\t     */\n\t    Dom.prototype.find = function (selector) {\n\t        return this.el.querySelector(selector);\n\t    };\n\t    /**\n\t     * Check if the element match the selector.<br/>\n\t     * The selector can be a class, an id or a tag.<br/>\n\t     * Eg : .is('.foo') or .is('#foo') or .is('div').\n\t     */\n\t    Dom.prototype.is = function (selector) {\n\t        if (this.el.tagName.toLowerCase() == selector.toLowerCase()) {\n\t            return true;\n\t        }\n\t        if (selector[0] == '.') {\n\t            if (this.hasClass(selector.substr(1))) {\n\t                return true;\n\t            }\n\t        }\n\t        if (selector[0] == '#') {\n\t            if (this.el.getAttribute('id') == selector.substr(1)) {\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    };\n\t    /**\n\t     * Get the first element that matches the classname by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t     *\n\t     * Stops at the body of the document\n\t     * @param className A CSS classname\n\t     */\n\t    Dom.prototype.closest = function (className) {\n\t        return this.traverseAncestorForClass(this.el, className);\n\t    };\n\t    /**\n\t     * Get the first element that matches the classname by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t     *\n\t     * Stops at the body of the document\n\t     * @returns {any}\n\t     */\n\t    Dom.prototype.parent = function (className) {\n\t        if (this.el.parentElement == undefined) {\n\t            return undefined;\n\t        }\n\t        return this.traverseAncestorForClass(this.el.parentElement, className);\n\t    };\n\t    /**\n\t     *  Get all the ancestors of the current element that match the given className\n\t     *\n\t     *  Return an empty array if none found.\n\t     * @param className\n\t     * @returns {HTMLElement[]}\n\t     */\n\t    Dom.prototype.parents = function (className) {\n\t        var parentsFound = [];\n\t        var parentFound = this.parent(className);\n\t        while (parentFound) {\n\t            parentsFound.push(parentFound);\n\t            parentFound = new Dom(parentFound).parent(className);\n\t        }\n\t        return parentsFound;\n\t    };\n\t    /**\n\t     * Return all children\n\t     * @returns {HTMLElement[]}\n\t     */\n\t    Dom.prototype.children = function () {\n\t        return this.nodeListToArray(this.el.children);\n\t    };\n\t    /**\n\t     * Return all siblings\n\t     * @returns {HTMLElement[]}\n\t     */\n\t    Dom.prototype.siblings = function (selector) {\n\t        var sibs = [];\n\t        var currentElement = this.el.parentNode.firstChild;\n\t        for (; currentElement; currentElement = currentElement.nextSibling) {\n\t            if (currentElement != this.el) {\n\t                if (this.matches(currentElement, selector) || !selector) {\n\t                    sibs.push(currentElement);\n\t                }\n\t            }\n\t        }\n\t        return sibs;\n\t    };\n\t    Dom.prototype.matches = function (element, selector) {\n\t        var all = document.querySelectorAll(selector);\n\t        for (var i = 0; i < all.length; i++) {\n\t            if (all[i] === element) {\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    };\n\t    /**\n\t     * Find all children that match the given CSS selector\n\t     * @param selector A CSS selector, can be a .className\n\t     * @returns {HTMLElement[]}\n\t     */\n\t    Dom.prototype.findAll = function (selector) {\n\t        return this.nodeListToArray(this.el.querySelectorAll(selector));\n\t    };\n\t    /**\n\t     * Find the child elements using a className\n\t     * @param className Class of the childs elements to find\n\t     * @returns {HTMLElement[]}\n\t     */\n\t    Dom.prototype.findClass = function (className) {\n\t        if ('getElementsByClassName' in this.el) {\n\t            return this.nodeListToArray(this.el.getElementsByClassName(className));\n\t        }\n\t        // For ie 8\n\t        return this.nodeListToArray(this.el.querySelectorAll('.' + className));\n\t    };\n\t    /**\n\t     * Find an element using an ID\n\t     * @param id ID of the element to find\n\t     * @returns {HTMLElement}\n\t     */\n\t    Dom.prototype.findId = function (id) {\n\t        return document.getElementById(id);\n\t    };\n\t    Dom.prototype.addClass = function (className) {\n\t        var _this = this;\n\t        if (_.isArray(className)) {\n\t            _.each(className, function (name) {\n\t                _this.addClass(name);\n\t            });\n\t        }\n\t        else {\n\t            if (!this.hasClass(className)) {\n\t                if (this.el.className) {\n\t                    this.el.className += ' ' + className;\n\t                }\n\t                else {\n\t                    this.el.className = className;\n\t                }\n\t            }\n\t        }\n\t    };\n\t    /**\n\t     * Remove the class on the element. Works even if the element does not possess the class.\n\t     * @param className Classname to remove on the the element\n\t     */\n\t    Dom.prototype.removeClass = function (className) {\n\t        this.el.className = this.el.className.replace(new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|\\\\b)\", 'g'), '$1').trim();\n\t    };\n\t    /**\n\t     * Toggle the class on the element.\n\t     * @param className Classname to toggle\n\t     * @swtch If true, add the class regardless and if false, remove the class\n\t     */\n\t    Dom.prototype.toggleClass = function (className, swtch) {\n\t        if (Utils_1.Utils.isNullOrUndefined(swtch)) {\n\t            if (this.hasClass(className)) {\n\t                this.removeClass(className);\n\t            }\n\t            else {\n\t                this.addClass(className);\n\t            }\n\t        }\n\t        else {\n\t            if (swtch) {\n\t                this.addClass(className);\n\t            }\n\t            else {\n\t                this.removeClass(className);\n\t            }\n\t        }\n\t    };\n\t    /**\n\t     * Sets the inner html of the element\n\t     * @param html The html to set\n\t     */\n\t    Dom.prototype.setHtml = function (html) {\n\t        this.el.innerHTML = html;\n\t    };\n\t    /**\n\t     * Return an array with all the classname on the element. Empty array if the element has not classname\n\t     * @returns {any|Array}\n\t     */\n\t    Dom.prototype.getClass = function () {\n\t        return this.el.className.match(Dom.CLASS_NAME_REGEX) || [];\n\t    };\n\t    /**\n\t     * Check if the element has the given class name\n\t     * @param className Classname to verify\n\t     * @returns {boolean}\n\t     */\n\t    Dom.prototype.hasClass = function (className) {\n\t        return _.contains(this.getClass(), className);\n\t    };\n\t    /**\n\t     * Detach the element from the DOM.\n\t     */\n\t    Dom.prototype.detach = function () {\n\t        this.el.parentElement && this.el.parentElement.removeChild(this.el);\n\t    };\n\t    /**\n\t     * Insert the current node after the given reference node\n\t     * @param refNode\n\t     */\n\t    Dom.prototype.insertAfter = function (refNode) {\n\t        refNode.parentNode && refNode.parentNode.insertBefore(this.el, refNode.nextSibling);\n\t    };\n\t    /**\n\t     * Insert the current node before the given reference node\n\t     * @param refNode\n\t     */\n\t    Dom.prototype.insertBefore = function (refNode) {\n\t        refNode.parentNode && refNode.parentNode.insertBefore(this.el, refNode);\n\t    };\n\t    /**\n\t     * Insert the given node as the first child of the current node\n\t     * @param toPrepend\n\t     */\n\t    Dom.prototype.prepend = function (toPrepend) {\n\t        if (this.el.firstChild) {\n\t            new Dom(toPrepend).insertBefore(this.el.firstChild);\n\t        }\n\t        else {\n\t            this.el.appendChild(toPrepend);\n\t        }\n\t    };\n\t    Dom.prototype.on = function (type, eventHandle) {\n\t        var _this = this;\n\t        if (_.isArray(type)) {\n\t            _.each(type, function (t) {\n\t                _this.on(t, eventHandle);\n\t            });\n\t        }\n\t        else {\n\t            var jq = JQueryutils_1.JQueryUtils.getJQuery();\n\t            if (jq) {\n\t                jq(this.el).on(type, eventHandle);\n\t            }\n\t            else if (this.el.addEventListener) {\n\t                var fn = function (e) {\n\t                    eventHandle(e, e.detail);\n\t                };\n\t                Dom.handlers.push({\n\t                    eventHandle: eventHandle,\n\t                    fn: fn\n\t                });\n\t                this.el.addEventListener(type, fn, false);\n\t            }\n\t            else if (this.el['on']) {\n\t                this.el['on']('on' + type, eventHandle);\n\t            }\n\t        }\n\t    };\n\t    Dom.prototype.one = function (type, eventHandle) {\n\t        var _this = this;\n\t        if (_.isArray(type)) {\n\t            _.each(type, function (t) {\n\t                _this.one(t, eventHandle);\n\t            });\n\t        }\n\t        else {\n\t            var once = function (e, args) {\n\t                _this.off(type, once);\n\t                return eventHandle(e, args);\n\t            };\n\t            this.on(type, once);\n\t        }\n\t    };\n\t    Dom.prototype.off = function (type, eventHandle) {\n\t        var _this = this;\n\t        if (_.isArray(type)) {\n\t            _.each(type, function (t) {\n\t                _this.off(t, eventHandle);\n\t            });\n\t        }\n\t        else {\n\t            var jq = JQueryutils_1.JQueryUtils.getJQuery();\n\t            if (jq) {\n\t                jq(this.el).off(type, eventHandle);\n\t            }\n\t            else if (this.el.removeEventListener) {\n\t                var idx = 0;\n\t                var found = _.find(Dom.handlers, function (handlerObj, i) {\n\t                    if (handlerObj.eventHandle == eventHandle) {\n\t                        idx = i;\n\t                        return true;\n\t                    }\n\t                });\n\t                if (found) {\n\t                    this.el.removeEventListener(type, found.fn, false);\n\t                    Dom.handlers.splice(idx, 1);\n\t                }\n\t            }\n\t            else if (this.el['off']) {\n\t                this.el['off']('on' + type, eventHandle);\n\t            }\n\t        }\n\t    };\n\t    /**\n\t     * Trigger an event on the element.\n\t     * @param type The event type to trigger\n\t     * @param data\n\t     */\n\t    Dom.prototype.trigger = function (type, data) {\n\t        var jq = JQueryutils_1.JQueryUtils.getJQuery();\n\t        if (jq) {\n\t            jq(this.el).trigger(type, data);\n\t        }\n\t        else if (CustomEvent !== undefined) {\n\t            var event = new CustomEvent(type, { detail: data, bubbles: true });\n\t            this.el.dispatchEvent(event);\n\t        }\n\t        else {\n\t            // TODO Support for older browser ?\n\t            new Logger_1.Logger(this).error('CANNOT TRIGGER EVENT FOR OLDER BROWSER');\n\t        }\n\t    };\n\t    /**\n\t     * Check if the element is \"empty\" (has no innerHTML content). Whitespace is considered empty</br>\n\t     * @returns {boolean}\n\t     */\n\t    Dom.prototype.isEmpty = function () {\n\t        return Dom.ONLY_WHITE_SPACE_REGEX.test(this.el.innerHTML);\n\t    };\n\t    /**\n\t     * Check if the element is a descendant of parent\n\t     * @param other\n\t     */\n\t    Dom.prototype.isDescendant = function (parent) {\n\t        var node = this.el.parentNode;\n\t        while (node != null) {\n\t            if (node == parent) {\n\t                return true;\n\t            }\n\t            node = node.parentNode;\n\t        }\n\t        return false;\n\t    };\n\t    /**\n\t     * Replace the current element with the other element, then detach the current element\n\t     * @param otherElem\n\t     */\n\t    Dom.prototype.replaceWith = function (otherElem) {\n\t        var parent = this.el.parentNode;\n\t        if (parent) {\n\t            new Dom(otherElem).insertAfter(this.el);\n\t        }\n\t        this.detach();\n\t    };\n\t    // based on http://api.jquery.com/position/\n\t    /**\n\t     * Return the position relative to the offset parent.\n\t     */\n\t    Dom.prototype.position = function () {\n\t        var offsetParent = this.offsetParent();\n\t        var parentOffset = { top: 0, left: 0 };\n\t        var offset = this.offset();\n\t        if (!$$(offsetParent).is('html')) {\n\t            parentOffset = $$(offsetParent).offset();\n\t        }\n\t        var borderTopWidth = parseInt($$(offsetParent).css('borderTopWidth'));\n\t        var borderLeftWidth = parseInt($$(offsetParent).css('borderLeftWidth'));\n\t        borderTopWidth = isNaN(borderTopWidth) ? 0 : borderTopWidth;\n\t        borderLeftWidth = isNaN(borderLeftWidth) ? 0 : borderLeftWidth;\n\t        parentOffset = {\n\t            top: parentOffset.top + borderTopWidth,\n\t            left: parentOffset.left + borderLeftWidth\n\t        };\n\t        var marginTop = parseInt(this.css('marginTop'));\n\t        var marginLeft = parseInt(this.css('marginLeft'));\n\t        marginTop = isNaN(marginTop) ? 0 : marginTop;\n\t        marginLeft = isNaN(marginLeft) ? 0 : marginLeft;\n\t        return {\n\t            top: offset.top - parentOffset.top - marginTop,\n\t            left: offset.left - parentOffset.left - marginLeft\n\t        };\n\t    };\n\t    // based on https://api.jquery.com/offsetParent/\n\t    /**\n\t     * Returns the offset parent. The offset parent is the closest parent that is positioned.\n\t     * An element is positioned when its position property is not 'static', which is the default.\n\t     */\n\t    Dom.prototype.offsetParent = function () {\n\t        var offsetParent = this.el.offsetParent;\n\t        while (offsetParent instanceof HTMLElement && $$(offsetParent).css('position') === 'static') {\n\t            // Will break out if it stumbles upon an non-HTMLElement and return documentElement\n\t            offsetParent = offsetParent.offsetParent;\n\t        }\n\t        if (!(offsetParent instanceof HTMLElement)) {\n\t            return document.documentElement;\n\t        }\n\t        return offsetParent;\n\t    };\n\t    // based on http://api.jquery.com/offset/\n\t    /**\n\t     * Return the position relative to the document.\n\t     */\n\t    Dom.prototype.offset = function () {\n\t        // In <=IE11, calling getBoundingClientRect on a disconnected node throws an error\n\t        if (!this.el.getClientRects().length) {\n\t            return { top: 0, left: 0 };\n\t        }\n\t        var rect = this.el.getBoundingClientRect();\n\t        if (rect.width || rect.height) {\n\t            var doc = this.el.ownerDocument;\n\t            var docElem = doc.documentElement;\n\t            return {\n\t                top: rect.top + window.pageYOffset - docElem.clientTop,\n\t                left: rect.left + window.pageXOffset - docElem.clientLeft\n\t            };\n\t        }\n\t        return rect;\n\t    };\n\t    /**\n\t     * Returns the offset width of the element\n\t     */\n\t    Dom.prototype.width = function () {\n\t        return this.el.offsetWidth;\n\t    };\n\t    /**\n\t     * Returns the offset height of the element\n\t     */\n\t    Dom.prototype.height = function () {\n\t        return this.el.offsetHeight;\n\t    };\n\t    Dom.prototype.traverseAncestorForClass = function (current, className) {\n\t        if (current === void 0) { current = this.el; }\n\t        if (className.indexOf('.') == 0) {\n\t            className = className.substr(1);\n\t        }\n\t        var found = false;\n\t        while (!found) {\n\t            if ($$(current).hasClass(className)) {\n\t                found = true;\n\t            }\n\t            if (current.tagName.toLowerCase() == 'body') {\n\t                break;\n\t            }\n\t            if (current.parentElement == null) {\n\t                break;\n\t            }\n\t            if (!found) {\n\t                current = current.parentElement;\n\t            }\n\t        }\n\t        if (found) {\n\t            return current;\n\t        }\n\t        return undefined;\n\t    };\n\t    Dom.CLASS_NAME_REGEX = /-?[_a-zA-Z]+[_a-zA-Z0-9-]*/g;\n\t    Dom.ONLY_WHITE_SPACE_REGEX = /^\\s*$/;\n\t    Dom.handlers = [];\n\t    return Dom;\n\t}());\n\texports.Dom = Dom;\n\tvar Win = (function () {\n\t    function Win(win) {\n\t        this.win = win;\n\t    }\n\t    Win.prototype.height = function () {\n\t        return this.win.innerHeight;\n\t    };\n\t    Win.prototype.width = function () {\n\t        return this.win.innerWidth;\n\t    };\n\t    return Win;\n\t}());\n\texports.Win = Win;\n\tvar Doc = (function () {\n\t    function Doc(doc) {\n\t        this.doc = doc;\n\t    }\n\t    Doc.prototype.height = function () {\n\t        var body = this.doc.body;\n\t        return Math.max(body.scrollHeight, body.offsetHeight);\n\t    };\n\t    Doc.prototype.width = function () {\n\t        var body = this.doc.body;\n\t        return Math.max(body.scrollWidth, body.offsetWidth);\n\t    };\n\t    return Doc;\n\t}());\n\texports.Doc = Doc;\n\tfunction $$() {\n\t    var args = [];\n\t    for (var _i = 0; _i < arguments.length; _i++) {\n\t        args[_i - 0] = arguments[_i];\n\t    }\n\t    if (args.length === 1 && args[0] instanceof Dom) {\n\t        return args[0];\n\t    }\n\t    else if (args.length === 1 && (!_.isString(args[0]))) {\n\t        return new Dom(args[0]);\n\t    }\n\t    else {\n\t        return new Dom(Dom.createElement.apply(Dom, args));\n\t    }\n\t}\n\texports.$$ = $$;\n\tfunction htmlToDom(html) {\n\t    var parsedHtml = document.createElement('div');\n\t    parsedHtml.innerHTML = html;\n\t    // If the template has a single root element, we return it directly. Otherwise\n\t    // we'll have to wrap this thing in a div as ResultList expects a single element.\n\t    if (parsedHtml.children.length == 1) {\n\t        return parsedHtml.children.item(0);\n\t    }\n\t    return parsedHtml;\n\t}\n\texports.htmlToDom = htmlToDom;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 57 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar JQueryUtils = (function () {\n\t    function JQueryUtils() {\n\t    }\n\t    JQueryUtils.getJQuery = function () {\n\t        if (window && window['Coveo'] && window['Coveo']['$']) {\n\t            return window['Coveo']['$'];\n\t        }\n\t        return false;\n\t    };\n\t    JQueryUtils.isInstanceOfJQuery = function (obj) {\n\t        var jq = this.getJQuery();\n\t        if (jq) {\n\t            return obj instanceof jq;\n\t        }\n\t        return false;\n\t    };\n\t    JQueryUtils.isInstanceOfJqueryEvent = function (obj) {\n\t        var jq = this.getJQuery();\n\t        if (jq) {\n\t            return obj instanceof jq.Event;\n\t        }\n\t        return false;\n\t    };\n\t    return JQueryUtils;\n\t}());\n\texports.JQueryUtils = JQueryUtils;\n\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Dom_1 = __webpack_require__(56);\n\tvar DateUtils_1 = __webpack_require__(55);\n\tvar FileTypes_1 = __webpack_require__(59);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar StringUtils_1 = __webpack_require__(60);\n\tvar DomUtils = (function () {\n\t    function DomUtils() {\n\t    }\n\t    DomUtils.getPopUpCloseButton = function (captionForClose, captionForReminder) {\n\t        var container = document.createElement('span');\n\t        var closeButton = document.createElement('span');\n\t        Dom_1.$$(closeButton).addClass('coveo-close-button');\n\t        container.appendChild(closeButton);\n\t        var iconClose = document.createElement('span');\n\t        Dom_1.$$(iconClose).addClass('coveo-icon');\n\t        Dom_1.$$(iconClose).addClass('coveo-sprites-quickview-close');\n\t        closeButton.appendChild(iconClose);\n\t        Dom_1.$$(closeButton).text(captionForClose);\n\t        var closeReminder = document.createElement('span');\n\t        Dom_1.$$(closeReminder).addClass('coveo-pop-up-reminder');\n\t        Dom_1.$$(closeReminder).text(captionForReminder);\n\t        container.appendChild(closeReminder);\n\t        return container.outerHTML;\n\t    };\n\t    DomUtils.getBasicLoadingAnimation = function () {\n\t        var loadDotClass = 'coveo-loading-dot';\n\t        var dom = document.createElement('div');\n\t        dom.className = 'coveo-first-loading-animation';\n\t        dom.innerHTML = \"<div class='coveo-logo' ></div>\\n    <div class='coveo-loading-container'>\\n      <div class='\" + loadDotClass + \"'></div>\\n      <div class='\" + loadDotClass + \"'></div>\\n      <div class='\" + loadDotClass + \"'></div>\\n      <div class='\" + loadDotClass + \"'></div>\\n    </div>\";\n\t        return dom;\n\t    };\n\t    DomUtils.highlightElement = function (initialString, valueToSearch) {\n\t        var regex = new RegExp(Utils_1.Utils.escapeRegexCharacter(valueToSearch), 'i');\n\t        var firstChar = initialString.search(regex);\n\t        var lastChar = firstChar + valueToSearch.length;\n\t        return StringUtils_1.StringUtils.htmlEncode(initialString.slice(0, firstChar)) + \"<span class='coveo-highlight'>\" + StringUtils_1.StringUtils.htmlEncode(initialString.slice(firstChar, lastChar)) + \"</span>\" + StringUtils_1.StringUtils.htmlEncode(initialString.slice(lastChar));\n\t    };\n\t    DomUtils.getLoadingSpinner = function () {\n\t        var loading = Dom_1.$$('div');\n\t        loading.addClass('coveo-loading-spinner');\n\t        return loading.el;\n\t    };\n\t    DomUtils.getModalBoxHeader = function (title) {\n\t        var header = Dom_1.$$('div');\n\t        header.el.innerHTML = \"<div class='coveo-modalbox-right-header'>\\n        <span class='coveo-modalbox-close-button'>\\n          <span class='coveo-icon coveo-sprites-common-clear'></span>\\n        </span>\\n      </div>\\n      <div class='coveo-modalbox-left-header'>\\n        <span class='coveo-modalbox-pop-up-reminder'> \" + (title || '') + \"</span>\\n      </div>\";\n\t        return header;\n\t    };\n\t    DomUtils.getQuickviewHeader = function (result, options, bindings) {\n\t        var date = '';\n\t        if (options.showDate) {\n\t            date = DateUtils_1.DateUtils.dateTimeToString(new Date(result.raw.date));\n\t        }\n\t        var fileType = FileTypes_1.FileTypes.get(result);\n\t        var header = Dom_1.$$('div');\n\t        header.el.innerHTML = \"<div class='coveo-quickview-right-header'>\\n        <span class='coveo-quickview-time'>\" + date + \"</span>\\n        <span class='coveo-quickview-close-button'>\\n          <span class='coveo-icon coveo-sprites-common-clear'></span>\\n        </span>\\n      </div>\\n      <div class='coveo-quickview-left-header'>\\n        <span class='coveo-quickview-icon coveo-small \" + fileType.icon + \"'></span>\\n        <span class='coveo-quickview-pop-up-reminder'> \" + (options.title || '') + \"</span>\\n      </div>\";\n\t        new Coveo[Coveo['Salesforce'] ? 'SalesforceResultLink' : 'ResultLink'](header.find('.coveo-quickview-pop-up-reminder'), undefined, bindings, result);\n\t        return header;\n\t    };\n\t    return DomUtils;\n\t}());\n\texports.DomUtils = DomUtils;\n\n\n/***/ },\n/* 59 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Strings_1 = __webpack_require__(33);\n\tvar Assert_1 = __webpack_require__(16);\n\t// On-demand mapping of file types to captions. Used by facets, but I don't\n\t// really like this. Maybe a dedicated filetype facet would be better? Hmm...\n\tvar fileTypeCaptions;\n\tvar FileTypes = (function () {\n\t    function FileTypes() {\n\t    }\n\t    FileTypes.get = function (result) {\n\t        var objecttype = result.raw.objecttype;\n\t        var filetype = result.raw.filetype;\n\t        // When @objecttype is File we fallback on @filetype for icons and such\n\t        if (Utils_1.Utils.isNonEmptyString(objecttype) && objecttype.toLowerCase() != 'file') {\n\t            return FileTypes.getObjectType(objecttype);\n\t        }\n\t        else if (Utils_1.Utils.isNonEmptyString(filetype)) {\n\t            return FileTypes.getFileType(filetype);\n\t        }\n\t        else {\n\t            return {\n\t                // This will render a default icon. Really it should not happen.\n\t                icon: 'coveo-icon filetype',\n\t                caption: Strings_1.l('Unknown')\n\t            };\n\t        }\n\t    };\n\t    FileTypes.getObjectType = function (objecttype) {\n\t        // We must use lowercase filetypes because that's how the CSS classes\n\t        // are generated (they are case sensitive, alas).\n\t        objecttype = objecttype.toLowerCase();\n\t        // Most object types have a set of localized strings in the main dictionary\n\t        var localizedString = Strings_1.l('objecttype_' + objecttype);\n\t        return {\n\t            'icon': 'coveo-icon objecttype ' + objecttype,\n\t            caption: localizedString != 'objecttype_' + objecttype ? localizedString : objecttype\n\t        };\n\t    };\n\t    FileTypes.getFileType = function (filetype) {\n\t        // We must use lowercase filetypes because that's how the CSS classes\n\t        // are generated (they are case sensitive, alas).\n\t        filetype = filetype.toLowerCase();\n\t        // Sometimes, filetype begins with a period (typically means the index has\n\t        // no idea and uses the file extension as a filetype).\n\t        if (filetype[0] == '.') {\n\t            filetype = filetype.substring(1);\n\t        }\n\t        // Most filetypes have a set of localized strings in the main dictionary\n\t        var localizedString = Strings_1.l('filetype_' + filetype);\n\t        return {\n\t            'icon': 'coveo-icon filetype ' + filetype,\n\t            caption: localizedString != 'filetype_' + filetype ? localizedString : filetype\n\t        };\n\t    };\n\t    FileTypes.getFileTypeCaptions = function () {\n\t        if (fileTypeCaptions == undefined) {\n\t            fileTypeCaptions = {};\n\t            var strings = String['locales'][String['locale'].toLowerCase()];\n\t            Assert_1.Assert.isNotUndefined(strings);\n\t            _.each(_.keys(strings), function (key) {\n\t                if (key.indexOf('filetype_') == 0) {\n\t                    fileTypeCaptions[key.substr('filetype_'.length)] = key.toLocaleString();\n\t                }\n\t                else if (key.indexOf('objecttype_') == 0) {\n\t                    fileTypeCaptions[key.substr('objecttype_'.length)] = key.toLocaleString();\n\t                }\n\t            });\n\t        }\n\t        return fileTypeCaptions;\n\t    };\n\t    return FileTypes;\n\t}());\n\texports.FileTypes = FileTypes;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar StringUtils = (function () {\n\t    function StringUtils() {\n\t    }\n\t    StringUtils.javascriptEncode = function (value) {\n\t        Assert_1.Assert.isString(value);\n\t        value = value.replace(/\\\\/g, '\\\\\\\\');\n\t        value = value.replace(/'/g, '\\\\\\'');\n\t        value = value.replace(/\"/g, '\\\\\"');\n\t        return value;\n\t    };\n\t    StringUtils.htmlEncode = function (value) {\n\t        Assert_1.Assert.isString(value);\n\t        var div = Dom_1.$$('div');\n\t        div.text(value);\n\t        return div.el.innerHTML;\n\t    };\n\t    StringUtils.splice = function (value, index, remove, toAdd) {\n\t        return value.slice(0, index) + toAdd + value.slice(index + Math.abs(remove));\n\t    };\n\t    StringUtils.removeMiddle = function (value, length, toAdd) {\n\t        if (value.length < length) {\n\t            return value;\n\t        }\n\t        var toRemove = value.length - length;\n\t        var index = Math.floor(length / 2);\n\t        return StringUtils.splice(value, index, toRemove, toAdd);\n\t    };\n\t    StringUtils.regexEncode = function (value) {\n\t        Assert_1.Assert.isString(value);\n\t        return value.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n\t    };\n\t    StringUtils.stringToRegex = function (value, ignoreAccent) {\n\t        if (ignoreAccent === void 0) { ignoreAccent = false; }\n\t        Assert_1.Assert.isString(value);\n\t        var encoded = StringUtils.regexEncode(value);\n\t        if (ignoreAccent) {\n\t            return _.map(encoded, function (char) {\n\t                var regexp = _.find(StringUtils.accented, function (regexp) { return char.match(regexp) != null; });\n\t                if (regexp) {\n\t                    return regexp.source;\n\t                }\n\t                return char;\n\t            }).join('');\n\t        }\n\t        return encoded;\n\t    };\n\t    StringUtils.wildcardsToRegex = function (value, ignoreAccent) {\n\t        if (ignoreAccent === void 0) { ignoreAccent = false; }\n\t        Assert_1.Assert.isString(value);\n\t        var encoded = StringUtils.stringToRegex(value, ignoreAccent);\n\t        encoded = encoded.replace(/\\\\\\*/, '.*');\n\t        encoded = encoded.replace(/\\\\\\?/, '.');\n\t        return encoded;\n\t    };\n\t    StringUtils.getHighlights = function (strToSearch, regexToFind, dataHighlightGroupTerm) {\n\t        var match, indexes = [];\n\t        while (match = regexToFind.exec(strToSearch)) {\n\t            var desiredMatch = match[2];\n\t            var undesiredMatch = match[1];\n\t            var offset = match.index + undesiredMatch.length;\n\t            indexes.push({ offset: offset, length: desiredMatch.length, dataHighlightGroupTerm: dataHighlightGroupTerm });\n\t            if (!regexToFind.global) {\n\t                break;\n\t            }\n\t        }\n\t        return _.isEmpty(indexes) ? undefined : indexes;\n\t    };\n\t    StringUtils.encodeCarriageReturn = function (strToEncode) {\n\t        Assert_1.Assert.isString(strToEncode);\n\t        return strToEncode.replace(/\\n/g, '<br/>');\n\t    };\n\t    StringUtils.equalsCaseInsensitive = function (str1, str2) {\n\t        return str1.toLowerCase() == str2.toLowerCase();\n\t    };\n\t    StringUtils.match = function (value, regex) {\n\t        var results = [];\n\t        var arr;\n\t        while ((arr = regex.exec(value)) !== null) {\n\t            results.push(arr);\n\t        }\n\t        return results;\n\t    };\n\t    StringUtils.hashCode = function (str) {\n\t        var hash = 0;\n\t        var len = str.length;\n\t        for (var i = 0; i < len; i++) {\n\t            var char = str.charCodeAt(i);\n\t            hash = ((hash << 5) - hash) + char;\n\t            hash = hash & hash; // Convert to 32bit integer\n\t        }\n\t        return hash.toString(16);\n\t    };\n\t    // http://stackoverflow.com/a/25575009\n\t    StringUtils.removePunctuation = function (str) {\n\t        var punctRE = /[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#\\$%&\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?@\\[\\]\\^_`\\{\\|\\}~]/g;\n\t        var spaceRE = /\\s+/g;\n\t        return str.replace(punctRE, '').replace(spaceRE, ' ');\n\t    };\n\t    StringUtils.accented = {\n\t        'A': /[Aa\\xaa\\xc0-\\xc5\\xe0-\\xe5\\u0100-\\u0105\\u01cd\\u01ce\\u0200-\\u0203\\u0226\\u0227\\u1d2c\\u1d43\\u1e00\\u1e01\\u1e9a\\u1ea0-\\u1ea3\\u2090\\u2100\\u2101\\u213b\\u249c\\u24b6\\u24d0\\u3371-\\u3374\\u3380-\\u3384\\u3388\\u3389\\u33a9-\\u33af\\u33c2\\u33ca\\u33df\\u33ff\\uff21\\uff41]/g,\n\t        'B': /[Bb\\u1d2e\\u1d47\\u1e02-\\u1e07\\u212c\\u249d\\u24b7\\u24d1\\u3374\\u3385-\\u3387\\u33c3\\u33c8\\u33d4\\u33dd\\uff22\\uff42]/g,\n\t        'C': /[Cc\\xc7\\xe7\\u0106-\\u010d\\u1d9c\\u2100\\u2102\\u2103\\u2105\\u2106\\u212d\\u216d\\u217d\\u249e\\u24b8\\u24d2\\u3376\\u3388\\u3389\\u339d\\u33a0\\u33a4\\u33c4-\\u33c7\\uff23\\uff43]/g,\n\t        'D': /[Dd\\u010e\\u010f\\u01c4-\\u01c6\\u01f1-\\u01f3\\u1d30\\u1d48\\u1e0a-\\u1e13\\u2145\\u2146\\u216e\\u217e\\u249f\\u24b9\\u24d3\\u32cf\\u3372\\u3377-\\u3379\\u3397\\u33ad-\\u33af\\u33c5\\u33c8\\uff24\\uff44]/g,\n\t        'E': /[Ee\\xc8-\\xcb\\xe8-\\xeb\\u0112-\\u011b\\u0204-\\u0207\\u0228\\u0229\\u1d31\\u1d49\\u1e18-\\u1e1b\\u1eb8-\\u1ebd\\u2091\\u2121\\u212f\\u2130\\u2147\\u24a0\\u24ba\\u24d4\\u3250\\u32cd\\u32ce\\uff25\\uff45]/g,\n\t        'F': /[Ff\\u1da0\\u1e1e\\u1e1f\\u2109\\u2131\\u213b\\u24a1\\u24bb\\u24d5\\u338a-\\u338c\\u3399\\ufb00-\\ufb04\\uff26\\uff46]/g,\n\t        'G': /[Gg\\u011c-\\u0123\\u01e6\\u01e7\\u01f4\\u01f5\\u1d33\\u1d4d\\u1e20\\u1e21\\u210a\\u24a2\\u24bc\\u24d6\\u32cc\\u32cd\\u3387\\u338d-\\u338f\\u3393\\u33ac\\u33c6\\u33c9\\u33d2\\u33ff\\uff27\\uff47]/g,\n\t        'H': /[Hh\\u0124\\u0125\\u021e\\u021f\\u02b0\\u1d34\\u1e22-\\u1e2b\\u1e96\\u210b-\\u210e\\u24a3\\u24bd\\u24d7\\u32cc\\u3371\\u3390-\\u3394\\u33ca\\u33cb\\u33d7\\uff28\\uff48]/g,\n\t        'I': /[Ii\\xcc-\\xcf\\xec-\\xef\\u0128-\\u0130\\u0132\\u0133\\u01cf\\u01d0\\u0208-\\u020b\\u1d35\\u1d62\\u1e2c\\u1e2d\\u1ec8-\\u1ecb\\u2071\\u2110\\u2111\\u2139\\u2148\\u2160-\\u2163\\u2165-\\u2168\\u216a\\u216b\\u2170-\\u2173\\u2175-\\u2178\\u217a\\u217b\\u24a4\\u24be\\u24d8\\u337a\\u33cc\\u33d5\\ufb01\\ufb03\\uff29\\uff49]/g,\n\t        'J': /[Jj\\u0132-\\u0135\\u01c7-\\u01cc\\u01f0\\u02b2\\u1d36\\u2149\\u24a5\\u24bf\\u24d9\\u2c7c\\uff2a\\uff4a]/g,\n\t        'K': /[Kk\\u0136\\u0137\\u01e8\\u01e9\\u1d37\\u1d4f\\u1e30-\\u1e35\\u212a\\u24a6\\u24c0\\u24da\\u3384\\u3385\\u3389\\u338f\\u3391\\u3398\\u339e\\u33a2\\u33a6\\u33aa\\u33b8\\u33be\\u33c0\\u33c6\\u33cd-\\u33cf\\uff2b\\uff4b]/g,\n\t        'L': /[Ll\\u0139-\\u0140\\u01c7-\\u01c9\\u02e1\\u1d38\\u1e36\\u1e37\\u1e3a-\\u1e3d\\u2112\\u2113\\u2121\\u216c\\u217c\\u24a7\\u24c1\\u24db\\u32cf\\u3388\\u3389\\u33d0-\\u33d3\\u33d5\\u33d6\\u33ff\\ufb02\\ufb04\\uff2c\\uff4c]/g,\n\t        'M': /[Mm\\u1d39\\u1d50\\u1e3e-\\u1e43\\u2120\\u2122\\u2133\\u216f\\u217f\\u24a8\\u24c2\\u24dc\\u3377-\\u3379\\u3383\\u3386\\u338e\\u3392\\u3396\\u3399-\\u33a8\\u33ab\\u33b3\\u33b7\\u33b9\\u33bd\\u33bf\\u33c1\\u33c2\\u33ce\\u33d0\\u33d4-\\u33d6\\u33d8\\u33d9\\u33de\\u33df\\uff2d\\uff4d]/g,\n\t        'N': /[Nn\\xd1\\xf1\\u0143-\\u0149\\u01ca-\\u01cc\\u01f8\\u01f9\\u1d3a\\u1e44-\\u1e4b\\u207f\\u2115\\u2116\\u24a9\\u24c3\\u24dd\\u3381\\u338b\\u339a\\u33b1\\u33b5\\u33bb\\u33cc\\u33d1\\uff2e\\uff4e]/g,\n\t        'O': /[Oo\\xba\\xd2-\\xd6\\xf2-\\xf6\\u014c-\\u0151\\u01a0\\u01a1\\u01d1\\u01d2\\u01ea\\u01eb\\u020c-\\u020f\\u022e\\u022f\\u1d3c\\u1d52\\u1ecc-\\u1ecf\\u2092\\u2105\\u2116\\u2134\\u24aa\\u24c4\\u24de\\u3375\\u33c7\\u33d2\\u33d6\\uff2f\\uff4f]/g,\n\t        'P': /[Pp\\u1d3e\\u1d56\\u1e54-\\u1e57\\u2119\\u24ab\\u24c5\\u24df\\u3250\\u3371\\u3376\\u3380\\u338a\\u33a9-\\u33ac\\u33b0\\u33b4\\u33ba\\u33cb\\u33d7-\\u33da\\uff30\\uff50]/g,\n\t        'Q': /[Qq\\u211a\\u24ac\\u24c6\\u24e0\\u33c3\\uff31\\uff51]/g,\n\t        'R': /[Rr\\u0154-\\u0159\\u0210-\\u0213\\u02b3\\u1d3f\\u1d63\\u1e58-\\u1e5b\\u1e5e\\u1e5f\\u20a8\\u211b-\\u211d\\u24ad\\u24c7\\u24e1\\u32cd\\u3374\\u33ad-\\u33af\\u33da\\u33db\\uff32\\uff52]/g,\n\t        'S': /[Ss\\u015a-\\u0161\\u017f\\u0218\\u0219\\u02e2\\u1e60-\\u1e63\\u20a8\\u2101\\u2120\\u24ae\\u24c8\\u24e2\\u33a7\\u33a8\\u33ae-\\u33b3\\u33db\\u33dc\\ufb06\\uff33\\uff53]/g,\n\t        'T': /[Tt\\u0162-\\u0165\\u021a\\u021b\\u1d40\\u1d57\\u1e6a-\\u1e71\\u1e97\\u2121\\u2122\\u24af\\u24c9\\u24e3\\u3250\\u32cf\\u3394\\u33cf\\ufb05\\ufb06\\uff34\\uff54]/g,\n\t        'U': /[Uu\\xd9-\\xdc\\xf9-\\xfc\\u0168-\\u0173\\u01af\\u01b0\\u01d3\\u01d4\\u0214-\\u0217\\u1d41\\u1d58\\u1d64\\u1e72-\\u1e77\\u1ee4-\\u1ee7\\u2106\\u24b0\\u24ca\\u24e4\\u3373\\u337a\\uff35\\uff55]/g,\n\t        'V': /[Vv\\u1d5b\\u1d65\\u1e7c-\\u1e7f\\u2163-\\u2167\\u2173-\\u2177\\u24b1\\u24cb\\u24e5\\u2c7d\\u32ce\\u3375\\u33b4-\\u33b9\\u33dc\\u33de\\uff36\\uff56]/g,\n\t        'W': /[Ww\\u0174\\u0175\\u02b7\\u1d42\\u1e80-\\u1e89\\u1e98\\u24b2\\u24cc\\u24e6\\u33ba-\\u33bf\\u33dd\\uff37\\uff57]/g,\n\t        'X': /[Xx\\u02e3\\u1e8a-\\u1e8d\\u2093\\u213b\\u2168-\\u216b\\u2178-\\u217b\\u24b3\\u24cd\\u24e7\\u33d3\\uff38\\uff58]/g,\n\t        'Y': /[Yy\\xdd\\xfd\\xff\\u0176-\\u0178\\u0232\\u0233\\u02b8\\u1e8e\\u1e8f\\u1e99\\u1ef2-\\u1ef9\\u24b4\\u24ce\\u24e8\\u33c9\\uff39\\uff59]/g,\n\t        'Z': /[Zz\\u0179-\\u017e\\u01f1-\\u01f3\\u1dbb\\u1e90-\\u1e95\\u2124\\u2128\\u24b5\\u24cf\\u24e9\\u3390-\\u3394\\uff3a\\uff5a]/g\n\t    };\n\t    return StringUtils;\n\t}());\n\texports.StringUtils = StringUtils;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 61 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Strings_1 = __webpack_require__(33);\n\tvar EmailActionsUtils = (function () {\n\t    function EmailActionsUtils() {\n\t    }\n\t    EmailActionsUtils.buildMailToString = function (options) {\n\t        var mailTo = options.to ? 'mailto:' + encodeURIComponent(options.to) : 'mailto:';\n\t        var parameters = EmailActionsUtils.buildMailToParametersString(options.subject, options.cc, options.bcc, options.body, mailTo);\n\t        if (parameters) {\n\t            mailTo += '?' + parameters;\n\t        }\n\t        return mailTo;\n\t    };\n\t    EmailActionsUtils.buildMailToParametersString = function (subject, cc, bcc, body, mailTo) {\n\t        var parametersArray = [];\n\t        if (subject) {\n\t            parametersArray.push(EmailActionsUtils.buildMailToParameter('subject', subject));\n\t        }\n\t        if (cc) {\n\t            parametersArray.push(EmailActionsUtils.buildMailToParameter('cc', cc));\n\t        }\n\t        if (bcc) {\n\t            parametersArray.push(EmailActionsUtils.buildMailToParameter('bcc', bcc));\n\t        }\n\t        if (body) {\n\t            var shortenBody = EmailActionsUtils.getShortenBody(body, mailTo + '?' + parametersArray.join('&'));\n\t            if (shortenBody) {\n\t                parametersArray.push(EmailActionsUtils.buildMailToParameter('body', shortenBody));\n\t            }\n\t        }\n\t        return parametersArray.join('&');\n\t    };\n\t    EmailActionsUtils.getShortenBody = function (body, mailTo) {\n\t        var shortenBody = body;\n\t        if (mailTo.length < MailTo.maxLength) {\n\t            var maxBodyLength = MailTo.maxLength - mailTo.length - '&body='.length;\n\t            shortenBody = EmailActionsUtils.shortenString(body, maxBodyLength);\n\t        }\n\t        return shortenBody;\n\t    };\n\t    EmailActionsUtils.buildMailToParameter = function (name, param) {\n\t        return param ? encodeURIComponent(name) + '=' + encodeURIComponent(param) : '';\n\t    };\n\t    EmailActionsUtils.shortenString = function (str, maxLength, encodeShortenBodyIndication) {\n\t        if (encodeShortenBodyIndication === void 0) { encodeShortenBodyIndication = false; }\n\t        /* There is a size limit on mailto url,\n\t         * Depending on the browser, the mailto will not open if too large. */\n\t        var shortenBodyIndicator = encodeShortenBodyIndication ? encodeURIComponent(MailTo.shortenBodyIndicator) : MailTo.shortenBodyIndicator;\n\t        maxLength = maxLength - MailTo.shortenBodyIndicator.length;\n\t        var sliced = str.length > maxLength ? true : false;\n\t        var shortenStr = str.substring(0, maxLength);\n\t        shortenStr += sliced ? shortenBodyIndicator : '';\n\t        return shortenStr;\n\t    };\n\t    EmailActionsUtils.appendShortenBodyToMailToString = function (mailTo, body) {\n\t        var shortenBody = EmailActionsUtils.getShortenBody(body, mailTo);\n\t        return mailTo.indexOf('?') >= 0 ? mailTo + '&body=' + shortenBody : mailTo + '?body=' + shortenBody;\n\t    };\n\t    EmailActionsUtils.removeCurrentUserEmailFromString = function (currentUserEmail, str) {\n\t        if (str && currentUserEmail) {\n\t            return _.filter(str.split(';'), function (email) {\n\t                return email.indexOf(currentUserEmail) == -1;\n\t            }).join(';');\n\t        }\n\t        else {\n\t            return str;\n\t        }\n\t    };\n\t    EmailActionsUtils.buildReplyMailToFromResult = function (result, currentUserEmail) {\n\t        return new MailTo({\n\t            currentUserEmail: currentUserEmail,\n\t            originalFrom: result.raw.from,\n\t            to: result.raw.from,\n\t            subject: result.raw.conversationsubject,\n\t        });\n\t    };\n\t    EmailActionsUtils.buildReplyAllMailToFromResult = function (result, currentUserEmail) {\n\t        return new MailTo({\n\t            currentUserEmail: currentUserEmail,\n\t            originalFrom: result.raw.from,\n\t            to: result.raw.from + ';' + result.raw.to,\n\t            subject: result.raw.conversationsubject,\n\t            cc: result.raw.cc,\n\t        });\n\t    };\n\t    EmailActionsUtils.buildForwardMailToFromResult = function (result, currentUserEmail) {\n\t        return new MailTo({\n\t            currentUserEmail: currentUserEmail,\n\t            originalFrom: result.raw.from,\n\t            subject: result.raw.conversationsubject,\n\t        });\n\t    };\n\t    EmailActionsUtils.encodeMailToBody = function (body) {\n\t        var linesArray = body.split('\\n');\n\t        _.each(linesArray, function (line, index) {\n\t            linesArray[index] = encodeURIComponent(linesArray[index]);\n\t        });\n\t        return linesArray.join(MailTo.enter);\n\t    };\n\t    return EmailActionsUtils;\n\t}());\n\texports.EmailActionsUtils = EmailActionsUtils;\n\tvar DefaultMailToOptions = (function () {\n\t    function DefaultMailToOptions() {\n\t        this.currentUserEmail = '';\n\t        this.originalFrom = '';\n\t        this.to = '';\n\t        this.subject = '';\n\t        this.cc = '';\n\t        this.bcc = '';\n\t        this.body = '';\n\t    }\n\t    return DefaultMailToOptions;\n\t}());\n\texports.DefaultMailToOptions = DefaultMailToOptions;\n\tvar MailTo = (function () {\n\t    function MailTo(options) {\n\t        this.options = options;\n\t        this.bodyHeader = '';\n\t        this.options = _.extend(new DefaultMailToOptions(), options);\n\t        this.removeCurrentUserFromParameters();\n\t        if (this.options.originalFrom) {\n\t            this.bodyHeader = this.options.bodyIsHTML ? '<p><br/><br/><br/>' + Strings_1.l('From') + ': ' + this.options.originalFrom + '<hr></p>' :\n\t                '\\n\\n\\n' + Strings_1.l('From') + ': ' + this.options.originalFrom + '\\n_________________________________\\n';\n\t        }\n\t    }\n\t    MailTo.prototype.removeCurrentUserFromParameters = function () {\n\t        this.options.to = EmailActionsUtils.removeCurrentUserEmailFromString(this.options.currentUserEmail, this.options.to);\n\t        this.options.cc = EmailActionsUtils.removeCurrentUserEmailFromString(this.options.currentUserEmail, this.options.cc);\n\t        this.options.bcc = EmailActionsUtils.removeCurrentUserEmailFromString(this.options.currentUserEmail, this.options.bcc);\n\t    };\n\t    MailTo.prototype.open = function () {\n\t        this.ensureValueIsSet();\n\t        window.location.href = this.value;\n\t    };\n\t    MailTo.prototype.ensureValueIsSet = function () {\n\t        if (!this.value) {\n\t            this.setValue();\n\t        }\n\t        else if (!this.valueBodyIsSet()) {\n\t            this.setValueBody();\n\t        }\n\t    };\n\t    MailTo.prototype.setValue = function () {\n\t        this.value = EmailActionsUtils.buildMailToString(this.options);\n\t        if (this.value && !this.valueBodyIsSet()) {\n\t            this.setValueBody();\n\t        }\n\t    };\n\t    MailTo.prototype.setValueBody = function () {\n\t        this.value = EmailActionsUtils.appendShortenBodyToMailToString(this.value, this.body);\n\t    };\n\t    MailTo.prototype.setMailToBodyFromText = function (text) {\n\t        if (text === void 0) { text = ''; }\n\t        this.body = text;\n\t    };\n\t    MailTo.prototype.valueBodyIsSet = function () {\n\t        return this.value.indexOf('body=') >= 0;\n\t    };\n\t    MailTo.prototype.bodyIsSet = function () {\n\t        return this.body ? true : false;\n\t    };\n\t    MailTo.enter = '%0D%0A'; // \\r\\n\n\t    MailTo.shortenBodyIndicator = '\\r\\n\\r\\n...';\n\t    // Arbitrary numbers :\n\t    MailTo.maxLength = 1000;\n\t    return MailTo;\n\t}());\n\texports.MailTo = MailTo;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Strings_1 = __webpack_require__(33);\n\tvar EmailUtils = (function () {\n\t    function EmailUtils() {\n\t    }\n\t    EmailUtils.splitSemicolonSeparatedListOfEmailAddresses = function (addresses) {\n\t        var addressesAsList = addresses.split(/\\s*;\\s*/);\n\t        return _.filter(addressesAsList, function (s) {\n\t            return Utils_1.Utils.exists(s) && Utils_1.Utils.isNonEmptyString(Utils_1.Utils.trim(s));\n\t        });\n\t    };\n\t    EmailUtils.emailAddressesToHyperlinks = function (addresses, companyDomain, me, lengthLimit, truncateName) {\n\t        if (lengthLimit === void 0) { lengthLimit = 2; }\n\t        if (truncateName === void 0) { truncateName = false; }\n\t        addresses = _.filter(addresses, function (s) {\n\t            return Utils_1.Utils.exists(s) && Utils_1.Utils.isNonEmptyString(Utils_1.Utils.trim(s));\n\t        });\n\t        var hyperlinks = _.map(addresses, function (item) {\n\t            var emailArray = EmailUtils.parseEmail(item);\n\t            var email = emailArray[1];\n\t            var name = emailArray[0];\n\t            if (Utils_1.Utils.exists(me) && email == me) {\n\t                name = Strings_1.l('Me');\n\t            }\n\t            if (truncateName) {\n\t                var split = name.split(' ');\n\t                if (!Utils_1.Utils.isNullOrUndefined(split[1])) {\n\t                    name = split[0] + ' ' + split[1].substring(0, 1) + '.';\n\t                }\n\t            }\n\t            var domainIndex = email.indexOf('@') >= 0 ? email.indexOf('@') + 1 : 0;\n\t            var domain = email.substr(domainIndex);\n\t            if (Utils_1.Utils.exists(companyDomain) && domain != companyDomain) {\n\t                name += ' (' + domain + ')';\n\t            }\n\t            return '<a title=\"' + item.replace(/'/g, '&quot;') + 'href=\"mailto:' + encodeURI(email) + '\">' + name + '</a>';\n\t        });\n\t        var excess = hyperlinks.length - lengthLimit;\n\t        var andOthers = excess > 0 ? EmailUtils.buildEmailAddressesAndOthers(_.last(hyperlinks, excess)) : '';\n\t        return _.first(hyperlinks, lengthLimit).join(', ') + andOthers;\n\t    };\n\t    EmailUtils.buildEmailAddressesAndOthers = function (excessHyperLinks) {\n\t        return '<span class=\"coveo-emails-excess-collapsed coveo-active\" onclick=\"Coveo.TemplateHelpers.getHelper(\\'excessEmailToggle\\')(this);\"> ' + Strings_1.l('AndOthers', excessHyperLinks.length.toString(), excessHyperLinks.length) + '</span>' +\n\t            '<span class=\"coveo-emails-excess-expanded\"> , ' + excessHyperLinks.join(' , ') + '</span>';\n\t    };\n\t    EmailUtils.parseEmail = function (email) {\n\t        var name;\n\t        var match = email.match(/^\\s*(.*)\\s+<(.*)>$/);\n\t        if (match != null) {\n\t            name = match[1];\n\t            if (/^'.*'|'.*'$/.test(name)) {\n\t                name = name.substr(1, name.length - 2);\n\t            }\n\t            email = match[2];\n\t        }\n\t        else {\n\t            name = email;\n\t            email = email;\n\t        }\n\t        return [name, email];\n\t    };\n\t    return EmailUtils;\n\t}());\n\texports.EmailUtils = EmailUtils;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 63 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar FeatureDetectionUtils = (function () {\n\t    function FeatureDetectionUtils() {\n\t    }\n\t    FeatureDetectionUtils.supportSVG = function () {\n\t        return document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#BasicStructure', '1.1');\n\t    };\n\t    return FeatureDetectionUtils;\n\t}());\n\texports.FeatureDetectionUtils = FeatureDetectionUtils;\n\n\n/***/ },\n/* 64 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar HashUtils = (function () {\n\t    function HashUtils() {\n\t    }\n\t    HashUtils.getHash = function (w) {\n\t        if (w === void 0) { w = window; }\n\t        Assert_1.Assert.exists(w);\n\t        // window.location.hash returns the DECODED hash on Firefox (it's a well known bug),\n\t        // so any & in values will be already unescaped. This breaks our value splitting.\n\t        // The following trick works on all browsers.\n\t        var ret = '#' + (w.location.href.split('#')[1] || '');\n\t        return HashUtils.getAjaxcrawlableHash(ret);\n\t    };\n\t    HashUtils.getValue = function (value, toParse) {\n\t        Assert_1.Assert.isNonEmptyString(value);\n\t        Assert_1.Assert.exists(toParse);\n\t        toParse = HashUtils.getAjaxcrawlableHash(toParse);\n\t        var paramValue = HashUtils.getRawValue(value, toParse);\n\t        if (paramValue != undefined) {\n\t            paramValue = HashUtils.getValueDependingOnType(paramValue);\n\t        }\n\t        return paramValue;\n\t    };\n\t    HashUtils.encodeValues = function (values) {\n\t        var hash = [];\n\t        _.each(values, function (valueToEncode, key, obj) {\n\t            var encodedValue = '';\n\t            if (Utils_1.Utils.isNonEmptyArray(valueToEncode)) {\n\t                encodedValue = HashUtils.encodeArray(valueToEncode);\n\t            }\n\t            else if (_.isObject(valueToEncode) && Utils_1.Utils.isNonEmptyArray(_.keys(valueToEncode))) {\n\t                encodedValue = HashUtils.encodeObject(valueToEncode);\n\t            }\n\t            else {\n\t                encodedValue = encodeURIComponent(valueToEncode.toString());\n\t            }\n\t            if (encodedValue != '') {\n\t                hash.push(key + '=' + encodedValue);\n\t            }\n\t        });\n\t        return hash.join('&');\n\t    };\n\t    HashUtils.getAjaxcrawlableHash = function (hash) {\n\t        if (hash[1] != undefined && hash[1] == '!') {\n\t            return hash.substring(0, 1) + hash.substring(2);\n\t        }\n\t        else {\n\t            return hash;\n\t        }\n\t    };\n\t    HashUtils.getRawValue = function (value, toParse) {\n\t        Assert_1.Assert.exists(value);\n\t        Assert_1.Assert.exists(toParse);\n\t        Assert_1.Assert.check(toParse.indexOf('#') == 0 || toParse == '');\n\t        var toParseArray = toParse.substr(1).split('&');\n\t        var paramPos = 0;\n\t        var loop = true;\n\t        var paramValue = undefined;\n\t        while (loop) {\n\t            var paramValuePair = toParseArray[paramPos].split('=');\n\t            if (paramValuePair[0] == value) {\n\t                loop = false;\n\t                paramValue = paramValuePair[1];\n\t            }\n\t            else {\n\t                paramPos++;\n\t                if (paramPos >= toParseArray.length) {\n\t                    paramPos = undefined;\n\t                    loop = false;\n\t                }\n\t            }\n\t        }\n\t        return paramValue;\n\t    };\n\t    HashUtils.getValueDependingOnType = function (paramValue) {\n\t        var type = HashUtils.getValueType(paramValue);\n\t        var returnValue;\n\t        if (type == 'object') {\n\t            returnValue = HashUtils.decodeObject(paramValue);\n\t        }\n\t        else if (type == 'array') {\n\t            returnValue = HashUtils.decodeArray(paramValue);\n\t        }\n\t        else {\n\t            returnValue = decodeURIComponent(paramValue);\n\t        }\n\t        return returnValue;\n\t    };\n\t    HashUtils.getValueType = function (paramValue) {\n\t        if (HashUtils.isObject(paramValue)) {\n\t            return 'object';\n\t        }\n\t        else if (HashUtils.isArray(paramValue)) {\n\t            return 'array';\n\t        }\n\t        else {\n\t            return 'other';\n\t        }\n\t    };\n\t    HashUtils.isArrayStartNotEncoded = function (value) {\n\t        return value.substr(0, 1) == HashUtils.DELIMITER.arrayStart;\n\t    };\n\t    HashUtils.isArrayStartEncoded = function (value) {\n\t        return value.indexOf(encodeURIComponent(HashUtils.DELIMITER.arrayStart)) == 0;\n\t    };\n\t    HashUtils.isArrayEndNotEncoded = function (value) {\n\t        return value.substr(value.length - 1);\n\t    };\n\t    HashUtils.isArrayEndEncoded = function (value) {\n\t        return value.indexOf(encodeURIComponent(HashUtils.DELIMITER.arrayEnd)) == value.length - encodeURIComponent(HashUtils.DELIMITER.arrayEnd).length;\n\t    };\n\t    HashUtils.isObjectStartNotEncoded = function (value) {\n\t        return value.substr(0, 1) == HashUtils.DELIMITER.objectStart;\n\t    };\n\t    HashUtils.isObjectStartEncoded = function (value) {\n\t        return value.indexOf(encodeURIComponent(HashUtils.DELIMITER.objectStart)) == 0;\n\t    };\n\t    HashUtils.isObjectEndNotEncoded = function (value) {\n\t        return value.substr(value.length - 1) == HashUtils.DELIMITER.objectEnd;\n\t    };\n\t    HashUtils.isObjectEndEncoded = function (value) {\n\t        return value.indexOf(encodeURIComponent(HashUtils.DELIMITER.objectEnd)) == value.length - encodeURIComponent(HashUtils.DELIMITER.objectEnd).length;\n\t    };\n\t    HashUtils.isObject = function (value) {\n\t        var isObjectStart = HashUtils.isObjectStartNotEncoded(value) || HashUtils.isObjectStartEncoded(value);\n\t        var isObjectEnd = HashUtils.isObjectEndNotEncoded(value) || HashUtils.isObjectEndEncoded(value);\n\t        return isObjectStart && isObjectEnd;\n\t    };\n\t    HashUtils.isArray = function (value) {\n\t        var isArrayStart = HashUtils.isArrayStartNotEncoded(value) || HashUtils.isArrayStartEncoded(value);\n\t        var isArrayEnd = HashUtils.isArrayEndNotEncoded(value) || HashUtils.isArrayEndEncoded(value);\n\t        return isArrayStart && isArrayEnd;\n\t    };\n\t    HashUtils.encodeArray = function (array) {\n\t        var arrayReturn = _.map(array, function (value) {\n\t            return encodeURIComponent(value);\n\t        });\n\t        return HashUtils.DELIMITER.arrayStart + arrayReturn.join(',') + HashUtils.DELIMITER.arrayEnd;\n\t    };\n\t    HashUtils.encodeObject = function (obj) {\n\t        var _this = this;\n\t        var retArray = _.map(obj, function (val, key, obj) {\n\t            return \"\\\"\" + encodeURIComponent(key) + \"\\\":\" + _this.encodeValue(val);\n\t        });\n\t        return HashUtils.DELIMITER.objectStart + retArray.join(' , ') + HashUtils.DELIMITER.objectEnd;\n\t    };\n\t    HashUtils.encodeValue = function (val) {\n\t        var encodedValue = '';\n\t        if (_.isArray(val)) {\n\t            encodedValue = HashUtils.encodeArray(val);\n\t        }\n\t        else if (_.isObject(val)) {\n\t            encodedValue = HashUtils.encodeObject(val);\n\t        }\n\t        else if (_.isNumber(val) || _.isBoolean(val)) {\n\t            encodedValue = encodeURIComponent(val);\n\t        }\n\t        else {\n\t            encodedValue = '\"' + encodeURIComponent(val) + '\"';\n\t        }\n\t        return encodedValue;\n\t    };\n\t    HashUtils.decodeObject = function (obj) {\n\t        if (HashUtils.isObjectStartEncoded(obj) && HashUtils.isObjectEndEncoded(obj)) {\n\t            obj = obj.replace(/encodeURIComponent(HashUtils.Delimiter.objectStart)/, HashUtils.DELIMITER.objectStart);\n\t            obj = obj.replace(encodeURIComponent(HashUtils.DELIMITER.objectEnd), HashUtils.DELIMITER.objectEnd);\n\t        }\n\t        return JSON.parse(decodeURIComponent(obj));\n\t    };\n\t    HashUtils.decodeArray = function (value) {\n\t        if (HashUtils.isArrayStartEncoded(value) && HashUtils.isArrayEndEncoded(value)) {\n\t            value = value.replace(encodeURIComponent(HashUtils.DELIMITER.arrayStart), HashUtils.DELIMITER.arrayStart);\n\t            value = value.replace(encodeURIComponent(HashUtils.DELIMITER.arrayEnd), HashUtils.DELIMITER.arrayEnd);\n\t        }\n\t        value = value.substr(1);\n\t        value = value.substr(0, value.length - 1);\n\t        var array = value.split(',');\n\t        return _.map(array, function (val) {\n\t            return decodeURIComponent(val);\n\t        });\n\t    };\n\t    HashUtils.DELIMITER = {\n\t        'objectStart': '{',\n\t        'objectEnd': '}',\n\t        'arrayStart': '[',\n\t        'arrayEnd': ']',\n\t        'objectStartRegExp': '^{',\n\t        'objectEndRegExp': '}+$',\n\t        'arrayStartRegExp': '^[',\n\t        'arrayEndRegExp': ']+$'\n\t    };\n\t    return HashUtils;\n\t}());\n\texports.HashUtils = HashUtils;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 65 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar StringAndHoles = (function () {\n\t    function StringAndHoles() {\n\t    }\n\t    StringAndHoles.replace = function (str, find, replace) {\n\t        var strAndHoles = new StringAndHoles();\n\t        if (Utils_1.Utils.isNullOrEmptyString(str)) {\n\t            return strAndHoles;\n\t        }\n\t        var index = str.lastIndexOf(find);\n\t        if (index == -1) {\n\t            strAndHoles.value = str;\n\t            return strAndHoles;\n\t        }\n\t        var holes = [];\n\t        while (index >= 0) {\n\t            var hole = {\n\t                begin: index,\n\t                size: find.length,\n\t                replacementSize: replace.length\n\t            };\n\t            holes.push(hole);\n\t            str = str.slice(0, index) + replace + str.slice(index + find.length);\n\t            index = str.lastIndexOf(find);\n\t        }\n\t        strAndHoles.holes = holes;\n\t        strAndHoles.value = str;\n\t        return strAndHoles;\n\t    };\n\t    /**\n\t     * Shorten the passed path intelligently (path-aware).\n\t     * Works with *local paths* and *network paths*\n\t     * @param uriOrig The path to shorten\n\t     * @param length The length to which the path will be shortened.\n\t     */\n\t    StringAndHoles.shortenPath = function (uriOrig, length) {\n\t        var uri = uriOrig;\n\t        var strAndHoles = new StringAndHoles();\n\t        if (Utils_1.Utils.isNullOrEmptyString(uri) || (uri.length <= length)) {\n\t            strAndHoles.value = uri;\n\t            return strAndHoles;\n\t        }\n\t        var holes = [];\n\t        var first = -1;\n\t        if (Utils_1.Utils.stringStartsWith(uri, '\\\\\\\\')) {\n\t            first = uri.indexOf('\\\\', first + 2);\n\t        }\n\t        else {\n\t            first = uri.indexOf('\\\\');\n\t        }\n\t        if (first !== -1) {\n\t            var removed = 0;\n\t            var next = uri.indexOf('\\\\', first + 1);\n\t            while (next !== -1 && uri.length - removed + StringAndHoles.SHORTEN_END.length > length) {\n\t                removed = next - first - 1;\n\t                next = uri.indexOf('\\\\', next + 1);\n\t            }\n\t            if (removed > 0) {\n\t                uri = uri.slice(0, first + 1) + StringAndHoles.SHORTEN_END + uri.slice(removed);\n\t                var hole = {\n\t                    begin: first + 1,\n\t                    size: removed - StringAndHoles.SHORTEN_END.length,\n\t                    replacementSize: StringAndHoles.SHORTEN_END.length\n\t                };\n\t                holes.push(hole);\n\t            }\n\t        }\n\t        if (uri.length > length) {\n\t            var over = uri.length - length + StringAndHoles.SHORTEN_END.length;\n\t            var start = uri.length - over;\n\t            uri = uri.slice(0, start) + StringAndHoles.SHORTEN_END;\n\t            var hole = {\n\t                begin: start,\n\t                size: over,\n\t                replacementSize: StringAndHoles.SHORTEN_END.length\n\t            };\n\t            holes.push(hole);\n\t        }\n\t        strAndHoles.holes = holes;\n\t        strAndHoles.value = uri;\n\t        return strAndHoles;\n\t    };\n\t    /**\n\t     * Shorten the passed string.\n\t     * @param toShortenOrig The string to shorten\n\t     * @param length The length to which the string will be shortened.\n\t     * @param toAppend The string to append at the end (usually, it is set to '...')\n\t     */\n\t    StringAndHoles.shortenString = function (toShortenOrig, length, toAppend) {\n\t        if (length === void 0) { length = 200; }\n\t        var toShorten = toShortenOrig;\n\t        toAppend = Utils_1.Utils.toNotNullString(toAppend);\n\t        var strAndHoles = new StringAndHoles();\n\t        if (Utils_1.Utils.isNullOrEmptyString(toShorten) || length <= toAppend.length) {\n\t            strAndHoles.value = toShorten;\n\t            return strAndHoles;\n\t        }\n\t        if (toShorten.length <= length) {\n\t            strAndHoles.value = toShorten;\n\t            return strAndHoles;\n\t        }\n\t        var str = toShorten;\n\t        length = length - toAppend.length;\n\t        str = str.slice(0, length);\n\t        if (toShorten.charAt(str.length) !== ' ') {\n\t            var pos = str.lastIndexOf(' ');\n\t            if (pos !== -1 && str.length - pos < StringAndHoles.WORD_SHORTER) {\n\t                str = str.slice(0, pos);\n\t            }\n\t        }\n\t        var holes = [];\n\t        holes[0] = {\n\t            begin: str.length,\n\t            size: toShorten.length - str.length,\n\t            replacementSize: toAppend.length\n\t        };\n\t        str += toAppend;\n\t        strAndHoles.value = str;\n\t        strAndHoles.holes = holes;\n\t        return strAndHoles;\n\t    };\n\t    /**\n\t     * Shorten the passed URI intelligently (path-aware).\n\t     * @param toShortenOrig The URI to shorten\n\t     * @param length The length to which the URI will be shortened.\n\t     */\n\t    StringAndHoles.shortenUri = function (uri, length) {\n\t        var strAndHoles = new StringAndHoles();\n\t        if (Utils_1.Utils.isNullOrEmptyString(uri) || (uri.length <= length)) {\n\t            strAndHoles.value = uri;\n\t            return strAndHoles;\n\t        }\n\t        var holes = [];\n\t        var first = uri.indexOf('//');\n\t        if (first !== -1) {\n\t            first = uri.indexOf('/', first + 2);\n\t        }\n\t        if (first !== -1) {\n\t            var removed = 0;\n\t            var next = uri.indexOf('/', first + 1);\n\t            while (next !== -1 && uri.length - removed + StringAndHoles.SHORTEN_END.length > length) {\n\t                removed = next - first - 1;\n\t                next = uri.indexOf('/', next + 1);\n\t            }\n\t            if (removed > 0) {\n\t                uri = uri.slice(0, first + 1) + StringAndHoles.SHORTEN_END + uri.slice(first + 1 + removed);\n\t                var hole = {\n\t                    begin: first + 1,\n\t                    size: removed,\n\t                    replacementSize: StringAndHoles.SHORTEN_END.length\n\t                };\n\t                holes.push(hole);\n\t            }\n\t        }\n\t        if (uri.length > length) {\n\t            var over = uri.length - length + StringAndHoles.SHORTEN_END.length;\n\t            var start = uri.length - over;\n\t            uri = uri.slice(0, start) + StringAndHoles.SHORTEN_END;\n\t            var hole = {\n\t                begin: start,\n\t                size: over,\n\t                replacementSize: StringAndHoles.SHORTEN_END.length\n\t            };\n\t            holes.push(hole);\n\t        }\n\t        strAndHoles.holes = holes;\n\t        strAndHoles.value = uri;\n\t        return strAndHoles;\n\t    };\n\t    StringAndHoles.SHORTEN_END = '...';\n\t    StringAndHoles.WORD_SHORTER = 10;\n\t    return StringAndHoles;\n\t}());\n\texports.StringAndHoles = StringAndHoles;\n\tvar HighlightUtils = (function () {\n\t    function HighlightUtils() {\n\t    }\n\t    /**\n\t     * Highlight the passed string using specified highlights and holes.\n\t     * @param content The string to highlight items in.\n\t     * @param highlights The highlighted positions to highlight in the string.\n\t     * @param holes Possible holes which are used to skip highlighting.\n\t     * @param cssClass The css class to use on the highlighting `span`.\n\t     */\n\t    HighlightUtils.highlightString = function (content, highlights, holes, cssClass) {\n\t        Assert_1.Assert.isNotUndefined(highlights);\n\t        Assert_1.Assert.isNotNull(highlights);\n\t        Assert_1.Assert.isNonEmptyString(cssClass);\n\t        if (Utils_1.Utils.isNullOrEmptyString(content)) {\n\t            return content;\n\t        }\n\t        var last = 0;\n\t        var maxIndex = content.length;\n\t        var highlighted = '';\n\t        for (var i = 0; i < highlights.length; i++) {\n\t            var highlight = highlights[i];\n\t            var start = highlight.offset;\n\t            var end = start + highlight.length;\n\t            if (holes !== null) {\n\t                var skip = false;\n\t                for (var j = 0; j < holes.length; j++) {\n\t                    var hole = holes[j];\n\t                    var holeBegin = hole.begin;\n\t                    var holeEnd = holeBegin + hole.size;\n\t                    if (start < holeBegin && end >= holeBegin && end < holeEnd) {\n\t                        end = holeBegin;\n\t                    }\n\t                    else if (start >= holeBegin && end < holeEnd) {\n\t                        skip = true;\n\t                        break;\n\t                    }\n\t                    else if (start >= holeBegin && start < holeEnd && end >= holeEnd) {\n\t                        start = holeBegin + hole.replacementSize;\n\t                        end -= hole.size - hole.replacementSize;\n\t                    }\n\t                    else if (start < holeBegin && end >= holeEnd) {\n\t                        end -= hole.size - hole.replacementSize;\n\t                    }\n\t                    else if (start >= holeEnd) {\n\t                        var offset = hole.size - hole.replacementSize;\n\t                        start -= offset;\n\t                        end -= offset;\n\t                    }\n\t                }\n\t                if (skip || start === end) {\n\t                    continue;\n\t                }\n\t            }\n\t            if (end > maxIndex) {\n\t                break;\n\t            }\n\t            highlighted += _.escape(content.slice(last, start));\n\t            highlighted += \"<span class=\\\"\" + cssClass + \"\\\"\";\n\t            if (highlight.dataHighlightGroup) {\n\t                highlighted += \" data-highlight-group=\\\"\" + highlight.dataHighlightGroup.toString() + \"\\\"\";\n\t            }\n\t            if (highlight.dataHighlightGroupTerm) {\n\t                highlighted += \" data-highlight-group-term=\\\"\" + highlight.dataHighlightGroupTerm + \"\\\"\";\n\t            }\n\t            highlighted += '>';\n\t            highlighted += _.escape(content.slice(start, end));\n\t            highlighted += '</span>';\n\t            last = end;\n\t        }\n\t        if (last != maxIndex) {\n\t            highlighted += _.escape(content.slice(last));\n\t        }\n\t        return highlighted;\n\t    };\n\t    return HighlightUtils;\n\t}());\n\texports.HighlightUtils = HighlightUtils;\n\tfunction highlightString(value, search) {\n\t    var hightlightTemplate = _.template('<% var i = 0; var lowercaseValue = value.toLowerCase(); while(i < value.length) { %>' +\n\t        '<% var index = lowercaseValue.indexOf(search, i); if(index != -1) { %>' +\n\t        '<% if(i != index){ %> <span><%- value.substr(i, index) %></span><% } %>' +\n\t        '<span class=\"coveo-hightlight\"><%- value.substr(index, search.length) %></span>' +\n\t        '<% i = index + search.length %></span>' +\n\t        '<% } else { %>' +\n\t        '<span><%- value.substr(i) %></span>' +\n\t        '<% i = value.length; %>' +\n\t        '<% } %>' +\n\t        '<% } %>');\n\t    if (_.isEmpty(search)) {\n\t        return value;\n\t    }\n\t    return hightlightTemplate({ value: value, search: search.toLowerCase() });\n\t}\n\texports.highlightString = highlightString;\n\t;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 66 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar DeviceUtils_1 = __webpack_require__(19);\n\tvar HTMLUtils = (function () {\n\t    function HTMLUtils() {\n\t    }\n\t    HTMLUtils.buildAttributeString = function (options) {\n\t        var ret = [];\n\t        _.each(options, function (val, key, obj) {\n\t            if (val != undefined) {\n\t                ret.push(key + '=' + JSON.stringify(val.toString()));\n\t            }\n\t        });\n\t        return ret.join(' ');\n\t    };\n\t    return HTMLUtils;\n\t}());\n\texports.HTMLUtils = HTMLUtils;\n\tvar AnchorUtils = (function () {\n\t    function AnchorUtils() {\n\t    }\n\t    AnchorUtils.buildAnchor = function (href, options) {\n\t        var text;\n\t        if (!options || !options.text) {\n\t            text = href;\n\t        }\n\t        else {\n\t            text = options.text;\n\t            options.text = undefined;\n\t        }\n\t        return \"<a href='\" + href + \" \" + HTMLUtils.buildAttributeString(options) + \" '>\" + text + \"</a>\";\n\t    };\n\t    return AnchorUtils;\n\t}());\n\texports.AnchorUtils = AnchorUtils;\n\tvar ImageUtils = (function () {\n\t    function ImageUtils() {\n\t    }\n\t    ImageUtils.buildImage = function (src, options) {\n\t        var ret = '<img ';\n\t        ret += src ? \"src='\" + src + \"' \" : '';\n\t        ret += HTMLUtils.buildAttributeString(options) + '/>';\n\t        return ret;\n\t    };\n\t    ImageUtils.selectImageFromResult = function (result) {\n\t        return document.querySelector(\"img[data-coveo-uri-hash=\" + result.raw['urihash'] + \"]\");\n\t    };\n\t    ImageUtils.buildImageWithDirectSrcAttribute = function (endpoint, result) {\n\t        var image = new Image();\n\t        var dataStreamUri = endpoint.getViewAsDatastreamUri(result.uniqueId, '$Thumbnail$', { contentType: 'image/png' });\n\t        image.onload = function () {\n\t            ImageUtils.selectImageFromResult(result).setAttribute('src', dataStreamUri);\n\t        };\n\t        image.src = dataStreamUri;\n\t    };\n\t    ImageUtils.buildImageWithBase64SrcAttribute = function (endpoint, result) {\n\t        endpoint.getRawDataStream(result.uniqueId, '$Thumbnail$')\n\t            .then(function (response) {\n\t            var rawBinary = String.fromCharCode.apply(null, new Uint8Array(response));\n\t            ImageUtils.selectImageFromResult(result).setAttribute('src', 'data:image/png;base64, ' + btoa(rawBinary));\n\t        })\n\t            .catch(function () {\n\t            ImageUtils.selectImageFromResult(result).remove();\n\t        });\n\t    };\n\t    ImageUtils.buildImageFromResult = function (result, endpoint, options) {\n\t        options = options ? options : {};\n\t        var img = ImageUtils.buildImage(undefined, _.extend(options, { 'data-coveo-uri-hash': result.raw['urihash'] }));\n\t        if (endpoint.isJsonp() || DeviceUtils_1.DeviceUtils.isIE8or9()) {\n\t            // For jsonp and IE8-9 (XDomain) we can't GET/POST for binary data. We are limited to only setting the src attribute directly on the img.\n\t            ImageUtils.buildImageWithDirectSrcAttribute(endpoint, result);\n\t        }\n\t        else {\n\t            // Base 64 img allows us to GET/POST the image as raw binary, so that we can also pass the credential of the user\n\t            // Useful for phonegap.\n\t            ImageUtils.buildImageWithBase64SrcAttribute(endpoint, result);\n\t        }\n\t        return img;\n\t    };\n\t    return ImageUtils;\n\t}());\n\texports.ImageUtils = ImageUtils;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 67 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Utils_1 = __webpack_require__(17);\n\t(function (KEYBOARD) {\n\t    KEYBOARD[KEYBOARD[\"BACKSPACE\"] = 8] = \"BACKSPACE\";\n\t    KEYBOARD[KEYBOARD[\"TAB\"] = 9] = \"TAB\";\n\t    KEYBOARD[KEYBOARD[\"ENTER\"] = 13] = \"ENTER\";\n\t    KEYBOARD[KEYBOARD[\"SHIFT\"] = 16] = \"SHIFT\";\n\t    KEYBOARD[KEYBOARD[\"CTRL\"] = 17] = \"CTRL\";\n\t    KEYBOARD[KEYBOARD[\"ALT\"] = 18] = \"ALT\";\n\t    KEYBOARD[KEYBOARD[\"ESCAPE\"] = 27] = \"ESCAPE\";\n\t    KEYBOARD[KEYBOARD[\"SPACEBAR\"] = 32] = \"SPACEBAR\";\n\t    KEYBOARD[KEYBOARD[\"PAGE_UP\"] = 33] = \"PAGE_UP\";\n\t    KEYBOARD[KEYBOARD[\"PAGE_DOWN\"] = 34] = \"PAGE_DOWN\";\n\t    KEYBOARD[KEYBOARD[\"HOME\"] = 36] = \"HOME\";\n\t    KEYBOARD[KEYBOARD[\"LEFT_ARROW\"] = 37] = \"LEFT_ARROW\";\n\t    KEYBOARD[KEYBOARD[\"UP_ARROW\"] = 38] = \"UP_ARROW\";\n\t    KEYBOARD[KEYBOARD[\"RIGHT_ARROW\"] = 39] = \"RIGHT_ARROW\";\n\t    KEYBOARD[KEYBOARD[\"DOWN_ARROW\"] = 40] = \"DOWN_ARROW\";\n\t    KEYBOARD[KEYBOARD[\"INSERT\"] = 45] = \"INSERT\";\n\t    KEYBOARD[KEYBOARD[\"DELETE\"] = 46] = \"DELETE\";\n\t})(exports.KEYBOARD || (exports.KEYBOARD = {}));\n\tvar KEYBOARD = exports.KEYBOARD;\n\tvar KeyboardUtils = (function () {\n\t    function KeyboardUtils() {\n\t    }\n\t    KeyboardUtils.keysEqual = function (key, code) {\n\t        if (!Utils_1.Utils.isNullOrUndefined(key.keyCode)) {\n\t            return key.keyCode == code;\n\t        }\n\t        else if (!Utils_1.Utils.isNullOrUndefined(key.which)) {\n\t            return key.which == code;\n\t        }\n\t        return false;\n\t    };\n\t    KeyboardUtils.isAllowedKeyForOmnibox = function (e) {\n\t        var keycode = e.keyCode;\n\t        var valid = (KeyboardUtils.isNumberKeyPushed(keycode)) ||\n\t            (keycode == 32 || keycode == 13) ||\n\t            (KeyboardUtils.isLetterKeyPushed(keycode)) ||\n\t            (keycode > 95 && keycode < 112) ||\n\t            (keycode > 185 && keycode < 193) ||\n\t            (keycode > 218 && keycode < 223) ||\n\t            (keycode == KEYBOARD.BACKSPACE || keycode == KEYBOARD.DELETE) ||\n\t            (KeyboardUtils.isArrowKeyPushed(keycode));\n\t        return valid;\n\t    };\n\t    KeyboardUtils.isAllowedKeyForSearchAsYouType = function (e) {\n\t        return KeyboardUtils.isAllowedKeyForOmnibox(e) && !KeyboardUtils.isArrowKeyPushed(e.keyCode);\n\t    };\n\t    KeyboardUtils.isDeleteOrBackspace = function (e) {\n\t        return KeyboardUtils.keysEqual(e, KEYBOARD.BACKSPACE) || KeyboardUtils.keysEqual(e, KEYBOARD.DELETE);\n\t    };\n\t    KeyboardUtils.isArrowKeyPushed = function (keycode) {\n\t        return keycode == KEYBOARD.LEFT_ARROW ||\n\t            keycode == KEYBOARD.UP_ARROW ||\n\t            keycode == KEYBOARD.RIGHT_ARROW ||\n\t            keycode == KEYBOARD.DOWN_ARROW;\n\t    };\n\t    KeyboardUtils.isNumberKeyPushed = function (keycode) {\n\t        return keycode > 47 && keycode < 58;\n\t    };\n\t    KeyboardUtils.isLetterKeyPushed = function (keycode) {\n\t        return keycode > 64 && keycode < 91;\n\t    };\n\t    // Return a keyboard event listener that only executes the function if certain keys are pressed.\n\t    KeyboardUtils.keypressAction = function (keyCode, action) {\n\t        return function (e) {\n\t            var data = [];\n\t            for (var _i = 1; _i < arguments.length; _i++) {\n\t                data[_i - 1] = arguments[_i];\n\t            }\n\t            var eventCode = (e.charCode || e.keyCode);\n\t            if (_.isArray(keyCode) && _.contains(keyCode, eventCode)) {\n\t                action(e);\n\t            }\n\t            else if (eventCode === keyCode) {\n\t                action(e);\n\t            }\n\t            return false;\n\t        };\n\t    };\n\t    return KeyboardUtils;\n\t}());\n\texports.KeyboardUtils = KeyboardUtils;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 68 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar localStorage = window.localStorage;\n\tvar LocalStorageUtils = (function () {\n\t    function LocalStorageUtils(id) {\n\t        this.id = id;\n\t    }\n\t    LocalStorageUtils.prototype.save = function (data) {\n\t        try {\n\t            if (localStorage != null) {\n\t                localStorage.setItem(this.getLocalStorageKey(), JSON.stringify(data));\n\t            }\n\t        }\n\t        catch (error) {\n\t        }\n\t    };\n\t    LocalStorageUtils.prototype.load = function () {\n\t        try {\n\t            if (localStorage == null) {\n\t                return null;\n\t            }\n\t            var value = localStorage.getItem(this.getLocalStorageKey());\n\t            return value && JSON.parse(value);\n\t        }\n\t        catch (error) {\n\t            return null;\n\t        }\n\t    };\n\t    LocalStorageUtils.prototype.remove = function (key) {\n\t        try {\n\t            if (localStorage != null) {\n\t                if (key == undefined) {\n\t                    localStorage.removeItem(this.getLocalStorageKey());\n\t                }\n\t                else {\n\t                    var oldObj = this.load();\n\t                    delete oldObj[key];\n\t                    this.save(oldObj);\n\t                }\n\t            }\n\t        }\n\t        catch (error) {\n\t        }\n\t    };\n\t    LocalStorageUtils.prototype.getLocalStorageKey = function () {\n\t        return 'coveo-' + this.id;\n\t    };\n\t    return LocalStorageUtils;\n\t}());\n\texports.LocalStorageUtils = LocalStorageUtils;\n\n\n/***/ },\n/* 69 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t(function (OS_NAME) {\n\t    OS_NAME[OS_NAME[\"WINDOWS\"] = 0] = \"WINDOWS\";\n\t    OS_NAME[OS_NAME[\"MACOSX\"] = 1] = \"MACOSX\";\n\t    OS_NAME[OS_NAME[\"UNIX\"] = 2] = \"UNIX\";\n\t    OS_NAME[OS_NAME[\"LINUX\"] = 3] = \"LINUX\";\n\t    OS_NAME[OS_NAME[\"UNKNOWN\"] = 4] = \"UNKNOWN\";\n\t})(exports.OS_NAME || (exports.OS_NAME = {}));\n\tvar OS_NAME = exports.OS_NAME;\n\tvar OSUtils = (function () {\n\t    function OSUtils() {\n\t    }\n\t    OSUtils.get = function (nav) {\n\t        if (nav === void 0) { nav = navigator; }\n\t        var osName;\n\t        if (nav.appVersion.indexOf('Win') != -1) {\n\t            osName = OS_NAME.WINDOWS;\n\t        }\n\t        else if (nav.appVersion.indexOf('Mac') != -1) {\n\t            osName = OS_NAME.MACOSX;\n\t        }\n\t        else if (nav.appVersion.indexOf('X11') != -1) {\n\t            osName = OS_NAME.UNIX;\n\t        }\n\t        else if (nav.appVersion.indexOf('Linux') != -1) {\n\t            osName = OS_NAME.LINUX;\n\t        }\n\t        else {\n\t            osName = OS_NAME.UNKNOWN;\n\t        }\n\t        return osName;\n\t    };\n\t    return OSUtils;\n\t}());\n\texports.OSUtils = OSUtils;\n\n\n/***/ },\n/* 70 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Dom_1 = __webpack_require__(56);\n\t(function (VerticalAlignment) {\n\t    VerticalAlignment[VerticalAlignment[\"TOP\"] = 0] = \"TOP\";\n\t    VerticalAlignment[VerticalAlignment[\"MIDDLE\"] = 1] = \"MIDDLE\";\n\t    VerticalAlignment[VerticalAlignment[\"BOTTOM\"] = 2] = \"BOTTOM\";\n\t    VerticalAlignment[VerticalAlignment[\"INNERTOP\"] = 3] = \"INNERTOP\";\n\t    VerticalAlignment[VerticalAlignment[\"INNERBOTTOM\"] = 4] = \"INNERBOTTOM\";\n\t})(exports.VerticalAlignment || (exports.VerticalAlignment = {}));\n\tvar VerticalAlignment = exports.VerticalAlignment;\n\t(function (HorizontalAlignment) {\n\t    HorizontalAlignment[HorizontalAlignment[\"LEFT\"] = 0] = \"LEFT\";\n\t    HorizontalAlignment[HorizontalAlignment[\"CENTER\"] = 1] = \"CENTER\";\n\t    HorizontalAlignment[HorizontalAlignment[\"RIGHT\"] = 2] = \"RIGHT\";\n\t    HorizontalAlignment[HorizontalAlignment[\"INNERLEFT\"] = 3] = \"INNERLEFT\";\n\t    HorizontalAlignment[HorizontalAlignment[\"INNERRIGHT\"] = 4] = \"INNERRIGHT\";\n\t})(exports.HorizontalAlignment || (exports.HorizontalAlignment = {}));\n\tvar HorizontalAlignment = exports.HorizontalAlignment;\n\tvar PopupUtils = (function () {\n\t    function PopupUtils() {\n\t    }\n\t    PopupUtils.positionPopup = function (popUp, nextTo, boundary, desiredPosition, appendTo, checkForBoundary) {\n\t        if (checkForBoundary === void 0) { checkForBoundary = 0; }\n\t        popUp.style.position = 'absolute';\n\t        if (appendTo) {\n\t            Dom_1.$$(appendTo).append(popUp);\n\t        }\n\t        desiredPosition.verticalOffset = desiredPosition.verticalOffset ? desiredPosition.verticalOffset : 0;\n\t        desiredPosition.horizontalOffset = desiredPosition.horizontalOffset ? desiredPosition.horizontalOffset : 0;\n\t        var popUpPosition = Dom_1.$$(nextTo).offset();\n\t        PopupUtils.basicVerticalAlignment(popUpPosition, popUp, nextTo, desiredPosition);\n\t        PopupUtils.basicHorizontalAlignment(popUpPosition, popUp, nextTo, desiredPosition);\n\t        PopupUtils.finalAdjustement(Dom_1.$$(popUp).offset(), popUpPosition, popUp, desiredPosition);\n\t        var popUpBoundary = PopupUtils.getBoundary(popUp);\n\t        var boundaryPosition = PopupUtils.getBoundary(boundary);\n\t        if (checkForBoundary < 2) {\n\t            var checkBoundary = PopupUtils.checkForOutOfBoundary(popUpBoundary, boundaryPosition);\n\t            if (checkBoundary.horizontal != 'ok' && desiredPosition.horizontalClip === true) {\n\t                var width = popUp.offsetWidth;\n\t                if (popUpBoundary.left < boundaryPosition.left) {\n\t                    width -= boundaryPosition.left - popUpBoundary.left;\n\t                }\n\t                if (popUpBoundary.right > boundaryPosition.right) {\n\t                    width -= popUpBoundary.right - boundaryPosition.right;\n\t                }\n\t                popUp.style.width = width + 'px';\n\t                checkBoundary.horizontal = 'ok';\n\t            }\n\t            if (checkBoundary.vertical != 'ok' || checkBoundary.horizontal != 'ok') {\n\t                var newDesiredPosition = PopupUtils.alignInsideBoundary(desiredPosition, checkBoundary);\n\t                PopupUtils.positionPopup(popUp, nextTo, boundary, newDesiredPosition, appendTo, checkForBoundary + 1);\n\t            }\n\t        }\n\t    };\n\t    PopupUtils.finalAdjustement = function (popUpOffSet, popUpPosition, popUp, desiredPosition) {\n\t        var position = Dom_1.$$(popUp).position();\n\t        popUp.style.top = (position.top + desiredPosition.verticalOffset) - (popUpOffSet.top - popUpPosition.top) + 'px';\n\t        popUp.style.left = (position.left + desiredPosition.horizontalOffset) - (popUpOffSet.left - popUpPosition.left) + 'px';\n\t    };\n\t    PopupUtils.basicVerticalAlignment = function (popUpPosition, popUp, nextTo, desiredPosition) {\n\t        switch (desiredPosition.vertical) {\n\t            case VerticalAlignment.TOP:\n\t                popUpPosition.top -= popUp.offsetHeight;\n\t                break;\n\t            case VerticalAlignment.BOTTOM:\n\t                popUpPosition.top += nextTo.offsetHeight;\n\t                break;\n\t            case VerticalAlignment.MIDDLE:\n\t                popUpPosition.top -= popUp.offsetHeight / 3;\n\t            case VerticalAlignment.INNERTOP:\n\t                break; // Nothing to do, it's the default alignment normally\n\t            case VerticalAlignment.INNERBOTTOM:\n\t                popUpPosition.top -= popUp.offsetHeight - nextTo.offsetHeight;\n\t                break;\n\t            default:\n\t                break;\n\t        }\n\t    };\n\t    PopupUtils.basicHorizontalAlignment = function (popUpPosition, popUp, nextTo, desiredPosition) {\n\t        switch (desiredPosition.horizontal) {\n\t            case HorizontalAlignment.LEFT:\n\t                popUpPosition.left -= popUp.offsetWidth;\n\t                break;\n\t            case HorizontalAlignment.RIGHT:\n\t                popUpPosition.left += nextTo.offsetWidth;\n\t                break;\n\t            case HorizontalAlignment.CENTER:\n\t                popUpPosition.left += PopupUtils.offSetToAlignCenter(popUp, nextTo);\n\t                break;\n\t            case HorizontalAlignment.INNERLEFT:\n\t                break; // Nothing to do, it's the default alignment normally\n\t            case HorizontalAlignment.INNERRIGHT:\n\t                popUpPosition.left -= popUp.offsetWidth - nextTo.offsetWidth;\n\t                break;\n\t            default:\n\t                break;\n\t        }\n\t    };\n\t    PopupUtils.alignInsideBoundary = function (oldPosition, checkBoundary) {\n\t        var newDesiredPosition = oldPosition;\n\t        if (checkBoundary.horizontal == 'left') {\n\t            newDesiredPosition.horizontal = HorizontalAlignment.RIGHT;\n\t        }\n\t        if (checkBoundary.horizontal == 'right') {\n\t            newDesiredPosition.horizontal = HorizontalAlignment.LEFT;\n\t        }\n\t        if (checkBoundary.vertical == 'top') {\n\t            newDesiredPosition.vertical = VerticalAlignment.BOTTOM;\n\t        }\n\t        if (checkBoundary.vertical == 'bottom') {\n\t            newDesiredPosition.vertical = VerticalAlignment.TOP;\n\t        }\n\t        return newDesiredPosition;\n\t    };\n\t    PopupUtils.offSetToAlignCenter = function (popUp, nextTo) {\n\t        return (nextTo.offsetWidth - popUp.offsetWidth) / 2;\n\t    };\n\t    PopupUtils.getBoundary = function (element) {\n\t        var boundaryOffset = Dom_1.$$(element).offset();\n\t        var toAddVertically;\n\t        if (element.tagName.toLowerCase() == 'body') {\n\t            toAddVertically = Math.max(element.scrollHeight, element.offsetHeight);\n\t        }\n\t        else if (element.tagName.toLowerCase() == 'html') {\n\t            toAddVertically = Math.max(element.clientHeight, element.scrollHeight, element.offsetHeight);\n\t        }\n\t        else {\n\t            toAddVertically = element.offsetHeight;\n\t        }\n\t        return {\n\t            top: boundaryOffset.top,\n\t            left: boundaryOffset.left,\n\t            right: boundaryOffset.left + element.offsetWidth,\n\t            bottom: boundaryOffset.top + toAddVertically\n\t        };\n\t    };\n\t    PopupUtils.checkForOutOfBoundary = function (popUpBoundary, boundary) {\n\t        var ret = {\n\t            vertical: 'ok',\n\t            horizontal: 'ok'\n\t        };\n\t        if (popUpBoundary.top < boundary.top) {\n\t            ret.vertical = 'top';\n\t        }\n\t        if (popUpBoundary.bottom > boundary.bottom) {\n\t            ret.vertical = 'bottom';\n\t        }\n\t        if (popUpBoundary.left < boundary.left) {\n\t            ret.horizontal = 'left';\n\t        }\n\t        if (popUpBoundary.right > boundary.right) {\n\t            ret.horizontal = 'right';\n\t        }\n\t        return ret;\n\t    };\n\t    return PopupUtils;\n\t}());\n\texports.PopupUtils = PopupUtils;\n\n\n/***/ },\n/* 71 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Options_1 = __webpack_require__(32);\n\tvar HighlightUtils_1 = __webpack_require__(65);\n\tvar StringUtils_1 = __webpack_require__(60);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Dom_1 = __webpack_require__(56);\n\t// \\u2011: http://graphemica.com/%E2%80%91\n\tvar nonWordBoundary = '[\\\\.\\\\-\\\\u2011\\\\s~=,.\\\\|\\\\/:\\'`’;_()!?]';\n\tvar regexStart = '(' + nonWordBoundary + '|^)(';\n\tvar DefaultStreamHighlightOptions = (function (_super) {\n\t    __extends(DefaultStreamHighlightOptions, _super);\n\t    function DefaultStreamHighlightOptions(cssClass, shorten, regexFlags) {\n\t        if (cssClass === void 0) { cssClass = 'coveo-highlight'; }\n\t        if (shorten === void 0) { shorten = 0; }\n\t        if (regexFlags === void 0) { regexFlags = 'gi'; }\n\t        _super.call(this);\n\t        this.cssClass = cssClass;\n\t        this.shorten = shorten;\n\t        this.regexFlags = regexFlags;\n\t    }\n\t    return DefaultStreamHighlightOptions;\n\t}(Options_1.Options));\n\tvar StreamHighlightUtils = (function () {\n\t    function StreamHighlightUtils() {\n\t    }\n\t    StreamHighlightUtils.highlightStreamHTML = function (stream, termsToHighlight, phrasesToHighlight, options) {\n\t        var opts = new DefaultStreamHighlightOptions().merge(options);\n\t        var container = createStreamHTMLContainer(stream);\n\t        _.each(Dom_1.$$(container).findAll('*'), function (elem, i) {\n\t            var text = Dom_1.$$(elem).text();\n\t            elem.innerHTML = HighlightUtils_1.HighlightUtils.highlightString(text, getRestHighlightsForAllTerms(text, termsToHighlight, phrasesToHighlight, opts), [], opts.cssClass);\n\t        });\n\t        return container.innerHTML;\n\t    };\n\t    StreamHighlightUtils.highlightStreamText = function (stream, termsToHighlight, phrasesToHighlight, options) {\n\t        var opts = new DefaultStreamHighlightOptions().merge(options);\n\t        return HighlightUtils_1.HighlightUtils.highlightString(stream, getRestHighlightsForAllTerms(stream, termsToHighlight, phrasesToHighlight, opts), [], opts.cssClass);\n\t    };\n\t    return StreamHighlightUtils;\n\t}());\n\texports.StreamHighlightUtils = StreamHighlightUtils;\n\tfunction getRestHighlightsForAllTerms(toHighlight, termsToHighlight, phrasesToHighlight, opts) {\n\t    var indexes = [];\n\t    var sortedTerms = _.keys(termsToHighlight).sort(termsSorting);\n\t    _.each(sortedTerms, function (term) {\n\t        var termsToIterate = _.compact([term].concat(termsToHighlight[term]).sort(termsSorting));\n\t        var regex = regexStart;\n\t        regex += termsToIterate.join('|') + ')(?=(?:' + nonWordBoundary + '|$)+)';\n\t        var indexesFound = StringUtils_1.StringUtils.getHighlights(toHighlight, new RegExp(regex, opts.regexFlags), term);\n\t        if (indexesFound != undefined && Utils_1.Utils.isNonEmptyArray(indexesFound)) {\n\t            indexes.push(indexesFound);\n\t        }\n\t    });\n\t    _.each(phrasesToHighlight, function (phrase, origPhrase) {\n\t        var split = origPhrase.split(' ');\n\t        var regex = regexStart;\n\t        _.each(split, function (origWord, i) {\n\t            regex += '(?:' + [origWord].concat(phrase[origWord]).join('|') + ')';\n\t            if (i == split.length - 1) {\n\t                regex += '(?=';\n\t            }\n\t            regex += nonWordBoundary;\n\t            if (i == split.length - 1) {\n\t                regex += ')';\n\t            }\n\t            if (i != split.length - 1) {\n\t                regex += '+';\n\t            }\n\t        });\n\t        regex += ')';\n\t        var indexesFound = StringUtils_1.StringUtils.getHighlights(toHighlight, new RegExp(regex, opts.regexFlags), origPhrase);\n\t        if (indexesFound != undefined && Utils_1.Utils.isNonEmptyArray(indexesFound)) {\n\t            indexes.push(indexesFound);\n\t        }\n\t    });\n\t    return _.chain(indexes)\n\t        .flatten()\n\t        .compact()\n\t        .uniq(function (highlight) {\n\t        return highlight.offset;\n\t    })\n\t        .sortBy(function (highlight) {\n\t        return highlight.offset;\n\t    })\n\t        .map(function (highlight) {\n\t        var keysFromTerms = _.keys(termsToHighlight);\n\t        var keysFromPhrases = _.keys(phrasesToHighlight);\n\t        var keys = keysFromTerms.concat(keysFromPhrases);\n\t        var group = _.indexOf(keys, highlight.dataHighlightGroupTerm) + 1;\n\t        return _.extend(highlight, { dataHighlightGroup: group });\n\t    })\n\t        .value();\n\t}\n\tfunction termsSorting(first, second) {\n\t    return first.length - second.length;\n\t}\n\tfunction createStreamHTMLContainer(stream) {\n\t    var container = Dom_1.$$('div').el;\n\t    container.innerHTML = stream;\n\t    return container;\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 72 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar QueryController_1 = __webpack_require__(73);\n\texports.QueryController = QueryController_1.QueryController;\n\tvar FacetQueryController_1 = __webpack_require__(79);\n\texports.FacetQueryController = FacetQueryController_1.FacetQueryController;\n\tvar FacetRangeQueryController_1 = __webpack_require__(82);\n\texports.FacetRangeQueryController = FacetRangeQueryController_1.FacetRangeQueryController;\n\tvar FacetSliderQueryController_1 = __webpack_require__(83);\n\texports.FacetSliderQueryController = FacetSliderQueryController_1.FacetSliderQueryController;\n\tvar HierarchicalFacetQueryController_1 = __webpack_require__(84);\n\texports.HierarchicalFacetQueryController = HierarchicalFacetQueryController_1.HierarchicalFacetQueryController;\n\tvar HistoryController_1 = __webpack_require__(85);\n\texports.HistoryController = HistoryController_1.HistoryController;\n\tvar LocalStorageHistoryController_1 = __webpack_require__(87);\n\texports.LocalStorageHistoryController = LocalStorageHistoryController_1.LocalStorageHistoryController;\n\n\n/***/ },\n/* 73 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar RootComponent_1 = __webpack_require__(74);\n\tvar QueryBuilder_1 = __webpack_require__(76);\n\tvar LocalStorageUtils_1 = __webpack_require__(68);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar SearchEndpointWithDefaultCallOptions_1 = __webpack_require__(78);\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar QueryUtils_1 = __webpack_require__(22);\n\tvar Defer_1 = __webpack_require__(30);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar es6_promise_1 = __webpack_require__(6);\n\tvar BaseComponent_1 = __webpack_require__(75);\n\tvar ExternalModulesShim_1 = __webpack_require__(24);\n\tvar DefaultQueryOptions = (function () {\n\t    function DefaultQueryOptions() {\n\t        this.searchAsYouType = false;\n\t        this.closeModalBox = true;\n\t        this.cancel = false;\n\t        this.logInActionsHistory = false;\n\t    }\n\t    return DefaultQueryOptions;\n\t}());\n\t/**\n\t * This class is automatically instantiated and bound to the root of your search interface when you initialize the framework.<br/>\n\t * It is essentially a singleton that wraps the access to the {@link SearchEndpoint} endpoint to execute query, and is in charge of triggering the different query events.<br/>\n\t * This is what every component of the framework uses internally to execute query or access the endpoint.<br/>\n\t * When calling <code>Coveo.executeQuery</code> this class is used.\n\t */\n\tvar QueryController = (function (_super) {\n\t    __extends(QueryController, _super);\n\t    /**\n\t     * Create a new query controller\n\t     * @param element\n\t     * @param options\n\t     */\n\t    function QueryController(element, options, usageAnalytics, searchInterface) {\n\t        _super.call(this, element, QueryController.ID);\n\t        this.options = options;\n\t        this.usageAnalytics = usageAnalytics;\n\t        this.searchInterface = searchInterface;\n\t        this.showingExecutingQueryAnimation = false;\n\t        this.localStorage = new LocalStorageUtils_1.LocalStorageUtils('lastQueryHash');\n\t        Assert_1.Assert.exists(element);\n\t        Assert_1.Assert.exists(options);\n\t        this.firstQuery = true;\n\t    }\n\t    /**\n\t     * Set the {@link SearchEndpoint} that the query controller should use to execute query\n\t     * @param endpoint\n\t     */\n\t    QueryController.prototype.setEndpoint = function (endpoint) {\n\t        this.overrideEndpoint = endpoint;\n\t        this.logger.debug('Endpoint set', endpoint);\n\t    };\n\t    /**\n\t     * Get the {@link SearchEndpoint} that is currently used by the query controller to execute query\n\t     * @returns {SearchEndpoint}\n\t     */\n\t    QueryController.prototype.getEndpoint = function () {\n\t        var endpoint = this.overrideEndpoint || this.options.endpoint;\n\t        // We must wrap the endpoint in a decorator that'll add the call options\n\t        // we obtain by firing the proper event. Those are used for authentication\n\t        // providers, and I guess other stuff later on.\n\t        return new SearchEndpointWithDefaultCallOptions_1.SearchEndpointWithDefaultCallOptions(endpoint, this.getCallOptions());\n\t    };\n\t    /**\n\t     * Return the last query that was performed by the query controller\n\t     * @returns {IQuery|Query}\n\t     */\n\t    QueryController.prototype.getLastQuery = function () {\n\t        return this.lastQuery || new QueryBuilder_1.QueryBuilder().build();\n\t    };\n\t    /**\n\t     * Execute a query and return a Promise of IQueryResults.<br/>\n\t     * This will execute the normal query flow, triggering all the necessary query events (newQuery <br/>\n\t     * All components present in the interface will act accordingly (modify the query and render results if needed).\n\t     * @param options\n\t     * @returns {Promise<IQueryResults>}\n\t     */\n\t    QueryController.prototype.executeQuery = function (options) {\n\t        var _this = this;\n\t        options = _.extend(new DefaultQueryOptions(), options);\n\t        if (options.closeModalBox) {\n\t            ExternalModulesShim_1.ModalBox.close(true);\n\t        }\n\t        this.logger.debug('Executing new query');\n\t        this.cancelAnyCurrentPendingQuery();\n\t        if (options.beforeExecuteQuery != null) {\n\t            options.beforeExecuteQuery();\n\t        }\n\t        if (!options.ignoreWarningSearchEvent) {\n\t            this.usageAnalytics.warnAboutSearchEvent();\n\t        }\n\t        this.showExecutingQueryAnimation();\n\t        var dataToSendOnNewQuery = {\n\t            searchAsYouType: options.searchAsYouType,\n\t            cancel: options.cancel,\n\t            origin: options.origin\n\t        };\n\t        this.newQueryEvent(dataToSendOnNewQuery);\n\t        if (dataToSendOnNewQuery.cancel) {\n\t            this.cancelQuery();\n\t            return;\n\t        }\n\t        var queryBuilder = this.createQueryBuilder(options);\n\t        // The query was canceled\n\t        if (!queryBuilder) {\n\t            return;\n\t        }\n\t        var query = queryBuilder.build();\n\t        if (options.logInActionsHistory) {\n\t            this.logQueryInActionsHistory(query, options.isFirstQuery);\n\t        }\n\t        var endpointToUse = this.getEndpoint();\n\t        var promise = this.currentPendingQuery = endpointToUse.search(query);\n\t        promise.then(function (queryResults) {\n\t            Assert_1.Assert.exists(queryResults);\n\t            var firstQuery = _this.firstQuery;\n\t            if (_this.firstQuery) {\n\t                _this.firstQuery = false;\n\t            }\n\t            // If our promise is no longer the current one, then the query\n\t            // has been cancel. We should do nothing here.\n\t            if (promise !== _this.currentPendingQuery) {\n\t                return;\n\t            }\n\t            _this.logger.debug('Query results received', query, queryResults);\n\t            var enableHistory = _this.searchInterface && _this.searchInterface.options && _this.searchInterface.options.enableHistory;\n\t            if ((!firstQuery || enableHistory) && _this.keepLastSearchUid(query, queryResults)) {\n\t                queryResults.searchUid = _this.getLastSearchUid();\n\t                queryResults._reusedSearchUid = true;\n\t                QueryUtils_1.QueryUtils.setPropertyOnResults(queryResults, 'queryUid', _this.getLastSearchUid());\n\t            }\n\t            else {\n\t                _this.lastQueryHash = _this.queryHash(query, queryResults);\n\t                _this.lastSearchUid = queryResults.searchUid;\n\t            }\n\t            _this.lastQuery = query;\n\t            _this.lastQueryResults = queryResults;\n\t            _this.currentError = null;\n\t            var dataToSendOnPreprocessResult = {\n\t                queryBuilder: queryBuilder,\n\t                query: query,\n\t                results: queryResults,\n\t                searchAsYouType: options.searchAsYouType\n\t            };\n\t            _this.preprocessResultsEvent(dataToSendOnPreprocessResult);\n\t            var dataToSendOnNoResult = {\n\t                queryBuilder: queryBuilder,\n\t                query: query,\n\t                results: queryResults,\n\t                searchAsYouType: options.searchAsYouType,\n\t                retryTheQuery: false\n\t            };\n\t            if (queryResults.results.length == 0) {\n\t                _this.noResultEvent(dataToSendOnNoResult);\n\t            }\n\t            if (dataToSendOnNoResult.retryTheQuery) {\n\t                // When retrying the query, we must forward the results to the deferred we\n\t                // initially returned, in case someone is listening on it.\n\t                return _this.executeQuery();\n\t            }\n\t            else {\n\t                _this.lastQueryBuilder = queryBuilder;\n\t                _this.currentPendingQuery = undefined;\n\t                var dataToSendOnSuccess_1 = {\n\t                    queryBuilder: queryBuilder,\n\t                    query: query,\n\t                    results: queryResults,\n\t                    searchAsYouType: options.searchAsYouType\n\t                };\n\t                _this.querySuccessEvent(dataToSendOnSuccess_1);\n\t                Defer_1.Defer.defer(function () {\n\t                    _this.deferredQuerySuccessEvent(dataToSendOnSuccess_1);\n\t                    _this.hideExecutingQueryAnimation();\n\t                });\n\t                return queryResults;\n\t            }\n\t        }).catch(function (error) {\n\t            // If our deferred is no longer the current one, then the query\n\t            // has been cancel. We should do nothing here.\n\t            if (promise !== _this.currentPendingQuery) {\n\t                return;\n\t            }\n\t            _this.logger.error('Query triggered an error', query, error);\n\t            // this.currentPendingQuery.reject(error);\n\t            _this.currentPendingQuery = undefined;\n\t            var dataToSendOnError = {\n\t                queryBuilder: queryBuilder,\n\t                endpoint: endpointToUse,\n\t                query: query,\n\t                error: error,\n\t                searchAsYouType: options.searchAsYouType\n\t            };\n\t            _this.lastQuery = query;\n\t            _this.lastQueryResults = null;\n\t            _this.currentError = error;\n\t            _this.queryError(dataToSendOnError);\n\t            _this.hideExecutingQueryAnimation();\n\t        });\n\t        var dataToSendDuringQuery = {\n\t            queryBuilder: queryBuilder,\n\t            query: query,\n\t            searchAsYouType: options.searchAsYouType,\n\t            promise: promise\n\t        };\n\t        this.duringQueryEvent(dataToSendDuringQuery);\n\t        return this.currentPendingQuery;\n\t    };\n\t    /**\n\t     * Using the same parameters as the last successful query, fetch another batch of results. Particularly useful for infinite scrolling, for example.\n\t     * @param count\n\t     * @returns {any}\n\t     */\n\t    QueryController.prototype.fetchMore = function (count) {\n\t        var _this = this;\n\t        if (this.currentPendingQuery != undefined) {\n\t            return undefined;\n\t        }\n\t        // Send all pending events (think : search as you type)\n\t        // This allows us to get the real search id for the results when the query returns\n\t        this.usageAnalytics.sendAllPendingEvents();\n\t        var queryBuilder = new QueryBuilder_1.QueryBuilder();\n\t        this.continueLastQueryBuilder(queryBuilder, count);\n\t        var query = queryBuilder.build();\n\t        var endpointToUse = this.getEndpoint();\n\t        var promise = this.currentPendingQuery = endpointToUse.search(query);\n\t        var dataToSendDuringQuery = {\n\t            queryBuilder: queryBuilder,\n\t            query: query,\n\t            searchAsYouType: false,\n\t            promise: promise\n\t        };\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.duringFetchMoreQuery, dataToSendDuringQuery);\n\t        this.lastQueryBuilder = queryBuilder;\n\t        this.lastQuery = query;\n\t        promise.then(function (results) {\n\t            // We re-use the search id from the initial search here, even though the\n\t            // server provided us with a new one. 'Fetch mores' are considered to be\n\t            // the same query from an analytics point of view.\n\t            _this.currentPendingQuery = undefined;\n\t            if (_this.lastQueryResults == null) {\n\t                _this.lastQueryResults = results;\n\t            }\n\t            else {\n\t                _.forEach(results.results, function (result) {\n\t                    _this.lastQueryResults.results.push(result);\n\t                });\n\t            }\n\t            var dataToSendOnPreprocessResult = {\n\t                queryBuilder: queryBuilder,\n\t                query: query,\n\t                results: results,\n\t                searchAsYouType: false\n\t            };\n\t            _this.preprocessResultsEvent(dataToSendOnPreprocessResult);\n\t            QueryUtils_1.QueryUtils.setIndexAndUidOnQueryResults(query, results, _this.getLastSearchUid(), results.pipeline, results.splitTestRun);\n\t            var dataToSendOnFetchMoreSuccess = {\n\t                query: query,\n\t                results: results,\n\t                queryBuilder: queryBuilder,\n\t                searchAsYouType: false\n\t            };\n\t            _this.fetchMoreSuccessEvent(dataToSendOnFetchMoreSuccess);\n\t        });\n\t        return this.currentPendingQuery;\n\t    };\n\t    /**\n\t     * Cancel any pending query\n\t     */\n\t    QueryController.prototype.cancelQuery = function () {\n\t        this.cancelAnyCurrentPendingQuery();\n\t        this.hideExecutingQueryAnimation();\n\t    };\n\t    QueryController.prototype.deferExecuteQuery = function (options) {\n\t        var _this = this;\n\t        this.showExecutingQueryAnimation();\n\t        Defer_1.Defer.defer(function () { return _this.executeQuery(options); });\n\t    };\n\t    QueryController.prototype.ensureCreatedQueryBuilder = function () {\n\t        if (!this.createdOneQueryBuilder) {\n\t            this.createQueryBuilder(new DefaultQueryOptions());\n\t        }\n\t    };\n\t    QueryController.prototype.createQueryBuilder = function (options) {\n\t        Assert_1.Assert.exists(options);\n\t        this.createdOneQueryBuilder = true;\n\t        var queryBuilder = new QueryBuilder_1.QueryBuilder();\n\t        // Default values, components will probably override them if they exists\n\t        queryBuilder.language = String['locale'];\n\t        queryBuilder.firstResult = queryBuilder.firstResult || 0;\n\t        // Allow outside code to customize the query builder. We provide two events,\n\t        // to allow someone to have a peep at the query builder after the first phase\n\t        // and add some stuff depending on what was put in there. The facets are using\n\t        // this mechanism to generate query overrides.\n\t        var dataToSendDuringBuildingQuery = {\n\t            queryBuilder: queryBuilder,\n\t            searchAsYouType: options.searchAsYouType,\n\t            cancel: options.cancel\n\t        };\n\t        this.buildingQueryEvent(dataToSendDuringBuildingQuery);\n\t        var dataToSendDuringDoneBuildingQuery = {\n\t            queryBuilder: queryBuilder,\n\t            searchAsYouType: options.searchAsYouType,\n\t            cancel: options.cancel\n\t        };\n\t        this.doneBuildingQueryEvent(dataToSendDuringDoneBuildingQuery);\n\t        if (dataToSendDuringBuildingQuery.cancel || dataToSendDuringDoneBuildingQuery.cancel) {\n\t            this.cancelQuery();\n\t            return;\n\t        }\n\t        var pipeline = this.getPipelineInUrl();\n\t        if (pipeline) {\n\t            queryBuilder.pipeline = pipeline;\n\t        }\n\t        return queryBuilder;\n\t    };\n\t    QueryController.prototype.isStandaloneSearchbox = function () {\n\t        return Utils_1.Utils.isNonEmptyString(this.options.searchPageUri);\n\t    };\n\t    QueryController.prototype.saveLastQuery = function () {\n\t        this.localStorage.save({\n\t            expire: new Date().getTime() + 1000 * 60 * 30,\n\t            hash: this.lastQueryHash,\n\t            uid: this.lastSearchUid\n\t        });\n\t    };\n\t    // This field is exposed for components rendered in the results or on-demand which\n\t    // need access to the entire query. For example, the QuickviewDocument need to pass\n\t    // the entire query to the Search API. For other components, QueryStateModel or\n\t    // listening to events like 'doneBuildingQuery' is the way to go.\n\t    QueryController.prototype.getLastQueryHash = function () {\n\t        if (this.lastQueryHash != null) {\n\t            return this.lastQueryHash;\n\t        }\n\t        this.loadLastQueryHash();\n\t        return this.lastQueryHash || this.queryHash(new QueryBuilder_1.QueryBuilder().build());\n\t    };\n\t    QueryController.prototype.getLastSearchUid = function () {\n\t        if (this.lastSearchUid != null) {\n\t            return this.lastSearchUid;\n\t        }\n\t        this.loadLastQueryHash();\n\t        return this.lastSearchUid;\n\t    };\n\t    QueryController.prototype.loadLastQueryHash = function () {\n\t        var lastQuery = this.localStorage.load();\n\t        if (lastQuery != null && new Date().getTime() <= lastQuery.expire) {\n\t            this.lastQueryHash = lastQuery.hash;\n\t            this.lastSearchUid = lastQuery.uid;\n\t            this.localStorage.remove();\n\t        }\n\t    };\n\t    QueryController.prototype.continueLastQueryBuilder = function (queryBuilder, count) {\n\t        _.extend(queryBuilder, this.lastQueryBuilder);\n\t        queryBuilder.firstResult = queryBuilder.firstResult + queryBuilder.numberOfResults;\n\t        queryBuilder.numberOfResults = count;\n\t    };\n\t    QueryController.prototype.getPipelineInUrl = function () {\n\t        return QueryUtils_1.QueryUtils.getUrlParameter('pipeline');\n\t    };\n\t    QueryController.prototype.cancelAnyCurrentPendingQuery = function () {\n\t        if (Utils_1.Utils.exists(this.currentPendingQuery)) {\n\t            this.logger.debug('Cancelling current pending query');\n\t            es6_promise_1.Promise.reject(this.currentPendingQuery);\n\t            this.currentPendingQuery = undefined;\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    QueryController.prototype.showExecutingQueryAnimation = function () {\n\t        if (!this.showingExecutingQueryAnimation) {\n\t            Dom_1.$$(this.element).addClass('coveo-executing-query');\n\t            this.showingExecutingQueryAnimation = true;\n\t        }\n\t    };\n\t    QueryController.prototype.hideExecutingQueryAnimation = function () {\n\t        if (this.showingExecutingQueryAnimation) {\n\t            Dom_1.$$(this.element).removeClass('coveo-executing-query');\n\t            this.showingExecutingQueryAnimation = false;\n\t        }\n\t    };\n\t    QueryController.prototype.keepLastSearchUid = function (query, queryResults) {\n\t        return this.getLastQueryHash() == this.queryHash(query, queryResults);\n\t    };\n\t    QueryController.prototype.queryHash = function (query, queryResults) {\n\t        var queryHash = JSON.stringify(_.omit(query, 'firstResult', 'groupBy', 'debug'));\n\t        if (queryResults != null) {\n\t            queryHash += queryResults.pipeline;\n\t        }\n\t        return queryHash;\n\t    };\n\t    QueryController.prototype.getCallOptions = function () {\n\t        var args = {\n\t            options: {\n\t                authentication: []\n\t            }\n\t        };\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.buildingCallOptions, args);\n\t        return args.options;\n\t    };\n\t    QueryController.prototype.newQueryEvent = function (args) {\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.newQuery, args);\n\t    };\n\t    QueryController.prototype.buildingQueryEvent = function (args) {\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.buildingQuery, args);\n\t    };\n\t    QueryController.prototype.doneBuildingQueryEvent = function (args) {\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.doneBuildingQuery, args);\n\t    };\n\t    QueryController.prototype.duringQueryEvent = function (args) {\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.duringQuery, args);\n\t    };\n\t    QueryController.prototype.querySuccessEvent = function (args) {\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.querySuccess, args);\n\t    };\n\t    QueryController.prototype.fetchMoreSuccessEvent = function (args) {\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.fetchMoreSuccess, args);\n\t    };\n\t    QueryController.prototype.deferredQuerySuccessEvent = function (args) {\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.deferredQuerySuccess, args);\n\t    };\n\t    QueryController.prototype.queryError = function (args) {\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.queryError, args);\n\t    };\n\t    QueryController.prototype.preprocessResultsEvent = function (args) {\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.preprocessResults, args);\n\t    };\n\t    QueryController.prototype.noResultEvent = function (args) {\n\t        Dom_1.$$(this.element).trigger(QueryEvents_1.QueryEvents.noResults, args);\n\t    };\n\t    QueryController.prototype.debugInfo = function () {\n\t        var _this = this;\n\t        var info = {\n\t            'query': this.lastQuery,\n\t        };\n\t        if (this.lastQueryResults != null) {\n\t            info.queryDuration = function () { return _this.buildQueryDurationSection(_this.lastQueryResults); };\n\t            info.results = function () { return _.omit(_this.lastQueryResults, 'results'); };\n\t        }\n\t        if (this.currentError != null) {\n\t            info.error = function () { return _this.currentError; };\n\t        }\n\t        return info;\n\t    };\n\t    QueryController.prototype.buildQueryDurationSection = function (queryResults) {\n\t        var dom = Dom_1.Dom.createElement('div', { className: 'coveo-debug-queryDuration' });\n\t        var graph = Dom_1.Dom.createElement('div', { className: 'coveo-debug-durations' });\n\t        var debugRef = BaseComponent_1.BaseComponent.getComponentRef('Debug');\n\t        dom.appendChild(graph);\n\t        _.forEach(debugRef.durationKeys, function (key) {\n\t            var duration = queryResults[key];\n\t            if (duration != null) {\n\t                graph.appendChild(Dom_1.Dom.createElement('div', {\n\t                    className: 'coveo-debug-duration',\n\t                    style: \"width:\" + duration + \"px\",\n\t                    'data-id': key\n\t                }));\n\t                var legend = Dom_1.Dom.createElement('div', { className: 'coveo-debug-duration-legend', 'data-id': key });\n\t                dom.appendChild(legend);\n\t                var keyDom = Dom_1.Dom.createElement('span', { className: 'coveo-debug-duration-label' });\n\t                keyDom.appendChild(document.createTextNode(key));\n\t                legend.appendChild(keyDom);\n\t                var durationDom = Dom_1.Dom.createElement('span', { className: 'coveo-debug-duration-value' });\n\t                durationDom.appendChild(document.createTextNode(duration));\n\t                legend.appendChild(durationDom);\n\t            }\n\t        });\n\t        return dom;\n\t    };\n\t    QueryController.prototype.logQueryInActionsHistory = function (query, isFirstQuery) {\n\t        if (typeof coveoanalytics != 'undefined') {\n\t            var store = new coveoanalytics.history.HistoryStore();\n\t            var queryElement = {\n\t                name: 'Query',\n\t                value: query.q,\n\t                time: JSON.stringify(new Date())\n\t            };\n\t            store.addElement(queryElement);\n\t        }\n\t    };\n\t    QueryController.ID = 'QueryController';\n\t    return QueryController;\n\t}(RootComponent_1.RootComponent));\n\texports.QueryController = QueryController;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 74 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar BaseComponent_1 = __webpack_require__(75);\n\tvar RootComponent = (function (_super) {\n\t    __extends(RootComponent, _super);\n\t    function RootComponent(element, type) {\n\t        _super.call(this, element, type);\n\t        this.element = element;\n\t        this.type = type;\n\t    }\n\t    return RootComponent;\n\t}(BaseComponent_1.BaseComponent));\n\texports.RootComponent = RootComponent;\n\n\n/***/ },\n/* 75 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar DebugEvents_1 = __webpack_require__(41);\n\tvar Logger_1 = __webpack_require__(15);\n\t/**\n\t * Every component in the framework ultimately inherits from this base component class.\n\t */\n\tvar BaseComponent = (function () {\n\t    function BaseComponent(element, type) {\n\t        this.element = element;\n\t        this.type = type;\n\t        /**\n\t         * A disabled component will not participate in the query, or listen to {@link ComponentEvents}.\n\t         * @type {boolean}\n\t         */\n\t        this.disabled = false;\n\t        Assert_1.Assert.exists(element);\n\t        Assert_1.Assert.isNonEmptyString(type);\n\t        this.logger = new Logger_1.Logger(this);\n\t        this.initDebugInfo();\n\t        BaseComponent.bindComponentToElement(element, this);\n\t    }\n\t    /**\n\t     * Return the debug info about this component.\n\t     * @returns {any}\n\t     */\n\t    BaseComponent.prototype.debugInfo = function () {\n\t        var info = {};\n\t        info[this['constructor']['ID']] = this;\n\t        return info;\n\t    };\n\t    /**\n\t     * Disable the component.\n\t     * Normally this means that the component will not execute handlers for the framework events (query events, for example).\n\t     * Component are enabled by default on creation.\n\t     */\n\t    BaseComponent.prototype.disable = function () {\n\t        this.disabled = true;\n\t    };\n\t    /**\n\t     * Enable the component.\n\t     * Normally this means that the component will execute handlers for the framework events (query events, for example).\n\t     * Components are enabled by default on creation.\n\t     */\n\t    BaseComponent.prototype.enable = function () {\n\t        this.disabled = false;\n\t    };\n\t    BaseComponent.prototype.initDebugInfo = function () {\n\t        Dom_1.$$(this.element).on('doubleclick', function (e) {\n\t            if (e.altKey) {\n\t                var debugInfo = this.debugInfo();\n\t                if (debugInfo != null) {\n\t                    $(this.root).trigger(DebugEvents_1.DebugEvents.showDebugPanel, this.debugInfo());\n\t                }\n\t            }\n\t        });\n\t    };\n\t    BaseComponent.bindComponentToElement = function (element, component) {\n\t        Assert_1.Assert.exists(element);\n\t        Assert_1.Assert.exists(component);\n\t        Assert_1.Assert.isNonEmptyString(component.type);\n\t        element[BaseComponent.computeCssClassNameForType(component.type)] = component;\n\t        Dom_1.$$(element).addClass(BaseComponent.computeCssClassNameForType(component.type));\n\t        BaseComponent.getBoundComponentsForElement(element).push(component);\n\t    };\n\t    BaseComponent.computeCssClassName = function (componentClass) {\n\t        return componentClass['className'] ? componentClass['className'] : componentClass['className'] = BaseComponent.computeCssClassNameForType(componentClass['ID']);\n\t    };\n\t    BaseComponent.computeCssClassNameForType = function (type) {\n\t        Assert_1.Assert.isNonEmptyString(type);\n\t        return 'Coveo' + type;\n\t    };\n\t    BaseComponent.computeSelectorForType = function (type) {\n\t        Assert_1.Assert.isNonEmptyString(type);\n\t        return '.' + BaseComponent.computeCssClassNameForType(type);\n\t    };\n\t    BaseComponent.getBoundComponentsForElement = function (element) {\n\t        Assert_1.Assert.exists(element);\n\t        if (element.CoveoBoundComponents == null) {\n\t            element.CoveoBoundComponents = [];\n\t        }\n\t        return element.CoveoBoundComponents;\n\t    };\n\t    BaseComponent.getComponentRef = function (component) {\n\t        return Coveo[component];\n\t    };\n\t    return BaseComponent;\n\t}());\n\texports.BaseComponent = BaseComponent;\n\n\n/***/ },\n/* 76 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar ExpressionBuilder_1 = __webpack_require__(77);\n\tvar QueryUtils_1 = __webpack_require__(22);\n\t/**\n\t * The QueryBuilder is used to build a {@link IQuery} that will be able to be executed using the Search API.<br/>\n\t * The class exposes several members and methods that help components and external code to build up the final query that is sent to the Search API.<br/>\n\t */\n\tvar QueryBuilder = (function () {\n\t    function QueryBuilder() {\n\t        /**\n\t         * Used to build the basic part of the query expression.<br/>\n\t         * This part typically consists of user-entered content such as query keywords, etc.\n\t         * @type {Coveo.ExpressionBuilder}\n\t         */\n\t        this.expression = new ExpressionBuilder_1.ExpressionBuilder();\n\t        /**\n\t         * Used to build the advanced part of the query expression.<br/>\n\t         * This part is typically formed of filter expressions generated by components such as facets, external code, etc.\n\t         * @type {Coveo.ExpressionBuilder}\n\t         */\n\t        this.advancedExpression = new ExpressionBuilder_1.ExpressionBuilder();\n\t        /**\n\t         * Used to build the advanced part of the query expression.<br/>\n\t         * This part is similar to `advancedExpression`, but its content is interpreted as a constant expression by the index and it takes advantage of special caching features.\n\t         * @type {Coveo.ExpressionBuilder}\n\t         */\n\t        this.constantExpression = new ExpressionBuilder_1.ExpressionBuilder();\n\t        /**\n\t         * Used to build the disjunctive part of the query expression.<br/>\n\t         * When present, this part is evaluated separately from the other expressions and the matching results are merged to those matching expressions, `advancedExpression` and `constantExpression`.<br/>\n\t         * The final boolean expression for the query is thus (basic advanced constant) OR (disjunction).\n\t         * @type {Coveo.ExpressionBuilder}\n\t         */\n\t        this.disjunctionExpression = new ExpressionBuilder_1.ExpressionBuilder();\n\t        /**\n\t         * Whether to disable the special query syntax such as field references for the basic query expression (parameter q).\n\t         * It is equivalent to a No syntax block applied to the basic query expression.\n\t         * If not specified, the parameter defaults to false.\n\t         */\n\t        this.disableQuerySyntax = false;\n\t        /**\n\t         * This is the 0-based index of the first result to return.<br/>\n\t         * If not specified, this parameter defaults to 0.\n\t         */\n\t        this.firstResult = 0;\n\t        /**\n\t         * This is the number of results to return, starting from {@link IQuery.firstResult}.<br/>\n\t         * If not specified, this parameter defaults to 10.\n\t         */\n\t        this.numberOfResults = 10;\n\t        this.requiredFields = [];\n\t        this.includeRequiredFields = false;\n\t        /**\n\t         * Whether to enable query corrections on this query (see {@link DidYouMean}).\n\t         */\n\t        this.enableDidYouMean = false;\n\t        /**\n\t         * Whether to enable debug info on the query.<br/>\n\t         * This will return additional information on the resulting JSON response from the Search API.<br/>\n\t         * Mostly: execution report (a detailed breakdown of the parsed and executed query).\n\t         */\n\t        this.enableDebug = false;\n\t        /**\n\t         * This specifies the sort criterion(s) to use to sort results. If not specified, this parameter defaults to relevancy.<br/>\n\t         * Possible values are : <br/>\n\t         * -- relevancy :  This uses all the configured ranking weights as well as any specified ranking expressions to rank results.<br/>\n\t         * -- dateascending / datedescending Sort using the value of the `@date` field, which is typically the last modification date of an item in the index.<br/>\n\t         * -- qre : Sort using only the weights applied through ranking expressions. This is much like using `relevancy` except that automatic weights based on keyword proximity etc, are not computed.<br/>\n\t         * -- nosort : Do not sort the results. The order in which items are returned is essentially random.<br/>\n\t         * -- @field ascending / @field descending Sort using the value of a custom field.\n\t         */\n\t        this.sortCriteria = 'relevancy';\n\t        this.retrieveFirstSentences = true;\n\t        this.queryUid = QueryUtils_1.QueryUtils.createGuid();\n\t        /**\n\t         * This specifies an array of Query Function operation that will be executed on the results.\n\t         */\n\t        this.queryFunctions = [];\n\t        /**\n\t         * This specifies an array of Ranking Function operations that will be executed on the results.\n\t         */\n\t        this.rankingFunctions = [];\n\t        /**\n\t         * This specifies an array of Group By operations that can be performed on the query results to extract facets.\n\t         */\n\t        this.groupByRequests = [];\n\t        this.enableDuplicateFiltering = false;\n\t    }\n\t    /**\n\t     * Build the current content or state of the query builder and return a {@link IQuery}.<br/>\n\t     * build can be called multiple times on the same QueryBuilder.\n\t     * @returns {IQuery}\n\t     */\n\t    QueryBuilder.prototype.build = function () {\n\t        var query = {\n\t            q: this.expression.build(),\n\t            aq: this.advancedExpression.build(),\n\t            cq: this.constantExpression.build(),\n\t            dq: this.disjunctionExpression.build(),\n\t            searchHub: this.searchHub,\n\t            tab: this.tab,\n\t            language: this.language,\n\t            pipeline: this.pipeline,\n\t            maximumAge: this.maximumAge,\n\t            wildcards: this.enableWildcards,\n\t            questionMark: this.enableQuestionMarks,\n\t            lowercaseOperators: this.enableLowercaseOperators,\n\t            partialMatch: this.enablePartialMatch,\n\t            partialMatchKeywords: this.partialMatchKeywords,\n\t            partialMatchThreshold: this.partialMatchThreshold,\n\t            firstResult: this.firstResult,\n\t            numberOfResults: this.numberOfResults,\n\t            excerptLength: this.excerptLength,\n\t            filterField: this.filterField,\n\t            filterFieldRange: this.filterFieldRange,\n\t            parentField: this.parentField,\n\t            childField: this.childField,\n\t            fieldsToInclude: this.computeFieldsToInclude(),\n\t            fieldsToExclude: this.fieldsToExclude,\n\t            enableDidYouMean: this.enableDidYouMean,\n\t            sortCriteria: this.sortCriteria,\n\t            sortField: this.sortField,\n\t            queryFunctions: this.queryFunctions,\n\t            rankingFunctions: this.rankingFunctions,\n\t            groupBy: this.groupByRequests,\n\t            retrieveFirstSentences: this.retrieveFirstSentences,\n\t            timezone: this.timezone,\n\t            disableQuerySyntax: this.disableQuerySyntax,\n\t            enableDuplicateFiltering: this.enableDuplicateFiltering,\n\t            enableCollaborativeRating: this.enableCollaborativeRating,\n\t            debug: this.enableDebug,\n\t            context: this.context,\n\t            actionsHistory: this.actionsHistory,\n\t            recommendation: this.recommendation\n\t        };\n\t        return query;\n\t    };\n\t    /**\n\t     * Return only the expression(s) part(s) of the query, as a string.<br/>\n\t     * This means the basic, advanced and constant part in a complete expression {@link IQuery.q}, {@link IQuery.aq}, {@link IQuery.cq}.\n\t     * @returns {string}\n\t     */\n\t    QueryBuilder.prototype.computeCompleteExpression = function () {\n\t        return this.computeCompleteExpressionParts().full;\n\t    };\n\t    /**\n\t     * Return only the expression(s) part(s) of the query, as an object.\n\t     * @returns {{full: string, withoutConstant: string, constant: string}}\n\t     */\n\t    QueryBuilder.prototype.computeCompleteExpressionParts = function () {\n\t        var withoutConstant = ExpressionBuilder_1.ExpressionBuilder.merge(this.expression, this.advancedExpression);\n\t        return {\n\t            full: ExpressionBuilder_1.ExpressionBuilder.mergeUsingOr(ExpressionBuilder_1.ExpressionBuilder.merge(withoutConstant, this.constantExpression), this.disjunctionExpression).build(),\n\t            withoutConstant: ExpressionBuilder_1.ExpressionBuilder.mergeUsingOr(withoutConstant, this.disjunctionExpression).build(),\n\t            basic: ExpressionBuilder_1.ExpressionBuilder.mergeUsingOr(this.expression, this.disjunctionExpression).build(),\n\t            advanced: ExpressionBuilder_1.ExpressionBuilder.mergeUsingOr(this.advancedExpression, this.disjunctionExpression).build(),\n\t            constant: ExpressionBuilder_1.ExpressionBuilder.mergeUsingOr(this.constantExpression, this.disjunctionExpression).build()\n\t        };\n\t    };\n\t    /**\n\t     * Return only the expression(s) part(s) of the query, as a string, except the given expression.<br/>\n\t     * This is used by {@link Facet}, to build their group by request with query override.\n\t     * @param except\n\t     * @returns {string}\n\t     */\n\t    QueryBuilder.prototype.computeCompleteExpressionExcept = function (except) {\n\t        return this.computeCompleteExpressionPartsExcept(except).full;\n\t    };\n\t    /**\n\t     * Return only the expression(s) part(s) of the query, as an object, except the given expression.<br/>\n\t     * This is used by {@link Facet}, to build their group by request with query override.\n\t     * @param except\n\t     * @returns {{full: string, withoutConstant: string, constant: string}}\n\t     */\n\t    QueryBuilder.prototype.computeCompleteExpressionPartsExcept = function (except) {\n\t        var withoutConstantAndExcept = ExpressionBuilder_1.ExpressionBuilder.merge(this.expression, this.advancedExpression);\n\t        withoutConstantAndExcept.remove(except);\n\t        var basicAndExcept = new ExpressionBuilder_1.ExpressionBuilder();\n\t        basicAndExcept.fromExpressionBuilder(this.expression);\n\t        basicAndExcept.remove(except);\n\t        var advancedAndExcept = new ExpressionBuilder_1.ExpressionBuilder();\n\t        advancedAndExcept.fromExpressionBuilder(this.advancedExpression);\n\t        advancedAndExcept.remove(except);\n\t        return {\n\t            full: ExpressionBuilder_1.ExpressionBuilder.mergeUsingOr(ExpressionBuilder_1.ExpressionBuilder.merge(withoutConstantAndExcept, this.constantExpression), this.disjunctionExpression).build(),\n\t            withoutConstant: ExpressionBuilder_1.ExpressionBuilder.mergeUsingOr(withoutConstantAndExcept, this.disjunctionExpression).build(),\n\t            basic: ExpressionBuilder_1.ExpressionBuilder.mergeUsingOr(basicAndExcept, this.disjunctionExpression).build(),\n\t            advanced: ExpressionBuilder_1.ExpressionBuilder.mergeUsingOr(advancedAndExcept, this.disjunctionExpression).build(),\n\t            constant: ExpressionBuilder_1.ExpressionBuilder.mergeUsingOr(this.constantExpression, this.disjunctionExpression).build()\n\t        };\n\t    };\n\t    /**\n\t     * Add fields to specifically include when the results return.<br/>\n\t     * This can be used to accelerate the execution time of every query, as there is much less data to process if you whitelist specific fields.\n\t     * @param fields\n\t     */\n\t    QueryBuilder.prototype.addFieldsToInclude = function (fields) {\n\t        this.fieldsToInclude = _.uniq((this.fieldsToInclude || []).concat(fields));\n\t    };\n\t    QueryBuilder.prototype.addRequiredFields = function (fields) {\n\t        this.requiredFields = _.uniq(this.requiredFields.concat(fields));\n\t    };\n\t    /**\n\t     * Add fields to specifically exclude when the results return.<br/>\n\t     * This can be used to accelerate the execution time of every query, as there is much less data to process if you blacklist specific fields.\n\t     * @param fields\n\t     */\n\t    QueryBuilder.prototype.addFieldsToExclude = function (fields) {\n\t        this.fieldsToExclude = _.uniq((this.fieldsToInclude || []).concat(fields));\n\t    };\n\t    QueryBuilder.prototype.computeFieldsToInclude = function () {\n\t        if (this.includeRequiredFields || this.fieldsToInclude != null) {\n\t            return this.requiredFields.concat(this.fieldsToInclude || []);\n\t        }\n\t        else {\n\t            return null;\n\t        }\n\t    };\n\t    /**\n\t     * Add a single context key->value pair to the query.<br/>\n\t     * This is used by the Query pipeline in the Coveo platform.\n\t     * @param key\n\t     * @param value\n\t     */\n\t    QueryBuilder.prototype.addContextValue = function (key, value) {\n\t        if (this.context == null) {\n\t            this.context = {};\n\t        }\n\t        this.context[key] = value;\n\t    };\n\t    /**\n\t     * Add a context object to the query.<br/>\n\t     * This can contain multiple key->value.<br/>\n\t     * This is used by the Query pipeline in the Coveo platform.\n\t     * @param values\n\t     */\n\t    QueryBuilder.prototype.addContext = function (values) {\n\t        if (this.context == null) {\n\t            this.context = {};\n\t        }\n\t        _.extend(this.context, values);\n\t    };\n\t    return QueryBuilder;\n\t}());\n\texports.QueryBuilder = QueryBuilder;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 77 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\tvar QueryUtils_1 = __webpack_require__(22);\n\t/**\n\t * An `ExpressionBuilder` that is mostly used by the {@link QueryBuilder}.<br/>\n\t * It is used to build a single query expression.<br/>\n\t * It allows combining multiple expression parts into a single string and provides utilities to generate common expression parts.\n\t */\n\tvar ExpressionBuilder = (function () {\n\t    function ExpressionBuilder() {\n\t        this.parts = []; // he he he\n\t        this.wrapParts = true;\n\t    }\n\t    /**\n\t     * Add a new part to the expression.\n\t     * @param expression\n\t     */\n\t    ExpressionBuilder.prototype.add = function (expression) {\n\t        Assert_1.Assert.isNonEmptyString(expression);\n\t        this.parts.push(expression);\n\t    };\n\t    /**\n\t     * Take another `ExpressionBuilder`, and copy it.\n\t     * @param expression\n\t     */\n\t    ExpressionBuilder.prototype.fromExpressionBuilder = function (expression) {\n\t        this.parts = this.parts.concat(expression.parts);\n\t    };\n\t    /**\n\t     * Add a new part to the expression, but specific for field values<br/>\n\t     * eg @field=(value1,value2,value3).\n\t     * @param field The field for which to create an expression (e.g.: @foo).\n\t     * @param operator The operator to use e.g.: = (equal) == (strict equal) <> (not equal).\n\t     * @param values The values to put in the expression.\n\t     */\n\t    ExpressionBuilder.prototype.addFieldExpression = function (field, operator, values) {\n\t        Assert_1.Assert.isNonEmptyString(field);\n\t        Assert_1.Assert.stringStartsWith(field, '@');\n\t        Assert_1.Assert.isNonEmptyString(operator);\n\t        Assert_1.Assert.isLargerOrEqualsThan(1, values.length);\n\t        this.add(QueryUtils_1.QueryUtils.buildFieldExpression(field, operator, values));\n\t    };\n\t    /**\n\t     * Add a new part to the expression, but specific for field values<br/>\n\t     * eg : NOT @field==(value1, value2, value3).\n\t     * @param field The field for which to create an expression (e.g.: @foo)\n\t     * @param values The values to put in the expression.\n\t     */\n\t    ExpressionBuilder.prototype.addFieldNotEqualExpression = function (field, values) {\n\t        Assert_1.Assert.isNonEmptyString(field);\n\t        Assert_1.Assert.stringStartsWith(field, '@');\n\t        Assert_1.Assert.isLargerOrEqualsThan(1, values.length);\n\t        this.add(QueryUtils_1.QueryUtils.buildFieldNotEqualExpression(field, values));\n\t    };\n\t    /**\n\t     * Removes an expression from the builder.\n\t     * @param expression\n\t     */\n\t    ExpressionBuilder.prototype.remove = function (expression) {\n\t        Assert_1.Assert.isNonEmptyString(expression);\n\t        var index = _.indexOf(this.parts, expression);\n\t        if (index != -1) {\n\t            this.parts.splice(_.indexOf(this.parts, expression), 1);\n\t        }\n\t    };\n\t    /**\n\t     * Checks if the builder is currently empty.\n\t     * @returns {boolean}\n\t     */\n\t    ExpressionBuilder.prototype.isEmpty = function () {\n\t        return this.parts.length == 0;\n\t    };\n\t    /**\n\t     * Builds the expression string by combining all the parts together.<br/>\n\t     * @param exp expression to join the different parts, default to a space.\n\t     * @returns {any}\n\t     */\n\t    ExpressionBuilder.prototype.build = function (exp) {\n\t        if (exp === void 0) { exp = ' '; }\n\t        if (this.parts.length == 0) {\n\t            return undefined;\n\t        }\n\t        else if (this.parts.length == 1) {\n\t            return this.parts[0];\n\t        }\n\t        else if (this.wrapParts) {\n\t            return '(' + this.parts.join(')' + exp + '(') + ')';\n\t        }\n\t        else {\n\t            return this.parts.join(exp);\n\t        }\n\t    };\n\t    /**\n\t     * Merges several `ExpressionBuilder` together.\n\t     * @param builders Builders that should be merged.\n\t     * @returns {Coveo.ExpressionBuilder}\n\t     */\n\t    ExpressionBuilder.merge = function () {\n\t        var builders = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            builders[_i - 0] = arguments[_i];\n\t        }\n\t        var merged = new ExpressionBuilder();\n\t        _.each(builders, function (builder) {\n\t            merged.parts = merged.parts.concat(builder.parts);\n\t        });\n\t        return merged;\n\t    };\n\t    /**\n\t     * Merges several `ExpressionBuilder` together, using the OR operator.\n\t     * @param builders Builders that should be merged.\n\t     * @returns {Coveo.ExpressionBuilder}\n\t     */\n\t    ExpressionBuilder.mergeUsingOr = function () {\n\t        var builders = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            builders[_i - 0] = arguments[_i];\n\t        }\n\t        var nonEmpty = _.filter(builders, function (b) { return !b.isEmpty(); });\n\t        var merged = new ExpressionBuilder();\n\t        if (nonEmpty.length == 1) {\n\t            merged.parts = [].concat(nonEmpty[0].parts);\n\t        }\n\t        else if (nonEmpty.length > 1) {\n\t            var parts = _.map(nonEmpty, function (b) { return b.build(); });\n\t            merged.add('(' + parts.join(') OR (') + ')');\n\t        }\n\t        return merged;\n\t    };\n\t    return ExpressionBuilder;\n\t}());\n\texports.ExpressionBuilder = ExpressionBuilder;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 78 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar SearchEndpointWithDefaultCallOptions = (function () {\n\t    function SearchEndpointWithDefaultCallOptions(endpoint, callOptions) {\n\t        this.endpoint = endpoint;\n\t        this.callOptions = callOptions;\n\t        this.options = endpoint.options;\n\t    }\n\t    SearchEndpointWithDefaultCallOptions.prototype.getBaseUri = function () {\n\t        return this.endpoint.getBaseUri();\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.getBaseAlertsUri = function () {\n\t        return this.endpoint.getBaseAlertsUri();\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.getAuthenticationProviderUri = function (provider, returnUri, message) {\n\t        return this.endpoint.getAuthenticationProviderUri(provider, returnUri, message);\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.isJsonp = function () {\n\t        return this.endpoint.isJsonp();\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.search = function (query, callOptions) {\n\t        return this.endpoint.search(query, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.getExportToExcelLink = function (query, numberOfResults, callOptions) {\n\t        return this.endpoint.getExportToExcelLink(query, numberOfResults, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.tagDocument = function (taggingRequest, callOptions) {\n\t        return this.endpoint.tagDocument(taggingRequest, this.enrichCallOptions(taggingRequest));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.getRevealQuerySuggest = function (request, callOptions) {\n\t        return this.endpoint.getRevealQuerySuggest(request, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.rateDocument = function (ratingRequest, callOptions) {\n\t        return this.endpoint.rateDocument(ratingRequest, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.getRawDataStream = function (documentUniqueId, dataStreamType, callOptions) {\n\t        return this.endpoint.getRawDataStream(documentUniqueId, dataStreamType, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.getDocument = function (documentUniqueId, callOptions) {\n\t        return this.endpoint.getDocument(documentUniqueId, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.getDocumentText = function (documentUniqueID, callOptions) {\n\t        return this.endpoint.getDocumentText(documentUniqueID, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.getDocumentHtml = function (documentUniqueID, callOptions) {\n\t        return this.endpoint.getDocumentHtml(documentUniqueID, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.getViewAsHtmlUri = function (documentUniqueID, callOptions) {\n\t        return this.endpoint.getViewAsHtmlUri(documentUniqueID, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.getViewAsDatastreamUri = function (documentUniqueID, dataStreamType, callOptions) {\n\t        return this.endpoint.getViewAsDatastreamUri(documentUniqueID, dataStreamType, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.listFieldValues = function (request, callOptions) {\n\t        return this.endpoint.listFieldValues(request, this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.listFields = function (callOptions) {\n\t        return this.endpoint.listFields(this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.extensions = function (callOptions) {\n\t        return this.endpoint.extensions(this.enrichCallOptions(callOptions));\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.follow = function (request) {\n\t        return this.endpoint.follow(request);\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.listSubscriptions = function (page) {\n\t        return this.endpoint.listSubscriptions(page);\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.updateSubscription = function (subscription) {\n\t        return this.endpoint.updateSubscription(subscription);\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.deleteSubscription = function (subscription) {\n\t        return this.endpoint.deleteSubscription(subscription);\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.logError = function (sentryLog) {\n\t        return this.endpoint.logError(sentryLog);\n\t    };\n\t    SearchEndpointWithDefaultCallOptions.prototype.enrichCallOptions = function (callOptions) {\n\t        return _.extend({}, callOptions, this.callOptions);\n\t    };\n\t    return SearchEndpointWithDefaultCallOptions;\n\t}());\n\texports.SearchEndpointWithDefaultCallOptions = SearchEndpointWithDefaultCallOptions;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 79 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {/// <reference path='../ui/Facet/Facet.ts' />\n\t\"use strict\";\n\tvar ExpressionBuilder_1 = __webpack_require__(77);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar FacetSearchParameters_1 = __webpack_require__(80);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar FacetUtils_1 = __webpack_require__(81);\n\tvar FacetQueryController = (function () {\n\t    function FacetQueryController(facet) {\n\t        this.facet = facet;\n\t    }\n\t    /**\n\t     * Reset the expression for the facet search, used when a new query is triggered\n\t     */\n\t    FacetQueryController.prototype.prepareForNewQuery = function () {\n\t        this.lastGroupByRequestIndex = undefined;\n\t        this.expressionToUseForFacetSearch = undefined;\n\t        this.constantExpressionToUseForFacetSearch = undefined;\n\t    };\n\t    /**\n\t     * Compute the filter expression that the facet need to output for the query\n\t     * @returns {string}\n\t     */\n\t    FacetQueryController.prototype.computeOurFilterExpression = function () {\n\t        var _this = this;\n\t        var builder = new ExpressionBuilder_1.ExpressionBuilder();\n\t        var selected = this.facet.values.getSelected();\n\t        if (selected.length > 0) {\n\t            if (this.facet.options.useAnd) {\n\t                _.each(selected, function (value) {\n\t                    builder.addFieldExpression(_this.facet.options.field, '==', [value.value]);\n\t                });\n\t            }\n\t            else {\n\t                builder.addFieldExpression(this.facet.options.field, '==', _.map(selected, function (value) { return value.value; }));\n\t            }\n\t        }\n\t        var excluded = this.facet.values.getExcluded();\n\t        if (excluded.length > 0) {\n\t            builder.addFieldNotEqualExpression(this.facet.options.field, _.map(excluded, function (value) { return value.value; }));\n\t        }\n\t        if (Utils_1.Utils.isNonEmptyString(this.facet.options.additionalFilter)) {\n\t            builder.add(this.facet.options.additionalFilter);\n\t        }\n\t        return builder.build();\n\t    };\n\t    /**\n\t     * Build the group by request for the facet, and insert it in the query builder\n\t     * @param queryBuilder\n\t     */\n\t    FacetQueryController.prototype.putGroupByIntoQueryBuilder = function (queryBuilder) {\n\t        Assert_1.Assert.exists(queryBuilder);\n\t        var allowedValues = this.createGroupByAllowedValues();\n\t        var groupByRequest = this.createBasicGroupByRequest(allowedValues);\n\t        var queryOverrideObject = this.createGroupByQueryOverride(queryBuilder);\n\t        if (!Utils_1.Utils.isNullOrUndefined(queryOverrideObject)) {\n\t            groupByRequest.queryOverride = queryOverrideObject.basic;\n\t            groupByRequest.advancedQueryOverride = queryOverrideObject.advanced;\n\t            groupByRequest.constantQueryOverride = queryOverrideObject.constant;\n\t            this.expressionToUseForFacetSearch = queryOverrideObject.withoutConstant;\n\t            this.constantExpressionToUseForFacetSearch = queryOverrideObject.constant;\n\t        }\n\t        else {\n\t            var parts = queryBuilder.computeCompleteExpressionParts();\n\t            this.expressionToUseForFacetSearch = parts.withoutConstant;\n\t            if (this.expressionToUseForFacetSearch == null) {\n\t                this.expressionToUseForFacetSearch = '@uri';\n\t            }\n\t            this.constantExpressionToUseForFacetSearch = parts.constant;\n\t        }\n\t        this.lastGroupByRequestIndex = queryBuilder.groupByRequests.length;\n\t        this.lastGroupByRequest = groupByRequest;\n\t        queryBuilder.groupByRequests.push(groupByRequest);\n\t    };\n\t    /**\n\t     * Search inside the facet, using a group by request\n\t     * @param params\n\t     * @param oldLength Optional params, used by the search method to call itself recursively to fetch all required values\n\t     * @returns {Promise|Promise<T>}\n\t     */\n\t    FacetQueryController.prototype.search = function (params, oldLength) {\n\t        var _this = this;\n\t        if (oldLength === void 0) { oldLength = params.nbResults; }\n\t        return new Promise(function (resolve, reject) {\n\t            var onResult = function (fieldValues) {\n\t                var newLength = fieldValues.length;\n\t                fieldValues = _this.checkForFacetSearchValuesToRemove(fieldValues, params.valueToSearch);\n\t                if (FacetUtils_1.FacetUtils.needAnotherFacetSearch(fieldValues.length, newLength, oldLength, 5)) {\n\t                    // This means that we removed enough values from the returned one that we need to perform a new search with more values requested.\n\t                    params.nbResults += 5;\n\t                    return _this.search(params, fieldValues.length);\n\t                }\n\t                else {\n\t                    resolve(fieldValues);\n\t                }\n\t            };\n\t            _this.facet.getEndpoint().search(params.getQuery())\n\t                .then(function (queryResults) {\n\t                if (_this.facet.searchInterface.isNewDesign()) {\n\t                    // params.getQuery() will generate a query for all excluded values + some new values\n\t                    // there is no clean way to do a group by and remove some values\n\t                    // so instead we request more values than we need, and crop all the one we don't want\n\t                    var valuesCropped_1 = [];\n\t                    if (queryResults.groupByResults && queryResults.groupByResults[0]) {\n\t                        _.each(queryResults.groupByResults[0].values, function (v) {\n\t                            if (v.lookupValue) {\n\t                                if (!_.contains(params.alwaysExclude, v.lookupValue.toLowerCase())) {\n\t                                    valuesCropped_1.push(v);\n\t                                }\n\t                            }\n\t                            else {\n\t                                if (!_.contains(params.alwaysExclude, v.value.toLowerCase())) {\n\t                                    valuesCropped_1.push(v);\n\t                                }\n\t                            }\n\t                        });\n\t                    }\n\t                    onResult(_.first(valuesCropped_1, params.nbResults));\n\t                }\n\t                else {\n\t                    resolve(queryResults.groupByResults[0].values);\n\t                }\n\t            })\n\t                .catch(function (error) {\n\t                reject(error);\n\t            });\n\t        });\n\t    };\n\t    FacetQueryController.prototype.fetchMore = function (numberOfValuesToFetch) {\n\t        var params = new FacetSearchParameters_1.FacetSearchParameters(this.facet);\n\t        params.alwaysInclude = this.facet.options.allowedValues || _.pluck(this.facet.values.getAll(), 'value');\n\t        params.nbResults = numberOfValuesToFetch;\n\t        return this.facet.getEndpoint().search(params.getQuery());\n\t    };\n\t    FacetQueryController.prototype.searchInFacetToUpdateDelta = function (facetValues) {\n\t        var params = new FacetSearchParameters_1.FacetSearchParameters(this.facet);\n\t        var query = params.getQuery();\n\t        query.aq = this.computeOurFilterExpression();\n\t        _.each(facetValues, function (facetValue) {\n\t            facetValue.waitingForDelta = true;\n\t        });\n\t        query.groupBy = [this.createBasicGroupByRequest(_.map(facetValues, function (facetValue) { return facetValue.value; }))];\n\t        query.groupBy[0].completeFacetWithStandardValues = false;\n\t        return this.facet.getEndpoint().search(query);\n\t    };\n\t    FacetQueryController.prototype.createGroupByAllowedValues = function () {\n\t        // if you want to keep displayed values next time, take all current values as allowed values\n\t        // otherwise take only the selected value\n\t        if (this.facet.options.allowedValues != undefined) {\n\t            return this.facet.options.allowedValues;\n\t        }\n\t        else if (this.facet.options.customSort != undefined) {\n\t            // If there is a custom sort, we still need to add selectedValues to the group by\n\t            // Filter out duplicates with a lower case comparison on the value\n\t            var toCompare_1 = _.map(this.facet.options.customSort, function (val) {\n\t                return val.toLowerCase();\n\t            });\n\t            var filtered = _.filter(this.getAllowedValuesFromSelected(), function (value) {\n\t                return !_.contains(toCompare_1, value.toLowerCase());\n\t            });\n\t            return this.facet.options.customSort.concat(filtered);\n\t        }\n\t        else {\n\t            return this.getAllowedValuesFromSelected();\n\t        }\n\t    };\n\t    FacetQueryController.prototype.getAllowedValuesFromSelected = function () {\n\t        var toMap = [];\n\t        if (this.facet.options.useAnd || !this.facet.keepDisplayedValuesNextTime) {\n\t            var selected = this.facet.values.getSelected();\n\t            if (selected.length == 0) {\n\t                return undefined;\n\t            }\n\t            toMap = this.facet.values.getSelected();\n\t        }\n\t        else {\n\t            toMap = this.facet.values.getAll();\n\t        }\n\t        return _.map(toMap, function (facetValue) { return facetValue.value; });\n\t    };\n\t    FacetQueryController.prototype.createGroupByQueryOverride = function (queryBuilder) {\n\t        var additionalFilter = this.facet.options.additionalFilter ? this.facet.options.additionalFilter : '';\n\t        var queryOverrideObject = undefined;\n\t        if (this.facet.options.useAnd) {\n\t            if (Utils_1.Utils.isNonEmptyString(additionalFilter)) {\n\t                queryOverrideObject = queryBuilder.computeCompleteExpressionParts();\n\t                if (Utils_1.Utils.isEmptyString(queryOverrideObject.basic)) {\n\t                    queryOverrideObject.basic = '@uri';\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            if (this.facet.values.hasSelectedOrExcludedValues()) {\n\t                queryOverrideObject = queryBuilder.computeCompleteExpressionPartsExcept(this.computeOurFilterExpression());\n\t                if (Utils_1.Utils.isEmptyString(queryOverrideObject.basic)) {\n\t                    queryOverrideObject.basic = '@uri';\n\t                }\n\t            }\n\t            else {\n\t                if (Utils_1.Utils.isNonEmptyString(additionalFilter)) {\n\t                    queryOverrideObject = queryBuilder.computeCompleteExpressionParts();\n\t                    if (Utils_1.Utils.isEmptyString(queryOverrideObject.basic)) {\n\t                        queryOverrideObject.basic = '@uri';\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        if (queryOverrideObject) {\n\t            if (Utils_1.Utils.isNonEmptyString(additionalFilter)) {\n\t                queryOverrideObject.constant = queryOverrideObject.constant ? queryOverrideObject.constant + ' ' + additionalFilter : additionalFilter;\n\t            }\n\t        }\n\t        _.each(_.keys(queryOverrideObject), function (k) {\n\t            if (Utils_1.Utils.isEmptyString(queryOverrideObject[k]) || Utils_1.Utils.isNullOrUndefined(queryOverrideObject[k])) {\n\t                delete queryOverrideObject[k];\n\t            }\n\t        });\n\t        if (_.keys(queryOverrideObject).length == 0) {\n\t            queryOverrideObject = undefined;\n\t        }\n\t        return queryOverrideObject;\n\t    };\n\t    FacetQueryController.prototype.createBasicGroupByRequest = function (allowedValues, addComputedField) {\n\t        if (addComputedField === void 0) { addComputedField = true; }\n\t        var nbOfRequestedValues = this.facet.numberOfValues;\n\t        if (this.facet.options.customSort != null) {\n\t            var usedValues = _.union(_.map(this.facet.values.getSelected(), function (facetValue) { return facetValue.value; }), _.map(this.facet.values.getExcluded(), function (facetValue) { return facetValue.value; }), this.facet.options.customSort);\n\t            nbOfRequestedValues = Math.max(nbOfRequestedValues, usedValues.length);\n\t        }\n\t        var groupByRequest = {\n\t            field: this.facet.options.field,\n\t            maximumNumberOfValues: nbOfRequestedValues + (this.facet.options.enableMoreLess ? 1 : 0),\n\t            sortCriteria: this.facet.options.sortCriteria,\n\t            injectionDepth: this.facet.options.injectionDepth,\n\t            completeFacetWithStandardValues: this.facet.options.allowedValues == undefined ? true : false\n\t        };\n\t        if (this.facet.options.lookupField) {\n\t            groupByRequest.lookupField = this.facet.options.lookupField;\n\t        }\n\t        if (allowedValues != null) {\n\t            groupByRequest.allowedValues = allowedValues;\n\t        }\n\t        if (addComputedField && Utils_1.Utils.isNonEmptyString(this.facet.options.computedField)) {\n\t            groupByRequest.computedFields = [{\n\t                    field: this.facet.options.computedField,\n\t                    operation: this.facet.options.computedFieldOperation\n\t                }];\n\t        }\n\t        return groupByRequest;\n\t    };\n\t    FacetQueryController.prototype.checkForFacetSearchValuesToRemove = function (fieldValues, valueToCheckAgainst) {\n\t        var _this = this;\n\t        var regex = FacetUtils_1.FacetUtils.getRegexToUseForFacetSearch(valueToCheckAgainst, this.facet.options.facetSearchIgnoreAccents);\n\t        return _.filter(fieldValues, function (fieldValue) {\n\t            var isAllowed = _.isEmpty(_this.facet.options.allowedValues) ||\n\t                _.contains(_this.facet.options.allowedValues, fieldValue.value);\n\t            var value = _this.facet.getValueCaption(fieldValue);\n\t            return isAllowed && regex.test(value);\n\t        });\n\t    };\n\t    return FacetQueryController;\n\t}());\n\texports.FacetQueryController = FacetQueryController;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 80 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {/// <reference path=\"Facet.ts\" />\n\t\"use strict\";\n\tvar Utils_1 = __webpack_require__(17);\n\tvar FacetUtils_1 = __webpack_require__(81);\n\tvar QueryBuilder_1 = __webpack_require__(76);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar FacetSearchParameters = (function () {\n\t    function FacetSearchParameters(facet) {\n\t        this.facet = facet;\n\t        this.valueToSearch = '';\n\t        this.alwaysInclude = [];\n\t        this.alwaysExclude = [];\n\t        this.sortCriteria = 'occurrences';\n\t        this.fetchMore = false;\n\t        this.nbResults = facet.options.numberOfValuesInFacetSearch;\n\t        this.ignoreAccents = facet.options.facetSearchIgnoreAccents;\n\t        this.searchEvenIfEmpty = facet.searchInterface.isNewDesign();\n\t    }\n\t    FacetSearchParameters.prototype.setValueToSearch = function (value) {\n\t        this.valueToSearch = value;\n\t        if (Utils_1.Utils.isNonEmptyString(value)) {\n\t            this.alwaysInclude = this.alwaysInclude.concat(FacetUtils_1.FacetUtils.getValuesToUseForSearchInFacet(this.valueToSearch, this.facet));\n\t        }\n\t        return this;\n\t    };\n\t    FacetSearchParameters.prototype.excludeCurrentlyDisplayedValuesInSearch = function (searchResults) {\n\t        var _this = this;\n\t        _.each(this.getCurrentlyShowedValueInSearch(searchResults), function (v) {\n\t            var expandedValues = FacetUtils_1.FacetUtils.getValuesToUseForSearchInFacet(v, _this.facet);\n\t            _.each(expandedValues, function (expanded) {\n\t                _this.alwaysExclude.push(expanded);\n\t            });\n\t        });\n\t        _.each(this.facet.getDisplayedFacetValues(), function (v) {\n\t            var expandedValues = FacetUtils_1.FacetUtils.getValuesToUseForSearchInFacet(v.value, _this.facet);\n\t            _.each(expandedValues, function (expanded) {\n\t                _this.alwaysExclude.push(expanded);\n\t            });\n\t        });\n\t    };\n\t    FacetSearchParameters.prototype.getGroupByRequest = function () {\n\t        this.lowerCaseAll();\n\t        var nbResults = this.nbResults;\n\t        if (this.facet.searchInterface.isNewDesign()) {\n\t            nbResults += this.alwaysExclude.length;\n\t        }\n\t        var typedByUser = [];\n\t        if (this.valueToSearch) {\n\t            typedByUser = ['*' + this.valueToSearch + '*'];\n\t        }\n\t        var request = {\n\t            allowedValues: typedByUser.concat(this.alwaysInclude).concat(this.alwaysExclude),\n\t            maximumNumberOfValues: nbResults,\n\t            completeFacetWithStandardValues: this.facet.options.lookupField ? false : true,\n\t            field: this.facet.options.field,\n\t            sortCriteria: this.facet.options.sortCriteria || this.sortCriteria,\n\t            injectionDepth: this.facet.options.injectionDepth,\n\t        };\n\t        if (this.facet.options.lookupField) {\n\t            request.lookupField = this.facet.options.lookupField;\n\t        }\n\t        if (this.facet.options.computedField) {\n\t            request.computedFields = [{\n\t                    field: this.facet.options.computedField,\n\t                    operation: this.facet.options.computedFieldOperation\n\t                }];\n\t        }\n\t        return request;\n\t    };\n\t    FacetSearchParameters.prototype.getQuery = function () {\n\t        var lastQuery = _.clone(this.facet.queryController.getLastQuery());\n\t        if (!lastQuery) {\n\t            // There should normally always be a last query available\n\t            // If not, just create en empty one.\n\t            lastQuery = new QueryBuilder_1.QueryBuilder().build();\n\t        }\n\t        lastQuery.q = this.facet.facetQueryController.expressionToUseForFacetSearch;\n\t        lastQuery.cq = this.facet.facetQueryController.constantExpressionToUseForFacetSearch;\n\t        lastQuery.aq = null;\n\t        lastQuery.enableDidYouMean = false;\n\t        lastQuery.firstResult = 0;\n\t        lastQuery.numberOfResults = 0;\n\t        lastQuery.fieldsToInclude = [];\n\t        lastQuery.groupBy = [this.getGroupByRequest()];\n\t        return lastQuery;\n\t    };\n\t    FacetSearchParameters.prototype.getCurrentlyShowedValueInSearch = function (searchResults) {\n\t        return _.map(Dom_1.$$(searchResults).findAll('.coveo-facet-value-caption'), function (val) {\n\t            return Dom_1.$$(val).text();\n\t        });\n\t    };\n\t    FacetSearchParameters.prototype.lowerCaseAll = function () {\n\t        this.alwaysExclude = _.chain(this.alwaysExclude)\n\t            .map(function (v) {\n\t            return v.toLowerCase();\n\t        })\n\t            .uniq()\n\t            .value();\n\t        this.alwaysInclude = _.chain(this.alwaysInclude)\n\t            .map(function (v) {\n\t            return v.toLowerCase();\n\t        })\n\t            .uniq()\n\t            .value();\n\t    };\n\t    return FacetSearchParameters;\n\t}());\n\texports.FacetSearchParameters = FacetSearchParameters;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 81 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar StringUtils_1 = __webpack_require__(60);\n\tvar QueryUtils_1 = __webpack_require__(22);\n\tvar FileTypes_1 = __webpack_require__(59);\n\tvar DateUtils_1 = __webpack_require__(55);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar FacetUtils = (function () {\n\t    function FacetUtils() {\n\t    }\n\t    FacetUtils.getRegexToUseForFacetSearch = function (value, ignoreAccent) {\n\t        return new RegExp(StringUtils_1.StringUtils.stringToRegex(value, ignoreAccent), 'i');\n\t    };\n\t    FacetUtils.getValuesToUseForSearchInFacet = function (original, facet) {\n\t        var ret = [original];\n\t        var regex = this.getRegexToUseForFacetSearch(original, facet.options.facetSearchIgnoreAccents);\n\t        if (facet.options.valueCaption) {\n\t            _.chain(facet.options.valueCaption)\n\t                .pairs()\n\t                .filter(function (pair) {\n\t                return regex.test(pair[1]);\n\t            })\n\t                .each(function (match) {\n\t                ret.push(match[0]);\n\t            });\n\t            if (QueryUtils_1.QueryUtils.isStratusAgnosticField(facet.options.field, '@objecttype') || QueryUtils_1.QueryUtils.isStratusAgnosticField(facet.options.field, '@filetype')) {\n\t                _.each(FileTypes_1.FileTypes.getFileTypeCaptions(), function (value, key) {\n\t                    if (!(key in facet.options.valueCaption) && regex.test(value)) {\n\t                        ret.push(key);\n\t                    }\n\t                });\n\t            }\n\t        }\n\t        else if (QueryUtils_1.QueryUtils.isStratusAgnosticField(facet.options.field, '@objecttype') || QueryUtils_1.QueryUtils.isStratusAgnosticField(facet.options.field, '@filetype')) {\n\t            _.each(_.filter(_.pairs(FileTypes_1.FileTypes.getFileTypeCaptions()), function (pair) {\n\t                return regex.test(pair[1]);\n\t            }), function (match) {\n\t                ret.push(match[0]);\n\t            });\n\t        }\n\t        else if (QueryUtils_1.QueryUtils.isStratusAgnosticField(facet.options.field, '@month')) {\n\t            _.each(_.range(1, 13), function (month) {\n\t                if (regex.test(DateUtils_1.DateUtils.monthToString(month - 1))) {\n\t                    ret.push(('0' + month.toString()).substr(-2));\n\t                }\n\t            });\n\t        }\n\t        return ret;\n\t    };\n\t    FacetUtils.buildFacetSearchPattern = function (values) {\n\t        values = _.map(values, function (value) {\n\t            return Utils_1.Utils.escapeRegexCharacter(value);\n\t        });\n\t        values[0] = '.*' + values[0] + '.*';\n\t        return values.join('|');\n\t    };\n\t    FacetUtils.needAnotherFacetSearch = function (currentSearchLength, newSearchLength, oldSearchLength, desiredSearchLength) {\n\t        // Something was removed (currentSearch < newSearch)\n\t        // && we might want to display more facet search result(currentSearch < desiredSearch)\n\t        // && the new query returned more stuff than the old one so there's still more results(currentSearchLength > oldLength)\n\t        return currentSearchLength < newSearchLength && currentSearchLength < desiredSearchLength && currentSearchLength > oldSearchLength;\n\t    };\n\t    FacetUtils.addNoStateCssClassToFacetValues = function (facet, container) {\n\t        // This takes care of adding the correct css class on each facet value checkbox (empty white box) if at least one value is selected in that facet\n\t        if (facet.values.getSelected().length != 0) {\n\t            var noStates = Dom_1.$$(container).findAll('li:not(.coveo-selected)');\n\t            _.each(noStates, function (noState) {\n\t                Dom_1.$$(noState).addClass('coveo-no-state');\n\t            });\n\t        }\n\t    };\n\t    FacetUtils.tryToGetTranslatedCaption = function (field, value) {\n\t        var found;\n\t        if (QueryUtils_1.QueryUtils.isStratusAgnosticField(field.toLowerCase(), '@filetype')) {\n\t            found = FileTypes_1.FileTypes.getFileTypeCaptions()[value.toLowerCase()];\n\t        }\n\t        else if (QueryUtils_1.QueryUtils.isStratusAgnosticField(field.toLowerCase(), '@month')) {\n\t            try {\n\t                var month = parseInt(value);\n\t                found = DateUtils_1.DateUtils.monthToString(month - 1);\n\t            }\n\t            catch (ex) {\n\t            }\n\t        }\n\t        return found != undefined && Utils_1.Utils.isNonEmptyString(found) ? found : value;\n\t    };\n\t    FacetUtils.clipCaptionsToAvoidOverflowingTheirContainer = function (facet, forceClip) {\n\t        // in new design, we don't need this : use flexbox instead (sorry IE user)\n\t        if (facet.getBindings && facet.getBindings().searchInterface && facet.getBindings().searchInterface.isNewDesign()) {\n\t            return;\n\t        }\n\t        if (!(Coveo.HierarchicalFacet && facet instanceof Coveo.HierarchicalFacet) || forceClip) {\n\t            facet.logger.trace('Clipping captions');\n\t            // force facet to show to calculate width\n\t            Dom_1.$$(facet.element).show();\n\t            var element = facet.element;\n\t            var captions = Dom_1.$$(element).findAll('.coveo-facet-value-caption');\n\t            for (var i = 0; i < captions.length; i++) {\n\t                if (captions[i].style.width != '') {\n\t                    captions[i].style.width = '';\n\t                }\n\t            }\n\t            var labels = Dom_1.$$(element).findAll('.coveo-facet-value-label-wrapper');\n\t            var labelsMaxWidth = [];\n\t            for (var i = 0; i < labels.length; i++) {\n\t                var label = labels[i];\n\t                var caption = Dom_1.$$(label).find('.coveo-facet-value-caption');\n\t                var labelWidth = label.scrollWidth;\n\t                var labelVisibleWidth = label.clientWidth;\n\t                var captionWidth = caption.scrollWidth;\n\t                var crop = Math.max(0, labelWidth - labelVisibleWidth);\n\t                if (crop) {\n\t                    labelsMaxWidth.push({\n\t                        element: caption,\n\t                        width: captionWidth,\n\t                        crop: crop,\n\t                        label: label\n\t                    });\n\t                }\n\t            }\n\t            // remove the specific css class\n\t            element.style.display = '';\n\t            for (var i = 0; i < labelsMaxWidth.length; i++) {\n\t                var labelMaxWidth = labelsMaxWidth[i];\n\t                labelMaxWidth.element.style.width = labelMaxWidth.width - labelMaxWidth.crop + 'px';\n\t                if (labelMaxWidth.crop > 0) {\n\t                    labelMaxWidth.label.setAttribute('title', Dom_1.$$(labelMaxWidth.element).text());\n\t                }\n\t                else {\n\t                    labelMaxWidth.label.setAttribute('title', null);\n\t                }\n\t            }\n\t        }\n\t    };\n\t    return FacetUtils;\n\t}());\n\texports.FacetUtils = FacetUtils;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 82 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/// <reference path=\"../ui/FacetRange/FacetRange.ts\" />\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar FacetQueryController_1 = __webpack_require__(79);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar FacetRangeQueryController = (function (_super) {\n\t    __extends(FacetRangeQueryController, _super);\n\t    function FacetRangeQueryController(facet) {\n\t        _super.call(this, facet);\n\t        this.facet = facet;\n\t    }\n\t    FacetRangeQueryController.prototype.createBasicGroupByRequest = function (allowedValues, addComputedField) {\n\t        if (addComputedField === void 0) { addComputedField = true; }\n\t        var groupByQuery = _super.prototype.createBasicGroupByRequest.call(this, null, addComputedField);\n\t        groupByQuery.allowedValues = undefined;\n\t        if (Utils_1.Utils.isNonEmptyArray(this.facet.options.ranges)) {\n\t            groupByQuery = this.buildGroupByQueryForPredefinedRanges(groupByQuery);\n\t        }\n\t        else {\n\t            groupByQuery = this.buildGroupByQueryForAutomaticRanges(groupByQuery);\n\t        }\n\t        return groupByQuery;\n\t    };\n\t    FacetRangeQueryController.prototype.createGroupByAllowedValues = function () {\n\t        return undefined;\n\t    };\n\t    FacetRangeQueryController.prototype.buildGroupByQueryForAutomaticRanges = function (groupByQuery) {\n\t        groupByQuery.generateAutomaticRanges = true;\n\t        return groupByQuery;\n\t    };\n\t    FacetRangeQueryController.prototype.buildGroupByQueryForPredefinedRanges = function (groupByQuery) {\n\t        groupByQuery.rangeValues = this.facet.options.ranges;\n\t        groupByQuery.maximumNumberOfValues = this.facet.options.ranges.length;\n\t        return groupByQuery;\n\t    };\n\t    return FacetRangeQueryController;\n\t}(FacetQueryController_1.FacetQueryController));\n\texports.FacetRangeQueryController = FacetRangeQueryController;\n\n\n/***/ },\n/* 83 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {/// <reference path=\"../ui/FacetSlider/FacetSlider.ts\" />\n\t\"use strict\";\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar ExpressionBuilder_1 = __webpack_require__(77);\n\tvar DateUtils_1 = __webpack_require__(55);\n\tvar FacetSliderQueryController = (function () {\n\t    function FacetSliderQueryController(facet) {\n\t        var _this = this;\n\t        this.facet = facet;\n\t        this.facet.bind.onRootElement(QueryEvents_1.QueryEvents.querySuccess, function (args) { return _this.handleQuerySuccess(args); });\n\t    }\n\t    FacetSliderQueryController.prototype.prepareForNewQuery = function () {\n\t        this.lastGroupByRequestIndex = undefined;\n\t    };\n\t    FacetSliderQueryController.prototype.putGroupByIntoQueryBuilder = function (queryBuilder) {\n\t        if (this.facet.options.graph) {\n\t            this.putGroupByForGraphIntoQueryBuilder(queryBuilder);\n\t        }\n\t        this.putGroupByForSliderIntoQueryBuilder(queryBuilder);\n\t    };\n\t    FacetSliderQueryController.prototype.createBasicGroupByRequest = function (allowedValues, addComputedField) {\n\t        if (addComputedField === void 0) { addComputedField = true; }\n\t        var groupByQuery = {\n\t            field: this.facet.options.field,\n\t            completeFacetWithStandardValues: true\n\t        };\n\t        groupByQuery.allowedValues = undefined;\n\t        if (this.facet.options.graph) {\n\t            groupByQuery = this.buildGroupByQueryForSlider(groupByQuery);\n\t        }\n\t        else {\n\t            groupByQuery = this.buildGroupByQueryForAutomaticRanges(groupByQuery);\n\t        }\n\t        return groupByQuery;\n\t    };\n\t    FacetSliderQueryController.prototype.computeOurFilterExpression = function (boundary) {\n\t        if (boundary === void 0) { boundary = [this.facet.startOfSlider, this.facet.endOfSlider]; }\n\t        var builder = new ExpressionBuilder_1.ExpressionBuilder();\n\t        if (boundary[0] != undefined && boundary[1] != undefined) {\n\t            if (this.facet.options.excludeOuterBounds) {\n\t                this.addFilterExpressionWithOuterBoundsExcluded(boundary[0], boundary[1], builder);\n\t            }\n\t            else {\n\t                this.addFilterExpressionWithOuterBoundsIncluded(boundary[0], boundary[1], builder);\n\t            }\n\t        }\n\t        return builder.build();\n\t    };\n\t    FacetSliderQueryController.prototype.handleQuerySuccess = function (args) {\n\t        var _this = this;\n\t        if (this.facet.options && this.facet.options.graph && this.rangeValuesForGraphToUse == undefined) {\n\t            this.rangeValuesForGraphToUse = [];\n\t            var rawValues = args.results.groupByResults[this.graphGroupByQueriesIndex].values;\n\t            _.each(rawValues, function (rawValue) {\n\t                var rawSplit = rawValue.value.split('..');\n\t                _this.rangeValuesForGraphToUse.push({\n\t                    start: _this.facet.options.dateField ? _this.getISOFormat(rawSplit[0].replace('@', ' ')) : parseInt(rawSplit[0], 10),\n\t                    end: _this.facet.options.dateField ? _this.getISOFormat(rawSplit[1].replace('@', ' ')) : parseInt(rawSplit[1], 10)\n\t                });\n\t            });\n\t        }\n\t    };\n\t    FacetSliderQueryController.prototype.addFilterExpressionWithOuterBoundsIncluded = function (start, end, builder) {\n\t        if (start != this.facet.options.start || end != this.facet.options.end) {\n\t            if (this.facet.options.dateField) {\n\t                start = this.getFilterDateFormat(start);\n\t                end = this.getFilterDateFormat(end);\n\t            }\n\t            builder.addFieldExpression(this.facet.options.field, '==', [start + '..' + end]);\n\t        }\n\t    };\n\t    FacetSliderQueryController.prototype.addFilterExpressionWithOuterBoundsExcluded = function (start, end, builder) {\n\t        var startCompare = this.facet.options.start;\n\t        var endCompare = this.facet.options.end;\n\t        var startCompared = start;\n\t        var endCompared = end;\n\t        if (this.facet.options.dateField) {\n\t            startCompared = this.getFilterDateFormat(start);\n\t            endCompared = this.getFilterDateFormat(end);\n\t            startCompare = this.getFilterDateFormat(startCompare);\n\t            endCompare = this.getFilterDateFormat(endCompare);\n\t        }\n\t        else {\n\t            startCompared += '';\n\t            endCompared += '';\n\t            startCompare += '';\n\t            endCompare += '';\n\t        }\n\t        if (startCompared != startCompare && endCompared == endCompare) {\n\t            builder.addFieldExpression(this.facet.options.field, '>=', [startCompared]);\n\t        }\n\t        else if (startCompared == startCompare && endCompared != endCompare) {\n\t            builder.addFieldExpression(this.facet.options.field, '<=', [endCompared]);\n\t        }\n\t        else {\n\t            this.addFilterExpressionWithOuterBoundsIncluded(start, end, builder);\n\t        }\n\t    };\n\t    FacetSliderQueryController.prototype.buildGroupByQueryForSlider = function (groupByQuery) {\n\t        if (this.facet.options.start != undefined && this.facet.options.end != undefined) {\n\t            var start = this.facet.options.start;\n\t            var end = this.facet.options.end;\n\t            if (this.facet.options.dateField || this.facet.options.dateField) {\n\t                start = this.getISOFormat(start);\n\t                end = this.getISOFormat(end);\n\t            }\n\t            groupByQuery.rangeValues = [{\n\t                    start: start,\n\t                    end: end,\n\t                    endInclusive: true,\n\t                    label: 'Slider'\n\t                }];\n\t            return groupByQuery;\n\t        }\n\t        else {\n\t            return this.buildGroupByQueryForAutomaticRanges(groupByQuery);\n\t        }\n\t    };\n\t    FacetSliderQueryController.prototype.buildGroupByQueryForAutomaticRanges = function (groupByQuery) {\n\t        groupByQuery.generateAutomaticRanges = true;\n\t        return groupByQuery;\n\t    };\n\t    FacetSliderQueryController.prototype.putGroupByForGraphIntoQueryBuilder = function (queryBuilder) {\n\t        this.graphGroupByQueriesIndex = queryBuilder.groupByRequests.length;\n\t        var basicGroupByRequestForGraph = this.createBasicGroupByRequest();\n\t        if (basicGroupByRequestForGraph.rangeValues) {\n\t            var basicRangeRequest = basicGroupByRequestForGraph.rangeValues[0];\n\t            basicGroupByRequestForGraph.rangeValues = this.createRangeValuesForGraph(basicRangeRequest);\n\t        }\n\t        var filter = this.computeOurFilterExpression(this.facet.getSliderBoundaryForQuery());\n\t        if (filter != undefined) {\n\t            var queryOverrideObject = queryBuilder.computeCompleteExpressionPartsExcept(filter);\n\t            basicGroupByRequestForGraph.queryOverride = queryOverrideObject.basic;\n\t            basicGroupByRequestForGraph.advancedQueryOverride = queryOverrideObject.advanced;\n\t            basicGroupByRequestForGraph.constantQueryOverride = queryOverrideObject.constant;\n\t            if (basicGroupByRequestForGraph.queryOverride == undefined) {\n\t                basicGroupByRequestForGraph.queryOverride = this.facet.options.queryOverride || '@uri';\n\t            }\n\t            else {\n\t                basicGroupByRequestForGraph.queryOverride += (this.facet.options.queryOverride ? ' ' + this.facet.options.queryOverride : '');\n\t            }\n\t        }\n\t        else if (this.facet.options.queryOverride != null) {\n\t            var completeExpression = queryBuilder.computeCompleteExpression();\n\t            basicGroupByRequestForGraph.queryOverride = (completeExpression != null ? completeExpression + ' ' : '') + this.facet.options.queryOverride;\n\t        }\n\t        basicGroupByRequestForGraph.sortCriteria = 'nosort';\n\t        basicGroupByRequestForGraph.maximumNumberOfValues = this.facet.options.graph.steps;\n\t        queryBuilder.groupByRequests.push(basicGroupByRequestForGraph);\n\t    };\n\t    FacetSliderQueryController.prototype.putGroupByForSliderIntoQueryBuilder = function (queryBuilder) {\n\t        this.lastGroupByRequestIndex = queryBuilder.groupByRequests.length;\n\t        var basicGroupByRequestForSlider = this.createBasicGroupByRequest();\n\t        basicGroupByRequestForSlider.maximumNumberOfValues = this.facet.options.graph != null ? this.facet.options.graph.steps || 1 : 1;\n\t        basicGroupByRequestForSlider.queryOverride = this.facet.options.queryOverride || '@uri';\n\t        basicGroupByRequestForSlider.sortCriteria = 'nosort';\n\t        basicGroupByRequestForSlider.generateAutomaticRanges = true;\n\t        basicGroupByRequestForSlider.rangeValues = undefined;\n\t        queryBuilder.groupByRequests.push(basicGroupByRequestForSlider);\n\t    };\n\t    FacetSliderQueryController.prototype.createRangeValuesForGraph = function (basicRangeRequest) {\n\t        if (this.facet.options.graph.steps == undefined) {\n\t            this.facet.options.graph.steps = 10;\n\t        }\n\t        if (this.facet.options.dateField && isNaN(this.facet.options.start)) {\n\t            this.facet.options.start = new Date(this.facet.options.start).getTime();\n\t        }\n\t        if (this.facet.options.dateField && isNaN(this.facet.options.end)) {\n\t            this.facet.options.end = new Date(this.facet.options.end).getTime();\n\t        }\n\t        if (this.rangeValuesForGraphToUse != undefined) {\n\t            return this.usePrebuiltRange(basicRangeRequest);\n\t        }\n\t        else {\n\t            return this.buildRange(basicRangeRequest);\n\t        }\n\t    };\n\t    FacetSliderQueryController.prototype.usePrebuiltRange = function (basicRangeRequest) {\n\t        return _.map(this.rangeValuesForGraphToUse, function (value) {\n\t            return {\n\t                start: value.start,\n\t                end: value.end,\n\t                endInclusive: basicRangeRequest.endInclusive,\n\t                label: basicRangeRequest.label\n\t            };\n\t        });\n\t    };\n\t    FacetSliderQueryController.prototype.buildRange = function (basicRangeRequest) {\n\t        var _this = this;\n\t        var start = this.facet.options.start;\n\t        var oneStep = (this.facet.options.end - this.facet.options.start) / this.facet.options.graph.steps;\n\t        return _.map(_.range(0, this.facet.options.graph.steps, 1), function (step) {\n\t            var newStart = start + (step * oneStep);\n\t            var newEnd = start + ((step + 1) * oneStep);\n\t            if (_this.facet.options.dateField) {\n\t                newStart = _this.getISOFormat(newStart);\n\t                newEnd = _this.getISOFormat(newEnd);\n\t            }\n\t            return {\n\t                endInclusive: basicRangeRequest.endInclusive,\n\t                label: basicRangeRequest.label,\n\t                start: newStart,\n\t                end: newEnd\n\t            };\n\t        });\n\t    };\n\t    FacetSliderQueryController.prototype.getISOFormat = function (value) {\n\t        if (value) {\n\t            if (!isNaN(value)) {\n\t                value = Number(value);\n\t            }\n\t            var date = new Date(value);\n\t            if (!DateUtils_1.DateUtils.isValid(date)) {\n\t                date = new Date(this.getBrowserCompatibleFormat(value));\n\t                if (!DateUtils_1.DateUtils.isValid(date)) {\n\t                    // If we get here, we'll probably get an error further down the line when querying the index anyway ...\n\t                    this.facet.logger.error('Cannot parse this date format.', value, new Date(value));\n\t                    return undefined;\n\t                }\n\t            }\n\t            return date.toISOString();\n\t        }\n\t        else {\n\t            return undefined;\n\t        }\n\t    };\n\t    FacetSliderQueryController.prototype.getFilterDateFormat = function (rawValue) {\n\t        if (rawValue) {\n\t            return this.getISOFormat(rawValue).replace('T', '@').replace('.000Z', '').replace(/-/g, '/');\n\t        }\n\t        else {\n\t            return undefined;\n\t        }\n\t    };\n\t    FacetSliderQueryController.prototype.getBrowserCompatibleFormat = function (value) {\n\t        return value.replace('@', 'T').replace(/\\//g, '-');\n\t    };\n\t    return FacetSliderQueryController;\n\t}());\n\texports.FacetSliderQueryController = FacetSliderQueryController;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 84 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/// <reference path=\"../ui/HierarchicalFacet/HierarchicalFacet.ts\" />\n\t/// <reference path=\"./FacetQueryController.ts\" />\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar FacetQueryController_1 = __webpack_require__(79);\n\tvar HierarchicalFacetQueryController = (function (_super) {\n\t    __extends(HierarchicalFacetQueryController, _super);\n\t    function HierarchicalFacetQueryController(facet) {\n\t        _super.call(this, facet);\n\t        this.facet = facet;\n\t    }\n\t    return HierarchicalFacetQueryController;\n\t}(FacetQueryController_1.FacetQueryController));\n\texports.HierarchicalFacetQueryController = HierarchicalFacetQueryController;\n\n\n/***/ },\n/* 85 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Model_1 = __webpack_require__(86);\n\tvar InitializationEvents_1 = __webpack_require__(43);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar HashUtils_1 = __webpack_require__(64);\n\tvar Defer_1 = __webpack_require__(30);\n\tvar RootComponent_1 = __webpack_require__(74);\n\t/**\n\t * This component is instantiated automatically by the framework on the root if the {@link SearchInterface}.<br/>\n\t * When the {@link SearchInterface.options.enableHistory} option is set to true, this component is instantiated.<br/>\n\t * It's only job is to apply changes in the {@link QueryStateModel} to the hash in the URL, and vice versa.<br/>\n\t * This component does *not* hold the state of the interface, it only represent it in the URL.\n\t */\n\tvar HistoryController = (function (_super) {\n\t    __extends(HistoryController, _super);\n\t    /**\n\t     * Create a new history controller\n\t     * @param element\n\t     * @param windoh For mock / test purpose.\n\t     * @param model\n\t     * @param queryController\n\t     */\n\t    function HistoryController(element, windoh, model, queryController) {\n\t        var _this = this;\n\t        _super.call(this, element, HistoryController.ID);\n\t        this.windoh = windoh;\n\t        this.model = model;\n\t        this.queryController = queryController;\n\t        this.ignoreNextHashChange = false;\n\t        this.initialHashChange = false;\n\t        this.willUpdateHash = false;\n\t        this.windoh = this.windoh || window;\n\t        Assert_1.Assert.exists(this.model);\n\t        Assert_1.Assert.exists(this.queryController);\n\t        Dom_1.$$(this.element).on(InitializationEvents_1.InitializationEvents.restoreHistoryState, function () {\n\t            _this.logger.trace('Restore history state. Update model');\n\t            _this.updateModelFromHash();\n\t        });\n\t        Dom_1.$$(this.element).on(this.model.getEventName(Model_1.Model.eventTypes.all), function () {\n\t            _this.logger.trace('Query model changed. Update hash');\n\t            _this.updateHashFromModel();\n\t        });\n\t        this.hashchange = function () {\n\t            _this.handleHashChange();\n\t        };\n\t        this.windoh.addEventListener('hashchange', this.hashchange);\n\t        Dom_1.$$(this.element).on(InitializationEvents_1.InitializationEvents.nuke, function () { return _this.handleNuke(); });\n\t    }\n\t    /**\n\t     * Set the given map of key value in the hash of the URL\n\t     * @param values\n\t     */\n\t    HistoryController.prototype.setHashValues = function (values) {\n\t        this.logger.trace('Update history hash');\n\t        var hash = '#' + HashUtils_1.HashUtils.encodeValues(values);\n\t        this.ignoreNextHashChange = this.windoh.location.hash != hash;\n\t        this.logger.trace('ignoreNextHashChange', this.ignoreNextHashChange);\n\t        this.logger.trace('initialHashChange', this.initialHashChange);\n\t        this.logger.trace('from', this.windoh.location.hash, 'to', hash);\n\t        if (this.initialHashChange) {\n\t            this.initialHashChange = false;\n\t            this.windoh.location.replace(hash);\n\t            this.logger.trace('History hash modified', hash);\n\t        }\n\t        else if (this.ignoreNextHashChange) {\n\t            this.windoh.location.hash = hash;\n\t            this.logger.trace('History hash created', hash);\n\t        }\n\t    };\n\t    HistoryController.prototype.handleNuke = function () {\n\t        this.windoh.removeEventListener('hashchange', this.hashchange);\n\t    };\n\t    HistoryController.prototype.handleHashChange = function () {\n\t        this.logger.trace('History hash changed');\n\t        if (this.ignoreNextHashChange) {\n\t            this.logger.trace('History hash change ignored');\n\t            this.ignoreNextHashChange = false;\n\t            return;\n\t        }\n\t        var diff = this.updateModelFromHash();\n\t        if (_.difference(diff, HistoryController.attributesThatDoNotTriggerQuery).length > 0) {\n\t            this.queryController.executeQuery();\n\t        }\n\t    };\n\t    HistoryController.prototype.updateHashFromModel = function () {\n\t        var _this = this;\n\t        this.logger.trace('Model -> history hash');\n\t        if (!this.willUpdateHash) {\n\t            Defer_1.Defer.defer(function () {\n\t                var attributes = _this.model.getAttributes();\n\t                _this.setHashValues(attributes);\n\t                _this.logger.debug('Saving state to hash', attributes);\n\t                _this.willUpdateHash = false;\n\t            });\n\t            this.willUpdateHash = true;\n\t        }\n\t    };\n\t    HistoryController.prototype.updateModelFromHash = function () {\n\t        var _this = this;\n\t        this.logger.trace('History hash -> model');\n\t        var toSet = {};\n\t        var diff = [];\n\t        _.each(this.model.attributes, function (value, key, obj) {\n\t            var valToSet = _this.getHashValue(key);\n\t            if (valToSet == undefined) {\n\t                valToSet = _this.model.defaultAttributes[key];\n\t            }\n\t            toSet[key] = valToSet;\n\t            if (_this.model.get(key) != valToSet) {\n\t                diff.push(key);\n\t            }\n\t        });\n\t        this.initialHashChange = true;\n\t        this.model.setMultiple(toSet);\n\t        return diff;\n\t    };\n\t    HistoryController.prototype.getHashValue = function (value) {\n\t        Assert_1.Assert.isNonEmptyString(value);\n\t        return HashUtils_1.HashUtils.getValue(value, HashUtils_1.HashUtils.getHash(this.windoh));\n\t    };\n\t    HistoryController.prototype.debugInfo = function () {\n\t        return {\n\t            'state': this.model.getAttributes()\n\t        };\n\t    };\n\t    HistoryController.ID = 'HistoryController';\n\t    HistoryController.attributesThatDoNotTriggerQuery = ['quickview'];\n\t    return HistoryController;\n\t}(RootComponent_1.RootComponent));\n\texports.HistoryController = HistoryController;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 86 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Dom_1 = __webpack_require__(56);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar BaseComponent_1 = __webpack_require__(75);\n\texports.MODEL_EVENTS = {\n\t    PREPROCESS: 'preprocess',\n\t    CHANGE_ONE: 'change:',\n\t    CHANGE: 'change',\n\t    RESET: 'reset',\n\t    ALL: 'all'\n\t};\n\t/**\n\t * A model is basically a key -> value store that trigger letious javascript event when one of the value for each of it's key changes.<br/>\n\t * This is a class that is meant to be extended : the most important one probably being the {@link QueryStateModel}<br/>\n\t * Component set values in this key -> value store, and listen to event triggered to react accordingly.<br/>\n\t */\n\tvar Model = (function (_super) {\n\t    __extends(Model, _super);\n\t    function Model(element, id, attributes) {\n\t        _super.call(this, element, id);\n\t        this.eventNameSpace = id;\n\t        this.defaultAttributes = Utils_1.Utils.extendDeep(this.defaultAttributes, attributes);\n\t        this.attributes = attributes;\n\t        this.logger.debug('Creating model');\n\t    }\n\t    Model.prototype.set = function (attribute, value, options) {\n\t        var toSet = {};\n\t        toSet[attribute] = value;\n\t        this.setMultiple(toSet, options);\n\t    };\n\t    Model.prototype.getAttributes = function () {\n\t        var _this = this;\n\t        var attributes = {};\n\t        _.each(this.attributes, function (attribute, key) {\n\t            if (_.isObject(attribute)) {\n\t                if (!Utils_1.Utils.objectEqual(attribute, _this.defaultAttributes[key])) {\n\t                    attributes[key] = attribute;\n\t                }\n\t            }\n\t            else if (attribute != _this.defaultAttributes[key]) {\n\t                attributes[key] = attribute;\n\t            }\n\t        });\n\t        return attributes;\n\t    };\n\t    Model.prototype.setMultiple = function (toSet, options) {\n\t        var _this = this;\n\t        var anythingChanged = false;\n\t        this.preprocessEvent(toSet);\n\t        _.each(toSet, function (value, attribute) {\n\t            if (!options || !options.customAttribute) {\n\t                _this.checkIfAttributeExists(attribute);\n\t            }\n\t            value = _this.parseToCorrectType(attribute, value);\n\t            if (!options || options.validateType) {\n\t                _this.validateType(attribute, value);\n\t            }\n\t            if (_this.checkIfAttributeChanged(attribute, value)) {\n\t                _this.attributes[attribute] = value;\n\t                anythingChanged = true;\n\t                if (options == null || !options.silent) {\n\t                    _this.attributeHasChangedEvent(attribute);\n\t                }\n\t            }\n\t        });\n\t        if (anythingChanged && (options == null || !options.silent)) {\n\t            this.attributesHasChangedEvent();\n\t            this.anyEvent();\n\t        }\n\t    };\n\t    Model.prototype.setNewDefault = function (attribute, value, options) {\n\t        if (!options || !options.customAttribute) {\n\t            this.checkIfAttributeExists(attribute);\n\t        }\n\t        this.defaultAttributes[attribute] = value;\n\t    };\n\t    Model.prototype.setDefault = function (attribute, options) {\n\t        this.set(attribute, this.defaultAttributes[attribute]);\n\t    };\n\t    Model.prototype.get = function (attribute) {\n\t        if (attribute == undefined) {\n\t            return this.attributes;\n\t        }\n\t        else {\n\t            return this.attributes[attribute];\n\t        }\n\t    };\n\t    Model.prototype.getDefault = function (attribute) {\n\t        if (attribute == undefined) {\n\t            return this.defaultAttributes;\n\t        }\n\t        else {\n\t            return this.defaultAttributes[attribute];\n\t        }\n\t    };\n\t    Model.prototype.reset = function () {\n\t        this.setMultiple(this.defaultAttributes);\n\t        this.modelWasResetEvent();\n\t    };\n\t    Model.prototype.registerNewAttribute = function (attribute, defaultValue) {\n\t        this.defaultAttributes[attribute] = defaultValue;\n\t        this.attributes[attribute] = defaultValue;\n\t    };\n\t    Model.prototype.getEventName = function (event) {\n\t        return this.eventNameSpace + ':' + event;\n\t    };\n\t    Model.prototype.attributesHasChangedEvent = function () {\n\t        Dom_1.$$(this.element).trigger(this.getEventName(Model.eventTypes.change), this.createAttributesChangedArgument());\n\t    };\n\t    Model.prototype.attributeHasChangedEvent = function (attr) {\n\t        Dom_1.$$(this.element).trigger(this.getEventName(Model.eventTypes.changeOne) + attr, this.createAttributeChangedArgument(attr));\n\t    };\n\t    Model.prototype.preprocessEvent = function (attributes) {\n\t        Dom_1.$$(this.element).trigger(this.getEventName(Model.eventTypes.preprocess), attributes);\n\t    };\n\t    Model.prototype.modelWasResetEvent = function () {\n\t        Dom_1.$$(this.element).trigger(this.getEventName(Model.eventTypes.reset), this.createModelChangedArgument());\n\t    };\n\t    Model.prototype.anyEvent = function () {\n\t        Dom_1.$$(this.element).trigger(this.getEventName(Model.eventTypes.all), this.createModelChangedArgument());\n\t    };\n\t    Model.prototype.createAttributeChangedArgument = function (attribute) {\n\t        return { attribute: attribute, value: this.attributes[attribute] };\n\t    };\n\t    Model.prototype.createAttributesChangedArgument = function () {\n\t        return { attributes: this.attributes };\n\t    };\n\t    Model.prototype.createModelChangedArgument = function () {\n\t        return { model: this };\n\t    };\n\t    Model.prototype.checkIfAttributeExists = function (attribute) {\n\t        Assert_1.Assert.check(_.has(this.attributes, attribute));\n\t    };\n\t    Model.prototype.validateType = function (attribute, value) {\n\t        if (!Utils_1.Utils.isNullOrUndefined(this.attributes[attribute]) && !Utils_1.Utils.isUndefined(value)) {\n\t            if (_.isNumber(this.attributes[attribute])) {\n\t                Assert_1.Assert.check(_.isNumber(value) && !isNaN(value), 'Non-matching type');\n\t            }\n\t            else if (_.isBoolean(this.attributes[attribute])) {\n\t                Assert_1.Assert.check(_.isBoolean(value) || Utils_1.Utils.parseBooleanIfNotUndefined(value) !== undefined, 'Non-matching type');\n\t            }\n\t            else {\n\t                if (!Utils_1.Utils.isNullOrUndefined(this.defaultAttributes[attribute])) {\n\t                    Assert_1.Assert.check(typeof value === typeof this.defaultAttributes[attribute], 'Non-matching type');\n\t                }\n\t            }\n\t        }\n\t    };\n\t    Model.prototype.parseToCorrectType = function (attribute, value) {\n\t        if (_.isNumber(this.attributes[attribute])) {\n\t            return parseInt(value, 10);\n\t        }\n\t        else if (_.isBoolean(this.attributes[attribute])) {\n\t            if (_.isBoolean(value)) {\n\t                return value;\n\t            }\n\t            else {\n\t                return Utils_1.Utils.parseBooleanIfNotUndefined(value);\n\t            }\n\t        }\n\t        return value;\n\t    };\n\t    Model.prototype.checkIfAttributeChanged = function (attribute, newValue) {\n\t        var oldValue = this.attributes[attribute];\n\t        if (_.isNumber(oldValue) || _.isString(oldValue) || _.isBoolean(oldValue)) {\n\t            return oldValue !== newValue;\n\t        }\n\t        if (_.isArray(oldValue)) {\n\t            return !Utils_1.Utils.arrayEqual(oldValue, newValue);\n\t        }\n\t        if (_.isObject(oldValue)) {\n\t            return !Utils_1.Utils.objectEqual(oldValue, newValue);\n\t        }\n\t        return true;\n\t    };\n\t    Model.prototype.debugInfo = function () {\n\t        return null;\n\t    };\n\t    // changeOne: is when one specific attribute change, change is when any attribute change\n\t    /**\n\t     * The event type that can be triggered :<br/>\n\t     * -- preprocess -> triggered before a value is set on an attribute, to allow to modify it before it's set.<br/>\n\t     * -- changeOne -> triggered when a single value change.\n\t     * @type {{preprocess: string, changeOne: string, change: string, reset: string, all: string}}\n\t     */\n\t    Model.eventTypes = {\n\t        preprocess: 'preprocess',\n\t        changeOne: 'change:',\n\t        change: 'change',\n\t        reset: 'reset',\n\t        all: 'all'\n\t    };\n\t    return Model;\n\t}(BaseComponent_1.BaseComponent));\n\texports.Model = Model;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 87 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar LocalStorageUtils_1 = __webpack_require__(68);\n\tvar Model_1 = __webpack_require__(86);\n\tvar Logger_1 = __webpack_require__(15);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar InitializationEvents_1 = __webpack_require__(43);\n\tvar RootComponent_1 = __webpack_require__(74);\n\tvar Dom_1 = __webpack_require__(56);\n\t/**\n\t * This component acts like the {@link HistoryController} excepts that is saves the {@link QueryStateModel} in the local storage.<br/>\n\t * This will not allow 'back' and 'forward' navigation in the history, like the standard {@link HistoryController} allows. Instead, it load the query state only on page load.<br/>\n\t * To enable this component, you should set the {@link SearchInterface.options.useLocalStorageForHistory} as well as the {@link SearchInterface.options.enableHistory} options to true.\n\t */\n\tvar LocalStorageHistoryController = (function (_super) {\n\t    __extends(LocalStorageHistoryController, _super);\n\t    /**\n\t     * Create a new LocalStorageHistoryController instance\n\t     * @param element\n\t     * @param windoh For mock purpose\n\t     * @param model\n\t     * @param queryController\n\t     */\n\t    function LocalStorageHistoryController(element, windoh, model, queryController) {\n\t        var _this = this;\n\t        _super.call(this, element, LocalStorageHistoryController.ID);\n\t        this.windoh = windoh;\n\t        this.model = model;\n\t        this.queryController = queryController;\n\t        this.omit = [];\n\t        if (!windoh['localStorage']) {\n\t            new Logger_1.Logger(element).info('No local storage available in current browser. LocalStorageHistoryController cannot initialize itself', this);\n\t        }\n\t        else {\n\t            this.storage = new LocalStorageUtils_1.LocalStorageUtils(LocalStorageHistoryController.ID);\n\t            Assert_1.Assert.exists(this.model);\n\t            Assert_1.Assert.exists(this.queryController);\n\t            Dom_1.$$(this.element).on(InitializationEvents_1.InitializationEvents.restoreHistoryState, function () { return _this.updateModelFromLocalStorage(); });\n\t            Dom_1.$$(this.element).on(this.model.getEventName(Model_1.Model.eventTypes.all), function () { return _this.updateLocalStorageFromModel(); });\n\t        }\n\t    }\n\t    /**\n\t     * Specifies an array of attributes from the query state model that should not be persisted in the local storage\n\t     * @param attributes\n\t     */\n\t    LocalStorageHistoryController.prototype.withoutThoseAttribute = function (attributes) {\n\t        this.omit = attributes;\n\t    };\n\t    LocalStorageHistoryController.prototype.updateLocalStorageFromModel = function () {\n\t        var attributes = _.omit(this.model.getAttributes(), this.omit);\n\t        this.setStorageValues(attributes);\n\t        this.logger.debug('Saving state to localstorage', attributes);\n\t    };\n\t    LocalStorageHistoryController.prototype.updateModelFromLocalStorage = function () {\n\t        var _this = this;\n\t        var toSet = {};\n\t        var loadedFromStorage = this.storage.load();\n\t        _.each(this.model.attributes, function (value, key, obj) {\n\t            var valToSet = loadedFromStorage ? loadedFromStorage[key] : undefined;\n\t            if (valToSet == undefined) {\n\t                valToSet = _this.model.defaultAttributes[key];\n\t            }\n\t            toSet[key] = valToSet;\n\t        });\n\t        this.model.setMultiple(toSet);\n\t    };\n\t    LocalStorageHistoryController.prototype.setStorageValues = function (values) {\n\t        this.storage.save(values);\n\t    };\n\t    LocalStorageHistoryController.ID = 'LocalStorageHistoryController';\n\t    return LocalStorageHistoryController;\n\t}(RootComponent_1.RootComponent));\n\texports.LocalStorageHistoryController = LocalStorageHistoryController;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 88 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Model_1 = __webpack_require__(86);\n\texports.Model = Model_1.Model;\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\texports.QueryStateModel = QueryStateModel_1.QueryStateModel;\n\tvar ComponentOptionsModel_1 = __webpack_require__(90);\n\texports.ComponentOptionsModel = ComponentOptionsModel_1.ComponentOptionsModel;\n\tvar ComponentStateModel_1 = __webpack_require__(91);\n\texports.ComponentStateModel = ComponentStateModel_1.ComponentStateModel;\n\n\n/***/ },\n/* 89 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Model_1 = __webpack_require__(86);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Utils_1 = __webpack_require__(17);\n\texports.QUERY_STATE_ATTRIBUTES = {\n\t    Q: 'q',\n\t    FIRST: 'first',\n\t    T: 't',\n\t    TG: 'tg',\n\t    SORT: 'sort',\n\t    HD: 'hd',\n\t    HQ: 'hq',\n\t    QUICKVIEW: 'quickview'\n\t};\n\t/**\n\t * The QueryStateModel is a key->value store of the state of every component that can affect a query.<br/>\n\t * Component set values in this key -> value store, and listen to event triggered to react accordingly.<br/>\n\t * For example, when a query is launched, the searchbox will set the 'q' attribute, the pager will set the 'first' attribute, etc.<br/>\n\t * At the same time, this class will trigger the associated event when a value is modified.<br/>\n\t * eg : The user change the content of the searchbox, and submit a query. This will trigger the following events :<br/>\n\t * -- state:change:q (because the value of 'q' changed)</br>\n\t * -- state:change (because at least one value changed in the query state)<br/>\n\t * Component or external code could hook handler on those events : document.addEventListener('state:change:q', handler);<br/>\n\t * See : {@link Model}, as all the relevant method are exposed in the base class.<br/>\n\t * Optionally, the state can be persisted to the query string to allow browser history management : See {@link HistoryController}\n\t */\n\tvar QueryStateModel = (function (_super) {\n\t    __extends(QueryStateModel, _super);\n\t    /**\n\t     * Create a new QueryState\n\t     * @param element\n\t     * @param attributes\n\t     * @param bindings\n\t     */\n\t    function QueryStateModel(element, attributes) {\n\t        var merged = _.extend({}, QueryStateModel.defaultAttributes, attributes);\n\t        _super.call(this, element, QueryStateModel.ID, merged);\n\t    }\n\t    QueryStateModel.getFacetId = function (id, include) {\n\t        if (include === void 0) { include = true; }\n\t        return 'f:' + id + (include ? '' : ':not');\n\t    };\n\t    QueryStateModel.getFacetOperator = function (id) {\n\t        return 'f:' + id + ':operator';\n\t    };\n\t    QueryStateModel.getFacetLookupValue = function (id) {\n\t        return QueryStateModel.getFacetId(id) + ':lookupvalues';\n\t    };\n\t    /**\n\t     * Determine if at least one facet is currently active in the interface (this means that a facet has selected or excluded values)\n\t     * @returns {boolean}\n\t     */\n\t    QueryStateModel.prototype.atLeastOneFacetIsActive = function () {\n\t        return !_.isUndefined(_.find(this.attributes, function (value, key) {\n\t            return key.indexOf('f:') == 0 && Utils_1.Utils.isNonEmptyArray(value) && key.indexOf(':range') < 0;\n\t        }));\n\t    };\n\t    QueryStateModel.prototype.set = function (attribute, value, options) {\n\t        this.validate(attribute, value);\n\t        _super.prototype.set.call(this, attribute, value, options);\n\t    };\n\t    QueryStateModel.prototype.validate = function (attribute, value) {\n\t        if (attribute == QueryStateModel.attributesEnum.first) {\n\t            Assert_1.Assert.isLargerOrEqualsThan(0, value);\n\t        }\n\t    };\n\t    QueryStateModel.ID = 'state';\n\t    QueryStateModel.defaultAttributes = {\n\t        q: '',\n\t        first: 0,\n\t        t: '',\n\t        hd: '',\n\t        hq: '',\n\t        sort: '',\n\t        tg: '',\n\t        quickview: ''\n\t    };\n\t    QueryStateModel.attributesEnum = {\n\t        q: 'q',\n\t        first: 'first',\n\t        t: 't',\n\t        sort: 'sort',\n\t        hd: 'hd',\n\t        hq: 'hq',\n\t        tg: 'tg',\n\t        quickview: 'quickview'\n\t    };\n\t    return QueryStateModel;\n\t}(Model_1.Model));\n\texports.QueryStateModel = QueryStateModel;\n\tfunction setState(model, args) {\n\t    Assert_1.Assert.exists(model);\n\t    if (args.length == 0 || args[0] == undefined) {\n\t        // No args means return the model\n\t        return model;\n\t    }\n\t    else if (args.length == 1 && Utils_1.Utils.isNonEmptyString(args[0])) {\n\t        // One string arg means retrieve value from model\n\t        return model.get(args[0]);\n\t    }\n\t    else if (_.isObject(args[0])) {\n\t        // One dictionary means set multiple values\n\t        var toSet = args[0];\n\t        var options = _.extend({ customAttribute: true }, args[1]);\n\t        return model.setMultiple(toSet, options);\n\t    }\n\t    else if (args.length > 1) {\n\t        // Otherwise we're setting a value\n\t        var name_1 = args[0];\n\t        var value = args[1];\n\t        var options = _.extend({ customAttribute: true }, args[2]);\n\t        Assert_1.Assert.isNonEmptyString(name_1);\n\t        return model.set(name_1, value, options);\n\t    }\n\t}\n\texports.setState = setState;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 90 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Model_1 = __webpack_require__(86);\n\tvar ComponentOptionsModel = (function (_super) {\n\t    __extends(ComponentOptionsModel, _super);\n\t    function ComponentOptionsModel(element, attributes) {\n\t        var merged = _.extend({}, ComponentOptionsModel.defaultAttributes, attributes);\n\t        _super.call(this, element, ComponentOptionsModel.ID, merged);\n\t    }\n\t    ComponentOptionsModel.ID = 'ComponentOptions';\n\t    ComponentOptionsModel.defaultAttributes = {\n\t        resultLink: undefined,\n\t        searchHub: undefined\n\t    };\n\t    ComponentOptionsModel.attributesEnum = {\n\t        resultLink: 'resultLink',\n\t        searchHub: 'searchHub'\n\t    };\n\t    return ComponentOptionsModel;\n\t}(Model_1.Model));\n\texports.ComponentOptionsModel = ComponentOptionsModel;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 91 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Model_1 = __webpack_require__(86);\n\tvar ComponentStateModel = (function (_super) {\n\t    __extends(ComponentStateModel, _super);\n\t    function ComponentStateModel(element) {\n\t        _super.call(this, element, ComponentStateModel.ID, {});\n\t    }\n\t    ComponentStateModel.prototype.registerComponent = function (componentId, component) {\n\t        var currentAttribute = this.attributes[componentId];\n\t        if (currentAttribute == undefined) {\n\t            this.attributes[componentId] = [component];\n\t        }\n\t        else {\n\t            this.attributes[componentId].push(component);\n\t        }\n\t    };\n\t    ComponentStateModel.ID = 'ComponentState';\n\t    return ComponentStateModel;\n\t}(Model_1.Model));\n\texports.ComponentStateModel = ComponentStateModel;\n\n\n/***/ },\n/* 92 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tfunction __export(m) {\n\t    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t}\n\t__export(__webpack_require__(93));\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\texports.ComponentOptions = ComponentOptions_1.ComponentOptions;\n\texports.ComponentOptionsType = ComponentOptions_1.ComponentOptionsType;\n\tvar Component_1 = __webpack_require__(95);\n\texports.Component = Component_1.Component;\n\tvar BaseComponent_1 = __webpack_require__(75);\n\texports.BaseComponent = BaseComponent_1.BaseComponent;\n\tvar RootComponent_1 = __webpack_require__(74);\n\texports.RootComponent = RootComponent_1.RootComponent;\n\tvar QueryBuilder_1 = __webpack_require__(76);\n\texports.QueryBuilder = QueryBuilder_1.QueryBuilder;\n\tvar ExpressionBuilder_1 = __webpack_require__(77);\n\texports.ExpressionBuilder = ExpressionBuilder_1.ExpressionBuilder;\n\t// Export Initialization under both name, for legacy reason and old code in the wild that\n\t// reference the old CoveoJQuery module\n\tvar Initialization_1 = __webpack_require__(94);\n\texports.Initialization = Initialization_1.Initialization;\n\tvar Initialization_2 = __webpack_require__(94);\n\texports.CoveoJQuery = Initialization_2.Initialization;\n\tvar CoveoJQuery_1 = __webpack_require__(119);\n\texports.initCoveoJQuery = CoveoJQuery_1.initCoveoJQuery;\n\n\n/***/ },\n/* 93 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Initialization_1 = __webpack_require__(94);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar QueryController_1 = __webpack_require__(73);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar Analytics_1 = __webpack_require__(112);\n\tvar InitializationEvents_1 = __webpack_require__(43);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar Component_1 = __webpack_require__(95);\n\t/**\n\t * Initialize the framework with a basic search interface. Calls {@link Initialization.initSearchInterface}.<br/>\n\t * If using the jQuery extension, this is called using <code>$('#root').coveo('init');</code>.\n\t * @param element The root of the interface to initialize.\n\t * @param options JSON options for the framework (e.g.: <code>{Searchbox : {enableSearchAsYouType : true}}</code>).\n\t */\n\tfunction init(element, options) {\n\t    if (options === void 0) { options = {}; }\n\t    Initialization_1.Initialization.initializeFramework(element, options, function () {\n\t        Initialization_1.Initialization.initSearchInterface(element, options);\n\t    });\n\t}\n\texports.init = init;\n\tInitialization_1.Initialization.registerNamedMethod('init', function (element, options) {\n\t    if (options === void 0) { options = {}; }\n\t    init(element, options);\n\t});\n\t/**\n\t * Initialize the framework with a standalone search box. Calls {@link Initialize.initStandaloneSearchInterface}.<br/>\n\t * If using the jQuery extension, this is called using <code>$('#root').coveo('initSearchbox');</code>.\n\t * @param element The root of the interface to initialize.\n\t * @param searchPageUri The search page on which to redirect when there is a query.\n\t * @param options JSON options for the framework (e.g.: <code>{Searchbox : {enableSearchAsYouType : true}}</code>).\n\t */\n\tfunction initSearchbox(element, searchPageUri, options) {\n\t    if (options === void 0) { options = {}; }\n\t    Assert_1.Assert.isNonEmptyString(searchPageUri);\n\t    var searchInterfaceOptions = {};\n\t    searchInterfaceOptions.searchPageUri = searchPageUri;\n\t    searchInterfaceOptions.autoTriggerQuery = false;\n\t    searchInterfaceOptions.hideUntilFirstQuery = false;\n\t    searchInterfaceOptions.enableHistory = false;\n\t    options = _.extend({}, options, { StandaloneSearchInterface: searchInterfaceOptions });\n\t    Initialization_1.Initialization.initializeFramework(element, options, function () {\n\t        Initialization_1.Initialization.initStandaloneSearchInterface(element, options);\n\t    });\n\t}\n\texports.initSearchbox = initSearchbox;\n\tInitialization_1.Initialization.registerNamedMethod('initSearchbox', function (element, searchPageUri, options) {\n\t    if (options === void 0) { options = {}; }\n\t    initSearchbox(element, searchPageUri, options);\n\t});\n\t/**\n\t * Initialize the framework with a recommendation interface. Calls {@link Initialization.initRecommendationInterface}.<br/>\n\t * If using the jQuery extension, this is called using <code>$('#root').coveo('initRecommendation');</code>.\n\t * @param element The root of the interface to initialize.\n\t * @param mainSearchInterface The search interface to link with the recommendation interface (see {@link Recommendation}).\n\t * @param userContext The user context to pass with the query generated in the recommendation interface (see {@link Recommendation}).\n\t * @param options JSON options for the framework (e.g.: <code>{Searchbox : {enableSearchAsYouType: true}}</code>).\n\t */\n\tfunction initRecommendation(element, mainSearchInterface, userContext, options) {\n\t    if (options === void 0) { options = {}; }\n\t    var recommendationOptions = {};\n\t    recommendationOptions.mainSearchInterface = mainSearchInterface;\n\t    recommendationOptions.userContext = JSON.stringify(userContext);\n\t    recommendationOptions.enableHistory = false;\n\t    options = _.extend({}, options, { Recommendation: recommendationOptions });\n\t    Initialization_1.Initialization.initializeFramework(element, options, function () {\n\t        Initialization_1.Initialization.initRecommendationInterface(element, options);\n\t    });\n\t}\n\texports.initRecommendation = initRecommendation;\n\tInitialization_1.Initialization.registerNamedMethod('initRecommendation', function (element, mainSearchInterface, userContext, options) {\n\t    if (userContext === void 0) { userContext = {}; }\n\t    if (options === void 0) { options = {}; }\n\t    initRecommendation(element, mainSearchInterface, userContext, options);\n\t});\n\t/**\n\t * Execute a standard query. Active component in the interface will react to events/ push data in the query / handle the query success or failure as needed.<br/>\n\t * It triggers a standard query flow for which the standard component will perform their expected behavior.<br/>\n\t * If you wish to only perform a query on the index to retrieve results (without the component reacting), look into {@link SearchInterface} instead.<br/>\n\t * Calling this method is the same as calling {@link QueryController.executeQuery}.\n\t * @param element The root of the interface to initialize.\n\t */\n\tfunction executeQuery(element) {\n\t    Assert_1.Assert.exists(element);\n\t    var queryController = Component_1.Component.resolveBinding(element, QueryController_1.QueryController);\n\t    Assert_1.Assert.exists(queryController);\n\t    return queryController.executeQuery();\n\t}\n\texports.executeQuery = executeQuery;\n\tInitialization_1.Initialization.registerNamedMethod('executeQuery', function (element) {\n\t    return executeQuery(element);\n\t});\n\t/**\n\t * Perform operation on the state ({@link QueryStateModel} of the interface.<br/>\n\t * Get the complete {@link QueryStateModel} object: <code>Coveo.state(element)</code><br/>.\n\t * Get an attribute from the {@link QueryStateModel}: <code>Coveo.state(element, 'q')</code> Can be any attribute.<br/>\n\t * Set an attribute on the {@link QueryStateModel}: <code>Coveo.state(element, 'q', 'foobar')</code>. Can be any attribute.<br/>\n\t * Set multiple attribute on the {@link QueryStateModel}: <code>Coveo.state(element, {'q' : 'foobar' , sort : 'relevancy'})</code>. Can be any attribute.<br/>\n\t * If using the jQuery extension, this is called using <code>$('#root').coveo('state');</code>.\n\t * @param element The root of the interface for which to access the {@link QueryStateModel}.\n\t * @param args\n\t * @returns {any}\n\t */\n\tfunction state(element) {\n\t    var args = [];\n\t    for (var _i = 1; _i < arguments.length; _i++) {\n\t        args[_i - 1] = arguments[_i];\n\t    }\n\t    Assert_1.Assert.exists(element);\n\t    var model = Component_1.Component.resolveBinding(element, QueryStateModel_1.QueryStateModel);\n\t    return QueryStateModel_1.setState(model, args);\n\t}\n\texports.state = state;\n\tInitialization_1.Initialization.registerNamedMethod('state', function (element) {\n\t    var args = [];\n\t    for (var _i = 1; _i < arguments.length; _i++) {\n\t        args[_i - 1] = arguments[_i];\n\t    }\n\t    if (args.length != 0) {\n\t        return state.apply(undefined, [element].concat(args));\n\t    }\n\t    else {\n\t        return state.apply(undefined, [element]);\n\t    }\n\t});\n\t/**\n\t * Get the component bound on the given `HTMLElement`.\n\t * @param element The `HTMLElement` for which to get the component instance.\n\t * @param componentClass If multiple components are bound to a single `HTMLElement`, you need to specify which components you wish to get.\n\t * @param noThrow By default, the GET method will throw if there is no component bound, or if there are multiple component and no `componentClass` is specified. This deletes the error if set to true.\n\t * @returns {Component}\n\t */\n\tfunction get(element, componentClass, noThrow) {\n\t    Assert_1.Assert.exists(element);\n\t    return Component_1.Component.get(element, componentClass, noThrow);\n\t}\n\texports.get = get;\n\tInitialization_1.Initialization.registerNamedMethod('get', function (element, componentClass, noThrow) {\n\t    return get(element, componentClass, noThrow);\n\t});\n\tfunction result(element, noThrow) {\n\t    Assert_1.Assert.exists(element);\n\t    return Component_1.Component.getResult(element, noThrow);\n\t}\n\texports.result = result;\n\tInitialization_1.Initialization.registerNamedMethod('result', function (element, noThrow) {\n\t    return result(element, noThrow);\n\t});\n\tfunction getCoveoAnalyticsClient(element) {\n\t    var analytics = getCoveoAnalytics(element);\n\t    if (analytics) {\n\t        return analytics.client;\n\t    }\n\t    else {\n\t        return undefined;\n\t    }\n\t}\n\tfunction getCoveoAnalytics(element) {\n\t    var analyticsElement = Dom_1.$$(element).find('.' + Component_1.Component.computeCssClassName(Analytics_1.Analytics));\n\t    if (analyticsElement) {\n\t        return Component_1.Component.get(analyticsElement);\n\t    }\n\t    else {\n\t        return undefined;\n\t    }\n\t}\n\t/**\n\t * Log a custom event on the Coveo Usage Analytics service.\n\t * @param element The root of the interface for which to log analytics events.\n\t * @param customEventCause The cause of the event.\n\t * @param metadata The metadata associated with the event (JSON key value).\n\t */\n\tfunction logCustomEvent(element, customEventCause, metadata) {\n\t    var client = getCoveoAnalyticsClient(element);\n\t    if (client) {\n\t        client.logCustomEvent(customEventCause, metadata, element);\n\t    }\n\t}\n\texports.logCustomEvent = logCustomEvent;\n\tInitialization_1.Initialization.registerNamedMethod('logCustomEvent', function (element, customEventCause, metadata) {\n\t    logCustomEvent(element, customEventCause, metadata);\n\t});\n\t/**\n\t * Log a `SearchEvent` on the Coveo Usage Analytics service.\n\t * @param element The root of the interface for which to log analytics events.\n\t * @param searchEventCause The cause of the event.\n\t * @param metadata The metadata associated with the event (JSON key value).\n\t */\n\tfunction logSearchEvent(element, searchEventCause, metadata) {\n\t    var client = getCoveoAnalyticsClient(element);\n\t    if (client) {\n\t        client.logSearchEvent(searchEventCause, metadata);\n\t    }\n\t}\n\texports.logSearchEvent = logSearchEvent;\n\tInitialization_1.Initialization.registerNamedMethod('logSearchEvent', function (element, searchEventCause, metadata) {\n\t    logSearchEvent(element, searchEventCause, metadata);\n\t});\n\t/**\n\t * Log a `SearchAsYouTypeEvent` on the Coveo Usage Analytics service.<br/>\n\t * It is a bit different from a standard search event, as it will wait 5 seconds before sending the final `SearchAsYouType` event.\n\t * @param element The root of the interface for which to log analytics events.\n\t * @param searchAsYouTypeEventCause The cause of the event.\n\t * @param metadata The metadata associated with the event (JSON key value).\n\t */\n\tfunction logSearchAsYouTypeEvent(element, searchAsYouTypeEventCause, metadata) {\n\t    var client = getCoveoAnalyticsClient(element);\n\t    if (client) {\n\t        client.logSearchAsYouType(searchAsYouTypeEventCause, metadata);\n\t    }\n\t}\n\texports.logSearchAsYouTypeEvent = logSearchAsYouTypeEvent;\n\tInitialization_1.Initialization.registerNamedMethod('logSearchAsYouTypeEvent', function (element, searchAsYouTypeEventCause, metadata) {\n\t    logSearchAsYouTypeEvent(element, searchAsYouTypeEventCause, metadata);\n\t});\n\t/**\n\t * Log a `ClickEvent` on the Coveo Usage Analytics service.\n\t * @param element The root of the interface for which to log analytics events.\n\t * @param clickEventCause The cause of the event.\n\t * @param metadata The metadata associated with the event (JSON key value).\n\t * @param result The result that was clicked.\n\t */\n\tfunction logClickEvent(element, clickEventCause, metadata, result) {\n\t    var client = getCoveoAnalyticsClient(element);\n\t    if (client) {\n\t        client.logClickEvent(clickEventCause, metadata, result, element);\n\t    }\n\t}\n\texports.logClickEvent = logClickEvent;\n\tInitialization_1.Initialization.registerNamedMethod('logClickEvent', function (element, clickEventCause, metadata, result) {\n\t    logClickEvent(element, clickEventCause, metadata, result);\n\t});\n\t/**\n\t * Pass options to the framework, before it is initialized ({@link init}).<br/>\n\t * All the options passed with this calls will be merged together on initialization.\n\t * @param element The root of the interface for which you wish to set options.\n\t * @param optionsToSet JSON options for the framework (e.g.: <code>{Searchbox : {enableSearchAsYouType: true}}</code>).\n\t */\n\tfunction options(element, optionsToSet) {\n\t    if (optionsToSet === void 0) { optionsToSet = {}; }\n\t    Initialization_1.Initialization.registerDefaultOptions(element, optionsToSet);\n\t}\n\texports.options = options;\n\tInitialization_1.Initialization.registerNamedMethod('options', function (element, optionsToSet) {\n\t    if (optionsToSet === void 0) { optionsToSet = {}; }\n\t    options(element, optionsToSet);\n\t});\n\t/**\n\t * Patch the given `methodName` on an instance of a component bound to an `HTMLElement` with a new handler.\n\t * @param element\n\t * @param methodName\n\t * @param handler\n\t */\n\tfunction patch(element, methodName, handler) {\n\t    Initialization_1.Initialization.monkeyPatchComponentMethod(methodName, element, handler);\n\t}\n\texports.patch = patch;\n\tInitialization_1.Initialization.registerNamedMethod('patch', function (element, methodName, handler) {\n\t    patch(element, methodName, handler);\n\t});\n\tfunction initBox(element) {\n\t    var args = [];\n\t    for (var _i = 1; _i < arguments.length; _i++) {\n\t        args[_i - 1] = arguments[_i];\n\t    }\n\t    var type, options = {}, injectMarkup;\n\t    // This means : initBox, no type (no injection) and no options\n\t    if (args.length == 0) {\n\t        type = 'Standard';\n\t        injectMarkup = false;\n\t    }\n\t    else if (args.length == 1) {\n\t        // This mean a type (with injection) and no options\n\t        if (typeof args[0] == 'string') {\n\t            type = args[0];\n\t            injectMarkup = true;\n\t        }\n\t        else if (typeof args[0] == 'object') {\n\t            type = 'Standard';\n\t            injectMarkup = false;\n\t            options = args[0];\n\t        }\n\t        else {\n\t            Assert_1.Assert.fail('Invalid parameters to init a box');\n\t        }\n\t    }\n\t    else if (args.length == 2) {\n\t        type = args[0];\n\t        options = args[1];\n\t        injectMarkup = true;\n\t    }\n\t    var merged = {};\n\t    merged[type || 'Container'] = _.extend({}, options.SearchInterface, options[type]);\n\t    options = _.extend({}, options, merged);\n\t    Initialization_1.Initialization.initializeFramework(element, options, function () {\n\t        Initialization_1.Initialization.initBoxInterface(element, options, type, injectMarkup);\n\t    });\n\t}\n\texports.initBox = initBox;\n\tInitialization_1.Initialization.registerNamedMethod('initBox', function (element) {\n\t    var args = [];\n\t    for (var _i = 1; _i < arguments.length; _i++) {\n\t        args[_i - 1] = arguments[_i];\n\t    }\n\t    initBox(element, args);\n\t});\n\tfunction nuke(element) {\n\t    Dom_1.$$(element).trigger(InitializationEvents_1.InitializationEvents.nuke);\n\t}\n\texports.nuke = nuke;\n\tInitialization_1.Initialization.registerNamedMethod('nuke', function (element) {\n\t    nuke(element);\n\t});\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 94 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Logger_1 = __webpack_require__(15);\n\tvar Component_1 = __webpack_require__(95);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar InitializationEvents_1 = __webpack_require__(43);\n\tvar SearchInterface_1 = __webpack_require__(96);\n\tvar QueryController_1 = __webpack_require__(73);\n\tvar HashUtils_1 = __webpack_require__(64);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar ComponentStateModel_1 = __webpack_require__(91);\n\tvar ComponentOptionsModel_1 = __webpack_require__(90);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar Recommendation_1 = __webpack_require__(110);\n\t/**\n\t * The main purpose of this class is to initialize the framework (a.k.a the code executed when calling `Coveo.init`).<br/>\n\t * It's also in charge or registering the available components, as well as the method that we expost to the global Coveo scope.<br/>\n\t * For example, the `Coveo.executeQuery` function will be registed in this class by the {@link QueryController}.\n\t */\n\tvar Initialization = (function () {\n\t    function Initialization() {\n\t    }\n\t    /**\n\t     * Register a new set of options for a given element.<br/>\n\t     * When the element is eventually initialized as a component, those options will be used / merged to create the final option set to use for this component.<br/>\n\t     * Note that this function should not normally be called directly, but instead using the global `Coveo.options` function\n\t     * @param element\n\t     * @param options\n\t     */\n\t    Initialization.registerDefaultOptions = function (element, options) {\n\t        var existing = element['CoveoDefaultOptions'] || {};\n\t        var updated = Utils_1.Utils.extendDeep(existing, options);\n\t        element['CoveoDefaultOptions'] = updated;\n\t    };\n\t    Initialization.resolveDefaultOptions = function (element, options) {\n\t        var optionsForThisElement = element['CoveoDefaultOptions'];\n\t        var optionsSoFar;\n\t        if (Utils_1.Utils.exists(optionsForThisElement)) {\n\t            optionsSoFar = Utils_1.Utils.extendDeep(optionsForThisElement, options);\n\t        }\n\t        else {\n\t            optionsSoFar = options;\n\t        }\n\t        if (element.parentElement) {\n\t            return Initialization.resolveDefaultOptions(element.parentElement, optionsSoFar);\n\t        }\n\t        else {\n\t            return optionsSoFar;\n\t        }\n\t    };\n\t    /**\n\t     * Register a new Component to be recognized by the framework.<br/>\n\t     * This essentially mean that when we call `Coveo.init`, the Initialization class will scan the DOM for known component (which have registed themselves with this call) and create a new component on each element.\n\t     * @param componentClass\n\t     */\n\t    Initialization.registerAutoCreateComponent = function (componentClass) {\n\t        Assert_1.Assert.exists(componentClass);\n\t        Assert_1.Assert.exists(componentClass.ID);\n\t        Assert_1.Assert.doesNotExists(Initialization.autoCreateComponents[componentClass.ID]);\n\t        Assert_1.Assert.doesNotExists(Initialization.namedMethods[componentClass.ID]);\n\t        Initialization.autoCreateComponents[componentClass.ID] = componentClass;\n\t    };\n\t    /**\n\t     * Check if a component is already registed, using it's ID (e.g. : 'Facet').\n\t     * @param componentClassId\n\t     * @returns {boolean}\n\t     */\n\t    Initialization.isComponentClassIdRegistered = function (componentClassId) {\n\t        return Utils_1.Utils.exists(Initialization.autoCreateComponents[componentClassId]);\n\t    };\n\t    /**\n\t     * Return the list of all known components (the list of ID for each component).\n\t     * @returns {string[]}\n\t     */\n\t    Initialization.getListOfRegisteredComponents = function () {\n\t        return _.keys(Initialization.autoCreateComponents);\n\t    };\n\t    /**\n\t     * Return the component class definition, using it's ID (e.g. : 'CoveoFacet').\n\t     * @param name\n\t     * @returns {IComponentDefinition}\n\t     */\n\t    Initialization.getRegisteredComponent = function (name) {\n\t        return Initialization.autoCreateComponents[name];\n\t    };\n\t    /**\n\t     * Initialize the framework. Note that this function should not normally be called directly, but instead using a globally registered function (e.g.: Coveo.init), or {@link Initialization.initSearchInterface} or {@link Initialization.initStandaloneSearchInterface} <br/>\n\t     * (e.g. : `Coveo.init` or `Coveo.initSearchbox`).\n\t     * @param element The element on which to initialize the interface.\n\t     * @param options The options for all components (eg: {Searchbox : {enableSearchAsYouType : true}}).\n\t     * @param initSearchInterfaceFunction The function to execute to create the {@link SearchInterface} component. Different init call will create different {@link SearchInterface}.\n\t     */\n\t    Initialization.initializeFramework = function (element, options, initSearchInterfaceFunction) {\n\t        Assert_1.Assert.exists(element);\n\t        var alreadyInitialized = Component_1.Component.get(element, QueryController_1.QueryController, true);\n\t        if (alreadyInitialized) {\n\t            this.logger.error('This DOM element has already been initialized as a search interface, skipping initialization', element);\n\t            return;\n\t        }\n\t        options = Initialization.resolveDefaultOptions(element, options);\n\t        Initialization.performInitFunctionsOption(options, InitializationEvents_1.InitializationEvents.beforeInitialization);\n\t        Dom_1.$$(element).trigger(InitializationEvents_1.InitializationEvents.beforeInitialization);\n\t        initSearchInterfaceFunction(element, options);\n\t        Initialization.initExternalComponents(element, options);\n\t        Initialization.performInitFunctionsOption(options, InitializationEvents_1.InitializationEvents.afterComponentsInitialization);\n\t        Dom_1.$$(element).trigger(InitializationEvents_1.InitializationEvents.afterComponentsInitialization);\n\t        Dom_1.$$(element).trigger(InitializationEvents_1.InitializationEvents.restoreHistoryState);\n\t        Initialization.performInitFunctionsOption(options, InitializationEvents_1.InitializationEvents.afterInitialization);\n\t        Dom_1.$$(element).trigger(InitializationEvents_1.InitializationEvents.afterInitialization);\n\t        var searchInterface = Component_1.Component.get(element, SearchInterface_1.SearchInterface);\n\t        // Elements that have the coveo-hide-until-loaded class are hidden by default.\n\t        // Now that we're loaded (and before the first query returns), we can remove\n\t        // the class. Also, we add a class that gives the opportunity for an animation\n\t        // to apply at startup, such as a fade-in that comes in by default.\n\t        var elemsHidden = Dom_1.$$(element).findAll('.coveo-hide-until-loaded');\n\t        _.each(elemsHidden, function (e) {\n\t            Dom_1.$$(e).removeClass('coveo-hide-until-loaded');\n\t            Dom_1.$$(e).addClass('coveo-show-after-loaded');\n\t        });\n\t        if (searchInterface.options.autoTriggerQuery) {\n\t            Initialization.logFirstQueryCause(searchInterface);\n\t            Component_1.Component.get(element, QueryController_1.QueryController).executeQuery({\n\t                logInActionsHistory: searchInterface instanceof Recommendation_1.Recommendation ? false : true,\n\t                isFirstQuery: true\n\t            });\n\t        }\n\t    };\n\t    /**\n\t     * Create a new standard search interface. This is the function executed when calling `Coveo.init`.\n\t     * @param element\n\t     * @param options\n\t     */\n\t    Initialization.initSearchInterface = function (element, options) {\n\t        if (options === void 0) { options = {}; }\n\t        options = Initialization.resolveDefaultOptions(element, options);\n\t        var searchInterface = new SearchInterface_1.SearchInterface(element, options.SearchInterface, options.Analytics);\n\t        searchInterface.options.originalOptionsObject = options;\n\t        var initParameters = { options: options, bindings: searchInterface.getBindings() };\n\t        Initialization.automaticallyCreateComponentsInside(element, initParameters);\n\t    };\n\t    /**\n\t     * Create a new standalone search interface (standalone search box). This is the function executed when calling `Coveo.initSearchbox`.\n\t     * @param element\n\t     * @param options\n\t     */\n\t    Initialization.initStandaloneSearchInterface = function (element, options) {\n\t        if (options === void 0) { options = {}; }\n\t        options = Initialization.resolveDefaultOptions(element, options);\n\t        // Set trigger query on clear to false for standalone search interface automatically\n\t        // Take care of not overriding any options that could have been set by external code.\n\t        if (!options.Querybox) {\n\t            options.Querybox = {};\n\t        }\n\t        if (!options.Omnibox) {\n\t            options.Omnibox = {};\n\t        }\n\t        if (!options.Searchbox) {\n\t            options.Searchbox = {};\n\t        }\n\t        if (!options.Querybox.triggerQueryOnClear || !options.Omnibox.triggerQueryOnClear || !options.Searchbox.triggerOnQueryClear) {\n\t            options.Querybox.triggerQueryOnClear = false;\n\t            options.Omnibox.triggerQueryOnClear = false;\n\t            options.Searchbox.triggerQueryOnClear = false;\n\t        }\n\t        var searchInterface = new SearchInterface_1.StandaloneSearchInterface(element, options.StandaloneSearchInterface, options.Analytics);\n\t        searchInterface.options.originalOptionsObject = options;\n\t        var initParameters = { options: options, bindings: searchInterface.getBindings() };\n\t        Initialization.automaticallyCreateComponentsInside(element, initParameters);\n\t    };\n\t    /**\n\t     * Create a new recommendation search interface. This is the function executed when calling `Coveo.initRecommendation`.\n\t     * @param element\n\t     * @param options\n\t     */\n\t    Initialization.initRecommendationInterface = function (element, options) {\n\t        if (options === void 0) { options = {}; }\n\t        options = Initialization.resolveDefaultOptions(element, options);\n\t        // Since a recommendation interface inherits from a search interface, we need to merge those if passed on init\n\t        var optionsForRecommendation = _.extend({}, options.SearchInterface, options.Recommendation);\n\t        var recommendation = new window['Coveo']['Recommendation'](element, optionsForRecommendation, options.Analytics);\n\t        recommendation.options.originalOptionsObject = options;\n\t        var initParameters = { options: options, bindings: recommendation.getBindings() };\n\t        Initialization.automaticallyCreateComponentsInside(element, initParameters);\n\t    };\n\t    /**\n\t     * Scan the element and all its children for known components. Initialize every known component found.\n\t     * @param element The element for which to scan it's children.\n\t     * @param initParameters Needed parameters to initialize all the children components.\n\t     * @param ignore An optional list of component ID to ignore and skip when scanning for known components.\n\t     */\n\t    Initialization.automaticallyCreateComponentsInside = function (element, initParameters, ignore) {\n\t        Assert_1.Assert.exists(element);\n\t        var codeToExecute = [];\n\t        for (var componentClassId in Initialization.autoCreateComponents) {\n\t            if (!_.contains(ignore, componentClassId)) {\n\t                var componentClass = Initialization.autoCreateComponents[componentClassId];\n\t                var classname = Component_1.Component.computeCssClassName(componentClass);\n\t                var elements = Dom_1.$$(element).findAll('.' + classname);\n\t                if (Dom_1.$$(element).hasClass(classname)) {\n\t                    elements.push(element);\n\t                }\n\t                if (elements.length != 0) {\n\t                    // Queue the code that will scan the now resolved selector to after we've\n\t                    // finished evaluating all selectors. This ensures that if a component\n\t                    // constructor adds child components under his tags, those won't get auto-\n\t                    // initialize by this invocation of this method. Components inserting child\n\t                    // components are responsible of invoking this method again if they want\n\t                    // child components to be auto-initialized.\n\t                    //\n\t                    // Explanation: If we don't do that, child components for which selector have\n\t                    // already been evaluated won't be initialized, whereas those that are next\n\t                    // in the list will be.\n\t                    codeToExecute.push(Initialization.createFunctionThatInitializesComponentOnElements(elements, componentClassId, componentClass, initParameters));\n\t                }\n\t            }\n\t        }\n\t        // Now that all selectors are executed, let's really initialize the components.\n\t        _.each(codeToExecute, function (code) { return code(); });\n\t    };\n\t    /**\n\t     * Create a new component on the given element.\n\t     * @param componentClassId The ID of the component to initialize (e.g. : 'CoveoFacet').\n\t     * @param element The HTMLElement on which to initialize.\n\t     * @param initParameters Needed parameters to initialize the component.\n\t     * @returns {Component}\n\t     */\n\t    Initialization.createComponentOfThisClassOnElement = function (componentClassId, element, initParameters) {\n\t        Assert_1.Assert.isNonEmptyString(componentClassId);\n\t        Assert_1.Assert.exists(element);\n\t        var componentClass = Initialization.autoCreateComponents[componentClassId];\n\t        Assert_1.Assert.exists(componentClass);\n\t        var bindings = {};\n\t        var options = {};\n\t        var result = undefined;\n\t        if (initParameters != undefined) {\n\t            _.each(initParameters.bindings, function (value, key) {\n\t                bindings[key] = value;\n\t            });\n\t            options = initParameters.options;\n\t            result = initParameters.result;\n\t        }\n\t        Initialization.logger.trace('Creating component of class ' + componentClassId, element, options);\n\t        return new componentClass(element, options, bindings, result);\n\t    };\n\t    /**\n\t     * Register a new globally available method in the Coveo namespace (e.g.: `Coveo.init`).\n\t     * @param methodName The method name to register.\n\t     * @param handler The function to execute when the method is called.\n\t     */\n\t    Initialization.registerNamedMethod = function (methodName, handler) {\n\t        Assert_1.Assert.isNonEmptyString(methodName);\n\t        Assert_1.Assert.doesNotExists(Initialization.autoCreateComponents[methodName]);\n\t        Assert_1.Assert.doesNotExists(Initialization.namedMethods[methodName]);\n\t        Assert_1.Assert.exists(handler);\n\t        Initialization.namedMethods[methodName] = handler;\n\t    };\n\t    /**\n\t     * Check if the method is already registed.\n\t     * @param methodName\n\t     * @returns {boolean}\n\t     */\n\t    Initialization.isNamedMethodRegistered = function (methodName) {\n\t        return Utils_1.Utils.exists(Initialization.namedMethods[methodName]);\n\t    };\n\t    /**\n\t     * 'Monkey patch' (replace the function with a new one) a given method on a component instance.\n\t     * @param methodName\n\t     * @param element\n\t     * @param handler\n\t     */\n\t    Initialization.monkeyPatchComponentMethod = function (methodName, element, handler) {\n\t        Assert_1.Assert.isNonEmptyString(methodName);\n\t        Assert_1.Assert.exists(handler);\n\t        var componentClass;\n\t        if (methodName.indexOf('.') > 0) {\n\t            var splitArg = methodName.split('.');\n\t            Assert_1.Assert.check(splitArg.length == 2, 'Invalid method name, correct syntax is CoveoComponent.methodName.');\n\t            componentClass = splitArg[0];\n\t            methodName = splitArg[1];\n\t        }\n\t        var boundComponent = Component_1.Component.get(element, componentClass);\n\t        Assert_1.Assert.exists(boundComponent);\n\t        Assert_1.Assert.exists(boundComponent[methodName]);\n\t        var originalMethodName = '__' + methodName;\n\t        if (!Utils_1.Utils.exists(boundComponent[originalMethodName])) {\n\t            boundComponent[originalMethodName] = boundComponent[methodName];\n\t        }\n\t        boundComponent[methodName] = handler;\n\t    };\n\t    Initialization.initBoxInterface = function (element, options, type, injectMarkup) {\n\t        if (options === void 0) { options = {}; }\n\t        if (type === void 0) { type = 'Standard'; }\n\t        if (injectMarkup === void 0) { injectMarkup = true; }\n\t        options = Initialization.resolveDefaultOptions(element, options);\n\t        var fromInitTypeToBoxReference = 'Box';\n\t        if (type != 'Standard') {\n\t            fromInitTypeToBoxReference += 'For' + type;\n\t        }\n\t        var boxRef = Component_1.Component.getComponentRef(fromInitTypeToBoxReference);\n\t        if (boxRef) {\n\t            new Logger_1.Logger(element).info('Initializing box of type ' + fromInitTypeToBoxReference);\n\t            var injectFunction = injectMarkup ? boxRef.getInjection : function () {\n\t            };\n\t            var box = new boxRef(element, options[fromInitTypeToBoxReference], options.Analytics, injectFunction, options);\n\t            box.options.originalOptionsObject = options;\n\t            var initParameters = { options: options, bindings: box.getBindings() };\n\t            Initialization.automaticallyCreateComponentsInside(element, initParameters);\n\t        }\n\t        else {\n\t            new Logger_1.Logger(element).error('Trying to initialize box of type : ' + fromInitTypeToBoxReference + ' but not found in code (not compiled)!');\n\t            Assert_1.Assert.fail('Cannot initialize unknown type of box');\n\t        }\n\t    };\n\t    Initialization.dispatchNamedMethodCall = function (methodName, element, args) {\n\t        Assert_1.Assert.isNonEmptyString(methodName);\n\t        Assert_1.Assert.exists(element);\n\t        var namedMethodHandler = Initialization.namedMethods[methodName];\n\t        Assert_1.Assert.exists(namedMethodHandler);\n\t        Initialization.logger.trace('Dispatching named method call of ' + methodName, element, args);\n\t        if (args.length != 0) {\n\t            return namedMethodHandler.apply(null, [element].concat(args));\n\t        }\n\t        else {\n\t            return namedMethodHandler.apply(null, [element]);\n\t        }\n\t    };\n\t    Initialization.dispatchNamedMethodCallOrComponentCreation = function (token, element, args) {\n\t        Assert_1.Assert.isNonEmptyString(token);\n\t        Assert_1.Assert.exists(element);\n\t        if (Initialization.isNamedMethodRegistered(token)) {\n\t            return Initialization.dispatchNamedMethodCall(token, element, args);\n\t        }\n\t        else if (Initialization.isComponentClassIdRegistered(token)) {\n\t            return Initialization.createComponentOfThisClassOnElement(token, element, args[0]);\n\t        }\n\t        else if (Initialization.isThereASingleComponentBoundToThisElement(element)) {\n\t            return Initialization.dispatchMethodCallOnBoundComponent(token, element, args);\n\t        }\n\t        else {\n\t            Assert_1.Assert.fail('No method or component named ' + token + ' are registered.');\n\t        }\n\t    };\n\t    Initialization.isSearchFromLink = function (searchInterface) {\n\t        return Utils_1.Utils.isNonEmptyString(searchInterface.getBindings().queryStateModel.get('q'));\n\t    };\n\t    Initialization.isThereASingleComponentBoundToThisElement = function (element) {\n\t        Assert_1.Assert.exists(element);\n\t        return Utils_1.Utils.exists(Component_1.Component.get(element));\n\t    };\n\t    Initialization.dispatchMethodCallOnBoundComponent = function (methodName, element, args) {\n\t        Assert_1.Assert.isNonEmptyString(methodName);\n\t        Assert_1.Assert.exists(element);\n\t        var boundComponent = Component_1.Component.get(element);\n\t        Assert_1.Assert.exists(boundComponent);\n\t        var method = boundComponent[methodName];\n\t        if (Utils_1.Utils.exists(method)) {\n\t            return method.apply(boundComponent, args);\n\t        }\n\t        else {\n\t            Assert_1.Assert.fail('No method named ' + methodName + ' exist on component ' + boundComponent.type);\n\t        }\n\t    };\n\t    Initialization.logFirstQueryCause = function (searchInterface) {\n\t        var firstQueryCause = HashUtils_1.HashUtils.getValue('firstQueryCause', HashUtils_1.HashUtils.getHash());\n\t        if (firstQueryCause != null) {\n\t            var meta = HashUtils_1.HashUtils.getValue('firstQueryMeta', HashUtils_1.HashUtils.getHash()) || {};\n\t            searchInterface.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList[firstQueryCause], meta);\n\t        }\n\t        else {\n\t            if (Initialization.isSearchFromLink(searchInterface)) {\n\t                searchInterface.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.searchFromLink, {});\n\t            }\n\t            else {\n\t                searchInterface.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.interfaceLoad, {});\n\t            }\n\t        }\n\t    };\n\t    Initialization.performInitFunctionsOption = function (options, event) {\n\t        if (Utils_1.Utils.exists(options)) {\n\t            Initialization.performFunctions(options[event]);\n\t        }\n\t    };\n\t    Initialization.performFunctions = function (option) {\n\t        if (Utils_1.Utils.exists(option)) {\n\t            _.each(option, function (func) {\n\t                if (typeof func == 'function') {\n\t                    func();\n\t                }\n\t            });\n\t        }\n\t    };\n\t    Initialization.initExternalComponents = function (element, options) {\n\t        if (options && options['externalComponents']) {\n\t            var searchInterface = Component_1.Component.get(element, SearchInterface_1.SearchInterface);\n\t            var queryStateModel = Component_1.Component.get(element, QueryStateModel_1.QueryStateModel);\n\t            var componentStateModel = Component_1.Component.get(element, ComponentStateModel_1.ComponentStateModel);\n\t            var queryController = Component_1.Component.get(element, QueryController_1.QueryController);\n\t            var componentOptionsModel = Component_1.Component.get(element, ComponentOptionsModel_1.ComponentOptionsModel);\n\t            var usageAnalytics = searchInterface.usageAnalytics;\n\t            Assert_1.Assert.exists(searchInterface);\n\t            Assert_1.Assert.exists(queryStateModel);\n\t            Assert_1.Assert.exists(queryController);\n\t            Assert_1.Assert.exists(componentStateModel);\n\t            Assert_1.Assert.exists(usageAnalytics);\n\t            var initParameters_1 = {\n\t                options: options,\n\t                bindings: {\n\t                    searchInterface: searchInterface,\n\t                    queryStateModel: queryStateModel,\n\t                    queryController: queryController,\n\t                    usageAnalytics: usageAnalytics,\n\t                    componentStateModel: componentStateModel,\n\t                    componentOptionsModel: componentOptionsModel,\n\t                    root: element\n\t                }\n\t            };\n\t            _.each(options['externalComponents'], function (externalComponent) {\n\t                var elementToInstantiate = externalComponent;\n\t                if (Utils_1.Utils.isHtmlElement(elementToInstantiate)) {\n\t                    Initialization.automaticallyCreateComponentsInside(elementToInstantiate, initParameters_1);\n\t                }\n\t            });\n\t        }\n\t    };\n\t    Initialization.createFunctionThatInitializesComponentOnElements = function (elements, componentClassId, componentClass, initParameters) {\n\t        return function () {\n\t            _.each(elements, function (matchingElement) {\n\t                if (Component_1.Component.get(matchingElement, componentClassId) == null) {\n\t                    // If options were provided, lookup options for this component class and\n\t                    // also for the element id. Merge them and pass those to the factory method.\n\t                    var optionsToUse = undefined;\n\t                    if (Utils_1.Utils.exists(initParameters.options)) {\n\t                        var optionsForComponentClass = initParameters.options[componentClassId];\n\t                        var optionsForElementId = initParameters.options[matchingElement.id];\n\t                        var initOptions = initParameters.options['initOptions'] ? initParameters.options['initOptions'][componentClassId] : {};\n\t                        optionsToUse = Utils_1.Utils.extendDeep(optionsForElementId, initOptions);\n\t                        optionsToUse = Utils_1.Utils.extendDeep(optionsForComponentClass, optionsToUse);\n\t                    }\n\t                    var initParamToUse = _.extend({}, initParameters, { options: optionsToUse });\n\t                    Initialization.createComponentOfThisClassOnElement(componentClass['ID'], matchingElement, initParamToUse);\n\t                }\n\t            });\n\t        };\n\t    };\n\t    Initialization.logger = new Logger_1.Logger('Initialization');\n\t    Initialization.autoCreateComponents = {};\n\t    Initialization.namedMethods = {};\n\t    return Initialization;\n\t}());\n\texports.Initialization = Initialization;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 95 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar JQueryutils_1 = __webpack_require__(57);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar ComponentStateModel_1 = __webpack_require__(91);\n\tvar ComponentOptionsModel_1 = __webpack_require__(90);\n\tvar QueryController_1 = __webpack_require__(73);\n\tvar SearchInterface_1 = __webpack_require__(96);\n\tvar NoopAnalyticsClient_1 = __webpack_require__(104);\n\tvar BaseComponent_1 = __webpack_require__(75);\n\t/**\n\t * The base class for every component in the framework.\n\t */\n\tvar Component = (function (_super) {\n\t    __extends(Component, _super);\n\t    /**\n\t     * Create a new Component. Resolve all {@link IComponentBindings} if not provided.<br/>\n\t     * Create a new Logger for this component.\n\t     * Attach the component to the {@link SearchInterface}.<br/>\n\t     * @param element The HTMLElement on which to create the component. Used to bind data on the element.\n\t     * @param type The unique identifier for this component. See : {@link IComponentDefinition.ID}. Used to generate the unique Coveo CSS class associated with every component.\n\t     * @param bindings The environment for every component. Optional, but omitting to provide one will impact performance.\n\t     */\n\t    function Component(element, type, bindings) {\n\t        var _this = this;\n\t        if (bindings === void 0) { bindings = {}; }\n\t        _super.call(this, element, type);\n\t        this.element = element;\n\t        this.type = type;\n\t        /**\n\t         * Allows the component to bind events and execute them only when it is enabled.\n\t         * @type {Coveo.ComponentEvents}\n\t         */\n\t        this.bind = new ComponentEvents(this);\n\t        this.root = bindings.root || this.resolveRoot();\n\t        this.queryStateModel = bindings.queryStateModel || this.resolveQueryStateModel();\n\t        this.componentStateModel = bindings.componentStateModel || this.resolveComponentStateModel();\n\t        this.queryController = bindings.queryController || this.resolveQueryController();\n\t        this.searchInterface = bindings.searchInterface || this.resolveSearchInterface();\n\t        this.usageAnalytics = bindings.usageAnalytics || this.resolveUA();\n\t        this.componentOptionsModel = bindings.componentOptionsModel || this.resolveComponentOptionsModel();\n\t        this.ensureDom = _.once(function () { return _this.createDom(); });\n\t        if (this.searchInterface != null) {\n\t            this.searchInterface.attachComponent(type, this);\n\t        }\n\t    }\n\t    /**\n\t     * Return the bindings, or environment, for the current component.\n\t     * @returns {IComponentBindings}\n\t     */\n\t    Component.prototype.getBindings = function () {\n\t        return {\n\t            root: this.root,\n\t            queryStateModel: this.queryStateModel,\n\t            queryController: this.queryController,\n\t            searchInterface: this.searchInterface,\n\t            componentStateModel: this.componentStateModel,\n\t            componentOptionsModel: this.componentOptionsModel,\n\t            usageAnalytics: this.usageAnalytics\n\t        };\n\t    };\n\t    Component.prototype.createDom = function () {\n\t        // By default we do nothing\n\t    };\n\t    Component.prototype.resolveSearchInterface = function () {\n\t        return Component.resolveBinding(this.element, SearchInterface_1.SearchInterface);\n\t    };\n\t    Component.prototype.resolveRoot = function () {\n\t        var resolvedSearchInterface = Component.resolveBinding(this.element, SearchInterface_1.SearchInterface);\n\t        return resolvedSearchInterface ? resolvedSearchInterface.element : undefined;\n\t    };\n\t    Component.prototype.resolveQueryController = function () {\n\t        return Component.resolveBinding(this.element, QueryController_1.QueryController);\n\t    };\n\t    Component.prototype.resolveComponentStateModel = function () {\n\t        return Component.resolveBinding(this.element, ComponentStateModel_1.ComponentStateModel);\n\t    };\n\t    Component.prototype.resolveQueryStateModel = function () {\n\t        return Component.resolveBinding(this.element, QueryStateModel_1.QueryStateModel);\n\t    };\n\t    Component.prototype.resolveComponentOptionsModel = function () {\n\t        return Component.resolveBinding(this.element, ComponentOptionsModel_1.ComponentOptionsModel);\n\t    };\n\t    Component.prototype.resolveUA = function () {\n\t        var searchInterface = this.resolveSearchInterface();\n\t        return (searchInterface && searchInterface.usageAnalytics) ? searchInterface.usageAnalytics : new NoopAnalyticsClient_1.NoopAnalyticsClient();\n\t    };\n\t    Component.prototype.resolveResult = function () {\n\t        return Component.getResult(this.element);\n\t    };\n\t    /**\n\t     * Get the bound component to the given HTMLElement. Throws an assert if the HTMLElement has no component bound, unless using the noThrow argument.<br/>\n\t     * If there is multiple component bound to the current HTMLElement, you must specify the component class.\n\t     * @param element HTMLElement for which to get the bound component.\n\t     * @param componentClass Optional component class. If the HTMLElement has multiple components bound, you must specify which one you are targeting.\n\t     * @param noThrow Boolean option to tell the method to not throw on error.\n\t     * @returns {Component}\n\t     */\n\t    Component.get = function (element, componentClass, noThrow) {\n\t        Assert_1.Assert.exists(element);\n\t        if (_.isString(componentClass)) {\n\t            return element[Component.computeCssClassNameForType(componentClass)];\n\t        }\n\t        else if (Utils_1.Utils.exists(componentClass)) {\n\t            Assert_1.Assert.exists(componentClass.ID);\n\t            return element[Component.computeCssClassNameForType(componentClass.ID)];\n\t        }\n\t        else {\n\t            // No class specified, but we support returning the bound component\n\t            // if there is exactly one.\n\t            var boundComponents = BaseComponent_1.BaseComponent.getBoundComponentsForElement(element);\n\t            if (!noThrow) {\n\t                Assert_1.Assert.check(boundComponents.length <= 1, 'More than one component is bound to this element. You need to specify the component type.');\n\t            }\n\t            return boundComponents[0];\n\t        }\n\t    };\n\t    Component.getResult = function (element, noThrow) {\n\t        if (noThrow === void 0) { noThrow = false; }\n\t        var resultElement = Dom_1.$$(element).closest('.CoveoResult');\n\t        Assert_1.Assert.check(noThrow || resultElement != undefined);\n\t        return resultElement['CoveoResult'];\n\t    };\n\t    Component.bindResultToElement = function (element, result) {\n\t        Assert_1.Assert.exists(element);\n\t        Assert_1.Assert.exists(result);\n\t        Dom_1.$$(element).addClass('CoveoResult');\n\t        element['CoveoResult'] = result;\n\t    };\n\t    Component.resolveBinding = function (element, componentClass) {\n\t        Assert_1.Assert.exists(element);\n\t        Assert_1.Assert.exists(componentClass);\n\t        Assert_1.Assert.exists(componentClass.ID);\n\t        // first, look down\n\t        var found;\n\t        if (Dom_1.$$(element).is('.' + Component.computeCssClassNameForType(componentClass.ID))) {\n\t            found = element;\n\t        }\n\t        else {\n\t            var findDown = Dom_1.$$(element).findClass(Component.computeCssClassNameForType(componentClass.ID));\n\t            if (!findDown || findDown.length == 0) {\n\t                var findUp = Dom_1.$$(element).closest(Component.computeCssClassNameForType(componentClass.ID));\n\t                if (findUp) {\n\t                    found = findUp;\n\t                }\n\t            }\n\t            else {\n\t                found = findDown;\n\t            }\n\t        }\n\t        if (found) {\n\t            return found[Component.computeCssClassNameForType(componentClass.ID)];\n\t        }\n\t        else {\n\t            return undefined;\n\t        }\n\t    };\n\t    Component.pointElementsToDummyForm = function (element) {\n\t        var inputs = Dom_1.$$(element).is('input') ? [element] : [];\n\t        inputs = inputs.concat(Dom_1.$$(element).findAll('input'));\n\t        _.each(_.compact(inputs), function (input) {\n\t            input.setAttribute('form', 'coveo-dummy-form');\n\t        });\n\t    };\n\t    return Component;\n\t}(BaseComponent_1.BaseComponent));\n\texports.Component = Component;\n\t/**\n\t * Used by the various Coveo Component to trigger and bind event.<br/>\n\t * It adds a small logic to execute handler or triggers only when the component is \"enabled\".<br/>\n\t * A component is disabled by calling {Component.disable}<br/>\n\t * Typically, a component is disabled when it is not active in the current {Tab}.<br/>\n\t * It can also be disabled by external code.<br/>\n\t * The class serves as a way to not execute handler on component that are invisible and inactive in the query.\n\t */\n\tvar ComponentEvents = (function () {\n\t    /**\n\t     * Create a new `ComponentEvents` for the given {@link Component}.\n\t     * @param owner The {@link Component} which owns those events handler and trigger.\n\t     */\n\t    function ComponentEvents(owner) {\n\t        this.owner = owner;\n\t        Assert_1.Assert.exists(owner);\n\t    }\n\t    ComponentEvents.prototype.on = function (arg, event, handler) {\n\t        if (!JQueryutils_1.JQueryUtils.getJQuery() || !JQueryutils_1.JQueryUtils.isInstanceOfJQuery(arg)) {\n\t            var htmlEl = arg;\n\t            Dom_1.$$(htmlEl).on(event, this.wrapToCallIfEnabled(handler));\n\t        }\n\t        else {\n\t            var jq = arg;\n\t            jq.on(event, this.wrapToCallIfEnabled(handler));\n\t        }\n\t    };\n\t    ComponentEvents.prototype.one = function (arg, event, handler) {\n\t        if (arg instanceof HTMLElement) {\n\t            var htmlEl = arg;\n\t            Dom_1.$$(htmlEl).one(event, this.wrapToCallIfEnabled(handler));\n\t        }\n\t        else {\n\t            var jq = arg;\n\t            jq.one(event, this.wrapToCallIfEnabled(handler));\n\t        }\n\t    };\n\t    /**\n\t     * Bind on the \"root\" of the Component. The root is typically the {@link SearchInterface}.<br/>\n\t     * Bind an event using native javascript code.\n\t     * @param event The event for which to register an handler.\n\t     * @param handler The function to execute when the event is triggered.\n\t     */\n\t    ComponentEvents.prototype.onRootElement = function (event, handler) {\n\t        this.on(this.owner.root, event, handler);\n\t    };\n\t    /**\n\t     * Bind on the \"root\" of the Component. The root is typically the {@link SearchInterface}.<br/>\n\t     * Bind an event using native javascript code.\n\t     * The handler will execute only ONE time.\n\t     * @param event The event for which to register an handler.\n\t     * @param handler The function to execute when the event is triggered.\n\t     */\n\t    ComponentEvents.prototype.oneRootElement = function (event, handler) {\n\t        this.one(this.owner.root, event, handler);\n\t    };\n\t    /**\n\t     * Bind an event related specially to the query state model.<br/>\n\t     * This will build the correct string event and execute the handler only if the component is activated.\n\t     * @param eventType The event type for which to register an event.\n\t     * @param attribute The attribute for which to register an event.\n\t     * @param handler The handler to execute when the query state event is triggered.\n\t     */\n\t    ComponentEvents.prototype.onQueryState = function (eventType, attribute, handler) {\n\t        this.onRootElement(this.getQueryStateEventName(eventType, attribute), handler);\n\t    };\n\t    /**\n\t     * Bind an event related specially to the query state model.<br/>\n\t     * This will build the correct string event and execute the handler only if the component is activated.<br/>\n\t     * Will execute only once.\n\t     * @param eventType The event type for which to register an event.\n\t     * @param attribute The attribute for which to register an event.\n\t     * @param handler The handler to execute when the query state event is triggered.\n\t     */\n\t    ComponentEvents.prototype.oneQueryState = function (eventType, attribute, handler) {\n\t        this.oneRootElement(this.getQueryStateEventName(eventType, attribute), handler);\n\t    };\n\t    ComponentEvents.prototype.trigger = function (arg, event, args) {\n\t        this.wrapToCallIfEnabled(function () {\n\t            if (arg instanceof HTMLElement) {\n\t                var htmlEl = arg;\n\t                Dom_1.$$(htmlEl).trigger(event, args);\n\t            }\n\t            else {\n\t                var jq = arg;\n\t                jq.trigger(event, args);\n\t            }\n\t        })(args);\n\t    };\n\t    /**\n\t     * Execute the function only if the component is enabled.\n\t     * @param func The function to execute if the component is enabled.\n\t     * @returns {function(...[any]): *}\n\t     */\n\t    ComponentEvents.prototype.wrapToCallIfEnabled = function (func) {\n\t        var _this = this;\n\t        return function () {\n\t            var args = [];\n\t            for (var _i = 0; _i < arguments.length; _i++) {\n\t                args[_i - 0] = arguments[_i];\n\t            }\n\t            if (!_this.owner.disabled) {\n\t                if (args && args[0] instanceof CustomEvent) {\n\t                    if (args[0].detail) {\n\t                        args = [args[0].detail];\n\t                    }\n\t                }\n\t                else if (args && JQueryutils_1.JQueryUtils.isInstanceOfJqueryEvent(args[0])) {\n\t                    if (args[1] != undefined) {\n\t                        args = [args[1]];\n\t                    }\n\t                    else {\n\t                        args = [];\n\t                    }\n\t                }\n\t                return func.apply(_this.owner, args);\n\t            }\n\t        };\n\t    };\n\t    ComponentEvents.prototype.getQueryStateEventName = function (eventType, attribute) {\n\t        var evtName;\n\t        if (eventType && attribute) {\n\t            evtName = this.owner.queryStateModel.getEventName(eventType + attribute);\n\t        }\n\t        else {\n\t            evtName = this.owner.queryStateModel.getEventName(eventType);\n\t        }\n\t        return evtName;\n\t    };\n\t    return ComponentEvents;\n\t}());\n\texports.ComponentEvents = ComponentEvents;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 96 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar SearchEndpoint_1 = __webpack_require__(11);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar DeviceUtils_1 = __webpack_require__(19);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar DomUtils_1 = __webpack_require__(58);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar ComponentStateModel_1 = __webpack_require__(91);\n\tvar ComponentOptionsModel_1 = __webpack_require__(90);\n\tvar QueryController_1 = __webpack_require__(73);\n\tvar Model_1 = __webpack_require__(86);\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar StandaloneSearchInterfaceEvents_1 = __webpack_require__(51);\n\tvar HistoryController_1 = __webpack_require__(85);\n\tvar LocalStorageHistoryController_1 = __webpack_require__(87);\n\tvar InitializationEvents_1 = __webpack_require__(43);\n\tvar NoopAnalyticsClient_1 = __webpack_require__(104);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar RootComponent_1 = __webpack_require__(74);\n\tvar BaseComponent_1 = __webpack_require__(75);\n\tvar Debug_1 = __webpack_require__(105);\n\tvar HashUtils_1 = __webpack_require__(64);\n\tvar FastClick = __webpack_require__(106);\n\tvar timezone = __webpack_require__(107);\n\tvar SentryLogger_1 = __webpack_require__(108);\n\t/**\n\t * This component is the root and main component of your search interface.<br/>\n\t * You should place every other component inside this component.<br/>\n\t * It is also on this component that you call the initialization function.<br/>\n\t * Since this component is the root of your Search UI, it is recommended that you give it a unique HTML id attribute in order to reference it easily.\n\t */\n\tvar SearchInterface = (function (_super) {\n\t    __extends(SearchInterface, _super);\n\t    /**\n\t     * Create a new search interface. Initialize letious singleton for the interface (eg : Usage analytic, query controller, state model, etc.)<br/>\n\t     * Bind event related to the query.<br/>\n\t     * Will hide and show the loading animation, if activated.<br/>\n\t     * @param element The `HTMLElement` on which the element will be instantiated. This cannot be an `HTMLInputElement` for technical reasons.\n\t     * @param options The options for the querybox.\n\t     * @param analyticsOptions The options for the analytics component. Since the analytics component is normally global, it needs to be passed at initialization of the whole interface.\n\t     * @param _window The window object for the search interface. Used for unit tests, which can pass a mock. Default is the global window object.\n\t     */\n\t    function SearchInterface(element, options, analyticsOptions, _window) {\n\t        var _this = this;\n\t        if (_window === void 0) { _window = window; }\n\t        _super.call(this, element, SearchInterface.ID);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.analyticsOptions = analyticsOptions;\n\t        this.isNewDesignAttribute = false;\n\t        if (DeviceUtils_1.DeviceUtils.isMobileDevice()) {\n\t            Dom_1.$$(document.body).addClass('coveo-mobile-device');\n\t        }\n\t        FastClick.attach(element);\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, SearchInterface, options);\n\t        Assert_1.Assert.exists(element);\n\t        Assert_1.Assert.exists(this.options);\n\t        if (this.options.hideUntilFirstQuery) {\n\t            this.showAndHideFirstQueryAnimation();\n\t        }\n\t        this.root = element;\n\t        this.queryStateModel = new QueryStateModel_1.QueryStateModel(element);\n\t        this.componentStateModel = new ComponentStateModel_1.ComponentStateModel(element);\n\t        this.componentOptionsModel = new ComponentOptionsModel_1.ComponentOptionsModel(element);\n\t        this.usageAnalytics = this.initializeAnalytics();\n\t        this.queryController = new QueryController_1.QueryController(element, this.options, this.usageAnalytics, this);\n\t        new SentryLogger_1.SentryLogger(this.queryController);\n\t        var eventName = this.queryStateModel.getEventName(Model_1.Model.eventTypes.preprocess);\n\t        Dom_1.$$(this.element).on(eventName, function (e, args) { return _this.handlePreprocessQueryStateModel(args); });\n\t        Dom_1.$$(this.element).on(QueryEvents_1.QueryEvents.buildingQuery, function (e, args) { return _this.handleBuildingQuery(args); });\n\t        Dom_1.$$(this.element).on(QueryEvents_1.QueryEvents.querySuccess, function (e, args) { return _this.handleQuerySuccess(args); });\n\t        Dom_1.$$(this.element).on(QueryEvents_1.QueryEvents.queryError, function (e, args) { return _this.handleQueryError(args); });\n\t        if (this.options.enableHistory) {\n\t            if (!this.options.useLocalStorageForHistory) {\n\t                new HistoryController_1.HistoryController(element, _window, this.queryStateModel, this.queryController);\n\t            }\n\t            else {\n\t                new LocalStorageHistoryController_1.LocalStorageHistoryController(element, _window, this.queryStateModel, this.queryController);\n\t            }\n\t        }\n\t        else {\n\t            Dom_1.$$(this.element).on(InitializationEvents_1.InitializationEvents.restoreHistoryState, function () { return _this.queryStateModel.setMultiple(_this.queryStateModel.defaultAttributes); });\n\t        }\n\t        var eventNameQuickview = this.queryStateModel.getEventName(Model_1.Model.eventTypes.changeOne + QueryStateModel_1.QueryStateModel.attributesEnum.quickview);\n\t        Dom_1.$$(this.element).on(eventNameQuickview, function (e, args) { return _this.handleQuickviewChanged(args); });\n\t        // shows the UI, since it's been hidden while loading\n\t        this.element.style.display = element.style.display || 'block';\n\t        this.setupDebugInfo();\n\t        this.isNewDesignAttribute = this.root.getAttribute('data-design') == 'new';\n\t    }\n\t    /**\n\t     * Display the first query animation.<br/>\n\t     * This is normally the Coveo logo with a CSS animation (which can be customized with options or CSS).\n\t     */\n\t    SearchInterface.prototype.showWaitAnimation = function () {\n\t        Dom_1.$$(this.options.firstLoadingAnimation).detach();\n\t        Dom_1.$$(this.element).addClass('coveo-waiting-for-first-query');\n\t        this.element.appendChild(this.options.firstLoadingAnimation);\n\t    };\n\t    /**\n\t     * Hide the first query animation.<br/>\n\t     * This is normally the Coveo logo with a CSS animation (which can be customized with options or CSS).\n\t     */\n\t    SearchInterface.prototype.hideWaitAnimation = function () {\n\t        Dom_1.$$(this.options.firstLoadingAnimation).detach();\n\t        Dom_1.$$(this.element).removeClass('coveo-waiting-for-first-query');\n\t    };\n\t    /**\n\t     * Attach a component to the interface. This allows the interface to easily list and traverse its component.\n\t     * @param type Normally a unique identifier without the Coveo prefix (e.g.: CoveoFacet -> Facet, CoveoPager -> Pager, CoveoQuerybox -> Querybox, etc.)\n\t     * @param component The component instance to attach.\n\t     */\n\t    SearchInterface.prototype.attachComponent = function (type, component) {\n\t        this.getComponents(type).push(component);\n\t    };\n\t    /**\n\t     * Detach a component from the interface.\n\t     * @param type Normally a unique identifier without the Coveo prefix (e.g.: CoveoFacet -> Facet, CoveoPager -> Pager, CoveoQuerybox -> Querybox, etc.)\n\t     * @param component The component instance to detach.\n\t     */\n\t    SearchInterface.prototype.detachComponent = function (type, component) {\n\t        var components = this.getComponents(type);\n\t        var index = _.indexOf(components, component);\n\t        if (index > -1) {\n\t            components.splice(index, 1);\n\t        }\n\t    };\n\t    /**\n\t     * Return the bindings, or environment, for the current component\n\t     * @returns {IComponentBindings}\n\t     */\n\t    SearchInterface.prototype.getBindings = function () {\n\t        return {\n\t            root: this.root,\n\t            queryStateModel: this.queryStateModel,\n\t            queryController: this.queryController,\n\t            searchInterface: this,\n\t            componentStateModel: this.componentStateModel,\n\t            componentOptionsModel: this.componentOptionsModel,\n\t            usageAnalytics: this.usageAnalytics\n\t        };\n\t    };\n\t    /**\n\t     * Get all the components for a given type\n\t     * @param type Normally a unique identifier without the Coveo prefix (e.g.: CoveoFacet -> Facet, CoveoPager -> Pager, CoveoQuerybox -> Querybox, etc.)\n\t     */\n\t    SearchInterface.prototype.getComponents = function (type) {\n\t        if (this.attachedComponents == null) {\n\t            this.attachedComponents = {};\n\t        }\n\t        if (!(type in this.attachedComponents)) {\n\t            this.attachedComponents[type] = [];\n\t        }\n\t        return this.attachedComponents[type];\n\t    };\n\t    /**\n\t     * Determines whether the interface is using the new design.<br/>\n\t     * This changes the rendering of multiple components.\n\t     */\n\t    SearchInterface.prototype.isNewDesign = function () {\n\t        return this.isNewDesignAttribute;\n\t    };\n\t    SearchInterface.prototype.initializeAnalytics = function () {\n\t        var analyticsRef = BaseComponent_1.BaseComponent.getComponentRef('Analytics');\n\t        if (analyticsRef) {\n\t            return analyticsRef.create(this.element, this.analyticsOptions);\n\t        }\n\t        return new NoopAnalyticsClient_1.NoopAnalyticsClient();\n\t    };\n\t    SearchInterface.prototype.setupDebugInfo = function () {\n\t        var _this = this;\n\t        if (this.options.enableDebugInfo) {\n\t            setTimeout(function () { return new Debug_1.Debug(_this.element, _this.queryController); });\n\t        }\n\t    };\n\t    SearchInterface.prototype.showAndHideFirstQueryAnimation = function () {\n\t        var _this = this;\n\t        this.showWaitAnimation();\n\t        // On first query success or error, wait for call stack to finish, then remove the animation\n\t        Dom_1.$$(this.element).one(QueryEvents_1.QueryEvents.querySuccess, function () {\n\t            _.defer(function () { return _this.hideWaitAnimation(); });\n\t        });\n\t        Dom_1.$$(this.element).one(QueryEvents_1.QueryEvents.queryError, function () {\n\t            _.defer(function () { return _this.hideWaitAnimation(); });\n\t        });\n\t    };\n\t    SearchInterface.prototype.handlePreprocessQueryStateModel = function (args) {\n\t        var tgFromModel = this.queryStateModel.get(QueryStateModel_1.QueryStateModel.attributesEnum.tg);\n\t        var tFromModel = this.queryStateModel.get(QueryStateModel_1.QueryStateModel.attributesEnum.t);\n\t        var tg = tgFromModel;\n\t        var t = tFromModel;\n\t        // if you want to set the tab group\n\t        if (args.tg !== undefined) {\n\t            args.tg = this.getTabGroupId(args.tg);\n\t            if (tg != args.tg) {\n\t                args.t = args.t || QueryStateModel_1.QueryStateModel.defaultAttributes.t;\n\t                args.sort = args.sort || QueryStateModel_1.QueryStateModel.defaultAttributes.sort;\n\t                tg = args.tg;\n\t            }\n\t        }\n\t        if (args.t !== undefined) {\n\t            args.t = this.getTabId(tg, args.t);\n\t            if (t != args.t) {\n\t                args.sort = args.sort || QueryStateModel_1.QueryStateModel.defaultAttributes.sort;\n\t                t = args.t;\n\t            }\n\t        }\n\t        if (args.sort !== undefined) {\n\t            args.sort = this.getSort(t, args.sort);\n\t        }\n\t        if (args.quickview !== undefined) {\n\t            args.quickview = this.getQuickview(args.quickview);\n\t        }\n\t    };\n\t    SearchInterface.prototype.getTabGroupId = function (tabGroupId) {\n\t        var tabGroupRef = BaseComponent_1.BaseComponent.getComponentRef('TabGroup');\n\t        if (tabGroupRef) {\n\t            var tabGroups = this.getComponents(tabGroupRef.ID);\n\t            // check if the tabgroup is correct\n\t            if (tabGroupId != QueryStateModel_1.QueryStateModel.defaultAttributes.tg && _.any(tabGroups, function (tabGroup) { return !tabGroup.disabled && tabGroupId == tabGroup.options.id; })) {\n\t                return tabGroupId;\n\t            }\n\t            // select the first tabGroup\n\t            if (tabGroups.length > 0) {\n\t                return tabGroups[0].options.id;\n\t            }\n\t        }\n\t        return QueryStateModel_1.QueryStateModel.defaultAttributes.tg;\n\t    };\n\t    SearchInterface.prototype.getTabId = function (tabGroupId, tabId) {\n\t        var tabRef = BaseComponent_1.BaseComponent.getComponentRef('Tab');\n\t        var tabGroupRef = BaseComponent_1.BaseComponent.getComponentRef('TabGroup');\n\t        if (tabRef) {\n\t            var tabs = this.getComponents(tabRef.ID);\n\t            if (tabGroupRef) {\n\t                // if has a tabGroup\n\t                if (tabGroupId != QueryStateModel_1.QueryStateModel.defaultAttributes.tg) {\n\t                    var tabGroups = this.getComponents(tabGroupRef.ID);\n\t                    var tabGroup_1 = _.find(tabGroups, function (tabGroup) { return tabGroupId == tabGroup.options.id; });\n\t                    // check if the tabgroup contain this tab\n\t                    if (tabId != QueryStateModel_1.QueryStateModel.defaultAttributes.t && _.any(tabs, function (tab) { return tabId == tab.options.id && tabGroup_1.isElementIncludedInTabGroup(tab.element); })) {\n\t                        return tabId;\n\t                    }\n\t                    // select the first tab in the tabGroup\n\t                    var tab = _.find(tabs, function (tab) { return tabGroup_1.isElementIncludedInTabGroup(tab.element); });\n\t                    if (tab != null) {\n\t                        return tab.options.id;\n\t                    }\n\t                    return QueryStateModel_1.QueryStateModel.defaultAttributes.t;\n\t                }\n\t            }\n\t            // check if the tab is correct\n\t            if (tabId != QueryStateModel_1.QueryStateModel.defaultAttributes.t && _.any(tabs, function (tab) { return tabId == tab.options.id; })) {\n\t                return tabId;\n\t            }\n\t            // select the first tab\n\t            if (tabs.length > 0) {\n\t                return tabs[0].options.id;\n\t            }\n\t        }\n\t        return QueryStateModel_1.QueryStateModel.defaultAttributes.t;\n\t    };\n\t    SearchInterface.prototype.getSort = function (tabId, sortId) {\n\t        var sortRef = BaseComponent_1.BaseComponent.getComponentRef('Sort');\n\t        if (sortRef) {\n\t            var sorts = this.getComponents(sortRef.ID);\n\t            // if has a selected tab\n\t            var tabRef = BaseComponent_1.BaseComponent.getComponentRef('Tab');\n\t            if (tabRef) {\n\t                if (tabId != QueryStateModel_1.QueryStateModel.defaultAttributes.t) {\n\t                    var tabs = this.getComponents(tabRef.ID);\n\t                    var tab_1 = _.find(tabs, function (tab) { return tabId == tab.options.id; });\n\t                    var sortCriteria = tab_1.options.sort;\n\t                    // check if the tab contain this sort\n\t                    if (sortId != QueryStateModel_1.QueryStateModel.defaultAttributes.sort && _.any(sorts, function (sort) { return tab_1.isElementIncludedInTab(sort.element) && sort.match(sortId); })) {\n\t                        return sortId;\n\t                    }\n\t                    else if (sortCriteria != null) {\n\t                        // if not and tab.options.sort is set apply it\n\t                        return sortCriteria.toString();\n\t                    }\n\t                    // select the first sort in the tab\n\t                    var sort = _.find(sorts, function (sort) { return tab_1.isElementIncludedInTab(sort.element); });\n\t                    if (sort != null) {\n\t                        return sort.options.sortCriteria[0].toString();\n\t                    }\n\t                    return QueryStateModel_1.QueryStateModel.defaultAttributes.sort;\n\t                }\n\t            }\n\t            // check if the sort is correct\n\t            if (sortId != QueryStateModel_1.QueryStateModel.defaultAttributes.sort && _.any(sorts, function (sort) { return sort.match(sortId); })) {\n\t                return sortId;\n\t            }\n\t            // select the first sort\n\t            if (sorts.length > 0) {\n\t                return sorts[0].options.sortCriteria[0].toString();\n\t            }\n\t        }\n\t        return QueryStateModel_1.QueryStateModel.defaultAttributes.sort;\n\t    };\n\t    SearchInterface.prototype.getQuickview = function (quickviewId) {\n\t        var quickviewRef = BaseComponent_1.BaseComponent.getComponentRef('Quickview');\n\t        if (quickviewRef) {\n\t            var quickviews = this.getComponents(quickviewRef.ID);\n\t            if (_.any(quickviews, function (quickview) { return quickview.getHashId() == quickviewId; })) {\n\t                return quickviewId;\n\t            }\n\t        }\n\t        return QueryStateModel_1.QueryStateModel.defaultAttributes.quickview;\n\t    };\n\t    SearchInterface.prototype.handleQuickviewChanged = function (args) {\n\t        var quickviewRef = BaseComponent_1.BaseComponent.getComponentRef('Quickview');\n\t        if (quickviewRef) {\n\t            var quickviews = this.getComponents(quickviewRef.ID);\n\t            if (args.value != '') {\n\t                var quickviewsPartition = _.partition(quickviews, function (quickview) { return quickview.getHashId() == args.value; });\n\t                if (quickviewsPartition[0].length != 0) {\n\t                    _.first(quickviewsPartition[0]).open();\n\t                    _.forEach(_.tail(quickviewsPartition[0]), function (quickview) { return quickview.close(); });\n\t                }\n\t                _.forEach(quickviewsPartition[1], function (quickview) { return quickview.close(); });\n\t            }\n\t            else {\n\t                _.forEach(quickviews, function (quickview) {\n\t                    quickview.close();\n\t                });\n\t            }\n\t        }\n\t    };\n\t    SearchInterface.prototype.handleBuildingQuery = function (data) {\n\t        if (this.options.enableDuplicateFiltering) {\n\t            data.queryBuilder.enableDuplicateFiltering = true;\n\t        }\n\t        if (!Utils_1.Utils.isNullOrUndefined(this.options.pipeline)) {\n\t            data.queryBuilder.pipeline = this.options.pipeline;\n\t        }\n\t        if (!Utils_1.Utils.isNullOrUndefined(this.options.maximumAge)) {\n\t            data.queryBuilder.maximumAge = this.options.maximumAge;\n\t        }\n\t        if (!Utils_1.Utils.isNullOrUndefined(this.options.resultsPerPage)) {\n\t            data.queryBuilder.numberOfResults = this.options.resultsPerPage;\n\t        }\n\t        if (!Utils_1.Utils.isNullOrUndefined(this.options.excerptLength)) {\n\t            data.queryBuilder.excerptLength = this.options.excerptLength;\n\t        }\n\t        if (Utils_1.Utils.isNonEmptyString(this.options.expression)) {\n\t            data.queryBuilder.advancedExpression.add(this.options.expression);\n\t        }\n\t        if (Utils_1.Utils.isNonEmptyString(this.options.filterField)) {\n\t            data.queryBuilder.filterField = this.options.filterField;\n\t        }\n\t        if (Utils_1.Utils.isNonEmptyString(this.options.timezone)) {\n\t            data.queryBuilder.timezone = this.options.timezone;\n\t        }\n\t        data.queryBuilder.enableCollaborativeRating = this.options.enableCollaborativeRating;\n\t        data.queryBuilder.enableDuplicateFiltering = this.options.enableDuplicateFiltering;\n\t    };\n\t    SearchInterface.prototype.handleQuerySuccess = function (data) {\n\t        var noResults = data.results.results.length == 0;\n\t        this.toggleSectionState('coveo-no-results', noResults);\n\t        var resultsHeader = Dom_1.$$(this.element).find('.coveo-results-header');\n\t        if (resultsHeader) {\n\t            Dom_1.$$(resultsHeader).removeClass('coveo-query-error');\n\t        }\n\t    };\n\t    SearchInterface.prototype.handleQueryError = function (data) {\n\t        this.toggleSectionState('coveo-no-results');\n\t        var resultsHeader = Dom_1.$$(this.element).find('.coveo-results-header');\n\t        if (resultsHeader) {\n\t            Dom_1.$$(resultsHeader).addClass('coveo-query-error');\n\t        }\n\t    };\n\t    SearchInterface.prototype.toggleSectionState = function (cssClass, toggle) {\n\t        var _this = this;\n\t        if (toggle === void 0) { toggle = true; }\n\t        var facetSection = Dom_1.$$(this.element).find('.coveo-facet-column');\n\t        var resultsSection = Dom_1.$$(this.element).find('.coveo-results-column');\n\t        var resultsHeader = Dom_1.$$(this.element).find('.coveo-results-header');\n\t        var facetSearchs = Dom_1.$$(this.element).findAll('.coveo-facet-search-results');\n\t        if (facetSection) {\n\t            Dom_1.$$(facetSection).toggleClass(cssClass, toggle && !this.queryStateModel.atLeastOneFacetIsActive());\n\t        }\n\t        if (resultsSection) {\n\t            Dom_1.$$(resultsSection).toggleClass(cssClass, toggle && !this.queryStateModel.atLeastOneFacetIsActive());\n\t        }\n\t        if (resultsHeader) {\n\t            Dom_1.$$(resultsHeader).toggleClass(cssClass, toggle && !this.queryStateModel.atLeastOneFacetIsActive());\n\t        }\n\t        if (facetSearchs && facetSearchs.length > 0) {\n\t            _.each(facetSearchs, function (facetSearch) {\n\t                Dom_1.$$(facetSearch).toggleClass(cssClass, toggle && !_this.queryStateModel.atLeastOneFacetIsActive());\n\t            });\n\t        }\n\t    };\n\t    SearchInterface.ID = 'SearchInterface';\n\t    /**\n\t     * The options for the search interface\n\t     * @componentOptions\n\t     */\n\t    SearchInterface.options = {\n\t        /**\n\t         * Specifies whether your search interface allows users to navigate in the search history using the browser back/forward buttons.<br/>\n\t         * When enabled, the search interface saves the state of the current query in the hash portion of the URL.<br/>\n\t         * For example #q=foobar.<br/>\n\t         * The default value is `false`.\n\t         */\n\t        enableHistory: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * Specifies whether the UI should use an automatic responsive mode (eg : The tab(s) and facet(s) being placed automatically under the search box)<br/>\n\t         * This can be disabled for design reasons, if it does not fit with the implementation needs.<br/>\n\t         * The default value is `true`\n\t         */\n\t        enableAutomaticResponsiveMode: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        /**\n\t         * Specifies that you wish to use the local storage of the browser to store the state of the interface.<br/>\n\t         * This can be used for very specific purpose, and only if you know what you are doing.<br/>\n\t         * Default value is `false`.\n\t         */\n\t        useLocalStorageForHistory: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * Specifies the number of results that each page displays.<br/>\n\t         * Default is 10.\n\t         */\n\t        resultsPerPage: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 10, min: 0 }),\n\t        /**\n\t         * Specifies the number of characters of the excerpt to get at query time and display for each query result.<br/>\n\t         * This setting is global and can not be modified on a per result basis.<br/>\n\t         * The default value is 200.\n\t         */\n\t        excerptLength: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 200, min: 0 }),\n\t        /**\n\t         * Specifies an expression to add to each query.<br/>\n\t         * This should be use if you wish to add a global filter for your whole search interface that applies for all tabs.<br/>\n\t         * Do not use this for security concern ... (It is JavaScript after all).<br/>\n\t         * By default none is added.\n\t         */\n\t        expression: ComponentOptions_1.ComponentOptions.buildStringOption({ defaultValue: '' }),\n\t        /**\n\t         * Specifies the name of a field to use as a custom filter when executing the query (also referred to as 'folding').<br/>\n\t         * Setting this option causes the index to return only one result having any particular value inside the filter field. Any other matching result is 'folded' inside the childResults member of each JSON query result.<br/>\n\t         * This feature is typically used with threaded conversations to include only one top-level result per conversation. Thus, the field specified in this option typically is a value unique to each thread that is shared by all items (e.g.: posts, emails, etc.) in the thread.<br/>\n\t         * This is obviously an advanced feature. Instead, look into using the {@link Folding} component, which covers a lot of different use cases.<br/>\n\t         * By default none is added\n\t         */\n\t        filterField: ComponentOptions_1.ComponentOptions.buildStringOption({ defaultValue: '' }),\n\t        /**\n\t         * Specifies whether the interface should display a loading animation before the first query has completed successfully.<br/>\n\t         * Note that if you set autoTriggerQuery to false, this means that the loading animation will not go away automatically.<br/>\n\t         * Default is true.\n\t         */\n\t        hideUntilFirstQuery: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        /**\n\t         * Specifies the animation that you wish to use for your interface.<br/>\n\t         * This can be a selector or an element that matches the correct CSS class.<br/>\n\t         * Eg : firstLoadingAnimation : '.CustomFirstLoadingAnimation' / data-first-loading-animation='.CustomFirstLoadingAnimation'.</br>\n\t         * Eg : &lt;element class='CoveoSearchInterface'&gt;&lt;element class='coveo-first-loading-animation'/&gt;&lt;/element&gt;<br/>\n\t         * By default, this will be a Coveo CSS animation (which can also be customized with CSS).\n\t         */\n\t        firstLoadingAnimation: ComponentOptions_1.ComponentOptions.buildChildHtmlElementOption({\n\t            childSelector: '.coveo-first-loading-animation',\n\t            defaultFunction: function () { return DomUtils_1.DomUtils.getBasicLoadingAnimation(); }\n\t        }),\n\t        /**\n\t         * Specifies whether the init function should trigger the first query automatically when the page is loaded.<br/>\n\t         * Note that if you set this to false, then the hideUntilFirstQuery option still applies. This means that the animation will still show until a query is triggered.<br/>\n\t         * Default is `true`.\n\t         */\n\t        autoTriggerQuery: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        endpoint: ComponentOptions_1.ComponentOptions.buildCustomOption(function (endpoint) { return endpoint != null && endpoint in SearchEndpoint_1.SearchEndpoint.endpoints ? SearchEndpoint_1.SearchEndpoint.endpoints[endpoint] : null; }, { defaultFunction: function () { return SearchEndpoint_1.SearchEndpoint.endpoints['default']; } }),\n\t        /**\n\t         * Specifies the timezone in which the search interface is loaded. This allows the index to recognize some special query syntax.<br/>\n\t         * This must be an IANA zone info key (aka the Olson time zone database). For example : 'America/New_York'.<br/>\n\t         * By default, we use a library that tries to detect the timezone automatically.<br/>\n\t         */\n\t        timezone: ComponentOptions_1.ComponentOptions.buildStringOption({ defaultFunction: function () { return timezone.jstz.determine().name(); } }),\n\t        /**\n\t         * Specifies whether to enable the feature that allows users to ALT + double click on any results to get the Debug page with a detailed view of all the properties and fields for a given result.<br/>\n\t         * This has no security concern (as all those informations are visible to users through the browser developer console or by calling the Coveo API directly).<br/>\n\t         * The default value is `true`.\n\t         */\n\t        enableDebugInfo: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        /**\n\t         * Specifies whether to enable the collaborative rating for the index and and include the user rating on each results to the normal index ranking.<br/>\n\t         * If activated, this option can be leveraged with the {@link ResultRating} component.<br/>\n\t         * The default value is `false`.\n\t         */\n\t        enableCollaborativeRating: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * Specifies whether to filter duplicates on the search results.<br/>\n\t         * When true, duplicates do not appear in search results, but they however are included in facet counts, which can be sometimes confusing for the users. This is a limitation of the index.<br/>\n\t         * Example: The user narrows a query to one document that has a duplicate. Only one document appears in search results, but the facet count is 2.<br/>\n\t         * The default value is `false`.\n\t         */\n\t        enableDuplicateFiltering: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * Specifies the name of the query pipeline to use for the queries. If not specified, the default value is default, which means the default query pipeline will be used.<br/>\n\t         * You can use this parameter when your index is in a Coveo Cloud organization where you created pipelines (see https://onlinehelp.coveo.com/en/cloud/creating_and_managing_query_pipelines.htm).<br/>\n\t         * Default value is 'default'.\n\t         */\n\t        pipeline: ComponentOptions_1.ComponentOptions.buildStringOption(),\n\t        /**\n\t         * Specifies the maximum age in milliseconds that cached query results can have in order to be used (instead of performing a new query on the index).<br/>\n\t         * If cached results are available but are older than the specified age, a new query will be performed on the index.<br/>\n\t         * On high-volume public web sites, having a larger maximum age can greatly improve query response time at the cost of result freshness.<br/>\n\t         * By default, the Coveo Search API will determine the cache length. This typically takes 15 minutes.\n\t         */\n\t        maximumAge: ComponentOptions_1.ComponentOptions.buildNumberOption(),\n\t        /**\n\t         * Specifies the search page you wish to navigate to when instantiating a standalone search box interface.<br/>\n\t         * By default this is undefined, meaning the search interface will not redirect.\n\t         */\n\t        searchPageUri: ComponentOptions_1.ComponentOptions.buildStringOption()\n\t    };\n\t    SearchInterface.SMALL_INTERFACE_CLASS_NAME = 'coveo-small-search-interface';\n\t    return SearchInterface;\n\t}(RootComponent_1.RootComponent));\n\texports.SearchInterface = SearchInterface;\n\tvar StandaloneSearchInterface = (function (_super) {\n\t    __extends(StandaloneSearchInterface, _super);\n\t    function StandaloneSearchInterface(element, options, analyticsOptions, _window) {\n\t        var _this = this;\n\t        if (_window === void 0) { _window = window; }\n\t        _super.call(this, element, ComponentOptions_1.ComponentOptions.initComponentOptions(element, StandaloneSearchInterface, options), analyticsOptions, _window);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.analyticsOptions = analyticsOptions;\n\t        Dom_1.$$(this.root).on(QueryEvents_1.QueryEvents.newQuery, function (e, args) { return _this.handleRedirect(e, args); });\n\t    }\n\t    StandaloneSearchInterface.prototype.handleRedirect = function (e, data) {\n\t        var dataToSendOnBeforeRedirect = {\n\t            searchPageUri: this.options.searchPageUri,\n\t            cancel: false\n\t        };\n\t        Dom_1.$$(this.root).trigger(StandaloneSearchInterfaceEvents_1.StandaloneSearchInterfaceEvents.beforeRedirect, dataToSendOnBeforeRedirect);\n\t        if (dataToSendOnBeforeRedirect.cancel) {\n\t            return;\n\t        }\n\t        data.cancel = true;\n\t        if (!this.searchboxIsEmpty() || this.options.redirectIfEmpty) {\n\t            this.redirectToSearchPage(dataToSendOnBeforeRedirect.searchPageUri);\n\t        }\n\t    };\n\t    StandaloneSearchInterface.prototype.redirectToSearchPage = function (searchPage) {\n\t        var stateValues = this.queryStateModel.getAttributes();\n\t        var uaCausedBy = this.usageAnalytics.getCurrentEventCause();\n\t        if (uaCausedBy != null) {\n\t            stateValues['firstQueryCause'] = uaCausedBy;\n\t        }\n\t        var uaMeta = this.usageAnalytics.getCurrentEventMeta();\n\t        if (uaMeta != null) {\n\t            stateValues['firstQueryMeta'] = uaMeta;\n\t        }\n\t        window.location.href = searchPage + '#' + HashUtils_1.HashUtils.encodeValues(stateValues);\n\t    };\n\t    StandaloneSearchInterface.prototype.searchboxIsEmpty = function () {\n\t        return Utils_1.Utils.isEmptyString(this.queryStateModel.get(QueryStateModel_1.QueryStateModel.attributesEnum.q));\n\t    };\n\t    StandaloneSearchInterface.ID = 'StandaloneSearchInterface';\n\t    StandaloneSearchInterface.options = {\n\t        redirectIfEmpty: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true })\n\t    };\n\t    return StandaloneSearchInterface;\n\t}(SearchInterface));\n\texports.StandaloneSearchInterface = StandaloneSearchInterface;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 97 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Logger_1 = __webpack_require__(15);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar TemplateCache_1 = __webpack_require__(98);\n\tvar TemplateList_1 = __webpack_require__(102);\n\tvar UnderscoreTemplate_1 = __webpack_require__(100);\n\tvar HtmlTemplate_1 = __webpack_require__(101);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Strings_1 = __webpack_require__(33);\n\t(function (ComponentOptionsType) {\n\t    ComponentOptionsType[ComponentOptionsType[\"BOOLEAN\"] = 0] = \"BOOLEAN\";\n\t    ComponentOptionsType[ComponentOptionsType[\"NUMBER\"] = 1] = \"NUMBER\";\n\t    ComponentOptionsType[ComponentOptionsType[\"STRING\"] = 2] = \"STRING\";\n\t    ComponentOptionsType[ComponentOptionsType[\"LOCALIZED_STRING\"] = 3] = \"LOCALIZED_STRING\";\n\t    ComponentOptionsType[ComponentOptionsType[\"LIST\"] = 4] = \"LIST\";\n\t    ComponentOptionsType[ComponentOptionsType[\"SELECTOR\"] = 5] = \"SELECTOR\";\n\t    ComponentOptionsType[ComponentOptionsType[\"CHILD_HTML_ELEMENT\"] = 6] = \"CHILD_HTML_ELEMENT\";\n\t    ComponentOptionsType[ComponentOptionsType[\"TEMPLATE\"] = 7] = \"TEMPLATE\";\n\t    ComponentOptionsType[ComponentOptionsType[\"FIELD\"] = 8] = \"FIELD\";\n\t    ComponentOptionsType[ComponentOptionsType[\"FIELDS\"] = 9] = \"FIELDS\";\n\t    ComponentOptionsType[ComponentOptionsType[\"ICON\"] = 10] = \"ICON\";\n\t    ComponentOptionsType[ComponentOptionsType[\"OBJECT\"] = 11] = \"OBJECT\";\n\t    ComponentOptionsType[ComponentOptionsType[\"QUERY\"] = 12] = \"QUERY\";\n\t    ComponentOptionsType[ComponentOptionsType[\"HELPER\"] = 13] = \"HELPER\";\n\t    ComponentOptionsType[ComponentOptionsType[\"LONG_STRING\"] = 14] = \"LONG_STRING\";\n\t    ComponentOptionsType[ComponentOptionsType[\"JSON\"] = 15] = \"JSON\";\n\t    ComponentOptionsType[ComponentOptionsType[\"JAVASCRIPT\"] = 16] = \"JAVASCRIPT\";\n\t    ComponentOptionsType[ComponentOptionsType[\"NONE\"] = 17] = \"NONE\";\n\t})(exports.ComponentOptionsType || (exports.ComponentOptionsType = {}));\n\tvar ComponentOptionsType = exports.ComponentOptionsType;\n\tvar camelCaseToHyphenRegex = /([A-Z])|\\W+(\\w)/g;\n\tvar fieldsSeperator = /\\s*,\\s*/;\n\tvar localizer = /([a-zA-Z\\-]+)\\s*:\\s*(([^,]|,\\s*(?!([a-zA-Z\\-]+)\\s*:))+)/g;\n\tvar ComponentOptions = (function () {\n\t    function ComponentOptions() {\n\t    }\n\t    ComponentOptions.buildBooleanOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.BOOLEAN, ComponentOptions.loadBooleanOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildNumberOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.NUMBER, ComponentOptions.loadNumberOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildStringOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.STRING, ComponentOptions.loadStringOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildIconOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.ICON, ComponentOptions.loadStringOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildHelperOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.HELPER, ComponentOptions.loadStringOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildJsonOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.JSON, ComponentOptions.loadStringOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildLocalizedStringOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.LOCALIZED_STRING, ComponentOptions.loadLocalizedStringOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildFieldOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.FIELD, ComponentOptions.loadFieldOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildFieldsOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.FIELDS, ComponentOptions.loadFieldsOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildListOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.LIST, ComponentOptions.loadListOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildSelectorOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.SELECTOR, ComponentOptions.loadSelectorOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildChildHtmlElementOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.CHILD_HTML_ELEMENT, ComponentOptions.loadChildHtmlElementOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildTemplateOption = function (optionArgs) {\n\t        return ComponentOptions.buildOption(ComponentOptionsType.TEMPLATE, ComponentOptions.loadTemplateOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildCustomOption = function (converter, optionArgs) {\n\t        var loadOption = function (element, name, option) {\n\t            var stringvalue = ComponentOptions.loadStringOption(element, name, option);\n\t            if (!Utils_1.Utils.isNullOrEmptyString(stringvalue)) {\n\t                return converter(stringvalue);\n\t            }\n\t        };\n\t        return ComponentOptions.buildOption(ComponentOptionsType.STRING, loadOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildCustomListOption = function (converter, optionArgs) {\n\t        var loadOption = function (element, name, option) {\n\t            var stringvalue = ComponentOptions.loadListOption(element, name, option);\n\t            return converter(stringvalue);\n\t        };\n\t        return ComponentOptions.buildOption(ComponentOptionsType.LIST, loadOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildObjectOption = function (optionArgs) {\n\t        var loadOption = function (element, name, option) {\n\t            var keys = _.keys(optionArgs.subOptions);\n\t            var scopedOptions = {};\n\t            var scopedValues = {};\n\t            for (var i = 0; i < keys.length; i++) {\n\t                var key = keys[i];\n\t                var scopedkey = ComponentOptions.mergeCamelCase(name, key);\n\t                scopedOptions[scopedkey] = optionArgs.subOptions[key];\n\t            }\n\t            ComponentOptions.initOptions(element, scopedOptions, scopedValues);\n\t            var resultValues = {};\n\t            var resultFound = false;\n\t            for (var i = 0; i < keys.length; i++) {\n\t                var key = keys[i];\n\t                var scopedkey = ComponentOptions.mergeCamelCase(name, key);\n\t                if (scopedValues[scopedkey] != null) {\n\t                    resultValues[key] = scopedValues[scopedkey];\n\t                    resultFound = true;\n\t                }\n\t            }\n\t            return resultFound ? resultValues : null;\n\t        };\n\t        return ComponentOptions.buildOption(ComponentOptionsType.OBJECT, loadOption, optionArgs);\n\t    };\n\t    ComponentOptions.buildOption = function (type, load, optionArg) {\n\t        if (optionArg === void 0) { optionArg = {}; }\n\t        var option = optionArg;\n\t        option.type = type;\n\t        option.load = load;\n\t        return option;\n\t    };\n\t    ComponentOptions.attrNameFromName = function (name, optionArgs) {\n\t        if (optionArgs && optionArgs.attrName) {\n\t            return optionArgs.attrName;\n\t        }\n\t        if (name) {\n\t            return 'data-' + ComponentOptions.camelCaseToHyphen(name);\n\t        }\n\t        return name;\n\t    };\n\t    ComponentOptions.camelCaseToHyphen = function (name) {\n\t        return name.replace(camelCaseToHyphenRegex, '-$1$2').toLowerCase();\n\t    };\n\t    ComponentOptions.mergeCamelCase = function (parent, name) {\n\t        return parent + name.substr(0, 1).toUpperCase() + name.substr(1);\n\t    };\n\t    ComponentOptions.initComponentOptions = function (element, component, values) {\n\t        return ComponentOptions.initOptions(element, component.options, values, component.ID);\n\t    };\n\t    ComponentOptions.initOptions = function (element, options, values, componentID) {\n\t        var logger = new Logger_1.Logger(this);\n\t        if (values == null) {\n\t            values = {};\n\t        }\n\t        var names = _.keys(options);\n\t        for (var i = 0; i < names.length; i++) {\n\t            var name_1 = names[i];\n\t            var optionDefinition = options[name_1];\n\t            var value = void 0;\n\t            var loadFromAttribute = optionDefinition.load;\n\t            if (loadFromAttribute != null) {\n\t                value = loadFromAttribute(element, name_1, optionDefinition);\n\t                if (value && optionDefinition.deprecated) {\n\t                    logger.warn(componentID + '.' + name_1 + ' : ' + optionDefinition.deprecated);\n\t                }\n\t            }\n\t            if (Utils_1.Utils.isNullOrUndefined(value) && values[name_1] != undefined) {\n\t                value = values[name_1];\n\t            }\n\t            if (value == null && values[name_1] == undefined) {\n\t                if (optionDefinition.defaultValue != null) {\n\t                    if (optionDefinition.type == ComponentOptionsType.LIST) {\n\t                        value = _.extend([], optionDefinition.defaultValue);\n\t                    }\n\t                    else if (optionDefinition.type == ComponentOptionsType.OBJECT) {\n\t                        value = _.extend({}, optionDefinition.defaultValue);\n\t                    }\n\t                    else {\n\t                        value = optionDefinition.defaultValue;\n\t                    }\n\t                }\n\t                else if (optionDefinition.defaultFunction != null) {\n\t                    value = optionDefinition.defaultFunction(element);\n\t                }\n\t            }\n\t            if (value != null) {\n\t                if (optionDefinition.validator) {\n\t                    var isValid = optionDefinition.validator(value);\n\t                    if (!isValid) {\n\t                        logger.warn(componentID + \" .\" + name_1 + \" has invalid value :  \" + value);\n\t                        if (optionDefinition.required) {\n\t                            logger.error(componentID + \" .\" + name_1 + \" is required and has an invalid value : \" + value + \". ***THIS COMPONENT WILL NOT WORK***\");\n\t                        }\n\t                        delete values[name_1];\n\t                        continue;\n\t                    }\n\t                }\n\t                if (optionDefinition.type == ComponentOptionsType.OBJECT && values[name_1] != null) {\n\t                    values[name_1] = _.extend(values[name_1], value);\n\t                }\n\t                else if (optionDefinition.type == ComponentOptionsType.LOCALIZED_STRING) {\n\t                    values[name_1] = Strings_1.l(value);\n\t                }\n\t                else {\n\t                    values[name_1] = value;\n\t                }\n\t            }\n\t        }\n\t        for (var i = 0; i < names.length; i++) {\n\t            var name_2 = names[i];\n\t            var optionDefinition = options[name_2];\n\t            if (optionDefinition.postProcessing) {\n\t                values[name_2] = optionDefinition.postProcessing(values[name_2], values);\n\t            }\n\t        }\n\t        return values;\n\t    };\n\t    ComponentOptions.loadStringOption = function (element, name, option) {\n\t        return element.getAttribute(ComponentOptions.attrNameFromName(name, option)) || ComponentOptions.getAttributeFromAlias(element, option);\n\t    };\n\t    ComponentOptions.loadFieldOption = function (element, name, option) {\n\t        var field = ComponentOptions.loadStringOption(element, name, option);\n\t        Assert_1.Assert.check(!Utils_1.Utils.isNonEmptyString(field) || Utils_1.Utils.isCoveoField(field), field + ' is not a valid field');\n\t        return field;\n\t    };\n\t    ComponentOptions.loadFieldsOption = function (element, name, option) {\n\t        var fieldsAttr = ComponentOptions.loadStringOption(element, name, option);\n\t        if (fieldsAttr == null) {\n\t            return null;\n\t        }\n\t        var fields = fieldsAttr.split(fieldsSeperator);\n\t        _.each(fields, function (field) {\n\t            Assert_1.Assert.check(Utils_1.Utils.isCoveoField(field), field + ' is not a valid field');\n\t        });\n\t        return fields;\n\t    };\n\t    ComponentOptions.loadLocalizedStringOption = function (element, name, option) {\n\t        var attributeValue = ComponentOptions.loadStringOption(element, name, option);\n\t        var locale = String['locale'] || String['defaultLocale'];\n\t        if (locale != null && attributeValue != null) {\n\t            var localeParts_1 = locale.toLowerCase().split('-');\n\t            var locales = _.map(localeParts_1, function (part, i) { return localeParts_1.slice(0, i + 1).join('-'); });\n\t            var localizers = attributeValue.match(localizer);\n\t            if (localizers != null) {\n\t                for (var i = 0; i < localizers.length; i++) {\n\t                    var groups = localizer.exec(localizers[i]);\n\t                    if (groups != null) {\n\t                        var lang = groups[1].toLowerCase();\n\t                        if (_.contains(locales, lang)) {\n\t                            return groups[2].replace(/^\\s+|\\s+$/g, '');\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return attributeValue != null ? attributeValue.toLocaleString() : null;\n\t        }\n\t        return attributeValue;\n\t    };\n\t    ComponentOptions.loadNumberOption = function (element, name, option) {\n\t        var attributeValue = ComponentOptions.loadStringOption(element, name, option);\n\t        if (attributeValue == null) {\n\t            return null;\n\t        }\n\t        var numberValue = option.float === true ? Utils_1.Utils.parseFloatIfNotUndefined(attributeValue) : Utils_1.Utils.parseIntIfNotUndefined(attributeValue);\n\t        if (option.min != null && option.min > numberValue) {\n\t            numberValue = option.min;\n\t        }\n\t        if (option.max != null && option.max < numberValue) {\n\t            numberValue = option.max;\n\t        }\n\t        return numberValue;\n\t    };\n\t    ComponentOptions.loadBooleanOption = function (element, name, option) {\n\t        return Utils_1.Utils.parseBooleanIfNotUndefined(ComponentOptions.loadStringOption(element, name, option));\n\t    };\n\t    ComponentOptions.loadListOption = function (element, name, option) {\n\t        var separator = option.separator || /\\s*,\\s*/;\n\t        var attributeValue = ComponentOptions.loadStringOption(element, name, option);\n\t        return Utils_1.Utils.isNonEmptyString(attributeValue) ? attributeValue.split(separator) : null;\n\t    };\n\t    ComponentOptions.loadEnumOption = function (element, name, option, _enum) {\n\t        var enumAsString = ComponentOptions.loadStringOption(element, name, option);\n\t        return enumAsString != null ? _enum[enumAsString] : null;\n\t    };\n\t    ComponentOptions.loadSelectorOption = function (element, name, option, doc) {\n\t        if (doc === void 0) { doc = document; }\n\t        var attributeValue = ComponentOptions.loadStringOption(element, name, option);\n\t        return Utils_1.Utils.isNonEmptyString(attributeValue) ? doc.querySelector(attributeValue) : null;\n\t    };\n\t    ComponentOptions.loadChildHtmlElementOption = function (element, name, option, doc) {\n\t        if (doc === void 0) { doc = document; }\n\t        var htmlElement;\n\t        // Attribute: selector\n\t        var selectorAttr = option.selectorAttr || ComponentOptions.attrNameFromName(name, option) + '-selector';\n\t        var selector = element.getAttribute(selectorAttr) || ComponentOptions.getAttributeFromAlias(element, option);\n\t        if (selector != null) {\n\t            htmlElement = doc.body.querySelector(selector);\n\t        }\n\t        // Child\n\t        if (htmlElement == null) {\n\t            var childSelector = option.childSelector;\n\t            if (childSelector == null) {\n\t                childSelector = '.' + name;\n\t            }\n\t            htmlElement = ComponentOptions.loadChildHtmlElementFromSelector(element, childSelector);\n\t        }\n\t        return htmlElement;\n\t    };\n\t    ComponentOptions.loadChildHtmlElementFromSelector = function (element, selector) {\n\t        Assert_1.Assert.isNonEmptyString(selector);\n\t        if (Dom_1.$$(element).is(selector)) {\n\t            return element;\n\t        }\n\t        return Dom_1.$$(element).find(selector);\n\t    };\n\t    ComponentOptions.loadChildrenHtmlElementFromSelector = function (element, selector) {\n\t        Assert_1.Assert.isNonEmptyString(selector);\n\t        return Dom_1.$$(element).findAll(selector);\n\t    };\n\t    ComponentOptions.loadTemplateOption = function (element, name, option, doc) {\n\t        if (doc === void 0) { doc = document; }\n\t        var template;\n\t        // Attribute: template selector\n\t        var selectorAttr = option.selectorAttr || ComponentOptions.attrNameFromName(name, option) + '-selector';\n\t        var selector = element.getAttribute(selectorAttr) || ComponentOptions.getAttributeFromAlias(element, option);\n\t        if (selector != null) {\n\t            var templateElement = doc.querySelector(selector);\n\t            if (templateElement != null) {\n\t                template = ComponentOptions.createResultTemplateFromElement(templateElement);\n\t            }\n\t        }\n\t        // Attribute: template id\n\t        if (template == null) {\n\t            var idAttr = option.idAttr || ComponentOptions.attrNameFromName(name, option) + '-id';\n\t            var id = element.getAttribute(idAttr) || ComponentOptions.getAttributeFromAlias(element, option);\n\t            if (id != null) {\n\t                template = ComponentOptions.loadResultTemplateFromId(id);\n\t            }\n\t        }\n\t        // Child\n\t        if (template == null) {\n\t            var childSelector = option.childSelector;\n\t            if (childSelector == null) {\n\t                childSelector = '.' + name.replace(/([A-Z])/g, '-$1').toLowerCase();\n\t            }\n\t            template = ComponentOptions.loadChildrenResultTemplateFromSelector(element, childSelector);\n\t        }\n\t        return template;\n\t    };\n\t    ComponentOptions.loadResultTemplateFromId = function (templateId) {\n\t        return Utils_1.Utils.isNonEmptyString(templateId) ? TemplateCache_1.TemplateCache.getTemplate(templateId) : null;\n\t    };\n\t    ComponentOptions.loadChildrenResultTemplateFromSelector = function (element, selector) {\n\t        var foundElements = ComponentOptions.loadChildrenHtmlElementFromSelector(element, selector);\n\t        if (foundElements.length > 0) {\n\t            return new TemplateList_1.TemplateList(_.compact(_.map(foundElements, function (element) { return ComponentOptions.createResultTemplateFromElement(element); })));\n\t        }\n\t        return null;\n\t    };\n\t    ComponentOptions.findParentScrolling = function (element, doc) {\n\t        if (doc === void 0) { doc = document; }\n\t        while (element != doc && element != null) {\n\t            if (ComponentOptions.isElementScrollable(element)) {\n\t                if (element.tagName.toLowerCase() !== 'body') {\n\t                    return element;\n\t                }\n\t                return window;\n\t            }\n\t            element = element.parentElement;\n\t        }\n\t        return window;\n\t    };\n\t    ComponentOptions.isElementScrollable = function (element) {\n\t        return Dom_1.$$(element).css('overflow-y') == 'scroll' || element.style.overflowY == 'scroll';\n\t    };\n\t    ComponentOptions.getAttributeFromAlias = function (element, option) {\n\t        if (option.alias) {\n\t            return element.getAttribute(ComponentOptions.attrNameFromName(option.alias));\n\t        }\n\t    };\n\t    ComponentOptions.createResultTemplateFromElement = function (element) {\n\t        Assert_1.Assert.exists(element);\n\t        var type = element.getAttribute('type');\n\t        var mimeTypes = 'You must specify the type of template. Valid values are :' +\n\t            ' ' + UnderscoreTemplate_1.UnderscoreTemplate.mimeTypes.toString() +\n\t            ' ' + HtmlTemplate_1.HtmlTemplate.mimeTypes.toString();\n\t        Assert_1.Assert.check(Utils_1.Utils.isNonEmptyString(type), mimeTypes);\n\t        if (_.indexOf(UnderscoreTemplate_1.UnderscoreTemplate.mimeTypes, type) != -1) {\n\t            return UnderscoreTemplate_1.UnderscoreTemplate.create(element);\n\t        }\n\t        else if (_.indexOf(HtmlTemplate_1.HtmlTemplate.mimeTypes, type) != -1) {\n\t            return new HtmlTemplate_1.HtmlTemplate(element);\n\t        }\n\t        else {\n\t            Assert_1.Assert.fail('Cannot guess template type from attribute: ' + type + '. Valid values are ' + mimeTypes);\n\t            return undefined;\n\t        }\n\t    };\n\t    return ComponentOptions;\n\t}());\n\texports.ComponentOptions = ComponentOptions;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 98 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Template_1 = __webpack_require__(99);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar UnderscoreTemplate_1 = __webpack_require__(100);\n\tvar HtmlTemplate_1 = __webpack_require__(101);\n\t/**\n\t * Holds a reference to all template available in the framework\n\t */\n\tvar TemplateCache = (function () {\n\t    function TemplateCache() {\n\t    }\n\t    /**\n\t     * Register a new template in the framework, which will be available to render any results.\n\t     * @param name\n\t     * @param template\n\t     * @param publicTemplate\n\t     * @param defaultTemplate\n\t     */\n\t    TemplateCache.registerTemplate = function (name, template, publicTemplate, defaultTemplate) {\n\t        if (publicTemplate === void 0) { publicTemplate = true; }\n\t        if (defaultTemplate === void 0) { defaultTemplate = false; }\n\t        Assert_1.Assert.isNonEmptyString(name);\n\t        Assert_1.Assert.exists(template);\n\t        if (!(template instanceof Template_1.Template)) {\n\t            template = new Template_1.Template(template);\n\t        }\n\t        if (template.name == null) {\n\t            template.name = name;\n\t        }\n\t        TemplateCache.templates[name] = template;\n\t        if (publicTemplate && !_.contains(TemplateCache.templateNames, name)) {\n\t            TemplateCache.templateNames.push(name);\n\t        }\n\t        if (defaultTemplate) {\n\t            TemplateCache.defaultTemplates[name] = template;\n\t        }\n\t    };\n\t    /**\n\t     * Return a template by its name/ID.\n\t     * @param name\n\t     * @returns {Template}\n\t     */\n\t    TemplateCache.getTemplate = function (name) {\n\t        Assert_1.Assert.exists(TemplateCache.templates[name]);\n\t        return TemplateCache.templates[name];\n\t    };\n\t    /**\n\t     * Get all templates currently registered in the framework.\n\t     * @returns {{}}\n\t     */\n\t    TemplateCache.getTemplates = function () {\n\t        return TemplateCache.templates;\n\t    };\n\t    /**\n\t     * Get all templates name currently registered in the framework.\n\t     * @returns {string[]}\n\t     */\n\t    TemplateCache.getTemplateNames = function () {\n\t        return TemplateCache.templateNames;\n\t    };\n\t    /**\n\t     * Get all the \"default\" templates in the framework.\n\t     * @returns {string[]}\n\t     */\n\t    TemplateCache.getDefaultTemplates = function () {\n\t        return _.keys(TemplateCache.defaultTemplates);\n\t    };\n\t    TemplateCache.getDefaultTemplate = function (name) {\n\t        Assert_1.Assert.exists(TemplateCache.defaultTemplates[name]);\n\t        return TemplateCache.defaultTemplates[name];\n\t    };\n\t    TemplateCache.scanAndRegisterTemplates = function () {\n\t        // Here we take care not to scan for templates for which the base library\n\t        // is not available. Case in point: someone was using the JS UI on a page\n\t        // that was also using Handlebars, but our code was initialized before\n\t        // the Handlebars library (loaded through AMD).\n\t        if (UnderscoreTemplate_1.UnderscoreTemplate.isLibraryAvailable()) {\n\t            TemplateCache.scanAndRegisterUnderscoreTemplates();\n\t        }\n\t        TemplateCache.scanAndRegisterHtmlTemplates();\n\t    };\n\t    TemplateCache.scanAndRegisterUnderscoreTemplates = function () {\n\t        _.each(UnderscoreTemplate_1.UnderscoreTemplate.mimeTypes, function (type) {\n\t            var scriptList = document.querySelectorAll(\"script[id][type='\" + type + \"']\");\n\t            var i = scriptList.length;\n\t            var arr = new Array(i);\n\t            while (i--) {\n\t                arr[i] = scriptList.item(i);\n\t            }\n\t            _.each(arr, function (elem) {\n\t                var template = new UnderscoreTemplate_1.UnderscoreTemplate(elem);\n\t                TemplateCache.registerTemplate(elem.getAttribute('id'), template);\n\t            });\n\t        });\n\t    };\n\t    TemplateCache.scanAndRegisterHtmlTemplates = function () {\n\t        _.each(HtmlTemplate_1.HtmlTemplate.mimeTypes, function (type) {\n\t            var scriptList = document.querySelectorAll(\"script[id][type='\" + type + \"']\");\n\t            var i = scriptList.length;\n\t            var arr = new Array(i);\n\t            while (i--) {\n\t                arr[i] = scriptList.item(i);\n\t            }\n\t            _.each(arr, function (elem) {\n\t                var template = new HtmlTemplate_1.HtmlTemplate(elem);\n\t                TemplateCache.registerTemplate(elem.getAttribute('id'), template);\n\t            });\n\t        });\n\t    };\n\t    TemplateCache.templates = {};\n\t    TemplateCache.templateNames = [];\n\t    TemplateCache.defaultTemplates = {};\n\t    return TemplateCache;\n\t}());\n\texports.TemplateCache = TemplateCache;\n\tdocument.addEventListener('DOMContentLoaded', function () {\n\t    TemplateCache.scanAndRegisterTemplates();\n\t});\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 99 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Logger_1 = __webpack_require__(15);\n\tvar StringUtils_1 = __webpack_require__(60);\n\tvar Initialization_1 = __webpack_require__(94);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar BaseComponent_1 = __webpack_require__(75);\n\tvar Template = (function () {\n\t    function Template(dataToString, condition) {\n\t        this.dataToString = dataToString;\n\t        this.condition = condition;\n\t        this.logger = new Logger_1.Logger(this);\n\t    }\n\t    Template.getFieldFromString = function (text) {\n\t        var fields = _.map(StringUtils_1.StringUtils.match(text, /(?:(?!\\b@)@([a-z0-9]+(?:\\.[a-z0-9]+)*\\b))|\\braw.([a-z0-9]+)|\\braw\\['([^']+)'\\]|\\braw\\['([^']+)'\\]/gi), function (field) {\n\t            return field[1] || field[2] || field[3] || field[4] || null;\n\t        });\n\t        _.each(Initialization_1.Initialization.getListOfRegisteredComponents(), function (componentId) {\n\t            var componentFields = Initialization_1.Initialization.getRegisteredComponent(componentId).fields;\n\t            if (componentFields != null && text.indexOf(BaseComponent_1.BaseComponent.computeCssClassNameForType(componentId)) != -1) {\n\t                fields = fields.concat(componentFields);\n\t            }\n\t        });\n\t        return fields;\n\t    };\n\t    Template.prototype.instantiateToString = function (object, checkCondition) {\n\t        if (checkCondition === void 0) { checkCondition = true; }\n\t        if (this.dataToString && (!checkCondition || this.condition == null || this.condition(object))) {\n\t            return this.dataToString(object);\n\t        }\n\t        return null;\n\t    };\n\t    Template.prototype.instantiateToElement = function (object, checkCondition) {\n\t        if (checkCondition === void 0) { checkCondition = true; }\n\t        var html = this.instantiateToString(object, checkCondition);\n\t        if (html != null) {\n\t            var element = Dom_1.htmlToDom(html);\n\t            this.logger.trace('Instantiated result template', object, element);\n\t            element['template'] = this;\n\t            return element;\n\t        }\n\t        return null;\n\t    };\n\t    Template.prototype.toHtmlElement = function () {\n\t        return null;\n\t    };\n\t    Template.prototype.getFields = function () {\n\t        return [];\n\t    };\n\t    Template.prototype.getType = function () {\n\t        return 'Template';\n\t    };\n\t    return Template;\n\t}());\n\texports.Template = Template;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 100 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Template_1 = __webpack_require__(99);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Dom_1 = __webpack_require__(56);\n\t_.templateSettings = {\n\t    evaluate: /(?:<%|{{)([\\s\\S]+?)(?:%>|}})/g,\n\t    interpolate: /(?:<%|{{)=([\\s\\S]+?)(?:%>|}})/g,\n\t    escape: /(?:<%|{{)-([\\s\\S]+?)(?:%>|}})/g\n\t};\n\tvar UnderscoreTemplate = (function (_super) {\n\t    __extends(UnderscoreTemplate, _super);\n\t    function UnderscoreTemplate(element) {\n\t        var _this = this;\n\t        _super.call(this);\n\t        this.element = element;\n\t        Assert_1.Assert.exists(element);\n\t        var templateString = element.innerHTML;\n\t        this.template = _.template(templateString);\n\t        var condition = Dom_1.$$(element).getAttribute('data-condition');\n\t        if (condition != null) {\n\t            this.condition = new Function('obj', 'with(obj||{}){return ' + condition + '}');\n\t        }\n\t        this.dataToString = function (object) {\n\t            var extended = _.extend({}, object, UnderscoreTemplate.templateHelpers);\n\t            return _this.template(extended);\n\t        };\n\t        this.fields = Template_1.Template.getFieldFromString(templateString + ' ' + condition);\n\t        var additionalFields = ComponentOptions_1.ComponentOptions.loadFieldsOption(element, 'fields', { includeInResults: true });\n\t        if (additionalFields != null) {\n\t            // remove the @\n\t            this.fields = this.fields.concat(_.map(additionalFields, function (field) { return field.substr(1); }));\n\t        }\n\t    }\n\t    UnderscoreTemplate.prototype.toHtmlElement = function () {\n\t        var script = Dom_1.$$('script');\n\t        script.setAttribute('type', _.first(UnderscoreTemplate.mimeTypes));\n\t        script.setAttribute('data-condition', $(this.element).data('condition'));\n\t        script.text(this.element.innerHTML);\n\t        return script.el;\n\t    };\n\t    UnderscoreTemplate.prototype.getType = function () {\n\t        return 'UnderscoreTemplate';\n\t    };\n\t    UnderscoreTemplate.create = function (element) {\n\t        Assert_1.Assert.exists(element);\n\t        return new UnderscoreTemplate(element);\n\t    };\n\t    UnderscoreTemplate.fromString = function (template, condition) {\n\t        var script = document.createElement('script');\n\t        script.text = template;\n\t        if (condition != null) {\n\t            Dom_1.$$(script).setAttribute('data-condition', condition);\n\t        }\n\t        Dom_1.$$(script).setAttribute('type', UnderscoreTemplate.mimeTypes[0]);\n\t        return new UnderscoreTemplate(script);\n\t    };\n\t    UnderscoreTemplate.prototype.getFields = function () {\n\t        return this.fields;\n\t    };\n\t    UnderscoreTemplate.registerTemplateHelper = function (helperName, helper) {\n\t        UnderscoreTemplate.templateHelpers[helperName] = helper;\n\t    };\n\t    UnderscoreTemplate.isLibraryAvailable = function () {\n\t        return Utils_1.Utils.exists(window['_']);\n\t    };\n\t    UnderscoreTemplate.templateHelpers = {};\n\t    UnderscoreTemplate.mimeTypes = [\n\t        'text/underscore',\n\t        'text/underscore-template',\n\t        'text/x-underscore',\n\t        'text/x-underscore-template'\n\t    ];\n\t    return UnderscoreTemplate;\n\t}(Template_1.Template));\n\texports.UnderscoreTemplate = UnderscoreTemplate;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 101 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Template_1 = __webpack_require__(99);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar HtmlTemplate = (function (_super) {\n\t    __extends(HtmlTemplate, _super);\n\t    function HtmlTemplate(element) {\n\t        _super.call(this, function () {\n\t            return element.innerHTML;\n\t        });\n\t        this.element = element;\n\t        var condition = Dom_1.$$(element).getAttribute('data-condition');\n\t        if (condition != null) {\n\t            // Allows to add quotes in data-condition on the templates\n\t            condition = condition.toString().replace(/&quot;/g, '\"');\n\t            this.condition = new Function('obj', 'with(obj||{}){return ' + condition + '}');\n\t        }\n\t        this.fields = Template_1.Template.getFieldFromString(element.innerHTML + ' ' + condition);\n\t        var additionalFields = ComponentOptions_1.ComponentOptions.loadFieldsOption(element, 'fields', { includeInResults: true });\n\t        if (additionalFields != null) {\n\t            // remove the @\n\t            this.fields = this.fields.concat(_.map(additionalFields, function (field) { return field.substr(1); }));\n\t        }\n\t    }\n\t    HtmlTemplate.prototype.toHtmlElement = function () {\n\t        var script = Dom_1.$$('script');\n\t        script.setAttribute('type', _.first(HtmlTemplate.mimeTypes));\n\t        script.setAttribute('data-condition', Dom_1.$$(this.element).getAttribute('data-condition'));\n\t        script.text(this.element.innerHTML);\n\t        return script.el;\n\t    };\n\t    HtmlTemplate.prototype.getType = function () {\n\t        return 'HtmlTemplate';\n\t    };\n\t    HtmlTemplate.prototype.getFields = function () {\n\t        return this.fields;\n\t    };\n\t    HtmlTemplate.create = function (element) {\n\t        Assert_1.Assert.exists(element);\n\t        return new HtmlTemplate(element);\n\t    };\n\t    HtmlTemplate.fromString = function (template, condition) {\n\t        var script = document.createElement('script');\n\t        script.text = template;\n\t        if (condition != null) {\n\t            Dom_1.$$(script).setAttribute('data-condition', condition);\n\t        }\n\t        Dom_1.$$(script).setAttribute('type', HtmlTemplate.mimeTypes[0]);\n\t        return new HtmlTemplate(script);\n\t    };\n\t    HtmlTemplate.mimeTypes = [\n\t        'text/html'\n\t    ];\n\t    return HtmlTemplate;\n\t}(Template_1.Template));\n\texports.HtmlTemplate = HtmlTemplate;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 102 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Template_1 = __webpack_require__(99);\n\tvar DefaultResultTemplate_1 = __webpack_require__(103);\n\tvar TemplateList = (function (_super) {\n\t    __extends(TemplateList, _super);\n\t    function TemplateList(templates) {\n\t        _super.call(this);\n\t        this.templates = templates;\n\t    }\n\t    TemplateList.prototype.instantiateToString = function (object, checkCondition) {\n\t        for (var i = 0; i < this.templates.length; i++) {\n\t            var result = this.templates[i].instantiateToString(object, checkCondition);\n\t            if (result != null) {\n\t                return result;\n\t            }\n\t        }\n\t        return new DefaultResultTemplate_1.DefaultResultTemplate().instantiateToString(object);\n\t    };\n\t    TemplateList.prototype.instantiateToElement = function (object, checkCondition) {\n\t        if (checkCondition === void 0) { checkCondition = true; }\n\t        for (var i = 0; i < this.templates.length; i++) {\n\t            var element = this.templates[i].instantiateToElement(object, checkCondition);\n\t            if (element != null) {\n\t                return element;\n\t            }\n\t        }\n\t        return new DefaultResultTemplate_1.DefaultResultTemplate().instantiateToElement(object);\n\t    };\n\t    TemplateList.prototype.getFields = function () {\n\t        return _.reduce(this.templates, function (fields, template) { return fields.concat(template.getFields()); }, []);\n\t    };\n\t    TemplateList.prototype.getType = function () {\n\t        return 'TemplateList';\n\t    };\n\t    return TemplateList;\n\t}(Template_1.Template));\n\texports.TemplateList = TemplateList;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 103 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Template_1 = __webpack_require__(99);\n\tvar UnderscoreTemplate_1 = __webpack_require__(100);\n\tvar TemplateCache_1 = __webpack_require__(98);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar DefaultResultTemplate = (function (_super) {\n\t    __extends(DefaultResultTemplate, _super);\n\t    function DefaultResultTemplate() {\n\t        _super.call(this);\n\t    }\n\t    DefaultResultTemplate.prototype.instantiateToString = function (queryResult) {\n\t        Assert_1.Assert.exists(queryResult);\n\t        queryResult = _.extend({}, queryResult, UnderscoreTemplate_1.UnderscoreTemplate.templateHelpers);\n\t        var defaultTemplates = _.map(TemplateCache_1.TemplateCache.getDefaultTemplates(), function (name) { return TemplateCache_1.TemplateCache.getTemplate(name); });\n\t        // We want to put templates with conditions first\n\t        defaultTemplates.sort(function (a, b) {\n\t            if (a.condition == null && b.condition != null) {\n\t                return 1;\n\t            }\n\t            else if (a.condition != null && b.condition == null) {\n\t                return -1;\n\t            }\n\t            return 0;\n\t        });\n\t        for (var i = 0; i < defaultTemplates.length; i++) {\n\t            var result = defaultTemplates[i].instantiateToString(queryResult);\n\t            if (result != null) {\n\t                return result;\n\t            }\n\t        }\n\t        return _.template('<div>' +\n\t            '<div class=\"coveo-title\"><a class=\"CoveoResultLink\"><%= title?Coveo.TemplateHelpers.getHelper(\"highlight\").call(title, titleHighlights):clickUri %></a></div>' +\n\t            '<% if(excerpt){ %><div class=\"coveo-excerpt\"><%= Coveo.TemplateHelpers.getHelper(\"highlight\").call(excerpt, excerptHighlights) %></div><% } %>' +\n\t            '<table class=\"CoveoFieldTable\"><%= Coveo.TemplateHelpers.getHelper(\"highlight\").call() %></table>' +\n\t            '</div>')(queryResult);\n\t    };\n\t    DefaultResultTemplate.prototype.instantiateToElement = function (queryResult) {\n\t        var div = document.createElement('div');\n\t        div.innerHTML = this.instantiateToString(queryResult);\n\t        return div;\n\t    };\n\t    DefaultResultTemplate.prototype.getFields = function () {\n\t        var defaultTemplates = _.map(TemplateCache_1.TemplateCache.getDefaultTemplates(), function (name) { return TemplateCache_1.TemplateCache.getTemplate(name); });\n\t        return _.flatten(_.map(defaultTemplates, function (template) { return template.getFields(); }));\n\t    };\n\t    DefaultResultTemplate.prototype.getType = function () {\n\t        return 'DefaultResultTemplate';\n\t    };\n\t    return DefaultResultTemplate;\n\t}(Template_1.Template));\n\texports.DefaultResultTemplate = DefaultResultTemplate;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 104 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar es6_promise_1 = __webpack_require__(6);\n\tvar NoopAnalyticsClient = (function () {\n\t    function NoopAnalyticsClient() {\n\t        this.isContextual = false;\n\t    }\n\t    NoopAnalyticsClient.prototype.isActivated = function () {\n\t        return false;\n\t    };\n\t    NoopAnalyticsClient.prototype.getCurrentEventCause = function () {\n\t        return null;\n\t    };\n\t    NoopAnalyticsClient.prototype.getCurrentEventMeta = function () {\n\t        return {};\n\t    };\n\t    NoopAnalyticsClient.prototype.logSearchEvent = function (actionCause, meta) {\n\t    };\n\t    NoopAnalyticsClient.prototype.logSearchAsYouType = function (actionCause, meta) {\n\t    };\n\t    NoopAnalyticsClient.prototype.logClickEvent = function (actionCause, meta, result, element) {\n\t    };\n\t    NoopAnalyticsClient.prototype.logCustomEvent = function (actionCause, meta, element) {\n\t    };\n\t    NoopAnalyticsClient.prototype.getTopQueries = function (params) {\n\t        return new es6_promise_1.Promise(function (resolve, reject) {\n\t            resolve([]);\n\t        });\n\t    };\n\t    NoopAnalyticsClient.prototype.getCurrentVisitIdPromise = function () {\n\t        return new es6_promise_1.Promise(function (resolve, reject) {\n\t            resolve(null);\n\t        });\n\t    };\n\t    NoopAnalyticsClient.prototype.getCurrentVisitId = function () {\n\t        return null;\n\t    };\n\t    NoopAnalyticsClient.prototype.sendAllPendingEvents = function () {\n\t    };\n\t    NoopAnalyticsClient.prototype.cancelAllPendingEvents = function () {\n\t    };\n\t    NoopAnalyticsClient.prototype.warnAboutSearchEvent = function () {\n\t    };\n\t    NoopAnalyticsClient.prototype.getPendingSearchEvent = function () {\n\t        return null;\n\t    };\n\t    return NoopAnalyticsClient;\n\t}());\n\texports.NoopAnalyticsClient = NoopAnalyticsClient;\n\n\n/***/ },\n/* 105 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\t/// <reference path=\"../../../node_modules/modal-box/bin/ModalBox.d.ts\" />\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar LocalStorageUtils_1 = __webpack_require__(68);\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar ResultListEvents_1 = __webpack_require__(47);\n\tvar DebugEvents_1 = __webpack_require__(41);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar StringUtils_1 = __webpack_require__(60);\n\tvar SearchEndpoint_1 = __webpack_require__(11);\n\tvar Template_1 = __webpack_require__(99);\n\tvar es6_promise_1 = __webpack_require__(6);\n\tvar RootComponent_1 = __webpack_require__(74);\n\tvar BaseComponent_1 = __webpack_require__(75);\n\tvar ExternalModulesShim_1 = __webpack_require__(24);\n\tvar Globalize = __webpack_require__(4);\n\tvar KeyboardUtils_1 = __webpack_require__(67);\n\tvar InitializationEvents_1 = __webpack_require__(43);\n\tvar Debug = (function (_super) {\n\t    __extends(Debug, _super);\n\t    function Debug(element, queryController, options, modalBox) {\n\t        var _this = this;\n\t        if (modalBox === void 0) { modalBox = ExternalModulesShim_1.ModalBox; }\n\t        _super.call(this, element, Debug.ID);\n\t        this.element = element;\n\t        this.queryController = queryController;\n\t        this.options = options;\n\t        this.modalBox = modalBox;\n\t        this.debug = false;\n\t        this.highlightRecommendation = false;\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, Debug, options);\n\t        Dom_1.$$(this.element).on(QueryEvents_1.QueryEvents.buildingQuery, function (e, args) {\n\t            args.queryBuilder.enableDebug = _this.debug || args.queryBuilder.enableDebug;\n\t        });\n\t        Dom_1.$$(this.element).on(ResultListEvents_1.ResultListEvents.newResultDisplayed, function (e, args) { return _this.handleNewResultDisplayed(args); });\n\t        Dom_1.$$(this.element).on(DebugEvents_1.DebugEvents.showDebugPanel, function (e, args) {\n\t            _this.handleShowDebugPanel(args);\n\t        });\n\t        Dom_1.$$(this.element).on(InitializationEvents_1.InitializationEvents.nuke, function () {\n\t            _this.unbindEscapeEvent();\n\t        });\n\t        this.localStorageDebug = new LocalStorageUtils_1.LocalStorageUtils('DebugPanel');\n\t        this.collapsedSections = this.localStorageDebug.load() || [];\n\t    }\n\t    Debug.prototype.showDebugPanel = function (builder) {\n\t        var _this = this;\n\t        var build = builder();\n\t        var modalbox = this.modalBox.open(build.body, {\n\t            title: '',\n\t            className: 'coveo-debug',\n\t            titleClose: true,\n\t            overlayClose: true,\n\t            validation: function () {\n\t                _this.unbindEscapeEvent();\n\t                return true;\n\t            }\n\t        });\n\t        this.bindEscapeEvent();\n\t        var title = Dom_1.$$(modalbox.wrapper).find('.coveo-title');\n\t        var search = this.buildSearchBox(build.body);\n\t        var downloadLink = Dom_1.$$('a', { download: 'debug.json', 'href': this.downloadHref(build.json) }, 'Download');\n\t        var bodyBuilder = function (results) {\n\t            var build = builder();\n\t            downloadLink.el.setAttribute('href', _this.downloadHref(build.json));\n\t            return build.body;\n\t        };\n\t        title.appendChild(this.buildEnabledHighlightRecommendation());\n\t        title.appendChild(this.buildEnableDebugCheckbox(build.body, search, bodyBuilder));\n\t        title.appendChild(search);\n\t        title.appendChild(downloadLink.el);\n\t    };\n\t    Debug.prototype.handleEscapeEvent = function (e) {\n\t        if (e.keyCode == KeyboardUtils_1.KEYBOARD.ESCAPE) {\n\t            if (this.modalBox) {\n\t                this.modalBox.close();\n\t            }\n\t        }\n\t    };\n\t    Debug.prototype.bindEscapeEvent = function () {\n\t        this.boundEscapeKey = this.handleEscapeEvent.bind(this);\n\t        Dom_1.$$(document.body).on('keyup', this.boundEscapeKey);\n\t    };\n\t    Debug.prototype.unbindEscapeEvent = function () {\n\t        if (this.boundEscapeKey) {\n\t            Dom_1.$$(document.body).off('keyup', this.boundEscapeKey);\n\t        }\n\t        this.boundEscapeKey = null;\n\t    };\n\t    Debug.prototype.handleShowDebugPanel = function (info) {\n\t        var _this = this;\n\t        if (this.stackDebug == null) {\n\t            setTimeout(function () {\n\t                var stackDebug = _this.stackDebug;\n\t                _this.showDebugPanel(function () { return _this.buildStackPanel(stackDebug); });\n\t                _this.stackDebug = null;\n\t            });\n\t            this.stackDebug = {};\n\t        }\n\t        _.extend(this.stackDebug, info);\n\t    };\n\t    Debug.prototype.handleNewResultDisplayed = function (args) {\n\t        var _this = this;\n\t        if (args.item != null) {\n\t            if (this.highlightRecommendation && args.result.isRecommendation) {\n\t                Dom_1.$$(args.item).addClass('coveo-is-recommendation');\n\t            }\n\t            Dom_1.$$(args.item).on('dblclick', function (e) {\n\t                _this.handleResultDoubleClick(e, args);\n\t            });\n\t        }\n\t    };\n\t    Debug.prototype.handleResultDoubleClick = function (e, args) {\n\t        var _this = this;\n\t        if (e.altKey) {\n\t            var index_1 = args.result.index;\n\t            var findResult_1 = function (results) { return results != null ? _.find(results.results, function (result) { return result.index == index_1; }) : args.result; };\n\t            var template = args.item['template'];\n\t            var debugPanel = {\n\t                result: findResult_1,\n\t                fields: function (results) { return _this.buildFieldsSection(findResult_1(results)); },\n\t                rankingInfo: function (results) { return _this.buildRankingInfoSection(findResult_1(results)); },\n\t                template: this.templateToJson(template),\n\t            };\n\t            this.handleShowDebugPanel(debugPanel);\n\t        }\n\t    };\n\t    Debug.prototype.downloadHref = function (info) {\n\t        return 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(info));\n\t    };\n\t    Debug.prototype.buildStackPanel = function (stackDebug, results) {\n\t        var _this = this;\n\t        var body = Dom_1.Dom.createElement('div', { className: 'coveo-debug' });\n\t        var keys = _.pairs(_.keys(stackDebug));\n\t        keys = keys.sort(function (a, b) {\n\t            var indexA = _.indexOf(Debug.customOrder, a[1]);\n\t            var indexB = _.indexOf(Debug.customOrder, b[1]);\n\t            if (indexA != -1 && indexB != -1) {\n\t                return indexA - indexB;\n\t            }\n\t            if (indexA != -1) {\n\t                return -1;\n\t            }\n\t            if (indexB != -1) {\n\t                return 1;\n\t            }\n\t            return a[0] - b[0];\n\t        });\n\t        var json = {};\n\t        _.forEach(keys, function (key) {\n\t            var section = _this.buildSection(key[1]);\n\t            var build = _this.buildStackPanelSection(stackDebug[key[1]], results);\n\t            section.container.appendChild(build.section);\n\t            if (build.json != null) {\n\t                json[key[1]] = build.json;\n\t            }\n\t            body.appendChild(section.dom);\n\t        });\n\t        return { body: body, json: json };\n\t    };\n\t    Debug.prototype.buildStackPanelSection = function (value, results) {\n\t        if (value instanceof HTMLElement) {\n\t            return { section: value };\n\t        }\n\t        else if (_.isFunction(value)) {\n\t            return this.buildStackPanelSection(value(results), results);\n\t        }\n\t        var json = this.toJson(value);\n\t        return { section: this.buildProperty(json), json: json };\n\t    };\n\t    Debug.prototype.buildSearchBox = function (body) {\n\t        var _this = this;\n\t        var dom = Dom_1.Dom.createElement('div', { className: 'coveo-debug-search' }, '<input type=\\'text\\'/>');\n\t        dom.onclick = function (e) {\n\t            e.stopPropagation();\n\t        };\n\t        var lastSearch = '';\n\t        var input = dom.querySelector('input');\n\t        input.setAttribute('placeholder', 'Search in debug');\n\t        input.onkeyup = function (e) {\n\t            if (e == null || e.keyCode == 13) {\n\t                var value = input.value.toLowerCase();\n\t                if (lastSearch != value) {\n\t                    lastSearch = value;\n\t                    _this.search(value, body);\n\t                }\n\t            }\n\t        };\n\t        input.onchange = function () {\n\t            var value = input.value.toLowerCase();\n\t            if (lastSearch != value) {\n\t                lastSearch = value;\n\t                _this.search(value, body);\n\t            }\n\t        };\n\t        return dom;\n\t    };\n\t    Debug.prototype.search = function (value, body) {\n\t        var _this = this;\n\t        if (_.isEmpty(value)) {\n\t            Dom_1.$$(body).findAll('.coveo-search-match, .coveo-search-submatch').forEach(function (el) {\n\t                Dom_1.$$(el).removeClass('coveo-search-match, coveo-search-submatch');\n\t            });\n\t            Dom_1.$$(body).removeClass('coveo-searching');\n\t        }\n\t        else {\n\t            Dom_1.$$(body).addClass('coveo-searching-loading');\n\t            setTimeout(function () {\n\t                var rootProperties = Dom_1.$$(body).findAll('.coveo-section .coveo-section-container > .coveo-property');\n\t                _.each(rootProperties, function (element) {\n\t                    _this.findInProperty(element, value);\n\t                });\n\t                Dom_1.$$(body).addClass('coveo-searching');\n\t                Dom_1.$$(body).removeClass('coveo-searching-loading');\n\t            });\n\t        }\n\t    };\n\t    Debug.prototype.findInProperty = function (element, value) {\n\t        var _this = this;\n\t        var jElement = Dom_1.$$(element);\n\t        var match = element['label'].indexOf(value) != -1;\n\t        if (match) {\n\t            this.highlightSearch(element['labelDom'], value);\n\t        }\n\t        else {\n\t            this.removeHighlightSearch(element['labelDom']);\n\t        }\n\t        if (jElement.hasClass('coveo-property-object')) {\n\t            jElement.toggleClass('coveo-search-match', match);\n\t            var children = element['buildKeys']();\n\t            var submatch_1 = false;\n\t            _.each(children, function (child) {\n\t                submatch_1 = _this.findInProperty(child, value) || submatch_1;\n\t            });\n\t            jElement.toggleClass('coveo-search-submatch', submatch_1);\n\t            return match || submatch_1;\n\t        }\n\t        else {\n\t            if (element['value'].indexOf(value) != -1) {\n\t                this.highlightSearch(element['valueDom'], value);\n\t                match = true;\n\t            }\n\t            else {\n\t                this.removeHighlightSearch(element['valueDom']);\n\t            }\n\t            jElement.toggleClass('coveo-search-match', match);\n\t        }\n\t        return match;\n\t    };\n\t    Debug.prototype.buildEnableDebugCheckbox = function (body, search, bodyBuilder) {\n\t        var _this = this;\n\t        var dom = Dom_1.Dom.createElement('div', { className: 'coveo-enabled-debug' }, '<label>Enable query debug <input type=\\'checkbox\\'/></label>');\n\t        Dom_1.$$(dom).on('click', function (e) {\n\t            e.stopPropagation();\n\t        });\n\t        var checkbox = Dom_1.$$(dom).find('input');\n\t        if (this.debug) {\n\t            checkbox.setAttribute('checked', 'checked');\n\t        }\n\t        checkbox.onchange = function () {\n\t            _this.debug = !_this.debug;\n\t            Dom_1.$$(_this.element).one(QueryEvents_1.QueryEvents.querySuccess + ' ' + QueryEvents_1.QueryEvents.queryError, function (e, args) {\n\t                Dom_1.$$(body).removeClass('coveo-debug-loading');\n\t                Dom_1.$$(body).empty();\n\t                Dom_1.$$(bodyBuilder(args.results)).children().forEach(function (child) {\n\t                    body.appendChild(child);\n\t                });\n\t            });\n\t            _this.queryController.executeQuery({ closeModalBox: false });\n\t            Dom_1.$$(body).addClass('coveo-debug-loading');\n\t            var input = search.querySelector('input');\n\t            input.value = '';\n\t            input.onkeyup(null);\n\t        };\n\t        return dom;\n\t    };\n\t    Debug.prototype.buildEnabledHighlightRecommendation = function () {\n\t        var _this = this;\n\t        var dom = Dom_1.Dom.createElement('div', { className: 'coveo-enabled-highlight-recommendation' }, '<label>Highlight recommendation <input type=\\'checkbox\\'/></label>');\n\t        dom.onclick = function (e) {\n\t            e.stopPropagation();\n\t        };\n\t        var checkbox = Dom_1.$$(dom).find('input');\n\t        if (this.highlightRecommendation) {\n\t            checkbox.setAttribute('checked', 'checked');\n\t        }\n\t        checkbox.onchange = function () {\n\t            _this.highlightRecommendation = !_this.highlightRecommendation;\n\t            _this.queryController.executeQuery({ closeModalBox: false });\n\t        };\n\t        return dom;\n\t    };\n\t    Debug.prototype.buildSection = function (id) {\n\t        var _this = this;\n\t        var dom = Dom_1.Dom.createElement('div', { className: 'coveo-section coveo-' + id + '-section' });\n\t        var header = Dom_1.Dom.createElement('div', { className: 'coveo-section-header' });\n\t        Dom_1.$$(header).text(id);\n\t        dom.appendChild(header);\n\t        var container = Dom_1.Dom.createElement('div', { className: 'coveo-section-container' });\n\t        dom.appendChild(container);\n\t        if (_.contains(this.collapsedSections, id)) {\n\t            Dom_1.$$(dom).addClass('coveo-debug-collapsed');\n\t        }\n\t        header.onclick = function () {\n\t            Dom_1.$$(dom).toggleClass('coveo-debug-collapsed');\n\t            if (_.contains(_this.collapsedSections, id)) {\n\t                _this.collapsedSections = _.without(_this.collapsedSections, id);\n\t            }\n\t            else {\n\t                _this.collapsedSections.push(id);\n\t            }\n\t            _this.localStorageDebug.save(_this.collapsedSections);\n\t        };\n\t        return {\n\t            dom: dom,\n\t            header: header,\n\t            container: container\n\t        };\n\t    };\n\t    Debug.prototype.fetchFields = function () {\n\t        var _this = this;\n\t        if (this.fields == null) {\n\t            return this.queryController.getEndpoint().listFields().then(function (fields) {\n\t                _this.fields = {};\n\t                fields.forEach(function (field) {\n\t                    _this.fields[field.name] = field;\n\t                });\n\t                return _this.fields;\n\t            });\n\t        }\n\t        else {\n\t            return es6_promise_1.Promise.resolve(this.fields);\n\t        }\n\t    };\n\t    Debug.prototype.buildFieldsSection = function (result) {\n\t        return this.fetchFields()\n\t            .then(function (fieldDescriptions) {\n\t            var fields = {};\n\t            _.each(result.raw, function (value, key) {\n\t                var fieldDescription = fieldDescriptions['@' + key];\n\t                if (fieldDescription == null && key.match(/^sys/)) {\n\t                    fieldDescription = fieldDescriptions['@' + key.substr(3)];\n\t                }\n\t                if (fieldDescription == null) {\n\t                    fields['@' + key] = value;\n\t                }\n\t                else if (fieldDescription.fieldType == 'Date') {\n\t                    fields['@' + key] = new Date(value);\n\t                }\n\t                else if (fieldDescription.splitGroupByField) {\n\t                    fields['@' + key] = value.split(/\\s*;\\s*/);\n\t                }\n\t                else {\n\t                    fields['@' + key] = value;\n\t                }\n\t            });\n\t            return fields;\n\t        });\n\t    };\n\t    Debug.prototype.buildRankingInfoSection = function (result) {\n\t        return result.rankingInfo && this.parseRankingInfo(result.rankingInfo);\n\t    };\n\t    Debug.prototype.parseRankingInfo = function (value) {\n\t        var _this = this;\n\t        var rankingInfo = {};\n\t        var infos = value.match(/^(?:Document weights:\\n((?:.)*?)\\n)?\\n(?:Terms weights:\\n((?:.|\\n)*))?Total weight: ([0-9]+)$/);\n\t        if (infos[1] != null) {\n\t            rankingInfo['Document weights'] = this.parseWeights(infos[1]);\n\t        }\n\t        if (infos[2] != null) {\n\t            var terms = StringUtils_1.StringUtils.match(infos[2], /((?:[^:]+: [0-9]+, [0-9]+; )+)\\n((?:\\w+: [0-9]+; )+)/g);\n\t            rankingInfo['Terms weights'] = _.object(_.map(terms, function (term) {\n\t                var words = _.object(_.map(StringUtils_1.StringUtils.match(term[1], /([^:]+): ([0-9]+), ([0-9]+); /g), function (word) {\n\t                    return [\n\t                        word[1],\n\t                        {\n\t                            Correlation: Number(word[2]),\n\t                            'TF-IDF': Number(word[3]),\n\t                        }\n\t                    ];\n\t                }));\n\t                var weights = _this.parseWeights(term[2]);\n\t                return [\n\t                    _.keys(words).join(', '),\n\t                    {\n\t                        terms: words,\n\t                        Weights: weights\n\t                    }];\n\t            }));\n\t        }\n\t        rankingInfo['Total weight'] = Number(infos[3]);\n\t        return rankingInfo;\n\t    };\n\t    Debug.prototype.parseWeights = function (value) {\n\t        var listOfWeight = value.match(/(\\w+(?:\\s\\w+)*): ([-0-9]+)/g);\n\t        return _.object(_.map(listOfWeight, function (weight) {\n\t            var weightGroup = weight.match(/^(\\w+(?:\\s\\w+)*): ([-0-9]+)$/);\n\t            return [weightGroup[1], Number(weightGroup[2])];\n\t        }));\n\t    };\n\t    Debug.prototype.buildProperty = function (value, label) {\n\t        if (value instanceof es6_promise_1.Promise) {\n\t            return this.buildPromise(value, label);\n\t        }\n\t        else if ((_.isArray(value) || (_.isObject(value))) && !_.isString(value)) {\n\t            return this.buildObjectProperty(value, label);\n\t        }\n\t        else {\n\t            return this.buildBasicProperty(value, label);\n\t        }\n\t    };\n\t    Debug.prototype.buildPromise = function (promise, label) {\n\t        var _this = this;\n\t        var dom = document.createElement('div');\n\t        dom.className = 'coveo-property coveo-property-promise';\n\t        promise.then(function (value) {\n\t            var resolvedDom = _this.buildProperty(value, label);\n\t            Dom_1.$$(dom).replaceWith(resolvedDom);\n\t        });\n\t        return dom;\n\t    };\n\t    Debug.prototype.buildObjectProperty = function (object, label) {\n\t        var _this = this;\n\t        var dom = document.createElement('div');\n\t        dom.className = 'coveo-property coveo-property-object';\n\t        var valueContainer = document.createElement('div');\n\t        valueContainer.className = 'coveo-property-value';\n\t        var keys = _.keys(object);\n\t        if (!_.isArray(object)) {\n\t            keys.sort();\n\t        }\n\t        var children;\n\t        var buildKeys = function () {\n\t            if (children == null) {\n\t                children = [];\n\t                _.each(keys, function (key) {\n\t                    var property = _this.buildProperty(object[key], key);\n\t                    if (property != null) {\n\t                        children.push(property);\n\t                        valueContainer.appendChild(property);\n\t                    }\n\t                });\n\t            }\n\t            return children;\n\t        };\n\t        dom['buildKeys'] = buildKeys;\n\t        if (label != null) {\n\t            var labelDom = document.createElement('div');\n\t            labelDom.className = 'coveo-property-label';\n\t            labelDom.appendChild(document.createTextNode(label));\n\t            dom['labelDom'] = labelDom;\n\t            dom.appendChild(labelDom);\n\t            if (keys.length != 0) {\n\t                dom.className += ' coveo-collapsible';\n\t                labelDom.onclick = function () {\n\t                    buildKeys();\n\t                    var className = dom.className.split(/\\s+/);\n\t                    if (_.contains(className, 'coveo-expanded')) {\n\t                        className = _.without(className, 'coveo-expanded');\n\t                    }\n\t                    else {\n\t                        className.push('coveo-expanded');\n\t                    }\n\t                    dom.className = className.join(' ');\n\t                };\n\t            }\n\t        }\n\t        else {\n\t            buildKeys();\n\t        }\n\t        if (keys.length == 0) {\n\t            var className = _.without(dom.className.split(/\\s+/), 'coveo-property-object');\n\t            className.push('coveo-property-basic');\n\t            dom.className = className.join(' ');\n\t            if (_.isArray(object)) {\n\t                valueContainer.innerHTML = '[]';\n\t            }\n\t            else {\n\t                valueContainer.innerHTML = '{}';\n\t            }\n\t            dom['value'] = '';\n\t        }\n\t        dom['label'] = label != null ? label.toLowerCase() : '';\n\t        dom.appendChild(valueContainer);\n\t        return dom;\n\t    };\n\t    Debug.prototype.buildBasicProperty = function (value, label) {\n\t        var _this = this;\n\t        var dom = document.createElement('div');\n\t        dom.className = 'coveo-property coveo-property-basic';\n\t        if (label != null) {\n\t            var labelDom = document.createElement('div');\n\t            labelDom.className = 'coveo-property-label';\n\t            labelDom.appendChild(document.createTextNode(label));\n\t            dom.appendChild(labelDom);\n\t            dom['labelDom'] = labelDom;\n\t        }\n\t        var stringValue = value != null ? value.toString() : String(value);\n\t        if (value != null && value['ref'] != null) {\n\t            value = value['ref'];\n\t        }\n\t        var valueDom = document.createElement('div');\n\t        valueDom.appendChild(document.createTextNode(stringValue));\n\t        valueDom.ondblclick = function () {\n\t            _this.selectElementText(valueDom);\n\t        };\n\t        dom.appendChild(valueDom);\n\t        dom['valueDom'] = valueDom;\n\t        var className = ['coveo-property-value'];\n\t        if (_.isString(value)) {\n\t            className.push('coveo-property-value-string');\n\t        }\n\t        if (_.isNull(value) || _.isUndefined(value)) {\n\t            className.push('coveo-property-value-null');\n\t        }\n\t        if (_.isNumber(value)) {\n\t            className.push('coveo-property-value-number');\n\t        }\n\t        if (_.isBoolean(value)) {\n\t            className.push('coveo-property-value-boolean');\n\t        }\n\t        if (_.isDate(value)) {\n\t            className.push('coveo-property-value-date');\n\t        }\n\t        if (_.isObject(value)) {\n\t            className.push('coveo-property-value-object');\n\t        }\n\t        if (_.isArray(value)) {\n\t            className.push('coveo-property-value-array');\n\t        }\n\t        valueDom.className = className.join(' ');\n\t        dom['label'] = label != null ? label.toLowerCase() : '';\n\t        dom['value'] = stringValue.toLowerCase();\n\t        return dom;\n\t    };\n\t    Debug.prototype.toJson = function (value, depth, done) {\n\t        var _this = this;\n\t        if (depth === void 0) { depth = 0; }\n\t        if (done === void 0) { done = []; }\n\t        if (value instanceof BaseComponent_1.BaseComponent || value instanceof SearchEndpoint_1.SearchEndpoint) {\n\t            return this.componentToJson(value, depth);\n\t        }\n\t        if (value instanceof HTMLElement) {\n\t            return this.htmlToJson(value);\n\t        }\n\t        if (value instanceof Template_1.Template) {\n\t            return this.templateToJson(value);\n\t        }\n\t        if (value instanceof es6_promise_1.Promise) {\n\t            return value.then(function (value) {\n\t                return _this.toJson(value, depth, done);\n\t            });\n\t        }\n\t        if (value == window) {\n\t            return this.toJsonRef(value);\n\t        }\n\t        if (_.isArray(value) || _.isObject(value)) {\n\t            if (_.contains(done, value)) {\n\t                return this.toJsonRef(value, '< RECURSIVE >');\n\t            }\n\t            else if (depth >= Debug.maxDepth) {\n\t                return this.toJsonRef(value);\n\t            }\n\t            else if (_.isArray(value)) {\n\t                return _.map(value, function (subValue, key) { return _this.toJson(subValue, depth + 1, done.concat([value])); });\n\t            }\n\t            else if (_.isDate(value)) {\n\t                return this.toJsonRef(value, Globalize.format(value, 'F'));\n\t            }\n\t            else {\n\t                var result_1 = {};\n\t                _.each(value, function (subValue, key) {\n\t                    result_1[key] = _this.toJson(subValue, depth + 1, done.concat([value]));\n\t                });\n\t                result_1['ref'];\n\t                return result_1;\n\t            }\n\t        }\n\t        return value;\n\t    };\n\t    Debug.prototype.toJsonRef = function (value, stringValue) {\n\t        stringValue = new String(stringValue || value);\n\t        stringValue['ref'] = value;\n\t        return stringValue;\n\t    };\n\t    Debug.prototype.componentToJson = function (value, depth) {\n\t        if (depth === void 0) { depth = 0; }\n\t        var options = _.keys(value['options']);\n\t        if (options.length > 0) {\n\t            return this.toJson(value['options'], depth);\n\t        }\n\t        else {\n\t            return this.toJsonRef(value['options'], new String('No options'));\n\t        }\n\t    };\n\t    Debug.prototype.htmlToJson = function (value) {\n\t        if (value == null) {\n\t            return undefined;\n\t        }\n\t        return {\n\t            tagName: value.tagName,\n\t            id: value.id,\n\t            classList: value.className.split(/\\s+/)\n\t        };\n\t    };\n\t    Debug.prototype.templateToJson = function (template) {\n\t        if (template == null) {\n\t            return null;\n\t        }\n\t        var element = template['element'];\n\t        var templateObject = {\n\t            type: template.getType(),\n\t        };\n\t        if (element != null) {\n\t            templateObject.id = element.id;\n\t            templateObject.condition = element.attributes['data-condition'];\n\t            templateObject.content = element.innerText;\n\t        }\n\t        return templateObject;\n\t    };\n\t    Debug.prototype.selectElementText = function (el) {\n\t        if (window.getSelection && document.createRange) {\n\t            var selection = window.getSelection();\n\t            var range = document.createRange();\n\t            range.selectNodeContents(el);\n\t            selection.removeAllRanges();\n\t            selection.addRange(range);\n\t        }\n\t        else if ('createTextRange' in document.body) {\n\t            var textRange = document.body['createTextRange']();\n\t            textRange.moveToElementText(el);\n\t            textRange.select();\n\t        }\n\t    };\n\t    Debug.prototype.highlightSearch = function (element, search) {\n\t        if (element != null) {\n\t            var match = element.innerText.split(new RegExp('(?=' + StringUtils_1.StringUtils.regexEncode(search) + ')', 'gi'));\n\t            element.innerHTML = '';\n\t            match.forEach(function (value) {\n\t                var regex = new RegExp('(' + StringUtils_1.StringUtils.regexEncode(search) + ')', 'i');\n\t                var group = value.match(regex);\n\t                var span;\n\t                if (group != null) {\n\t                    span = Dom_1.Dom.createElement('span', { className: 'coveo-debug-highlight' });\n\t                    span.appendChild(document.createTextNode(group[1]));\n\t                    element.appendChild(span);\n\t                    span = Dom_1.Dom.createElement('span');\n\t                    span.appendChild(document.createTextNode(value.substr(group[1].length)));\n\t                    element.appendChild(span);\n\t                }\n\t                else {\n\t                    span = Dom_1.Dom.createElement('span');\n\t                    span.appendChild(document.createTextNode(value));\n\t                    element.appendChild(span);\n\t                }\n\t            });\n\t        }\n\t    };\n\t    Debug.prototype.removeHighlightSearch = function (element) {\n\t        if (element != null) {\n\t            element.innerHTML = element.innerText;\n\t        }\n\t    };\n\t    Debug.prototype.debugInfo = function () {\n\t        return null;\n\t    };\n\t    Debug.ID = 'Debug';\n\t    Debug.options = {\n\t        enableDebug: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false })\n\t    };\n\t    Debug.customOrder = ['error', 'queryDuration', 'result', 'fields', 'rankingInfo', 'template', 'query', 'results', 'state'];\n\t    Debug.durationKeys = ['indexDuration', 'proxyDuration', 'clientDuration', 'duration'];\n\t    Debug.maxDepth = 10;\n\t    return Debug;\n\t}(RootComponent_1.RootComponent));\n\texports.Debug = Debug;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 106 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;!function(){\"use strict\";function t(e,o){function i(t,e){return function(){return t.apply(e,arguments)}}var r;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=e,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!t.notNeeded(e)){for(var a=[\"onMouse\",\"onClick\",\"onTouchStart\",\"onTouchMove\",\"onTouchEnd\",\"onTouchCancel\"],c=this,s=0,u=a.length;u>s;s++)c[a[s]]=i(c[a[s]],c);n&&(e.addEventListener(\"mouseover\",this.onMouse,!0),e.addEventListener(\"mousedown\",this.onMouse,!0),e.addEventListener(\"mouseup\",this.onMouse,!0)),e.addEventListener(\"click\",this.onClick,!0),e.addEventListener(\"touchstart\",this.onTouchStart,!1),e.addEventListener(\"touchmove\",this.onTouchMove,!1),e.addEventListener(\"touchend\",this.onTouchEnd,!1),e.addEventListener(\"touchcancel\",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,o){var i=Node.prototype.removeEventListener;\"click\"===t?i.call(e,t,n.hijacked||n,o):i.call(e,t,n,o)},e.addEventListener=function(t,n,o){var i=Node.prototype.addEventListener;\"click\"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),o):i.call(e,t,n,o)}),\"function\"==typeof e.onclick&&(r=e.onclick,e.addEventListener(\"click\",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf(\"Windows Phone\")>=0,n=navigator.userAgent.indexOf(\"Android\")>0&&!e,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,i=o&&/OS 4_\\d(_\\d)?/.test(navigator.userAgent),r=o&&/OS [6-7]_\\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf(\"BB10\")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case\"button\":case\"select\":case\"textarea\":if(t.disabled)return!0;break;case\"input\":if(o&&\"file\"===t.type||t.disabled)return!0;break;case\"label\":case\"iframe\":case\"video\":return!0}return/\\bneedsclick\\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case\"textarea\":return!0;case\"select\":return!n;case\"input\":switch(t.type){case\"button\":case\"checkbox\":case\"file\":case\"image\":case\"radio\":case\"submit\":return!1}return!t.disabled&&!t.readOnly;default:return/\\bneedsfocus\\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,o;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),o=e.changedTouches[0],n=document.createEvent(\"MouseEvents\"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&\"select\"===t.tagName.toLowerCase()?\"mousedown\":\"click\"},t.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf(\"date\")&&\"time\"!==t.type&&\"month\"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],o){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector(\"button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea\")},t.prototype.onTouchEnd=function(t){var e,a,c,s,u,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(u=t.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=l.tagName.toLowerCase(),\"label\"===c){if(e=this.findControl(l)){if(this.focus(l),n)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-a>100||o&&window.top!==window&&\"input\"===c?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),o&&\"select\"===c||(this.targetElement=null,t.preventDefault()),!1);return o&&!i&&(s=l.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):\"submit\"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener(\"mouseover\",this.onMouse,!0),t.removeEventListener(\"mousedown\",this.onMouse,!0),t.removeEventListener(\"mouseup\",this.onMouse,!0)),t.removeEventListener(\"click\",this.onClick,!0),t.removeEventListener(\"touchstart\",this.onTouchStart,!1),t.removeEventListener(\"touchmove\",this.onTouchMove,!1),t.removeEventListener(\"touchend\",this.onTouchEnd,!1),t.removeEventListener(\"touchcancel\",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,o,i,r;if(\"undefined\"==typeof window.ontouchstart)return!0;if(o=+(/Chrome\\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector(\"meta[name=viewport]\")){if(-1!==e.content.indexOf(\"user-scalable=no\"))return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(i=navigator.userAgent.match(/Version\\/([0-9]*)\\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector(\"meta[name=viewport]\")))){if(-1!==e.content.indexOf(\"user-scalable=no\"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return\"none\"===t.style.msTouchAction||\"manipulation\"===t.style.touchAction?!0:(r=+(/Firefox\\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(e=document.querySelector(\"meta[name=viewport]\"),e&&(-1!==e.content.indexOf(\"user-scalable=no\")||document.documentElement.scrollWidth<=window.outerWidth))?!0:\"none\"===t.style.touchAction||\"manipulation\"===t.style.touchAction?!0:!1)},t.attach=function(e,n){return new t(e,n)}, true?!(__WEBPACK_AMD_DEFINE_RESULT__ = function(){return t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):\"undefined\"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}();\n\n/***/ },\n/* 107 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t(function(e){var t=function(){\"use strict\";var e=\"s\",n=2011,r=function(e){var t=-e.getTimezoneOffset();return t!==null?t:0},i=function(e,t,n){var r=new Date;return e!==undefined&&r.setFullYear(e),r.setDate(n),r.setMonth(t),r},s=function(e){return r(i(e,0,2))},o=function(e){return r(i(e,5,2))},u=function(e){var t=e.getMonth()>7?o(e.getFullYear()):s(e.getFullYear()),n=r(e);return t-n!==0},a=function(){var t=s(n),r=o(n),i=t-r;return i<0?t+\",1\":i>0?r+\",1,\"+e:t+\",0\"},f=function(){var e=a();return new t.TimeZone(t.olson.timezones[e])},l=function(e){var t=new Date(2010,6,15,1,0,0,0),n={\"America/Denver\":new Date(2011,2,13,3,0,0,0),\"America/Mazatlan\":new Date(2011,3,3,3,0,0,0),\"America/Chicago\":new Date(2011,2,13,3,0,0,0),\"America/Mexico_City\":new Date(2011,3,3,3,0,0,0),\"America/Asuncion\":new Date(2012,9,7,3,0,0,0),\"America/Santiago\":new Date(2012,9,3,3,0,0,0),\"America/Campo_Grande\":new Date(2012,9,21,5,0,0,0),\"America/Montevideo\":new Date(2011,9,2,3,0,0,0),\"America/Sao_Paulo\":new Date(2011,9,16,5,0,0,0),\"America/Los_Angeles\":new Date(2011,2,13,8,0,0,0),\"America/Santa_Isabel\":new Date(2011,3,5,8,0,0,0),\"America/Havana\":new Date(2012,2,10,2,0,0,0),\"America/New_York\":new Date(2012,2,10,7,0,0,0),\"Asia/Beirut\":new Date(2011,2,27,1,0,0,0),\"Europe/Helsinki\":new Date(2011,2,27,4,0,0,0),\"Europe/Istanbul\":new Date(2011,2,28,5,0,0,0),\"Asia/Damascus\":new Date(2011,3,1,2,0,0,0),\"Asia/Jerusalem\":new Date(2011,3,1,6,0,0,0),\"Asia/Gaza\":new Date(2009,2,28,0,30,0,0),\"Africa/Cairo\":new Date(2009,3,25,0,30,0,0),\"Pacific/Auckland\":new Date(2011,8,26,7,0,0,0),\"Pacific/Fiji\":new Date(2010,10,29,23,0,0,0),\"America/Halifax\":new Date(2011,2,13,6,0,0,0),\"America/Goose_Bay\":new Date(2011,2,13,2,1,0,0),\"America/Miquelon\":new Date(2011,2,13,5,0,0,0),\"America/Godthab\":new Date(2011,2,27,1,0,0,0),\"Europe/Moscow\":t,\"Asia/Yekaterinburg\":t,\"Asia/Omsk\":t,\"Asia/Krasnoyarsk\":t,\"Asia/Irkutsk\":t,\"Asia/Yakutsk\":t,\"Asia/Vladivostok\":t,\"Asia/Kamchatka\":t,\"Europe/Minsk\":t,\"Pacific/Apia\":new Date(2010,10,1,1,0,0,0),\"Australia/Perth\":new Date(2008,10,1,1,0,0,0)};return n[e]};return{determine:f,date_is_dst:u,dst_start_for:l}}();t.TimeZone=function(e){\"use strict\";var n={\"America/Denver\":[\"America/Denver\",\"America/Mazatlan\"],\"America/Chicago\":[\"America/Chicago\",\"America/Mexico_City\"],\"America/Santiago\":[\"America/Santiago\",\"America/Asuncion\",\"America/Campo_Grande\"],\"America/Montevideo\":[\"America/Montevideo\",\"America/Sao_Paulo\"],\"Asia/Beirut\":[\"Asia/Beirut\",\"Europe/Helsinki\",\"Europe/Istanbul\",\"Asia/Damascus\",\"Asia/Jerusalem\",\"Asia/Gaza\"],\"Pacific/Auckland\":[\"Pacific/Auckland\",\"Pacific/Fiji\"],\"America/Los_Angeles\":[\"America/Los_Angeles\",\"America/Santa_Isabel\"],\"America/New_York\":[\"America/Havana\",\"America/New_York\"],\"America/Halifax\":[\"America/Goose_Bay\",\"America/Halifax\"],\"America/Godthab\":[\"America/Miquelon\",\"America/Godthab\"],\"Asia/Dubai\":[\"Europe/Moscow\"],\"Asia/Dhaka\":[\"Asia/Yekaterinburg\"],\"Asia/Jakarta\":[\"Asia/Omsk\"],\"Asia/Shanghai\":[\"Asia/Krasnoyarsk\",\"Australia/Perth\"],\"Asia/Tokyo\":[\"Asia/Irkutsk\"],\"Australia/Brisbane\":[\"Asia/Yakutsk\"],\"Pacific/Noumea\":[\"Asia/Vladivostok\"],\"Pacific/Tarawa\":[\"Asia/Kamchatka\"],\"Pacific/Tongatapu\":[\"Pacific/Apia\"],\"Africa/Johannesburg\":[\"Asia/Gaza\",\"Africa/Cairo\"],\"Asia/Baghdad\":[\"Europe/Minsk\"]},r=e,i=function(){var e=n[r],i=e.length,s=0,o=e[0];for(;s<i;s+=1){o=e[s];if(t.date_is_dst(t.dst_start_for(o))){r=o;return}}},s=function(){return typeof n[r]!=\"undefined\"};return s()&&i(),{name:function(){return r}}},t.olson={},t.olson.timezones={\"-720,0\":\"Pacific/Majuro\",\"-660,0\":\"Pacific/Pago_Pago\",\"-600,1\":\"America/Adak\",\"-600,0\":\"Pacific/Honolulu\",\"-570,0\":\"Pacific/Marquesas\",\"-540,0\":\"Pacific/Gambier\",\"-540,1\":\"America/Anchorage\",\"-480,1\":\"America/Los_Angeles\",\"-480,0\":\"Pacific/Pitcairn\",\"-420,0\":\"America/Phoenix\",\"-420,1\":\"America/Denver\",\"-360,0\":\"America/Guatemala\",\"-360,1\":\"America/Chicago\",\"-360,1,s\":\"Pacific/Easter\",\"-300,0\":\"America/Bogota\",\"-300,1\":\"America/New_York\",\"-270,0\":\"America/Caracas\",\"-240,1\":\"America/Halifax\",\"-240,0\":\"America/Santo_Domingo\",\"-240,1,s\":\"America/Santiago\",\"-210,1\":\"America/St_Johns\",\"-180,1\":\"America/Godthab\",\"-180,0\":\"America/Argentina/Buenos_Aires\",\"-180,1,s\":\"America/Montevideo\",\"-120,0\":\"America/Noronha\",\"-120,1\":\"America/Noronha\",\"-60,1\":\"Atlantic/Azores\",\"-60,0\":\"Atlantic/Cape_Verde\",\"0,0\":\"UTC\",\"0,1\":\"Europe/London\",\"60,1\":\"Europe/Berlin\",\"60,0\":\"Africa/Lagos\",\"60,1,s\":\"Africa/Windhoek\",\"120,1\":\"Asia/Beirut\",\"120,0\":\"Africa/Johannesburg\",\"180,0\":\"Asia/Baghdad\",\"180,1\":\"Europe/Moscow\",\"210,1\":\"Asia/Tehran\",\"240,0\":\"Asia/Dubai\",\"240,1\":\"Asia/Baku\",\"270,0\":\"Asia/Kabul\",\"300,1\":\"Asia/Yekaterinburg\",\"300,0\":\"Asia/Karachi\",\"330,0\":\"Asia/Kolkata\",\"345,0\":\"Asia/Kathmandu\",\"360,0\":\"Asia/Dhaka\",\"360,1\":\"Asia/Omsk\",\"390,0\":\"Asia/Rangoon\",\"420,1\":\"Asia/Krasnoyarsk\",\"420,0\":\"Asia/Jakarta\",\"480,0\":\"Asia/Shanghai\",\"480,1\":\"Asia/Irkutsk\",\"525,0\":\"Australia/Eucla\",\"525,1,s\":\"Australia/Eucla\",\"540,1\":\"Asia/Yakutsk\",\"540,0\":\"Asia/Tokyo\",\"570,0\":\"Australia/Darwin\",\"570,1,s\":\"Australia/Adelaide\",\"600,0\":\"Australia/Brisbane\",\"600,1\":\"Asia/Vladivostok\",\"600,1,s\":\"Australia/Sydney\",\"630,1,s\":\"Australia/Lord_Howe\",\"660,1\":\"Asia/Kamchatka\",\"660,0\":\"Pacific/Noumea\",\"690,0\":\"Pacific/Norfolk\",\"720,1,s\":\"Pacific/Auckland\",\"720,0\":\"Pacific/Tarawa\",\"765,1,s\":\"Pacific/Chatham\",\"780,0\":\"Pacific/Tongatapu\",\"780,1,s\":\"Pacific/Apia\",\"840,0\":\"Pacific/Kiritimati\"}, true?exports.jstz=t:e.jstz=t})(this);\n\n/***/ },\n/* 108 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Logger_1 = __webpack_require__(15);\n\tvar DeviceUtils_1 = __webpack_require__(19);\n\tvar SentryLogger = (function () {\n\t    function SentryLogger(queryController, windoh) {\n\t        if (windoh === void 0) { windoh = window; }\n\t        this.queryController = queryController;\n\t        this.windoh = windoh;\n\t        this.logger = new Logger_1.Logger(this);\n\t        this.bindErrorHandler();\n\t    }\n\t    SentryLogger.prototype.bindErrorHandler = function () {\n\t        var _this = this;\n\t        // take care of not overriding any existing onerror handler that might be already present in the page.\n\t        var oldHandler = this.windoh.onerror;\n\t        if (_.isFunction(oldHandler)) {\n\t            this.windoh.onerror = function () {\n\t                var args = [];\n\t                for (var _i = 0; _i < arguments.length; _i++) {\n\t                    args[_i - 0] = arguments[_i];\n\t                }\n\t                oldHandler.apply(oldHandler, args);\n\t                _this.handleError.apply(_this, args);\n\t            };\n\t        }\n\t        else {\n\t            this.windoh.onerror = this.handleError.bind(this);\n\t        }\n\t    };\n\t    SentryLogger.prototype.handleError = function (message, filename, lineno, colno, error) {\n\t        // try not to log irrelevant errors ...\n\t        if (!filename.toLowerCase().match(/coveo/) || this.windoh.location.host.toLowerCase().match(/localhost/)) {\n\t            return;\n\t        }\n\t        var errorInfo = {\n\t            message: message,\n\t            filename: filename,\n\t            line: lineno,\n\t            column: colno,\n\t            error: error.toString(),\n\t            errorStack: error['stack'],\n\t            device: DeviceUtils_1.DeviceUtils.getDeviceName()\n\t        };\n\t        var sentryLog = {\n\t            level: 'DEBUG',\n\t            title: this.windoh.location.href,\n\t            message: JSON.stringify(errorInfo)\n\t        };\n\t        this.queryController.getEndpoint().logError(sentryLog);\n\t    };\n\t    return SentryLogger;\n\t}());\n\texports.SentryLogger = SentryLogger;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 109 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\texports.analyticsActionCauseList = {\n\t    interfaceLoad: {\n\t        name: 'interfaceLoad',\n\t        type: 'interface'\n\t    },\n\t    interfaceChange: {\n\t        name: 'interfaceChange',\n\t        type: 'interface',\n\t        metaMap: { interfaceChangeTo: 1 }\n\t    },\n\t    contextRemove: {\n\t        name: 'contextRemove',\n\t        type: 'misc',\n\t        metaMap: { contextName: 1 }\n\t    },\n\t    didyoumeanAutomatic: {\n\t        name: 'didyoumeanAutomatic',\n\t        type: 'misc'\n\t    },\n\t    didyoumeanClick: {\n\t        name: 'didyoumeanClick',\n\t        type: 'misc'\n\t    },\n\t    resultsSort: {\n\t        name: 'resultsSort',\n\t        type: 'misc',\n\t        metaMap: { resultsSortBy: 1 }\n\t    },\n\t    searchboxSubmit: {\n\t        name: 'searchboxSubmit',\n\t        type: 'search box'\n\t    },\n\t    searchboxClear: {\n\t        name: 'searchboxClear',\n\t        type: 'search box'\n\t    },\n\t    searchboxAsYouType: {\n\t        name: 'searchboxAsYouType',\n\t        type: 'search box'\n\t    },\n\t    breadcrumbFacet: {\n\t        name: 'breadcrumbFacet',\n\t        type: 'breadcrumb',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    breadcrumbResetAll: {\n\t        name: 'breadcrumbResetAll',\n\t        type: 'breadcrumb',\n\t    },\n\t    documentTag: {\n\t        name: 'documentTag',\n\t        type: 'document',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    documentField: {\n\t        name: 'documentField',\n\t        type: 'document',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    documentQuickview: {\n\t        name: 'documentQuickview',\n\t        type: 'document',\n\t        metaMap: { documentTitle: 1, documentURL: 2 }\n\t    },\n\t    documentOpen: {\n\t        name: 'documentOpen',\n\t        type: 'document',\n\t        metaMap: { documentTitle: 1, documentURL: 2 }\n\t    },\n\t    omniboxFacetSelect: {\n\t        name: 'omniboxFacetSelect',\n\t        type: 'omnibox',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    omniboxFacetExclude: {\n\t        name: 'omniboxFacetExclude',\n\t        type: 'omnibox',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    omniboxFacetDeselect: {\n\t        name: 'omniboxFacetDeselect',\n\t        type: 'omnibox',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    omniboxFacetUnexclude: {\n\t        name: 'omniboxFacetUnexclude',\n\t        type: 'omnibox',\n\t        metaMap: { faceId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    omniboxAnalytics: {\n\t        name: 'omniboxAnalytics',\n\t        type: 'omnibox',\n\t        metaMap: {\n\t            partialQuery: 1,\n\t            suggestionRanking: 2,\n\t            partialQueries: 3,\n\t            suggestions: 4\n\t        }\n\t    },\n\t    omniboxField: {\n\t        name: 'omniboxField',\n\t        type: 'omnibox'\n\t    },\n\t    facetClearAll: {\n\t        name: 'facetClearAll',\n\t        type: 'facet',\n\t        metaMap: { facetId: 1 }\n\t    },\n\t    facetSearch: {\n\t        name: 'facetSearch',\n\t        type: 'facet',\n\t        metaMap: { facetId: 1 }\n\t    },\n\t    facetToggle: {\n\t        name: 'facetToggle',\n\t        type: 'facet',\n\t        metaMap: { facetId: 1, facetOperatorBefore: 2, facetOperatorAfter: 3 }\n\t    },\n\t    facetRangeSlider: {\n\t        name: 'facetRangeSlider',\n\t        type: 'facet',\n\t        metaMap: { facetId: 1, facetRangeStart: 2, facetRangeEnd: 3 }\n\t    },\n\t    facetRangeGraph: {\n\t        name: 'facetRangeGraph',\n\t        type: 'facet',\n\t        metaMap: { facetId: 1, facetRangeStart: 2, facetRangeEnd: 3 }\n\t    },\n\t    facetSelect: {\n\t        name: 'facetSelect',\n\t        type: 'facet',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    facetSelectAll: {\n\t        name: 'facetSelectAll',\n\t        type: 'facet',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    facetDeselect: {\n\t        name: 'facetDeselect',\n\t        type: 'facet',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    facetExclude: {\n\t        name: 'facetExclude',\n\t        type: 'facet',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    facetUnexclude: {\n\t        name: 'facetUnexclude',\n\t        type: 'facet',\n\t        metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n\t    },\n\t    errorBack: {\n\t        name: 'errorBack',\n\t        type: 'errors'\n\t    },\n\t    errorClearQuery: {\n\t        name: 'errorClearQuery',\n\t        type: 'errors'\n\t    },\n\t    errorRetry: {\n\t        name: 'errorRetry',\n\t        type: 'errors'\n\t    },\n\t    noResultsBack: {\n\t        name: 'noResultsBack',\n\t        type: 'noResults'\n\t    },\n\t    expandToFullUI: {\n\t        name: 'expandToFullUI',\n\t        type: 'interface'\n\t    },\n\t    caseCreationInputChange: {\n\t        name: 'inputChange',\n\t        type: 'caseCreation'\n\t    },\n\t    caseCreationSubmitButton: {\n\t        name: 'submitButton',\n\t        type: 'caseCreation'\n\t    },\n\t    caseCreationCancelButton: {\n\t        name: 'cancelButton',\n\t        type: 'caseCreation'\n\t    },\n\t    caseCreationUnloadPage: {\n\t        name: 'unloadPage',\n\t        type: 'caseCreation'\n\t    },\n\t    casecontextAdd: {\n\t        name: 'casecontextAdd',\n\t        type: 'casecontext',\n\t        metaMap: { caseID: 5 }\n\t    },\n\t    casecontextRemove: {\n\t        name: 'casecontextRemove',\n\t        type: 'casecontext',\n\t        metaMap: { caseID: 5 }\n\t    },\n\t    preferencesChange: {\n\t        name: 'preferencesChange',\n\t        type: 'preferences',\n\t        metaMap: { preferenceName: 1, preferenceType: 2 }\n\t    },\n\t    getUserHistory: {\n\t        name: 'getUserHistory',\n\t        type: 'userHistory'\n\t    },\n\t    userActionDocumentClick: {\n\t        name: 'userActionDocumentClick',\n\t        type: 'userHistory'\n\t    },\n\t    caseAttach: {\n\t        name: 'caseAttach',\n\t        type: 'case',\n\t        metaMap: { documentTitle: 1, resultUriHash: 3, articleID: 4, caseID: 5 }\n\t    },\n\t    caseDetach: {\n\t        name: 'caseDetach',\n\t        type: 'case',\n\t        metaMap: { documentTitle: 1, resultUriHash: 3, articleID: 4, caseID: 5 }\n\t    },\n\t    customfiltersChange: {\n\t        name: 'customfiltersChange',\n\t        type: 'customfilters',\n\t        metaMap: { customFilterName: 1, customFilterType: 2, customFilterExpression: 3 }\n\t    },\n\t    pagerNumber: {\n\t        name: 'pagerNumber',\n\t        type: 'getMoreResults',\n\t        metaMap: { 'pagerNumber': 1 }\n\t    },\n\t    pagerNext: {\n\t        name: 'pagerNext',\n\t        type: 'getMoreResults',\n\t        metaMap: { 'pagerNumber': 1 }\n\t    },\n\t    pagerPrevious: {\n\t        name: 'pagerPrevious',\n\t        type: 'getMoreResults',\n\t        metaMap: { 'pagerNumber': 1 }\n\t    },\n\t    pagerScrolling: {\n\t        name: 'pagerScrolling',\n\t        type: 'getMoreResults'\n\t    },\n\t    pagerResize: {\n\t        name: 'pagerResize',\n\t        type: 'getMoreResults'\n\t    },\n\t    searchFromLink: {\n\t        name: 'searchFromLink',\n\t        type: 'interface'\n\t    },\n\t    triggerNotify: {\n\t        name: 'notify',\n\t        type: 'queryPipelineTriggers'\n\t    },\n\t    triggerExecute: {\n\t        name: 'execute',\n\t        type: 'queryPipelineTriggers'\n\t    },\n\t    triggerQuery: {\n\t        name: 'query',\n\t        type: 'queryPipelineTriggers'\n\t    },\n\t    triggerRedirect: {\n\t        name: 'redirect',\n\t        type: 'queryPipelineTriggers'\n\t    },\n\t    queryError: {\n\t        name: 'query',\n\t        type: 'errors',\n\t        metaMap: { 'query': 1, 'aq': 2, 'cq': 3, 'dq': 4, 'errorType': 5, 'errorMessage': 6 }\n\t    },\n\t    exportToExcel: {\n\t        name: 'exportToExcel',\n\t        type: 'misc'\n\t    },\n\t    recommendation: {\n\t        name: 'recommendation',\n\t        type: 'recommendation'\n\t    },\n\t    recommendationInterfaceLoad: {\n\t        name: 'recommendationInterfaceLoad',\n\t        type: 'recommendation'\n\t    },\n\t    recommendationOpen: {\n\t        name: 'recommendationOpen',\n\t        type: 'recommendation'\n\t    },\n\t    advancedSearch: {\n\t        name: 'advancedSearch',\n\t        type: 'advancedSearch'\n\t    }\n\t};\n\n\n/***/ },\n/* 110 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar SearchInterface_1 = __webpack_require__(96);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar OmniboxEvents_1 = __webpack_require__(44);\n\tvar ResultListEvents_1 = __webpack_require__(47);\n\tvar SettingsEvents_1 = __webpack_require__(49);\n\tvar PreferencesPanelEvents_1 = __webpack_require__(45);\n\tvar AnalyticsEvents_1 = __webpack_require__(39);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar BreadcrumbEvents_1 = __webpack_require__(40);\n\tvar QuickviewEvents_1 = __webpack_require__(111);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar Model_1 = __webpack_require__(86);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Dom_1 = __webpack_require__(56);\n\t/**\n\t * This component is a {@link SearchInterface} that will display recommendations based on the user history.\n\t * To get recommendations, the page view script must also be included in the page. View: https://github.com/coveo/coveo.analytics.js\n\t * This component listens when the main search interface generates a query and it generates another to get the recommendations at the same time.\n\t *\n\t * This component can be included in another SearchInterface, but you need to initialize the recommendation component with Coveo('initRecommendation'), before\n\t * the parent SearchInterface.\n\t */\n\tvar Recommendation = (function (_super) {\n\t    __extends(Recommendation, _super);\n\t    function Recommendation(element, options, analyticsOptions, _window) {\n\t        var _this = this;\n\t        if (options === void 0) { options = {}; }\n\t        if (analyticsOptions === void 0) { analyticsOptions = {}; }\n\t        if (_window === void 0) { _window = window; }\n\t        _super.call(this, element, ComponentOptions_1.ComponentOptions.initComponentOptions(element, Recommendation, options), analyticsOptions, _window);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.analyticsOptions = analyticsOptions;\n\t        if (!this.options.id) {\n\t            this.generateDefaultId();\n\t        }\n\t        if (this.options.mainSearchInterface) {\n\t            this.bindToMainSearchInterface();\n\t        }\n\t        Dom_1.$$(this.element).on(QueryEvents_1.QueryEvents.buildingQuery, function (e, args) { return _this.handleRecommendationBuildingQuery(args); });\n\t        Dom_1.$$(this.element).on(QueryEvents_1.QueryEvents.querySuccess, function (e, args) { return _this.handleRecommendationQuerySuccess(args); });\n\t        Dom_1.$$(this.element).on(QueryEvents_1.QueryEvents.noResults, function (e, args) {\n\t            if (_this.options.hideIfNoResults) {\n\t                _this.hide();\n\t            }\n\t        });\n\t        Dom_1.$$(this.element).on(QueryEvents_1.QueryEvents.queryError, function (e, args) { return _this.hide(); });\n\t        // This is done to allow the component to be included in another search interface without triggering the parent events.\n\t        this.preventEventPropagation();\n\t    }\n\t    Recommendation.prototype.getId = function () {\n\t        return this.options.id;\n\t    };\n\t    Recommendation.prototype.hide = function () {\n\t        this.displayStyle = this.element.style.display;\n\t        Dom_1.$$(this.element).hide();\n\t    };\n\t    Recommendation.prototype.show = function () {\n\t        if (!this.displayStyle) {\n\t            this.displayStyle = this.element.style.display;\n\t        }\n\t        this.element.style.display = this.displayStyle;\n\t    };\n\t    Recommendation.prototype.bindToMainSearchInterface = function () {\n\t        var _this = this;\n\t        Dom_1.$$(this.options.mainSearchInterface).on(QueryEvents_1.QueryEvents.querySuccess, function (e, args) {\n\t            _this.mainInterfaceQuery = args;\n\t            _this.mainQuerySearchUID = args.results.searchUid;\n\t            _this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.recommendation, {});\n\t            _this.queryController.executeQuery();\n\t        });\n\t    };\n\t    Recommendation.prototype.handleRecommendationBuildingQuery = function (data) {\n\t        this.modifyQueryForRecommendation(data);\n\t        this.addRecommendationInfoInQuery(data);\n\t    };\n\t    Recommendation.prototype.handleRecommendationQuerySuccess = function (data) {\n\t        if (this.options.hideIfNoResults) {\n\t            if (data.results.totalCount === 0) {\n\t                this.hide();\n\t            }\n\t            else {\n\t                this.show();\n\t            }\n\t        }\n\t    };\n\t    Recommendation.prototype.modifyQueryForRecommendation = function (data) {\n\t        if (this.mainInterfaceQuery) {\n\t            Utils_1.Utils.copyObjectAttributes(data.queryBuilder, this.mainInterfaceQuery.queryBuilder, this.options.optionsToUse);\n\t        }\n\t    };\n\t    Recommendation.prototype.addRecommendationInfoInQuery = function (data) {\n\t        if (!_.isEmpty(this.options.userContext)) {\n\t            data.queryBuilder.addContext(JSON.parse(this.options.userContext));\n\t        }\n\t        if (this.options.sendActionsHistory) {\n\t            data.queryBuilder.actionsHistory = this.getHistory();\n\t        }\n\t        data.queryBuilder.recommendation = this.options.id;\n\t    };\n\t    Recommendation.prototype.getHistory = function () {\n\t        if (typeof coveoanalytics != 'undefined') {\n\t            var store = new coveoanalytics.history.HistoryStore();\n\t            return JSON.stringify(store.getHistory());\n\t        }\n\t        else {\n\t            return '[]';\n\t        }\n\t    };\n\t    Recommendation.prototype.preventEventPropagation = function () {\n\t        this.preventEventPropagationOn(QueryEvents_1.QueryEvents);\n\t        this.preventEventPropagationOn(OmniboxEvents_1.OmniboxEvents);\n\t        this.preventEventPropagationOn(ResultListEvents_1.ResultListEvents);\n\t        this.preventEventPropagationOn(SettingsEvents_1.SettingsEvents);\n\t        this.preventEventPropagationOn(PreferencesPanelEvents_1.PreferencesPanelEvents);\n\t        this.preventEventPropagationOn(AnalyticsEvents_1.AnalyticsEvents);\n\t        this.preventEventPropagationOn(BreadcrumbEvents_1.BreadcrumbEvents);\n\t        this.preventEventPropagationOn(QuickviewEvents_1.QuickviewEvents);\n\t        this.preventEventPropagationOn(this.getAllModelEvents());\n\t    };\n\t    Recommendation.prototype.preventEventPropagationOn = function (eventType, eventName) {\n\t        if (eventName === void 0) { eventName = function (event) { return event; }; }\n\t        for (var event_1 in eventType) {\n\t            Dom_1.$$(this.root).on(eventName(event_1), function (e) { return e.stopPropagation(); });\n\t        }\n\t    };\n\t    Recommendation.prototype.getAllModelEvents = function () {\n\t        var _this = this;\n\t        var events = {};\n\t        _.each(_.values(Model_1.Model.eventTypes), function (event) {\n\t            _.each(_.values(QueryStateModel_1.QUERY_STATE_ATTRIBUTES), function (attribute) {\n\t                var eventName = _this.getBindings().queryStateModel.getEventName(event + attribute);\n\t                events[eventName] = eventName;\n\t            });\n\t        });\n\t        return events;\n\t    };\n\t    Recommendation.prototype.generateDefaultId = function () {\n\t        var id = 'Recommendation';\n\t        if (Recommendation.NEXT_ID !== 1) {\n\t            this.logger.warn('Generating another recommendation default id', 'Consider configuring a human friendly / meaningful id for this interface');\n\t            id = id + '_' + Recommendation.NEXT_ID;\n\t        }\n\t        Recommendation.NEXT_ID++;\n\t        this.options.id = id;\n\t    };\n\t    Recommendation.ID = 'Recommendation';\n\t    Recommendation.NEXT_ID = 1;\n\t    /**\n\t     * The options for the recommendation component\n\t     * @componentOptions\n\t     */\n\t    Recommendation.options = {\n\t        /**\n\t         * Specifies the main {@link SearchInterface} to listen to.\n\t         */\n\t        mainSearchInterface: ComponentOptions_1.ComponentOptions.buildSelectorOption(),\n\t        /**\n\t         * Specifies the user context to send to Coveo analytics.\n\t         * It will be sent with the query alongside the user history to get the recommendations.\n\t         */\n\t        userContext: ComponentOptions_1.ComponentOptions.buildJsonOption(),\n\t        /**\n\t         * Specifies the id of the interface.\n\t         * It is used by the analytics to know which recommendation interface was selected.\n\t         * The default value is \"Recommendation\" for the first one and \"Recommendation_{number}\" where {number} depends on the number of recommendation interface with default ids in the page for the others.\n\t         */\n\t        id: ComponentOptions_1.ComponentOptions.buildStringOption(),\n\t        /**\n\t         * Specifies which options from the main {@link QueryBuilder} to use in the triggered query.\n\t         * Ex: <code data-options-to-use=\"expression, advancedExpression\"></code> would add the expression and the advanced expression parts from the main query in the triggered query.\n\t         * The default value is undefined.\n\t         */\n\t        optionsToUse: ComponentOptions_1.ComponentOptions.buildListOption({ defaultValue: ['expression'] }),\n\t        /**\n\t         * Specifies whether or not to send the actions history along with the triggered query.\n\t         * Disabling this option means this component won't be able to get Reveal recommendations.\n\t         * However, it could be useful to display side results in a search page.\n\t         * The default value is true.\n\t         */\n\t        sendActionsHistory: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        /**\n\t         * Hides the component if there a no results / recommendations.\n\t         * The default value is false.\n\t         */\n\t        hideIfNoResults: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true })\n\t    };\n\t    return Recommendation;\n\t}(SearchInterface_1.SearchInterface));\n\texports.Recommendation = Recommendation;\n\t// We do not register the Recommendation component since it is done with .coveo('initRecommendation')\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 111 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar QuickviewEvents = (function () {\n\t    function QuickviewEvents() {\n\t    }\n\t    QuickviewEvents.quickviewLoaded = 'quickviewLoaded';\n\t    QuickviewEvents.openQuickview = 'openQuickview';\n\t    return QuickviewEvents;\n\t}());\n\texports.QuickviewEvents = QuickviewEvents;\n\n\n/***/ },\n/* 112 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Component_1 = __webpack_require__(95);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar AnalyticsEndpoint_1 = __webpack_require__(35);\n\tvar SearchEndpoint_1 = __webpack_require__(11);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar ComponentOptionsModel_1 = __webpack_require__(90);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar Model_1 = __webpack_require__(86);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar NoopAnalyticsClient_1 = __webpack_require__(104);\n\tvar LiveAnalyticsClient_1 = __webpack_require__(113);\n\tvar MultiAnalyticsClient_1 = __webpack_require__(117);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar SearchInterface_1 = __webpack_require__(96);\n\tvar Recommendation_1 = __webpack_require__(110);\n\tvar RecommendationAnalyticsClient_1 = __webpack_require__(118);\n\t/**\n\t * This component logs all user actions performed in the search interface and sends them to a REST web service exposed through the Coveo Cloud platform.<br/>\n\t * You can use data to evaluate how users are interacting with the search interface, improve relevance and produce analytics dashboards in the Coveo platform.\n\t *\n\t * # Send Custom Events\n\t * In some scenarios, you want to send custom data to the Coveo Cloud analytics (see [Coveo Cloud Usage Analytics](http://www.coveo.com/go?dest=cloudhelp&lcid=9&context=89)). The Coveo JavaScript Search Framework offers helpers to communicate with the Coveo Analytics REST API, so you do not have to write code to call the API directly.\n\t *\n\t * 1. First, you need to craft your custom event cause and meta.<br/>**NB: The event names must be unique.**\n\t * ```\n\t *   // customEventType allows to regroup similar event types together when doing reporting (e.g., search box).\n\t *   var customEventCause = {name: 'customEventName', type:'customEventType'};\n\t *   var metadata = {key1: \"value1\", key2:\"value2\"};\n\t * ```\n\t *\n\t * 2. Send your custom event.\n\t * ```\n\t *   Coveo.logCustomEvent(document.querySelector('#search'), customEventCause, metadata);\n\t *      // OR (using the jquery extension)\n\t *   $('#search').coveo('logCustomEvent', customEventCause, metadata);\n\t * ```\n\t *\n\t * 3. Send your custom search event<br/>**NB: If you want to log a `searchEvent`, be sure to always call the helper before you call `executeQuery`.**\n\t * ```\n\t * function myCustomButtonWasClicked() {\n\t *      Coveo.logSearchEvent(document.querySelector('#search'), customEventCause, metadata);\n\t *      Coveo.executeQuery(document.querySelector('#search'));\n\t *      // OR (using the jquery extension)\n\t *      $('#search').coveo('logSearchEvent', customEventCause, metadata);\n\t *      $('#search').coveo('executeQuery');\n\t * }\n\t * ```\n\t *\n\t * 4. Send a custom `searchAsYouType` event<br/>**NB: If you want to log a `searchAsYouTypeEvent`, be sure to always call the helper before you call `executeQuery`.**\n\t * ```\n\t * function myCustomButtonWasClicked() {\n\t *      Coveo.logSearchAsYouTypeEvent(document.querySelector('#search'), customEventCause, metadata);\n\t *      Coveo.executeQuery(document.querySelector('#search'));\n\t *      // OR (using the jquery extension)\n\t *      $('#search').coveo('logSearchAsYouTypeEvent', customEventCause, metadata);\n\t *      $('#search').coveo('executeQuery');\n\t * }\n\t * ```\n\t *\n\t * 5. Send a custom click event.\n\t * ```\n\t * Coveo.logClickEvent(document.querySelector('#search'), customEventCause, metadata, result);\n\t * // OR (using the jQuery extension)\n\t * $('#search').coveo('logClickEvent', customEventCause, metadata, result);\n\t * ```\n\t */\n\tvar Analytics = (function (_super) {\n\t    __extends(Analytics, _super);\n\t    /**\n\t     * Create a new Analytics component. Create the {@link IAnalyticsClient}.\n\t     * @param element The HTMLElement on which the component will be instantiated.\n\t     * @param options The options for the Analytics.\n\t     * @param bindings The bindings that the component requires to function normally. If not set, it will automatically resolve them (with slower execution time).\n\t     */\n\t    function Analytics(element, options, bindings) {\n\t        var _this = this;\n\t        if (options === void 0) { options = {}; }\n\t        _super.call(this, element, Analytics.ID, bindings);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.bindings = bindings;\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, Analytics, options);\n\t        this.retrieveInfoFromDefaultSearchEndpoint();\n\t        this.initializeAnalyticsClient();\n\t        Assert_1.Assert.exists(this.client);\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.buildingQuery, function (data) { return _this.handleBuildingQuery(data); });\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.queryError, function (data) { return _this.handleQueryError(data); });\n\t        // Analytics component is a bit special: It can be higher in the dom tree than the search interface\n\t        // Need to resolve down to find the componentOptionsModel if we need to.\n\t        if (!this.componentOptionsModel) {\n\t            var cmpOptionElement = Dom_1.$$(element).find('.' + Component_1.Component.computeCssClassName(ComponentOptionsModel_1.ComponentOptionsModel));\n\t            if (cmpOptionElement) {\n\t                this.componentOptionsModel = cmpOptionElement[Component_1.Component.computeCssClassName(ComponentOptionsModel_1.ComponentOptionsModel)];\n\t            }\n\t        }\n\t        if (this.componentOptionsModel) {\n\t            this.componentOptionsModel.set(ComponentOptionsModel_1.ComponentOptionsModel.attributesEnum.searchHub, this.options.searchHub);\n\t            var event_1 = this.componentOptionsModel.getEventName(Model_1.Model.eventTypes.changeOne + ComponentOptionsModel_1.ComponentOptionsModel.attributesEnum.searchHub);\n\t            this.bind.onRootElement(event_1, function (args) { return _this.handleSearchHubChanged(args); });\n\t        }\n\t    }\n\t    /**\n\t     * Log a search event on the service, using a cause and a meta object.<br/>\n\t     * Note that the event will be sent on the service when a query successfully return, not immediately after calling this method.<br/>\n\t     * Normally, this should be called using the following \"format\": <br/>\n\t     * usageAnalytics.logSearchEvent<SomeMeta>({name : 'foo', type : 'bar'}, <SomeMeta>{'key':'value'});<br/>\n\t     * this.queryController.executeQuery();<br/>\n\t     * This will queue up an analytics search event. Then the query is executed. The search event will be sent to the service when the query is successfully completed.<br/>\n\t     * @param actionCause\n\t     * @param meta Can be an empty object ( {} ).\n\t     */\n\t    Analytics.prototype.logSearchEvent = function (actionCause, meta) {\n\t        this.client.logSearchEvent(actionCause, meta);\n\t    };\n\t    /**\n\t     * Log a search as you type event on the service, using a cause and a meta object.<br/>\n\t     * This is extremely similar to a search event, except that search as you type, by definition, will be frequently called.<br/>\n\t     * The `PendingSearchAsYouTypeEvent` will take care of logging only the \"relevant\" last event: After 5 seconds of no event logged, or after another search event is triggered somewhere else in the interface.<br/>\n\t     * This is to ensure that we do not needlessly log every single partial query, which would make the reporting very confusing.\n\t     * @param actionCause\n\t     * @param meta Can be an empty object ( {} ).\n\t     */\n\t    Analytics.prototype.logSearchAsYouType = function (actionCause, meta) {\n\t        this.client.logSearchAsYouType(actionCause, meta);\n\t    };\n\t    /**\n\t     * Log a custom event on the service. A custom event can be used to create customized report, or to track events which are not queries or document views.\n\t     * @param actionCause\n\t     * @param meta\n\t     * @param element The HTMLElement that was interacted with for this custom event.\n\t     */\n\t    Analytics.prototype.logCustomEvent = function (actionCause, meta, element) {\n\t        if (element === void 0) { element = this.element; }\n\t        this.client.logCustomEvent(actionCause, meta, element);\n\t    };\n\t    /**\n\t     * Log a click event. A click event can be understood as a document view.<br/>\n\t     * eg : Clicking on a result link of opening a quickview.<br/>\n\t     * This event will be logged immediately on the service.\n\t     * @param actionCause\n\t     * @param meta Can be an empty object ( {} ).\n\t     * @param result The result that was clicked.\n\t     * @param element The HTMLElement that was clicked in the interface.\n\t     */\n\t    Analytics.prototype.logClickEvent = function (actionCause, meta, result, element) {\n\t        if (element === void 0) { element = this.element; }\n\t        this.client.logClickEvent(actionCause, meta, result, element);\n\t    };\n\t    Analytics.prototype.initializeAnalyticsEndpoint = function () {\n\t        return new AnalyticsEndpoint_1.AnalyticsEndpoint({\n\t            token: this.options.token,\n\t            serviceUrl: this.options.endpoint,\n\t            organization: this.options.organization\n\t        });\n\t    };\n\t    Analytics.prototype.initializeAnalyticsClient = function () {\n\t        if (Utils_1.Utils.isNonEmptyString(this.options.endpoint)) {\n\t            var endpoint = this.initializeAnalyticsEndpoint();\n\t            var elementToInitializeClient = void 0;\n\t            if (this.root && this.element) {\n\t                if (this.root.contains(this.element)) {\n\t                    elementToInitializeClient = this.root;\n\t                }\n\t                else {\n\t                    elementToInitializeClient = this.element;\n\t                }\n\t            }\n\t            var isRecommendation = Dom_1.$$(this.root).hasClass(Component_1.Component.computeCssClassName(Recommendation_1.Recommendation));\n\t            this.instantiateAnalyticsClient(endpoint, elementToInitializeClient, isRecommendation);\n\t        }\n\t        else {\n\t            this.client = new NoopAnalyticsClient_1.NoopAnalyticsClient();\n\t        }\n\t    };\n\t    Analytics.prototype.instantiateAnalyticsClient = function (endpoint, elementToInitializeClient, isRecommendation) {\n\t        if (isRecommendation) {\n\t            this.client = new RecommendationAnalyticsClient_1.RecommendationAnalyticsClient(endpoint, elementToInitializeClient, this.options.user, this.options.userDisplayName, this.options.anonymous, this.options.splitTestRunName, this.options.splitTestRunVersion, this.options.searchHub, this.options.sendToCloud, this.getBindings());\n\t        }\n\t        else {\n\t            this.client = new LiveAnalyticsClient_1.LiveAnalyticsClient(endpoint, elementToInitializeClient, this.options.user, this.options.userDisplayName, this.options.anonymous, this.options.splitTestRunName, this.options.splitTestRunVersion, this.options.searchHub, this.options.sendToCloud);\n\t        }\n\t    };\n\t    Analytics.prototype.retrieveInfoFromDefaultSearchEndpoint = function () {\n\t        var defaultEndpoint = SearchEndpoint_1.SearchEndpoint.endpoints['default'];\n\t        if (this.options.token == null && defaultEndpoint) {\n\t            this.options.token = defaultEndpoint.options.accessToken;\n\t        }\n\t        if (!this.options.organization && defaultEndpoint) {\n\t            this.options.organization = defaultEndpoint.options.queryStringArguments['workgroup'];\n\t        }\n\t    };\n\t    Analytics.prototype.handleBuildingQuery = function (data) {\n\t        Assert_1.Assert.exists(data);\n\t        data.queryBuilder.searchHub = this.options.searchHub;\n\t    };\n\t    Analytics.prototype.handleSearchHubChanged = function (data) {\n\t        this.options.searchHub = data.value;\n\t    };\n\t    Analytics.prototype.handleQueryError = function (data) {\n\t        Assert_1.Assert.exists(data);\n\t        this.client.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.queryError, {\n\t            query: data.query.q,\n\t            aq: data.query.aq,\n\t            cq: data.query.cq,\n\t            dq: data.query.dq,\n\t            errorType: data.error.type,\n\t            errorMessage: data.error.message\n\t        }, this.element);\n\t    };\n\t    Analytics.create = function (element, options, bindings) {\n\t        var selector = Component_1.Component.computeSelectorForType(Analytics.ID);\n\t        var found = [];\n\t        found = found.concat(Dom_1.$$(element).findAll(selector));\n\t        if (!(Component_1.Component.get(element, SearchInterface_1.SearchInterface) instanceof Recommendation_1.Recommendation)) {\n\t            found = this.ignoreElementsInsideRecommendationInterface(found);\n\t        }\n\t        found.push(Dom_1.$$(element).closest(Component_1.Component.computeCssClassName(Analytics)));\n\t        if (Dom_1.$$(element).is(selector)) {\n\t            found.push(element);\n\t        }\n\t        found = _.compact(found);\n\t        if (found.length == 1) {\n\t            return Analytics.getClient(found[0], options, bindings);\n\t        }\n\t        else if (found.length > 1) {\n\t            return new MultiAnalyticsClient_1.MultiAnalyticsClient(_.map(found, function (el) { return Analytics.getClient(el, options, bindings); }));\n\t        }\n\t        else {\n\t            return new NoopAnalyticsClient_1.NoopAnalyticsClient();\n\t        }\n\t    };\n\t    Analytics.ignoreElementsInsideRecommendationInterface = function (found) {\n\t        return _.filter(found, function (element) {\n\t            return Dom_1.$$(element).closest(Component_1.Component.computeCssClassName(Recommendation_1.Recommendation)) === undefined;\n\t        });\n\t    };\n\t    Analytics.getClient = function (element, options, bindings) {\n\t        // This check if an element is already initialized as an analytics component.\n\t        // If that's the case, return the client on that element.\n\t        // Otherwise, init and return.\n\t        var foundOnElement = Component_1.Component.get(element, Analytics, true);\n\t        if (foundOnElement instanceof Analytics) {\n\t            return foundOnElement.client;\n\t        }\n\t        else {\n\t            return new Analytics(element, options, bindings).client;\n\t        }\n\t    };\n\t    Analytics.ID = 'Analytics';\n\t    // NOTE: The default values for some of those options (`organization`, `endpoint`, `searchHub`) can be\n\t    // overridden by generated code when using hosted search pages.\n\t    /**\n\t     * Options for the component\n\t     * @componentOptions\n\t     */\n\t    Analytics.options = {\n\t        /**\n\t         * Specifies the name of the user for usage analytics logs.\n\t         */\n\t        user: ComponentOptions_1.ComponentOptions.buildStringOption(),\n\t        /**\n\t         * Specifies the name of the user display name for usage analytics logs.\n\t         */\n\t        userDisplayName: ComponentOptions_1.ComponentOptions.buildStringOption(),\n\t        /**\n\t         * Specifies the token used to gain access the analytics endpoint.<br/>\n\t         * This attribute is optional, the component will use the search token by default.\n\t         */\n\t        token: ComponentOptions_1.ComponentOptions.buildStringOption(),\n\t        /**\n\t         * Specifies the URL of the analytics logger for rare cases where it is different from the default usage analytics Coveo Cloud endpoint (https://usageanalytics.coveo.com).\n\t         */\n\t        endpoint: ComponentOptions_1.ComponentOptions.buildStringOption({ defaultValue: AnalyticsEndpoint_1.AnalyticsEndpoint.DEFAULT_ANALYTICS_URI }),\n\t        /**\n\t         * Specifies whether the search user identities are converted in a unique hash in the logged analytics data to prevent analytics reviewers and managers to identify who performs which queries.<br/>\n\t         * When enabled, the Coveo Analytics Platform can still properly identify sessions made by anonymous users, versus ones from users that are authenticated in some way with the site containing the search page.<br/>\n\t         * The default value is `false`.\n\t         */\n\t        anonymous: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * Sets the Search Hub dimension on the search events.<br/>\n\t         * The Search Hub dimension is typically a name that refers to a specific search page. For example, one could use the CommunitySite value to refer to a search page on a company's public community site.<br/>\n\t         * The default value is default.\n\t         */\n\t        searchHub: ComponentOptions_1.ComponentOptions.buildStringOption({ defaultValue: 'default' }),\n\t        /**\n\t         * Specifies the name of the split test run that the search page is a part of.<br/>\n\t         * This dimension can be used to perform A/B testing using different search page layouts and features, inside the Coveo Query pipeline.<br/>\n\t         * By default, this value is not specified and no split test run name is reported to the Coveo Analytics Platform.\n\t         */\n\t        splitTestRunName: ComponentOptions_1.ComponentOptions.buildStringOption(),\n\t        /**\n\t         * Specifies the version name for the page when a split test run is active.<br/>\n\t         * When reporting on A/B testing analytics data, this value specifies the test run version name that has been presented to the user.<br/>\n\t         * By default, this value is not specified.\n\t         */\n\t        splitTestRunVersion: ComponentOptions_1.ComponentOptions.buildStringOption(),\n\t        sendToCloud: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        /**\n\t         * Specifies the organization bound to the access token. This is necessary when using an access token because it can be associated with more than organization.\n\t         * If this parameter is not specified, it will fallback on the organization used for the search endpoint.\n\t         */\n\t        organization: ComponentOptions_1.ComponentOptions.buildStringOption()\n\t    };\n\t    return Analytics;\n\t}(Component_1.Component));\n\texports.Analytics = Analytics;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 113 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar DeviceUtils_1 = __webpack_require__(19);\n\tvar PendingSearchEvent_1 = __webpack_require__(114);\n\tvar PendingSearchAsYouTypeSearchEvent_1 = __webpack_require__(116);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Logger_1 = __webpack_require__(15);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar Defer_1 = __webpack_require__(30);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar AnalyticsEvents_1 = __webpack_require__(39);\n\tvar APIAnalyticsBuilder_1 = __webpack_require__(115);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar Component_1 = __webpack_require__(95);\n\tvar Version_1 = __webpack_require__(10);\n\tvar LiveAnalyticsClient = (function () {\n\t    function LiveAnalyticsClient(endpoint, rootElement, userId, userDisplayName, anonymous, splitTestRunName, splitTestRunVersion, originLevel1, sendToCloud) {\n\t        this.endpoint = endpoint;\n\t        this.rootElement = rootElement;\n\t        this.userId = userId;\n\t        this.userDisplayName = userDisplayName;\n\t        this.anonymous = anonymous;\n\t        this.splitTestRunName = splitTestRunName;\n\t        this.splitTestRunVersion = splitTestRunVersion;\n\t        this.originLevel1 = originLevel1;\n\t        this.sendToCloud = sendToCloud;\n\t        this.isContextual = false;\n\t        this.language = String['locale'];\n\t        this.device = DeviceUtils_1.DeviceUtils.getDeviceName();\n\t        this.mobile = DeviceUtils_1.DeviceUtils.isMobileDevice();\n\t        Assert_1.Assert.exists(endpoint);\n\t        Assert_1.Assert.exists(rootElement);\n\t        Assert_1.Assert.isNonEmptyString(this.language);\n\t        Assert_1.Assert.isNonEmptyString(this.device);\n\t        Assert_1.Assert.isNonEmptyString(this.originLevel1);\n\t        this.logger = new Logger_1.Logger(this);\n\t    }\n\t    LiveAnalyticsClient.prototype.isActivated = function () {\n\t        return true;\n\t    };\n\t    LiveAnalyticsClient.prototype.getCurrentVisitId = function () {\n\t        return this.endpoint.getCurrentVisitId();\n\t    };\n\t    LiveAnalyticsClient.prototype.getCurrentVisitIdPromise = function () {\n\t        return this.endpoint.getCurrentVisitIdPromise();\n\t    };\n\t    LiveAnalyticsClient.prototype.getCurrentEventCause = function () {\n\t        if (this.pendingSearchEvent != null) {\n\t            return this.pendingSearchEvent.getEventCause();\n\t        }\n\t        if (this.pendingSearchAsYouTypeSearchEvent != null) {\n\t            return this.pendingSearchAsYouTypeSearchEvent.getEventCause();\n\t        }\n\t        return null;\n\t    };\n\t    LiveAnalyticsClient.prototype.getCurrentEventMeta = function () {\n\t        if (this.pendingSearchEvent != null) {\n\t            return this.pendingSearchEvent.getEventMeta();\n\t        }\n\t        if (this.pendingSearchAsYouTypeSearchEvent != null) {\n\t            return this.pendingSearchAsYouTypeSearchEvent.getEventMeta();\n\t        }\n\t        return null;\n\t    };\n\t    LiveAnalyticsClient.prototype.logSearchEvent = function (actionCause, meta) {\n\t        var metaObject = this.buildMetaObject(meta);\n\t        this.pushSearchEvent(actionCause, metaObject);\n\t    };\n\t    LiveAnalyticsClient.prototype.logSearchAsYouType = function (actionCause, meta) {\n\t        var metaObject = this.buildMetaObject(meta);\n\t        this.pushSearchAsYouTypeEvent(actionCause, metaObject);\n\t    };\n\t    LiveAnalyticsClient.prototype.logClickEvent = function (actionCause, meta, result, element) {\n\t        var metaObject = this.buildMetaObject(meta);\n\t        this.pushClickEvent(actionCause, metaObject, result, element);\n\t    };\n\t    LiveAnalyticsClient.prototype.logCustomEvent = function (actionCause, meta, element) {\n\t        var metaObject = this.buildMetaObject(meta);\n\t        this.pushCustomEvent(actionCause, metaObject, element);\n\t    };\n\t    LiveAnalyticsClient.prototype.getTopQueries = function (params) {\n\t        return this.endpoint.getTopQueries(params);\n\t    };\n\t    LiveAnalyticsClient.prototype.sendAllPendingEvents = function () {\n\t        if (this.pendingSearchAsYouTypeSearchEvent) {\n\t            this.pendingSearchAsYouTypeSearchEvent.sendRightNow();\n\t        }\n\t    };\n\t    LiveAnalyticsClient.prototype.cancelAllPendingEvents = function () {\n\t        if (this.pendingSearchAsYouTypeSearchEvent) {\n\t            this.pendingSearchAsYouTypeSearchEvent.cancel();\n\t            this.pendingSearchAsYouTypeSearchEvent = null;\n\t        }\n\t        if (this.pendingSearchEvent) {\n\t            this.pendingSearchEvent.cancel();\n\t            this.pendingSearchEvent = null;\n\t        }\n\t    };\n\t    LiveAnalyticsClient.prototype.getPendingSearchEvent = function () {\n\t        if (this.pendingSearchEvent) {\n\t            return this.pendingSearchEvent;\n\t        }\n\t        else if (this.pendingSearchAsYouTypeSearchEvent) {\n\t            return this.pendingSearchAsYouTypeSearchEvent;\n\t        }\n\t        return null;\n\t    };\n\t    LiveAnalyticsClient.prototype.warnAboutSearchEvent = function () {\n\t        if (_.isUndefined(this.pendingSearchEvent) && _.isUndefined(this.pendingSearchAsYouTypeSearchEvent)) {\n\t            this.logger.warn('A search was triggered, but no analytics event was logged. If you wish to have consistent analytics data, consider logging a search event using the methods provided by the framework', 'https://developers.coveo.com/x/TwA5');\n\t            if (window['console'] && console.trace) {\n\t                console.trace();\n\t            }\n\t        }\n\t    };\n\t    LiveAnalyticsClient.prototype.pushCustomEvent = function (actionCause, metaObject, element) {\n\t        var _this = this;\n\t        var customEvent = this.buildCustomEvent(actionCause, metaObject, element);\n\t        this.triggerChangeAnalyticsCustomData('CustomEvent', metaObject, customEvent);\n\t        this.checkToSendAnyPendingSearchAsYouType(actionCause);\n\t        Defer_1.Defer.defer(function () {\n\t            if (_this.sendToCloud) {\n\t                _this.endpoint.sendCustomEvent(customEvent);\n\t            }\n\t            Dom_1.$$(_this.rootElement).trigger(AnalyticsEvents_1.AnalyticsEvents.customEvent, { customEvent: APIAnalyticsBuilder_1.APIAnalyticsBuilder.convertCustomEventToAPI(customEvent) });\n\t        });\n\t    };\n\t    LiveAnalyticsClient.prototype.pushSearchEvent = function (actionCause, metaObject) {\n\t        var _this = this;\n\t        Assert_1.Assert.exists(actionCause);\n\t        if (this.pendingSearchEvent && this.pendingSearchEvent.getEventCause() !== actionCause.name) {\n\t            this.pendingSearchEvent.stopRecording();\n\t            this.pendingSearchEvent = null;\n\t        }\n\t        this.checkToSendAnyPendingSearchAsYouType(actionCause);\n\t        if (!this.pendingSearchEvent) {\n\t            var searchEvent = this.buildSearchEvent(actionCause, metaObject);\n\t            this.triggerChangeAnalyticsCustomData('SearchEvent', metaObject, searchEvent);\n\t            var pendingSearchEvent = this.pendingSearchEvent = new PendingSearchEvent_1.PendingSearchEvent(this.rootElement, this.endpoint, searchEvent, this.sendToCloud);\n\t            Defer_1.Defer.defer(function () {\n\t                // At this point all `duringQuery` events should have been fired, so we can forget\n\t                // about the pending search event. It will finish processing automatically when\n\t                // all the deferred that were caught terminate.\n\t                _this.pendingSearchEvent = undefined;\n\t                pendingSearchEvent.stopRecording();\n\t            });\n\t        }\n\t    };\n\t    LiveAnalyticsClient.prototype.checkToSendAnyPendingSearchAsYouType = function (actionCause) {\n\t        if (this.eventIsNotRelatedToSearchbox(actionCause.name)) {\n\t            this.sendAllPendingEvents();\n\t        }\n\t        else {\n\t            this.cancelAnyPendingSearchAsYouTypeEvent();\n\t        }\n\t    };\n\t    LiveAnalyticsClient.prototype.pushSearchAsYouTypeEvent = function (actionCause, metaObject) {\n\t        this.cancelAnyPendingSearchAsYouTypeEvent();\n\t        var searchEvent = this.buildSearchEvent(actionCause, metaObject);\n\t        this.triggerChangeAnalyticsCustomData('SearchEvent', metaObject, searchEvent);\n\t        this.pendingSearchAsYouTypeSearchEvent = new PendingSearchAsYouTypeSearchEvent_1.PendingSearchAsYouTypeSearchEvent(this.rootElement, this.endpoint, searchEvent, this.sendToCloud);\n\t    };\n\t    LiveAnalyticsClient.prototype.pushClickEvent = function (actionCause, metaObject, result, element) {\n\t        var _this = this;\n\t        var event = this.buildClickEvent(actionCause, metaObject, result, element);\n\t        this.checkToSendAnyPendingSearchAsYouType(actionCause);\n\t        this.triggerChangeAnalyticsCustomData('ClickEvent', metaObject, event, { resultData: result });\n\t        Assert_1.Assert.isNonEmptyString(event.searchQueryUid);\n\t        Assert_1.Assert.isNonEmptyString(event.collectionName);\n\t        Assert_1.Assert.isNonEmptyString(event.sourceName);\n\t        Assert_1.Assert.isNumber(event.documentPosition);\n\t        Defer_1.Defer.defer(function () {\n\t            if (_this.sendToCloud) {\n\t                _this.endpoint.sendDocumentViewEvent(event);\n\t            }\n\t            Dom_1.$$(_this.rootElement).trigger(AnalyticsEvents_1.AnalyticsEvents.documentViewEvent, {\n\t                documentViewEvent: APIAnalyticsBuilder_1.APIAnalyticsBuilder.convertDocumentViewToAPI(event)\n\t            });\n\t        });\n\t    };\n\t    LiveAnalyticsClient.prototype.buildAnalyticsEvent = function (actionCause, metaObject) {\n\t        return {\n\t            actionCause: actionCause.name,\n\t            actionType: actionCause.type,\n\t            username: this.userId,\n\t            userDisplayName: this.userDisplayName,\n\t            anonymous: this.anonymous,\n\t            device: this.device,\n\t            mobile: this.mobile,\n\t            language: this.language,\n\t            responseTime: undefined,\n\t            originLevel1: this.originLevel1,\n\t            originLevel2: this.getOriginLevel2(this.rootElement),\n\t            originLevel3: document.referrer,\n\t            customData: _.keys(metaObject).length > 0 ? metaObject : undefined,\n\t            userAgent: navigator.userAgent\n\t        };\n\t    };\n\t    LiveAnalyticsClient.prototype.buildSearchEvent = function (actionCause, metaObject) {\n\t        return this.merge(this.buildAnalyticsEvent(actionCause, metaObject), {\n\t            searchQueryUid: undefined,\n\t            pipeline: undefined,\n\t            splitTestRunName: this.splitTestRunName,\n\t            splitTestRunVersion: this.splitTestRunVersion,\n\t            queryText: undefined,\n\t            advancedQuery: undefined,\n\t            results: undefined,\n\t            resultsPerPage: undefined,\n\t            pageNumber: undefined,\n\t            didYouMean: undefined,\n\t            facets: undefined,\n\t            contextual: this.isContextual\n\t        });\n\t    };\n\t    LiveAnalyticsClient.prototype.buildClickEvent = function (actionCause, metaObject, result, element) {\n\t        return this.merge(this.buildAnalyticsEvent(actionCause, metaObject), {\n\t            searchQueryUid: result.queryUid,\n\t            queryPipeline: result.pipeline,\n\t            splitTestRunName: this.splitTestRunName || result.splitTestRun,\n\t            splitTestRunVersion: this.splitTestRunVersion || (result.splitTestRun != undefined ? result.pipeline : undefined),\n\t            documentUri: result.uri,\n\t            documentUriHash: result.raw['urihash'],\n\t            documentUrl: result.clickUri,\n\t            documentTitle: result.title,\n\t            documentCategory: result.raw['objecttype'],\n\t            originLevel2: this.getOriginLevel2(element),\n\t            collectionName: result.raw['collection'],\n\t            sourceName: result.raw['source'],\n\t            documentPosition: result.index + 1,\n\t            responseTime: 0,\n\t            viewMethod: actionCause.name,\n\t            rankingModifier: result.rankingModifier\n\t        });\n\t    };\n\t    LiveAnalyticsClient.prototype.buildCustomEvent = function (actionCause, metaObject, element) {\n\t        return this.merge(this.buildAnalyticsEvent(actionCause, metaObject), {\n\t            eventType: actionCause.type,\n\t            eventValue: actionCause.name,\n\t            originLevel2: this.getOriginLevel2(element),\n\t            responseTime: 0\n\t        });\n\t    };\n\t    LiveAnalyticsClient.prototype.getOriginLevel2 = function (element) {\n\t        return this.resolveActiveTabFromElement(element) || 'default';\n\t    };\n\t    LiveAnalyticsClient.prototype.buildMetaObject = function (meta) {\n\t        var build = _.extend({}, meta);\n\t        build['JSUIVersion'] = Version_1.version.lib + ';' + Version_1.version.product;\n\t        return build;\n\t    };\n\t    LiveAnalyticsClient.prototype.cancelAnyPendingSearchAsYouTypeEvent = function () {\n\t        if (this.pendingSearchAsYouTypeSearchEvent) {\n\t            this.pendingSearchAsYouTypeSearchEvent.cancel();\n\t            this.pendingSearchAsYouTypeSearchEvent = undefined;\n\t        }\n\t    };\n\t    LiveAnalyticsClient.prototype.resolveActiveTabFromElement = function (element) {\n\t        Assert_1.Assert.exists(element);\n\t        var queryStateModel = this.resolveQueryStateModel(element);\n\t        return (queryStateModel && queryStateModel.get(QueryStateModel_1.QueryStateModel.attributesEnum.t));\n\t    };\n\t    LiveAnalyticsClient.prototype.resolveQueryStateModel = function (rootElement) {\n\t        return Component_1.Component.resolveBinding(rootElement, QueryStateModel_1.QueryStateModel);\n\t    };\n\t    LiveAnalyticsClient.prototype.eventIsNotRelatedToSearchbox = function (event) {\n\t        return event !== AnalyticsActionListMeta_1.analyticsActionCauseList.searchboxSubmit.name && event !== AnalyticsActionListMeta_1.analyticsActionCauseList.searchboxClear.name;\n\t    };\n\t    LiveAnalyticsClient.prototype.triggerChangeAnalyticsCustomData = function (type, metaObject, event, data) {\n\t        var changeableAnalyticsDataObject = {\n\t            language: event.language,\n\t            originLevel1: event.originLevel1,\n\t            originLevel2: event.originLevel2,\n\t            originLevel3: event.originLevel3\n\t        };\n\t        // This is for backward compatibility. Before the analytics were using either numbered\n\t        // metas in `metaDataAsNumber` of later on named metas in `metaDataAsString`. Thus we still\n\t        // provide those properties in a deprecated way. Below we are moving any data that put\n\t        // in them to the root.\n\t        metaObject['metaDataAsString'] = {};\n\t        metaObject['metaDataAsNumber'] = {};\n\t        var args = _.extend({}, {\n\t            type: type,\n\t            metaObject: metaObject,\n\t            actionType: event.actionType,\n\t            actionCause: event.actionCause\n\t        }, changeableAnalyticsDataObject);\n\t        Dom_1.$$(this.rootElement).trigger(AnalyticsEvents_1.AnalyticsEvents.changeAnalyticsCustomData, args);\n\t        event.language = args.language;\n\t        event.originLevel1 = args.originLevel1;\n\t        event.originLevel2 = args.originLevel2;\n\t        event.originLevel3 = args.originLevel3;\n\t        event.customData = metaObject;\n\t        // This is for backward compatibility. Before the analytics were using either numbered\n\t        // metas in `metaDataAsNumber` of later on named metas in `metaDataAsString`. We are now putting\n\t        // them all at the root, and if I encounter the older properties I move them to the top\n\t        // level after issuing a warning.\n\t        var metaDataAsString = event.customData['metaDataAsString'];\n\t        if (_.keys(metaDataAsString).length > 0) {\n\t            this.logger.warn('Using deprecated \\'metaDataAsString\\' key to log custom analytics data. Custom meta should now be put at the root of the object.');\n\t            _.extend(event.customData, metaDataAsString);\n\t        }\n\t        delete event.customData['metaDataAsString'];\n\t        var metaDataAsNumber = event.customData['metaDataAsNumber'];\n\t        if (_.keys(metaDataAsNumber).length > 0) {\n\t            this.logger.warn('Using deprecated \\'metaDataAsNumber\\' key to log custom analytics data. Custom meta should now be put at the root of the object.');\n\t            _.extend(event.customData, metaDataAsNumber);\n\t        }\n\t        delete event.customData['metaDataAsNumber'];\n\t    };\n\t    LiveAnalyticsClient.prototype.merge = function (first, second) {\n\t        return _.extend({}, first, second);\n\t    };\n\t    return LiveAnalyticsClient;\n\t}());\n\texports.LiveAnalyticsClient = LiveAnalyticsClient;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 114 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar SearchInterface_1 = __webpack_require__(96);\n\tvar Component_1 = __webpack_require__(95);\n\tvar QueryController_1 = __webpack_require__(73);\n\tvar Defer_1 = __webpack_require__(30);\n\tvar APIAnalyticsBuilder_1 = __webpack_require__(115);\n\tvar AnalyticsEvents_1 = __webpack_require__(39);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar PendingSearchEvent = (function () {\n\t    function PendingSearchEvent(root, endpoint, templateSearchEvent, sendToCloud) {\n\t        var _this = this;\n\t        this.root = root;\n\t        this.endpoint = endpoint;\n\t        this.templateSearchEvent = templateSearchEvent;\n\t        this.sendToCloud = sendToCloud;\n\t        this.searchPromises = [];\n\t        this.results = [];\n\t        this.cancelled = false;\n\t        this.finished = false;\n\t        this.searchEvents = [];\n\t        Assert_1.Assert.exists(root);\n\t        Assert_1.Assert.exists(endpoint);\n\t        Assert_1.Assert.exists(templateSearchEvent);\n\t        this.handler = function (evt, arg) {\n\t            _this.handleDuringQuery(evt, arg);\n\t        };\n\t        Dom_1.$$(root).on(QueryEvents_1.QueryEvents.duringQuery, this.handler);\n\t    }\n\t    PendingSearchEvent.prototype.getEventCause = function () {\n\t        return this.templateSearchEvent.actionCause;\n\t    };\n\t    PendingSearchEvent.prototype.getEventMeta = function () {\n\t        return this.templateSearchEvent.customData;\n\t    };\n\t    PendingSearchEvent.prototype.cancel = function () {\n\t        this.stopRecording();\n\t        this.cancelled = true;\n\t    };\n\t    PendingSearchEvent.prototype.handleDuringQuery = function (evt, args) {\n\t        var _this = this;\n\t        Assert_1.Assert.check(!this.finished);\n\t        Assert_1.Assert.check(!this.cancelled);\n\t        // When synchronizing multiple search interfaces under a single search event\n\t        // (think Salesforce boxes), we need to collect all search events and send them\n\t        // in one single batch. So we gather all events until we idle out and then we\n\t        // monitor those before sending the data.\n\t        this.searchPromises.push(args.promise);\n\t        // TODO: Maybe a better way to grab the search interface?\n\t        var eventTarget;\n\t        eventTarget = evt.target;\n\t        var searchInterface = Component_1.Component.get(eventTarget, SearchInterface_1.SearchInterface);\n\t        Assert_1.Assert.exists(searchInterface);\n\t        // TODO: Maybe a better way to grab the query controller?\n\t        var queryController = Component_1.Component.get(eventTarget, QueryController_1.QueryController);\n\t        Assert_1.Assert.exists(queryController);\n\t        args.promise.then(function (queryResults) {\n\t            Assert_1.Assert.exists(queryResults);\n\t            Assert_1.Assert.check(!_this.finished);\n\t            if (queryResults._reusedSearchUid !== true || _this.templateSearchEvent.actionCause == AnalyticsActionListMeta_1.analyticsActionCauseList.recommendation.name) {\n\t                var searchEvent = _.extend({}, _this.templateSearchEvent);\n\t                _this.fillSearchEvent(searchEvent, searchInterface, args.query, queryResults);\n\t                _this.searchEvents.push(searchEvent);\n\t                _this.results.push(queryResults);\n\t                return queryResults;\n\t            }\n\t        }).finally(function () {\n\t            var index = _.indexOf(_this.searchPromises, args.promise);\n\t            _this.searchPromises.splice(index, 1);\n\t            if (_this.searchPromises.length == 0) {\n\t                _this.flush();\n\t            }\n\t        });\n\t    };\n\t    PendingSearchEvent.prototype.stopRecording = function () {\n\t        if (this.handler) {\n\t            Dom_1.$$(this.root).off(QueryEvents_1.QueryEvents.duringQuery, this.handler);\n\t            Dom_1.$$(this.root).off(QueryEvents_1.QueryEvents.duringFetchMoreQuery, this.handler);\n\t            this.handler = null;\n\t        }\n\t    };\n\t    PendingSearchEvent.prototype.flush = function () {\n\t        var _this = this;\n\t        if (!this.cancelled) {\n\t            this.stopRecording();\n\t            this.finished = true;\n\t            Assert_1.Assert.check(this.searchEvents.length == this.results.length);\n\t            Defer_1.Defer.defer(function () {\n\t                if (_this.sendToCloud) {\n\t                    _this.endpoint.sendSearchEvents(_this.searchEvents);\n\t                }\n\t                var apiSearchEvents = _.map(_this.searchEvents, function (searchEvent) {\n\t                    return APIAnalyticsBuilder_1.APIAnalyticsBuilder.convertSearchEventToAPI(searchEvent);\n\t                });\n\t                Dom_1.$$(_this.root).trigger(AnalyticsEvents_1.AnalyticsEvents.searchEvent, { searchEvents: apiSearchEvents });\n\t            });\n\t        }\n\t    };\n\t    PendingSearchEvent.prototype.fillSearchEvent = function (searchEvent, searchInterface, query, queryResults) {\n\t        Assert_1.Assert.exists(searchEvent);\n\t        Assert_1.Assert.exists(searchInterface);\n\t        Assert_1.Assert.exists(query);\n\t        Assert_1.Assert.exists(queryResults);\n\t        var currentQuery = searchInterface.queryStateModel.get(QueryStateModel_1.QueryStateModel.attributesEnum.q);\n\t        searchEvent.queryPipeline = queryResults.pipeline;\n\t        searchEvent.splitTestRunName = searchEvent.splitTestRunName || queryResults.splitTestRun;\n\t        searchEvent.splitTestRunVersion = searchEvent.splitTestRunVersion || (queryResults.splitTestRun != undefined ? queryResults.pipeline : undefined);\n\t        searchEvent.originLevel2 = searchEvent.originLevel2 || searchInterface.queryStateModel.get('t') || 'default';\n\t        searchEvent.queryText = currentQuery || query.q || ''; // do not log the query sent to the server if possible; it may contain added syntax depending on options\n\t        searchEvent.advancedQuery = query.aq || '';\n\t        searchEvent.didYouMean = query.enableDidYouMean;\n\t        searchEvent.numberOfResults = queryResults.totalCount;\n\t        searchEvent.responseTime = queryResults.duration;\n\t        searchEvent.pageNumber = (query.firstResult / query.numberOfResults);\n\t        searchEvent.resultsPerPage = query.numberOfResults;\n\t        searchEvent.searchQueryUid = queryResults.searchUid;\n\t        searchEvent.queryPipeline = queryResults.pipeline;\n\t        // The context_${key} format is important for the Analytics backend\n\t        // This is what they use to recognize a custom data that will be used internally by other coveo's service.\n\t        // In this case, Reveal will be the consumer of this information.\n\t        if (query.context != undefined) {\n\t            _.each(query.context, function (value, key) {\n\t                searchEvent.customData[(\"context_\" + key)] = value;\n\t            });\n\t        }\n\t    };\n\t    return PendingSearchEvent;\n\t}());\n\texports.PendingSearchEvent = PendingSearchEvent;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 115 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar APIAnalyticsBuilder = (function () {\n\t    function APIAnalyticsBuilder() {\n\t    }\n\t    APIAnalyticsBuilder.convertSearchEventToAPI = function (searchEvent) {\n\t        var apiSearchEvent = {\n\t            advancedQuery: searchEvent.advancedQuery,\n\t            customMetadatas: searchEvent.customData,\n\t            device: searchEvent.device,\n\t            didYouMean: searchEvent.didYouMean,\n\t            language: searchEvent.language,\n\t            pageNumber: searchEvent.pageNumber,\n\t            queryText: searchEvent.queryText,\n\t            responseTime: searchEvent.responseTime,\n\t            numberOfResults: searchEvent.numberOfResults,\n\t            resultsPerPage: searchEvent.resultsPerPage,\n\t            searchHub: searchEvent.originLevel1,\n\t            searchInterface: searchEvent.originLevel2,\n\t            searchQueryUid: searchEvent.searchQueryUid,\n\t            type: searchEvent.actionType,\n\t            actionCause: searchEvent.actionCause,\n\t            queryPipeline: searchEvent.queryPipeline,\n\t            splitTestRunName: searchEvent.splitTestRunName,\n\t            splitTestRunVersion: searchEvent.splitTestRunVersion\n\t        };\n\t        return apiSearchEvent;\n\t    };\n\t    APIAnalyticsBuilder.convertDocumentViewToAPI = function (documentView) {\n\t        var apiDocumentView = {\n\t            collectionName: documentView.collectionName,\n\t            device: documentView.device,\n\t            documentPosition: documentView.documentPosition,\n\t            title: documentView.documentTitle,\n\t            documentUrl: documentView.documentUrl,\n\t            documentUri: documentView.documentUri,\n\t            documentUriHash: documentView.documentUriHash,\n\t            language: documentView.language,\n\t            responseTime: documentView.responseTime,\n\t            searchHub: documentView.originLevel1,\n\t            searchInterface: documentView.originLevel2,\n\t            searchQueryUid: documentView.searchQueryUid,\n\t            sourceName: documentView.sourceName,\n\t            viewMethod: documentView.viewMethod,\n\t            customMetadatas: documentView.customData,\n\t            actionCause: documentView.actionCause,\n\t            queryPipeline: documentView.queryPipeline,\n\t            splitTestRunName: documentView.splitTestRunName,\n\t            splitTestRunVersion: documentView.splitTestRunVersion\n\t        };\n\t        return apiDocumentView;\n\t    };\n\t    APIAnalyticsBuilder.convertCustomEventToAPI = function (customEvent) {\n\t        var apiCustomEvent = {\n\t            actionCause: customEvent.actionCause,\n\t            actionType: customEvent.actionType,\n\t            device: customEvent.device,\n\t            language: customEvent.language,\n\t            responseTime: customEvent.responseTime,\n\t            searchHub: customEvent.originLevel1,\n\t            searchInterface: customEvent.originLevel2,\n\t            customMetadatas: customEvent.customData\n\t        };\n\t        return apiCustomEvent;\n\t    };\n\t    return APIAnalyticsBuilder;\n\t}());\n\texports.APIAnalyticsBuilder = APIAnalyticsBuilder;\n\n\n/***/ },\n/* 116 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar PendingSearchEvent_1 = __webpack_require__(114);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar InitializationEvents_1 = __webpack_require__(43);\n\tvar _ = __webpack_require__(12);\n\tvar PendingSearchAsYouTypeSearchEvent = (function (_super) {\n\t    __extends(PendingSearchAsYouTypeSearchEvent, _super);\n\t    function PendingSearchAsYouTypeSearchEvent(root, endpoint, templateSearchEvent, sendToCloud) {\n\t        var _this = this;\n\t        _super.call(this, root, endpoint, templateSearchEvent, sendToCloud);\n\t        this.root = root;\n\t        this.endpoint = endpoint;\n\t        this.templateSearchEvent = templateSearchEvent;\n\t        this.sendToCloud = sendToCloud;\n\t        this.delayBeforeSending = 5000;\n\t        this.armBatchDelay = 50;\n\t        this.beforeUnloadHandler = function () {\n\t            _this.onWindowUnload();\n\t        };\n\t        window.addEventListener('beforeunload', this.beforeUnloadHandler);\n\t        Dom_1.$$(root).on(InitializationEvents_1.InitializationEvents.nuke, function () { return _this.handleNuke(); });\n\t    }\n\t    PendingSearchAsYouTypeSearchEvent.prototype.handleDuringQuery = function (e, args) {\n\t        var _this = this;\n\t        var event = _.clone(e);\n\t        this.beforeResolve = new Promise(function (resolve) {\n\t            _this.toSendRightNow = function () {\n\t                if (!_this.isCancelledOrFinished()) {\n\t                    resolve(_this);\n\t                    _super.prototype.handleDuringQuery.call(_this, event, args);\n\t                }\n\t            };\n\t            _.delay(function () {\n\t                _this.toSendRightNow();\n\t            }, _this.delayBeforeSending);\n\t        });\n\t    };\n\t    PendingSearchAsYouTypeSearchEvent.prototype.sendRightNow = function () {\n\t        if (this.toSendRightNow) {\n\t            this.toSendRightNow();\n\t        }\n\t    };\n\t    PendingSearchAsYouTypeSearchEvent.prototype.modifyCustomData = function (key, newData) {\n\t        _.each(this.searchEvents, function (searchEvent) {\n\t            searchEvent.customData[key] = newData;\n\t        });\n\t        if (!this.templateSearchEvent.customData) {\n\t            this.templateSearchEvent.customData = {};\n\t        }\n\t        this.templateSearchEvent.customData[key] = newData;\n\t    };\n\t    PendingSearchAsYouTypeSearchEvent.prototype.modifyEventCause = function (newCause) {\n\t        _.each(this.searchEvents, function (searchEvent) {\n\t            searchEvent.actionCause = newCause.name;\n\t            searchEvent.actionType = newCause.type;\n\t        });\n\t        this.templateSearchEvent.actionCause = newCause.name;\n\t        this.templateSearchEvent.actionType = newCause.type;\n\t    };\n\t    PendingSearchAsYouTypeSearchEvent.prototype.stopRecording = function () {\n\t        _super.prototype.stopRecording.call(this);\n\t        if (this.beforeUnloadHandler) {\n\t            window.removeEventListener('beforeunload', this.beforeUnloadHandler);\n\t            this.beforeUnloadHandler = undefined;\n\t        }\n\t    };\n\t    PendingSearchAsYouTypeSearchEvent.prototype.handleNuke = function () {\n\t        window.removeEventListener('beforeunload', this.beforeUnloadHandler);\n\t    };\n\t    PendingSearchAsYouTypeSearchEvent.prototype.onWindowUnload = function () {\n\t        if (!this.isCancelledOrFinished()) {\n\t            this.armBatchDelay = 0;\n\t            this.sendRightNow();\n\t        }\n\t    };\n\t    PendingSearchAsYouTypeSearchEvent.prototype.isCancelledOrFinished = function () {\n\t        if (!this.cancelled) {\n\t            if (this.finished) {\n\t                this.cancel();\n\t                return true;\n\t            }\n\t            else {\n\t                return false;\n\t            }\n\t        }\n\t        else {\n\t            return true;\n\t        }\n\t    };\n\t    return PendingSearchAsYouTypeSearchEvent;\n\t}(PendingSearchEvent_1.PendingSearchEvent));\n\texports.PendingSearchAsYouTypeSearchEvent = PendingSearchAsYouTypeSearchEvent;\n\n\n/***/ },\n/* 117 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar MultiAnalyticsClient = (function () {\n\t    function MultiAnalyticsClient(analyticsClients) {\n\t        if (analyticsClients === void 0) { analyticsClients = []; }\n\t        this.analyticsClients = analyticsClients;\n\t        this.isContextual = false;\n\t    }\n\t    MultiAnalyticsClient.prototype.isActivated = function () {\n\t        return _.some(this.analyticsClients, function (analyticsClient) { return analyticsClient.isActivated(); });\n\t    };\n\t    MultiAnalyticsClient.prototype.getCurrentEventCause = function () {\n\t        return _.find(_.map(this.analyticsClients, function (analyticsClient) { return analyticsClient.getCurrentEventCause(); }), function (currentEventCause) { return currentEventCause != null; });\n\t    };\n\t    MultiAnalyticsClient.prototype.getCurrentEventMeta = function () {\n\t        return _.find(_.map(this.analyticsClients, function (analyticsClient) { return analyticsClient.getCurrentEventMeta(); }), function (currentEventMeta) { return currentEventMeta != null; });\n\t    };\n\t    MultiAnalyticsClient.prototype.logSearchEvent = function (actionCause, meta) {\n\t        _.each(this.analyticsClients, function (analyticsClient) { return analyticsClient.logSearchEvent(actionCause, meta); });\n\t    };\n\t    MultiAnalyticsClient.prototype.logSearchAsYouType = function (actionCause, meta) {\n\t        _.each(this.analyticsClients, function (analyticsClient) { return analyticsClient.logSearchEvent(actionCause, meta); });\n\t    };\n\t    MultiAnalyticsClient.prototype.logClickEvent = function (actionCause, meta, result, element) {\n\t        _.each(this.analyticsClients, function (analyticsClient) { return analyticsClient.logClickEvent(actionCause, meta, result, element); });\n\t    };\n\t    MultiAnalyticsClient.prototype.logCustomEvent = function (actionCause, meta, element) {\n\t        _.each(this.analyticsClients, function (analyticsClient) { return analyticsClient.logCustomEvent(actionCause, meta, element); });\n\t    };\n\t    MultiAnalyticsClient.prototype.getTopQueries = function (params) {\n\t        var _this = this;\n\t        return Promise.all(_.map(this.analyticsClients, function (client) {\n\t            return client.getTopQueries(params);\n\t        }))\n\t            .then(function (values) {\n\t            return _this.mergeTopQueries(values, params.pageSize);\n\t        });\n\t    };\n\t    MultiAnalyticsClient.prototype.getCurrentVisitIdPromise = function () {\n\t        return _.first(this.analyticsClients).getCurrentVisitIdPromise();\n\t    };\n\t    MultiAnalyticsClient.prototype.getCurrentVisitId = function () {\n\t        return _.first(this.analyticsClients).getCurrentVisitId();\n\t    };\n\t    MultiAnalyticsClient.prototype.sendAllPendingEvents = function () {\n\t        _.each(this.analyticsClients, function (analyticsClient) { return analyticsClient.sendAllPendingEvents(); });\n\t    };\n\t    MultiAnalyticsClient.prototype.warnAboutSearchEvent = function () {\n\t        _.each(this.analyticsClients, function (analyticsClient) { return analyticsClient.warnAboutSearchEvent(); });\n\t    };\n\t    MultiAnalyticsClient.prototype.cancelAllPendingEvents = function () {\n\t        _.each(this.analyticsClients, function (analyticsClient) { return analyticsClient.cancelAllPendingEvents(); });\n\t    };\n\t    MultiAnalyticsClient.prototype.getPendingSearchEvent = function () {\n\t        return _.first(this.analyticsClients).getPendingSearchEvent();\n\t    };\n\t    MultiAnalyticsClient.prototype.mergeTopQueries = function (values, pageSize) {\n\t        if (pageSize === void 0) { pageSize = 5; }\n\t        return _.chain(values)\n\t            .flatten()\n\t            .first(pageSize)\n\t            .value();\n\t    };\n\t    return MultiAnalyticsClient;\n\t}());\n\texports.MultiAnalyticsClient = MultiAnalyticsClient;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 118 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar LiveAnalyticsClient_1 = __webpack_require__(113);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar Component_1 = __webpack_require__(95);\n\tvar SearchInterface_1 = __webpack_require__(96);\n\tvar RecommendationAnalyticsClient = (function (_super) {\n\t    __extends(RecommendationAnalyticsClient, _super);\n\t    function RecommendationAnalyticsClient(endpoint, rootElement, userId, userDisplayName, anonymous, splitTestRunName, splitTestRunVersion, originLevel1, sendToCloud, bindings) {\n\t        _super.call(this, endpoint, rootElement, userId, userDisplayName, anonymous, splitTestRunName, splitTestRunVersion, originLevel1, sendToCloud);\n\t        this.endpoint = endpoint;\n\t        this.rootElement = rootElement;\n\t        this.userId = userId;\n\t        this.userDisplayName = userDisplayName;\n\t        this.anonymous = anonymous;\n\t        this.splitTestRunName = splitTestRunName;\n\t        this.splitTestRunVersion = splitTestRunVersion;\n\t        this.originLevel1 = originLevel1;\n\t        this.sendToCloud = sendToCloud;\n\t        this.bindings = bindings;\n\t        this.recommendation = this.bindings.searchInterface;\n\t    }\n\t    RecommendationAnalyticsClient.prototype.logSearchEvent = function (actionCause, meta) {\n\t        if (actionCause == AnalyticsActionListMeta_1.analyticsActionCauseList.interfaceLoad) {\n\t            actionCause = AnalyticsActionListMeta_1.analyticsActionCauseList.recommendationInterfaceLoad;\n\t        }\n\t        _super.prototype.logSearchEvent.call(this, actionCause, meta);\n\t    };\n\t    RecommendationAnalyticsClient.prototype.logClickEvent = function (actionCause, meta, result, element) {\n\t        if (actionCause == AnalyticsActionListMeta_1.analyticsActionCauseList.documentOpen) {\n\t            actionCause = AnalyticsActionListMeta_1.analyticsActionCauseList.recommendationOpen;\n\t        }\n\t        _super.prototype.logClickEvent.call(this, actionCause, meta, result, element);\n\t        if (this.recommendation.mainQuerySearchUID) {\n\t            // We log a second click associated with the main interface query to tell the analytics that the query was a success.\n\t            var mainInterface = Component_1.Component.get(this.recommendation.options.mainSearchInterface, SearchInterface_1.SearchInterface);\n\t            result.queryUid = this.recommendation.mainQuerySearchUID;\n\t            mainInterface.usageAnalytics.logClickEvent(actionCause, meta, result, element);\n\t        }\n\t    };\n\t    RecommendationAnalyticsClient.prototype.getOriginLevel2 = function (element) {\n\t        return this.recommendation.getId();\n\t    };\n\t    return RecommendationAnalyticsClient;\n\t}(LiveAnalyticsClient_1.LiveAnalyticsClient));\n\texports.RecommendationAnalyticsClient = RecommendationAnalyticsClient;\n\n\n/***/ },\n/* 119 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Initialization_1 = __webpack_require__(94);\n\tif (!initCoveoJQuery()) {\n\t    // Adding a check in case jQuery was added after the jsSearch\n\t    // Since this event listener is registered before the Coveo.init call, JQuery should always be initiated before the Coveo.init call  \n\t    document.addEventListener('DOMContentLoaded', function () {\n\t        initCoveoJQuery();\n\t    });\n\t}\n\tfunction initCoveoJQuery() {\n\t    if (!jQueryIsDefined()) {\n\t        return false;\n\t    }\n\t    exports.jQueryInstance = getJQuery();\n\t    if (window['Coveo'] == undefined) {\n\t        window['Coveo'] = {};\n\t    }\n\t    if (window['Coveo']['$'] == undefined) {\n\t        window['Coveo']['$'] = exports.jQueryInstance;\n\t    }\n\t    exports.jQueryInstance.fn.coveo = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i - 0] = arguments[_i];\n\t        }\n\t        var returnValue;\n\t        this.each(function (index, element) {\n\t            var returnValueForThisElement;\n\t            if (_.isString(args[0])) {\n\t                var token = args[0];\n\t                returnValueForThisElement = Initialization_1.Initialization.dispatchNamedMethodCallOrComponentCreation(token, element, args.slice(1));\n\t            }\n\t            else {\n\t                // Invoking with no method name is a shortcut for the 'get' method (from Component).\n\t                returnValueForThisElement = Initialization_1.Initialization.dispatchNamedMethodCall('get', element, args);\n\t            }\n\t            // Keep only the first return value we encounter\n\t            returnValue = returnValue || returnValueForThisElement;\n\t        });\n\t        return returnValue;\n\t    };\n\t    return true;\n\t}\n\texports.initCoveoJQuery = initCoveoJQuery;\n\tfunction jQueryIsDefined() {\n\t    return jQueryDefinedOnWindow() || jQueryDefinedOnCoveoObject();\n\t}\n\texports.jQueryIsDefined = jQueryIsDefined;\n\tfunction jQueryDefinedOnCoveoObject() {\n\t    return window['Coveo'] != undefined && window['Coveo']['$'] != undefined;\n\t}\n\tfunction jQueryDefinedOnWindow() {\n\t    return window['$'] != undefined && window['$'].fn != undefined && window['$'].fn.jquery != undefined;\n\t}\n\tfunction getJQuery() {\n\t    var jQueryInstance;\n\t    if (window['$']) {\n\t        jQueryInstance = window['$'];\n\t    }\n\t    else {\n\t        jQueryInstance = window['Coveo']['$'];\n\t    }\n\t    return jQueryInstance;\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 120 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar TemplateHelpers_1 = __webpack_require__(121);\n\texports.TemplateHelpers = TemplateHelpers_1.TemplateHelpers;\n\tvar TemplateCache_1 = __webpack_require__(98);\n\texports.TemplateCache = TemplateCache_1.TemplateCache;\n\tvar HtmlTemplate_1 = __webpack_require__(101);\n\texports.HtmlTemplate = HtmlTemplate_1.HtmlTemplate;\n\tvar UnderscoreTemplate_1 = __webpack_require__(100);\n\texports.UnderscoreTemplate = UnderscoreTemplate_1.UnderscoreTemplate;\n\n\n/***/ },\n/* 121 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Assert_1 = __webpack_require__(16);\n\tvar UnderscoreTemplate_1 = __webpack_require__(100);\n\tvar Utils_1 = __webpack_require__(17);\n\t/**\n\t * Allow to register and return template helpers (essentially: Utility functions that can be executed in the context of a template to render complex elements).\n\t */\n\tvar TemplateHelpers = (function () {\n\t    function TemplateHelpers() {\n\t    }\n\t    TemplateHelpers.registerFieldHelper = function (name, helper) {\n\t        TemplateHelpers.fieldHelpers.push(name);\n\t        TemplateHelpers.registerTemplateHelper(name, helper);\n\t    };\n\t    /**\n\t     * Register a new helper in the framework, that will be available inside all templates execution context.\n\t     * @param name\n\t     * @param helper\n\t     */\n\t    TemplateHelpers.registerTemplateHelper = function (name, helper) {\n\t        Assert_1.Assert.isNonEmptyString(name);\n\t        Assert_1.Assert.exists(helper);\n\t        TemplateHelpers.registerTemplateHelperInUnderscore(name, helper);\n\t        TemplateHelpers.helpers[name] = helper;\n\t    };\n\t    /**\n\t     * Return a template helper function\n\t     * @param name\n\t     * @returns {any}\n\t     */\n\t    TemplateHelpers.getHelper = function (name) {\n\t        return Utils_1.Utils.getCaseInsensitiveProperty(TemplateHelpers.helpers, name);\n\t    };\n\t    /**\n\t     * Get all available helpers\n\t     * @returns {{}}\n\t     */\n\t    TemplateHelpers.getHelpers = function () {\n\t        return TemplateHelpers.helpers;\n\t    };\n\t    TemplateHelpers.registerTemplateHelperInUnderscore = function (name, helper) {\n\t        Assert_1.Assert.isNonEmptyString(name);\n\t        Assert_1.Assert.exists(helper);\n\t        UnderscoreTemplate_1.UnderscoreTemplate.registerTemplateHelper(name, helper);\n\t    };\n\t    TemplateHelpers.helpers = {};\n\t    TemplateHelpers.fieldHelpers = [];\n\t    return TemplateHelpers;\n\t}());\n\texports.TemplateHelpers = TemplateHelpers;\n\n\n/***/ },\n/* 122 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar TemplateHelpers_1 = __webpack_require__(121);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar HighlightUtils_1 = __webpack_require__(65);\n\tvar DateUtils_1 = __webpack_require__(55);\n\tvar CurrencyUtils_1 = __webpack_require__(54);\n\tvar HtmlUtils_1 = __webpack_require__(66);\n\tvar Icon_1 = __webpack_require__(123);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar StringUtils_1 = __webpack_require__(60);\n\tvar TimeSpanUtils_1 = __webpack_require__(18);\n\tvar EmailUtils_1 = __webpack_require__(62);\n\tvar QueryUtils_1 = __webpack_require__(22);\n\tvar DeviceUtils_1 = __webpack_require__(19);\n\tvar TemplateCache_1 = __webpack_require__(98);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar SearchEndpoint_1 = __webpack_require__(11);\n\tvar ResultList_1 = __webpack_require__(127);\n\tvar StreamHighlightUtils_1 = __webpack_require__(71);\n\tvar Globalize = __webpack_require__(4);\n\tvar Quickview_1 = __webpack_require__(124);\n\tvar CoreHelpers = (function () {\n\t    function CoreHelpers() {\n\t    }\n\t    /**\n\t     * For backward compatibility reason, the \"global\" template helper should be available under the\n\t     * coveo namespace.\n\t     * @param scope\n\t     */\n\t    CoreHelpers.exportAllHelpersGlobally = function (scope) {\n\t        _.each(TemplateHelpers_1.TemplateHelpers.getHelpers(), function (helper, name) {\n\t            if (scope[name] == undefined) {\n\t                scope[name] = helper;\n\t            }\n\t        });\n\t    };\n\t    return CoreHelpers;\n\t}());\n\texports.CoreHelpers = CoreHelpers;\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('javascriptEncode', function (value) {\n\t    return Utils_1.Utils.exists(value) ? StringUtils_1.StringUtils.javascriptEncode(value) : undefined;\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('shorten', function (content, length, highlights, cssClass) {\n\t    var strAndHoles = HighlightUtils_1.StringAndHoles.shortenString(content, length, '...');\n\t    if (Utils_1.Utils.exists(highlights)) {\n\t        return HighlightUtils_1.HighlightUtils.highlightString(strAndHoles.value, highlights, strAndHoles.holes, cssClass || 'highlight');\n\t    }\n\t    else {\n\t        return strAndHoles.value;\n\t    }\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('shortenPath', function (content, length, highlights, cssClass) {\n\t    var strAndHoles = HighlightUtils_1.StringAndHoles.shortenPath(content, length);\n\t    if (Utils_1.Utils.exists(highlights)) {\n\t        return HighlightUtils_1.HighlightUtils.highlightString(strAndHoles.value, highlights, strAndHoles.holes, cssClass || 'highlight');\n\t    }\n\t    else {\n\t        return strAndHoles.value;\n\t    }\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('shortenUri', function (content, length, highlights, cssClass) {\n\t    var strAndHoles = HighlightUtils_1.StringAndHoles.shortenUri(content, length);\n\t    if (Utils_1.Utils.exists(highlights)) {\n\t        return HighlightUtils_1.HighlightUtils.highlightString(strAndHoles.value, highlights, strAndHoles.holes, cssClass || 'highlight');\n\t    }\n\t    else {\n\t        return strAndHoles.value;\n\t    }\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('highlight', function (content, highlights, cssClass) {\n\t    if (Utils_1.Utils.exists(content)) {\n\t        if (Utils_1.Utils.exists(highlights)) {\n\t            return HighlightUtils_1.HighlightUtils.highlightString(content, highlights, null, cssClass || 'highlight');\n\t        }\n\t        else {\n\t            return content;\n\t        }\n\t    }\n\t    else {\n\t        return undefined;\n\t    }\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('highlightStreamText', function (content, termsToHighlight, phrasesToHighlight, opts) {\n\t    if (termsToHighlight === void 0) { termsToHighlight = resolveTermsToHighlight(); }\n\t    if (phrasesToHighlight === void 0) { phrasesToHighlight = resolvePhrasesToHighlight(); }\n\t    if (Utils_1.Utils.exists(content) && Utils_1.Utils.exists(termsToHighlight) && Utils_1.Utils.exists(phrasesToHighlight)) {\n\t        if (Utils_1.Utils.isNonEmptyArray(_.keys(termsToHighlight)) || Utils_1.Utils.isNonEmptyArray(_.keys(phrasesToHighlight))) {\n\t            return StreamHighlightUtils_1.StreamHighlightUtils.highlightStreamText(content, termsToHighlight, phrasesToHighlight, opts);\n\t        }\n\t        else {\n\t            return content;\n\t        }\n\t    }\n\t    else {\n\t        return undefined;\n\t    }\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('highlightStreamHTML', function (content, termsToHighlight, phrasesToHighlight, opts) {\n\t    if (termsToHighlight === void 0) { termsToHighlight = resolveTermsToHighlight(); }\n\t    if (phrasesToHighlight === void 0) { phrasesToHighlight = resolvePhrasesToHighlight(); }\n\t    if (Utils_1.Utils.exists(content) && Utils_1.Utils.exists(termsToHighlight) && Utils_1.Utils.exists(phrasesToHighlight)) {\n\t        if (Utils_1.Utils.isNonEmptyArray(termsToHighlight)) {\n\t            return StreamHighlightUtils_1.StreamHighlightUtils.highlightStreamHTML(content, termsToHighlight, phrasesToHighlight, opts);\n\t        }\n\t        else {\n\t            return content;\n\t        }\n\t    }\n\t    else {\n\t        return undefined;\n\t    }\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('number', function (value, options) {\n\t    var numberValue = Number(value);\n\t    if (Utils_1.Utils.exists(value)) {\n\t        if (_.isString(options)) {\n\t            return StringUtils_1.StringUtils.htmlEncode(Globalize.format(numberValue, options));\n\t        }\n\t        else {\n\t            return StringUtils_1.StringUtils.htmlEncode(numberValue.toString());\n\t        }\n\t    }\n\t    else {\n\t        return undefined;\n\t    }\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('date', function (value, options) {\n\t    return DateUtils_1.DateUtils.dateToString(DateUtils_1.DateUtils.convertFromJsonDateIfNeeded(value), options);\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('time', function (value, options) {\n\t    return DateUtils_1.DateUtils.timeToString(DateUtils_1.DateUtils.convertFromJsonDateIfNeeded(value), options);\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('dateTime', function (value, options) {\n\t    return DateUtils_1.DateUtils.dateTimeToString(DateUtils_1.DateUtils.convertFromJsonDateIfNeeded(value), options);\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('emailDateTime', function (value, options) {\n\t    var defaultOptions = {};\n\t    defaultOptions.includeTimeIfThisWeek = true;\n\t    var optionsToUse = _.extend(options, defaultOptions);\n\t    return value ? DateUtils_1.DateUtils.dateTimeToString(DateUtils_1.DateUtils.convertFromJsonDateIfNeeded(value), optionsToUse) : undefined;\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('currency', function (value, options) {\n\t    return CurrencyUtils_1.CurrencyUtils.currencyToString(value, options);\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('timeSpan', function (value, options) {\n\t    if (options === void 0) { options = { isMilliseconds: false }; }\n\t    return new TimeSpanUtils_1.TimeSpan(value, options.isMilliseconds).getHHMMSS();\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('email', function (value) {\n\t    var args = [];\n\t    for (var _i = 1; _i < arguments.length; _i++) {\n\t        args[_i - 1] = arguments[_i];\n\t    }\n\t    // support old arguments (value: any, companyDomain: string, me: string, lengthLimit = 2, truncateName = false)\n\t    var companyDomain;\n\t    var me;\n\t    var lengthLimit;\n\t    var truncateName;\n\t    if (_.isObject(args[0])) {\n\t        companyDomain = args[0]['companyDomain'];\n\t        me = args[0]['me'];\n\t        lengthLimit = args[0]['lengthLimit'];\n\t        truncateName = args[0]['truncateName'];\n\t    }\n\t    else {\n\t        companyDomain = args[0];\n\t        me = args[1];\n\t        lengthLimit = args[2];\n\t        truncateName = args[3];\n\t    }\n\t    if (lengthLimit == undefined) {\n\t        lengthLimit = 2;\n\t    }\n\t    if (truncateName == undefined) {\n\t        truncateName = false;\n\t    }\n\t    if (_.isString(value)) {\n\t        var listOfAddresses = EmailUtils_1.EmailUtils.splitSemicolonSeparatedListOfEmailAddresses(value);\n\t        return EmailUtils_1.EmailUtils.emailAddressesToHyperlinks(listOfAddresses, companyDomain, me, lengthLimit, truncateName);\n\t    }\n\t    else if (_.isArray(value)) {\n\t        return EmailUtils_1.EmailUtils.emailAddressesToHyperlinks(value, companyDomain, me, lengthLimit, truncateName);\n\t    }\n\t    else {\n\t        return undefined;\n\t    }\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('excessEmailToggle', function (target) {\n\t    Dom_1.$$(target).removeClass('coveo-active');\n\t    if (Dom_1.$$(target).hasClass('coveo-emails-excess-collapsed')) {\n\t        _.each(Dom_1.$$(target).siblings('.coveo-emails-excess-expanded'), function (sibling) {\n\t            Dom_1.$$(sibling).addClass('coveo-active');\n\t        });\n\t    }\n\t    else if (Dom_1.$$(target).hasClass('coveo-hide-expanded')) {\n\t        Dom_1.$$(target.parentElement).addClass('coveo-inactive');\n\t        _.each(Dom_1.$$(target.parentElement).siblings('.coveo-emails-excess-collapsed'), function (sibling) {\n\t            Dom_1.$$(sibling).addClass('coveo-active');\n\t        });\n\t    }\n\t    return undefined;\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('anchor', function (href, options) {\n\t    return HtmlUtils_1.AnchorUtils.buildAnchor(href, options);\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('image', function (src, options) {\n\t    return HtmlUtils_1.ImageUtils.buildImage(src, options);\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('thumbnail', function (result, endpoint, options) {\n\t    if (result === void 0) { result = resolveQueryResult(); }\n\t    if (endpoint === void 0) { endpoint = 'default'; }\n\t    if (QueryUtils_1.QueryUtils.hasThumbnail(result)) {\n\t        return HtmlUtils_1.ImageUtils.buildImageFromResult(result, SearchEndpoint_1.SearchEndpoint.endpoints[endpoint], options);\n\t    }\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('fromFileTypeToIcon', function (result, options) {\n\t    if (result === void 0) { result = resolveQueryResult(); }\n\t    if (options === void 0) { options = {}; }\n\t    return Icon_1.Icon.createIcon(result, options).outerHTML;\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('attrEncode', function (value) {\n\t    return ('' + value) /* Forces the conversion to string. */\n\t        .replace(/&/g, '&amp;') /* This MUST be the 1st replacement. */\n\t        .replace(/'/g, '&apos;') /* The 4 other predefined entities, required. */\n\t        .replace(/'/g, '&quot;')\n\t        .replace(/</g, '&lt;')\n\t        .replace(/>/g, '&gt;');\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('templateFields', function (result) {\n\t    if (result === void 0) { result = resolveQueryResult(); }\n\t    var rows = [];\n\t    if (result.fields != null) {\n\t        _.forEach(result.fields, function (tableField) {\n\t            var tr = Dom_1.$$('tr');\n\t            _.forEach(tableField, function (value, key) {\n\t                if (_.isObject(value)) {\n\t                    tr.setAttribute(ComponentOptions_1.ComponentOptions.attrNameFromName(key), JSON.stringify(value));\n\t                }\n\t                else {\n\t                    tr.setAttribute(ComponentOptions_1.ComponentOptions.attrNameFromName(key), value);\n\t                }\n\t            });\n\t            return rows.push(tr.el.outerHTML);\n\t        });\n\t    }\n\t    return rows.join('');\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('loadTemplates', function (templatesToLoad, once) {\n\t    if (once === void 0) { once = true; }\n\t    var ret = '';\n\t    var data = resolveQueryResult();\n\t    var atLeastOneWasLoaded = false;\n\t    var toLoad = templatesToLoad;\n\t    var defaultTmpl;\n\t    _.each(templatesToLoad, function (value, key, obj) {\n\t        if (value == 'default') {\n\t            defaultTmpl = key;\n\t        }\n\t    });\n\t    if (defaultTmpl != undefined) {\n\t        toLoad = _.omit(templatesToLoad, defaultTmpl);\n\t    }\n\t    _.each(toLoad, function (condition, id, obj) {\n\t        if (!atLeastOneWasLoaded || !once) {\n\t            atLeastOneWasLoaded = atLeastOneWasLoaded || condition;\n\t            ret += TemplateHelpers_1.TemplateHelpers.getHelper('loadTemplate')(id, condition, data);\n\t        }\n\t    });\n\t    if (!atLeastOneWasLoaded && defaultTmpl != undefined) {\n\t        ret += TemplateHelpers_1.TemplateHelpers.getHelper('loadTemplate')(defaultTmpl, true, data);\n\t    }\n\t    return ret;\n\t});\n\tvar byteMeasure = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB'];\n\tTemplateHelpers_1.TemplateHelpers.registerFieldHelper('size', function (value, options) {\n\t    var size = Number(value);\n\t    var presision = (options != null && options.presision != null ? options.presision : 2);\n\t    var base = (options != null && options.base != null ? options.base : 0);\n\t    while (size > 1024 && base + 1 < byteMeasure.length) {\n\t        size /= 1024;\n\t        base++;\n\t    }\n\t    size = Math.floor(size * Math.pow(10, presision)) / Math.pow(10, presision);\n\t    return size + ' ' + byteMeasure[base];\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('loadTemplate', function (id, condition, data) {\n\t    if (condition === void 0) { condition = true; }\n\t    if (Utils_1.Utils.isNullOrUndefined(data)) {\n\t        data = resolveQueryResult();\n\t    }\n\t    if (condition) {\n\t        return TemplateCache_1.TemplateCache.getTemplate(id).instantiateToString(data, false);\n\t    }\n\t    return '';\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('encodeCarriageReturn', function (data) {\n\t    if (Utils_1.Utils.isNullOrUndefined(data)) {\n\t        return undefined;\n\t    }\n\t    else {\n\t        return StringUtils_1.StringUtils.encodeCarriageReturn(data);\n\t    }\n\t});\n\tTemplateHelpers_1.TemplateHelpers.registerTemplateHelper('isMobileDevice', function () {\n\t    return DeviceUtils_1.DeviceUtils.isMobileDevice() ? DeviceUtils_1.DeviceUtils.getDeviceName() : null;\n\t});\n\tfunction resolveQueryResult() {\n\t    return ResultList_1.ResultList.resultCurrentlyBeingRendered || Quickview_1.Quickview.resultCurrentlyBeingRendered;\n\t}\n\tfunction resolveTermsToHighlight() {\n\t    var currentQueryResult = resolveQueryResult();\n\t    if (currentQueryResult) {\n\t        return currentQueryResult.termsToHighlight;\n\t    }\n\t}\n\tfunction resolvePhrasesToHighlight() {\n\t    var currentQueryResult = resolveQueryResult();\n\t    if (currentQueryResult) {\n\t        return currentQueryResult.phrasesToHighlight;\n\t    }\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 123 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Component_1 = __webpack_require__(95);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar QueryUtils_1 = __webpack_require__(22);\n\tvar Initialization_1 = __webpack_require__(94);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar FileTypes_1 = __webpack_require__(59);\n\tvar Quickview_1 = __webpack_require__(124);\n\tvar Dom_1 = __webpack_require__(56);\n\t/**\n\t * An icon component is a Result template component which outputs the corresponding icon for a given filetype. It uses the\n\t * available icons in the framework, and if no suitable one are found, it fallback on a generic icon.\n\t */\n\tvar Icon = (function (_super) {\n\t    __extends(Icon, _super);\n\t    /**\n\t     * Create a new Icon component\n\t     * @param element\n\t     * @param options\n\t     * @param bindings\n\t     * @param result\n\t     */\n\t    function Icon(element, options, bindings, result) {\n\t        _super.call(this, element, Icon.ID, bindings);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.result = result;\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, Icon, options);\n\t        this.result = this.result || this.resolveResult();\n\t        Assert_1.Assert.exists(this.result);\n\t        var possibleInternalQuickview = Dom_1.$$(this.element).find('.' + Component_1.Component.computeCssClassNameForType(Quickview_1.Quickview.ID));\n\t        if (!Utils_1.Utils.isNullOrUndefined(possibleInternalQuickview) && QueryUtils_1.QueryUtils.hasHTMLVersion(this.result)) {\n\t            Dom_1.$$(this.element).addClass('coveo-with-quickview');\n\t            Dom_1.$$(this.element).on('click', function () {\n\t                var qv = Component_1.Component.get(possibleInternalQuickview);\n\t                qv.open();\n\t            });\n\t        }\n\t        Icon.createIcon(this.result, this.options, element, bindings);\n\t    }\n\t    Icon.createIcon = function (result, options, element, bindings) {\n\t        if (options === void 0) { options = {}; }\n\t        if (element === void 0) { element = Dom_1.$$('div').el; }\n\t        var info = FileTypes_1.FileTypes.get(result);\n\t        info = Icon.preprocessIconInfo(options, info);\n\t        Dom_1.$$(element).toggleClass('coveo-small', options.small === true);\n\t        if (options.value != undefined) {\n\t            if (options.small === true) {\n\t                if (options.value.indexOf('-small') == -1) {\n\t                    info.icon += '-small';\n\t                }\n\t            }\n\t            if (options.small === false) {\n\t                if (options.value.indexOf('-small') != -1) {\n\t                    info.icon = info.icon.replace('-small', '');\n\t                }\n\t            }\n\t        }\n\t        Dom_1.$$(element).addClass(info.icon);\n\t        element.setAttribute('title', info.caption);\n\t        if (Icon.shouldDisplayLabel(options, bindings)) {\n\t            element.appendChild(Dom_1.$$('span', {\n\t                className: 'coveo-icon-caption-overlay'\n\t            }, info.caption).el);\n\t            Dom_1.$$(element).addClass('coveo-icon-with-caption-overlay');\n\t        }\n\t        return element;\n\t    };\n\t    Icon.shouldDisplayLabel = function (options, bindings) {\n\t        // Display only in new design.\n\t        // If withLabel is explicitely set to false, the label will never display\n\t        // If withLabel is explicitely set to true, the label will always display\n\t        // If withLabel is set to default value (not a hard true or false), the label will display based on ./core/filetypes/**.json\n\t        // with the property shouldDisplayLabel set on each file type/ objecttype\n\t        // In this case, the generated css will take care of outputting the correct css to display : block\n\t        return bindings && bindings.searchInterface.isNewDesign() && options.withLabel !== false;\n\t    };\n\t    Icon.preprocessIconInfo = function (options, info) {\n\t        if (options.labelValue != null) {\n\t            info.caption = options.labelValue;\n\t        }\n\t        if (options.value != null) {\n\t            info.icon = 'coveo-icon ' + options.value;\n\t        }\n\t        if (info.caption == null) {\n\t            info.caption = '';\n\t        }\n\t        if (info.icon == null) {\n\t            info.icon = 'coveo-icon coveo-sprites-custom';\n\t        }\n\t        return info;\n\t    };\n\t    Icon.ID = 'Icon';\n\t    /**\n\t     * The options for the component\n\t     * @componentOptions\n\t     */\n\t    Icon.options = {\n\t        /**\n\t         * Setting this value will tell the `Icon` component to output this value as its CSS class, instead of the auto-selected one.<br/>\n\t         * Default is `undefined`, and the framework will determine an icon from the result filetype.\n\t         */\n\t        value: ComponentOptions_1.ComponentOptions.buildIconOption(),\n\t        /**\n\t         * Setting this value to true will output the smaller version of the auto-generated icon.<br/>\n\t         * Default is `false`.\n\t         */\n\t        small: ComponentOptions_1.ComponentOptions.buildBooleanOption(),\n\t        /**\n\t         * Setting this to true will force the caption/label to appear.<br/>\n\t         * Setting this to false will force the caption/label to never appear.<br/>\n\t         * Default value is `undefined`, and the framework will determine if a label needs to be displayed.\n\t         */\n\t        withLabel: ComponentOptions_1.ComponentOptions.buildBooleanOption(),\n\t        /**\n\t         * Setting this option allow to set the label that should be displayed.<br/>\n\t         * Default value is `undefined`, and the framework will determine the label that will be displayed.\n\t         */\n\t        labelValue: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption()\n\t    };\n\t    Icon.fields = [\n\t        'objecttype',\n\t        'filetype',\n\t    ];\n\t    return Icon;\n\t}(Component_1.Component));\n\texports.Icon = Icon;\n\tInitialization_1.Initialization.registerAutoCreateComponent(Icon);\n\n\n/***/ },\n/* 124 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Component_1 = __webpack_require__(95);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar DomUtils_1 = __webpack_require__(58);\n\tvar DeviceUtils_1 = __webpack_require__(19);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar DefaultQuickviewTemplate_1 = __webpack_require__(125);\n\tvar ResultListEvents_1 = __webpack_require__(47);\n\tvar StringUtils_1 = __webpack_require__(60);\n\tvar QuickviewDocument_1 = __webpack_require__(126);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar QuickviewEvents_1 = __webpack_require__(111);\n\tvar Initialization_1 = __webpack_require__(94);\n\tvar KeyboardUtils_1 = __webpack_require__(67);\n\tvar ExternalModulesShim_1 = __webpack_require__(24);\n\t/**\n\t * This component is meant to exist within a result template.\n\t * It allows to create a button/link inside the result list that opens a modal box for a given result.\n\t *\n\t * Most of the time, this component will reference a {@link QuickviewDocument} in its content template.\n\t *\n\t * # Choosing what to display for the Quickview\n\t * The Quick View uses any HTML structure you put inside its tag and uses that as the content of the dialog box. This content can thus be any element you decide, using your CSS and your structure.\n\t *\n\t * > Example\n\t * > You can change the appearance of the Quick View link by adding HTML inside the body of the div.\n\t * > You can change the content of the Quick View link by specifying a template ID.\n\t *\n\t * ```html\n\t * <!-- This would change the appearance of the quickview button itself in the result. -->\n\t * <div class=\"CoveoQuickview\" data-template-id=\"TemplateId\">\n\t *   <span>Click here for Quickview</span>\n\t * </div>\n\t *\n\t * <!-- This would modify the content of the quickview when it is opened in the modal box -->\n\t * <script class='result-template' type='text/underscore' id='TemplateId' >\n\t *   <div>\n\t *     <span>This is the content that will be displayed when you open the Quick View. You can also include any other Coveo components.</span>\n\t *     <table class=\"CoveoFieldTable\">\n\t *       <tr data-field=\"@liboardshorttitle\" data-caption=\"Board\" />\n\t *       <tr data-field=\"@licategoryshorttitle\" data-caption=\"Category\" />\n\t *       <tr data-field=\"@sysauthor\" data-caption=\"Author\" />\n\t *     </table>\n\t *   </div>\n\t * </script>\n\t *\n\t * <!-- Note that this is all optional: Just including a <div class='CoveoQuickview'></div> will do the job most of the time, and will include a default template and default button appearance -->\n\t * ```\n\t */\n\tvar Quickview = (function (_super) {\n\t    __extends(Quickview, _super);\n\t    function Quickview(element, options, bindings, result, ModalBox) {\n\t        var _this = this;\n\t        if (ModalBox === void 0) { ModalBox = ExternalModulesShim_1.ModalBox; }\n\t        _super.call(this, element, Quickview.ID, bindings);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.bindings = bindings;\n\t        this.result = result;\n\t        this.ModalBox = ModalBox;\n\t        this.bindedHandleEscapeEvent = this.handleEscapeEvent.bind(this);\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, Quickview, options);\n\t        if (this.options.contentTemplate == null) {\n\t            this.options.contentTemplate = new DefaultQuickviewTemplate_1.DefaultQuickviewTemplate();\n\t        }\n\t        // If there is no content inside the Quickview div,\n\t        // we need to add something that will show up in the result template itself\n\t        if (/^\\s*$/.test(this.element.innerHTML)) {\n\t            var iconForQuickview = Dom_1.$$('div');\n\t            iconForQuickview.addClass('coveo-icon-for-quickview');\n\t            if (this.searchInterface.isNewDesign()) {\n\t                var captionForQuickview = Dom_1.$$('div', { className: 'coveo-caption-for-quickview', tabindex: 0 }, 'Quickview'.toLocaleString()).el;\n\t                var div = Dom_1.$$('div');\n\t                div.append(iconForQuickview.el);\n\t                div.append(captionForQuickview);\n\t                Dom_1.$$(this.element).append(div.el);\n\t            }\n\t            else {\n\t                iconForQuickview.text('Quickview'.toLocaleString());\n\t                Dom_1.$$(this.element).append(iconForQuickview.el);\n\t            }\n\t        }\n\t        this.bindClick(result);\n\t        if (this.bindings.resultElement) {\n\t            this.bind.on(this.bindings.resultElement, ResultListEvents_1.ResultListEvents.openQuickview, function () { return _this.open(); });\n\t        }\n\t    }\n\t    /**\n\t     * Open the quickview\n\t     */\n\t    Quickview.prototype.open = function () {\n\t        if (this.modalbox == null) {\n\t            // To prevent the keyboard from opening on mobile if the search bar has focus\n\t            Quickview.resultCurrentlyBeingRendered = this.result;\n\t            Dom_1.$$(document.activeElement).trigger('blur');\n\t            var openerObject = this.prepareOpenQuickviewObject();\n\t            this.createModalBox(openerObject);\n\t            this.bindQuickviewEvents(openerObject);\n\t            this.animateAndOpen();\n\t            this.queryStateModel.set(QueryStateModel_1.QueryStateModel.attributesEnum.quickview, this.getHashId());\n\t            Quickview.resultCurrentlyBeingRendered = null;\n\t        }\n\t    };\n\t    /**\n\t     * Close the quickview\n\t     */\n\t    Quickview.prototype.close = function () {\n\t        if (this.modalbox != null) {\n\t            this.modalbox.close();\n\t            this.modalbox = null;\n\t            Dom_1.$$(document.body).off('keyup', this.bindedHandleEscapeEvent);\n\t        }\n\t    };\n\t    Quickview.prototype.getHashId = function () {\n\t        return this.result.queryUid + '.' + this.result.index + '.' + StringUtils_1.StringUtils.hashCode(this.result.uniqueId);\n\t    };\n\t    Quickview.prototype.bindClick = function (result) {\n\t        var _this = this;\n\t        if (typeof result.hasHtmlVersion == 'undefined' || result.hasHtmlVersion || this.options.alwaysShow) {\n\t            var clickAction = function () { return _this.open(); };\n\t            Dom_1.$$(this.element).on('click', clickAction);\n\t            this.bind.on(this.element, 'keyup', KeyboardUtils_1.KeyboardUtils.keypressAction(KeyboardUtils_1.KEYBOARD.ENTER, clickAction));\n\t        }\n\t        else {\n\t            this.element.style.display = 'none';\n\t        }\n\t    };\n\t    Quickview.prototype.bindQuickviewEvents = function (openerObject) {\n\t        var _this = this;\n\t        var closeButton = Dom_1.$$(this.modalbox.wrapper).find('.coveo-quickview-close-button');\n\t        Dom_1.$$(closeButton).on('click', function () {\n\t            _this.closeQuickview();\n\t            _this.close();\n\t        });\n\t        Dom_1.$$(this.modalbox.overlay).on('click', function () {\n\t            _this.closeQuickview();\n\t        });\n\t        Dom_1.$$(this.modalbox.content).on(QuickviewEvents_1.QuickviewEvents.quickviewLoaded, function () {\n\t            Dom_1.$$(openerObject.loadingAnimation).remove();\n\t            _this.bindIFrameEscape();\n\t        });\n\t        this.bindEscape();\n\t    };\n\t    Quickview.prototype.animateAndOpen = function () {\n\t        var _this = this;\n\t        var animationDuration = this.modalbox.wrapper.style.animationDuration;\n\t        var quickviewDocument = Dom_1.$$(this.modalbox.modalBox).find('.' + Component_1.Component.computeCssClassName(QuickviewDocument_1.QuickviewDocument));\n\t        if (quickviewDocument) {\n\t            if (animationDuration) {\n\t                var duration = /^(.+)(ms|s)$/.exec(animationDuration);\n\t                var durationMs = Number(duration[1]) * (duration[2] == 's' ? 1000 : 1);\n\t                // open the QuickviewDocument\n\t                setTimeout(function () {\n\t                    if (_this.modalbox != null) {\n\t                        Initialization_1.Initialization.dispatchNamedMethodCallOrComponentCreation('open', quickviewDocument, null);\n\t                    }\n\t                }, durationMs);\n\t            }\n\t            else {\n\t                Initialization_1.Initialization.dispatchNamedMethodCallOrComponentCreation('open', quickviewDocument, null);\n\t            }\n\t        }\n\t    };\n\t    Quickview.prototype.createModalBox = function (openerObject) {\n\t        var computedModalBoxContent = Dom_1.$$('div');\n\t        computedModalBoxContent.append(openerObject.content.el);\n\t        this.modalbox = this.ModalBox.open(computedModalBoxContent.el, {\n\t            title: DomUtils_1.DomUtils.getQuickviewHeader(this.result, {\n\t                showDate: this.options.showDate,\n\t                title: this.options.title\n\t            }, this.bindings).el.outerHTML,\n\t            className: 'coveo-quick-view',\n\t            validation: function () { return true; },\n\t            body: this.element.ownerDocument.body\n\t        });\n\t        this.setQuickviewSize();\n\t    };\n\t    Quickview.prototype.prepareOpenQuickviewObject = function () {\n\t        var loadingAnimation = this.options.loadingAnimation;\n\t        return {\n\t            loadingAnimation: loadingAnimation,\n\t            content: this.prepareQuickviewContent(loadingAnimation)\n\t        };\n\t    };\n\t    Quickview.prototype.prepareQuickviewContent = function (loadingAnimation) {\n\t        var content = Dom_1.$$(this.options.contentTemplate.instantiateToElement(this.result));\n\t        var initOptions = this.searchInterface.options;\n\t        var initParameters = {\n\t            options: initOptions,\n\t            bindings: this.getBindings(),\n\t            result: this.result\n\t        };\n\t        Initialization_1.Initialization.automaticallyCreateComponentsInside(content.el, initParameters);\n\t        if (content.find('.' + Component_1.Component.computeCssClassName(QuickviewDocument_1.QuickviewDocument)) != undefined && this.options.enableLoadingAnimation) {\n\t            content.prepend(loadingAnimation);\n\t        }\n\t        return content;\n\t    };\n\t    Quickview.prototype.bindEscape = function () {\n\t        Dom_1.$$(document.body).on('keyup', this.bindedHandleEscapeEvent);\n\t    };\n\t    Quickview.prototype.bindIFrameEscape = function () {\n\t        var quickviewDocument = Dom_1.$$(this.modalbox.content).find('.' + Component_1.Component.computeCssClassName(QuickviewDocument_1.QuickviewDocument));\n\t        quickviewDocument = Dom_1.$$(quickviewDocument).find('iframe');\n\t        var body = quickviewDocument.contentWindow.document.body;\n\t        Dom_1.$$(body).on('keyup', this.bindedHandleEscapeEvent);\n\t    };\n\t    Quickview.prototype.closeQuickview = function () {\n\t        this.queryStateModel.set(QueryStateModel_1.QueryStateModel.attributesEnum.quickview, '');\n\t    };\n\t    Quickview.prototype.setQuickviewSize = function () {\n\t        var wrapper = Dom_1.$$(Dom_1.$$(this.modalbox.modalBox).find('.coveo-wrapper'));\n\t        wrapper.el.style.width = this.options.size;\n\t        wrapper.el.style.height = this.options.size;\n\t        wrapper.el.style.maxWidth = this.options.size;\n\t        wrapper.el.style.maxHeight = this.options.size;\n\t    };\n\t    Quickview.prototype.handleEscapeEvent = function (e) {\n\t        if (e.keyCode == KeyboardUtils_1.KEYBOARD.ESCAPE) {\n\t            this.closeQuickview();\n\t            this.close();\n\t        }\n\t    };\n\t    Quickview.ID = 'Quickview';\n\t    Quickview.fields = [\n\t        'urihash',\n\t        'collection',\n\t        'source',\n\t        'author' // analytics\n\t    ];\n\t    /**\n\t     * @componentOptions\n\t     */\n\t    Quickview.options = {\n\t        /**\n\t         * Specifies whether the quickview is always shown, even when the index body for a document is empty.<br/>\n\t         * In such cases, the {@link Quickview.options.contentTemplate} specifies what appears in the quickview.<br/>\n\t         * If there is no quickview for the document, you *MUST* specify a contentTemplate otherwise the component will throw an error when opened.\n\t         */\n\t        alwaysShow: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * Specifies the title of your choice that appears at the top of the Quick View modal window.\n\t         */\n\t        title: ComponentOptions_1.ComponentOptions.buildStringOption(),\n\t        /**\n\t         * Specifies whether to show the document date in the Quick View modal window header.<br/>\n\t         * The default value is `true`.\n\t         */\n\t        showDate: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        enableLoadingAnimation: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        /**\n\t         * Specifies the template to use to present the Quick View content in the modal window.<br/>\n\t         * e.g.: <br/>\n\t         *     <div class=\"CoveoQuickview\" data-template-id=\"TemplateId\"></div>\n\t         *     <div class=\"CoveoQuickview\" data-template-selector=\".templateSelector\"></div>\n\t         */\n\t        contentTemplate: ComponentOptions_1.ComponentOptions.buildTemplateOption({\n\t            selectorAttr: 'data-template-selector',\n\t            idAttr: 'data-template-id'\n\t        }),\n\t        loadingAnimation: ComponentOptions_1.ComponentOptions.buildOption(ComponentOptions_1.ComponentOptionsType.NONE, function (element) {\n\t            var loadingAnimationSelector = element.getAttribute('data-loading-animation-selector');\n\t            if (loadingAnimationSelector != null) {\n\t                var loadingAnimation = Dom_1.$$(document.documentElement).find(loadingAnimationSelector);\n\t                if (loadingAnimation != null) {\n\t                    Dom_1.$$(loadingAnimation).detach();\n\t                    return loadingAnimation;\n\t                }\n\t            }\n\t            var id = element.getAttribute('data-loading-animation-template-id');\n\t            if (id != null) {\n\t                var loadingAnimationTemplate = ComponentOptions_1.ComponentOptions.loadResultTemplateFromId(id);\n\t                if (loadingAnimationTemplate) {\n\t                    return loadingAnimationTemplate.instantiateToElement({});\n\t                }\n\t            }\n\t            return DomUtils_1.DomUtils.getBasicLoadingAnimation();\n\t        }),\n\t        /**\n\t         * Specifies the Quick View modal window size (width and height) relative to the full window.<br/>\n\t         * The default value is 95% on a desktop and 100% on a mobile device.\n\t         */\n\t        size: ComponentOptions_1.ComponentOptions.buildStringOption({ defaultValue: DeviceUtils_1.DeviceUtils.isMobileDevice() ? '100%' : '95%' })\n\t    };\n\t    Quickview.resultCurrentlyBeingRendered = null;\n\t    return Quickview;\n\t}(Component_1.Component));\n\texports.Quickview = Quickview;\n\tInitialization_1.Initialization.registerAutoCreateComponent(Quickview);\n\n\n/***/ },\n/* 125 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Template_1 = __webpack_require__(99);\n\tvar DefaultQuickviewTemplate = (function (_super) {\n\t    __extends(DefaultQuickviewTemplate, _super);\n\t    function DefaultQuickviewTemplate() {\n\t        _super.call(this);\n\t    }\n\t    DefaultQuickviewTemplate.prototype.instantiateToString = function (queryResult) {\n\t        return '<div class=\"coveo-quick-view-full-height\"><div class=\"CoveoQuickviewDocument\"></div></div>';\n\t    };\n\t    return DefaultQuickviewTemplate;\n\t}(Template_1.Template));\n\texports.DefaultQuickviewTemplate = DefaultQuickviewTemplate;\n\n\n/***/ },\n/* 126 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Component_1 = __webpack_require__(95);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar QuickviewEvents_1 = __webpack_require__(111);\n\tvar DeviceUtils_1 = __webpack_require__(19);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar ColorUtils_1 = __webpack_require__(53);\n\tvar Initialization_1 = __webpack_require__(94);\n\tvar Strings_1 = __webpack_require__(33);\n\tvar HIGHLIGHT_PREFIX = 'CoveoHighlight';\n\t/**\n\t * The QuickviewDocument component is meant to exist within Result Templates, more specifically inside a {@link Quickview} component.\n\t * The sole purpose of this component is to include an iframe which will load the correct HTML version of the current document.\n\t * By default, this component is included in the default template for a {@link Quickview} component.\n\t */\n\tvar QuickviewDocument = (function (_super) {\n\t    __extends(QuickviewDocument, _super);\n\t    /**\n\t     * Create a new instance of the component\n\t     * @param element\n\t     * @param options\n\t     * @param bindings\n\t     * @param result\n\t     */\n\t    function QuickviewDocument(element, options, bindings, result) {\n\t        _super.call(this, element, QuickviewDocument.ID, bindings);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.result = result;\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, QuickviewDocument, options);\n\t        this.result = result || this.resolveResult();\n\t        this.termsToHighlightWereModified = false;\n\t        Assert_1.Assert.exists(this.result);\n\t    }\n\t    QuickviewDocument.prototype.createDom = function () {\n\t        var container = Dom_1.$$('div');\n\t        container.addClass('coveo-quickview-document');\n\t        this.element.appendChild(container.el);\n\t        this.header = this.buildHeader();\n\t        this.iframe = this.buildIFrame();\n\t        container.append(this.header.el);\n\t        container.append(this.iframe.el);\n\t    };\n\t    QuickviewDocument.prototype.open = function () {\n\t        var _this = this;\n\t        this.ensureDom();\n\t        var documentURL = Dom_1.$$(this.element).getAttribute('href');\n\t        if (documentURL == undefined || documentURL == '') {\n\t            documentURL = this.result.clickUri;\n\t        }\n\t        this.usageAnalytics.logClickEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.documentQuickview, {\n\t            author: this.result.raw.author,\n\t            documentURL: documentURL,\n\t            documentTitle: this.result.title\n\t        }, this.result, this.queryController.element);\n\t        var beforeLoad = (new Date()).getTime();\n\t        var iframe = this.iframe.find('iframe');\n\t        iframe.src = 'about:blank';\n\t        var endpoint = this.queryController.getEndpoint();\n\t        var termsToHighlight = _.keys(this.result.termsToHighlight);\n\t        var dataToSendOnOpenQuickView = {\n\t            termsToHighlight: termsToHighlight\n\t        };\n\t        Dom_1.$$(this.element).trigger(QuickviewEvents_1.QuickviewEvents.openQuickview, dataToSendOnOpenQuickView);\n\t        this.checkIfTermsToHighlightWereModified(dataToSendOnOpenQuickView.termsToHighlight);\n\t        var queryObject = _.extend({}, this.getBindings().queryController.getLastQuery());\n\t        if (this.termsToHighlightWereModified) {\n\t            this.handleTermsToHighlight(dataToSendOnOpenQuickView.termsToHighlight, queryObject);\n\t        }\n\t        var callOptions = {\n\t            queryObject: queryObject,\n\t            requestedOutputSize: this.options.maximumDocumentSize\n\t        };\n\t        endpoint.getDocumentHtml(this.result.uniqueId, callOptions)\n\t            .then(function (html) {\n\t            // If the contentDocument is null at this point it means that the Quick View\n\t            // was closed before we've finished loading it. In this case do nothing.\n\t            if (iframe.contentDocument == null) {\n\t                return;\n\t            }\n\t            _this.renderHTMLDocument(iframe, html);\n\t            _this.triggerQuickviewLoaded(beforeLoad);\n\t        })\n\t            .catch(function (error) {\n\t            // If the contentDocument is null at this point it means that the Quick View\n\t            // was closed before we've finished loading it. In this case do nothing.\n\t            if (iframe.contentDocument == null) {\n\t                return;\n\t            }\n\t            if (error.status != 0) {\n\t                _this.renderErrorReport(iframe, error.status);\n\t                _this.triggerQuickviewLoaded(beforeLoad);\n\t            }\n\t            else {\n\t                iframe.onload = function () {\n\t                    _this.triggerQuickviewLoaded(beforeLoad);\n\t                };\n\t                iframe.src = endpoint.getViewAsHtmlUri(_this.result.uniqueId, callOptions);\n\t            }\n\t        });\n\t    };\n\t    QuickviewDocument.prototype.renderHTMLDocument = function (iframe, html) {\n\t        var _this = this;\n\t        iframe.onload = function () {\n\t            _this.computeHighlights(iframe.contentWindow);\n\t            // Remove white border for new Quickview\n\t            if (_this.isNewQuickviewDocument(iframe.contentWindow)) {\n\t                var body = Dom_1.$$(_this.element).closest('.coveo-body');\n\t                body.style.padding = '0';\n\t                var header = Dom_1.$$(_this.element).find('.coveo-quickview-header');\n\t                header.style.paddingTop = '10';\n\t                header.style.paddingLeft = '10';\n\t            }\n\t            if (Dom_1.$$(_this.element).find('.coveo-quickview-header').innerHTML == '') {\n\t                Dom_1.$$(_this.element).find('.coveo-quickview-header').style.display = 'none';\n\t            }\n\t        };\n\t        this.writeToIFrame(iframe, html);\n\t        this.wrapPreElementsInIframe(iframe);\n\t    };\n\t    QuickviewDocument.prototype.renderErrorReport = function (iframe, errorStatus) {\n\t        var errorString = '';\n\t        if (errorStatus == 400) {\n\t            errorString = 'NoQuickview';\n\t        }\n\t        else {\n\t            errorString = 'OopsError';\n\t        }\n\t        var errorMessage = \"<html><body style='font-family: Arimo, 'Helvetica Neue', Helvetica, Arial, sans-serif; -webkit-text-size-adjust: none;' >\" + Strings_1.l(errorString) + \" </body></html>\";\n\t        this.writeToIFrame(iframe, errorMessage);\n\t    };\n\t    QuickviewDocument.prototype.writeToIFrame = function (iframe, content) {\n\t        var toWrite = content;\n\t        // This sucks because we can't do instanceof HTMLDocument\n\t        // lib.d.ts declare HTMLDocument as an interface, not an actual object\n\t        if (typeof content == 'object') {\n\t            toWrite = content.getElementsByTagName('html')[0].outerHTML;\n\t        }\n\t        iframe.contentWindow.document.open();\n\t        iframe.contentWindow.document.write(toWrite);\n\t        iframe.contentWindow.document.close();\n\t    };\n\t    QuickviewDocument.prototype.wrapPreElementsInIframe = function (iframe) {\n\t        try {\n\t            var style = document.createElement('style');\n\t            style.type = 'text/css';\n\t            // This CSS forces <pre> tags used in some emails to wrap by default\n\t            var cssText = 'html pre { white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; }';\n\t            // Some people react strongly when presented with their browser's default font, so let's fix that\n\t            cssText += 'body, html { font-family: Arimo, \\'Helvetica Neue\\', Helvetica, Arial, sans-serif; -webkit-text-size-adjust: none; }';\n\t            if (DeviceUtils_1.DeviceUtils.isIos()) {\n\t                // Safari on iOS forces resize iframes to fit their content, even if an explicit size\n\t                // is set on the iframe. Isn't that great? By chance there is a trick around it: by\n\t                // setting a very small size on the body and instead using min-* to set the size to\n\t                // 100% we're able to trick Safari from thinking it must expand the iframe. Amazed.\n\t                // The 'scrolling' part is required otherwise the hack doesn't work.\n\t                //\n\t                // http://stackoverflow.com/questions/23083462/how-to-get-an-iframe-to-be-responsive-in-ios-safari\n\t                cssText += 'body, html { height: 1px !important; min-height: 100%; overflow: scroll; }';\n\t                Dom_1.$$(iframe).setAttribute('scrolling', 'no');\n\t                // Some content is cropped on iOs if a margin is present\n\t                // We remove it and add one on the iframe wrapper.\n\t                cssText += 'body, html {margin: auto}';\n\t                iframe.parentElement.style.margin = '0 0 5px 5px';\n\t                // While we're on the topic of iOS Safari: This magic trick prevents iOS from NOT\n\t                // displaying the content of the iframe. If we don't do this, you'll see the body\n\t                // of the iframe ONLY when viewing the page in the tab switcher.  Isn't that *magical*?\n\t                iframe.style.position = 'relative';\n\t            }\n\t            if ('styleSheet' in style) {\n\t                style['styleSheet'].cssText = cssText;\n\t            }\n\t            else {\n\t                style.appendChild(document.createTextNode(cssText));\n\t            }\n\t            var head = iframe.contentWindow.document.head;\n\t            head.appendChild(style);\n\t        }\n\t        catch (e) {\n\t        }\n\t    };\n\t    QuickviewDocument.prototype.triggerQuickviewLoaded = function (beforeLoad) {\n\t        var afterLoad = (new Date()).getTime();\n\t        var eventArgs = { duration: afterLoad - beforeLoad };\n\t        Dom_1.$$(this.element).trigger(QuickviewEvents_1.QuickviewEvents.quickviewLoaded, eventArgs);\n\t    };\n\t    // An highlighted term looks like:\n\t    //\n\t    //     <span id='CoveoHighlight:X.Y.Z'>a</span>\n\t    //\n\t    // The id has 3 components:\n\t    // - X: the term\n\t    // - Y: the term occurence\n\t    // - Z: the term part\n\t    //\n\t    // For the 'Z' component, if the term 'foo bar' is found in multiple elements, we will see:\n\t    //\n\t    //     <span id='CoveoHighlight:1.1.1'>foo</span>\n\t    //     <span id='CoveoHighlight:1.1.2'>bar</span>\n\t    //\n\t    // Highlighted words can overlap, which looks like:\n\t    //\n\t    //     <span id='CoveoHighlight:1.Y.Z'>\n\t    //         a\n\t    //         <coveotaggedword id='CoveoHighlight:2.Y.Z'>b</coveotaggedword>\n\t    //     </span>\n\t    //     <span id='CoveoHighlight:2.Y.Z'>c</span>\n\t    //\n\t    // In the previous example, the words 'ab' and 'bc' are highlighted.\n\t    //\n\t    // One thing important to note is that the id of all 'coveotaggedword' for\n\t    // the same word AND the first 'span' for that word will have the same id.\n\t    //\n\t    // Example:\n\t    //\n\t    //     <span id='CoveoHighlight:1.1.1'>\n\t    //         a\n\t    //         <coveotaggedword id='CoveoHighlight:2.1.1'>b</coveotaggedword>\n\t    //     </span>\n\t    //     <span id='CoveoHighlight:1.1.2'>\n\t    //         c\n\t    //         <coveotaggedword id='CoveoHighlight:2.1.1'>d</coveotaggedword>\n\t    //     </span>\n\t    //     <span id='CoveoHighlight:2.1.1'>e</span>\n\t    //     <span id='CoveoHighlight:2.1.2'>f</span>\n\t    //\n\t    // In the previous example, the words 'abcd' and 'bcdef' are highlighted.\n\t    //\n\t    // This method is public for testing purposes.\n\t    QuickviewDocument.prototype.computeHighlights = function (window) {\n\t        var _this = this;\n\t        Dom_1.$$(this.header).empty();\n\t        this.keywordsState = [];\n\t        var words = {};\n\t        var highlightsCount = 0;\n\t        _.each(Dom_1.$$(window.document.body).findAll('[id^=\"' + HIGHLIGHT_PREFIX + '\"]'), function (element, index) {\n\t            var idParts = _this.getHighlightIdParts(element);\n\t            if (idParts) {\n\t                var idIndexPart = idParts[1]; // X\n\t                var idOccurencePart = parseInt(idParts[2], 10); // Y\n\t                var idTermPart = parseInt(idParts[3], 10); // Z in <span id='CoveoHighlight:X.Y.Z'>a</span>\n\t                var word = words[idIndexPart];\n\t                // The 'idTermPart' check is to circumvent a bug from the index\n\t                // where an highlight of an empty string start with an idTermPart > 1.\n\t                if (word == null && idTermPart == 1) {\n\t                    words[idIndexPart] = word = {\n\t                        text: _this.getHighlightInnerText(element),\n\t                        count: 1,\n\t                        index: parseInt(idIndexPart, 10),\n\t                        // Here I try to be clever.\n\t                        // An overlaping word:\n\t                        // 1) always start with a 'coveotaggedword' element.\n\t                        // 2) then other 'coveotaggedword' elements may follow\n\t                        // 3) then a 'span' element may follow.\n\t                        //\n\t                        // All 1), 2) and 3) will have the same id so I consider them as\n\t                        // a whole having the id 0 instead of 1.\n\t                        termsCount: element.nodeName.toLowerCase() == 'coveotaggedword' ? 0 : 1,\n\t                        element: element,\n\t                        occurence: idOccurencePart\n\t                    };\n\t                }\n\t                else if (word) {\n\t                    if (word.occurence == idOccurencePart) {\n\t                        if (element.nodeName.toLowerCase() == 'coveotaggedword') {\n\t                            word.text += _this.getHighlightInnerText(element);\n\t                        }\n\t                        else if (word.termsCount < idTermPart) {\n\t                            word.text += _this.getHighlightInnerText(element);\n\t                            word.termsCount += 1;\n\t                        }\n\t                    }\n\t                    word.count = Math.max(word.count, idOccurencePart);\n\t                    highlightsCount += 1;\n\t                }\n\t                // See the method description to understand why this code let us\n\t                // create the word 'bcdef' instead of 'bdef'.\n\t                if (word && word.occurence == idOccurencePart && element.nodeName.toLowerCase() == 'span') {\n\t                    var embeddedWordParts = _this.getHightlightEmbeddedWordIdParts(element);\n\t                    var embeddedWord = embeddedWordParts ? words[embeddedWordParts[1]] : null;\n\t                    if (embeddedWord && embeddedWord.occurence == parseInt(embeddedWordParts[2], 10)) {\n\t                        embeddedWord.text += element.childNodes[0].nodeValue || ''; // only immediate text without children.\n\t                    }\n\t                }\n\t            }\n\t        });\n\t        if (highlightsCount == 0) {\n\t            this.header.el.style.minHeight = '0';\n\t        }\n\t        var resolvedWords = [];\n\t        _.each(words, function (word) {\n\t            // When possible, take care to find the original term from the query instead of the\n\t            // first highlighted version we encounter. This relies on a recent feature by the\n\t            // Search API, but will fallback properly on older versions.\n\t            word.text = _this.resolveOriginalTermFromHighlight(word.text);\n\t            var state = {\n\t                word: word,\n\t                color: word.element.style.backgroundColor,\n\t                currentIndex: 0,\n\t                index: word.index\n\t            };\n\t            _this.keywordsState.push(state);\n\t            Dom_1.$$(_this.header).append(_this.buildWordButton(state, window));\n\t            resolvedWords.push(word.text);\n\t        });\n\t        return resolvedWords;\n\t    };\n\t    QuickviewDocument.prototype.getHighlightIdParts = function (element) {\n\t        var parts = element\n\t            .id\n\t            .substr(HIGHLIGHT_PREFIX.length + 1)\n\t            .match(/^([0-9]+)\\.([0-9]+)\\.([0-9]+)$/);\n\t        return (parts && parts.length > 3) ? parts : null;\n\t    };\n\t    QuickviewDocument.prototype.getHighlightInnerText = function (element) {\n\t        if (element.nodeName.toLowerCase() == 'coveotaggedword') {\n\t            // only immediate text without children.\n\t            return element.childNodes.length >= 1 ? (element.childNodes.item(0).textContent || '') : '';\n\t        }\n\t        else {\n\t            return element.textContent || '';\n\t        }\n\t    };\n\t    QuickviewDocument.prototype.getHightlightEmbeddedWordIdParts = function (element) {\n\t        var embedded = element.getElementsByTagName('coveotaggedword')[0];\n\t        return embedded ? this.getHighlightIdParts(embedded) : null;\n\t    };\n\t    QuickviewDocument.prototype.resolveOriginalTermFromHighlight = function (highlight) {\n\t        var _this = this;\n\t        var found = highlight;\n\t        // Beware, terms to highlight is only set by recent search APIs.\n\t        if (this.result.termsToHighlight) {\n\t            // We look for the term expansion and we'll return the corresponding\n\t            // original term is one is found.\n\t            found = _.find(_.keys(this.result.termsToHighlight), function (originalTerm) {\n\t                // The expansions do NOT include the original term (makes sense), so be sure to check\n\t                // the original term for a match too.\n\t                return (originalTerm.toLowerCase() == highlight.toLowerCase()) ||\n\t                    (_.find(_this.result.termsToHighlight[originalTerm], function (expansion) { return expansion.toLowerCase() == highlight.toLowerCase(); }) != undefined);\n\t            }) || found;\n\t        }\n\t        return found;\n\t    };\n\t    QuickviewDocument.prototype.buildWordButton = function (wordState, window) {\n\t        var _this = this;\n\t        var wordHtml = Dom_1.$$('span');\n\t        wordHtml.addClass('coveo-term-for-quickview');\n\t        var quickviewName = Dom_1.$$('span');\n\t        quickviewName.addClass('coveo-term-for-quickview-name');\n\t        quickviewName.setHtml(wordState.word.text);\n\t        quickviewName.on('click', function () {\n\t            _this.navigate(wordState, false, window);\n\t        });\n\t        wordHtml.append(quickviewName.el);\n\t        var quickviewUpArrow = Dom_1.$$('span');\n\t        quickviewUpArrow.addClass('coveo-term-for-quickview-up-arrow');\n\t        var quickviewUpArrowIcon = Dom_1.$$('span');\n\t        quickviewUpArrowIcon.addClass('coveo-term-for-quickview-up-arrow-icon');\n\t        quickviewUpArrow.append(quickviewUpArrowIcon.el);\n\t        quickviewUpArrow.on('click', function () {\n\t            _this.navigate(wordState, true, window);\n\t        });\n\t        wordHtml.append(quickviewUpArrow.el);\n\t        var quickviewDownArrow = Dom_1.$$('span');\n\t        quickviewDownArrow.addClass('coveo-term-for-quickview-down-arrow');\n\t        var quickviewDownArrowIcon = Dom_1.$$('span');\n\t        quickviewDownArrowIcon.addClass('coveo-term-for-quickview-down-arrow-icon');\n\t        quickviewDownArrow.append(quickviewDownArrowIcon.el);\n\t        quickviewDownArrow.on('click', function () {\n\t            _this.navigate(wordState, false, window);\n\t        });\n\t        wordHtml.append(quickviewDownArrow.el);\n\t        wordHtml.el.style.backgroundColor = wordState.color;\n\t        wordHtml.el.style.borderColor = this.getSaturatedColor(wordState.color);\n\t        quickviewDownArrow.el.style.borderColor = this.getSaturatedColor(wordState.color);\n\t        return wordHtml.el;\n\t    };\n\t    QuickviewDocument.prototype.navigate = function (state, backward, window) {\n\t        var fromIndex = state.currentIndex;\n\t        var toIndex;\n\t        if (!backward) {\n\t            toIndex = fromIndex == state.word.count ? 1 : fromIndex + 1;\n\t        }\n\t        else {\n\t            toIndex = fromIndex <= 1 ? state.word.count : fromIndex - 1;\n\t        }\n\t        var scroll = this.getScrollingElement(window);\n\t        // Un-highlight any currently selected element\n\t        var current = Dom_1.$$(scroll).find('[id^=\"' + HIGHLIGHT_PREFIX + ':' + state.word.index + '.' + fromIndex + '\"]');\n\t        if (current) {\n\t            current.style.border = '';\n\t        }\n\t        // Find and highlight the new element.\n\t        var element = Dom_1.$$(window.document.body).find('[id^=\"' + HIGHLIGHT_PREFIX + ':' + state.word.index + '.' + toIndex + '\"]');\n\t        element.style.border = '1px dotted #333';\n\t        state.currentIndex = toIndex;\n\t        // pdf2html docs hide the non-visible frames by default, to speed up browsers.\n\t        // But this prevents keyword navigation from working so we must force show it. This\n\t        // is done by adding the 'opened' class to it (defined by pdf2html).\n\t        if (this.isNewQuickviewDocument(window)) {\n\t            var pdf = Dom_1.$$(element).closest('.pc');\n\t            Dom_1.$$(pdf).addClass('opened');\n\t        }\n\t        // pdf2html docs hide the non-visible frames by default, to speed up browsers.\n\t        // Hack for now: the new Quick View is far too complex to manually scroll\n\t        // to the content, so SCREW IT and use good ol' scrollIntoView. I'm planning\n\t        // on a page-based quick view in an upcoming hackaton anyway :)\n\t        //\n\t        // Also, mobile devices have troubles with the animation.\n\t        if (this.isNewQuickviewDocument(window) || DeviceUtils_1.DeviceUtils.isMobileDevice()) {\n\t            element.scrollIntoView();\n\t            // iOS on Safari might scroll the whole modal box body when we do this,\n\t            // so give it a nudge in the right direction.\n\t            var body = this.iframe.closest('.coveo-body');\n\t            body.scrollLeft = 0;\n\t            body.scrollTop = 0;\n\t            return;\n\t        }\n\t        // For other quick views we use a nicer animation that centers the keyword\n\t        this.animateScroll(scroll, element.offsetLeft - scroll.clientWidth / 2 + Dom_1.$$(element).width() / 2, element.offsetTop - scroll.clientHeight / 2 + Dom_1.$$(element).height() / 2);\n\t        this.animateScroll(this.iframe.el, element.offsetLeft - this.iframe.width() / 2 + Dom_1.$$(element).width() / 2, element.offsetTop - this.iframe.height() / 2 + Dom_1.$$(element).height() / 2);\n\t    };\n\t    QuickviewDocument.prototype.buildHeader = function () {\n\t        var header = Dom_1.$$('div');\n\t        header.addClass('coveo-quickview-header');\n\t        return header;\n\t    };\n\t    QuickviewDocument.prototype.buildIFrame = function () {\n\t        var iFrame = Dom_1.$$('iframe');\n\t        iFrame.setAttribute('sandbox', 'allow-same-origin');\n\t        var iFrameWrapper = Dom_1.$$('div');\n\t        iFrameWrapper.addClass('coveo-iframeWrapper');\n\t        iFrameWrapper.el.appendChild(iFrame.el);\n\t        return iFrameWrapper;\n\t    };\n\t    QuickviewDocument.prototype.getScrollingElement = function (iframeWindow) {\n\t        var found;\n\t        if (this.isNewQuickviewDocument(iframeWindow)) {\n\t            // 'New' quick views have a #page-container element generated by the pdf2html thing.\n\t            // This is the element we want to scroll on.\n\t            found = Dom_1.$$(iframeWindow.document.body).find('#page-container');\n\t        }\n\t        // If all else fails, we use the body\n\t        if (!found) {\n\t            found = Dom_1.$$(iframeWindow.document.body).el;\n\t        }\n\t        return found;\n\t    };\n\t    QuickviewDocument.prototype.isNewQuickviewDocument = function (iframeWindow) {\n\t        var meta = Dom_1.$$(iframeWindow.document.head).find('meta[name=\\'generator\\']');\n\t        return meta && meta.getAttribute('content') == 'pdf2htmlEX';\n\t    };\n\t    QuickviewDocument.prototype.handleTermsToHighlight = function (termsToHighlight, queryObject) {\n\t        var _this = this;\n\t        for (var term in this.result.termsToHighlight) {\n\t            delete this.result.termsToHighlight[term];\n\t        }\n\t        var query = '';\n\t        _.each(termsToHighlight, function (term) {\n\t            query += term + ' ';\n\t            _this.result.termsToHighlight[term] = new Array(term);\n\t        });\n\t        query = query.substring(0, query.length - 1);\n\t        queryObject.q = query;\n\t    };\n\t    QuickviewDocument.prototype.checkIfTermsToHighlightWereModified = function (termsToHighlight) {\n\t        if (!Utils_1.Utils.arrayEqual(termsToHighlight, _.keys(this.result.termsToHighlight))) {\n\t            this.termsToHighlightWereModified = true;\n\t        }\n\t    };\n\t    QuickviewDocument.prototype.getSaturatedColor = function (color) {\n\t        var r = parseInt(color.substring(4, 7));\n\t        var g = parseInt(color.substring(9, 12));\n\t        var b = parseInt(color.substring(14, 17));\n\t        var hsv = ColorUtils_1.ColorUtils.rgbToHsv(r, g, b);\n\t        hsv[1] *= 2;\n\t        if (hsv[1] > 1) {\n\t            hsv[1] = 1;\n\t        }\n\t        var rgb = ColorUtils_1.ColorUtils.hsvToRgb(hsv[0], hsv[1], hsv[2]);\n\t        return 'rgb(' + rgb[0].toString() + ', ' + rgb[1].toString() + ', ' + rgb[2].toString() + ')';\n\t    };\n\t    QuickviewDocument.prototype.animateScroll = function (scroll, scrollLeftValue, scrollTopValue, duration) {\n\t        if (duration === void 0) { duration = 100; }\n\t        var leftStep = Math.round((scrollLeftValue - scroll.scrollLeft) / duration);\n\t        var topStep = Math.round((scrollTopValue - scroll.scrollTop) / duration);\n\t        var interval = setInterval(function () {\n\t            if (duration != 0) {\n\t                scroll.scrollLeft += leftStep;\n\t                scroll.scrollTop += topStep;\n\t                duration -= 1;\n\t            }\n\t            else {\n\t                clearInterval(interval);\n\t            }\n\t        }, 1);\n\t    };\n\t    QuickviewDocument.ID = 'QuickviewDocument';\n\t    /**\n\t     * The options for the component\n\t     * @componentOptions\n\t     */\n\t    QuickviewDocument.options = {\n\t        /**\n\t         * Specifies the maximum document size (the preview) that should be returned by the index.\n\t         *\n\t         * By default its value is 0, and the whole preview is returned.\n\t         */\n\t        maximumDocumentSize: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 0, min: 0 }),\n\t    };\n\t    return QuickviewDocument;\n\t}(Component_1.Component));\n\texports.QuickviewDocument = QuickviewDocument;\n\tInitialization_1.Initialization.registerAutoCreateComponent(QuickviewDocument);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 127 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar DefaultResultTemplate_1 = __webpack_require__(103);\n\tvar Component_1 = __webpack_require__(95);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar Model_1 = __webpack_require__(86);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar QueryUtils_1 = __webpack_require__(22);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar Initialization_1 = __webpack_require__(94);\n\tvar Defer_1 = __webpack_require__(30);\n\tvar DeviceUtils_1 = __webpack_require__(19);\n\tvar ResultListEvents_1 = __webpack_require__(47);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar DomUtils_1 = __webpack_require__(58);\n\tvar Recommendation_1 = __webpack_require__(110);\n\tvar DefaultRecommendationTemplate_1 = __webpack_require__(128);\n\t/**\n\t * This component is responsible for displaying the results of the current query using one or more result templates.<br/>\n\t * It supports many additional features such as infinite scrolling.\n\t *\n\t * # Examples / samples\n\t * This contains some quick example. Refer to result templates on developers.coveo.com for more information.\n\t *\n\t * ```html\n\t * <!-- A very simple result list with a single underscore template.\n\t * The template has no condition : It will load for all results.\n\t * Every results will show the same template. -->\n\t *\n\t * <div class=\"CoveoResultList\">\n\t *   <script class=\"result-template\" type=\"text/underscore\" id='MyDefaultTemplate'>\n\t *     <div>\n\t *       <a class='CoveoResultLink'>Hey, click on this ! <%- title %></a>\n\t *     </div>\n\t *   </script>\n\t * </div>\n\t *\n\t * <!-- 2 different template in the same result list : The first template has a condition attribute, the second one does not.\n\t *\n\t * The first condition will be evaluated against each result. If a result match this condition (in this case if the result.raw.objecttype property in the JSON equals MyObjectType) then the template will be rendered and the next template won't be rendered or evaluated for this result. -->\n\t *\n\t * If the result does not match the first template, the next one will be evaluated. Since the second one has no condition, it is always considered \"true\" and will load as a fallback.\n\t *\n\t * This process will repeat for each result that was returned by the query to the index. -->\n\t *\n\t * <div class=\"CoveoResultList\">\n\t *   <script class=\"result-template\" type=\"text/underscore\" data-condition='raw.objecttype==MyObjectType' id='MyObjectTypeTemplate'>\n\t *     <div>\n\t *       <a class='CoveoResultLink'>Hey, click on this ! <%- title %></a>\n\t *       <div class='CoveoExcerpt'></div>\n\t *       <span>This is a result for the type : <%- raw.objecttype %></span>\n\t *     </div>\n\t *   </script>\n\t *\n\t *   <script class=\"result-template\" type=\"text/underscore\">\n\t *     <div>\n\t *       <a class='CoveoResultLink'>Hey, click on this ! <%- title %></a>\n\t *     </div>\n\t *   </script>\n\t * </div>\n\t *\n\t * <!-- 2 different template in the same result list : Both have a data-condition attribute.\n\t *\n\t * Same as before : the condition will be evaluated against all results.\n\t *\n\t * Since there is no \"default\" template with no condition specified, the framework will fallback on the default templates included in the framework if no template match a given result. This is to ensure that all results get rendered -->\n\t *\n\t * <div class=\"CoveoResultList\">\n\t *   <script class=\"result-template\" type=\"text/underscore\" data-condition='raw.objecttype==MyObjectType' id='MyObjectTypeTemplate'>\n\t *     <div>\n\t *       <a class='CoveoResultLink'>Hey, click on this ! <%- title %></a>\n\t *       <div class='CoveoExcerpt'></div>\n\t *       <span>This is a result for the type : <%- raw.objecttype %></span>\n\t *      </div>\n\t *   </script>\n\t *\n\t *   <script class=\"result-template\" type=\"text/underscore\" data-condition='raw.objecttype==MySecondObjectType' id='MySecondObjectTypeTemplate'>\n\t *     <div>\n\t *       <span class='CoveoIcon'></span>\n\t *       <a class='CoveoResultLink'></a>\n\t *     </div>\n\t *     <div class='CoveoExcerpt'></div>\n\t *     <div class='CoveoPrintableUri'></div>\n\t *   </script>\n\t * </div>\n\t * ```\n\t */\n\tvar ResultList = (function (_super) {\n\t    __extends(ResultList, _super);\n\t    /**\n\t     * Create a new ResultList.<br/>\n\t     * Bind various event related to queries (eg : on querySuccess -> renderResults)<br/>\n\t     * Bind scroll event if infinite scrolling is enabled.\n\t     * @param element The HTMLElement on which the element will be instantiated.\n\t     * @param options The options for the ResultList.\n\t     * @param bindings The bindings that the component requires to function normally. If not set, will automatically resolve them (With slower execution time)\n\t     * @param elementClassId The class that this component should instantiate. By default this will be CoveoResultList. This is used by component that extends the base ResultList\n\t     */\n\t    function ResultList(element, options, bindings, elementClassId) {\n\t        var _this = this;\n\t        if (elementClassId === void 0) { elementClassId = ResultList.ID; }\n\t        _super.call(this, element, elementClassId, bindings);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.bindings = bindings;\n\t        this.currentlyDisplayedResults = [];\n\t        this.reachedTheEndOfResults = false;\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, ResultList, options);\n\t        Assert_1.Assert.exists(element);\n\t        Assert_1.Assert.exists(this.options);\n\t        Assert_1.Assert.exists(this.options.resultContainer);\n\t        Assert_1.Assert.exists(this.options.resultTemplate);\n\t        Assert_1.Assert.exists(this.options.waitAnimationContainer);\n\t        Assert_1.Assert.exists(this.options.infiniteScrollContainer);\n\t        this.showOrHideElementsDependingOnState(false, false);\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.newQuery, function (args) { return _this.handleNewQuery(); });\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.buildingQuery, function (args) { return _this.handleBuildingQuery(args); });\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.querySuccess, function (args) { return _this.handleQuerySuccess(args); });\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.duringQuery, function (args) { return _this.handleDuringQuery(); });\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.queryError, function (args) { return _this.handleQueryError(); });\n\t        if (this.options.enableInfiniteScroll) {\n\t            this.bind.on(this.options.infiniteScrollContainer, 'scroll', function (e) { return _this.handleScrollOfResultList(); });\n\t        }\n\t        this.bind.onQueryState(Model_1.MODEL_EVENTS.CHANGE_ONE, QueryStateModel_1.QUERY_STATE_ATTRIBUTES.FIRST, function () { return _this.handlePageChanged(); });\n\t    }\n\t    /**\n\t     * Empty the current result list content and append the given array of HTMLElement.<br/>\n\t     * Can append to existing elements in the result list, or replace them.<br/>\n\t     * Triggers the newResultDiplayed and newResultsDisplayed event\n\t     * @param resultsElement\n\t     * @param append\n\t     */\n\t    ResultList.prototype.renderResults = function (resultsElement, append) {\n\t        var _this = this;\n\t        if (append === void 0) { append = false; }\n\t        if (!append) {\n\t            this.options.resultContainer.innerHTML = '';\n\t        }\n\t        _.each(resultsElement, function (resultElement) {\n\t            _this.options.resultContainer.appendChild(resultElement);\n\t            _this.triggerNewResultDisplayed(Component_1.Component.getResult(resultElement), resultElement);\n\t        });\n\t        this.triggerNewResultsDisplayed();\n\t    };\n\t    /**\n\t     * Build and return an array of HTMLElement with the given result set.\n\t     * @param results\n\t     */\n\t    ResultList.prototype.buildResults = function (results) {\n\t        var _this = this;\n\t        var res = [];\n\t        _.each(results.results, function (result) {\n\t            var resultElement = _this.buildResult(result);\n\t            if (resultElement != null) {\n\t                res.push(resultElement);\n\t            }\n\t        });\n\t        ResultList.resultCurrentlyBeingRendered = null;\n\t        return res;\n\t    };\n\t    /**\n\t     * Build and return an HTMLElement for the given result.\n\t     * @param result\n\t     * @returns {HTMLElement}\n\t     */\n\t    ResultList.prototype.buildResult = function (result) {\n\t        Assert_1.Assert.exists(result);\n\t        QueryUtils_1.QueryUtils.setStateObjectOnQueryResult(this.queryStateModel.get(), result);\n\t        ResultList.resultCurrentlyBeingRendered = result;\n\t        var resultElement = this.options.resultTemplate.instantiateToElement(result);\n\t        if (resultElement != null) {\n\t            Component_1.Component.bindResultToElement(resultElement, result);\n\t        }\n\t        this.autoCreateComponentsInsideResult(resultElement, result);\n\t        return resultElement;\n\t    };\n\t    /**\n\t     * Execute a query to fetch new results. After the query is done, render those new results.<br/>\n\t     * Assert that there is actually more results to display by checking that the last query returned as many results as requested.<br/>\n\t     * Assert that the result list is not currently fetching results\n\t     * @param count The number of results to fetch and display\n\t     */\n\t    ResultList.prototype.displayMoreResults = function (count) {\n\t        var _this = this;\n\t        Assert_1.Assert.isLargerOrEqualsThan(1, count);\n\t        if (this.isCurrentlyFetchingMoreResults()) {\n\t            this.logger.warn('Ignoring request to display more results since we\\'re already doing so');\n\t            return;\n\t        }\n\t        if (!this.hasPotentiallyMoreResultsToDisplay()) {\n\t            this.logger.warn('Ignoring request to display more results since we know there aren\\'t more to display');\n\t            return;\n\t        }\n\t        if (this.options.enableInfiniteScrollWaitingAnimation) {\n\t            this.showWaitingAnimationForInfiniteScrolling();\n\t        }\n\t        this.fetchingMoreResults = this.queryController.fetchMore(count);\n\t        this.fetchingMoreResults.then(function (data) {\n\t            Assert_1.Assert.exists(data);\n\t            _this.usageAnalytics.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.pagerScrolling, {}, _this.element);\n\t            var results = data.results;\n\t            _this.reachedTheEndOfResults = count > data.results.length;\n\t            _this.renderResults(_this.buildResults(data), true);\n\t            _.each(results, function (result) {\n\t                _this.currentlyDisplayedResults.push(result);\n\t            });\n\t            _this.triggerNewResultsDisplayed();\n\t        });\n\t        this.fetchingMoreResults.then(function () {\n\t            _this.hideWaitingAnimationForInfiniteScrolling();\n\t            _this.fetchingMoreResults = undefined;\n\t            Defer_1.Defer.defer(function () { return _this.handleScrollOfResultList(); });\n\t        });\n\t    };\n\t    /**\n\t     * Get the list of currently displayed result\n\t     * @returns {IQueryResult[]}\n\t     */\n\t    ResultList.prototype.getDisplayedResults = function () {\n\t        return this.currentlyDisplayedResults;\n\t    };\n\t    /**\n\t     * Get the list of currently displayed result HTMLElement\n\t     * @returns {HTMLElement[]}\n\t     */\n\t    ResultList.prototype.getDisplayedResultsElements = function () {\n\t        return Dom_1.$$(this.options.resultContainer).findAll('.CoveoResult');\n\t    };\n\t    ResultList.prototype.autoCreateComponentsInsideResult = function (element, result) {\n\t        Assert_1.Assert.exists(element);\n\t        var initOptions = this.searchInterface.options.originalOptionsObject;\n\t        var resultComponentBindings = _.extend({}, this.getBindings(), {\n\t            resultElement: element\n\t        });\n\t        var initParameters = {\n\t            options: initOptions,\n\t            bindings: resultComponentBindings,\n\t            result: result\n\t        };\n\t        Initialization_1.Initialization.automaticallyCreateComponentsInside(element, initParameters);\n\t    };\n\t    ResultList.prototype.triggerNewResultDisplayed = function (result, resultElement) {\n\t        var args = {\n\t            result: result,\n\t            item: resultElement\n\t        };\n\t        Dom_1.$$(this.element).trigger(ResultListEvents_1.ResultListEvents.newResultDisplayed, args);\n\t    };\n\t    ResultList.prototype.triggerNewResultsDisplayed = function () {\n\t        Dom_1.$$(this.element).trigger(ResultListEvents_1.ResultListEvents.newResultsDisplayed, {});\n\t    };\n\t    ResultList.prototype.handleDuringQuery = function () {\n\t        this.logger.trace('Emptying the result container');\n\t        this.cancelFetchingMoreResultsIfNeeded();\n\t        this.showWaitingAnimation();\n\t        this.showOrHideElementsDependingOnState(false, false);\n\t    };\n\t    ResultList.prototype.handleQueryError = function () {\n\t        this.hideWaitingAnimation();\n\t        Dom_1.$$(this.options.resultContainer).empty();\n\t        this.currentlyDisplayedResults = [];\n\t    };\n\t    ResultList.prototype.handleQuerySuccess = function (data) {\n\t        Assert_1.Assert.exists(data);\n\t        Assert_1.Assert.exists(data.results);\n\t        Dom_1.$$(this.element).toggle(!this.disabled);\n\t        if (!this.disabled) {\n\t            var results = data.results;\n\t            this.logger.trace('Received query results from new query', results);\n\t            this.hideWaitingAnimation();\n\t            ResultList.resultCurrentlyBeingRendered = undefined;\n\t            this.currentlyDisplayedResults = [];\n\t            this.renderResults(this.buildResults(data.results));\n\t            this.currentlyDisplayedResults = results.results;\n\t            this.reachedTheEndOfResults = false;\n\t            this.showOrHideElementsDependingOnState(true, this.currentlyDisplayedResults.length != 0);\n\t            if (this.options.enableInfiniteScroll && results.results.length == data.queryBuilder.numberOfResults) {\n\t                // This will check right away if we need to add more results to make the scroll container full & scrolling.\n\t                this.handleScrollOfResultList();\n\t            }\n\t            if (DeviceUtils_1.DeviceUtils.isMobileDevice() && this.options.mobileScrollContainer != undefined) {\n\t                this.options.mobileScrollContainer.scrollTop = 0;\n\t            }\n\t        }\n\t    };\n\t    ResultList.prototype.handleScrollOfResultList = function () {\n\t        if (this.isCurrentlyFetchingMoreResults() || !this.options.enableInfiniteScroll) {\n\t            return;\n\t        }\n\t        if (this.isScrollingOfResultListAlmostAtTheBottom() && this.hasPotentiallyMoreResultsToDisplay()) {\n\t            this.displayMoreResults(this.options.infiniteScrollPageSize);\n\t        }\n\t    };\n\t    ResultList.prototype.handlePageChanged = function () {\n\t        var _this = this;\n\t        this.bind.oneRootElement(QueryEvents_1.QueryEvents.querySuccess, function () {\n\t            if (_this.options.infiniteScrollContainer instanceof Window) {\n\t                var win = _this.options.infiniteScrollContainer;\n\t                win.scrollTo(0, 0);\n\t            }\n\t            else {\n\t                var el = _this.options.infiniteScrollContainer;\n\t                if (el.scrollIntoView) {\n\t                    el.scrollIntoView();\n\t                }\n\t            }\n\t        });\n\t    };\n\t    ResultList.prototype.handleNewQuery = function () {\n\t        Dom_1.$$(this.element).show();\n\t        ResultList.resultCurrentlyBeingRendered = undefined;\n\t    };\n\t    ResultList.prototype.handleBuildingQuery = function (args) {\n\t        if (this.options.fieldsToInclude != null) {\n\t            // remove the @\n\t            args.queryBuilder.addFieldsToInclude(_.map(this.options.fieldsToInclude, function (field) { return field.substr(1); }));\n\t        }\n\t        if (this.options.autoSelectFieldsToInclude) {\n\t            args.queryBuilder.addRequiredFields(this.getAutoSelectedFieldsToInclude());\n\t            args.queryBuilder.includeRequiredFields = true;\n\t        }\n\t    };\n\t    ResultList.prototype.getAutoSelectedFieldsToInclude = function () {\n\t        return _.chain(this.options.resultTemplate.getFields())\n\t            .compact()\n\t            .unique()\n\t            .value();\n\t    };\n\t    ResultList.prototype.isCurrentlyFetchingMoreResults = function () {\n\t        return Utils_1.Utils.exists(this.fetchingMoreResults);\n\t    };\n\t    ResultList.prototype.isScrollingOfResultListAlmostAtTheBottom = function () {\n\t        // this is in a try catch because the unit test fail otherwise (Window does not exist for phantom js in the console)\n\t        var isWindow;\n\t        try {\n\t            isWindow = this.options.infiniteScrollContainer instanceof Window;\n\t        }\n\t        catch (e) {\n\t            isWindow = false;\n\t        }\n\t        return isWindow ? this.isScrollAtBottomForWindowElement() : this.isScrollAtBottomForHtmlElement();\n\t    };\n\t    ResultList.prototype.isScrollAtBottomForWindowElement = function () {\n\t        var windowHeight = new Dom_1.Win(window).height();\n\t        var scrollTop = window.scrollY;\n\t        var bodyHeight = new Dom_1.Doc(document).height();\n\t        return bodyHeight - (windowHeight + scrollTop) < windowHeight / 2;\n\t    };\n\t    ResultList.prototype.isScrollAtBottomForHtmlElement = function () {\n\t        var el = this.options.infiniteScrollContainer;\n\t        var elementHeight = el.clientHeight;\n\t        var scrollHeight = el.scrollHeight;\n\t        var bottomPosition = el.scrollTop + elementHeight;\n\t        return (scrollHeight - bottomPosition) < elementHeight / 2;\n\t    };\n\t    ResultList.prototype.hasPotentiallyMoreResultsToDisplay = function () {\n\t        return this.currentlyDisplayedResults.length > 0 && !this.reachedTheEndOfResults;\n\t    };\n\t    ResultList.prototype.cancelFetchingMoreResultsIfNeeded = function () {\n\t        if (this.isCurrentlyFetchingMoreResults()) {\n\t            this.logger.trace('Cancelling fetching more results');\n\t            Promise.reject(this.fetchingMoreResults);\n\t            this.fetchingMoreResults = undefined;\n\t        }\n\t    };\n\t    ResultList.prototype.showOrHideElementsDependingOnState = function (hasQuery, hasResults) {\n\t        var showIfQuery = Dom_1.$$(this.element).findAll('.coveo-show-if-query');\n\t        var showIfNoQuery = Dom_1.$$(this.element).findAll('.coveo-show-if-no-query');\n\t        var showIfResults = Dom_1.$$(this.element).findAll('.coveo-show-if-results');\n\t        var showIfNoResults = Dom_1.$$(this.element).findAll('.coveo-show-if-no-results');\n\t        _.each(showIfQuery, function (s) {\n\t            Dom_1.$$(s).toggle(hasQuery);\n\t        });\n\t        _.each(showIfNoQuery, function (s) {\n\t            Dom_1.$$(s).toggle(!hasQuery);\n\t        });\n\t        _.each(showIfResults, function (s) {\n\t            Dom_1.$$(s).toggle(hasQuery && hasResults);\n\t        });\n\t        _.each(showIfNoResults, function (s) {\n\t            Dom_1.$$(s).toggle(hasQuery && !hasResults);\n\t        });\n\t    };\n\t    ResultList.prototype.showWaitingAnimation = function () {\n\t        switch (this.options.waitAnimation.toLowerCase()) {\n\t            case 'fade':\n\t                Dom_1.$$(this.options.waitAnimationContainer).addClass('coveo-fade-out');\n\t                break;\n\t            case 'spinner':\n\t                _.each(this.options.resultContainer.children, function (child) {\n\t                    Dom_1.$$(child).hide();\n\t                });\n\t                if (Dom_1.$$(this.options.waitAnimationContainer).find('.coveo-wait-animation') == undefined) {\n\t                    this.options.waitAnimationContainer.appendChild(DomUtils_1.DomUtils.getBasicLoadingAnimation());\n\t                }\n\t                break;\n\t        }\n\t    };\n\t    ResultList.prototype.hideWaitingAnimation = function () {\n\t        switch (this.options.waitAnimation.toLowerCase()) {\n\t            case 'fade':\n\t                Dom_1.$$(this.options.waitAnimationContainer).removeClass('coveo-fade-out');\n\t                break;\n\t            case 'spinner':\n\t                var spinner = Dom_1.$$(this.options.waitAnimationContainer).find('.coveo-loading-spinner');\n\t                if (spinner) {\n\t                    Dom_1.$$(spinner).detach();\n\t                }\n\t                break;\n\t        }\n\t    };\n\t    ResultList.prototype.showWaitingAnimationForInfiniteScrolling = function () {\n\t        this.options.waitAnimationContainer.appendChild(DomUtils_1.DomUtils.getLoadingSpinner());\n\t    };\n\t    ResultList.prototype.hideWaitingAnimationForInfiniteScrolling = function () {\n\t        var spinner = Dom_1.$$(this.options.waitAnimationContainer).find('.coveo-loading-spinner');\n\t        if (spinner) {\n\t            Dom_1.$$(spinner).detach();\n\t        }\n\t    };\n\t    ResultList.getDefaultTemplate = function (e) {\n\t        var component = Component_1.Component.get(e);\n\t        if (component.searchInterface instanceof Recommendation_1.Recommendation) {\n\t            return new DefaultRecommendationTemplate_1.DefaultRecommendationTemplate();\n\t        }\n\t        return new DefaultResultTemplate_1.DefaultResultTemplate();\n\t    };\n\t    ResultList.ID = 'ResultList';\n\t    /**\n\t     * The options for the ResultList\n\t     * @componentOptions\n\t     */\n\t    ResultList.options = {\n\t        /**\n\t         * Specifies the element within which the rendered templates for results are inserted.<br/>\n\t         * The content of this element is cleared when a new query is performed. If this option is not specified, a &lt;div&gt; element will by dynamically created in javascript and appended to the result list and used as a result container.<br/>\n\t         * You can change the container by specifying it's selector: Eg  data-result-container-selector=\"#someCssSelector\"\n\t         */\n\t        resultContainer: ComponentOptions_1.ComponentOptions.buildChildHtmlElementOption({\n\t            defaultFunction: function (element) {\n\t                var d = document.createElement('div');\n\t                element.appendChild(d);\n\t                return d;\n\t            }\n\t        }),\n\t        resultTemplate: ComponentOptions_1.ComponentOptions.buildTemplateOption({ defaultFunction: ResultList.getDefaultTemplate }),\n\t        /**\n\t         * Specifies the type of animation to display while waiting for a new query to finish executing.<br/>\n\t         * Possible values are :<br/>\n\t         * 'fade' : Fades out the currently displayed results while the query is executing.<br/>\n\t         * 'spinner' : Shows a spinning animation while the query is executing.<br/>\n\t         * 'none' : Use no animation during queries.<br/>\n\t         * Default value is 'none'\n\t         */\n\t        waitAnimation: ComponentOptions_1.ComponentOptions.buildStringOption({ defaultValue: 'none' }),\n\t        /**\n\t         * Specifies the element inside which an animation is displayed while waiting for a new query to finish executing.<br/>\n\t         * You can change this by specifying a css selector.<br/>\n\t         * Eg : data-wait-animation-container-selector=\"#someCssSelector\"\n\t         * By default, the animation appears in the the resultContainer.\n\t         */\n\t        waitAnimationContainer: ComponentOptions_1.ComponentOptions.buildChildHtmlElementOption({ postProcessing: function (value, options) { return value || options.resultContainer; } }),\n\t        /**\n\t         * Specifies whether the ResultList automatically retrieves an additional page of results and appends them to those already being displayed whenever the user scrolls to the end of the infiniteScrollContainer.<br/>\n\t         * The waitAnimation will be displayed while additional results are fetched.<br/>\n\t         * Default value is false\n\t         */\n\t        enableInfiniteScroll: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * When infiniteScroll is enabled, specifies the number of additional results that are fetched when the user scrolls to the bottom of the infiniteScrollContainer.<br/>\n\t         * Default value is 10\n\t         */\n\t        infiniteScrollPageSize: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 10, min: 1, depend: 'enableInfiniteScroll' }),\n\t        /**\n\t         * When infinite scrolling is enabled, specifies the element whose scrolling is monitored to trigger fetching of additional results.<br/>\n\t         * By default, the framework will try to find the first scrolling parent it encounter, starting from the ResultList itself<br/>\n\t         * This also means that if it encounter no parent that are scrollable (in css this means having overflow-y: scroll), then the window itself will be the scroll container\n\t         */\n\t        infiniteScrollContainer: ComponentOptions_1.ComponentOptions.buildChildHtmlElementOption({ depend: 'enableInfiniteScroll', defaultFunction: function (element) { return ComponentOptions_1.ComponentOptions.findParentScrolling(element); } }),\n\t        /**\n\t         * Specifies if the wait animation should be displayed when a query is being performed using infinite scroll.<br/>\n\t         * Default value is true\n\t         */\n\t        enableInfiniteScrollWaitingAnimation: ComponentOptions_1.ComponentOptions.buildBooleanOption({ depend: 'enableInfiniteScroll', defaultValue: true }),\n\t        mobileScrollContainer: ComponentOptions_1.ComponentOptions.buildSelectorOption({ defaultFunction: function () { return document.querySelector('.coveo-results-column'); } }),\n\t        /**\n\t         * Specifies a list of fields to include in the query.<br/>\n\t         * This is to ensure that fields that are not needed for the UI to function are not sent by the search API.<br/>\n\t         * By default, this list is empty.<br/>\n\t         * Note that this option has an interaction with autoSelectFieldsToInclude\n\t         */\n\t        fieldsToInclude: ComponentOptions_1.ComponentOptions.buildFieldsOption({ includeInResults: true }),\n\t        /**\n\t         * Specifies that the result list should scan it's template and discover which field it will need to render every results.<br/>\n\t         * This is to ensure that fields that are not needed for the UI to function are not sent by the search API.<br/>\n\t         * Default value is false.<br/>\n\t         * NB: Many interface created by the interface editor will actually explicitly set this option to true.\n\t         */\n\t        autoSelectFieldsToInclude: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false })\n\t    };\n\t    ResultList.resultCurrentlyBeingRendered = null;\n\t    return ResultList;\n\t}(Component_1.Component));\n\texports.ResultList = ResultList;\n\tInitialization_1.Initialization.registerAutoCreateComponent(ResultList);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 128 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Template_1 = __webpack_require__(99);\n\tvar DefaultRecommendationTemplate = (function (_super) {\n\t    __extends(DefaultRecommendationTemplate, _super);\n\t    function DefaultRecommendationTemplate() {\n\t        _super.apply(this, arguments);\n\t    }\n\t    DefaultRecommendationTemplate.prototype.instantiateToString = function (object) {\n\t        var template = \"<div class=\\\"coveo-result-frame\\\">\\n        <div class=\\\"coveo-result-row\\\">\\n          <div class=\\\"coveo-result-cell\\\" style=\\\"width:40px;text-align:center;vertical-align:middle;\\\">\\n            <span class=\\\"CoveoIcon\\\" data-small=\\\"true\\\">\\n            </span>\\n          </div>\\n          <div class=\\\"coveo-result-cell\\\" style=\\\"padding:0 0 3px 5px;vertical-align:middle\\\">\\n            <div class=\\\"coveo-result-row\\\">\\n              <div class=\\\"coveo-result-cell\\\" style=\\\"font-size:10pt;\\\">\\n                <a class=\\\"CoveoResultLink\\\" style=\\\"display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\\\">\\n                </a>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\";\n\t        return template;\n\t    };\n\t    DefaultRecommendationTemplate.prototype.instantiateToElement = function (object) {\n\t        var div = document.createElement('div');\n\t        div.innerHTML = this.instantiateToString(object);\n\t        return div;\n\t    };\n\t    return DefaultRecommendationTemplate;\n\t}(Template_1.Template));\n\texports.DefaultRecommendationTemplate = DefaultRecommendationTemplate;\n\n\n/***/ },\n/* 129 */,\n/* 130 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Initialization_1 = __webpack_require__(94);\n\tvar Component_1 = __webpack_require__(95);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar Model_1 = __webpack_require__(86);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar StandaloneSearchInterfaceEvents_1 = __webpack_require__(51);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar QueryboxQueryParameters_1 = __webpack_require__(131);\n\t/**\n\t * A component that allows a user to enter a query inside an input.<br/>\n\t * The component will trigger a query when submitted (the 'Enter' keypress) and log the proper analytics data.<br/>\n\t * It must be instantiated on a div (and not directly on an input element): This is for styling purpose (ghost type ahead, for example).\n\t */\n\tvar Querybox = (function (_super) {\n\t    __extends(Querybox, _super);\n\t    /**\n\t     * Create a new Querybox.<br/>\n\t     * Create a new Coveo.Magicbox instance and wrap magic box method (on blur, on submit etc).<br/>\n\t     * Bind event on buildingQuery and on redirection (for standalone box).\n\t     * @param element The `HTMLElement` on which the element will be instantiated. This cannot be an `HTMLInputElement` for technical reasons.\n\t     * @param options The options for the querybox.\n\t     * @param bindings The bindings that the component requires to function normally. If not set, will automatically resolve them (with slower execution time).\n\t     */\n\t    function Querybox(element, options, bindings) {\n\t        var _this = this;\n\t        _super.call(this, element, Querybox.ID, bindings);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.bindings = bindings;\n\t        if (element instanceof HTMLInputElement) {\n\t            this.logger.error('QueryBox can\\'t be use on a HTMLInputElement');\n\t        }\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, Querybox, options);\n\t        this.magicBox = Coveo.MagicBox.create(element, new Coveo.MagicBox.Grammar('Query', {\n\t            Query: '[Term*][Spaces?]',\n\t            Term: '[Spaces?][Word]',\n\t            Spaces: / +/,\n\t            Word: /[^ ]+/\n\t        }), {\n\t            inline: true\n\t        });\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.buildingQuery, function (args) { return _this.handleBuildingQuery(args); });\n\t        this.bind.onRootElement(StandaloneSearchInterfaceEvents_1.StandaloneSearchInterfaceEvents.beforeRedirect, function () { return _this.updateQueryState(); });\n\t        this.bind.onQueryState(Model_1.MODEL_EVENTS.CHANGE_ONE, QueryStateModel_1.QUERY_STATE_ATTRIBUTES.Q, function (args) { return _this.handleQueryStateChanged(args); });\n\t        if (this.options.enableSearchAsYouType) {\n\t            Dom_1.$$(this.element).addClass('coveo-search-as-you-type');\n\t            this.magicBox.onchange = function () {\n\t                _this.searchAsYouType();\n\t            };\n\t        }\n\t        this.magicBox.onsubmit = function () {\n\t            _this.submit();\n\t        };\n\t        this.magicBox.onblur = function () {\n\t            _this.updateQueryState();\n\t        };\n\t        this.magicBox.onclear = function () {\n\t            _this.updateQueryState();\n\t            if (_this.options.triggerQueryOnClear) {\n\t                _this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.searchboxClear, {});\n\t                _this.triggerNewQuery(false);\n\t            }\n\t        };\n\t        if (this.options.autoFocus) {\n\t            this.magicBox.focus();\n\t        }\n\t    }\n\t    /**\n\t     * Trigger a query. The current input content will be added to the query.<br/>\n\t     * If the content of the input has not changed since the last submit, no new query will be triggered.\n\t     */\n\t    Querybox.prototype.submit = function () {\n\t        this.magicBox.clearSuggestion();\n\t        this.updateQueryState();\n\t        this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.searchboxSubmit, {});\n\t        this.triggerNewQuery(false);\n\t    };\n\t    /**\n\t     * Set the content of the input\n\t     * @param text The string to set in the input\n\t     */\n\t    Querybox.prototype.setText = function (text) {\n\t        this.magicBox.setText(text);\n\t        this.updateQueryState();\n\t    };\n\t    /**\n\t     * Clear the content of the input\n\t     */\n\t    Querybox.prototype.clear = function () {\n\t        this.magicBox.clear();\n\t    };\n\t    /**\n\t     * Get the current content of the input\n\t     * @returns {string}\n\t     */\n\t    Querybox.prototype.getText = function () {\n\t        return this.magicBox.getText();\n\t    };\n\t    Querybox.prototype.getResult = function () {\n\t        return this.magicBox.getResult();\n\t    };\n\t    Querybox.prototype.getDisplayedResult = function () {\n\t        return this.magicBox.getDisplayedResult();\n\t    };\n\t    Querybox.prototype.getCursor = function () {\n\t        return this.magicBox.getCursor();\n\t    };\n\t    Querybox.prototype.resultAtCursor = function (match) {\n\t        return this.magicBox.resultAtCursor(match);\n\t    };\n\t    Querybox.prototype.handleBuildingQuery = function (args) {\n\t        Assert_1.Assert.exists(args);\n\t        Assert_1.Assert.exists(args.queryBuilder);\n\t        this.updateQueryState();\n\t        this.lastQuery = this.magicBox.getText();\n\t        new QueryboxQueryParameters_1.QueryboxQueryParameters(this.options).addParameters(args.queryBuilder, this.lastQuery);\n\t    };\n\t    Querybox.prototype.triggerNewQuery = function (searchAsYouType) {\n\t        clearTimeout(this.searchAsYouTypeTimeout);\n\t        var text = this.magicBox.getText();\n\t        if (this.lastQuery != text && text != null) {\n\t            this.lastQuery = text;\n\t            this.queryController.executeQuery({\n\t                searchAsYouType: searchAsYouType,\n\t                logInActionsHistory: true\n\t            });\n\t        }\n\t    };\n\t    Querybox.prototype.updateQueryState = function () {\n\t        this.queryStateModel.set(QueryStateModel_1.QueryStateModel.attributesEnum.q, this.magicBox.getText());\n\t    };\n\t    Querybox.prototype.handleQueryStateChanged = function (args) {\n\t        Assert_1.Assert.exists(args);\n\t        var q = args.value;\n\t        if (q != this.magicBox.getText()) {\n\t            this.magicBox.setText(q);\n\t        }\n\t    };\n\t    Querybox.prototype.searchAsYouType = function () {\n\t        var _this = this;\n\t        clearTimeout(this.searchAsYouTypeTimeout);\n\t        this.searchAsYouTypeTimeout = setTimeout(function () {\n\t            _this.usageAnalytics.logSearchAsYouType(AnalyticsActionListMeta_1.analyticsActionCauseList.searchboxAsYouType, {});\n\t            _this.triggerNewQuery(true);\n\t        }, this.options.searchAsYouTypeDelay);\n\t    };\n\t    Querybox.ID = 'Querybox';\n\t    /**\n\t     * The options for the Querybox.\n\t     * @componentOptions\n\t     */\n\t    Querybox.options = {\n\t        /**\n\t         * Specify if search as you type should be enabled.<br/>\n\t         * Default to `false`.\n\t         */\n\t        enableSearchAsYouType: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * If `enableSearchAsYouType` is enabled, this option specify the delay (in ms) between a keypress and a query being triggered<br/>\n\t         * Default to 500 ms.\n\t         */\n\t        searchAsYouTypeDelay: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 500, min: 0 }),\n\t        /**\n\t         * Specifies whether the Coveo Platform does try to interpret special query syntax such as field references in the query entered through the query box.<br/>\n\t         * The default value is `true`.\n\t         */\n\t        enableQuerySyntax: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        /**\n\t         * Specifies whether the Coveo Platform expands keywords containing wildcard characters (*) to the possible matching keywords to broaden the query.<br/>\n\t         * The default value is `false`.\n\t         */\n\t        enableWildcards: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * Specifies whether the Coveo Platform expands keywords containing question mark characters (?) to the possible matching keywords to broaden the query.<br/>\n\t         * The default value is `false`.\n\t         */\n\t        enableQuestionMarks: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * If true, the or and and keywords in the query box will be treated as boolean operators for the query when they are typed in lowercase.<br/>\n\t         * This applies for all operators<br/>\n\t         * Default value is `false`.\n\t         */\n\t        enableLowercaseOperators: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * Specifies whether a query containing a large number of keywords (see partialMatchKeywords) is automatically converted to a partial match expression in order to match documents containing only a subset of the keywords (see partialMatchThreshold for defining the subset).<br/>\n\t         * The default value is `false`.\n\t         */\n\t        enablePartialMatch: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * When partial match is enabled, specifies the minimum number of keywords that must be present in the query to activate the partial match.<br/>\n\t         * The default value is 5.\n\t         */\n\t        partialMatchKeywords: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 5, min: 1 }),\n\t        /**\n\t         * When partial match is enabled, specifies either an absolute or percentage value indicating the minimum number of keywords a document must contain in order to match the query.<br/>\n\t         * The default value is 50%.\n\t         */\n\t        partialMatchThreshold: ComponentOptions_1.ComponentOptions.buildStringOption({ defaultValue: '50%' }),\n\t        /**\n\t         * Specifies whether or not to trigger a query when the searchbox is cleared.\n\t         * The default value is `true`.\n\t         */\n\t        triggerQueryOnClear: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        /**\n\t         *  Specifies a placeholder for input.\n\t         */\n\t        placeholder: ComponentOptions_1.ComponentOptions.buildStringOption(),\n\t        /**\n\t         * Specifies whether the `QueryBox` gets the focus and is selected on initialization.\n\t         * The default value is `true`.\n\t         */\n\t        autoFocus: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true })\n\t    };\n\t    return Querybox;\n\t}(Component_1.Component));\n\texports.Querybox = Querybox;\n\tInitialization_1.Initialization.registerAutoCreateComponent(Querybox);\n\n\n/***/ },\n/* 131 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar QueryboxQueryParameters = (function () {\n\t    function QueryboxQueryParameters(options) {\n\t        this.options = options;\n\t    }\n\t    QueryboxQueryParameters.prototype.addParameters = function (queryBuilder, lastQuery) {\n\t        if (this.options.enableWildcards) {\n\t            queryBuilder.enableWildcards = true;\n\t        }\n\t        if (this.options.enableQuestionMarks) {\n\t            queryBuilder.enableQuestionMarks = true;\n\t        }\n\t        if (this.options.enableLowercaseOperators) {\n\t            queryBuilder.enableLowercaseOperators = true;\n\t        }\n\t        if (!_.isEmpty(lastQuery)) {\n\t            queryBuilder.disableQuerySyntax = !this.options.enableQuerySyntax;\n\t            queryBuilder.expression.add(lastQuery);\n\t            if (this.options.enablePartialMatch) {\n\t                queryBuilder.enablePartialMatch = this.options.enablePartialMatch;\n\t                if (this.options.partialMatchKeywords) {\n\t                    queryBuilder.partialMatchKeywords = this.options.partialMatchKeywords;\n\t                }\n\t                if (this.options.partialMatchThreshold) {\n\t                    queryBuilder.partialMatchThreshold = this.options.partialMatchThreshold;\n\t                }\n\t            }\n\t        }\n\t    };\n\t    return QueryboxQueryParameters;\n\t}());\n\texports.QueryboxQueryParameters = QueryboxQueryParameters;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 132 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Component_1 = __webpack_require__(95);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar Strings_1 = __webpack_require__(33);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar Initialization_1 = __webpack_require__(94);\n\t/**\n\t * A component that allows user to trigger a query by clicking on it.<br/>\n\t * This component will instantiate on an element and add a search icon.<br/>\n\t * It will also sends an analytics event to the Coveo platform when clicked.\n\t */\n\tvar SearchButton = (function (_super) {\n\t    __extends(SearchButton, _super);\n\t    /**\n\t     * Create a new SearchButton on the given element with the given options.\n\t     * Bind a click event on the element\n\t     * Adds a search icon on the element\n\t     * @param element\n\t     * @param options\n\t     * @param bindings\n\t     */\n\t    function SearchButton(element, options, bindings) {\n\t        var _this = this;\n\t        _super.call(this, element, SearchButton.ID, bindings);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.bind.on(element, 'click', function () { return _this.handleClick(); });\n\t        // Provide a magnifier icon if element contains nothing\n\t        if (Utils_1.Utils.trim(Dom_1.$$(this.element).text()) == '') {\n\t            element.innerHTML = '<span class=\\'coveo-icon\\'>' + Strings_1.l('Search') + '</span>';\n\t        }\n\t    }\n\t    /**\n\t     * Trigger the click handler\n\t     */\n\t    SearchButton.prototype.click = function () {\n\t        this.handleClick();\n\t    };\n\t    SearchButton.prototype.handleClick = function () {\n\t        this.logger.debug('Performing query following button click');\n\t        this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.searchboxSubmit, {});\n\t        this.queryController.executeQuery();\n\t    };\n\t    SearchButton.ID = 'SearchButton';\n\t    SearchButton.options = {};\n\t    return SearchButton;\n\t}(Component_1.Component));\n\texports.SearchButton = SearchButton;\n\tInitialization_1.Initialization.registerAutoCreateComponent(SearchButton);\n\n\n/***/ },\n/* 133 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Component_1 = __webpack_require__(95);\n\tvar Omnibox_1 = __webpack_require__(134);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar SearchButton_1 = __webpack_require__(132);\n\tvar Querybox_1 = __webpack_require__(130);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar Initialization_1 = __webpack_require__(94);\n\t/**\n\t * This component is mostly used for simplicity purpose because it creates 2 components that are very frequently used together.<br/>\n\t * This component attaches itself to a div and takes care of instantiating a {@link Querybox} component or a {@link Omnibox} component, depending on the options.<br/>\n\t * Add a {@link SearchButton} component if desired, and appends them to the same div.\n\t */\n\tvar Searchbox = (function (_super) {\n\t    __extends(Searchbox, _super);\n\t    /**\n\t     * Create a new Searchbox<br/>\n\t     * Create a new Coveo.Magicbox instance and wrap magic box method (on blur, on submit etc).<br/>\n\t     * Bind event on `buildingQuery` and on redirection (for standalone box).\n\t     * @param element The `HTMLElement` on which the element will be instantiated. This cannot be an `HTMLInputElement` for technical reason\n\t     * @param options The options for the component. Will be merged with the options from the component set directly on the `HTMLElement`.\n\t     * @param bindings The bindings that the component requires to function normally. If not set, will automatically resolve them (with slower execution time).\n\t     */\n\t    function Searchbox(element, options, bindings) {\n\t        _super.call(this, element, Searchbox.ID, bindings);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, Searchbox, options);\n\t        if (this.options.inline) {\n\t            Dom_1.$$(element).addClass('coveo-inline');\n\t        }\n\t        if (this.options.addSearchButton) {\n\t            var anchor = document.createElement('a');\n\t            this.element.appendChild(anchor);\n\t            this.searchButton = new SearchButton_1.SearchButton(anchor, undefined, bindings);\n\t        }\n\t        var div = document.createElement('div');\n\t        this.element.appendChild(div);\n\t        if (this.options.enableOmnibox) {\n\t            this.searchbox = new Omnibox_1.Omnibox(div, this.options, bindings);\n\t        }\n\t        else {\n\t            this.searchbox = new Querybox_1.Querybox(div, this.options, bindings);\n\t        }\n\t    }\n\t    Searchbox.ID = 'Searchbox';\n\t    Searchbox.parent = Omnibox_1.Omnibox;\n\t    /**\n\t     * Possible options for the {@link Searchbox}\n\t     * @componentOptions\n\t     */\n\t    Searchbox.options = {\n\t        /**\n\t         * Specifies whether the search box instantiates a {@link SearchButton}.<br/>\n\t         * Default value is `true`.\n\t         */\n\t        addSearchButton: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\t        /**\n\t         * Specifies whether the search box instantiates a {@link Omnibox} component.<br/>\n\t         * Otherwise, the search box instantiates a {@link Querybox} component.<br/>\n\t         * Default value is `false`.\n\t         */\n\t        enableOmnibox: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false })\n\t    };\n\t    return Searchbox;\n\t}(Component_1.Component));\n\texports.Searchbox = Searchbox;\n\tSearchbox.options = _.extend({}, Searchbox.options, Omnibox_1.Omnibox.options, Querybox_1.Querybox.options);\n\t// Only parse omnibox option if omnibox is enabled\n\t_.each(Searchbox.options, function (value, key) {\n\t    if (key in Omnibox_1.Omnibox.options && !(key in Querybox_1.Querybox.options)) {\n\t        Searchbox.options[key] = _.extend({ depend: 'enableOmnibox' }, value);\n\t    }\n\t});\n\tInitialization_1.Initialization.registerAutoCreateComponent(Searchbox);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 134 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar Component_1 = __webpack_require__(95);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar StandaloneSearchInterfaceEvents_1 = __webpack_require__(51);\n\tvar Model_1 = __webpack_require__(86);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar OmniboxEvents_1 = __webpack_require__(44);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar QueryStateModel_2 = __webpack_require__(89);\n\tvar Initialization_1 = __webpack_require__(94);\n\tvar Querybox_1 = __webpack_require__(130);\n\tvar FieldAddon_1 = __webpack_require__(135);\n\tvar QueryExtensionAddon_1 = __webpack_require__(136);\n\tvar RevealQuerySuggestAddon_1 = __webpack_require__(137);\n\tvar OldOmniboxAddon_1 = __webpack_require__(138);\n\tvar QueryboxQueryParameters_1 = __webpack_require__(131);\n\tvar PendingSearchAsYouTypeSearchEvent_1 = __webpack_require__(116);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar ExternalModulesShim_1 = __webpack_require__(24);\n\tvar MINIMUM_EXECUTABLE_CONFIDENCE = 0.8;\n\t/**\n\t * This component is very similar to the simpler {@link Querybox} component and support all the same options/behavior except for the search-as-you-type feature.<br/>\n\t * In addition, it takes care of adding a type-ahead capability. The type-ahead and the suggestions it displays are customizable and extensible by any custom component.<br/>\n\t * The type-ahead is configurable by activating addon which are provided OOTB (facets, analytics suggestions, Reveal suggestions, and advanced Coveo syntax suggestions).<br/>\n\t * It is also possible for external code to provide suggestions.\n\t */\n\tvar Omnibox = (function (_super) {\n\t    __extends(Omnibox, _super);\n\t    /**\n\t     * Create a new omnibox with, enable required addons, and bind events on letious query events.\n\t     */\n\t    function Omnibox(element, options, bindings) {\n\t        var _this = this;\n\t        _super.call(this, element, Omnibox.ID, bindings);\n\t        this.element = element;\n\t        this.options = options;\n\t        this.partialQueries = [];\n\t        this.lastSuggestions = [];\n\t        this.movedOnce = false;\n\t        this.skipRevealAutoSuggest = false;\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, Omnibox, options);\n\t        var grammar;\n\t        if (this.options.enableQuerySyntax) {\n\t            grammar = ExternalModulesShim_1.MagicBox.Grammars.Expressions(ExternalModulesShim_1.MagicBox.Grammars.Complete);\n\t            if (this.options.enableFieldAddon) {\n\t                new FieldAddon_1.FieldAddon(this);\n\t            }\n\t            if (this.options.fieldAlias != null) {\n\t                this.options.listOfFields = this.options.listOfFields || [];\n\t                this.options.listOfFields = this.options.listOfFields.concat(_.keys(this.options.fieldAlias));\n\t            }\n\t            if (this.options.enableQueryExtensionAddon) {\n\t                new QueryExtensionAddon_1.QueryExtensionAddon(this);\n\t            }\n\t        }\n\t        else {\n\t            grammar = { start: 'Any', expressions: { Any: /.*/ } };\n\t        }\n\t        if (this.options.enableRevealQuerySuggestAddon) {\n\t            new RevealQuerySuggestAddon_1.RevealQuerySuggestAddon(this);\n\t        }\n\t        new OldOmniboxAddon_1.OldOmniboxAddon(this);\n\t        if (this.options.grammar != null) {\n\t            grammar = this.options.grammar(grammar);\n\t        }\n\t        this.magicBox = ExternalModulesShim_1.MagicBox.create(element, new ExternalModulesShim_1.MagicBox.Grammar(grammar.start, grammar.expressions), {\n\t            inline: this.options.inline,\n\t            selectableSuggestionClass: 'coveo-omnibox-selectable',\n\t            selectedSuggestionClass: 'coveo-omnibox-selected',\n\t            suggestionTimeout: this.options.omniboxTimeout\n\t        });\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.buildingQuery, function (args) { return _this.handleBuildingQuery(args); });\n\t        this.bind.onRootElement(StandaloneSearchInterfaceEvents_1.StandaloneSearchInterfaceEvents.beforeRedirect, function () { return _this.handleBeforeRedirect(); });\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.querySuccess, function () { return _this.handleQuerySuccess(); });\n\t        this.bind.onQueryState(Model_1.MODEL_EVENTS.CHANGE_ONE, QueryStateModel_1.QUERY_STATE_ATTRIBUTES.Q, function (args) { return _this.handleQueryStateChanged(args); });\n\t        if (this.isRevealAutoSuggestion()) {\n\t            this.bind.onRootElement(QueryEvents_1.QueryEvents.duringQuery, function (args) { return _this.handleDuringQuery(args); });\n\t        }\n\t        this.setupMagicBox();\n\t    }\n\t    /**\n\t     * Trigger a query. The current input content will be added to the query.<br/>\n\t     * If the content of the input has not changed since the last submit, no new query will be triggered.\n\t     */\n\t    Omnibox.prototype.submit = function () {\n\t        var _this = this;\n\t        this.magicBox.clearSuggestion();\n\t        this.updateQueryState();\n\t        this.triggerNewQuery(false, function () {\n\t            _this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.searchboxSubmit, {});\n\t        });\n\t    };\n\t    /**\n\t     * Get the current content of the input\n\t     * @returns {string}\n\t     */\n\t    Omnibox.prototype.getText = function () {\n\t        return this.magicBox.getText();\n\t    };\n\t    /**\n\t     * Set the content of the input\n\t     * @param text The string to set in the input\n\t     */\n\t    Omnibox.prototype.setText = function (text) {\n\t        this.magicBox.setText(text);\n\t        this.updateQueryState();\n\t    };\n\t    /**\n\t     * Clear the content of the input\n\t     */\n\t    Omnibox.prototype.clear = function () {\n\t        this.magicBox.clear();\n\t    };\n\t    /**\n\t     * Get the `HTMLInputElement` of the omnibox\n\t     */\n\t    Omnibox.prototype.getInput = function () {\n\t        return this.magicBox.element.querySelector('input');\n\t    };\n\t    Omnibox.prototype.getResult = function () {\n\t        return this.magicBox.getResult();\n\t    };\n\t    Omnibox.prototype.getDisplayedResult = function () {\n\t        return this.magicBox.getDisplayedResult();\n\t    };\n\t    Omnibox.prototype.getCursor = function () {\n\t        return this.magicBox.getCursor();\n\t    };\n\t    Omnibox.prototype.resultAtCursor = function (match) {\n\t        return this.magicBox.resultAtCursor(match);\n\t    };\n\t    Omnibox.prototype.setupMagicBox = function () {\n\t        var _this = this;\n\t        this.magicBox.onmove = function () {\n\t            // We assume that once the user has moved it's selection, it becomes an explicit omnibox analytics event\n\t            if (_this.isRevealAutoSuggestion()) {\n\t                _this.modifyEventTo = AnalyticsActionListMeta_1.analyticsActionCauseList.omniboxAnalytics;\n\t            }\n\t            _this.movedOnce = true;\n\t        };\n\t        this.magicBox.onfocus = function () {\n\t            if (_this.isRevealAutoSuggestion()) {\n\t                // This flag is used to block the automatic query when the UI is loaded with a query (#q=foo)\n\t                // and then the input is focused. We want to block that query, even if it match the suggestion\n\t                // Only when there is an actual change in the input (user typing something) is when we want the automatic query to kick in\n\t                _this.skipRevealAutoSuggest = true;\n\t            }\n\t        };\n\t        this.magicBox.onsuggestions = function (suggestions) {\n\t            // If text is empty, this can mean that user selected text from the search box\n\t            // and hit \"delete\" : Reset the partial queries in this case\n\t            if (Utils_1.Utils.isEmptyString(_this.getText())) {\n\t                _this.partialQueries = [];\n\t            }\n\t            _this.movedOnce = false;\n\t            _this.lastSuggestions = suggestions;\n\t            if (_this.isRevealAutoSuggestion() && !_this.skipRevealAutoSuggest) {\n\t                _this.searchAsYouType();\n\t            }\n\t        };\n\t        if (this.options.enableSearchAsYouType) {\n\t            Dom_1.$$(this.element).addClass('coveo-magicbox-search-as-you-type');\n\t        }\n\t        this.magicBox.onchange = function () {\n\t            _this.skipRevealAutoSuggest = false;\n\t            var text = _this.getText();\n\t            if (text != undefined && text != '') {\n\t                if (_this.isRevealAutoSuggestion()) {\n\t                    if (_this.movedOnce) {\n\t                        _this.searchAsYouType(true);\n\t                    }\n\t                }\n\t                else if (_this.options.enableSearchAsYouType) {\n\t                    _this.searchAsYouType(true);\n\t                }\n\t            }\n\t            else {\n\t                _this.clear();\n\t            }\n\t        };\n\t        if (this.options.placeholder) {\n\t            this.magicBox.element.querySelector('input').placeholder = this.options.placeholder;\n\t        }\n\t        this.magicBox.onsubmit = function () {\n\t            _this.magicBox.clearSuggestion();\n\t            _this.updateQueryState();\n\t            _this.triggerNewQuery(false, function () {\n\t                _this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.searchboxSubmit, {});\n\t            });\n\t        };\n\t        this.magicBox.onselect = function (suggestion) {\n\t            var index = _.indexOf(_this.lastSuggestions, suggestion);\n\t            var suggestions = _.map(_this.lastSuggestions, function (suggestion) { return suggestion.text; });\n\t            _this.magicBox.clearSuggestion();\n\t            _this.updateQueryState();\n\t            // A bit tricky here : When it's reveal auto suggestions\n\t            // the mouse selection and keyboard selection acts differently :\n\t            // keyboard selection will automatically do the query (which will log a search as you type event -> further modified by this.modifyEventTo if needed)\n\t            // mouse selection will not \"auto\" send the query.\n\t            // the movedOnce variable detect the keyboard movement, and is used to differentiate mouse vs keyboard\n\t            if (!_this.isRevealAutoSuggestion()) {\n\t                _this.usageAnalytics.cancelAllPendingEvents();\n\t                _this.triggerNewQuery(false, function () {\n\t                    _this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.omniboxAnalytics, _this.buildCustomDataForPartialQueries(index, suggestions));\n\t                });\n\t            }\n\t            else if (_this.isRevealAutoSuggestion() && _this.movedOnce) {\n\t                _this.handleRevealAutoSuggestionWithKeyboard(index, suggestions);\n\t            }\n\t            else if (_this.isRevealAutoSuggestion() && !_this.movedOnce) {\n\t                _this.handleRevealAutoSuggestionsWithMouse(index, suggestions);\n\t            }\n\t            // Consider a selection like a reset of the partial queries (it's the end of a suggestion pattern)\n\t            if (_this.isRevealAutoSuggestion()) {\n\t                _this.partialQueries = [];\n\t            }\n\t        };\n\t        this.magicBox.onblur = function () {\n\t            if (_this.options.enableSearchAsYouType && !_this.options.inline) {\n\t                _this.setText(_this.lastQuery);\n\t            }\n\t            else {\n\t                _this.updateQueryState();\n\t            }\n\t            if (_this.isRevealAutoSuggestion()) {\n\t                _this.usageAnalytics.sendAllPendingEvents();\n\t            }\n\t        };\n\t        this.magicBox.onclear = function () {\n\t            _this.updateQueryState();\n\t            if (_this.options.triggerQueryOnClear) {\n\t                _this.triggerNewQuery(false, function () {\n\t                    _this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.searchboxClear, {});\n\t                });\n\t            }\n\t        };\n\t        if (this.options.autoFocus) {\n\t            this.magicBox.focus();\n\t        }\n\t        this.magicBox.getSuggestions = function () { return _this.handleSuggestions(); };\n\t    };\n\t    Omnibox.prototype.handleRevealAutoSuggestionWithKeyboard = function (index, suggestions) {\n\t        var _this = this;\n\t        if (this.searchAsYouTypeTimeout) {\n\t            // Here, there is currently a search as you typed queued up :\n\t            // Think : user typed very quickly, then very quickly selected a suggestion (without waiting for the search as you type)\n\t            // Cancel the search as you type query, then immediately do the query with the selection (+analytics event with the selection)\n\t            this.usageAnalytics.cancelAllPendingEvents();\n\t            clearTimeout(this.searchAsYouTypeTimeout);\n\t            this.searchAsYouTypeTimeout = undefined;\n\t            this.triggerNewQuery(false, function () {\n\t                _this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.omniboxAnalytics, _this.buildCustomDataForPartialQueries(index, suggestions));\n\t            });\n\t        }\n\t        else {\n\t            // Here, the search as you type query has returned, but the analytics event has not ye been sent.\n\t            // Think : user typed slowly, the query returned, and then the user selected a suggestion.\n\t            // Since the analytics event has not yet been sent (search as you type event have a 5 sec delay)\n\t            // modify the pending event, then send the newly modified analytics event immediately.\n\t            this.modifyEventTo = AnalyticsActionListMeta_1.analyticsActionCauseList.omniboxAnalytics;\n\t            this.modifyCustomDataOnPending(index, suggestions);\n\t            this.usageAnalytics.sendAllPendingEvents();\n\t        }\n\t    };\n\t    Omnibox.prototype.handleRevealAutoSuggestionsWithMouse = function (index, suggestions) {\n\t        var _this = this;\n\t        if (this.searchAsYouTypeTimeout || index != 0) {\n\t            // Here : the user either very quickly chose the first suggestion, and the search as you type is still queued up.\n\t            // OR\n\t            // the user chose something different then the first suggestion.\n\t            // Remove the search as you type if it's there, and do the query with the suggestion directly.\n\t            this.clearSearchAsYouType();\n\t            this.usageAnalytics.cancelAllPendingEvents();\n\t            this.triggerNewQuery(false, function () {\n\t                _this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.omniboxAnalytics, _this.buildCustomDataForPartialQueries(index, suggestions));\n\t            });\n\t        }\n\t        else {\n\t            // Here : the user either very slowly chose a suggestion, and there is no search as you typed queued up\n\t            // AND\n\t            // the user chose the first suggestion.\n\t            // this means the query is already returned, but the analytics event is still queued up.\n\t            // modify the analytics event, and send it.\n\t            this.modifyEventTo = AnalyticsActionListMeta_1.analyticsActionCauseList.omniboxAnalytics;\n\t            this.modifyCustomDataOnPending(index, suggestions);\n\t            this.usageAnalytics.sendAllPendingEvents();\n\t        }\n\t    };\n\t    Omnibox.prototype.modifyCustomDataOnPending = function (index, suggestions) {\n\t        var pendingEvt = this.usageAnalytics.getPendingSearchEvent();\n\t        if (pendingEvt instanceof PendingSearchAsYouTypeSearchEvent_1.PendingSearchAsYouTypeSearchEvent) {\n\t            var newCustomData_1 = this.buildCustomDataForPartialQueries(index, suggestions);\n\t            _.each(_.keys(newCustomData_1), function (k) {\n\t                pendingEvt.modifyCustomData(k, newCustomData_1[k]);\n\t            });\n\t        }\n\t    };\n\t    Omnibox.prototype.buildCustomDataForPartialQueries = function (index, suggestions) {\n\t        return {\n\t            partialQueries: this.cleanCustomData(this.partialQueries),\n\t            suggestionRanking: index,\n\t            suggestions: this.cleanCustomData(suggestions),\n\t            partialQuery: _.last(this.partialQueries)\n\t        };\n\t    };\n\t    Omnibox.prototype.cleanCustomData = function (toClean, rejectLength) {\n\t        if (rejectLength === void 0) { rejectLength = 256; }\n\t        // Filter out only consecutive values that are the identical\n\t        toClean = _.filter(toClean, function (partial, pos, array) {\n\t            return pos === 0 || partial !== array[pos - 1];\n\t        });\n\t        // Custom dimensions cannot be an array in analytics service: Send a string joined by ; instead.\n\t        // Need to replace ;\n\t        toClean = _.map(toClean, function (partial) {\n\t            return partial.replace(/;/g, '');\n\t        });\n\t        // Reduce right to get the last X words that adds to less then rejectLength\n\t        var reducedToRejectLengthOrLess = [];\n\t        _.reduceRight(toClean, function (memo, partial) {\n\t            var totalSoFar = memo + partial.length;\n\t            if (totalSoFar <= rejectLength) {\n\t                reducedToRejectLengthOrLess.push(partial);\n\t            }\n\t            return totalSoFar;\n\t        }, 0);\n\t        toClean = reducedToRejectLengthOrLess.reverse();\n\t        var ret = toClean.join(';');\n\t        // analytics service can store max 256 char in a custom event\n\t        // if we're over that, call cleanup again with an arbitrary 10 less char accepted\n\t        if (ret.length >= 256) {\n\t            return this.cleanCustomData(toClean, rejectLength - 10);\n\t        }\n\t        return toClean.join(';');\n\t    };\n\t    Omnibox.prototype.handleSuggestions = function () {\n\t        var suggestionsEventArgs = {\n\t            suggestions: [],\n\t            omnibox: this\n\t        };\n\t        this.bind.trigger(this.element, OmniboxEvents_1.OmniboxEvents.populateOmniboxSuggestions, suggestionsEventArgs);\n\t        var text = this.getText();\n\t        if (!Utils_1.Utils.isNullOrEmptyString(text)) {\n\t            this.partialQueries.push(text);\n\t        }\n\t        return suggestionsEventArgs.suggestions;\n\t    };\n\t    Omnibox.prototype.handleBeforeRedirect = function () {\n\t        this.updateQueryState();\n\t    };\n\t    Omnibox.prototype.handleBuildingQuery = function (data) {\n\t        var _this = this;\n\t        Assert_1.Assert.exists(data);\n\t        Assert_1.Assert.exists(data.queryBuilder);\n\t        this.updateQueryState();\n\t        this.lastQuery = this.getQuery(data.searchAsYouType);\n\t        var result = this.lastQuery == this.magicBox.getDisplayedResult().input ? this.magicBox.getDisplayedResult().clone() : this.magicBox.grammar.parse(this.lastQuery).clean();\n\t        var preprocessResultForQueryArgs = {\n\t            result: result\n\t        };\n\t        if (this.options.enableQuerySyntax) {\n\t            var notQuotedValues = preprocessResultForQueryArgs.result.findAll('FieldValueNotQuoted');\n\t            _.each(notQuotedValues, function (value) { return value.value = '\"' + value.value.replace(/\"|\\u00A0/g, ' ') + '\"'; });\n\t            if (this.options.fieldAlias) {\n\t                var fieldNames = preprocessResultForQueryArgs.result.findAll(function (result) { return result.expression.id == 'FieldName' && result.isSuccess(); });\n\t                _.each(fieldNames, function (result) {\n\t                    var alias = _.find(_.keys(_this.options.fieldAlias), function (alias) { return alias.toLowerCase() == result.value.toLowerCase(); });\n\t                    if (alias != null) {\n\t                        result.value = _this.options.fieldAlias[alias];\n\t                    }\n\t                });\n\t            }\n\t        }\n\t        this.bind.trigger(this.element, OmniboxEvents_1.OmniboxEvents.omniboxPreprocessResultForQuery, preprocessResultForQueryArgs);\n\t        var query = preprocessResultForQueryArgs.result.toString();\n\t        new QueryboxQueryParameters_1.QueryboxQueryParameters(this.options).addParameters(data.queryBuilder, query);\n\t    };\n\t    Omnibox.prototype.triggerNewQuery = function (searchAsYouType, analyticsEvent) {\n\t        clearTimeout(this.searchAsYouTypeTimeout);\n\t        var text = this.getQuery(searchAsYouType);\n\t        if (this.shouldExecuteQuery(searchAsYouType)) {\n\t            this.lastQuery = text;\n\t            analyticsEvent();\n\t            this.queryController.executeQuery({\n\t                searchAsYouType: searchAsYouType,\n\t                logInActionsHistory: true\n\t            });\n\t        }\n\t    };\n\t    Omnibox.prototype.getQuery = function (searchAsYouType) {\n\t        var query;\n\t        if (searchAsYouType) {\n\t            query = this.magicBox.getWordCompletion();\n\t            if (query == null && this.lastSuggestions != null && this.lastSuggestions.length > 0) {\n\t                var textSuggestion = _.find(this.lastSuggestions, function (suggestion) { return suggestion.text != null; });\n\t                if (textSuggestion != null) {\n\t                    query = textSuggestion.text;\n\t                }\n\t            }\n\t        }\n\t        return query || this.magicBox.getText();\n\t    };\n\t    Omnibox.prototype.updateQueryState = function () {\n\t        this.queryStateModel.set(QueryStateModel_2.QueryStateModel.attributesEnum.q, this.magicBox.getText());\n\t    };\n\t    Omnibox.prototype.handleQueryStateChanged = function (args) {\n\t        Assert_1.Assert.exists(args);\n\t        var q = args.value;\n\t        if (q != this.magicBox.getText()) {\n\t            this.magicBox.setText(q);\n\t        }\n\t    };\n\t    Omnibox.prototype.handleQuerySuccess = function () {\n\t        if (!this.isRevealAutoSuggestion()) {\n\t            this.partialQueries = [];\n\t        }\n\t    };\n\t    Omnibox.prototype.handleDuringQuery = function (args) {\n\t        var _this = this;\n\t        // When the query results returns ... (args.promise)\n\t        args.promise.then(function () {\n\t            // Get a handle on a pending search as you type (those events are delayed, not sent instantly)\n\t            var pendingEvent = _this.usageAnalytics.getPendingSearchEvent();\n\t            if (pendingEvent instanceof PendingSearchAsYouTypeSearchEvent_1.PendingSearchAsYouTypeSearchEvent) {\n\t                pendingEvent.beforeResolve.then(function (evt) {\n\t                    // Check if we need to modify the event type beforeResolving it\n\t                    args.promise.then(function () {\n\t                        if (_this.modifyEventTo) {\n\t                            evt.modifyEventCause(_this.modifyEventTo);\n\t                            _this.modifyEventTo = null;\n\t                        }\n\t                    });\n\t                });\n\t            }\n\t        });\n\t    };\n\t    Omnibox.prototype.searchAsYouType = function (forceExecuteQuery) {\n\t        var _this = this;\n\t        if (forceExecuteQuery === void 0) { forceExecuteQuery = false; }\n\t        this.clearSearchAsYouType();\n\t        if (this.shouldExecuteQuery(true)) {\n\t            this.searchAsYouTypeTimeout = setTimeout(function () {\n\t                if (_this.suggestionShouldTriggerQuery() || forceExecuteQuery) {\n\t                    var suggestions_1 = _.map(_this.lastSuggestions, function (suggestion) { return suggestion.text; });\n\t                    var index_1 = _.indexOf(suggestions_1, _this.magicBox.getWordCompletion());\n\t                    _this.triggerNewQuery(true, function () {\n\t                        _this.usageAnalytics.logSearchAsYouType(AnalyticsActionListMeta_1.analyticsActionCauseList.searchboxAsYouType, _this.buildCustomDataForPartialQueries(index_1, suggestions_1));\n\t                    });\n\t                    _this.clearSearchAsYouType();\n\t                }\n\t            }, this.options.searchAsYouTypeDelay);\n\t        }\n\t    };\n\t    Omnibox.prototype.isRevealAutoSuggestion = function () {\n\t        return this.options.enableSearchAsYouType && this.options.enableRevealQuerySuggestAddon;\n\t    };\n\t    Omnibox.prototype.shouldExecuteQuery = function (searchAsYouType) {\n\t        var text = this.getQuery(searchAsYouType);\n\t        return this.lastQuery != text && text != null;\n\t    };\n\t    Omnibox.prototype.suggestionShouldTriggerQuery = function (suggestions) {\n\t        if (suggestions === void 0) { suggestions = this.lastSuggestions; }\n\t        if (this.shouldExecuteQuery(true)) {\n\t            if (suggestions && suggestions[0]) {\n\t                var suggestion = suggestions[0];\n\t                // If we have access to a confidence level, return true if we are equal or above the minimum confidence level.\n\t                if (suggestion && suggestion.executableConfidence != undefined) {\n\t                    return suggestion.executableConfidence >= MINIMUM_EXECUTABLE_CONFIDENCE;\n\t                }\n\t                // If we don't have access to a confidence level, return true only if it \"starts with\" the content of the search box\n\t                if (suggestion.text && suggestion.text.indexOf(this.magicBox.getText()) == 0) {\n\t                    return true;\n\t                }\n\t            }\n\t        }\n\t        return false;\n\t    };\n\t    Omnibox.prototype.clearSearchAsYouType = function () {\n\t        clearTimeout(this.searchAsYouTypeTimeout);\n\t        this.searchAsYouTypeTimeout = undefined;\n\t    };\n\t    Omnibox.ID = 'Omnibox';\n\t    /**\n\t     * The options for the omnibox\n\t     * @componentOptions\n\t     */\n\t    Omnibox.options = {\n\t        /**\n\t         * Specifies that suggestions appearing in the omnibox should push the result down, instead of appearing over the results.<br/>\n\t         * Activate this as well a `SearchAsYouType` + Reveal suggestions for a cool effect!<br/>\n\t         * Default value is false\n\t         */\n\t        inline: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * Specifies whether a new query is automatically triggered whenever the user types new text inside the query box.<br/>\n\t         * Activate this as well a inline + Reveal suggestions for a cool effect!<br/>\n\t         * The default is `false`.\n\t         */\n\t        enableSearchAsYouType: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n\t        /**\n\t         * When search as you type is enabled, specifies the delay in milliseconds before a new query is triggered when the user types new text inside the query box.<br/>\n\t         * The default value is 2000 milliseconds.\n\t         */\n\t        searchAsYouTypeDelay: ComponentOptions_1.ComponentOptions.buildNumberOption({\n\t            defaultValue: 2000,\n\t            min: 0,\n\t            depend: 'enableSearchAsYouType'\n\t        }),\n\t        /**\n\t         * Specifies whether the field addon should be enabled.<br/>\n\t         * The field addon allows the search box to highlight and complete field syntax.<br/>\n\t         * Default value is `false`.\n\t         *\n\t         * > Example:\n\t         * > You want to filter on a file type. You start typing @sysf and matching fields are proposed. You select the @sysfiletype suggestion, enter = and the available matching file types are proposed.\n\t         */\n\t        enableFieldAddon: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false, depend: 'enableQuerySyntax' }),\n\t        enableSimpleFieldAddon: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false, depend: 'enableFieldAddon' }),\n\t        listOfFields: ComponentOptions_1.ComponentOptions.buildFieldsOption({ depend: 'enableFieldAddon' }),\n\t        /**\n\t         * Specifies whether the Reveal query suggestions should be enabled.<br/>\n\t         * This implies that your integration has a proper Reveal integration configured.<br/>\n\t         * Default value is `false`.\n\t         */\n\t        enableRevealQuerySuggestAddon: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false, alias: 'enableTopQueryAddon' }),\n\t        /**\n\t         * Specifies whether the query extension addon should be enabled.<br/>\n\t         * This allows the omnibox to complete the syntax for query extensions.<br/>\n\t         * Default value is `false`.\n\t         */\n\t        enableQueryExtensionAddon: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false, depend: 'enableQuerySyntax' }),\n\t        /**\n\t         * Specifies a placeholder for input\n\t         */\n\t        placeholder: ComponentOptions_1.ComponentOptions.buildStringOption(),\n\t        /**\n\t         * Specifies a timeout before rejecting suggestions in the omnibox.<br/>\n\t         * Default value is 2000 (2 seconds).\n\t         */\n\t        omniboxTimeout: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 2000 })\n\t    };\n\t    return Omnibox;\n\t}(Component_1.Component));\n\texports.Omnibox = Omnibox;\n\tOmnibox.options = _.extend({}, Omnibox.options, Querybox_1.Querybox.options);\n\tInitialization_1.Initialization.registerAutoCreateComponent(Omnibox);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 135 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar OmniboxEvents_1 = __webpack_require__(44);\n\tvar ExternalModulesShim_1 = __webpack_require__(24);\n\tvar FieldAddon = (function () {\n\t    function FieldAddon(omnibox) {\n\t        var _this = this;\n\t        this.omnibox = omnibox;\n\t        this.cache = {};\n\t        this.omnibox.bind.on(this.omnibox.element, OmniboxEvents_1.OmniboxEvents.populateOmniboxSuggestions, function (args) {\n\t            args.suggestions.push(_this.getSuggestion());\n\t        });\n\t    }\n\t    FieldAddon.prototype.getSuggestion = function () {\n\t        var _this = this;\n\t        var hash = this.getHash();\n\t        if (hash == null) {\n\t            return null;\n\t        }\n\t        var hashString = this.hashToString(hash);\n\t        if (this.cache[hashString] != null) {\n\t            return this.hashValueToSuggestion(hash, this.cache[hashString]);\n\t        }\n\t        var values;\n\t        if (hash.type == 'FieldName') {\n\t            values = this.fieldNames(hash.current);\n\t        }\n\t        if (hash.type == 'FieldValue') {\n\t            values = this.fieldValues(hash.field, hash.current);\n\t        }\n\t        if (hash.type == 'SimpleFieldName') {\n\t            values = this.simpleFieldNames(hash.current);\n\t        }\n\t        this.cache[hashString] = values;\n\t        values.catch(function () {\n\t            delete _this.cache[hashString];\n\t        });\n\t        return this.hashValueToSuggestion(hash, values);\n\t    };\n\t    FieldAddon.prototype.getHash = function () {\n\t        var fieldName = _.last(this.omnibox.resultAtCursor('FieldName'));\n\t        if (fieldName != null) {\n\t            fieldName = fieldName.findParent('Field') || fieldName;\n\t            var currentField = fieldName.toString();\n\t            var before = fieldName.before();\n\t            var after = fieldName.after();\n\t            return { type: 'FieldName', current: currentField, before: before, after: after };\n\t        }\n\t        var fieldValue = _.last(this.omnibox.resultAtCursor('FieldValue'));\n\t        if (fieldValue) {\n\t            var fieldQuery = fieldValue.findParent('FieldQuery') || (this.omnibox.options.enableSimpleFieldAddon && fieldValue.findParent('FieldSimpleQuery'));\n\t            if (fieldQuery) {\n\t                var field = fieldQuery.find('FieldName').toString();\n\t                if (this.omnibox.options.fieldAlias) {\n\t                    if (field in this.omnibox.options.fieldAlias) {\n\t                        field = this.omnibox.options.fieldAlias[field];\n\t                    }\n\t                }\n\t                var value = fieldValue.toString();\n\t                var before = fieldValue.before();\n\t                var after = fieldValue.after();\n\t                return { type: 'FieldValue', field: field, current: value, before: before, after: after };\n\t            }\n\t        }\n\t        if (this.omnibox.options.enableSimpleFieldAddon) {\n\t            var word = _.last(this.omnibox.resultAtCursor('Word'));\n\t            if (word != null) {\n\t                var currentField = word.toString();\n\t                var before = word.before();\n\t                var after = word.after();\n\t                return { type: 'SimpleFieldName', current: currentField, before: before, after: after };\n\t            }\n\t        }\n\t    };\n\t    FieldAddon.prototype.hashToString = function (hash) {\n\t        if (hash == null) {\n\t            return null;\n\t        }\n\t        return hash.type + hash.current + (hash.field || '');\n\t    };\n\t    FieldAddon.prototype.hashValueToSuggestion = function (hash, promise) {\n\t        return promise.then(function (values) {\n\t            var suggestions = _.map(values, function (value, i) {\n\t                return {\n\t                    text: hash.before + (hash.current.toLowerCase().indexOf(value.toLowerCase()) == 0 ? hash.current + value.substr(hash.current.length) : value) + hash.after,\n\t                    html: ExternalModulesShim_1.MagicBox.Utils.highlightText(value, hash.current, true),\n\t                    index: FieldAddon.INDEX - i / values.length\n\t                };\n\t            });\n\t            return suggestions;\n\t        });\n\t    };\n\t    FieldAddon.prototype.getFields = function () {\n\t        var _this = this;\n\t        if (this.fields == null) {\n\t            this.fields = new Promise(function (resolve, reject) {\n\t                if (_this.omnibox.options.listOfFields != null) {\n\t                    resolve(_this.omnibox.options.listOfFields);\n\t                }\n\t                else {\n\t                    var promise = _this.omnibox.queryController.getEndpoint().listFields();\n\t                    promise.then(function (fieldDescriptions) {\n\t                        var fieldNames = _.chain(fieldDescriptions)\n\t                            .filter(function (fieldDescription) { return fieldDescription.includeInQuery && fieldDescription.groupByField; })\n\t                            .map(function (fieldDescription) { return fieldDescription.name.substr(1); })\n\t                            .value();\n\t                        resolve(fieldNames);\n\t                    }).catch(function () {\n\t                        reject();\n\t                    });\n\t                }\n\t            });\n\t        }\n\t        return this.fields;\n\t    };\n\t    FieldAddon.prototype.fieldNames = function (current) {\n\t        var withAt = current.length > 0 && current[0] == '@';\n\t        var fieldName = withAt ? current.substr(1) : current;\n\t        var fieldNameLC = fieldName.toLowerCase();\n\t        return this.getFields().then(function (fields) {\n\t            var matchFields = _.chain(fields)\n\t                .map(function (field) {\n\t                return {\n\t                    index: field.toLowerCase().indexOf(fieldNameLC),\n\t                    field: withAt ? field : '@' + field\n\t                };\n\t            })\n\t                .filter(function (field) {\n\t                return field.index != -1 && field.field.length > current.length;\n\t            })\n\t                .sortBy('index')\n\t                .map(function (field) { return field.field; })\n\t                .value();\n\t            matchFields = _.first(matchFields, 5);\n\t            return matchFields;\n\t        });\n\t    };\n\t    FieldAddon.prototype.fieldValues = function (field, current) {\n\t        return this.omnibox.queryController.getEndpoint().listFieldValues({\n\t            pattern: '.*' + current + '.*',\n\t            patternType: 'RegularExpression',\n\t            sortCriteria: 'occurrences',\n\t            field: '@' + field,\n\t            maximumNumberOfValues: 5\n\t        }).then(function (values) {\n\t            return _.chain(values)\n\t                .map(function (value) {\n\t                return {\n\t                    index: value.value.toLowerCase().indexOf(current),\n\t                    value: value.value\n\t                };\n\t            })\n\t                .filter(function (value) {\n\t                return value.value.length > current.length;\n\t            })\n\t                .sortBy('index')\n\t                .map(function (value) {\n\t                return value.value.replace(/ /g, '\\u00A0');\n\t            })\n\t                .value();\n\t        });\n\t    };\n\t    FieldAddon.prototype.simpleFieldNames = function (current) {\n\t        var fieldName = current;\n\t        var fieldNameLC = fieldName.toLowerCase();\n\t        return this.getFields().then(function (fields) {\n\t            var matchFields = _.chain(fields)\n\t                .map(function (field) {\n\t                return {\n\t                    index: field.toLowerCase().indexOf(fieldNameLC),\n\t                    field: field + ':'\n\t                };\n\t            })\n\t                .filter(function (field) {\n\t                return field.index != -1 && field.field.length > current.length;\n\t            })\n\t                .sortBy('index')\n\t                .map(function (field) { return field.field; })\n\t                .value();\n\t            matchFields = _.first(matchFields, 5);\n\t            return matchFields;\n\t        });\n\t    };\n\t    FieldAddon.INDEX = 64;\n\t    return FieldAddon;\n\t}());\n\texports.FieldAddon = FieldAddon;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 136 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\t///<reference path='Omnibox.ts'/>\n\tvar OmniboxEvents_1 = __webpack_require__(44);\n\tvar ExternalModulesShim_1 = __webpack_require__(24);\n\tvar QueryExtensionAddon = (function () {\n\t    function QueryExtensionAddon(omnibox) {\n\t        var _this = this;\n\t        this.omnibox = omnibox;\n\t        this.cache = {};\n\t        this.omnibox.bind.on(this.omnibox.element, OmniboxEvents_1.OmniboxEvents.populateOmniboxSuggestions, function (args) {\n\t            args.suggestions.push(_this.getSuggestion());\n\t        });\n\t    }\n\t    QueryExtensionAddon.prototype.getSuggestion = function () {\n\t        var _this = this;\n\t        var hash = this.getHash(this.omnibox.magicBox);\n\t        if (hash == null) {\n\t            return null;\n\t        }\n\t        var hashString = this.hashToString(hash);\n\t        if (this.cache[hashString] != null) {\n\t            return this.hashValueToSuggestion(hash, this.cache[hashString]);\n\t        }\n\t        var values = (hash.type == 'QueryExtensionName' ? this.names(hash.current) : this.attributeNames(hash.name, hash.current, hash.used));\n\t        this.cache[hashString] = values;\n\t        values.catch(function () {\n\t            delete _this.cache[hashString];\n\t        });\n\t        return this.hashValueToSuggestion(hash, values);\n\t    };\n\t    QueryExtensionAddon.prototype.getHash = function (magicBox) {\n\t        var queryExtension = _.last(magicBox.resultAtCursor('QueryExtension'));\n\t        if (queryExtension != null) {\n\t            var queryExtensionArgumentResults = queryExtension.findAll('QueryExtensionArgument');\n\t            var current = _.last(magicBox.resultAtCursor('QueryExtensionName'));\n\t            if (current != null) {\n\t                return {\n\t                    type: 'QueryExtensionName',\n\t                    current: current.toString(),\n\t                    before: current.before(),\n\t                    after: current.after()\n\t                };\n\t            }\n\t            current = _.last(magicBox.resultAtCursor('QueryExtensionArgumentName'));\n\t            if (current != null) {\n\t                var used = _.chain(queryExtensionArgumentResults)\n\t                    .map(function (result) {\n\t                    var name = result.find('QueryExtensionArgumentName');\n\t                    return name && name.toString();\n\t                })\n\t                    .compact()\n\t                    .value();\n\t                var name = queryExtension.find('QueryExtensionName').toString();\n\t                return {\n\t                    type: 'QueryExtensionArgumentName',\n\t                    current: current.toString(),\n\t                    before: current.before(),\n\t                    after: current.after(),\n\t                    name: name,\n\t                    used: used\n\t                };\n\t            }\n\t        }\n\t        return null;\n\t    };\n\t    QueryExtensionAddon.prototype.hashToString = function (hash) {\n\t        if (hash == null) {\n\t            return null;\n\t        }\n\t        return [hash.type, hash.current, (hash.name || ''), (hash.used ? hash.used.join() : '')].join();\n\t    };\n\t    QueryExtensionAddon.prototype.hashValueToSuggestion = function (hash, promise) {\n\t        return promise.then(function (values) {\n\t            var suggestions = _.map(values, function (value, i) {\n\t                return {\n\t                    html: ExternalModulesShim_1.MagicBox.Utils.highlightText(value, hash.current, true),\n\t                    text: hash.before + value + hash.after,\n\t                    index: QueryExtensionAddon.INDEX - i / values.length\n\t                };\n\t            });\n\t            return suggestions;\n\t        });\n\t    };\n\t    QueryExtensionAddon.prototype.getExtensions = function () {\n\t        if (this.extensions == null) {\n\t            this.extensions = this.omnibox.queryController.getEndpoint().extensions();\n\t        }\n\t        return this.extensions;\n\t    };\n\t    QueryExtensionAddon.prototype.names = function (current) {\n\t        var extensionName = current.toLowerCase();\n\t        return this.getExtensions().then(function (extensions) {\n\t            var matchExtensions = _.chain(extensions)\n\t                .map(function (extension) {\n\t                return {\n\t                    index: extension.name.toLowerCase().indexOf(extensionName),\n\t                    extension: extension.name\n\t                };\n\t            })\n\t                .filter(function (extension) {\n\t                return extension.index != -1 && extension.extension.length > extensionName.length;\n\t            })\n\t                .sortBy('index')\n\t                .pluck('extension')\n\t                .value();\n\t            matchExtensions = _.first(matchExtensions, 5);\n\t            return matchExtensions;\n\t        });\n\t    };\n\t    QueryExtensionAddon.prototype.attributeNames = function (name, current, used) {\n\t        return this.getExtensions().then(function (extensions) {\n\t            var extension = _.find(extensions, function (extension) { return extension.name == name; });\n\t            if (extension == null) {\n\t                return [];\n\t            }\n\t            else {\n\t                return _.filter(_.difference(extension.argumentNames, used), function (argumentName) { return argumentName.indexOf(current) == 0; });\n\t            }\n\t        });\n\t    };\n\t    QueryExtensionAddon.prototype.hash = function () {\n\t        return;\n\t    };\n\t    QueryExtensionAddon.INDEX = 62;\n\t    return QueryExtensionAddon;\n\t}());\n\texports.QueryExtensionAddon = QueryExtensionAddon;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 137 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar Dom_1 = __webpack_require__(56);\n\tvar ComponentOptionsModel_1 = __webpack_require__(90);\n\tvar OmniboxEvents_1 = __webpack_require__(44);\n\tvar StringUtils_1 = __webpack_require__(60);\n\tvar RevealQuerySuggestAddon = (function () {\n\t    function RevealQuerySuggestAddon(omnibox) {\n\t        var _this = this;\n\t        this.omnibox = omnibox;\n\t        this.cache = {};\n\t        Dom_1.$$(this.omnibox.element).on(OmniboxEvents_1.OmniboxEvents.populateOmniboxSuggestions, function (e, args) {\n\t            args.suggestions.push(_this.getSuggestion());\n\t        });\n\t    }\n\t    RevealQuerySuggestAddon.suggestiontHtml = function (suggestion) {\n\t        return suggestion.highlighted.replace(/\\[(.*?)\\]|\\{(.*?)\\}|\\((.*?)\\)/g, function (part, notMatched, matched, corrected) {\n\t            var className = '';\n\t            if (matched) {\n\t                className = 'coveo-omnibox-hightlight';\n\t            }\n\t            if (corrected) {\n\t                className = 'coveo-omnibox-hightlight2';\n\t            }\n\t            return RevealQuerySuggestAddon.suggestiontHtmlTemplate({\n\t                className: className,\n\t                text: notMatched || matched || corrected\n\t            });\n\t        });\n\t    };\n\t    RevealQuerySuggestAddon.isPartialMatch = function (suggestion) {\n\t        // groups : 1=notMatched, 2=matched, 3=corrected\n\t        var parts = StringUtils_1.StringUtils.match(suggestion.highlighted, /\\[(.*?)\\]|\\{(.*?)\\}|\\((.*?)\\)/g);\n\t        var firstFail = _.find(parts, function (part) { return part[1] != null; });\n\t        // if no fail found, this is a partial or a full match\n\t        if (firstFail == null) {\n\t            return true;\n\t        }\n\t        // if all right parts are notMatched, the right parts is autocomplete\n\t        return _.every(_.last(parts, _.indexOf(parts, firstFail) - parts.length), function (part) { return part[1] != null; });\n\t    };\n\t    RevealQuerySuggestAddon.prototype.getSuggestion = function () {\n\t        var _this = this;\n\t        var text = this.omnibox.magicBox.getText();\n\t        if (text.length == 0) {\n\t            return null;\n\t        }\n\t        if (this.cache[text] != null) {\n\t            return this.cache[text];\n\t        }\n\t        var promise = this.getRevealQuerySuggest(text);\n\t        this.cache[text] = promise;\n\t        promise.catch(function () {\n\t            delete _this.cache[text];\n\t        });\n\t        return this.cache[text];\n\t    };\n\t    RevealQuerySuggestAddon.prototype.getRevealQuerySuggest = function (text) {\n\t        var payload = { q: text }, language = String['locale'], searchHub = this.omnibox.getBindings().componentOptionsModel.get(ComponentOptionsModel_1.ComponentOptionsModel.attributesEnum.searchHub), pipeline = this.omnibox.getBindings().searchInterface.options.pipeline;\n\t        if (language) {\n\t            payload.language = language;\n\t        }\n\t        if (searchHub) {\n\t            payload.searchHub = searchHub;\n\t        }\n\t        if (pipeline) {\n\t            payload.pipeline = pipeline;\n\t        }\n\t        return this.omnibox.queryController.getEndpoint()\n\t            .getRevealQuerySuggest(payload)\n\t            .then(function (result) {\n\t            var completions = result.completions;\n\t            var results = _.map(completions, function (completion, i) {\n\t                return {\n\t                    html: RevealQuerySuggestAddon.suggestiontHtml(completion),\n\t                    text: completion.expression,\n\t                    index: RevealQuerySuggestAddon.INDEX - i / completions.length,\n\t                    partial: RevealQuerySuggestAddon.isPartialMatch(completion),\n\t                    executableConfidence: completion.executableConfidence\n\t                };\n\t            });\n\t            return results;\n\t        });\n\t    };\n\t    RevealQuerySuggestAddon.INDEX = 60;\n\t    RevealQuerySuggestAddon.suggestiontHtmlTemplate = _.template('<span<%= className? \\' class=\"\\'+className+\\'\"\\':\\'\\' %>><%- text %></span>');\n\t    return RevealQuerySuggestAddon;\n\t}());\n\texports.RevealQuerySuggestAddon = RevealQuerySuggestAddon;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 138 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar OmniboxEvents_1 = __webpack_require__(44);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar OldOmniboxAddon = (function () {\n\t    function OldOmniboxAddon(omnibox) {\n\t        var _this = this;\n\t        this.omnibox = omnibox;\n\t        this.omnibox.bind.on(this.omnibox.element, OmniboxEvents_1.OmniboxEvents.populateOmniboxSuggestions, function (args) {\n\t            _.each(_this.getSuggestion(), function (suggestion) {\n\t                args.suggestions.push(suggestion);\n\t            });\n\t        });\n\t    }\n\t    OldOmniboxAddon.prototype.getSuggestion = function () {\n\t        var text = this.omnibox.magicBox.getText();\n\t        if (text.length == 0) {\n\t            return null;\n\t        }\n\t        if (this.lastQuery == text) {\n\t            return this.lastSuggestions;\n\t        }\n\t        this.lastQuery = text;\n\t        var eventArgs = this.buildPopulateOmniboxEventArgs();\n\t        Dom_1.$$(this.omnibox.element).trigger(OmniboxEvents_1.OmniboxEvents.populateOmnibox, eventArgs);\n\t        return this.lastSuggestions = this.rowsToSuggestions(eventArgs.rows);\n\t    };\n\t    OldOmniboxAddon.prototype.getCurrentQueryExpression = function () {\n\t        var cursorPos = this.omnibox.getCursor();\n\t        var value = this.omnibox.getText();\n\t        var length = value.length;\n\t        var start = cursorPos;\n\t        var end = cursorPos;\n\t        if (value[start] == ' ') {\n\t            start--;\n\t        }\n\t        while (start > 0 && value[start] != ' ') {\n\t            start--;\n\t        }\n\t        while (end < length && value[end] != ' ') {\n\t            end++;\n\t        }\n\t        return value.substring(start, end);\n\t    };\n\t    OldOmniboxAddon.prototype.getRegexToSearch = function (strValue) {\n\t        if (strValue == null) {\n\t            strValue = this.omnibox.getText();\n\t        }\n\t        return new RegExp(Utils_1.Utils.escapeRegexCharacter(strValue), 'i');\n\t    };\n\t    OldOmniboxAddon.prototype.getQueryExpressionBreakDown = function () {\n\t        var _this = this;\n\t        var ret = [];\n\t        var queryWords = this.omnibox.getText().split(' ');\n\t        _.each(queryWords, function (word) {\n\t            ret.push({\n\t                word: word,\n\t                regex: _this.getRegexToSearch(word)\n\t            });\n\t        });\n\t        return ret;\n\t    };\n\t    OldOmniboxAddon.prototype.replace = function (searchValue, newValue) {\n\t        this.omnibox.setText(this.omnibox.getText().replace(searchValue, newValue));\n\t    };\n\t    OldOmniboxAddon.prototype.clearCurrentExpression = function () {\n\t        this.replace(this.getCurrentQueryExpression(), '');\n\t    };\n\t    OldOmniboxAddon.prototype.insertAt = function (at, toInsert) {\n\t        var oldValue = this.omnibox.getText();\n\t        var newValue = [oldValue.slice(0, at), toInsert, oldValue.slice(at)].join('');\n\t        this.omnibox.setText(newValue);\n\t    };\n\t    OldOmniboxAddon.prototype.replaceCurrentExpression = function (newValue) {\n\t        this.replace(this.getCurrentQueryExpression(), newValue);\n\t    };\n\t    OldOmniboxAddon.prototype.buildPopulateOmniboxEventArgs = function () {\n\t        var _this = this;\n\t        var currentQueryExpression = this.getCurrentQueryExpression();\n\t        var ret = {\n\t            rows: [],\n\t            completeQueryExpression: {\n\t                word: this.omnibox.getText(),\n\t                regex: this.getRegexToSearch()\n\t            },\n\t            currentQueryExpression: {\n\t                word: currentQueryExpression,\n\t                regex: this.getRegexToSearch(currentQueryExpression)\n\t            },\n\t            allQueryExpressions: this.getQueryExpressionBreakDown(),\n\t            cursorPosition: this.omnibox.getCursor(),\n\t            clear: function () {\n\t                _this.omnibox.clear();\n\t            },\n\t            clearCurrentExpression: function () {\n\t                _this.clearCurrentExpression();\n\t            },\n\t            replace: function (searchValue, newValue) {\n\t                _this.replace(searchValue, newValue);\n\t            },\n\t            replaceCurrentExpression: function (newValue) {\n\t                _this.replaceCurrentExpression(newValue);\n\t            },\n\t            insertAt: function (at, toInsert) {\n\t                _this.insertAt(at, toInsert);\n\t            },\n\t            closeOmnibox: function () {\n\t                _this.omnibox.magicBox.blur();\n\t            }\n\t        };\n\t        return ret;\n\t    };\n\t    OldOmniboxAddon.prototype.rowsToSuggestions = function (rows) {\n\t        return _.map(rows, function (row) {\n\t            if (!Utils_1.Utils.isNullOrUndefined(row.element)) {\n\t                return new Promise(function (resolve) {\n\t                    resolve([{\n\t                            dom: row.element,\n\t                            index: row.zIndex\n\t                        }]);\n\t                });\n\t            }\n\t            else if (!Utils_1.Utils.isNullOrUndefined(row.deferred)) {\n\t                return new Promise(function (resolve) {\n\t                    row.deferred.then(function (row) {\n\t                        if (row.element != null) {\n\t                            resolve([{\n\t                                    dom: row.element,\n\t                                    index: row.zIndex\n\t                                }]);\n\t                        }\n\t                        else {\n\t                            resolve(null);\n\t                        }\n\t                    });\n\t                });\n\t            }\n\t            return null;\n\t        });\n\t    };\n\t    return OldOmniboxAddon;\n\t}());\n\texports.OldOmniboxAddon = OldOmniboxAddon;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 139 */,\n/* 140 */,\n/* 141 */,\n/* 142 */,\n/* 143 */,\n/* 144 */,\n/* 145 */,\n/* 146 */,\n/* 147 */,\n/* 148 */,\n/* 149 */,\n/* 150 */,\n/* 151 */,\n/* 152 */,\n/* 153 */,\n/* 154 */,\n/* 155 */,\n/* 156 */,\n/* 157 */,\n/* 158 */,\n/* 159 */,\n/* 160 */,\n/* 161 */,\n/* 162 */,\n/* 163 */,\n/* 164 */,\n/* 165 */,\n/* 166 */,\n/* 167 */,\n/* 168 */,\n/* 169 */,\n/* 170 */,\n/* 171 */,\n/* 172 */,\n/* 173 */,\n/* 174 */,\n/* 175 */,\n/* 176 */,\n/* 177 */,\n/* 178 */,\n/* 179 */,\n/* 180 */,\n/* 181 */,\n/* 182 */,\n/* 183 */,\n/* 184 */,\n/* 185 */,\n/* 186 */,\n/* 187 */,\n/* 188 */,\n/* 189 */,\n/* 190 */,\n/* 191 */,\n/* 192 */,\n/* 193 */,\n/* 194 */,\n/* 195 */,\n/* 196 */,\n/* 197 */,\n/* 198 */,\n/* 199 */,\n/* 200 */,\n/* 201 */,\n/* 202 */,\n/* 203 */,\n/* 204 */,\n/* 205 */,\n/* 206 */,\n/* 207 */,\n/* 208 */,\n/* 209 */,\n/* 210 */,\n/* 211 */,\n/* 212 */,\n/* 213 */,\n/* 214 */,\n/* 215 */,\n/* 216 */,\n/* 217 */,\n/* 218 */,\n/* 219 */,\n/* 220 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar DomUtils_1 = __webpack_require__(58);\n\tvar Dom_1 = __webpack_require__(56);\n\tvar SuggestionForOmnibox = (function () {\n\t    function SuggestionForOmnibox(structure, onSelect) {\n\t        this.structure = structure;\n\t        this.onSelect = onSelect;\n\t    }\n\t    SuggestionForOmnibox.prototype.buildOmniboxElement = function (results, args) {\n\t        var element;\n\t        if (results.length != 0) {\n\t            element = Dom_1.$$('div').el;\n\t            if (this.structure.header) {\n\t                var header = this.buildElementHeader();\n\t                element.appendChild(header);\n\t            }\n\t            var rows = this.buildRowElements(results, args);\n\t            _.each(rows, function (row) {\n\t                element.appendChild(row);\n\t            });\n\t        }\n\t        return element;\n\t    };\n\t    SuggestionForOmnibox.prototype.buildElementHeader = function () {\n\t        return Dom_1.$$('div', undefined, this.structure.header.template({\n\t            headerTitle: this.structure.header.title\n\t        })).el;\n\t    };\n\t    SuggestionForOmnibox.prototype.buildRowElements = function (results, args) {\n\t        var _this = this;\n\t        var ret = [];\n\t        _.each(results, function (result) {\n\t            var row = Dom_1.$$('div', undefined, _this.structure.row({\n\t                rawValue: result.value,\n\t                data: DomUtils_1.DomUtils.highlightElement(result.value, args.completeQueryExpression.word)\n\t            })).el;\n\t            Dom_1.$$(row).on('click', function () {\n\t                _this.onSelect.call(_this, result.value, args);\n\t            });\n\t            Dom_1.$$(row).on('keyboardSelect', function () {\n\t                _this.onSelect.call(_this, result.value, args);\n\t            });\n\t            ret.push(row);\n\t        });\n\t        return ret;\n\t    };\n\t    return SuggestionForOmnibox;\n\t}());\n\texports.SuggestionForOmnibox = SuggestionForOmnibox;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 221 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar SuggestionForOmnibox_1 = __webpack_require__(220);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar Component_1 = __webpack_require__(95);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar OmniboxEvents_1 = __webpack_require__(44);\n\tvar QueryEvents_1 = __webpack_require__(46);\n\tvar Strings_1 = __webpack_require__(33);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar Initialization_1 = __webpack_require__(94);\n\tvar Dom_1 = __webpack_require__(56);\n\t/**\n\t * This component is used to provide query suggestions based on the most commonly logged queries by a Coveo Analytics service.\n\t * In order to provide relevant suggestions, they are shown in order of successful document views: thus, queries resulting in no clicks from users or that require refinements are not suggested if better options exist.\n\t * These suggestions appear in the Omnibox Component. This component is thus highly related to the {@link Analytics} Component.\n\t * While a user is typing in a query box, he will be able to see and select the most commonly used queries.\n\t */\n\tvar AnalyticsSuggestions = (function (_super) {\n\t    __extends(AnalyticsSuggestions, _super);\n\t    function AnalyticsSuggestions(element, options, bindings) {\n\t        var _this = this;\n\t        _super.call(this, element, AnalyticsSuggestions.ID, bindings);\n\t        this.options = options;\n\t        this.partialQueries = [];\n\t        this.lastSuggestions = [];\n\t        this.resultsToBuildWith = [];\n\t        if (this.options && 'omniboxSuggestionOptions' in this.options) {\n\t            this.options = _.extend(this.options, this.options['omniboxSuggestionOptions']);\n\t        }\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, AnalyticsSuggestions, this.options);\n\t        var rowTemplate = _.template(\"<div class='magic-box-suggestion coveo-omnibox-selectable coveo-top-analytics-suggestion-row'><%= data %></div>\");\n\t        this.options.onSelect = this.options.onSelect || this.onRowSelection;\n\t        var suggestionStructure;\n\t        if (this.searchInterface.isNewDesign()) {\n\t            suggestionStructure = {\n\t                row: rowTemplate\n\t            };\n\t        }\n\t        else {\n\t            var headerTemplate = _.template(\"<div class='coveo-top-analytics-suggestion-header'><span class='coveo-icon-top-analytics'></span><span class='coveo-caption'><%= headerTitle %></span></div>\");\n\t            suggestionStructure = {\n\t                header: { template: headerTemplate, title: this.options.headerTitle },\n\t                row: rowTemplate\n\t            };\n\t        }\n\t        this.suggestionForOmnibox = new SuggestionForOmnibox_1.SuggestionForOmnibox(suggestionStructure, function (value, args) {\n\t            _this.options.onSelect.call(_this, value, args);\n\t        });\n\t        this.bind.onRootElement(OmniboxEvents_1.OmniboxEvents.populateOmnibox, function (args) { return _this.handlePopulateOmnibox(args); });\n\t        this.bind.onRootElement(QueryEvents_1.QueryEvents.querySuccess, function () { return _this.partialQueries = []; });\n\t    }\n\t    AnalyticsSuggestions.prototype.selectSuggestion = function (suggestion) {\n\t        if (this.currentlyDisplayedSuggestions) {\n\t            if (isNaN(suggestion)) {\n\t                if (this.currentlyDisplayedSuggestions[suggestion]) {\n\t                    Dom_1.$$(this.currentlyDisplayedSuggestions[suggestion].element).trigger('click');\n\t                }\n\t            }\n\t            else {\n\t                var currentlySuggested = _.findWhere(this.currentlyDisplayedSuggestions, { pos: suggestion });\n\t                if (currentlySuggested) {\n\t                    Dom_1.$$(currentlySuggested.element).trigger('click');\n\t                }\n\t            }\n\t        }\n\t    };\n\t    AnalyticsSuggestions.prototype.handlePopulateOmnibox = function (args) {\n\t        var _this = this;\n\t        Assert_1.Assert.exists(args);\n\t        var promise = new Promise(function (resolve, reject) {\n\t            var searchPromise = _this.usageAnalytics.getTopQueries({\n\t                pageSize: _this.options.numberOfSuggestions,\n\t                queryText: args.completeQueryExpression.word\n\t            });\n\t            searchPromise.then(function (results) {\n\t                _this.resultsToBuildWith = _.map(results, function (result) {\n\t                    return {\n\t                        value: result\n\t                    };\n\t                });\n\t                _this.lastSuggestions = results;\n\t                if (!_.isEmpty(_this.resultsToBuildWith) && args.completeQueryExpression.word != '') {\n\t                    _this.partialQueries.push(args.completeQueryExpression.word);\n\t                }\n\t                var element = _this.suggestionForOmnibox.buildOmniboxElement(_this.resultsToBuildWith, args);\n\t                _this.currentlyDisplayedSuggestions = {};\n\t                _.map(Dom_1.$$(element).findAll('.coveo-omnibox-selectable'), function (selectable, i) {\n\t                    _this.currentlyDisplayedSuggestions[Dom_1.$$(selectable).text()] = {\n\t                        element: selectable,\n\t                        pos: i\n\t                    };\n\t                });\n\t                resolve({\n\t                    element: element,\n\t                    zIndex: _this.options.omniboxZIndex\n\t                });\n\t            });\n\t            searchPromise.catch(function () {\n\t                resolve({\n\t                    element: undefined\n\t                });\n\t            });\n\t        });\n\t        args.rows.push({ deferred: promise });\n\t    };\n\t    AnalyticsSuggestions.prototype.onRowSelection = function (value, args) {\n\t        args.clear();\n\t        args.closeOmnibox();\n\t        this.queryStateModel.set(QueryStateModel_1.QueryStateModel.attributesEnum.q, value);\n\t        this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.omniboxAnalytics, {\n\t            partialQueries: this.cleanCustomData(this.partialQueries),\n\t            suggestionRanking: _.indexOf(_.pluck(this.resultsToBuildWith, 'value'), value),\n\t            suggestions: this.cleanCustomData(this.lastSuggestions),\n\t            partialQuery: args.completeQueryExpression.word\n\t        });\n\t        this.queryController.executeQuery();\n\t    };\n\t    AnalyticsSuggestions.prototype.cleanCustomData = function (toClean, rejectLength) {\n\t        if (rejectLength === void 0) { rejectLength = 256; }\n\t        // Filter out only consecutive values that are the identical\n\t        toClean = _.filter(toClean, function (partial, pos, array) {\n\t            return pos === 0 || partial !== array[pos - 1];\n\t        });\n\t        // Custom dimensions cannot be an array in analytics service: Send a string joined by ; instead.\n\t        // Need to replace ;\n\t        toClean = _.map(toClean, function (partial) {\n\t            return partial.replace(/;/g, '');\n\t        });\n\t        // Reduce right to get the last X words that adds to less then rejectLength\n\t        var reducedToRejectLengthOrLess = [];\n\t        _.reduceRight(toClean, function (memo, partial) {\n\t            var totalSoFar = memo + partial.length;\n\t            if (totalSoFar <= rejectLength) {\n\t                reducedToRejectLengthOrLess.push(partial);\n\t            }\n\t            return totalSoFar;\n\t        }, 0);\n\t        toClean = reducedToRejectLengthOrLess.reverse();\n\t        var ret = toClean.join(';');\n\t        // analytics service can store max 256 char in a custom event\n\t        // if we're over that, call cleanup again with an arbitrary 10 less char accepted\n\t        if (ret.length >= 256) {\n\t            return this.cleanCustomData(toClean, rejectLength - 10);\n\t        }\n\t        return toClean.join(';');\n\t    };\n\t    AnalyticsSuggestions.ID = 'AnalyticsSuggestions';\n\t    /**\n\t     * The options for the component\n\t     * @componentOptions\n\t     */\n\t    AnalyticsSuggestions.options = {\n\t        /**\n\t         * The index at which the suggestions should render in the omnibox. Higher value = placed first.<br/>\n\t         * The default value is `52`.\n\t         */\n\t        omniboxZIndex: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 52, min: 0 }),\n\t        /**\n\t         * Specifies the title in the Omnibox for this group of suggestions. This option is not available when using the Lightning Friendly Theme, which is the default design.\n\t         */\n\t        headerTitle: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption({ defaultValue: Strings_1.l('SuggestedQueries') }),\n\t        /**\n\t         * The number of suggestions that should be requested and displayed in the omnibox.<br/>\n\t         * The default value is `5`.\n\t         */\n\t        numberOfSuggestions: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 5, min: 1 })\n\t    };\n\t    return AnalyticsSuggestions;\n\t}(Component_1.Component));\n\texports.AnalyticsSuggestions = AnalyticsSuggestions;\n\tInitialization_1.Initialization.registerAutoCreateComponent(AnalyticsSuggestions);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 222 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar SuggestionForOmnibox_1 = __webpack_require__(220);\n\tvar Component_1 = __webpack_require__(95);\n\tvar ComponentOptions_1 = __webpack_require__(97);\n\tvar Assert_1 = __webpack_require__(16);\n\tvar Utils_1 = __webpack_require__(17);\n\tvar OmniboxEvents_1 = __webpack_require__(44);\n\tvar QueryStateModel_1 = __webpack_require__(89);\n\tvar Initialization_1 = __webpack_require__(94);\n\tvar AnalyticsActionListMeta_1 = __webpack_require__(109);\n\tvar Strings_1 = __webpack_require__(33);\n\tvar Dom_1 = __webpack_require__(56);\n\t/**\n\t * This component provides query suggestions based on a particular facet field.\n\t * For example, this can be used to provide auto-complete suggestions when you type in document titles.\n\t */\n\tvar FieldSuggestions = (function (_super) {\n\t    __extends(FieldSuggestions, _super);\n\t    /**\n\t     * Create a new `FieldSuggestions` component\n\t     * @param element\n\t     * @param options\n\t     * @param bindings\n\t     */\n\t    function FieldSuggestions(element, options, bindings) {\n\t        var _this = this;\n\t        _super.call(this, element, FieldSuggestions.ID, bindings);\n\t        this.options = options;\n\t        if (this.options && 'omniboxSuggestionOptions' in this.options) {\n\t            this.options = _.extend(this.options, this.options['omniboxSuggestionOptions']);\n\t        }\n\t        this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, FieldSuggestions, options);\n\t        Assert_1.Assert.check(Utils_1.Utils.isCoveoField(this.options.field), this.options.field + ' is not a valid field');\n\t        this.options.onSelect = this.options.onSelect || this.onRowSelection;\n\t        var rowTemplate = _.template(\"<div class='magic-box-suggestion coveo-omnibox-selectable coveo-top-field-suggestion-row'><%= data %></div>\");\n\t        var suggestionStructure;\n\t        if (this.searchInterface.isNewDesign()) {\n\t            suggestionStructure = {\n\t                row: rowTemplate\n\t            };\n\t        }\n\t        else {\n\t            var headerTemplate = _.template(\"<div class='coveo-top-field-suggestion-header'><span class='coveo-icon-top-field'></span><span class='coveo-caption'><%= headerTitle %></span></div>\");\n\t            suggestionStructure = {\n\t                header: { template: headerTemplate, title: this.options.headerTitle },\n\t                row: rowTemplate\n\t            };\n\t        }\n\t        this.suggestionForOmnibox = new SuggestionForOmnibox_1.SuggestionForOmnibox(suggestionStructure, function (value, args) {\n\t            _this.options.onSelect.call(_this, value, args);\n\t        });\n\t        this.bind.onRootElement(OmniboxEvents_1.OmniboxEvents.populateOmnibox, function (args) { return _this.handlePopulateOmnibox(args); });\n\t    }\n\t    FieldSuggestions.prototype.selectSuggestion = function (suggestion) {\n\t        if (this.currentlyDisplayedSuggestions) {\n\t            if (isNaN(suggestion)) {\n\t                if (this.currentlyDisplayedSuggestions[suggestion]) {\n\t                    Dom_1.$$(this.currentlyDisplayedSuggestions[suggestion].element).trigger('click');\n\t                }\n\t            }\n\t            else {\n\t                var currentlySuggested = _.findWhere(this.currentlyDisplayedSuggestions, { pos: suggestion });\n\t                if (currentlySuggested) {\n\t                    Dom_1.$$(currentlySuggested.element).trigger('click');\n\t                }\n\t            }\n\t        }\n\t    };\n\t    FieldSuggestions.prototype.handlePopulateOmnibox = function (args) {\n\t        var _this = this;\n\t        Assert_1.Assert.exists(args);\n\t        var valueToSearch = args.completeQueryExpression.word;\n\t        var promise = new Promise(function (resolve) {\n\t            _this.queryController.getEndpoint().listFieldValues(_this.buildListFieldValueRequest(valueToSearch)).then(function (results) {\n\t                var element = _this.suggestionForOmnibox.buildOmniboxElement(results, args);\n\t                _this.currentlyDisplayedSuggestions = {};\n\t                _.map(Dom_1.$$(element).findAll('.coveo-omnibox-selectable'), function (selectable, i) {\n\t                    _this.currentlyDisplayedSuggestions[Dom_1.$$(selectable).text()] = {\n\t                        element: selectable,\n\t                        pos: i\n\t                    };\n\t                });\n\t                resolve({\n\t                    element: element,\n\t                    zIndex: _this.options.omniboxZIndex\n\t                });\n\t            }).catch(function () {\n\t                resolve({\n\t                    element: undefined\n\t                });\n\t            });\n\t        });\n\t        args.rows.push({\n\t            deferred: promise\n\t        });\n\t    };\n\t    FieldSuggestions.prototype.onRowSelection = function (value, args) {\n\t        args.clear();\n\t        args.closeOmnibox();\n\t        this.queryStateModel.set(QueryStateModel_1.QueryStateModel.attributesEnum.q, value);\n\t        this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.omniboxField, {});\n\t        this.queryController.executeQuery();\n\t    };\n\t    FieldSuggestions.prototype.buildListFieldValueRequest = function (valueToSearch) {\n\t        return {\n\t            field: this.options.field,\n\t            ignoreAccents: true,\n\t            sortCriteria: 'occurrences',\n\t            maximumNumberOfValues: this.options.numberOfSuggestions,\n\t            patternType: 'Wildcards',\n\t            pattern: '*' + valueToSearch + '*',\n\t            queryOverride: this.options.queryOverride\n\t        };\n\t    };\n\t    FieldSuggestions.ID = 'FieldSuggestions';\n\t    /**\n\t     * @componentOptions\n\t     */\n\t    FieldSuggestions.options = {\n\t        /**\n\t         * Specifies the field from which suggestions are provided.<br/>\n\t         * This is a required option.\n\t         */\n\t        field: ComponentOptions_1.ComponentOptions.buildFieldOption({ required: true }),\n\t        /**\n\t         * Specifies a query override (any query expression) which should be applied when retrieving suggestions.\n\t         */\n\t        queryOverride: ComponentOptions_1.ComponentOptions.buildStringOption({ defaultValue: '' }),\n\t        /**\n\t         * Specifies the position at which the suggestions should render when there are multiple suggestions providers. (eg : {@link Facet} or {@link AnalyticsSuggestions}).<br/>\n\t         * The default value is 51.\n\t         */\n\t        omniboxZIndex: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 51, min: 0 }),\n\t        /**\n\t         * Specifies the title in the Omnibox for this group of suggestions. This option is not available when using the Lightning Friendly Theme, which is the default design.\n\t         */\n\t        headerTitle: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption({ defaultValue: Strings_1.l('SuggestedResults') }),\n\t        /**\n\t         * Specifies the number of suggestions that should be rendered in the omnibox.<br/>\n\t         * Default value is 5.\n\t         */\n\t        numberOfSuggestions: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 5, min: 1 }),\n\t        /**\n\t         * The event handler function to execute when a value is selected in the Omnibox. By default, the query box text is replaced by what was selected and a new query is executed. You can however replace this default text by providing a callback function to execute when the value is selected.\n\t         * For example:\n\t         *\n\t         * ```\n\t         * Coveo.init(document.querySelector('#search'), {\n\t         *    FieldSuggestions : {\n\t         *      omniboxSuggestionOptions : {\n\t         *        onSelect : function(valueSelected, populateOmniBoxEventArgs){\n\t         *          // Do something special when a value is selected.\n\t         *          // You receive the selected value as the first argument, and the Omnibox object as the second parameter.\n\t         *        }\n\t         *      }\n\t         *    }\n\t         * })\n\t         *\n\t         * // OR using the jQuery extension\n\t         *\n\t         * $('#mySearch').coveo('init', {\n\t         *    FieldSuggestions : {\n\t         *      omniboxSuggestionOptions : {\n\t         *        onSelect : function(valueSelected, populateOmniBoxEventArgs){\n\t         *          // Do something special when a value is selected.\n\t         *          // You receive the selected value as the first argument, and the Omnibox object as the second parameter.\n\t         *        }\n\t         *      }\n\t         *    }\n\t         * })\n\t         * ```\n\t         */\n\t        onSelect: ComponentOptions_1.ComponentOptions.buildCustomOption(function () {\n\t            return null;\n\t        })\n\t    };\n\t    return FieldSuggestions;\n\t}(Component_1.Component));\n\texports.FieldSuggestions = FieldSuggestions;\n\tInitialization_1.Initialization.registerAutoCreateComponent(FieldSuggestions);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ },\n/* 223 */,\n/* 224 */,\n/* 225 */,\n/* 226 */,\n/* 227 */,\n/* 228 */,\n/* 229 */,\n/* 230 */,\n/* 231 */,\n/* 232 */,\n/* 233 */,\n/* 234 */,\n/* 235 */,\n/* 236 */,\n/* 237 */,\n/* 238 */,\n/* 239 */,\n/* 240 */,\n/* 241 */,\n/* 242 */,\n/* 243 */,\n/* 244 */,\n/* 245 */,\n/* 246 */,\n/* 247 */,\n/* 248 */,\n/* 249 */,\n/* 250 */,\n/* 251 */,\n/* 252 */,\n/* 253 */,\n/* 254 */,\n/* 255 */,\n/* 256 */,\n/* 257 */,\n/* 258 */,\n/* 259 */,\n/* 260 */,\n/* 261 */,\n/* 262 */,\n/* 263 */,\n/* 264 */,\n/* 265 */,\n/* 266 */,\n/* 267 */,\n/* 268 */,\n/* 269 */,\n/* 270 */,\n/* 271 */,\n/* 272 */,\n/* 273 */,\n/* 274 */,\n/* 275 */,\n/* 276 */,\n/* 277 */,\n/* 278 */,\n/* 279 */,\n/* 280 */,\n/* 281 */,\n/* 282 */,\n/* 283 */,\n/* 284 */,\n/* 285 */,\n/* 286 */,\n/* 287 */,\n/* 288 */,\n/* 289 */,\n/* 290 */,\n/* 291 */,\n/* 292 */,\n/* 293 */,\n/* 294 */,\n/* 295 */,\n/* 296 */,\n/* 297 */,\n/* 298 */,\n/* 299 */,\n/* 300 */,\n/* 301 */,\n/* 302 */,\n/* 303 */,\n/* 304 */,\n/* 305 */,\n/* 306 */,\n/* 307 */,\n/* 308 */,\n/* 309 */,\n/* 310 */,\n/* 311 */,\n/* 312 */,\n/* 313 */,\n/* 314 */,\n/* 315 */,\n/* 316 */,\n/* 317 */,\n/* 318 */,\n/* 319 */,\n/* 320 */,\n/* 321 */,\n/* 322 */,\n/* 323 */,\n/* 324 */,\n/* 325 */,\n/* 326 */,\n/* 327 */,\n/* 328 */,\n/* 329 */,\n/* 330 */,\n/* 331 */,\n/* 332 */,\n/* 333 */,\n/* 334 */,\n/* 335 */,\n/* 336 */,\n/* 337 */,\n/* 338 */,\n/* 339 */,\n/* 340 */,\n/* 341 */,\n/* 342 */,\n/* 343 */,\n/* 344 */,\n/* 345 */,\n/* 346 */,\n/* 347 */,\n/* 348 */,\n/* 349 */,\n/* 350 */,\n/* 351 */,\n/* 352 */,\n/* 353 */,\n/* 354 */,\n/* 355 */,\n/* 356 */,\n/* 357 */,\n/* 358 */,\n/* 359 */,\n/* 360 */,\n/* 361 */,\n/* 362 */,\n/* 363 */,\n/* 364 */,\n/* 365 */,\n/* 366 */,\n/* 367 */,\n/* 368 */,\n/* 369 */,\n/* 370 */,\n/* 371 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(_) {\"use strict\";\n\tvar CoreHelpers_1 = __webpack_require__(122);\n\t// Webpack output a library target with a temporary name.\n\t// This is to allow end user to put CoveoJsSearch.Dependencie.js before or after the main CoveoJsSearch.js, without breaking\n\t// This code swap the current module to the \"real\" Coveo variable.\n\tfunction swapVar(scope) {\n\t    if (window['Coveo'] == undefined) {\n\t        window['Coveo'] = scope;\n\t    }\n\t    else {\n\t        _.each(_.keys(scope), function (k) {\n\t            window['Coveo'][k] = scope[k];\n\t        });\n\t    }\n\t    CoreHelpers_1.CoreHelpers.exportAllHelpersGlobally(window['Coveo']);\n\t    if (window['__extends'] == undefined) {\n\t        var __extends = function (d, b) {\n\t            for (var p in b) {\n\t                if (b.hasOwnProperty(p)) {\n\t                    d[p] = b[p];\n\t                }\n\t            }\n\t            function __() {\n\t                this.constructor = d;\n\t            }\n\t            d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t        };\n\t        window['__extends'] = __extends;\n\t    }\n\t}\n\texports.swapVar = swapVar;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(12)))\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** CoveoJsSearch.Searchbox.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 164a25d9a2d8a3768e58\n **/","export * from './BaseModules';\nexport * from './MiscModules';\nexport * from './RestModules';\nexport * from './EventsModules';\nexport * from './UtilsModules';\nexport * from './ControllersModules';\nexport * from './ModelsModules';\nexport * from './UIBaseModules';\nexport * from './TemplatesModules';\n\nexport {Analytics} from './ui/Analytics/Analytics';\nexport {AnalyticsSuggestions} from './ui/AnalyticsSuggestions/AnalyticsSuggestions';\nexport {FieldSuggestions} from './ui/FieldSuggestions/FieldSuggestions';\nexport {Omnibox} from './ui/Omnibox/Omnibox';\nexport {Querybox} from './ui/Querybox/Querybox';\nexport {SearchButton} from './ui/SearchButton/SearchButton';\nexport {Searchbox} from './ui/Searchbox/Searchbox';\n\nimport {swapVar} from './SwapVar';\nswapVar(this);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/SearchboxIndex.ts\n **/","import {defaultLanguage} from './strings/DefaultLanguage';\ndefaultLanguage();\nexport {setLanguageAfterPageLoaded} from './strings/DefaultLanguage';\nimport {shim} from './misc/PromisesShim';\nshim();\nimport {customEventPolyfill} from './misc/CustomEventPolyfill';\ncustomEventPolyfill();\n\n// MISC\nexport {version} from './misc/Version';\nexport {SearchEndpoint} from './rest/SearchEndpoint';\nexport * from './ExternalModulesShim';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/BaseModules.ts\n **/","import * as Globalize from 'globalize';\n\tvar merge = function(obj1, obj2) {\n\t\tvar obj3 = {};\n\t\tfor(var attrname in obj1){obj3[attrname] = obj1[attrname]; }\n\t\tfor(var attrname in obj2){obj3[attrname] = obj2[attrname]; }\n\t\treturn obj3;\n}\n  var dict = {\n      \"Unknown\": \"Unknown\",\n      \"And\": \"AND\",\n      \"Authenticating\": \"Authenticating {0}...\",\n      \"Clear\": \"Clear {0}\",\n      \"CompleteQuery\": \"Complete Query\",\n      \"Exclude\": \"Exclude {0}\",\n      \"EnterTag\": \"Add Tag\",\n      \"Next\": \"Next\",\n      \"Last\": \"Last\",\n      \"Link\": \"Link\",\n      \"Or\": \"OR\",\n      \"Previous\": \"Previous\",\n      \"QueryDidntMatchAnyDocuments\": \"Your query did not match any documents.\",\n      \"QueryException\": \"Your query has an error: {0}.\",\n      \"Me\": \"Me\",\n      \"Remove\": \"Remove\",\n      \"Search\": \"Search\",\n      \"SearchFor\": \"Search for {0}\",\n      \"ShareQuery\": \"Share Query\",\n      \"Preferences\": \"Preferences\",\n      \"LinkOpeningSettings\": \"Link Opening Settings\",\n      \"Reauthenticate\": \"Reauthenticate {0}\",\n      \"ResultsFilteringExpression\": \"Results Filtering Expressions\",\n      \"FiltersInYourPreferences\": \"Filters in your preferences\",\n      \"Create\": \"Create\",\n      \"SearchIn\": \"Search in {0}\",\n      \"Seconds\": \"in {0} second<pl>s</pl>\",\n      \"ShowingResultsOf\": \"Result<pl>s</pl> {0}<pl>-{1}</pl> of {2}\",\n      \"SwitchTo\": \"Switch to {0}\",\n      \"Unexclude\": \"Unexclude {0}\",\n      \"ClearAllFilters\": \"Clear All Filters\",\n      \"SkipLogin\": \"Skip login\",\n      \"LoginInProgress\": \"Login in progress, please wait ...\",\n      \"Login\": \"Log In\",\n      \"GetStarted\": \"Get Started\",\n      \"More\": \"More\",\n      \"NMore\": \"{0} more...\",\n      \"Less\": \"Fewer\",\n      \"Settings\": \"Settings\",\n      \"Score\": \"Score\",\n      \"ScoreDescription\": \"The score is computed from the number of occurrences as well as from the position in the result set.\",\n      \"Occurrences\": \"Occurrences\",\n      \"OccurrencesDescription\": \"Sort by number of occurrences, with values having the highest number appearing first.\",\n      \"Label\": \"Label\",\n      \"Of\": \"of\",\n      \"LabelDescription\": \"Sort alphabetically on the field values.\",\n      \"Value\": \"Value\",\n      \"ValueDescription\": \"Sort on the values of the first computed field\",\n      \"AlphaAscending\": \"Value Ascending\",\n      \"AlphaDescending\": \"Value Descending\",\n      \"ChiSquare\": \"Chi Square\",\n      \"Nosort\": \"No Sort\",\n      \"RelativeFrequency\": \"Relative Frequency\",\n      \"RelativeFrequencyDescription\": \"Sort based on the relative frequency of values. Less common values will appear higher.\",\n      \"DateDistribution\": \"Date distribution\",\n      \"Custom\": \"Custom\",\n      \"CustomDescription\": \"Sort based on a custom order\",\n      \"ComputedField\": \"Computed Field\",\n      \"Ascending\": \"Ascending\",\n      \"Descending\": \"Descending\",\n      \"noResultFor\": \"No results for {0}\",\n      \"autoCorrectedQueryTo\": \"Query was automatically corrected to {0}\",\n      \"didYouMean\": \"Did you mean: {0}\",\n      \"SuggestedResults\": \"Suggested Results\",\n      \"SuggestedQueries\": \"Suggested Queries\",\n      \"MostRelevantItems\": \"Most relevant items:\",\n      \"AllItems\": \"All items:\",\n      \"ShowLess\": \"Show less\",\n      \"ShowMore\": \"Show more\",\n      \"HideFacet\": \"Hide Facet\",\n      \"ShowFacet\": \"Show Facet\",\n      \"AndOthers\": \"and {0} other<pl>s</pl>\",\n      \"Others\": \"{0} other<pl>s</pl>\",\n      \"MostRelevantPosts\": \"Most Relevant Posts:\",\n      \"CompleteThread\": \"Complete Thread:\",\n      \"ShowCompleteThread\": \"Show Complete Thread\",\n      \"ShowOnlyTopMatchingPosts\": \"Show Only Top Matching Posts\",\n      \"MostRelevantReplies\": \"Most Relevant Replies:\",\n      \"AllConversation\": \"All Conversation:\",\n      \"ShowAllConversation\": \"Show All Conversation\",\n      \"ShowAllReplies\": \"Show All Replies\",\n      \"ShowOnlyMostRelevantReplies\": \"Show Only Most Relevant Replies\",\n      \"Close\": \"Close\",\n      \"Open\": \"Open\",\n      \"OpenInOutlookWhenPossible\": \"Open in Outlook (when possible)\",\n      \"AlwaysOpenInNewWindow\": \"Always open results in new window\",\n      \"Quickview\": \"Quick View\",\n      \"NoQuickview\": \"The Quick View for this document is unavailable\",\n      \"ErrorReport\": \"Error Report\",\n      \"OopsError\": \"Something went wrong.\",\n      \"ProblemPersists\": \"If the problem persists contact the administrator.\",\n      \"GoBack\": \"Go Back\",\n      \"Reset\": \"Reset\",\n      \"Retry\": \"Retry\",\n      \"MoreInfo\": \"More Information\",\n      \"Username\": \"Username\",\n      \"Password\": \"Password\",\n      \"PostedBy\": \"Posted by\",\n      \"CannotConnect\": \"Cannot connect to the server address.\",\n      \"BadUserPass\": \"Password does not match with username.\",\n      \"PleaseEnterYourCredentials\": \"Please enter your credentials for {0}.\",\n      \"PleaseEnterYourSearchPage\": \"Please enter your search page URL\",\n      \"Collapse\": \"Collapse\",\n      \"Collapsable\": \"Collapsible\",\n      \"Expand\": \"Expand\",\n      \"Today\": \"Today\",\n      \"Yesterday\": \"Yesterday\",\n      \"Tomorrow\": \"Tomorrow\",\n      \"Duration\": \"Duration: {0}\",\n      \"IndexDuration\": \"Index Duration: {0}\",\n      \"ProxyDuration\": \"Proxy Duration: {0}\",\n      \"ClientDuration\": \"Client Duration: {0}\",\n      \"Unavailable\": \"Unavailable\",\n      \"Reply\": \"Reply\",\n      \"ReplyAll\": \"Reply All\",\n      \"Forward\": \"Forward\",\n      \"From\": \"From\",\n      \"Caption\": \"Caption\",\n      \"Expression\": \"Expression\",\n      \"Tab\": \"Tab\",\n      \"Tabs\": \"Tabs\",\n      \"EnterExpressionName\": \"Enter expression name\",\n      \"EnterExpressionToFilterWith\": \"Enter expression to filter results with\",\n      \"SelectTab\": \"Select Tab\",\n      \"SelectAll\": \"Select All\",\n      \"PageUrl\": \"Search page URL\",\n      \"ErrorSavingToDevice\": \"Error while saving the information to your device\",\n      \"ErrorReadingFromDevice\": \"Error while reading the information from your device\",\n      \"AppIntro\": \"Speak with a product specialist who can answer your questions about Coveo and help you decide which Coveo solution is right for you. Or, try a live demo !\",\n      \"TryDemo\": \"Try the demo\",\n      \"ContactUs\": \"Contact us\",\n      \"NewToCoveo\": \"New to Coveo?\",\n      \"LetUsHelpGetStarted\": \"Let us help you get started\",\n      \"LikesThis\": \"{0} like<sn>s</sn> this.\",\n      \"CannotConnectSearchPage\": \"Cannot connect to your search page\",\n      \"AreYouSureDeleteFilter\": \"Are you sure you want to delete the filter {0} with the expression {1}\",\n      \"OnlineHelp\": \"Online Help\",\n      \"Done\": \"Done\",\n      \"SaveFacetState\": \"Save this facet state\",\n      \"ClearFacetState\": \"Clear facet state\",\n      \"DisplayingTheOnlyMessage\": \"Displaying the only message in this conversation\",\n      \"NoNetworkConnection\": \"No network connection\",\n      \"UnknownConnection\": \"Unknown connection\",\n      \"EthernetConnection\": \"Ethernet connection\",\n      \"WiFi\": \"WiFi connection\",\n      \"CELL\": \"Cellular connection\",\n      \"CELL_2G\": \"Cellular 2G connection\",\n      \"CELL_3G\": \"Cellular 3G connection\",\n      \"CELL_4G\": \"Cellular 4G connection\",\n      \"Relevance\": \"Relevance\",\n      \"Date\": \"Date\",\n      \"Amount\": \"Amount\",\n      \"QueryExceptionNoException\": \"No exception\",\n      \"QueryExceptionInvalidSyntax\": \"Invalid syntax\",\n      \"QueryExceptionInvalidCustomField\": \"Invalid custom field\",\n      \"QueryExceptionInvalidDate\": \"Invalid date\",\n      \"QueryExceptionInvalidExactPhrase\": \"Invalid exact phrase\",\n      \"QueryExceptionInvalidDateOp\": \"Invalid date operator\",\n      \"QueryExceptionInvalidNear\": \"Invalid NEAR operator\",\n      \"QueryExceptionInvalidWeightedNear\": \"Invalid weighted NEAR\",\n      \"QueryExceptionInvalidTerm\": \"Invalid term\",\n      \"QueryExceptionTooManyTerms\": \"Too many terms\",\n      \"QueryExceptionWildcardTooGeneral\": \"Wildcard too general\",\n      \"QueryExceptionInvalidSortField\": \"Invalid sort field\",\n      \"QueryExceptionInvalidSmallStringOp\": \"Invalid small string operator\",\n      \"QueryExceptionRequestedResultsMax\": \"Requested results maximum\",\n      \"QueryExceptionAggregatedMirrorDead\": \"Aggregated mirror is offline\",\n      \"QueryExceptionAggregatedMirrorQueryTimeOut\": \"Aggregated mirror query timeout\",\n      \"QueryExceptionAggregatedMirrorInvalidBuildNumber\": \"Aggregated mirror invalid build number\",\n      \"QueryExceptionAggregatedMirrorCannotConnect\": \"Aggregated mirror cannot connect\",\n      \"QueryExceptionNotEnoughLeadingCharsWildcard\": \"Not enough leading character wildcard\",\n      \"QueryExceptionSecurityInverterNotFound\": \"Security inverter not found\",\n      \"QueryExceptionSecurityInverterAccessDenied\": \"Security inverter access denied\",\n      \"QueryExceptionAggregatedMirrorCannotImpersonate\": \"Aggregated mirror cannot impersonate\",\n      \"QueryExceptionUnexpected\": \"Unexpected\",\n      \"QueryExceptionAccessDenied\": \"Access denied\",\n      \"QueryExceptionSuperUserTokenInvalid\": \"Super user token invalid\",\n      \"QueryExceptionSuperUserTokenExpired\": \"Super user token is expired\",\n      \"QueryExceptionLicenseQueriesExpired\": \"Queries license expired\",\n      \"QueryExceptionLicenseSuperUserTokenNotSupported\": \"License super user token not supported\",\n      \"QueryExceptionInvalidSession\": \"Invalid session\",\n      \"QueryExceptionInvalidDocument\": \"Invalid document\",\n      \"QueryExceptionSearchDisabled\": \"Search disabled\",\n      \"FileType\": \"File type\",\n      \"ShowAttachment\": \"Show attachment\",\n      \"OnFeed\": \"on {0}'s feed.\",\n      \"Author\": \"Author\",\n      \"NoTitle\": \"No title\",\n      \"CurrentSelections\": \"Current selections\",\n      \"AllContent\": \"All content\",\n      \"CancelLastAction\": \"Cancel last action\",\n      \"SearchTips\": \"Search tips\",\n      \"CheckSpelling\": \"Check the spelling of your keywords.\",\n      \"TryUsingFewerKeywords\": \"Try using fewer, different or more general keywords.\",\n      \"SelectFewerFilters\": \"Select fewer filters to broaden your search.\",\n      \"Document\": \"Document\",\n      \"Time\": \"Time\",\n      \"StartDate\": \"Start Date\",\n      \"StartTime\": \"Start Time\",\n      \"DurationTitle\": \"Duration\",\n      \"UserQuery\": \"User query\",\n      \"ShowUserActions\": \"Show User Actions\",\n      \"NoData\": \"No data available\",\n      \"EventType\": \"Event type\",\n      \"GoToFullSearch\": \"Full search\",\n      \"GoToEdition\": \"Customize Panel\",\n      \"RemoveContext\": \"Remove context\",\n      \"BoxAttachToCase\": \"Attach to case\",\n      \"AttachToCase\": \"Attach to case\",\n      \"Attach\": \"Attach\",\n      \"Attached\": \"Attached\",\n      \"Detach\": \"Detach\",\n      \"Details\": \"Details\",\n      \"AdditionalFilters\": \"Additional filters\",\n      \"SelectNonContextualSearch\": \"Remove the context from the current record to broaden your search\",\n      \"CopyPasteToSupport\": \"Copy paste this message to Coveo Support team for more information.\",\n      \"FollowQueryDescription\": \"Alert me for changes to the search results of this query.\",\n      \"SearchAlerts_Panel\": \"Manage Alerts\",\n      \"SearchAlerts_PanelDescription\": \"View and manage your search alerts.\",\n      \"SearchAlerts_PanelNoSearchAlerts\": \"You have no subscriptions.\",\n      \"SearchAlerts_Fail\": \"The Search Alerts service is currently unavailable.\",\n      \"SearchAlerts_Type\": \"Type\",\n      \"SearchAlerts_Content\": \"Content\",\n      \"SearchAlerts_Actions\": \"Action\",\n      \"EmptyQuery\": \"&lt;empty&gt;\",\n      \"SearchAlerts_Type_followQuery\": \"Query\",\n      \"SearchAlerts_Type_followDocument\": \"Item\",\n      \"SearchAlerts_unFollowing\": \"Stop Following\",\n      \"SearchAlerts_follow\": \"Follow\",\n      \"SearchAlerts_followed\": \"Followed\",\n      \"SearchAlerts_followQuery\": \"Follow Query\",\n      \"Subscription_StopFollowingQuery\": \"Stop Following Query\",\n      \"SearchAlerts_Frequency\": \"When\",\n      \"SubscriptionsManageSubscriptions\": \"Manage Alerts\",\n      \"SubscriptionsMessageFollowQuery\": \"You will receive alerts when the query <b>{0}</b> returns new or updated items.\",\n      \"SubscriptionsMessageFollow\": \"You will receive alerts for changes to the item <b>{0}</b>.\",\n      \"Expiration\": \"Expiration\",\n      \"Monthly\": \"Monthly\",\n      \"Daily\": \"Daily\",\n      \"Monday\": \"Monday\",\n      \"Tuesday\": \"Tuesday\",\n      \"Wednesday\": \"Wednesday\",\n      \"Thursday\": \"Thursday\",\n      \"Friday\": \"Friday\",\n      \"Saturday\": \"Saturday\",\n      \"Sunday\": \"Sunday\",\n      \"StartTypingCaseForSuggestions\": \"Describe your problem to see possible solutions\",\n      \"ExportToExcel\": \"Export to Excel\",\n      \"ExportToExcelDescription\": \"Export search results to Excel\",\n      \"CaseCreationNoResults\": \"No recommended solutions were found\",\n      \"SortBy\": \"Sort by\",\n      \"BoxCreateArticle\": \"Create Article\",\n      \"Facets\": \"Facets\",\n      \"AdvancedSearch\": \"Advanced Search\",\n      \"Keywords\": \"Keywords\",\n      \"AllTheseWords\": \"All these words\",\n      \"ExactPhrase\": \"This exact phrase\",\n      \"AnyOfTheseWords\": \"Any of these words\",\n      \"NoneOfTheseWords\": \"None of these words\",\n      \"Anytime\": \"Anytime\",\n      \"InTheLast\": \"In the last\",\n      \"Days\": \"days\",\n      \"Months\": \"months\",\n      \"Between\": \"Between\",\n      \"Language\": \"Language\",\n      \"Size\": \"Size\",\n      \"AtLeast\": \"at least\",\n      \"AtMost\": \"at most\",\n      \"Contains\": \"contains\",\n      \"DoesNotContain\": \"does not contain\",\n      \"Matches\": \"matches\",\n      \"Bytes\": \"bytes\",\n      \"objecttype_people\": \"People\",\n      \"objecttype_message\": \"Message\",\n      \"objecttype_feed\": \"RSS Feed\",\n      \"objecttype_thread\": \"Thread\",\n      \"objecttype_file\": \"File\",\n      \"objecttype_board\": \"\",\n      \"objecttype_category\": \"\",\n      \"objecttype_account\": \"Account\",\n      \"objecttype_campaign\": \"Campaign\",\n      \"objecttype_case\": \"Case\",\n      \"objecttype_contact\": \"Contact\",\n      \"objecttype_contract\": \"Contract\",\n      \"objecttype_event\": \"Event\",\n      \"objecttype_lead\": \"Lead\",\n      \"objecttype_solution\": \"Solution\",\n      \"objecttype_task\": \"Task\",\n      \"objecttype_user\": \"User\",\n      \"objecttype_attachment\": \"Attachment\",\n      \"objecttype_casecomment\": \"Case Comment\",\n      \"objecttype_opportunity\": \"Opportunity\",\n      \"objecttype_feeditem\": \"Chatter\",\n      \"objecttype_feedcomment\": \"Chatter\",\n      \"objecttype_note\": \"Note\",\n      \"objecttype_product\": \"Product\",\n      \"objecttype_partner\": \"Partner\",\n      \"objecttype_kbdocumentation\": \"Documentation\",\n      \"objecttype_kbtechnicalarticle\": \"Documentation\",\n      \"objecttype_kbsolution\": \"Solution\",\n      \"objecttype_kbknowledgearticle\": \"Knowledge Article\",\n      \"objecttype_kbattachment\": \"Attachment\",\n      \"filetype_html\": \"HTML File\",\n      \"filetype_wiki\": \"Wiki\",\n      \"filetype_webscraperwebpage\": \"Web page\",\n      \"filetype_image\": \"Image\",\n      \"filetype_folder\": \"Folder\",\n      \"filetype_txt\": \"Text\",\n      \"filetype_zip\": \"Zip File\",\n      \"filetype_pdf\": \"PDF File\",\n      \"filetype_xml\": \"XML File\",\n      \"filetype_doc\": \"Document\",\n      \"filetype_xls\": \"Spreadsheet Document\",\n      \"filetype_ppt\": \"Presentation Document\",\n      \"filetype_video\": \"Video\",\n      \"filetype_youtube\": \"YouTube video\",\n      \"filetype_saleforceitem\": \"Salesforce\",\n      \"filetype_exchangemessage\": \"Message\",\n      \"filetype_exchangeappointment\": \"Appointment\",\n      \"filetype_exchangenote\": \"Note\",\n      \"filetype_exchangetask\": \"Task\",\n      \"filetype_exchangeperson\": \"Exchange user\",\n      \"filetype_activedirperson\": \"Active Directory user\",\n      \"filetype_exchangeactivity\": \"Activity\",\n      \"filetype_exchangecalendarmessage\": \"Calendar message\",\n      \"filetype_exchangedocument\": \"Exchange document\",\n      \"filetype_exchangerssfeed\": \"RSS Feed\",\n      \"filetype_exchangejunkmessage\": \"Junk email\",\n      \"filetype_exchangeofficecom\": \"Communications\",\n      \"filetype_lithiummessage\": \"Message\",\n      \"filetype_lithiumthread\": \"Thread\",\n      \"filetype_lithiumboard\": \"Board\",\n      \"filetype_lithiumcategory\": \"Category\",\n      \"filetype_lithiumcommunity\": \"Community\",\n      \"filetype_spportal\": \"Portal\",\n      \"filetype_spsite\": \"Site\",\n      \"filetype_spuserprofile\": \"SharePoint User\",\n      \"filetype_sparea\": \"Area\",\n      \"filetype_spannouncement\": \"Announcement\",\n      \"filetype_spannouncementlist\": \"Announcements\",\n      \"filetype_spcontact\": \"Contact\",\n      \"filetype_spcontactlist\": \"Contacts\",\n      \"filetype_spcustomlist\": \"Custom Lists\",\n      \"filetype_spdiscussionboard\": \"Discussion Board\",\n      \"filetype_spdiscussionboardlist\": \"Discussion Boards\",\n      \"filetype_spdocumentlibrarylist\": \"Document Library\",\n      \"filetype_spevent\": \"Event\",\n      \"filetype_speventlist\": \"Events\",\n      \"filetype_spformlibrarylist\": \"Form Library\",\n      \"filetype_spissue\": \"Issue\",\n      \"filetype_spissuelist\": \"Issues\",\n      \"filetype_splink\": \"Link\",\n      \"filetype_splinklist\": \"Links\",\n      \"filetype_sppicturelibrarylist\": \"Picture Library\",\n      \"filetype_spsurvey\": \"Survey\",\n      \"filetype_spsurveylist\": \"Surveys\",\n      \"filetype_sptask\": \"Task\",\n      \"filetype_sptasklist\": \"Tasks\",\n      \"filetype_spagenda\": \"Agenda\",\n      \"filetype_spagendalist\": \"Agendas\",\n      \"filetype_spattendee\": \"Attendee\",\n      \"filetype_spattendeelist\": \"Attendees\",\n      \"filetype_spcustomgridlist\": \"Custom Grids\",\n      \"filetype_spdecision\": \"Decision\",\n      \"filetype_spdecisionlist\": \"Decisions\",\n      \"filetype_spobjective\": \"Objective\",\n      \"filetype_spobjectivelist\": \"Objectives\",\n      \"filetype_sptextbox\": \"Textbox\",\n      \"filetype_sptextboxlist\": \"Textbox list\",\n      \"filetype_spthingstobring\": \"Thing To Bring\",\n      \"filetype_spthingstobringlist\": \"Things To Bring\",\n      \"filetype_sparealisting\": \"Area Listing\",\n      \"filetype_spmeetingserie\": \"Meeting series\",\n      \"filetype_spmeetingserielist\": \"Meeting Series List\",\n      \"filetype_spsitedirectory\": \"Site Directory Item\",\n      \"filetype_spsitedirectorylist\": \"Site Directory\",\n      \"filetype_spdatasource\": \"Data Source\",\n      \"filetype_spdatasourcelist\": \"Data Source List\",\n      \"filetype_splisttemplatecataloglist\": \"List Template Catalog List\",\n      \"filetype_spwebpartcataloglist\": \"WebPart catalog list\",\n      \"filetype_spwebtemplatecataloglist\": \"Web Template Catalog List\",\n      \"filetype_spworkspacepagelist\": \"Workspace Page List\",\n      \"filetype_spunknownlist\": \"Custom List\",\n      \"filetype_spadministratortask\": \"Administrator Task\",\n      \"filetype_spadministratortasklist\": \"Administrator Tasks\",\n      \"filetype_spareadocumentlibrarylist\": \"Area Document Library\",\n      \"filetype_spblogcategory\": \"Blog Category\",\n      \"filetype_spblogcategorylist\": \"Blog Category\",\n      \"filetype_spblogcomment\": \"Blog Comment\",\n      \"filetype_spblogcommentlist\": \"Blog Comments\",\n      \"filetype_spblogpost\": \"Blog Post\",\n      \"filetype_spblogpostlist\": \"Blog Posts\",\n      \"filetype_spdataconnectionlibrarylist\": \"Data Connection Library\",\n      \"filetype_spdistributiongroup\": \"Distribution Group\",\n      \"filetype_spdistributiongrouplist\": \"Distribution Groups\",\n      \"filetype_spipfslist\": \"InfoPath Form Servers\",\n      \"filetype_spkeyperformanceindicator\": \"Key Performance Indicator\",\n      \"filetype_spkeyperformanceindicatorlist\": \"Key Performance Indicators\",\n      \"filetype_splanguagesandtranslator\": \"Languages and Translator\",\n      \"filetype_splanguagesandtranslatorlist\": \"Languages and Translators\",\n      \"filetype_spmasterpagescataloglist\": \"Master Pages Library\",\n      \"filetype_spnocodeworkflowlibrarylist\": \"No Code Workflow Library\",\n      \"filetype_spprojecttask\": \"Project Task\",\n      \"filetype_spprojecttasklist\": \"Project Tasks\",\n      \"filetype_sppublishingpageslibrarylist\": \"Page Library\",\n      \"filetype_spreportdocumentlibrarylist\": \"Report Document Library\",\n      \"filetype_spreportlibrarylist\": \"Report Library\",\n      \"filetype_spslidelibrarylist\": \"Slide Library\",\n      \"filetype_sptab\": \"Tabs\",\n      \"filetype_sptablist\": \"Tabs List\",\n      \"filetype_sptranslationmanagementlibrarylist\": \"Translation Management Library\",\n      \"filetype_spuserinformation\": \"User Information\",\n      \"filetype_spuserinformationlist\": \"User Information List\",\n      \"filetype_spwikipagelibrarylist\": \"Wiki Page Library\",\n      \"filetype_spworkflowhistory\": \"Workflow History\",\n      \"filetype_spworkflowhistorylist\": \"Workflow Histories\",\n      \"filetype_spworkflowprocess\": \"Custom Workflow Process\",\n      \"filetype_spworkflowprocesslist\": \"Custom Workflow Processes\",\n      \"filetype_sppublishingimageslibrarylist\": \"Publishing Image Library\",\n      \"filetype_spcirculation\": \"Circulation\",\n      \"filetype_spcirculationlist\": \"Circulations\",\n      \"filetype_spdashboardslibrarylist\": \"Dashboard Library\",\n      \"filetype_spdataconnectionforperformancepointlibrarylist\": \"Data Connection for Performance Point Library\",\n      \"filetype_sphealthreport\": \"Health Report\",\n      \"filetype_sphealthreportlist\": \"Health Reports\",\n      \"filetype_sphealthrule\": \"Health Rule\",\n      \"filetype_sphealthrulelist\": \"Health Rules\",\n      \"filetype_spimedictionary\": \"IME Dictionary\",\n      \"filetype_spimedictionarylist\": \"IME Dictionaries\",\n      \"filetype_spperformancepointcontent\": \"Performance Point Content\",\n      \"filetype_spperformancepointcontentlist\": \"Performance Point Contents\",\n      \"filetype_spphonecallmemo\": \"Phone Call Memo\",\n      \"filetype_spphonecallmemolist\": \"Phone Call Memos\",\n      \"filetype_sprecordlibrarylist\": \"Record Library\",\n      \"filetype_spresource\": \"Resource\",\n      \"filetype_spresourcelist\": \"Resources\",\n      \"filetype_spprocessdiagramslibrarylist\": \"Process Diagram Library\",\n      \"filetype_spsitethemeslibrarylist\": \"Site Theme Library\",\n      \"filetype_spsolutionslibrarylist\": \"Solution Library\",\n      \"filetype_spwfpublibrarylist\": \"WFPUB Library\",\n      \"filetype_spwhereabout\": \"Whereabout\",\n      \"filetype_spwhereaboutlist\": \"Whereabouts\",\n      \"filetype_spdocumentlink\": \"Link to a Document\",\n      \"filetype_spdocumentset\": \"Document Set\",\n      \"filetype_spmicrofeedpost\": \"Microfeed Post\",\n      \"filetype_spmicrofeedlist\": \"Microfeed\",\n      \"filetype_splistfolder\": \"List Folder\",\n      \"filetype_youtubevideo\": \"YouTube video\",\n      \"filetype_youtubeplaylistitem\": \"YouTube playlist item\",\n  }\nexport function defaultLanguage() {\nif( window['$'] != undefined && window['$'].fn != undefined && window['$'].fn.jquery != undefined ) { \n\n    $(function(){\n\n        var locales = String[\"locales\"] || (String[\"locales\"] = {});\n  locales[\"en\"] = merge(locales[\"en\"], dict);\n  String[\"toLocaleString\"].call(this, { \"en\": dict });\n  String[\"locale\"] = \"en\";\n  String[\"defaultLocale\"] = \"en\";\n  Globalize.culture(\"en\") \n\n    })\n\n  } else {\n    document.addEventListener('DOMContentLoaded', function(event){\n\n        var locales = String[\"locales\"] || (String[\"locales\"] = {});\n  locales[\"en\"] = merge(locales[\"en\"], dict);\n  String[\"toLocaleString\"].call(this, { \"en\": dict });\n  String[\"locale\"] = \"en\";\n  String[\"defaultLocale\"] = \"en\";\n  Globalize.culture(\"en\")\n  })}}\nexport function setLanguageAfterPageLoaded() {\n  var locales = String[\"locales\"] || (String[\"locales\"] = {});\n  locales[\"en\"] = merge(locales[\"en\"], dict);\n  String[\"toLocaleString\"].call(this, { \"en\": dict });\n  String[\"locale\"] = \"en\";\n  String[\"defaultLocale\"] = \"en\";\n  Globalize.culture(\"en\")}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/strings/DefaultLanguage.ts\n **/","/*! globalize - v0.1.1 - 2013-04-30\n* https://github.com/jquery/globalize\n* Copyright 2013 ; Licensed MIT */\nvar Globalize = (function(e,r){var t,n,a,s,u,l,i,c,o,f,d,p,h,g,b,m,y,M,v,k,z,F,A,x;t=function(e){return new t.prototype.init(e)},\"undefined\"!=typeof require&&\"undefined\"!=typeof exports&&\"undefined\"!=typeof module?module.exports=t:e.Globalize=t,t.cultures={},t.prototype={constructor:t,init:function(e){return this.cultures=t.cultures,this.cultureSelector=e,this}},t.prototype.init.prototype=t.prototype,t.cultures[\"default\"]={name:\"en\",englishName:\"English\",nativeName:\"English\",isRTL:!1,language:\"en\",numberFormat:{pattern:[\"-n\"],decimals:2,\",\":\",\",\".\":\".\",groupSizes:[3],\"+\":\"+\",\"-\":\"-\",NaN:\"NaN\",negativeInfinity:\"-Infinity\",positiveInfinity:\"Infinity\",percent:{pattern:[\"-n %\",\"n %\"],decimals:2,groupSizes:[3],\",\":\",\",\".\":\".\",symbol:\"%\"},currency:{pattern:[\"($n)\",\"$n\"],decimals:2,groupSizes:[3],\",\":\",\",\".\":\".\",symbol:\"$\"}},calendars:{standard:{name:\"Gregorian_USEnglish\",\"/\":\"/\",\":\":\":\",firstDay:0,days:{names:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],namesAbbr:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],namesShort:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"]},months:{names:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\",\"\"],namesAbbr:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\",\"\"]},AM:[\"AM\",\"am\",\"AM\"],PM:[\"PM\",\"pm\",\"PM\"],eras:[{name:\"A.D.\",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:\"M/d/yyyy\",D:\"dddd, MMMM dd, yyyy\",t:\"h:mm tt\",T:\"h:mm:ss tt\",f:\"dddd, MMMM dd, yyyy h:mm tt\",F:\"dddd, MMMM dd, yyyy h:mm:ss tt\",M:\"MMMM dd\",Y:\"yyyy MMMM\",S:\"yyyy'-'MM'-'dd'T'HH':'mm':'ss\"}}},messages:{}},t.cultures[\"default\"].calendar=t.cultures[\"default\"].calendars.standard,t.cultures.en=t.cultures[\"default\"],t.cultureSelector=\"en\",n=/^0x[a-f0-9]+$/i,a=/^[+\\-]?infinity$/i,s=/^[+\\-]?\\d*\\.?\\d*(e[+\\-]?\\d+)?$/,u=/^\\s+|\\s+$/g,l=function(e,r){if(e.indexOf)return e.indexOf(r);for(var t=0,n=e.length;n>t;t++)if(e[t]===r)return t;return-1},i=function(e,r){return e.substr(e.length-r.length)===r},c=function(){var e,t,n,a,s,u,l=arguments[0]||{},i=1,p=arguments.length,h=!1;for(\"boolean\"==typeof l&&(h=l,l=arguments[1]||{},i=2),\"object\"==typeof l||f(l)||(l={});p>i;i++)if(null!=(e=arguments[i]))for(t in e)n=l[t],a=e[t],l!==a&&(h&&a&&(d(a)||(s=o(a)))?(s?(s=!1,u=n&&o(n)?n:[]):u=n&&d(n)?n:{},l[t]=c(h,u,a)):a!==r&&(l[t]=a));return l},o=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},f=function(e){return\"[object Function]\"===Object.prototype.toString.call(e)},d=function(e){return\"[object Object]\"===Object.prototype.toString.call(e)},p=function(e,r){return 0===e.indexOf(r)},h=function(e){return(e+\"\").replace(u,\"\")},g=function(e){return isNaN(e)?0/0:Math[0>e?\"ceil\":\"floor\"](e)},b=function(e,r,t){var n;for(n=e.length;r>n;n+=1)e=t?\"0\"+e:e+\"0\";return e},m=function(e,r){for(var t=0,n=!1,a=0,s=e.length;s>a;a++){var u=e.charAt(a);switch(u){case\"'\":n?r.push(\"'\"):t++,n=!1;break;case\"\\\\\":n&&r.push(\"\\\\\"),n=!n;break;default:r.push(u),n=!1}}return t},y=function(e,r){r=r||\"F\";var t,n=e.patterns,a=r.length;if(1===a){if(t=n[r],!t)throw\"Invalid date format string '\"+r+\"'.\";r=t}else 2===a&&\"%\"===r.charAt(0)&&(r=r.charAt(1));return r},M=function(e,r,t){function n(e,r){var t,n=e+\"\";return r>1&&r>n.length?(t=v[r-2]+n,t.substr(t.length-r,r)):t=n}function a(){return h||g?h:(h=A.test(r),g=!0,h)}function s(e,r){if(b)return b[r];switch(r){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw\"Invalid part value \"+r}}var u,l=t.calendar,i=l.convert;if(!r||!r.length||\"i\"===r){if(t&&t.name.length)if(i)u=M(e,l.patterns.F,t);else{var c=new Date(e.getTime()),o=z(e,l.eras);c.setFullYear(F(e,l,o)),u=c.toLocaleString()}else u=\"\"+e;return u}var f=l.eras,d=\"s\"===r;r=y(l,r),u=[];var p,h,g,b,v=[\"0\",\"00\",\"000\"],A=/([^d]|^)(d|dd)([^d]|$)/g,x=0,I=k();for(!d&&i&&(b=i.fromGregorian(e));;){var S=I.lastIndex,w=I.exec(r),C=r.slice(S,w?w.index:r.length);if(x+=m(C,u),!w)break;if(x%2)u.push(w[0]);else{var D=w[0],H=D.length;switch(D){case\"ddd\":case\"dddd\":var O=3===H?l.days.namesAbbr:l.days.names;u.push(O[e.getDay()]);break;case\"d\":case\"dd\":h=!0,u.push(n(s(e,2),H));break;case\"MMM\":case\"MMMM\":var N=s(e,1);u.push(l.monthsGenitive&&a()?l.monthsGenitive[3===H?\"namesAbbr\":\"names\"][N]:l.months[3===H?\"namesAbbr\":\"names\"][N]);break;case\"M\":case\"MM\":u.push(n(s(e,1)+1,H));break;case\"y\":case\"yy\":case\"yyyy\":N=b?b[0]:F(e,l,z(e,f),d),4>H&&(N%=100),u.push(n(N,H));break;case\"h\":case\"hh\":p=e.getHours()%12,0===p&&(p=12),u.push(n(p,H));break;case\"H\":case\"HH\":u.push(n(e.getHours(),H));break;case\"m\":case\"mm\":u.push(n(e.getMinutes(),H));break;case\"s\":case\"ss\":u.push(n(e.getSeconds(),H));break;case\"t\":case\"tt\":N=12>e.getHours()?l.AM?l.AM[0]:\" \":l.PM?l.PM[0]:\" \",u.push(1===H?N.charAt(0):N);break;case\"f\":case\"ff\":case\"fff\":u.push(n(e.getMilliseconds(),3).substr(0,H));break;case\"z\":case\"zz\":p=e.getTimezoneOffset()/60,u.push((0>=p?\"+\":\"-\")+n(Math.floor(Math.abs(p)),H));break;case\"zzz\":p=e.getTimezoneOffset()/60,u.push((0>=p?\"+\":\"-\")+n(Math.floor(Math.abs(p)),2)+\":\"+n(Math.abs(e.getTimezoneOffset()%60),2));break;case\"g\":case\"gg\":l.eras&&u.push(l.eras[z(e,f)].name);break;case\"/\":u.push(l[\"/\"]);break;default:throw\"Invalid date format pattern '\"+D+\"'.\"}}}return u.join(\"\")},function(){var e;e=function(e,r,t){var n=t.groupSizes,a=n[0],s=1,u=Math.pow(10,r),l=Math.round(e*u)/u;isFinite(l)||(l=e),e=l;var i=e+\"\",c=\"\",o=i.split(/e/i),f=o.length>1?parseInt(o[1],10):0;i=o[0],o=i.split(\".\"),i=o[0],c=o.length>1?o[1]:\"\",f>0?(c=b(c,f,!1),i+=c.slice(0,f),c=c.substr(f)):0>f&&(f=-f,i=b(i,f+1,!0),c=i.slice(-f,i.length)+c,i=i.slice(0,-f)),c=r>0?t[\".\"]+(c.length>r?c.slice(0,r):b(c,r)):\"\";for(var d=i.length-1,p=t[\",\"],h=\"\";d>=0;){if(0===a||a>d)return i.slice(0,d+1)+(h.length?p+h+c:c);h=i.slice(d-a+1,d+1)+(h.length?p+h:\"\"),d-=a,n.length>s&&(a=n[s],s++)}return i.slice(0,d+1)+p+h+c},v=function(r,t,n){if(!isFinite(r))return 1/0===r?n.numberFormat.positiveInfinity:r===-1/0?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!t||\"i\"===t)return n.name.length?r.toLocaleString():\"\"+r;t=t||\"D\";var a,s=n.numberFormat,u=Math.abs(r),l=-1;t.length>1&&(l=parseInt(t.slice(1),10));var i,c=t.charAt(0).toUpperCase();switch(c){case\"D\":a=\"n\",u=g(u),-1!==l&&(u=b(\"\"+u,l,!0)),0>r&&(u=\"-\"+u);break;case\"N\":i=s;case\"C\":i=i||s.currency;case\"P\":i=i||s.percent,a=0>r?i.pattern[0]:i.pattern[1]||\"n\",-1===l&&(l=i.decimals),u=e(u*(\"P\"===c?100:1),l,i);break;default:throw\"Bad number format specifier: \"+c}for(var o=/n|\\$|-|%/g,f=\"\";;){var d=o.lastIndex,p=o.exec(a);if(f+=a.slice(d,p?p.index:a.length),!p)break;switch(p[0]){case\"n\":f+=u;break;case\"$\":f+=s.currency.symbol;break;case\"-\":/[1-9]/.test(u)&&(f+=s[\"-\"]);break;case\"%\":f+=s.percent.symbol}}return f}}(),k=function(){return/\\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},z=function(e,r){if(!r)return 0;for(var t,n=e.getTime(),a=0,s=r.length;s>a;a++)if(t=r[a].start,null===t||n>=t)return a;return 0},F=function(e,r,t,n){var a=e.getFullYear();return!n&&r.eras&&(a-=r.eras[t].offset),a},function(){var e,r,t,n,a,s,u;e=function(e,r){if(100>r){var t=new Date,n=z(t),a=F(t,e,n),s=e.twoDigitYearMax;s=\"string\"==typeof s?(new Date).getFullYear()%100+parseInt(s,10):s,r+=a-a%100,r>s&&(r-=100)}return r},r=function(e,r,t){var n,a=e.days,i=e._upperDays;return i||(e._upperDays=i=[u(a.names),u(a.namesAbbr),u(a.namesShort)]),r=s(r),t?(n=l(i[1],r),-1===n&&(n=l(i[2],r))):n=l(i[0],r),n},t=function(e,r,t){var n=e.months,a=e.monthsGenitive||e.months,i=e._upperMonths,c=e._upperMonthsGen;i||(e._upperMonths=i=[u(n.names),u(n.namesAbbr)],e._upperMonthsGen=c=[u(a.names),u(a.namesAbbr)]),r=s(r);var o=l(t?i[1]:i[0],r);return 0>o&&(o=l(t?c[1]:c[0],r)),o},n=function(e,r){var t=e._parseRegExp;if(t){var n=t[r];if(n)return n}else e._parseRegExp=t={};for(var a,s=y(e,r).replace(/([\\^\\$\\.\\*\\+\\?\\|\\[\\]\\(\\)\\{\\}])/g,\"\\\\\\\\$1\"),u=[\"^\"],l=[],i=0,c=0,o=k();null!==(a=o.exec(s));){var f=s.slice(i,a.index);if(i=o.lastIndex,c+=m(f,u),c%2)u.push(a[0]);else{var d,p=a[0],h=p.length;switch(p){case\"dddd\":case\"ddd\":case\"MMMM\":case\"MMM\":case\"gg\":case\"g\":d=\"(\\\\D+)\";break;case\"tt\":case\"t\":d=\"(\\\\D*)\";break;case\"yyyy\":case\"fff\":case\"ff\":case\"f\":d=\"(\\\\d{\"+h+\"})\";break;case\"dd\":case\"d\":case\"MM\":case\"M\":case\"yy\":case\"y\":case\"HH\":case\"H\":case\"hh\":case\"h\":case\"mm\":case\"m\":case\"ss\":case\"s\":d=\"(\\\\d\\\\d?)\";break;case\"zzz\":d=\"([+-]?\\\\d\\\\d?:\\\\d{2})\";break;case\"zz\":case\"z\":d=\"([+-]?\\\\d\\\\d?)\";break;case\"/\":d=\"(\\\\/)\";break;default:throw\"Invalid date format pattern '\"+p+\"'.\"}d&&u.push(d),l.push(a[0])}}m(s.slice(i),u),u.push(\"$\");var g=u.join(\"\").replace(/\\s+/g,\"\\\\s+\"),b={regExp:g,groups:l};return t[r]=b},a=function(e,r,t){return r>e||e>t},s=function(e){return e.split(\"\\u00a0\").join(\" \").toUpperCase()},u=function(e){for(var r=[],t=0,n=e.length;n>t;t++)r[t]=s(e[t]);return r},A=function(s,u,l){s=h(s);var i=l.calendar,c=n(i,u),o=RegExp(c.regExp).exec(s);if(null===o)return null;for(var f,d=c.groups,g=null,b=null,m=null,y=null,M=null,v=0,k=0,z=0,F=0,A=null,x=!1,I=0,S=d.length;S>I;I++){var w=o[I+1];if(w){var C=d[I],D=C.length,H=parseInt(w,10);switch(C){case\"dd\":case\"d\":if(y=H,a(y,1,31))return null;break;case\"MMM\":case\"MMMM\":if(m=t(i,w,3===D),a(m,0,11))return null;break;case\"M\":case\"MM\":if(m=H-1,a(m,0,11))return null;break;case\"y\":case\"yy\":case\"yyyy\":if(b=4>D?e(i,H):H,a(b,0,9999))return null;break;case\"h\":case\"hh\":if(v=H,12===v&&(v=0),a(v,0,11))return null;break;case\"H\":case\"HH\":if(v=H,a(v,0,23))return null;break;case\"m\":case\"mm\":if(k=H,a(k,0,59))return null;break;case\"s\":case\"ss\":if(z=H,a(z,0,59))return null;break;case\"tt\":case\"t\":if(x=i.PM&&(w===i.PM[0]||w===i.PM[1]||w===i.PM[2]),!x&&(!i.AM||w!==i.AM[0]&&w!==i.AM[1]&&w!==i.AM[2]))return null;break;case\"f\":case\"ff\":case\"fff\":if(F=H*Math.pow(10,3-D),a(F,0,999))return null;break;case\"ddd\":case\"dddd\":if(M=r(i,w,3===D),a(M,0,6))return null;break;case\"zzz\":var O=w.split(/:/);if(2!==O.length)return null;if(f=parseInt(O[0],10),a(f,-12,13))return null;var N=parseInt(O[1],10);if(a(N,0,59))return null;A=60*f+(p(w,\"-\")?-N:N);break;case\"z\":case\"zz\":if(f=H,a(f,-12,13))return null;A=60*f;break;case\"g\":case\"gg\":var T=w;if(!T||!i.eras)return null;T=h(T.toLowerCase());for(var j=0,$=i.eras.length;$>j;j++)if(T===i.eras[j].name.toLowerCase()){g=j;break}if(null===g)return null}}}var P,G=new Date,E=i.convert;if(P=E?E.fromGregorian(G)[0]:G.getFullYear(),null===b?b=P:i.eras&&(b+=i.eras[g||0].offset),null===m&&(m=0),null===y&&(y=1),E){if(G=E.toGregorian(b,m,y),null===G)return null}else{if(G.setFullYear(b,m,y),G.getDate()!==y)return null;if(null!==M&&G.getDay()!==M)return null}if(x&&12>v&&(v+=12),G.setHours(v,k,z,F),null!==A){var Y=G.getMinutes()-(A+G.getTimezoneOffset());G.setHours(G.getHours()+parseInt(Y/60,10),Y%60)}return G}}(),x=function(e,r,t){var n,a=r[\"-\"],s=r[\"+\"];switch(t){case\"n -\":a=\" \"+a,s=\" \"+s;case\"n-\":i(e,a)?n=[\"-\",e.substr(0,e.length-a.length)]:i(e,s)&&(n=[\"+\",e.substr(0,e.length-s.length)]);break;case\"- n\":a+=\" \",s+=\" \";case\"-n\":p(e,a)?n=[\"-\",e.substr(a.length)]:p(e,s)&&(n=[\"+\",e.substr(s.length)]);break;case\"(n)\":p(e,\"(\")&&i(e,\")\")&&(n=[\"-\",e.substr(1,e.length-2)])}return n||[\"\",e]},t.prototype.findClosestCulture=function(e){return t.findClosestCulture.call(this,e)},t.prototype.format=function(e,r,n){return t.format.call(this,e,r,n)},t.prototype.localize=function(e,r){return t.localize.call(this,e,r)},t.prototype.parseInt=function(e,r,n){return t.parseInt.call(this,e,r,n)},t.prototype.parseFloat=function(e,r,n){return t.parseFloat.call(this,e,r,n)},t.prototype.culture=function(e){return t.culture.call(this,e)},t.addCultureInfo=function(e,r,t){var n={},a=!1;\"string\"!=typeof e?(t=e,e=this.culture().name,n=this.cultures[e]):\"string\"!=typeof r?(t=r,a=null==this.cultures[e],n=this.cultures[e]||this.cultures[\"default\"]):(a=!0,n=this.cultures[r]),this.cultures[e]=c(!0,{},n,t),a&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},t.findClosestCulture=function(e){var r;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures[\"default\"];if(\"string\"==typeof e&&(e=e.split(\",\")),o(e)){var t,n,a=this.cultures,s=e,u=s.length,l=[];for(n=0;u>n;n++){e=h(s[n]);var i,c=e.split(\";\");t=h(c[0]),1===c.length?i=1:(e=h(c[1]),0===e.indexOf(\"q=\")?(e=e.substr(2),i=parseFloat(e),i=isNaN(i)?0:i):i=1),l.push({lang:t,pri:i})}for(l.sort(function(e,r){return e.pri<r.pri?1:e.pri>r.pri?-1:0}),n=0;u>n;n++)if(t=l[n].lang,r=a[t])return r;for(n=0;u>n;n++)for(t=l[n].lang;;){var f=t.lastIndexOf(\"-\");if(-1===f)break;if(t=t.substr(0,f),r=a[t])return r}for(n=0;u>n;n++){t=l[n].lang;for(var d in a){var p=a[d];if(p.language===t)return p}}}else if(\"object\"==typeof e)return e;return r||null},t.format=function(e,r,t){var n=this.findClosestCulture(t);return e instanceof Date?e=M(e,r,n):\"number\"==typeof e&&(e=v(e,r,n)),e},t.localize=function(e,r){return this.findClosestCulture(r).messages[e]||this.cultures[\"default\"].messages[e]},t.parseDate=function(e,r,t){t=this.findClosestCulture(t);var n,a,s;if(r){if(\"string\"==typeof r&&(r=[r]),r.length)for(var u=0,l=r.length;l>u;u++){var i=r[u];if(i&&(n=A(e,i,t)))break}}else{s=t.calendar.patterns;for(a in s)if(n=A(e,s[a],t))break}return n||null},t.parseInt=function(e,r,n){return g(t.parseFloat(e,r,n))},t.parseFloat=function(e,r,t){\"number\"!=typeof r&&(t=r,r=10);var u=this.findClosestCulture(t),l=0/0,i=u.numberFormat;if(e.indexOf(u.numberFormat.currency.symbol)>-1&&(e=e.replace(u.numberFormat.currency.symbol,\"\"),e=e.replace(u.numberFormat.currency[\".\"],u.numberFormat[\".\"])),e.indexOf(u.numberFormat.percent.symbol)>-1&&(e=e.replace(u.numberFormat.percent.symbol,\"\")),e=e.replace(/ /g,\"\"),a.test(e))l=parseFloat(e);else if(!r&&n.test(e))l=parseInt(e,16);else{var c=x(e,i,i.pattern[0]),o=c[0],f=c[1];\"\"===o&&\"(n)\"!==i.pattern[0]&&(c=x(e,i,\"(n)\"),o=c[0],f=c[1]),\"\"===o&&\"-n\"!==i.pattern[0]&&(c=x(e,i,\"-n\"),o=c[0],f=c[1]),o=o||\"+\";var d,p,h=f.indexOf(\"e\");0>h&&(h=f.indexOf(\"E\")),0>h?(p=f,d=null):(p=f.substr(0,h),d=f.substr(h+1));var g,b,m=i[\".\"],y=p.indexOf(m);0>y?(g=p,b=null):(g=p.substr(0,y),b=p.substr(y+m.length));var M=i[\",\"];g=g.split(M).join(\"\");var v=M.replace(/\\u00A0/g,\" \");M!==v&&(g=g.split(v).join(\"\"));var k=o+g;if(null!==b&&(k+=\".\"+b),null!==d){var z=x(d,i,\"-n\");k+=\"e\"+(z[0]||\"+\")+z[1]}s.test(k)&&(l=parseFloat(k))}return l},t.culture=function(e){return e!==r&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures[\"default\"]}; return Globalize;}(this));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/globalize.min.js\n ** module id = 4\n ** module chunks = 0 1\n **/","import {Promise} from 'es6-promise';\n\nexport function shim() {\n\n  Promise.prototype['finally'] = function finallyPolyfill(callback) {\n    let constructor = this.constructor;\n    return this.then(function (value) {\n      return constructor.resolve(callback()).then(function () {\n        return value;\n      });\n    }, function (reason) {\n      return constructor.resolve(callback()).then(function () {\n        throw reason;\n      });\n    });\n  };\n\n  let rethrowError = (self) => {\n    self.then(null, function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    });\n  };\n\n  if (typeof Promise.prototype['done'] !== 'function') {\n    Promise.prototype['done'] = function (onFulfilled, onRejected) {\n      let self = arguments.length ? this.then.apply(this, arguments) : this;\n      rethrowError(self);\n      return this;\n    };\n  }\n\n  if (typeof Promise.prototype['fail'] !== 'function') {\n    Promise.prototype['fail'] = function (onFulfilled, onRejected) {\n      let self = arguments.length ? this.catch.apply(this, arguments) : this;\n      rethrowError(self);\n      return this;\n    };\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/misc/PromisesShim.ts\n **/","null\n\n\n/** WEBPACK FOOTER **\n ** ./~/string-replace-loader?{\"search\":\"/# sourceMappingURL=es6-promise.map\",\"replace\":\"\"}!./~/es6-promise/dist/es6-promise.js\n **/","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/process/browser.js\n ** module id = 7\n ** module chunks = 0 1\n **/","\n// CustomEvent polyfill from MDN\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\nexport function customEventPolyfill() {\n  // window.CustomEvent is missing from the definitions\n  if (typeof (<any>window).CustomEvent === 'function') {\n    return;\n  }\n\n  let CustomEvent = (event, params) => {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    let customEvent = document.createEvent('CustomEvent');\n    customEvent.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return customEvent;\n  };\n\n  // window.Event is specific to IE\n  CustomEvent.prototype = (<any>window).Event.prototype;\n\n  (<any>window).CustomEvent = CustomEvent;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/misc/CustomEventPolyfill.ts\n **/","export var version = {\n  'lib': '1.1550.6',\n  'product': '1.1550.6',\n  'supportedApiVersion': 2\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/misc/Version.ts\n **/","import {ISearchEndpointOptions, ISearchEndpoint, IViewAsHtmlOptions} from './SearchEndpointInterface';\nimport {EndpointCaller, IEndpointCallParameters, ISuccessResponse, IErrorResponse, IRequestInfo} from '../rest/EndpointCaller';\nimport {IEndpointCallOptions} from '../rest/SearchEndpointInterface';\nimport {IStringMap} from './GenericParam';\nimport {Logger} from '../misc/Logger';\nimport {Assert} from '../misc/Assert';\nimport {IQuery} from '../rest/Query';\nimport {IQueryResults} from '../rest/QueryResults';\nimport {IQueryResult} from '../rest/QueryResult';\nimport {version} from '../misc/Version';\nimport {IListFieldValuesRequest} from '../rest/ListFieldValuesRequest';\nimport {IIndexFieldValue} from '../rest/FieldValue';\nimport {IFieldDescription} from '../rest/FieldDescription';\nimport {IListFieldsResult} from '../rest/ListFieldsResult';\nimport {IExtension} from '../rest/Extension';\nimport {IRatingRequest} from '../rest/RatingRequest';\nimport {ITaggingRequest} from '../rest/TaggingRequest';\nimport {IRevealQuerySuggestRequest, IRevealQuerySuggestResponse} from '../rest/RevealQuerySuggest';\nimport {ISentryLog} from './SentryLog';\nimport {ISubscriptionRequest, ISubscription} from '../rest/Subscription';\nimport {AjaxError} from '../rest/AjaxError';\nimport {MissingAuthenticationError} from '../rest/MissingAuthenticationError';\nimport {QueryUtils} from '../utils/QueryUtils';\nimport {QueryError} from '../rest/QueryError';\nimport {Utils} from '../utils/Utils';\nimport {Promise} from 'es6-promise';\n\nexport class DefaultSearchEndpointOptions implements ISearchEndpointOptions {\n  restUri: string;\n  version: string = 'v2';\n  queryStringArguments: IStringMap<string> = {};\n  anonymous: boolean = false;\n  accessToken: string;\n  renewAccessToken: () => Promise<string>;\n  username: string;\n  password: string;\n  searchAlertsUri: string;\n  isGuestUser: boolean = false;\n}\n\n/**\n * A search endpoint allows to execute letious actions against the Coveo Search API and index.<br/>\n * For example, you can search, list field values, get the quickview content for a document, etc.<br/>\n * Any actions that you execute using this class will not trigger a full query cycle for the Coveo components.<br/>\n * This is because this class will not trigger any query events directly.<br/>\n * If you wish to execute a query that all components will react to (and trigger the corresponding query events), use the {@link QueryController}\n */\nexport class SearchEndpoint implements ISearchEndpoint {\n\n  /**\n   * A map of all the initialized endpoint.<br/>\n   * eg : Coveo.SearchEndpoint.endpoints['default'] will return the default endpoint that was created at initialization\n   * @type {{}}\n   */\n  static endpoints: { [endpoint: string]: SearchEndpoint; } = {};\n\n  /**\n   * Configure an endpoint that will point to a Coveo Cloud index, which contains a set of public sources with no security on them.<br/>\n   * Used for demo purposes and ease of setup.\n   * @param otherOptions A set of additional options to use when configuring this endpoint\n   */\n  static configureSampleEndpoint(otherOptions?: ISearchEndpointOptions) {\n    if (SearchEndpoint.isUseLocalArgumentPresent()) {\n      // This is a handy flag to quickly test a local search API and alerts\n      SearchEndpoint.endpoints['default'] = new SearchEndpoint(_.extend({\n        restUri: 'http://localhost:8100/rest/search',\n        searchAlertsUri: 'http://localhost:8088/rest/search/alerts/'\n      }, otherOptions));\n    } else {\n      // This OAuth token points to the organization used for samples.\n      // It contains a set of harmless content sources.\n      SearchEndpoint.endpoints['default'] = new SearchEndpoint(_.extend({\n        restUri: 'https://cloudplatform.coveo.com/rest/search',\n        accessToken: '52d806a2-0f64-4390-a3f2-e0f41a4a73ec'\n      }, otherOptions));\n    }\n  }\n\n  /**\n   * Configure an endpoint that will point to a Coveo Cloud index V2, which contains a set of public sources with no security on them.<br/>\n   * Used for demo purposes and ease of setup.\n   * @param otherOptions A set of additional options to use when configuring this endpoint\n   */\n  static configureSampleEndpointV2(optionsOPtions?: ISearchEndpointOptions) {\n    SearchEndpoint.endpoints['default'] = new SearchEndpoint(_.extend({\n      restUri: 'https://platform.cloud.coveo.com/rest/search',\n      accessToken: 'xx564559b1-0045-48e1-953c-3addd1ee4457',\n      queryStringArguments: {\n        organizationID: 'searchuisamples'\n      }\n    }));\n  }\n\n  /**\n   * Configure an endpoint to a Coveo Cloud index.\n   * @param organization The organization id of your Coveo cloud index\n   * @param token The token to use to execute query. If null, you will most probably need to login when querying.\n   * @param uri The uri of your cloud Search API. By default, will point to the production environment\n   * @param otherOptions A set of additional options to use when configuring this endpoint\n   */\n  static configureCloudEndpoint(organization?: string, token?: string, uri: string = 'https://cloudplatform.coveo.com/rest/search', otherOptions?: ISearchEndpointOptions) {\n    let options: ISearchEndpointOptions = {\n      restUri: uri,\n      accessToken: token,\n      queryStringArguments: { organizationId: organization }\n    };\n\n    let merged = SearchEndpoint.mergeConfigOptions(options, otherOptions);\n\n    SearchEndpoint.endpoints['default'] = new SearchEndpoint(SearchEndpoint.removeUndefinedConfigOption(merged));\n  }\n\n  static configureCloudV2Endpoint(organization?: string, token?: string, uri: string = 'https://platform.cloud.coveo.com/rest/search', otherOptions?: ISearchEndpointOptions) {\n    return SearchEndpoint.configureCloudEndpoint(organization, token, uri, otherOptions);\n  }\n\n  /**\n   * Configure an endpoint to a Coveo on premise index.\n   * @param uri The uri of your Coveo Search API endpoint. eg : http://myserver:8080/rest/search\n   * @param token The token to use to execute query. If null, you will most probably need to login when querying (unless the search api is configured using advanced auth options, like windows auth or claims)\n   * @param otherOptions A set of additional options to use when configuring this endpoint\n   */\n  static configureOnPremiseEndpoint(uri: string, token?: string, otherOptions?: ISearchEndpointOptions) {\n    let merged = SearchEndpoint.mergeConfigOptions({\n      restUri: uri,\n      accessToken: token\n    }, otherOptions);\n\n    SearchEndpoint.endpoints['default'] = new SearchEndpoint(SearchEndpoint.removeUndefinedConfigOption(merged));\n  }\n\n  static removeUndefinedConfigOption(config: ISearchEndpointOptions) {\n    _.each(_.keys(config), (key) => {\n      if (config[key] == undefined) {\n        delete config[key];\n      }\n    });\n    return config;\n  }\n\n  static mergeConfigOptions(first: ISearchEndpointOptions, second: ISearchEndpointOptions): ISearchEndpointOptions {\n    first = SearchEndpoint.removeUndefinedConfigOption(first);\n    second = SearchEndpoint.removeUndefinedConfigOption(second);\n    return _.extend({}, first, second);\n  }\n\n  public logger: Logger;\n  public isRedirecting: boolean;\n  protected caller: EndpointCaller;\n  private onUnload: (...args: any[]) => void;\n\n  /**\n   * Create a new SearchEndpoint.<br/>\n   * Will use a set of sane default options, and merge them with the options parameter.<br/>\n   * Will create an {@link EndpointCaller} and use it to communicate with the endpoint internally\n   * @param options\n   */\n  constructor(public options?: ISearchEndpointOptions) {\n    Assert.exists(options);\n    Assert.exists(options.restUri);\n\n    // For backward compatibility, we set anonymous to true when an access token\n    // is specified on a page loaded through the filesystem. This causes withCredentials\n    // to NOT be set, allowing those pages to work with non Windows/Basic/Cookie\n    // authentication. If anonymous is explicitly set to false, we'll use withCredentials.\n    let defaultOptions = new DefaultSearchEndpointOptions();\n    defaultOptions.anonymous = window.location.href.indexOf('file://') == 0 && Utils.isNonEmptyString(options.accessToken);\n    this.options = <ISearchEndpointOptions>_.extend({}, defaultOptions, options);\n\n    // Forward any debug=1 query argument to the REST API to ease debugging\n    if (SearchEndpoint.isDebugArgumentPresent()) {\n      this.options.queryStringArguments['debug'] = 1;\n    }\n    this.onUnload = () => {\n      this.handleUnload();\n    };\n    window.addEventListener('beforeunload', this.onUnload);\n    this.logger = new Logger(this);\n    this.createEndpointCaller();\n  }\n\n  public reset() {\n    this.createEndpointCaller();\n  }\n\n  /**\n   * Set a function which will allow external code to modify all endpoint call parameters before they are sent by the browser.\n   *\n   * Used in very specific scenario where the network infrastructure require special request headers to be added or removed, for example.\n   * @param requestModifier\n   */\n  public setRequestModifier(requestModifier: (params: IRequestInfo<any>) => IRequestInfo<any>) {\n    this.caller.options.requestModifier = requestModifier;\n  }\n\n  /**\n   * Return the base uri of the endpoint to perform search\n   * @returns {string}\n   */\n  public getBaseUri(): string {\n    return this.buildBaseUri('');\n  }\n\n  /**\n   * Return the base uri of the endpoint for search alert\n   * @returns {string}\n   */\n  public getBaseAlertsUri(): string {\n    return this.buildSearchAlertsUri('');\n  }\n\n  /**\n   * Get the uri that can be used to authenticate against the given provider\n   * @param provider The provider name\n   * @param returnUri The uri at which to return after the authentication is completed\n   * @param message The message for authentication\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {string}\n   */\n  @path('/login/')\n  @accessTokenInUrl()\n  public getAuthenticationProviderUri(provider: string, returnUri?: string, message?: string, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): string {\n    let queryString = this.buildBaseQueryString(callOptions);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n    callParams.url += provider + '?';\n\n    if (Utils.isNonEmptyString(returnUri)) {\n      callParams.url += 'redirectUri=' + encodeURIComponent(returnUri) + '&';\n    } else if (Utils.isNonEmptyString(message)) {\n      callParams.url += 'message=' + encodeURIComponent(message) + '&';\n    }\n    callParams.url += callParams.queryString.join('&');\n    return callParams.url;\n  }\n\n  /**\n   * is the search endpoint using jsonp internally to communicate with Search API\n   * @returns {boolean}\n   */\n  public isJsonp(): boolean {\n    return this.caller.useJsonp;\n  }\n\n  /**\n   * Perform a search on the index and returns a Promise of {@link IQueryResults}.<br/>\n   * Will modify the query results slightly, by adding additional information on each results (an id, the state object, etc.)\n   * @param query The query to execute. Typically, the query object is built using a {@link QueryBuilder}\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<IQueryResults>}\n   */\n  @path('/')\n  @method('POST')\n  @responseType('text')\n  public search(query: IQuery, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<IQueryResults> {\n    Assert.exists(query);\n\n    callParams.requestData = query;\n\n    this.logger.info('Performing REST query', query);\n\n    return this.performOneCall(callParams, callOptions).then((results?: IQueryResults) => {\n      this.logger.info('REST query successful', results, query);\n\n      // Version check\n      // If the SearchAPI doesn't give us any apiVersion info, we assume version 1 (before apiVersion was implemented)\n      if (results.apiVersion == null) {\n        results.apiVersion = 1;\n      }\n      if (results.apiVersion < version.supportedApiVersion) {\n        this.logger.error('Please update your REST Search API');\n      }\n\n      // If the server specified no search ID generated one using the client-side\n      // GUID generator. We prefer server generated guids to allow tracking a query\n      // all the way from the analytics to the logs.\n      if (Utils.isNullOrEmptyString(results.searchUid)) {\n        results.searchUid = QueryUtils.createGuid();\n      }\n      QueryUtils.setIndexAndUidOnQueryResults(query, results, results.searchUid, results.pipeline, results.splitTestRun);\n      QueryUtils.setTermsToHighlightOnQueryResults(query, results);\n      return results;\n    });\n  }\n  /**\n   * Get a link/uri to download a set of results, for a given query, to an xlsx format.<br/>\n   * Note : This does not download automatically the documents, merely provide an url at which to download them.\n   * @param query The query for which to get the xlsx documents\n   * @param numberOfResults The number of results that should be downloaded\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {string}\n   */\n  @path('/')\n  @accessTokenInUrl()\n  public getExportToExcelLink(query: IQuery, numberOfResults: number, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): string {\n    let queryString = this.buildBaseQueryString(callOptions);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n    queryString = this.buildCompleteQueryString(null, query);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n    if (numberOfResults != null) {\n      callParams.queryString.push('numberOfResults=' + numberOfResults);\n    }\n\n    callParams.queryString.push('format=xlsx');\n\n    return callParams.url + '?' + callParams.queryString.join('&');\n  }\n\n  /**\n   * Get the raw datastream for a given document. This is typically used to get a thumbnail for a document.<br/>\n   * Return an array buffer : <br/>\n   * eg : let rawBinary = String.fromCharCode.apply(null, new Uint8Array(response));<br/>\n   * img.setAttribute('src', 'data:image/png;base64,' + btoa(rawBinary));\n   * @param documentUniqueId Typically the {@link IQueryResult.uniqueId} on each result\n   * @param dataStreamType Normally : '$Thumbnail'\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<TResult>|Promise<U>}\n   */\n  @path('/datastream')\n  @accessTokenInUrl()\n  @method('GET')\n  @responseType('arraybuffer')\n  public getRawDataStream(documentUniqueId: string, dataStreamType: string, callOptions?: IViewAsHtmlOptions, callParams?: IEndpointCallParameters): Promise<ArrayBuffer> {\n    Assert.exists(documentUniqueId);\n\n    let queryString = this.buildViewAsHtmlQueryString(documentUniqueId, callOptions);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n    this.logger.info('Performing REST query for datastream ' + dataStreamType + ' on document uniqueID' + documentUniqueId);\n\n    callParams.queryString.push('dataStream=' + dataStreamType);\n    return this.performOneCall(callParams).then((results) => {\n      this.logger.info('REST query successful', results, documentUniqueId);\n      return results;\n    });\n  }\n\n  /**\n   * Return an url that will allow to see the datastream for a given document. This is typically used to get a thumbnail for a document.<br/>\n   * @param documentUniqueID Typically the {@link IQueryResult.uniqueId} on each result\n   * @param dataStreamType Normally : '$Thumbnail'\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {string}\n   */\n  @path('/datastream')\n  @accessTokenInUrl()\n  public getViewAsDatastreamUri(documentUniqueID: string, dataStreamType: string, callOptions?: IViewAsHtmlOptions, callParams?: IEndpointCallParameters): string {\n    callOptions = _.extend({}, callOptions);\n\n    let queryString = this.buildBaseQueryString(callOptions);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n    queryString = this.buildViewAsHtmlQueryString(documentUniqueID, callOptions);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n    queryString = this.buildCompleteQueryString(callOptions.query, callOptions.queryObject);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n\n    return callParams.url + '?' + callParams.queryString.join('&') + '&dataStream=' + encodeURIComponent(dataStreamType);\n  }\n\n  /**\n   * Return a single document, using it's uniqueId\n   * @param documentUniqueID Typically the {@link IQueryResult.uniqueId} on each result\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<IQueryResult>}\n   */\n  @path('/document')\n  @method('GET')\n  @responseType('text')\n  public getDocument(documentUniqueID: string, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<IQueryResult> {\n    let queryString = this.buildViewAsHtmlQueryString(documentUniqueID, callOptions);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n    return this.performOneCall<IQueryResult>(callParams);\n  }\n\n  /**\n   * Return the content for a single document, as text.<br/>\n   * Think : quickview\n   * @param documentUniqueID Typically the {@link IQueryResult.uniqueId} on each result\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<string>}\n   */\n  @path('/text')\n  @method('GET')\n  @responseType('text')\n  public getDocumentText(documentUniqueID: string, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<string> {\n    let queryString = this.buildViewAsHtmlQueryString(documentUniqueID, callOptions);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n    return this.performOneCall<{ content: string, duration: number }>(callParams)\n      .then((data) => {\n        return data.content;\n      });\n  }\n\n  /**\n   * Return the content for a single document, as an HTMLDocument.<br/>\n   * Think : quickview\n   * @param documentUniqueID Typically the {@link IQueryResult.uniqueId} on each result\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<HTMLDocument>}\n   */\n  @path('/html')\n  @method('POST')\n  @responseType('document')\n  public getDocumentHtml(documentUniqueID: string, callOptions?: IViewAsHtmlOptions, callParams?: IEndpointCallParameters): Promise<HTMLDocument> {\n    callOptions = _.extend({}, callOptions);\n\n    let queryString = this.buildViewAsHtmlQueryString(documentUniqueID, callOptions);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n    callParams.requestData = callOptions.queryObject || { q: callOptions.query };\n\n    return this.performOneCall<HTMLDocument>(callParams);\n  }\n\n  /**\n   * Return an url that will allow to see a single document content, as HTML.<br/>\n   * Think : quickview\n   * @param documentUniqueID Typically the {@link IQueryResult.uniqueId} on each result\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {string}\n   */\n  @path('/html')\n  @accessTokenInUrl()\n  public getViewAsHtmlUri(documentUniqueID: string, callOptions?: IViewAsHtmlOptions, callParams?: IEndpointCallParameters): string {\n    let queryString = this.buildBaseQueryString(callOptions);\n    callParams.queryString = callParams.queryString.concat(queryString);\n\n    queryString = this.buildViewAsHtmlQueryString(documentUniqueID, callOptions);\n    callParams.queryString = callParams.queryString.concat(queryString);\n    callParams.queryString = _.uniq(callParams.queryString);\n    return callParams.url + '?' + callParams.queryString.join('&');\n  }\n\n  @path('/values')\n  @method('POST')\n  @responseType('text')\n  public batchFieldValues(request: IListFieldValuesRequest, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<IIndexFieldValue[]> {\n    Assert.exists(request);\n\n    return this.performOneCall<any>(callParams)\n      .then((data) => {\n        this.logger.info('REST list field values successful', data.values, request);\n        return data.values;\n      });\n  }\n\n  /**\n   * List the possible values for a given request\n   * @param request The request for which to list the possible field values\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<TResult>|Promise<U>}\n   */\n  @path('/values')\n  @method('POST')\n  @responseType('text')\n  public listFieldValues(request: IListFieldValuesRequest, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<IIndexFieldValue[]> {\n    Assert.exists(request);\n\n    callParams.requestData = request;\n\n    this.logger.info('Listing field values', request);\n\n    return this.performOneCall<any>(callParams)\n      .then((data) => {\n        this.logger.info('REST list field values successful', data.values, request);\n        return data.values;\n      });\n  }\n\n  /**\n   * List all fields for the index, and return an array of their description\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<TResult>|Promise<U>}\n   */\n  @path('/fields')\n  @method('GET')\n  @responseType('text')\n  public listFields(callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<IFieldDescription[]> {\n    this.logger.info('Listing fields');\n\n    return this.performOneCall<IListFieldsResult>(callParams).then((data) => {\n      return data.fields;\n    });\n  }\n\n  /**\n   * List all available query extensions for the search endpoint\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<IExtension[]>}\n   */\n  @path('/extensions')\n  @method('GET')\n  @responseType('text')\n  public extensions(callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<IExtension[]> {\n    this.logger.info('Listing extensions');\n\n    return this.performOneCall<IExtension[]>(callParams);\n  }\n\n  /**\n   * Allow to rate a single document in the index (granted that collaborative rating is enabled on your index)\n   * @param ratingRequest Document id and rating\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<boolean>|Promise<T>}\n   */\n  @path('/rating')\n  @method('POST')\n  @responseType('text')\n  public rateDocument(ratingRequest: IRatingRequest, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<boolean> {\n    this.logger.info('Rating a document', ratingRequest);\n\n    callParams.requestData = ratingRequest;\n\n    return this.performOneCall<any>(callParams).then(() => {\n      return true;\n    });\n  }\n\n  /**\n   * Allow to tag a single document\n   * @param taggingRequest Document id and tag action to perform\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<boolean>|Promise<T>}\n   */\n  @path('/tag')\n  @method('POST')\n  @responseType('text')\n  public tagDocument(taggingRequest: ITaggingRequest, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<boolean> {\n    this.logger.info('Tagging a document', taggingRequest);\n\n    callParams.requestData = taggingRequest;\n\n    return this.performOneCall<any>(callParams).then(() => {\n      return true;\n    });\n  }\n\n  /**\n   * Return a list of reveal query suggestions, based on the given request\n   * @param request query and number of suggestions to return\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<IRevealQuerySuggestResponse>}\n   */\n  @path('/querySuggest')\n  @method('GET')\n  @responseType('text')\n  public getRevealQuerySuggest(request: IRevealQuerySuggestRequest, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<IRevealQuerySuggestResponse> {\n    this.logger.info('Get Reveal Query Suggest', request);\n\n    callParams.requestData = request;\n\n    return this.performOneCall<IRevealQuerySuggestResponse>(callParams);\n  }\n\n  /**\n   * Allow to follow a document or a query on the search alerts service\n   * @param request\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<ISubscription>}\n   */\n  @alertsPath('/subscriptions')\n  @accessTokenInUrl('accessToken')\n  @method('POST')\n  @requestDataType('application/json')\n  @responseType('text')\n  public follow(request: ISubscriptionRequest, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<ISubscription> {\n    callParams.requestData = request;\n\n    this.logger.info('Following a document or a query', request);\n\n    return this.performOneCall<ISubscription>(callParams);\n  }\n\n  private currentListSubscriptions: Promise<ISubscription[]>;\n\n  /**\n   * Return a Promise of array of current subscriptions\n   * @param page The page of the subsctiptions\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {any}\n   */\n  @alertsPath('/subscriptions')\n  @accessTokenInUrl('accessToken')\n  @method('GET')\n  @requestDataType('application/json')\n  @responseType('text')\n  public listSubscriptions(page: number, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters) {\n    if (this.options.isGuestUser) {\n      return new Promise((resolve, reject) => {\n        reject();\n      });\n    }\n    if (this.currentListSubscriptions == null) {\n      callParams.queryString.push('page=' + (page || 0));\n\n      this.currentListSubscriptions = this.performOneCall<ISubscription[]>(callParams);\n      this.currentListSubscriptions.then((data: any) => {\n        this.currentListSubscriptions = null;\n        return data;\n      }).catch((e: AjaxError) => {\n        // Trap 503 error, as the listSubscription call is called on every page initialization\n        // to check for current subscriptions. By default, the search alert service is not enabled for most organization\n        // Don't want to pollute the console with un-needed noise and confusion\n        if (e.status != 503) {\n          throw e;\n        }\n      });\n    }\n    return this.currentListSubscriptions;\n  }\n\n  /**\n   * Update a subscription with new parameters\n   * @param subscription The subscription to update with new parameters\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<ISubscription>}\n   */\n  @alertsPath('/subscriptions/')\n  @accessTokenInUrl('accessToken')\n  @method('PUT')\n  @requestDataType('application/json')\n  @responseType('text')\n  public updateSubscription(subscription: ISubscription, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<ISubscription> {\n    callParams.requestData = subscription;\n\n    this.logger.info('Updating a subscription', subscription);\n\n    callParams.url += subscription.id;\n\n    return this.performOneCall<ISubscription>(callParams);\n  }\n\n  /**\n   * Delete a subscription\n   * @param subscription The subscription to delete\n   * @param callOptions Additional set of options to use for this call.\n   * @param callParams Options injected by the applied decorators.\n   * @returns {Promise<ISubscription>}\n   */\n  @alertsPath('/subscriptions/')\n  @accessTokenInUrl('accessToken')\n  @method('DELETE')\n  @requestDataType('application/json')\n  @responseType('text')\n  public deleteSubscription(subscription: ISubscription, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters): Promise<ISubscription> {\n    callParams.url += subscription.id;\n\n    return this.performOneCall<ISubscription>(callParams);\n  }\n\n  @path('/log')\n  @method('POST')\n  public logError(sentryLog: ISentryLog, callOptions?: IEndpointCallOptions, callParams?: IEndpointCallParameters) {\n    callParams.requestData = sentryLog;\n    return this.performOneCall(callParams, callOptions)\n      .then(() => {\n        return true;\n      })\n      .catch(() => {\n        return false;\n      });\n  }\n\n  public nuke() {\n    window.removeEventListener('beforeunload', this.onUnload);\n  }\n\n  protected createEndpointCaller() {\n    this.caller = new EndpointCaller(this.options);\n  }\n\n  private static isDebugArgumentPresent(): boolean {\n    return /[?&]debug=1([&]|$)/.test(window.location.search);\n  }\n\n  private static isUseLocalArgumentPresent(): boolean {\n    return /[?&]useLocal=1([&]|$)/.test(window.location.search);\n  }\n\n  private handleUnload() {\n    this.isRedirecting = true;\n  }\n\n  private buildBaseUri(path: string): string {\n    Assert.isString(path);\n    let uri = this.options.restUri;\n    uri = this.removeTrailingSlash(uri);\n\n    if (Utils.isNonEmptyString(this.options.version)) {\n      uri += '/' + this.options.version;\n    }\n    uri += path;\n    return uri;\n  }\n\n  public buildSearchAlertsUri(path: string): string {\n    Assert.isString(path);\n    let uri = this.options.searchAlertsUri || this.options.restUri + '/alerts';\n    if (uri == null) {\n      return null;\n    }\n    uri = this.removeTrailingSlash(uri);\n    uri += path;\n    return uri;\n  }\n\n  // see https://github.com/palantir/tslint/issues/1421\n  // tslint:disable-next-line:no-unused-variable\n  private buildAccessToken(tokenKey: string): string[] {\n    let queryString: string[] = [];\n\n    if (Utils.isNonEmptyString(this.options.accessToken)) {\n      queryString.push(tokenKey + '=' + encodeURIComponent(this.options.accessToken));\n    }\n\n    return queryString;\n  }\n\n  private buildBaseQueryString(callOptions?: IEndpointCallOptions): string[] {\n    callOptions = _.extend({}, callOptions);\n    let queryString: string[] = [];\n\n    for (let name in this.options.queryStringArguments) {\n      queryString.push(name + '=' + encodeURIComponent(this.options.queryStringArguments[name]));\n    }\n\n    if (callOptions && _.isArray(callOptions.authentication) && callOptions.authentication.length != 0) {\n      queryString.push('authentication=' + callOptions.authentication.join(','));\n    }\n\n    return queryString;\n  }\n\n  private buildCompleteQueryString(query?: string, queryObject?: IQuery): string[] {\n    // In an ideal parallel reality, the entire query used in the 'search' call is used here.\n    // In this reality however, we must support GET calls (ex: GET /html) for CORS/JSONP/IE reasons.\n    // Therefore, we cherry-pick parts of the query to include in a 'query string' instead of a body payload.\n    let queryString: string[] = [];\n    if (queryObject) {\n      _.each(['q', 'aq', 'cq', 'dq', 'searchHub', 'tab', 'language', 'pipeline', 'lowercaseOperators'], (key) => {\n        if (queryObject[key]) {\n          queryString.push(key + '=' + encodeURIComponent(queryObject[key]));\n        }\n      });\n\n      _.each(queryObject.context, (value, key) => {\n        queryString.push('context[' + key + ']=' + encodeURIComponent(value));\n      });\n    } else if (query) {\n      queryString.push('q=' + encodeURIComponent(query));\n    }\n\n    return queryString;\n  }\n\n  private buildViewAsHtmlQueryString(uniqueId: string, callOptions?: IViewAsHtmlOptions): string[] {\n    callOptions = _.extend({}, callOptions);\n    let queryString: string[] = this.buildBaseQueryString(callOptions);\n    queryString.push('uniqueId=' + encodeURIComponent(uniqueId));\n\n    if (callOptions.query || callOptions.queryObject) {\n      queryString.push('enableNavigation=true');\n    }\n\n    if (callOptions.requestedOutputSize) {\n      queryString.push('requestedOutputSize=' + encodeURIComponent(callOptions.requestedOutputSize.toString()));\n    }\n\n    if (callOptions.contentType) {\n      queryString.push('contentType=' + encodeURIComponent(callOptions.contentType));\n    }\n    return queryString;\n  }\n\n  private performOneCall<T>(params: IEndpointCallParameters, callOptions?: IEndpointCallOptions, autoRenewToken = true): Promise<T> {\n    let queryString = this.buildBaseQueryString(callOptions);\n    params.queryString = params.queryString.concat(queryString);\n    params.queryString = _.uniq(params.queryString);\n\n    return this.caller.call(params)\n      .then((response?: ISuccessResponse<T>) => {\n        if (response.data && (<any>response.data).clientDuration) {\n          (<any>response.data).clientDuration = response.duration;\n        }\n        return response.data;\n      }).catch((error?: IErrorResponse) => {\n        if (autoRenewToken && this.canRenewAccessToken() && this.isAccessTokenExpiredStatus(error.statusCode)) {\n          this.renewAccessToken()\n            .then(() => {\n              return this.performOneCall(params, callOptions, autoRenewToken);\n            })\n            .catch(() => {\n              return Promise.reject(this.handleErrorResponse(error));\n            });\n        } else if (error.statusCode == 0 && this.isRedirecting) {\n          // The page is getting redirected\n          // Set timeout on return with empty string, since it does not really matter\n          _.defer(function () {\n            return '';\n          });\n        } else {\n          return Promise.reject(this.handleErrorResponse(error));\n        }\n      });\n  }\n\n  private handleErrorResponse(errorResponse: IErrorResponse): Error {\n    if (this.isMissingAuthenticationProviderStatus(errorResponse.statusCode)) {\n      return new MissingAuthenticationError(errorResponse.data['provider']);\n    } else if (errorResponse.data && errorResponse.data.message && errorResponse.data.type) {\n      return new QueryError(errorResponse);\n    } else if (errorResponse.data && errorResponse.data.message) {\n      return new AjaxError(`Request Error : ${errorResponse.data.message}`, errorResponse.statusCode);\n    } else {\n      return new AjaxError('Request Error', errorResponse.statusCode);\n    }\n  }\n\n  private canRenewAccessToken(): boolean {\n    return Utils.isNonEmptyString(this.options.accessToken) && _.isFunction(this.options.renewAccessToken);\n  }\n\n  private renewAccessToken(): Promise<string> | Promise<any> {\n    this.logger.info('Renewing expired access token');\n    return this.options.renewAccessToken().then((token: string) => {\n      Assert.isNonEmptyString(token);\n      this.options.accessToken = token;\n      this.createEndpointCaller();\n      return token;\n    })\n      .catch((e: any) => {\n        this.logger.error('Failed to renew access token', e);\n        return e;\n      });\n  }\n\n  private removeTrailingSlash(uri: string) {\n    if (this.hasTrailingSlash(uri)) {\n      uri = uri.substr(0, uri.length - 1);\n    }\n    return uri;\n  }\n\n  private hasTrailingSlash(uri: string) {\n    return uri.charAt(uri.length - 1) == '/';\n  }\n\n  private isMissingAuthenticationProviderStatus(status: number): boolean {\n    return status == 402;\n  }\n\n  private isAccessTokenExpiredStatus(status: number): boolean {\n    return status == 419;\n  }\n}\n\n\n/**\n * It's taken for granted that methods using decorators have :\n * {@link IEndpointCallOptions} as their second to last parameter\n * {@link IEndpointCallParameters} as their last parameter\n * The default parameters for each member of the injected {@link IEndpointCallParameters} are the following:\n * url: '',\n * queryString: [],\n * requestData: {},\n * requestDataType: undefined,\n * method: '',\n * responseType: '',\n * errorsAsSuccess: false\n */\n\n/**\n * Add the base url\n * @param path The path to append to the url\n */\nfunction path(path: string) {\n  return function (target: Object, key: string, descriptor: TypedPropertyDescriptor<any>) {\n    let originalMethod = descriptor.value;\n    let nbParams = target[key].prototype.constructor.length;\n\n    descriptor.value = function (...args: any[]) {\n      let uri = this.buildBaseUri(path);\n      if (args[nbParams - 1]) {\n        args[nbParams - 1].url = uri;\n      } else {\n        let params: IEndpointCallParameters = {\n          url: uri,\n          queryString: [],\n          requestData: {},\n          method: '',\n          responseType: '',\n          errorsAsSuccess: false\n        };\n        args[nbParams - 1] = params;\n      }\n      let result = originalMethod.apply(this, args);\n      return result;\n    };\n\n    return descriptor;\n  };\n}\n\n/**\n * Add the alert url\n * @param path The path to append to the url\n */\nfunction alertsPath(path: string) {\n  return function (target: Object, key: string, descriptor: TypedPropertyDescriptor<any>) {\n    let originalMethod = descriptor.value;\n    let nbParams = target[key].prototype.constructor.length;\n\n    descriptor.value = function (...args: any[]) {\n      let uri = this.buildSearchAlertsUri(path);\n      if (args[nbParams - 1]) {\n        args[nbParams - 1].url = uri;\n      } else {\n        let params: IEndpointCallParameters = {\n          url: uri,\n          queryString: [],\n          requestData: {},\n          method: '',\n          responseType: '',\n          errorsAsSuccess: false\n        };\n        args[nbParams - 1] = params;\n      }\n      let result = originalMethod.apply(this, args);\n      return result;\n    };\n\n    return descriptor;\n  };\n}\n\n/**\n * Set the request data type\n * @param type The type to set\n */\nfunction requestDataType(type: string) {\n  return function (target: Object, key: string, descriptor: TypedPropertyDescriptor<any>) {\n    let originalMethod = descriptor.value;\n    let nbParams = target[key].prototype.constructor.length;\n\n    descriptor.value = function (...args: any[]) {\n      if (args[nbParams - 1]) {\n        args[nbParams - 1].requestDataType = type;\n      } else {\n        let params: IEndpointCallParameters = {\n          url: '',\n          queryString: [],\n          requestData: {},\n          requestDataType: type,\n          method: '',\n          responseType: '',\n          errorsAsSuccess: false\n        };\n        args[nbParams - 1] = params;\n      }\n      let result = originalMethod.apply(this, args);\n      return result;\n    };\n\n    return descriptor;\n  };\n}\n\n/**\n * Set the request data type\n * @param met The type to set\n */\nfunction method(met: string) {\n  return function (target: Object, key: string, descriptor: TypedPropertyDescriptor<any>) {\n    let originalMethod = descriptor.value;\n    let nbParams = target[key].prototype.constructor.length;\n\n    descriptor.value = function (...args: any[]) {\n      if (args[nbParams - 1]) {\n        args[nbParams - 1].method = met;\n      } else {\n        let params: IEndpointCallParameters = {\n          url: '',\n          queryString: [],\n          requestData: {},\n          method: met,\n          responseType: '',\n          errorsAsSuccess: false\n        };\n        args[nbParams - 1] = params;\n      }\n      let result = originalMethod.apply(this, args);\n      return result;\n    };\n\n    return descriptor;\n  };\n}\n\n/**\n * Set the response type\n * @param resp The response type to set\n */\nfunction responseType(resp: string) {\n  return function (target: Object, key: string, descriptor: TypedPropertyDescriptor<any>) {\n    let originalMethod = descriptor.value;\n    let nbParams = target[key].prototype.constructor.length;\n\n    descriptor.value = function (...args: any[]) {\n      if (args[nbParams - 1]) {\n        args[nbParams - 1].responseType = resp;\n      } else {\n        let params: IEndpointCallParameters = {\n          url: '',\n          queryString: [],\n          requestData: {},\n          method: '',\n          responseType: resp,\n          errorsAsSuccess: false\n        };\n        args[nbParams - 1] = params;\n      }\n      let result = originalMethod.apply(this, args);\n      return result;\n    };\n\n    return descriptor;\n  };\n}\n\n/**\n * Add the accessToken to the query string arguments\n */\nfunction accessTokenInUrl(tokenKey: string = 'access_token') {\n  return function (target: Object, key: string, descriptor: TypedPropertyDescriptor<any>) {\n    let originalMethod = descriptor.value;\n    let nbParams = target[key].prototype.constructor.length;\n\n    descriptor.value = function (...args: any[]) {\n      let queryString = this.buildAccessToken(tokenKey);\n      if (args[nbParams - 1]) {\n        args[nbParams - 1].queryString = args[nbParams - 1].queryString.concat(queryString);\n      } else {\n        let params: IEndpointCallParameters = {\n          url: '',\n          queryString: queryString,\n          requestData: {},\n          method: '',\n          responseType: '',\n          errorsAsSuccess: false\n        };\n        args[nbParams - 1] = params;\n      }\n      let result = originalMethod.apply(this, args);\n      return result;\n    };\n\n    return descriptor;\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rest/SearchEndpoint.ts\n **/","null\n\n\n/** WEBPACK FOOTER **\n ** ./~/string-replace-loader?{\"search\":\"/# sourceMappingURL=underscore-min.map\",\"replace\":\"\"}!./~/underscore/underscore-min.js\n **/","module.exports = __webpack_amd_options__;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-options.js\n ** module id = 13\n ** module chunks = 0 1\n **/","import {IStringMap} from '../rest/GenericParam';\nimport {Logger} from '../misc/Logger';\nimport {Assert} from '../misc/Assert';\nimport {TimeSpan} from '../utils/TimeSpanUtils';\nimport {DeviceUtils} from '../utils/DeviceUtils';\nimport {Utils} from '../utils/Utils';\nimport {Promise} from 'es6-promise';\n\ndeclare var XDomainRequest;\n\n/**\n * Parameters that can be used when calling an {@link EndpointCaller}\n */\nexport interface IEndpointCallParameters {\n  /**\n   * Url to target\n   */\n  url: string;\n  /**\n   * Array of query string params.<br/>\n   * eg: ['foo=1','bar=2']\n   */\n  queryString: string[];\n  /**\n   * Body of the request.<br/>\n   * key -> value map (JSON)\n   */\n  requestData: IStringMap<any>;\n  /**\n   * Request data type.<br/>\n   * eg: \"application/json\", \"application/x-www-form-urlencoded; charset=\\\"UTF-8\\\"\"\n   */\n  requestDataType?: string;\n  /**\n   * Or HTTP verb : GET, POST, PUT, etc.\n   */\n  method: string;\n  /**\n   * responseType of the request.</br>\n   * eg: \"text\", \"arraybuffer\" etc.\n   */\n  responseType: string;\n  /**\n   * Flag to specify if the endpoint should return different type of error as actual 200 success for the browser, but with the error code/message contained in the response.\n   */\n  errorsAsSuccess: boolean;\n}\n\n/**\n * Information about a request\n */\nexport interface IRequestInfo<T> {\n  /**\n   * Url that was requested\n   */\n  url: string;\n  /**\n   * The query string parameters that were used for this request\n   */\n  queryString: string[];\n  /**\n   * The data that was sent for this request\n   */\n  requestData: IStringMap<any>;\n  /**\n   * The requestDataType that was used for this request\n   */\n  requestDataType: string;\n  /**\n   * The timestamp at which the request started\n   */\n  begun: Date;\n  /**\n   * The method that was used for this request\n   */\n  method: string;\n  /**\n   * The headers for the request.\n   */\n  headers?: IStringMap<string>;\n}\n\n/**\n * A generic response\n */\nexport interface IResponse<T> {\n  /**\n   * Data of the response\n   */\n  data?: T;\n}\n\n/**\n * A generic success response\n */\nexport interface ISuccessResponse<T> extends IResponse<T> {\n  /**\n   * The time that the successfull response took to complete\n   */\n  duration: number;\n  /**\n   * Data of the response\n   */\n  data: T;\n}\n\n/**\n * An error response\n */\nexport interface IErrorResponse extends IResponse<IStringMap<any>> {\n  /**\n   * Status code for the error\n   */\n  statusCode: number;\n  /**\n   * Data about the error\n   */\n  data?: {\n    /**\n     * Message for the error\n     */\n    message?: string;\n    /**\n     * Type of the error\n     */\n    type?: string;\n    /**\n     * A report provided by the search api\n     */\n    executionReport?: string;\n    [key: string]: any;\n  };\n}\n\n/**\n * Possible options when creating a {@link EndpointCaller}\n */\nexport interface IEndpointCallerOptions {\n  /**\n   * The access token to use for this endpoint.\n   */\n  accessToken?: string;\n  /**\n   * The username to use to log into this endpoint. Used for basic auth.<br/>\n   * Not used if accessToken is provided.\n   */\n  username?: string;\n  /**\n   * The password to use to log into this endpoint. Used for basic auth.<br/>\n   * Not used if accessToken is provided.\n   */\n  password?: string;\n  /**\n   * A function which will allow external code to modify all endpoint call parameters before they are sent by the browser.\n   *\n   * Used in very specific scenario where the network infrastructure require special request headers to be added or removed, for example.\n   */\n  requestModifier?: (params: IRequestInfo<any>) => IRequestInfo<any>;\n}\n\n// In ie8, XMLHttpRequest has no status property, so let's use this enum instead\nenum XMLHttpRequestStatus {\n  OPENED = XMLHttpRequest.OPENED || 1,\n  HEADERS_RECEIVED = XMLHttpRequest.HEADERS_RECEIVED || 2,\n  DONE = XMLHttpRequest.DONE || 4\n}\n\n/**\n * This class is in charge of calling an endpoint (eg: a {@link SearchEndpoint}).\n *\n * This means it's only uses to execute an XMLHttpRequest (for example), massage the response and check if there are errors.\n *\n * Will execute the call and return a Promise.\n *\n * Call using one of those options :\n *\n * * XMLHttpRequest for recent browser that support CORS, or if the endpoint is on the same origin.\n * * XDomainRequest for older IE browser that do not support CORS.\n * * Jsonp if all else fails, or is explicitly enabled.\n */\nexport class EndpointCaller {\n  public logger: Logger;\n\n  /**\n   * Set this property to true to enable Jsonp call to the endpoint.<br/>\n   * Be aware that jsonp is \"easier\" to setup endpoint wise, but has a lot of drawback and limitation for the client code.<br/>\n   * Default to false.\n   * @type {boolean}\n   */\n  public useJsonp = false;\n\n  /**\n   * Create a new EndpointCaller.\n   * @param options Specify the authentication that will be used for this endpoint. Not needed if the endpoint is public and has no authentication\n   */\n  constructor(public options: IEndpointCallerOptions = {}) {\n    this.logger = new Logger(this);\n  }\n\n  /**\n   * Generic call to the endpoint using the provided {@link IEndpointCallParameters}.<br/>\n   * Internally, will decide which method to use to call the endpoint :<br/>\n   * -- XMLHttpRequest for recent browser that support CORS, or if the endpoint is on the same origin.<br/>\n   * -- XDomainRequest for older IE browser that do not support CORS.<br/>\n   * -- Jsonp if all else fails, or is explicitly enabled.\n   * @param params The parameters to use for the call\n   * @returns {any} A promise of the given type\n   */\n  public call<T>(params: IEndpointCallParameters): Promise<ISuccessResponse<T>> {\n\n    var requestInfo: IRequestInfo<T> = {\n      url: params.url,\n      queryString: params.errorsAsSuccess ? params.queryString.concat(['errorsAsSuccess=1']) : params.queryString,\n      requestData: params.requestData,\n      requestDataType: params.requestDataType || 'application/x-www-form-urlencoded; charset=\"UTF-8\"',\n      begun: new Date(),\n      method: params.method\n    };\n    requestInfo.headers = this.buildRequestHeaders(requestInfo);\n    if (_.isFunction(this.options.requestModifier)) {\n      requestInfo = this.options.requestModifier(requestInfo);\n    }\n\n\n    this.logger.trace('Performing REST request', requestInfo);\n    var urlObject = this.parseURL(requestInfo.url);\n    // In IE8, hostname and port return \"\" when we are on the same domain.\n    var isLocalHost = (window.location.hostname === urlObject.hostname) || (urlObject.hostname === '');\n\n    var currentPort = (window.location.port != '' ? window.location.port : (window.location.protocol == 'https:' ? '443' : '80'));\n    var isSamePort = currentPort == urlObject.port;\n    var isCrossOrigin = !(isLocalHost && isSamePort);\n    if (!this.useJsonp) {\n      if (this.isCORSSupported() || !isCrossOrigin) {\n        return this.callUsingXMLHttpRequest(requestInfo, params.responseType);\n      } else if (this.isXDomainRequestSupported()) {\n        return this.callUsingXDomainRequest(requestInfo);\n      } else {\n        return this.callUsingAjaxJsonP(requestInfo);\n      }\n    } else {\n      return this.callUsingAjaxJsonP(requestInfo);\n    }\n  }\n\n  /**\n   * Call the endpoint using XMLHttpRequest. Used internally by {@link EndpointCaller.call}.<br/>\n   * Will try internally to handle error if it can.<br/>\n   * Promise will otherwise fail with the error type.\n   * @param requestInfo The info about the request\n   * @param responseType The responseType. Default to text. https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType\n   * @returns {Promise<T>|Promise}\n   */\n  public callUsingXMLHttpRequest<T>(requestInfo: IRequestInfo<T>, responseType = 'text'): Promise<ISuccessResponse<T>> {\n    return new Promise((resolve, reject) => {\n      var xmlHttpRequest = new XMLHttpRequest();\n\n      // Beware, most stuff must be set on the event that says the request is OPENED.\n      // Otherwise it'll bork on some browsers. Gotta love standards.\n\n      // This sent variable allowed to remove the second call of onreadystatechange with the state OPENED in IE11\n      var sent = false;\n\n      xmlHttpRequest.onreadystatechange = (ev) => {\n        if (xmlHttpRequest.readyState == XMLHttpRequestStatus.OPENED && !sent) {\n          sent = true;\n          xmlHttpRequest.withCredentials = true;\n\n          _.each(requestInfo.headers, (headerValue, headerKey) => {\n            xmlHttpRequest.setRequestHeader(headerKey, headerValue);\n          });\n\n          if (requestInfo.method == 'GET') {\n            xmlHttpRequest.send();\n          } else if (requestInfo.requestDataType.indexOf('application/json') === 0) {\n            xmlHttpRequest.send(JSON.stringify(requestInfo.requestData));\n          } else {\n            xmlHttpRequest.send(this.convertJsonToFormBody(requestInfo.requestData));\n          }\n\n          // The \"responseType\" varies if the request is a success or not.\n          // Therefore we postpone setting \"responseType\" until we know if the\n          // request is a success or not. Doing so, we avoid this potential\n          // error in Chrome:\n          //\n          //   Uncaught InvalidStateError: Failed to read the 'responseText'\n          //   property from 'XMLHttpRequest': The value is only accessible if\n          //   the object's 'responseType' is '' or 'text' (was 'document').\n          //\n        } else if (xmlHttpRequest.readyState == XMLHttpRequestStatus.HEADERS_RECEIVED) {\n          var status = xmlHttpRequest.status;\n\n          if (this.isSuccessHttpStatus(status)) {\n            xmlHttpRequest.responseType = responseType;\n          } else {\n            xmlHttpRequest.responseType = 'text';\n          }\n        } else if (xmlHttpRequest.readyState == XMLHttpRequestStatus.DONE) {\n          var status = xmlHttpRequest.status;\n          var data;\n          switch (responseType) {\n            case 'json':\n              data = xmlHttpRequest.response;\n              // Work around a bug in IE11 where responseType jsonis not supported : the response comes back as a plain string\n              // Force the json parse manually\n              if (responseType == 'json' && DeviceUtils.getDeviceName() == 'IE') {\n                try {\n                  data = JSON.parse(data);\n                } catch (e) {\n                  // Do nothing, it probably means the data was JSON already\n                }\n              }\n              break;\n            case 'text':\n              data = this.tryParseResponseText(xmlHttpRequest.responseText, xmlHttpRequest.getResponseHeader('Content-Type'));\n              break;\n            default:\n              data = xmlHttpRequest.response;\n              break;\n          }\n\n          if (data == undefined) {\n            data = this.tryParseResponseText(xmlHttpRequest.responseText, xmlHttpRequest.getResponseHeader('Content-Type'));\n          }\n\n          if (this.isSuccessHttpStatus(status)) {\n            this.handleSuccessfulResponseThatMightBeAnError(requestInfo, data, resolve, reject);\n          } else {\n            this.handleError(requestInfo, xmlHttpRequest.status, data, reject);\n          }\n        }\n      };\n\n      var queryString = requestInfo.queryString;\n      if (requestInfo.method == 'GET') {\n        queryString = queryString.concat(this.convertJsonToQueryString(requestInfo.requestData));\n      }\n      xmlHttpRequest.open(requestInfo.method, this.combineUrlAndQueryString(requestInfo.url, queryString));\n    });\n  }\n\n  /**\n   * Call the endpoint using XDomainRequest https://msdn.microsoft.com/en-us/library/cc288060(v=vs.85).aspx<br/>\n   * Used for IE8/9\n   * @param requestInfo The info about the request\n   * @returns {Promise<T>|Promise}\n   */\n  public callUsingXDomainRequest<T>(requestInfo: IRequestInfo<T>): Promise<IResponse<T>> {\n    return new Promise((resolve, reject) => {\n      var queryString = requestInfo.queryString.concat([]);\n\n      // XDomainRequest don't support including stuff in the header, so we must\n      // put the access token in the query string if we have one.\n      if (this.options.accessToken) {\n        queryString.push('access_token=' + encodeURIComponent(this.options.accessToken));\n      }\n\n      var xDomainRequest = new XDomainRequest();\n      if (requestInfo.method == 'GET') {\n        queryString = queryString.concat(this.convertJsonToQueryString(requestInfo.requestData));\n      }\n      xDomainRequest.open(requestInfo.method, this.combineUrlAndQueryString(requestInfo.url, queryString));\n\n      xDomainRequest.onload = () => {\n        var data = this.tryParseResponseText(xDomainRequest.responseText, xDomainRequest.contentType);\n        this.handleSuccessfulResponseThatMightBeAnError(requestInfo, data, resolve, reject);\n      };\n\n      xDomainRequest.onerror = () => {\n        var data = this.tryParseResponseText(xDomainRequest.responseText, xDomainRequest.contentType);\n        this.handleError(requestInfo, 0, data, reject);\n      };\n\n      // We must set those functions otherwise it will sometime fail in IE\n      xDomainRequest.ontimeout = () => this.logger.error('Request timeout', xDomainRequest, requestInfo.requestData);\n      xDomainRequest.onprogress = () => this.logger.trace('Request progress', xDomainRequest, requestInfo.requestData);\n\n      // We must open the request in a separate thread, for obscure reasons\n      _.defer(() => {\n        if (requestInfo.method == 'GET') {\n          xDomainRequest.send();\n        } else {\n          xDomainRequest.send(this.convertJsonToFormBody(requestInfo.requestData));\n        }\n      });\n    });\n  }\n\n  /**\n   * Call the endpoint using Jsonp https://en.wikipedia.org/wiki/JSONP<br/>\n   * Should be used for dev only, or for very special setup as using jsonp has a lot of drawbacks.\n   * @param requestInfo The info about the request\n   * @returns {Promise<T>|Promise}\n   */\n  public callUsingAjaxJsonP<T>(requestInfo: IRequestInfo<T>): Promise<IResponse<T>> {\n    return new Promise((resolve, reject) => {\n      var queryString = requestInfo.queryString.concat(this.convertJsonToQueryString(requestInfo.requestData));\n\n      // JSONP don't support including stuff in the header, so we must\n      // put the access token in the query string if we have one.\n      if (this.options.accessToken) {\n        queryString.push('access_token=' + encodeURIComponent(this.options.accessToken));\n      }\n\n      queryString.push('callback=?');\n\n      $['jsonp']({\n        url: this.combineUrlAndQueryString(requestInfo.url, queryString),\n        success: (data: any) => this.handleSuccessfulResponseThatMightBeAnError(requestInfo, data, resolve, reject),\n        error: () => this.handleError(requestInfo, 0, undefined, reject)\n      });\n    });\n  }\n\n  private parseURL(url: string) {\n    var urlObject = document.createElement('a');\n    urlObject.href = url;\n    return urlObject;\n  }\n\n  private convertJsonToQueryString(json: { [key: string]: any; }): string[] {\n    Assert.exists(json);\n\n    var result: string[] = [];\n    _.each(json, (value, key) => {\n      if (value != null) {\n        if (_.isObject(value)) {\n          result.push(key + '=' + encodeURIComponent(JSON.stringify(value)));\n        } else {\n          result.push(key + '=' + encodeURIComponent(value.toString()));\n        }\n      }\n    });\n\n    return result;\n  }\n\n  private convertJsonToFormBody(json: { [key: string]: any; }): string {\n    return this.convertJsonToQueryString(json).join('&');\n  }\n\n  private handleSuccessfulResponseThatMightBeAnError<T>(requestInfo: IRequestInfo<T>, data: any, success, error) {\n    if (this.isErrorResponseBody(data)) {\n      this.handleError(requestInfo, data.statusCode, data, error);\n    } else {\n      this.handleSuccess(requestInfo, data, success);\n    }\n  }\n\n  private handleSuccess<T>(requestInfo: IRequestInfo<T>, data: T, success) {\n    var querySuccess: ISuccessResponse<T> = {\n      duration: TimeSpan.fromDates(requestInfo.begun, new Date()).getMilliseconds(),\n      data: data\n    };\n\n    this.logger.trace('REST request successful', data, requestInfo);\n    success(querySuccess);\n  }\n\n  private handleError<T>(requestInfo: IRequestInfo<T>, status: number, data: any, error) {\n    var queryError: IErrorResponse = {\n      statusCode: status,\n      data: data\n    };\n    this.logger.error('REST request failed', status, data, requestInfo);\n    error(queryError);\n  }\n\n  private combineUrlAndQueryString(url: String, queryString: string[]): string {\n    var questionMark = '?';\n    if (url.match(/\\?$/)) {\n      questionMark = '';\n    }\n    return url + (queryString.length > 0 ? questionMark + queryString.join('&') : '');\n  }\n\n  private isXDomainRequestSupported(): boolean {\n    return 'XDomainRequest' in window;\n  }\n\n  private isCORSSupported(): boolean {\n    return 'withCredentials' in new XMLHttpRequest();\n  }\n\n  private isSuccessHttpStatus(status: number): boolean {\n    return status >= 200 && status < 300 || status === 304;\n  }\n\n  private tryParseResponseText(json: string, contentType: string): any {\n    if (contentType != null && contentType.indexOf('application/json') != -1) {\n      if (Utils.isNonEmptyString(json)) {\n        try {\n          return JSON.parse(json);\n        } catch (ex) {\n          return undefined;\n        }\n      } else {\n        return undefined;\n      }\n    } else {\n      return json;\n    }\n  }\n\n  private isErrorResponseBody(data: any): boolean {\n    if (data && data.statusCode) {\n      return !this.isSuccessHttpStatus(data.statusCode);\n    } else {\n      return false;\n    }\n  }\n\n  private buildRequestHeaders<T>(requestInfo: IRequestInfo<T>): IStringMap<string> {\n    let headers: IStringMap<string> = {};\n    if (this.options.accessToken) {\n      headers['Authorization'] = `Bearer ${this.options.accessToken}`;\n    } else if (this.options.username && this.options.password) {\n      headers['Authorization'] = `Basic ${btoa(this.options.username + ':' + this.options.password)}`;\n    }\n\n    if (requestInfo.method == 'GET') {\n      return headers;\n    }\n\n    if (requestInfo.requestDataType.indexOf('application/json') === 0) {\n      headers['Content-Type'] = 'application/json; charset=\"UTF-8\"';\n    } else {\n      headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=\"UTF-8\"';\n    }\n\n    return headers;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rest/EndpointCaller.ts\n **/","// Ensure that we're not going to get console is undefined error in IE8-9\nif (!window['console']) {\n  console = {\n    log: function () {\n    },\n    debug: function () {\n    },\n    info: function () {\n    },\n    warn: function () {\n    },\n    error: function () {\n    },\n    assert: function () {\n    },\n    clear: function () {\n    },\n    count: function () {\n    },\n    dir: function () {\n    },\n    dirxml: function () {\n    },\n    group: function () {\n    },\n    groupCollapsed: function () {\n    },\n    groupEnd: function () {\n    },\n    msIsIndependentlyComposed: function (element: any): any {\n    },\n    profile: function () {\n    },\n    profileEnd: function () {\n    },\n    select: function () {\n    },\n    time: function () {\n    },\n    timeEnd: function () {\n    },\n    trace: function () {\n    }\n  };\n}\n\n\nexport class Logger {\n  static TRACE = 1;\n  static DEBUG = 2;\n  static INFO = 3;\n  static WARN = 4;\n  static ERROR = 5;\n  static NOTHING = 6;\n\n  static level = Logger.INFO;\n  static executionTime = false;\n\n  constructor(private owner: any) {\n  }\n\n  trace(...stuff: any[]) {\n    if (Logger.level <= Logger.TRACE) {\n      this.log('TRACE', stuff);\n    }\n  }\n\n  debug(...stuff: any[]) {\n    if (Logger.level <= Logger.DEBUG) {\n      this.log('DEBUG', stuff);\n    }\n  }\n\n  info(...stuff: any[]) {\n    if (Logger.level <= Logger.INFO) {\n      this.log('INFO', stuff);\n    }\n  }\n\n  warn(...stuff: any[]) {\n    if (Logger.level <= Logger.WARN) {\n      this.log('WARN', stuff);\n    }\n  }\n\n  error(...stuff: any[]) {\n    if (Logger.level <= Logger.ERROR) {\n      this.log('ERROR', stuff);\n    }\n  }\n\n  private log(level: string, stuff: any[]) {\n    if (window['console'] && console.log) {\n      console.log([level, this.owner].concat(stuff));\n      if (Logger.executionTime) {\n        console.timeEnd('Execution time');\n        console.time('Execution time');\n      }\n    }\n  }\n\n  static enable() {\n    Logger.level = Logger.TRACE;\n  }\n\n  static disable() {\n    Logger.level = Logger.NOTHING;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/misc/Logger.ts\n **/","import {Logger} from '../misc/Logger';\nimport {Utils} from '../utils/Utils';\n\nexport class Assert {\n  private static logger = new Logger('Assert');\n\n  static failureHandler = (message?: string) => {\n    Assert.logger.error('Assertion Failed!', message);\n\n    if (window['console'] && console.trace) {\n      console.trace();\n    }\n\n    if (Utils.isNonEmptyString(message)) {\n      throw new PreconditionFailedException(message);\n    } else {\n      throw new PreconditionFailedException('Assertion Failed!');\n    }\n  };\n\n  static fail(message?: string) {\n    Assert.failureHandler(message);\n  }\n\n  static check(condition: boolean, message?: string) {\n    if (!condition) {\n      Assert.fail(message);\n    }\n  }\n\n  static isUndefined(obj: any) {\n    Assert.check(Utils.isUndefined(obj), 'Value should be undefined.');\n  }\n\n  static isNotUndefined(obj: any) {\n    Assert.check(!Utils.isUndefined(obj), 'Value should not be undefined.');\n  }\n\n  static isNull(obj: any) {\n    Assert.check(Utils.isNull(obj), 'Value should be null.');\n  }\n\n  static isNotNull(obj: any) {\n    Assert.check(!Utils.isNull(obj), 'Value should not be null.');\n  }\n\n  static exists(obj: any) {\n    Assert.check(!Utils.isNullOrUndefined(obj), 'Value should not be null or undefined');\n  }\n\n  static doesNotExists(obj: any) {\n    Assert.check(Utils.isNullOrUndefined(obj), 'Value should be null or undefined');\n  }\n\n  static isString(obj: any) {\n    Assert.check(_.isString(obj), 'Value should be a string.');\n  }\n\n  static stringStartsWith(str: string, start: string) {\n    Assert.isNonEmptyString(str);\n    Assert.isNonEmptyString(start);\n    Assert.check(str.indexOf(start) == 0, 'Value should start with ' + start);\n  }\n\n  static isNonEmptyString(str: string) {\n    Assert.check(Utils.isNonEmptyString(str), 'Value should be a non-empty string.');\n  }\n\n  static isNumber(obj: any) {\n    Assert.check(_.isNumber(obj), 'Value should be a number.');\n  }\n\n  static isLargerThan(expected: number, actual: number) {\n    Assert.check(actual > expected, 'Value ' + actual + ' should be larger than ' + expected);\n  }\n\n  static isLargerOrEqualsThan(expected: number, actual: number) {\n    Assert.check(actual >= expected, 'Value ' + actual + ' should be larger or equal than ' + expected);\n  }\n\n  static isSmallerThan(expected: number, actual: number) {\n    Assert.check(actual < expected, 'Value ' + actual + ' should be smaller than ' + expected);\n  }\n\n  static isSmallerOrEqualsThan(expected: number, actual: number) {\n    Assert.check(actual <= expected, 'Value ' + actual + ' should be smaller or equal than ' + expected);\n  }\n}\n\nexport class PreconditionFailedException {\n  constructor(public message: string) {\n  }\n\n  toString() {\n    return this.message;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/misc/Assert.ts\n **/","import {IQueryResult} from '../rest/QueryResult';\n\nconst isCoveoFieldRegex = /^@[a-zA-Z0-9_\\.]+$/;\n\nexport class Utils {\n  static isUndefined(obj: any): boolean {\n    return typeof obj == 'undefined';\n  }\n\n  static isNull(obj: any): boolean {\n    return obj === null;\n  }\n\n  static isNullOrUndefined(obj: any): boolean {\n    return Utils.isUndefined(obj) || Utils.isNull(obj);\n  }\n\n  static exists(obj: any): boolean {\n    return !Utils.isNullOrUndefined(obj);\n  }\n\n  static toNotNullString(str: string): string {\n    return _.isString(str) ? str : '';\n  }\n\n  static anyTypeToString(value: any): string {\n    return value ? value.toString() : '';\n  }\n\n  static isNullOrEmptyString(str: string): boolean {\n    return Utils.isNullOrUndefined(str) || !Utils.isNonEmptyString(str);\n  }\n\n  static isNonEmptyString(str: string): boolean {\n    return _.isString(str) && str !== '';\n  }\n\n  static isEmptyString(str: string): boolean {\n    return !Utils.isNonEmptyString(str);\n  }\n\n  static stringStartsWith(str: string, startWith: string): boolean {\n    return str.slice(0, startWith.length) == startWith;\n  }\n\n  static isNonEmptyArray(obj: any): boolean {\n    return _.isArray(obj) && obj.length > 0;\n  }\n\n  static isEmptyArray(obj: any): boolean {\n    return !Utils.isNonEmptyArray(obj);\n  }\n\n  static isHtmlElement(obj: any): boolean {\n    if (window['HTMLElement'] != undefined) {\n      return obj instanceof HTMLElement;\n    } else { // IE 8 FIX\n      return obj && obj.nodeType && obj.nodeType == 1;\n    }\n  }\n\n  static parseIntIfNotUndefined(str: string): number {\n    if (Utils.isNonEmptyString(str)) {\n      return parseInt(str, 10);\n    } else {\n      return undefined;\n    }\n  }\n\n  static parseFloatIfNotUndefined(str: string): number {\n    if (Utils.isNonEmptyString(str)) {\n      return parseFloat(str);\n    } else {\n      return undefined;\n    }\n  }\n\n  static round(num: number, decimals: number) {\n    return Math.round(num * Math.pow(10, decimals)) / Math.pow(10, decimals);\n  }\n\n  static parseBooleanIfNotUndefined(str: string): boolean {\n    if (Utils.isNonEmptyString(str)) {\n      switch (str.toLowerCase()) {\n        case 'true':\n        case '1':\n        case 'yes':\n          return true;\n        case 'false':\n        case '0':\n        case 'no':\n          return false;\n        default:\n          return undefined;\n      }\n    } else {\n      return undefined;\n    }\n  }\n\n  static trim(value: string): string {\n    if (value == null) {\n      return null;\n    }\n    return value.replace(/^\\s+|\\s+$/g, '');\n  }\n\n  static encodeHTMLEntities(rawStr: string) {\n    let ret = [];\n    for (let i = rawStr.length - 1; i >= 0; i--) {\n      if (/^[a-z0-9]/i.test(rawStr[i])) {\n        ret.unshift(rawStr[i]);\n      } else {\n        ret.unshift(['&#', rawStr.charCodeAt(i), ';'].join(''));\n      }\n    }\n    return ret.join('');\n  }\n\n  static decodeHTMLEntities(rawString: string) {\n    return rawString.replace(/&#(\\d+);/g, function (match, dec) {\n      return String.fromCharCode(dec);\n    });\n  }\n\n  static arrayEqual(array1: any[], array2: any[], sameOrder: boolean = true): boolean {\n    if (sameOrder) {\n      return _.isEqual(array1, array2);\n    } else {\n      let arrays = [array1, array2];\n      return _.all(arrays, (array: any[]) => {\n        return array.length == arrays[0].length && _.difference(array, arrays[0]).length == 0;\n      });\n    }\n  }\n\n  static objectEqual(obj1: Object, obj2: Object): boolean {\n    return _.isEqual(obj1, obj2);\n  }\n\n\n  static isCoveoField(field: string): boolean {\n    return isCoveoFieldRegex.test(field);\n  }\n\n  static escapeRegexCharacter(str: string) {\n    let ret = str.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n    return ret;\n  }\n\n  static getCaseInsensitiveProperty(object: {}, name: string): any {\n    // First try using a fast case-sensitive lookup\n    let value = object[name];\n\n    // Then try a fast case-sensitive lookup with lowercase name\n    if (value == null) {\n      let lowerCaseName = name.toLowerCase();\n      value = object[lowerCaseName];\n      // Then try a slow scanning of all the properties\n      if (value == null) {\n        let matchingKey = _.find(_.keys(object), (key: string) => key.toLowerCase() == lowerCaseName);\n        if (matchingKey != null) {\n          value = object[matchingKey];\n        }\n      }\n    }\n    return value;\n  }\n\n  static getFieldValue(result: IQueryResult, name: string): any {\n    // Be as forgiving as possible about the field name, since we expect\n    // user provided values.\n    if (name == null) {\n      return undefined;\n    }\n    name = Utils.trim(name);\n    if (name[0] == '@') {\n      name = name.substr(1);\n    }\n    if (name == '') {\n      return undefined;\n    }\n\n    // At this point the name should be well formed\n    if (!Utils.isCoveoField('@' + name)) {\n      throw `Not a valid field : ${name}`;\n    }\n    // Handle namespace field values of the form sf.Foo.Bar\n    let parts = name.split('.').reverse();\n    let obj = result.raw;\n    while (parts.length > 1) {\n      obj = Utils.getCaseInsensitiveProperty(obj, parts.pop());\n      if (Utils.isUndefined(obj)) {\n        return undefined;\n      }\n    }\n    let value = Utils.getCaseInsensitiveProperty(obj, parts[0]);\n    // If still nothing, look at the root of the result\n    if (value == null) {\n      value = Utils.getCaseInsensitiveProperty(result, name);\n    }\n    return value;\n  }\n\n  static throttle(func, wait, options: { leading?: boolean; trailing?: boolean; } = {}, context?, args?) {\n    let result;\n    let timeout: number = null;\n    let previous = 0;\n    let later = function () {\n      previous = options.leading === false ? 0 : new Date().getTime();\n      timeout = null;\n      result = func.apply(context, args);\n    };\n    return function () {\n      let now = new Date().getTime();\n      if (!previous && options.leading === false) {\n        previous = now;\n      }\n      let remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  }\n\n  static extendDeep(target, src): {} {\n    if (!target) {\n      target = {};\n    }\n    let isArray = _.isArray(src);\n    let toReturn = isArray && [] || {};\n    if (isArray) {\n      target = target || [];\n      toReturn = toReturn['concat'](target);\n      _.each(src, (e, i, obj) => {\n        if (typeof target[i] === 'undefined') {\n          toReturn[i] = <any>e;\n        } else if (typeof e === 'object') {\n          toReturn[i] = Utils.extendDeep(target[i], e);\n        } else {\n          if (target.indexOf(e) === -1) {\n            toReturn['push'](e);\n          }\n        }\n      });\n    } else {\n      if (target && typeof target === 'object') {\n        _.each(_.keys(target), (key) => {\n          toReturn[key] = target[key];\n        });\n      }\n      _.each(_.keys(src), (key) => {\n        if (typeof src[key] !== 'object' || !src[key]) {\n          toReturn[key] = src[key];\n        } else {\n          if (!target[key]) {\n            toReturn[key] = src[key];\n          } else {\n            toReturn[key] = Utils.extendDeep(target[key], src[key]);\n          }\n        }\n      });\n    }\n    return toReturn;\n  }\n\n  static getQueryStringValue(key, queryString = window.location.search) {\n    return queryString.replace(new RegExp('^(?:.*[&\\\\?]' + key.replace(/[\\.\\+\\*]/g, '\\\\$&') + '(?:\\\\=([^&]*))?)?.*$', 'i'), '$1');\n  }\n\n  static isValidUrl(str: string): boolean {\n    let regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n    return regexp.test(str);\n  }\n\n  static debounce(func: Function, wait: number) {\n    let timeout: number;\n    let stackTraceTimeout: number;\n    return function (...args: any[]) {\n      if (timeout == null) {\n        timeout = setTimeout(() => {\n          timeout = null;\n        }, wait);\n        stackTraceTimeout = setTimeout(() => {\n          func.apply(this, args);\n          stackTraceTimeout = null;\n        });\n      } else if (stackTraceTimeout == null) {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => {\n          func.apply(this, args);\n          timeout = null;\n        }, wait);\n      }\n    };\n  }\n\n  static readCookie(name: string) {\n    let nameEQ = name + '=';\n    let ca = document.cookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n      let c = ca[i];\n      while (c.charAt(0) == ' ') {\n        c = c.substring(1, c.length);\n      }\n      if (c.indexOf(nameEQ) == 0) {\n        return c.substring(nameEQ.length, c.length);\n      }\n    }\n    return null;\n  }\n\n  static toDashCase(camelCased: string) {\n    return camelCased.replace(/([a-z][A-Z])/g, (g) => g[0] + '-' + g[1].toLowerCase());\n  }\n\n  // Based on http://stackoverflow.com/a/8412989\n  static parseXml(xml: string): XMLDocument {\n    if (typeof DOMParser != 'undefined') {\n      return (new DOMParser()).parseFromString(xml, 'text/xml');\n    } else if (typeof ActiveXObject != 'undefined' && new ActiveXObject('Microsoft.XMLDOM')) {\n      var xmlDoc = new ActiveXObject('Microsoft.XMLDOM');\n      xmlDoc.async = 'false';\n      xmlDoc.loadXML(xml);\n      return xmlDoc;\n    } else {\n      throw new Error('No XML parser found');\n    }\n  }\n\n  static copyObject<T>(target: T, src: T) {\n    _.each(_.keys(src), key => {\n      if (typeof src[key] !== 'object' || !src[key]) {\n        target[key] = src[key];\n      } else if (!target[key]) {\n        target[key] = src[key];\n      } else {\n        this.copyObject(target[key], src[key]);\n      }\n    });\n  }\n\n  static copyObjectAttributes<T>(target: T, src: T, attributes: string[]) {\n    _.each(_.keys(src), key => {\n      if (_.contains(attributes, key)) {\n        if (typeof src[key] !== 'object' || !src[key]) {\n          target[key] = src[key];\n        } else if (!target[key]) {\n          target[key] = src[key];\n        } else {\n          this.copyObject(target[key], src[key]);\n        }\n      }\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/Utils.ts\n **/","import {Assert} from '../misc/Assert';\n\nexport interface ITimeSpanUtilsOptions {\n  isMilliseconds: boolean;\n}\n\nexport class TimeSpan {\n  private milliseconds: number;\n\n  constructor(time: number, isMilliseconds = true) {\n    if (isMilliseconds) {\n      this.milliseconds = time;\n    } else {\n      this.milliseconds = time * 1000;\n    }\n  }\n\n  getMilliseconds() {\n    return this.milliseconds;\n  }\n\n  getSeconds() {\n    return this.getMilliseconds() / 1000;\n  }\n\n  getMinutes() {\n    return this.getSeconds() / 60;\n  }\n\n  getHours() {\n    return this.getMinutes() / 60;\n  }\n\n  getDays() {\n    return this.getHours() / 24;\n  }\n\n  getWeeks() {\n    return this.getDays() / 7;\n  }\n\n  getHHMMSS(): string {\n    var hours = Math.floor(this.getHours());\n    var minutes = Math.floor(this.getMinutes()) % 60;\n    var seconds = Math.floor(this.getSeconds()) % 60;\n    var hoursString, minutesString, secondsString;\n    if (hours == 0) {\n      hoursString = '';\n    } else {\n      hoursString = hours < 10 ? '0' + hours.toString() : hours.toString();\n    }\n    minutesString = minutes < 10 ? '0' + minutes.toString() : minutes.toString();\n    secondsString = seconds < 10 ? '0' + seconds.toString() : seconds.toString();\n    var hhmmss = (hoursString != '' ? hoursString + ':' : '') + minutesString + ':' + secondsString;\n    return hhmmss;\n  }\n\n  static fromDates(from: Date, to: Date): TimeSpan {\n    Assert.exists(from);\n    Assert.exists(to);\n    return new TimeSpan(to.valueOf() - from.valueOf());\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/TimeSpanUtils.ts\n **/","// Not sure about this : In year 2033 who's to say that this list won't be 50 pages long !\nconst mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\nexport class DeviceUtils {\n  static getDeviceName(): string {\n    var userAgent = navigator.userAgent;\n    if (userAgent.match(/Android/i)) {\n      return 'Android';\n    }\n    if (userAgent.match(/BlackBerry/i)) {\n      return 'BlackBerry';\n    }\n    if (userAgent.match(/iPhone/i)) {\n      return 'iPhone';\n    }\n    if (userAgent.match(/iPad/i)) {\n      return 'iPad';\n    }\n    if (userAgent.match(/iPod/i)) {\n      return 'iPod';\n    }\n    if (userAgent.match(/Opera Mini/i)) {\n      return 'Opera Mini';\n    }\n    if (userAgent.match(/IEMobile/i)) {\n      return 'IE Mobile';\n    }\n    if (userAgent.match(/Chrome/i)) {\n      return 'Chrome';\n    }\n    if (userAgent.match(/MSIE/i) || userAgent.match(/Trident/i)) {\n      return 'IE';\n    }\n    if (userAgent.match(/Opera/i)) {\n      return 'Opera';\n    }\n    if (userAgent.match(/Firefox/i)) {\n      return 'Firefox';\n    }\n    if (userAgent.match(/Safari/i)) {\n      return 'Safari';\n    }\n    return 'Others';\n  }\n\n  static isAndroid() {\n    return DeviceUtils.getDeviceName() == 'Android';\n  }\n\n  static isIos() {\n    var deviceName = DeviceUtils.getDeviceName();\n    return deviceName == 'iPhone' || deviceName == 'iPad' || deviceName == 'iPod';\n  }\n\n  static isIE8or9(): boolean {\n    var myNav = navigator.userAgent.toLowerCase();\n    if (myNav.indexOf('msie') == -1) {\n      return false;\n    }\n    return parseInt(myNav.split('msie')[1]) < 10;\n  }\n\n  static isMobileDevice() {\n    return mobile;\n  }\n\n  static isSmallScreenWidth() {\n    if (window['clientWidth'] != null && window['clientWidth'] <= 480) {\n      return true;\n    }\n    return document.body.clientWidth <= 480;\n  }\n\n  static isSmallScreenHeight() {\n    return document.body.clientHeight <= 640;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/DeviceUtils.ts\n **/","import {Assert} from '../misc/Assert';\nimport {IEndpointError} from '../rest/EndpointError';\n\nexport class AjaxError implements IEndpointError {\n  public type;\n  public name;\n\n  constructor(public message: string, public status: number) {\n    Assert.exists(message);\n    Assert.exists(status);\n    this.name = this.type = 'Ajax Error (status: ' + status + ')';\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rest/AjaxError.ts\n **/","import {IEndpointError} from './EndpointError';\n\nexport class MissingAuthenticationError implements IEndpointError {\n  public type: string;\n  public message: string;\n  public isMissingAuthentication = true;\n  public name: string;\n\n  constructor(public provider: string) {\n    this.name = this.type = this.message = `Missing Authentication (provider: ${provider})`;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rest/MissingAuthenticationError.ts\n **/","import {IQueryResults} from '../rest/QueryResults';\nimport {IQueryResult} from '../rest/QueryResult';\nimport {IQuery} from '../rest/Query';\nimport {Assert} from '../misc/Assert';\nimport {Utils} from '../utils/Utils';\n\ndeclare let crypto: Crypto;\n\nexport class QueryUtils {\n  static createGuid(): string {\n    return (typeof (crypto) != 'undefined' && typeof (crypto.getRandomValues) != 'undefined') ? QueryUtils.generateWithCrypto() : QueryUtils.generateWithRandom();\n  }\n\n  // This method is a fallback as it's generate a lot of collisions in Chrome.\n  static generateWithRandom(): string {\n    // http://stackoverflow.com/a/2117523\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      let r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n\n  static generateWithCrypto(): string {\n    let buf = new Uint16Array(8);\n    crypto.getRandomValues(buf);\n    let S4 = function (num) {\n      let ret = num.toString(16);\n      while (ret.length < 4) {\n        ret = '0' + ret;\n      }\n      return ret;\n    };\n    return (S4(buf[0]) + S4(buf[1]) + '-' + S4(buf[2]) + '-' + S4(buf[3]) + '-' + S4(buf[4]) + '-' + S4(buf[5]) + S4(buf[6]) + S4(buf[7]));\n  }\n\n  static setStateObjectOnQueryResults(state: any, results: IQueryResults) {\n    QueryUtils.setPropertyOnResults(results, 'state', state);\n  }\n\n  static setStateObjectOnQueryResult(state: any, result: IQueryResult) {\n    QueryUtils.setPropertyOnResult(result, 'state', state);\n  }\n\n  static setIndexAndUidOnQueryResults(query: IQuery, results: IQueryResults, queryUid: string, pipeline: string, splitTestRun: string) {\n    Assert.exists(query);\n    Assert.exists(results);\n    let index = query.firstResult;\n    QueryUtils.setPropertyOnResults(results, 'queryUid', queryUid);\n    QueryUtils.setPropertyOnResults(results, 'pipeline', pipeline);\n    QueryUtils.setPropertyOnResults(results, 'splitTestRun', splitTestRun);\n    QueryUtils.setPropertyOnResults(results, 'index', index, () => ++index);\n  }\n\n  static setTermsToHighlightOnQueryResults(query: IQuery, results: IQueryResults) {\n    QueryUtils.setPropertyOnResults(results, 'termsToHighlight', results.termsToHighlight);\n    QueryUtils.setPropertyOnResults(results, 'phrasesToHighlight', results.phrasesToHighlight);\n  }\n\n  static splitFlags(flags: string, delimiter: string = ';') {\n    Assert.exists(flags);\n    return flags.split(delimiter);\n  }\n\n  static isAttachment(result: IQueryResult) {\n    return _.contains(QueryUtils.splitFlags(result.flags), 'IsAttachment');\n  }\n\n  static containsAttachment(result: IQueryResult) {\n    return _.contains(QueryUtils.splitFlags(result.flags), 'ContainsAttachment');\n  }\n\n  static hasHTMLVersion(result: IQueryResult) {\n    return _.contains(QueryUtils.splitFlags(result.flags), 'HasHtmlVersion');\n  }\n\n  static hasThumbnail(result: IQueryResult) {\n    return _.contains(QueryUtils.splitFlags(result.flags), 'HasThumbnail');\n  }\n\n  static hasExcerpt(result: IQueryResult) {\n    return result.excerpt != undefined && result.excerpt != '';\n  }\n\n  static quoteAndEscapeIfNeeded(str: string): string {\n    Assert.isString(str);\n    return QueryUtils.isAtomicString(str) || (QueryUtils.isRangeString(str) || QueryUtils.isRangeWithoutOuterBoundsString(str)) ? str : QueryUtils.quoteAndEscape(str);\n  }\n\n  static quoteAndEscape(str: string): string {\n    Assert.isString(str);\n    return `\"${QueryUtils.escapeString(str)}\"`;\n  }\n\n  static escapeString(str: string): string {\n    Assert.isString(str);\n    return str.replace(/\"/g, ' ');\n  }\n\n  static isAtomicString(str: string): boolean {\n    Assert.isString(str);\n    return /^\\d+(\\.\\d+)?$|^[\\d\\w]+$/.test(str);\n  }\n\n  static isRangeString(str: string): boolean {\n    Assert.isString(str);\n    return /^\\d+(\\.\\d+)?\\.\\.\\d+(\\.\\d+)?$|^\\d{4}\\/\\d{2}\\/\\d{2}@\\d{2}:\\d{2}:\\d{2}\\.\\.\\d{4}\\/\\d{2}\\/\\d{2}@\\d{2}:\\d{2}:\\d{2}$/.test(str);\n  }\n\n  static isRangeWithoutOuterBoundsString(str: string): boolean {\n    Assert.isString(str);\n    return /^\\d+(\\.\\d+)?$|^\\d{4}\\/\\d{2}\\/\\d{2}@\\d{2}:\\d{2}:\\d{2}$/.test(str);\n  }\n\n  static buildFieldExpression(field: string, operator: string, values: string[]) {\n    Assert.isNonEmptyString(field);\n    Assert.stringStartsWith(field, '@');\n    Assert.isNonEmptyString(operator);\n    Assert.isLargerOrEqualsThan(1, values.length);\n\n    if (values.length == 1) {\n      return field + operator + QueryUtils.quoteAndEscapeIfNeeded(values[0]);\n    } else {\n      return field + operator + '(' + _.map(values, (str) => QueryUtils.quoteAndEscapeIfNeeded(str)).join(',') + ')';\n    }\n  }\n\n  static buildFieldNotEqualExpression(field: string, values: string[]) {\n    Assert.isNonEmptyString(field);\n    Assert.stringStartsWith(field, '@');\n    Assert.isLargerOrEqualsThan(1, values.length);\n\n    let filter: string;\n    if (values.length == 1) {\n      filter = field + '==' + QueryUtils.quoteAndEscapeIfNeeded(values[0]);\n    } else {\n      filter = field + '==' + '(' + _.map(values, (str) => QueryUtils.quoteAndEscapeIfNeeded(str)).join(',') + ')';\n    }\n\n    return '(NOT ' + filter + ')';\n  }\n\n  static mergeQueryString(url: string, queryString: string) {\n    let queryStringPosition = url.indexOf('?');\n    if (queryStringPosition != -1) {\n      url += '&' + queryString;\n    } else {\n      url += '?' + queryString;\n    }\n    return url;\n  }\n\n  static mergePath(url: string, path: string) {\n    let urlSplit = url.split('?');\n    return urlSplit[0] + path + '?' + (urlSplit[1] || '');\n  }\n\n  public static setPropertyOnResults(results: IQueryResults, property: string, value: any, afterOneLoop?: () => any) {\n    _.each(results.results, (result: IQueryResult) => {\n      QueryUtils.setPropertyOnResult(result, property, value);\n      value = afterOneLoop ? afterOneLoop() : value;\n    });\n  }\n\n  public static setPropertyOnResult(result: IQueryResult, property: string, value: any) {\n    result[property] = value;\n    _.each(result.childResults, (child: IQueryResult) => {\n      child[property] = value;\n    });\n    if (!Utils.isNullOrUndefined(result.parentResult)) {\n      result.parentResult[property] = value;\n    }\n  }\n\n  // http://stackoverflow.com/a/11582513\n  public static getUrlParameter(name: string): string {\n    return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [, ''])[1].replace(/\\+/g, '%20')) || null;\n  }\n\n  public static isStratusAgnosticField(fieldToVerify: string, fieldToMatch: string): boolean {\n    let checkForSystem = /^(@?)(sys)?(.*)/i;\n    let matchFieldToVerify = checkForSystem.exec(fieldToVerify);\n    let matchFieldToMatch = checkForSystem.exec(fieldToMatch);\n    if (matchFieldToVerify && matchFieldToMatch) {\n      return (matchFieldToVerify[1] + matchFieldToVerify[3]).toLowerCase() == (matchFieldToMatch[1] + matchFieldToMatch[3]).toLowerCase();\n    }\n    return false;\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/QueryUtils.ts\n **/","import {IEndpointError} from './EndpointError';\nimport {IErrorResponse} from './EndpointCaller';\nimport {Assert} from '../misc/Assert';\n\nexport class QueryError implements IEndpointError {\n  public status: number;\n  public message: string;\n  public type: string;\n  public queryExecutionReport: any;\n  public name: string;\n\n  constructor(errorResponse: IErrorResponse) {\n    this.status = errorResponse.statusCode;\n    this.message = errorResponse.data.message;\n    this.name = this.type = errorResponse.data.type;\n    this.queryExecutionReport = errorResponse.data.executionReport;\n\n    Assert.isNumber(this.status);\n    Assert.isNonEmptyString(this.message);\n    Assert.isNonEmptyString(this.type);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rest/QueryError.ts\n **/","declare function require(moduleName: string): any;\nexport const ModalBox = require('exports?Coveo.ModalBox!../node_modules/modal-box/bin/ModalBox.min.js');\nexport const MagicBox = require('exports?Coveo.MagicBox!../node_modules/coveomagicbox/bin/MagicBox.min.js');\nexport const LocaleString = require('exports?window.String.toLocaleString!../lib/l10n.min.js');\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ExternalModulesShim.ts\n **/","var Coveo;!function(e){var o;!function(e){function o(e,o){void 0===o&&(o={});var n=o.body||document.body;n.className?n.className.indexOf(\"coveo-modalBox-opened\")==-1&&(n.className+=\" coveo-modalBox-opened\"):n.className=\"coveo-modalBox-opened\";var c=document.createElement(\"div\");c.className=\"coveo-modalBox\",n.appendChild(c),o.fullscreen===!0&&(c.className+=\" coveo-fullscreen\");var d=document.createElement(\"div\");d.className=\"coveo-overlay\",c.appendChild(d);var s=document.createElement(\"div\");if(s.className=\"coveo-wrapper\",c.appendChild(s),null!=o.title){var r=document.createElement(\"div\");r.className=\"coveo-title\",s.appendChild(r),r.innerHTML=o.title,o.titleClose===!0&&r.addEventListener(\"click\",function(){return v()})}e.className+=\" coveo-body\",s.appendChild(e);var i,v=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var d=null==o.validation||o.validation(e);if(d!==!1||t){c.parentElement&&c.parentElement.removeChild(c);var s=l.indexOf(v);return s>=0&&l.splice(s,1),null==n.querySelector(\".coveo-modalBox\")&&a(n,\"coveo-modalBox-opened\"),!0}return!1},u=function(e,o){var n=document.createElement(\"div\");n.className=\"coveo-button\",n.textContent=e,n.addEventListener(\"click\",function(){return v(o)}),i.appendChild(n)};return null!=o.buttons&&(i=document.createElement(\"div\"),i.className=\"coveo-buttons\",s.appendChild(i),o.buttons&t.OK&&u(\"Ok\",t.OK),o.buttons&t.APPLY&&u(\"Apply\",t.APPLY),o.buttons&t.YES&&u(\"Yes\",t.YES),o.buttons&t.NO&&u(\"No\",t.NO),o.buttons&t.CANCEL&&u(\"Cancel\",t.CANCEL)),l.push(v),o.overlayClose===!0&&d.addEventListener(\"click\",function(e){return v()}),null!=o.className&&(c.className+=\" \"+o.className),{modalBox:c,overlay:d,wrapper:s,buttons:i,content:e,close:v}}function n(e){void 0===e&&(e=!1);for(var o=0;l.length>o;){var n=l[o](0,e);n||o++}}function a(e,o){e.className=e.className.replace(new RegExp(\"(^|\\\\s)\"+o+\"(\\\\s|\\\\b)\",\"g\"),\"$1\")}!function(e){e[e.OK=1]=\"OK\",e[e.APPLY=2]=\"APPLY\",e[e.YES=4]=\"YES\",e[e.NO=8]=\"NO\",e[e.CANCEL=16]=\"CANCEL\"}(e.BUTTON||(e.BUTTON={}));var t=e.BUTTON,l=[];e.open=o,e.close=n}(o=e.ModalBox||(e.ModalBox={}))}(Coveo||(Coveo={}));\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = Coveo.ModalBox;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/exports-loader?Coveo.ModalBox!./~/modal-box/bin/ModalBox.min.js\n ** module id = 25\n ** module chunks = 0 1\n **/","var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e,n){var s=this;this.expression=e,this.input=n,_.isString(t)?this.value=t:_.isArray(t)&&(this.subResults=t,_.forEach(this.subResults,function(t){t.parent=s}))}return e.prototype.isSuccess=function(){return null!=this.value||null!=this.subResults&&_.all(this.subResults,function(t){return t.isSuccess()})},e.prototype.path=function(t){var e=null!=this.parent&&this.parent!=t?this.parent.path(t):[];return e.push(this),e},e.prototype.findParent=function(t){for(var e=this,n=_.isString(t)?function(e){return t==e.expression.id}:t;null!=e&&!n(e);)e=e.parent;return e},e.prototype.find=function(t){var e=_.isString(t)?function(e){return t==e.expression.id}:t;if(e(this))return this;if(this.subResults)for(var n=0;n<this.subResults.length;n++){var s=this.subResults[n].find(e);if(s)return s}return null},e.prototype.findAll=function(t){var e=[],n=_.isString(t)?function(e){return t==e.expression.id}:t;return n(this)&&e.push(this),this.subResults&&(e=_.reduce(this.subResults,function(t,e){return t.concat(e.findAll(n))},e)),e},e.prototype.resultAt=function(t,e){if(t<0||t>this.getLength())return[];if(null!=e){if(_.isString(e)){if(e==this.expression.id)return[this]}else if(e(this))return[this]}else{var n=null==this.value&&null==this.subResults?this.input:this.value;if(null!=n)return[this]}if(null!=this.subResults){for(var s=[],i=0;i<this.subResults.length;i++){var o=this.subResults[i];if(s=s.concat(o.resultAt(t,e)),t-=o.getLength(),t<0)break}return s}return[]},e.prototype.getExpect=function(){return null==this.value&&null==this.subResults?[this]:null!=this.subResults?_.reduce(this.subResults,function(t,e){return t.concat(e.getExpect())},[]):[]},e.prototype.getBestExpect=function(){var t=this.getExpect(),e=_.groupBy(t,function(t){return t.input}),n=_.last(_.keys(e).sort(function(t,e){return e.length-t.length})),s=e[n],e=_.groupBy(s,function(t){return t.expression.id});return _.map(e,function(t){return _.chain(t).map(function(t){return{path:t.path().length,result:t}}).sortBy(\"path\").pluck(\"result\").first().value()})},e.prototype.getHumanReadableExpect=function(){var t=this.getBestExpect(),e=t.length>0?_.last(t).input:\"\";return\"Expected \"+_.map(t,function(t){return t.getHumanReadable()}).join(\" or \")+\" but \"+(e.length>0?JSON.stringify(e[0]):\"end of input\")+\" found.\"},e.prototype.before=function(){if(null==this.parent)return\"\";var t=_.indexOf(this.parent.subResults,this);return this.parent.before()+_.chain(this.parent.subResults).first(t).map(function(t){return t.toString()}).join(\"\").value()},e.prototype.after=function(){if(null==this.parent)return\"\";var t=_.indexOf(this.parent.subResults,this);return _.chain(this.parent.subResults).last(this.parent.subResults.length-t-1).map(function(t){return t.toString()}).join(\"\").value()+this.parent.after()},e.prototype.getLength=function(){return null!=this.value?this.value.length:null!=this.subResults?_.reduce(this.subResults,function(t,e){return t+e.getLength()},0):this.input.length},e.prototype.toHtmlElement=function(){var t=document.createElement(\"span\"),e=null!=this.expression?this.expression.id:null;if(null!=e){var n=document.createAttribute(\"data-id\");n.value=e,t.setAttributeNode(n)}var s=document.createAttribute(\"data-success\");if(s.value=this.isSuccess().toString(),t.setAttributeNode(s),null!=this.value){t.appendChild(document.createTextNode(this.value));var i=document.createAttribute(\"data-value\");i.value=this.value,t.setAttributeNode(i)}else if(null!=this.subResults)_.each(this.subResults,function(e){t.appendChild(e.toHtmlElement())});else{t.appendChild(document.createTextNode(this.input));var o=document.createAttribute(\"data-input\");o.value=this.input,t.setAttributeNode(o),t.className=\"magic-box-error\"+(this.input.length>0?\"\":\" magic-box-error-empty\")}return t.result=this,t},e.prototype.clean=function(t){if(null!=t||!this.isSuccess()){t=t||_.last(this.getBestExpect()).path(this);var n=_.first(t);if(null!=n){var s=_.indexOf(this.subResults,n),i=s==-1?[]:_.map(_.first(this.subResults,s),function(t){return t.clean()});return i.push(n.clean(_.rest(t))),new e(i,this.expression,this.input)}return new e(null,this.expression,this.input)}return null!=this.value?new e(this.value,this.expression,this.input):null!=this.subResults?new e(_.map(this.subResults,function(t){return t.clean()}),this.expression,this.input):void 0},e.prototype.clone=function(){return null!=this.value?new e(this.value,this.expression,this.input):null!=this.subResults?new e(_.map(this.subResults,function(t){return t.clone()}),this.expression,this.input):new e(null,this.expression,this.input)},e.prototype.toString=function(){return null!=this.value?this.value:null!=this.subResults?_.map(this.subResults,function(t){return t.toString()}).join(\"\"):this.input},e.prototype.getHumanReadable=function(){return this.expression instanceof t.ExpressionConstant?JSON.stringify(this.expression.value):this.expression.id},e}();t.Result=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(e){function n(n){e.call(this,[n],t.ExpressionEndOfInput,n.input);var s=new t.Result(null,t.ExpressionEndOfInput,n.input.substr(n.getLength()));s.parent=this,this.subResults.push(s)}return __extends(n,e),n}(t.Result);t.EndOfInputResult=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(e){function n(t,n,s,i){var o=this;e.call(this,null!=t?[t]:null,n,s),this.result=t,this.expression=n,this.input=s,this.failAttempt=i,_.forEach(this.failAttempt,function(t){t.parent=o})}return __extends(n,e),n.prototype.getExpect=function(){var t=this,e=[];return null!=this.result&&(e=this.result.getExpect()),e=_.reduce(this.failAttempt,function(t,e){return t.concat(e.getExpect())},e),e.length>0&&_.all(e,function(e){return e.input==t.input})?[this]:e},n.prototype.clean=function(e){if(null!=e||!this.isSuccess()){e=_.rest(e||_.last(this.getBestExpect()).path(this));var n=_.first(e);return null==n?new t.Result(null,this.expression,this.input):new t.Result([n.clean(_.rest(e))],this.expression,this.input)}return new t.Result(_.map(this.result.subResults,function(t){return t.clean()}),this.expression,this.input)},n}(t.Result);t.OptionResult=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(e){function n(t,n,s,i){e.call(this,t,n,s),this.results=t,this.expression=n,this.input=s,_.last(t)!=i&&(this.failAttempt=i,null!=this.failAttempt&&(this.failAttempt.parent=this))}return __extends(n,e),n.prototype.getExpect=function(){var t=e.prototype.getExpect.call(this);return null!=this.failAttempt?t.concat(this.failAttempt.getExpect()):t},n.prototype.clean=function(n){if(null!=this.failAttempt&&(null!=n||!this.isSuccess())){n=n||_.last(this.getBestExpect()).path(this);var s=_.first(n);if(null!=s&&s==this.failAttempt){var i=_.last(this.subResults),o=_.map(null!=i&&i.isSuccess()?this.subResults:_.initial(this.subResults),function(t){return t.clean()});return o.push(s.clean(_.rest(n))),new t.Result(o,this.expression,this.input)}}return e.prototype.clean.call(this,n)},n}(t.Result);t.RefResult=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e){this.value=t,this.id=e}return e.prototype.parse=function(e,n){var s=0==e.indexOf(this.value),i=new t.Result(s?this.value:null,this,e);return s&&n&&e.length>this.value.length?new t.EndOfInputResult(i):i},e.prototype.toString=function(){return this.value},e}();t.ExpressionConstant=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){t.ExpressionEndOfInput={id:\"end of input\",parse:null}}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function t(t,e,n){this.func=t,this.id=e,this.grammar=n}return t.prototype.parse=function(t,e){return this.func(t,e,this)},t.prototype.toString=function(){return this.id},t}();t.ExpressionFunction=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e){if(this.parts=t,this.id=e,0==t.length)throw JSON.stringify(e)+\" should have at least 1 parts\"}return e.prototype.parse=function(e,n){for(var s,i=[],o=e,r=0;r<this.parts.length;r++){var u=this.parts[r];if(s=u.parse(o,n&&r==this.parts.length-1),i.push(s),!s.isSuccess())break;o=o.substr(s.getLength())}return new t.Result(i,this,e)},e.prototype.toString=function(){return this.id},e}();t.ExpressionList=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e){this.parts=t,this.id=e}return e.prototype.parse=function(e,n){for(var s=[],i=0;i<this.parts.length;i++){var o=this.parts[i].parse(e,n);if(o.isSuccess())return new t.OptionResult(o,this,e,s);s.push(o)}return new t.OptionResult(null,this,e,s)},e.prototype.toString=function(){return this.id},e}();t.ExpressionOptions=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e,n,s){this.ref=t,this.occurrence=e,this.id=n,this.grammar=s}return e.prototype.parse=function(t,e){var n=this.grammar.getExpression(this.ref);if(null==n)throw\"Expression not found:\"+this.ref;return\"?\"==this.occurrence||null==this.occurrence?this.parseOnce(t,e,n):this.parseMany(t,e,n)},e.prototype.parseOnce=function(e,n,s){var i=s.parse(e,n),o=i.isSuccess();return o||\"?\"!=this.occurrence?new t.RefResult([i],this,e,o?null:i):n?0==e.length?new t.RefResult([],this,e,i):_.all(i.getBestExpect(),function(e){return e.expression==t.ExpressionEndOfInput})?new t.RefResult([new t.Result(null,t.ExpressionEndOfInput,e)],this,e,i):i:new t.RefResult([],this,e,null)},e.prototype.parseMany=function(e,n,s){var i,o,r=[],u=e;do i=s.parse(u,!1),o=i.isSuccess(),o&&(r.push(i),u=u.substr(i.getLength()));while(o&&i.input!=u);var a=_.isNumber(this.occurrence)?this.occurrence:\"+\"==this.occurrence?1:0;if(r.length<a)r.push(i);else if(n)if(r.length>0){var l=_.last(r);i=s.parse(l.input,!0),i.isSuccess()?r[r.length-1]=i:(r.push(new t.Result(null,t.ExpressionEndOfInput,l.input.substr(l.getLength()))),i=s.parse(l.input.substr(l.getLength()),!0))}else if(0!=e.length){var c=new t.Result(null,t.ExpressionEndOfInput,e);return new t.RefResult([c],this,e,i)}return new t.RefResult(r,this,e,i)},e.prototype.toString=function(){return this.id},e}();t.ExpressionRef=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e,n){this.value=t,this.id=e}return e.prototype.parse=function(e,n){var s=e.match(this.value);null!=s&&0!=s.index&&(s=null);var i=new t.Result(null!=s?s[0]:null,this,e);return i.isSuccess()&&n&&e.length>i.value.length?new t.EndOfInputResult(i):i},e.prototype.toString=function(){return this.id},e}();t.ExpressionRegExp=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(e,n){void 0===n&&(n={}),this.expressions={},this.start=new t.ExpressionRef(e,null,\"start\",this),this.addExpressions(n)}return e.prototype.addExpressions=function(t){var e=this;_.each(t,function(t,n){e.addExpression(n,t)})},e.prototype.addExpression=function(t,n){if(t in this.expressions)throw\"Grammar already contain the id:\"+t;this.expressions[t]=e.buildExpression(n,t,this)},e.prototype.getExpression=function(t){return this.expressions[t]},e.prototype.parse=function(t){return this.start.parse(t,!0)},e.buildExpression=function(e,n,s){var i=typeof e;if(\"undefined\"==i)throw\"Invalid Expression: \"+e;if(_.isString(e))return this.buildStringExpression(e,n,s);if(_.isArray(e))return new t.ExpressionOptions(_.map(e,function(e,i){return new t.ExpressionRef(e,null,n+\"_\"+i,s)}),n);if(_.isRegExp(e))return new t.ExpressionRegExp(e,n,s);if(_.isFunction(e))return new t.ExpressionFunction(e,n,s);throw\"Invalid Expression: \"+e},e.buildStringExpression=function(n,s,i){var o=e.stringMatch(n,e.spliter),r=_.map(o,function(e,n){if(e[1]){var o=e[1],r=e[3]?Number(e[3]):e[2]||null;return new t.ExpressionRef(o,r,s+\"_\"+n,i)}return new t.ExpressionConstant(e[4],s+\"_\"+n)});if(1==r.length){var u=r[0];return u.id=s,u}return new t.ExpressionList(r,s)},e.stringMatch=function(t,e){for(var n,s=[],i=new RegExp(e.source,\"g\");null!==(n=i.exec(t));)s.push(n);return s},e.spliter=/\\[(\\w+)(\\*|\\+|\\?|\\{([1-9][0-9]*)\\})?\\]|(.[^\\[]*)/,e}();t.Grammar=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(t,e,n){this.element=t,this.onchange=e,this.magicBox=n,this.hasFocus=!1,this.underlay=document.createElement(\"div\"),this.underlay.className=\"magic-box-underlay\",t.appendChild(this.underlay),this.highlightContainer=document.createElement(\"span\"),this.highlightContainer.className=\"magic-box-highlight-container\",this.underlay.appendChild(this.highlightContainer),this.ghostTextContainer=document.createElement(\"span\"),this.ghostTextContainer.className=\"magic-box-ghost-text\",this.underlay.appendChild(this.ghostTextContainer),this.input=document.createElement(\"input\"),this.input.spellcheck=!1,this.input.setAttribute(\"form\",\"coveo-dummy-form\"),t.appendChild(this.input),this.setupHandler()}return e.prototype.updateInput=function(){this.input.value!=this.result.input&&(this.input.value=this.result.input)},e.prototype.updateHighlight=function(){this.highlightContainer.innerHTML=\"\",this.highlightContainer.appendChild(this.result.toHtmlElement())},e.prototype.updateWordCompletion=function(){this.ghostTextContainer.innerHTML=\"\",null!=this.wordCompletion&&this.ghostTextContainer.appendChild(document.createTextNode(this.wordCompletion.substr(this.result.input.length)))},e.prototype.updateScroll=function(e){var n=this;void 0===e&&(e=!0);var s=function(){n.underlay.clientWidth<n.underlay.scrollWidth&&(n.underlay.style.visibility=\"hidden\",n.underlay.scrollLeft=n.input.scrollLeft,n.underlay.scrollTop=n.input.scrollTop,n.underlay.style.visibility=\"visible\"),n.updateScrollDefer=null,n.hasFocus&&n.updateScroll()};e?null==this.updateScrollDefer&&(this.updateScrollDefer=t.requestAnimationFrame(s)):s()},e.prototype.setResult=function(t,e){this.result=t,this.updateInput(),this.updateHighlight(),_.isUndefined(e)&&null!=this.wordCompletion&&0==this.wordCompletion.indexOf(this.result.input)?this.updateWordCompletion():this.setWordCompletion(e),this.updateScroll()},e.prototype.setWordCompletion=function(t){null!=t&&0!=t.toLowerCase().indexOf(this.result.input.toLowerCase())&&(t=null),this.wordCompletion=t,this.updateWordCompletion(),this.updateScroll()},e.prototype.setCursor=function(t){if(this.input.focus(),this.input.createTextRange){var e=this.input.createTextRange();e.move(\"character\",t),e.select()}else null!=this.input.selectionStart&&(this.input.focus(),this.input.setSelectionRange(t,t))},e.prototype.getCursor=function(){return this.input.selectionStart},e.prototype.setupHandler=function(){var t=this;this.input.onblur=function(){t.hasFocus=!1,setTimeout(function(){t.hasFocus||t.onblur&&t.onblur()},300),t.updateScroll()},this.input.onfocus=function(){t.hasFocus||(t.hasFocus=!0,t.updateScroll(),t.onfocus&&t.onfocus())},this.input.onkeydown=function(e){t.keydown(e)},this.input.onkeyup=function(e){t.keyup(e)},this.input.onclick=function(){t.onchangecursor()},this.input.select=function(){t.onchangecursor()},this.input.oncut=function(){setTimeout(function(){t.onInputChange()})},this.input.onpaste=function(){setTimeout(function(){t.onInputChange()})}},e.prototype.focus=function(){var t=this;this.hasFocus=!0,setTimeout(function(){t.input.focus()})},e.prototype.blur=function(){this.hasFocus&&this.input.blur()},e.prototype.keydown=function(e){var n=this;switch(e.keyCode||e.which){case 9:this.magicBox.hasSuggestions()&&e.preventDefault();break;default:e.stopPropagation(),null==this.onkeydown||this.onkeydown(e.keyCode||e.which)?t.requestAnimationFrame(function(){n.onInputChange()}):e.preventDefault()}},e.prototype.keyup=function(t){switch(t.keyCode||t.which){case 9:this.tabPress();break;case 37:case 39:this.onchangecursor();break;default:null==this.onkeydown||this.onkeyup(t.keyCode||t.which)?this.onInputChange():t.preventDefault()}},e.prototype.tabPress=function(){null!=this.wordCompletion&&(this.input.value=this.wordCompletion,this.ontabpress&&this.ontabpress(),this.onchange(this.wordCompletion,!0))},e.prototype.onInputChange=function(){this.result.input!=this.input.value&&this.onchange(this.input.value,!1)},e.prototype.getValue=function(){return this.input.value},e.prototype.getWordCompletion=function(){return this.wordCompletion},e}();t.InputManager=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e=function(){function e(e,n){var s=this;this.element=e,this.options=_.defaults(n,{selectableClass:\"magic-box-suggestion\",selectedClass:\"magic-box-selected\"}),void 0==this.options.timeout&&(this.options.timeout=500),this.hasSuggestions=!1,this.element.onmouseover=function(e){if(t.$$(e.target).hasClass(s.options.selectableClass)){for(var n=s.element.getElementsByClassName(s.options.selectedClass),i=0;i<n.length;i++){var o=n.item(i);t.$$(o).removeClass(s.options.selectedClass)}t.$$(e.target).addClass(s.options.selectedClass)}},this.element.onmouseout=function(e){t.$$(e.target).hasClass(s.options.selectableClass)&&t.$$(e.target).removeClass(s.options.selectedClass)}}return e.prototype.moveDown=function(){var e=this.element.getElementsByClassName(this.options.selectedClass).item(0),n=this.element.getElementsByClassName(this.options.selectableClass),s=-1;if(null!=e){t.$$(e).removeClass(this.options.selectedClass);for(var i=0;i<n.length;i++)if(e==n.item(i)){s=i;break}s=s==-1?0:s+1}else s=0;return e=n.item(s),null!=e&&t.$$(e).addClass(this.options.selectedClass),e&&e.suggestion},e.prototype.moveUp=function(){var e=this.element.getElementsByClassName(this.options.selectedClass).item(0),n=this.element.getElementsByClassName(this.options.selectableClass),s=-1;if(null!=e){t.$$(e).removeClass(this.options.selectedClass);for(var i=0;i<n.length;i++)if(e==n.item(i)){s=i;break}s=s==-1?n.length-1:s-1}else s=n.length-1;return e=n.item(s),null!=e&&t.$$(e).addClass(this.options.selectedClass),e&&e.suggestion},e.prototype.select=function(){var e=this.element.getElementsByClassName(this.options.selectedClass).item(0);return null!=e&&t.$$(e).trigger(\"keyboardSelect\"),e},e.prototype.mergeSuggestions=function(t,e){var n,s=this,i=[];t=_.compact(t);var o=this.pendingSuggestion=new Promise(function(e,r){_.each(t,function(t){var e=!1;setTimeout(function(){e=!0},s.options.timeout),t.then(function(t){!e&&t&&(i=i.concat(t))})});var u=function(){n&&clearTimeout(n),0==i.length?e([]):o==s.pendingSuggestion||null==s.pendingSuggestion?e(i.sort(function(t,e){return e.index-t.index})):r(\"new request queued\")};0==t.length&&u(),void 0==t&&u(),n=setTimeout(function(){u()},s.options.timeout),Promise.all(t).then(function(){return u()})});o.then(function(t){return e&&e(t),s.updateSuggestions(t),t})[\"catch\"](function(){return null})},e.prototype.updateSuggestions=function(e){var n=this;this.element.innerHTML=\"\",this.element.className=\"magic-box-suggestions\",_.each(e,function(e){var s=e.dom;if(s){t.$$(s).removeClass(n.options.selectedClass);var i=t.$$(s).find(\".\"+n.options.selectableClass);t.$$(i).removeClass(n.options.selectedClass)}else{if(s=document.createElement(\"div\"),s.className=\"magic-box-suggestion\",null!=e.html)s.innerHTML=e.html;else if(null!=e.text)s.appendChild(document.createTextNode(e.text));else if(null!=e.separator){s.className=\"magic-box-suggestion-seperator\";var o=document.createElement(\"div\");o.className=\"magic-box-suggestion-seperator-label\",o.appendChild(document.createTextNode(e.separator)),s.appendChild(o)}t.$$(s).on(\"click\",function(){e.onSelect()}),t.$$(s).on(\"keyboardSelect\",function(){e.onSelect()}),t.$$(s).addClass(n.options.selectableClass)}s.suggestion=e,n.element.appendChild(s)}),e.length>0?(t.$$(this.element).addClass(\"magic-box-hasSuggestion\"),this.hasSuggestions=!0):(t.$$(this.element).removeClass(\"magic-box-hasSuggestion\"),this.hasSuggestions=!1)},e}();t.SuggestionsManager=e}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(e){function n(t){return t.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\")}function s(t,e,s,o,r){if(void 0===s&&(s=!1),void 0===o&&(o=\"magic-box-hightlight\"),void 0===r&&(r=\"\"),0==e.length)return t;var u=n(e),a=\"(\"+u+\")|(.*?(?=\"+u+\")|.+)\",l=new RegExp(a,s?\"gi\":\"g\");return t.replace(l,function(t,e,n){return i(null!=e?o:r,t)})}var i=function(t,e){return'<span class=\"'+t+'\">'+_.escape(e)+\"</span>\"};e.highlightText=s;var o=function(){function e(t){this.el=t}return e.prototype.text=function(t){return t?void(void 0!=this.el.innerText?this.el.innerText=t:void 0!=this.el.textContent&&(this.el.textContent=t)):this.el.innerText||this.el.textContent},e.prototype.nodeListToArray=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t.item(e);return n},e.prototype.empty=function(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild)},e.prototype.show=function(){this.el.style.display=\"visible\"},e.prototype.hide=function(){this.el.style.display=\"none\"},e.prototype.toggle=function(t){void 0===t?\"visible\"==this.el.style.display?this.hide():this.show():t?this.show():this.hide()},e.prototype.find=function(t){return this.el.querySelector(t)},e.prototype.is=function(t){return this.el.tagName.toLowerCase()==t.toLowerCase()||(!(\".\"!=t[0]||!this.hasClass(t.substr(1)))||\"#\"==t[0]&&this.el.getAttribute(\"id\")==t.substr(1))},e.prototype.closest=function(e){for(var n=this.el,s=!1;!s&&(t.$$(n).hasClass(e)&&(s=!0),\"body\"!=n.tagName.toLowerCase())&&null!=n.parentElement;)s||(n=n.parentElement);if(s)return n},e.prototype.findAll=function(t){return this.nodeListToArray(this.el.querySelectorAll(t))},e.prototype.findClass=function(t){return\"getElementsByClassName\"in this.el?this.nodeListToArray(this.el.getElementsByClassName(t)):this.nodeListToArray(this.el.querySelectorAll(\".\"+t))},e.prototype.findId=function(t){return document.getElementById(t)},e.prototype.addClass=function(t){this.hasClass(t)||(this.el.className?this.el.className+=\" \"+t:this.el.className=t)},e.prototype.removeClass=function(t){this.el.className=this.el.className.replace(new RegExp(\"(^|\\\\s)\"+t+\"(\\\\s|\\\\b)\",\"g\"),\"$1\")},e.prototype.toggleClass=function(t,e){e?this.addClass(t):this.removeClass(t)},e.prototype.getClass=function(){return this.el.className.match(e.CLASS_NAME_REGEX)||[]},e.prototype.hasClass=function(t){return _.contains(this.getClass(),t)},e.prototype.detach=function(){this.el.parentElement&&this.el.parentElement.removeChild(this.el)},e.prototype.on=function(t,n){var s=this;if(_.isArray(t))_.each(t,function(t){s.on(t,n)});else{var i=this.getJQuery();if(i)i(this.el).on(t,n);else if(this.el.addEventListener){var o=function(t){n(t,t.detail)};e.handlers.push({eventHandle:n,fn:o}),this.el.addEventListener(t,o,!1)}else this.el.on&&this.el.on(\"on\"+t,n)}},e.prototype.one=function(t,e){var n=this;if(_.isArray(t))_.each(t,function(t){n.one(t,e)});else{var s=function(i){return n.off(t,s),e(i)};this.on(t,s)}},e.prototype.off=function(t,n){var s=this;if(_.isArray(t))_.each(t,function(t){s.off(t,n)});else{var i=this.getJQuery();if(i)i(this.el).off(t,n);else if(this.el.removeEventListener){var o=0,r=_.find(e.handlers,function(t,e){if(t.eventHandle==n)return o=e,!0});r&&(this.el.removeEventListener(t,r.fn,!1),e.handlers.splice(o,1))}else this.el.off&&this.el.off(\"on\"+t,n)}},e.prototype.trigger=function(t,e){var n=this.getJQuery();if(n)n(this.el).trigger(t,e);else if(void 0!==CustomEvent){var s=new CustomEvent(t,{detail:e,bubbles:!0});this.el.dispatchEvent(s)}},e.prototype.isEmpty=function(){return e.ONLY_WHITE_SPACE_REGEX.test(this.el.innerHTML)},e.prototype.isDescendant=function(t){for(var e=this.el.parentNode;null!=e;){if(e==t)return!0;e=e.parentNode}return!1},e.prototype.getJQuery=function(){return void 0!=window.jQuery&&window.jQuery},e.CLASS_NAME_REGEX=/-?[_a-zA-Z]+[_a-zA-Z0-9-]*/g,e.ONLY_WHITE_SPACE_REGEX=/^\\s*$/,e.handlers=[],e}();e.Dom=o}(e=t.Utils||(t.Utils={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){t.$$=function(e){return new t.Utils.Dom(e)}}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(e){function n(t,e,n,s){_.each(s.expressions,function(e){_.contains(t,e)||t.push(e)}),_.each(s.basicExpressions,function(t){_.contains(e,t)||e.push(t)}),_.each(s.grammars,function(t,e){if(e in n){if(!_.isArray(n[e])||!_.isArray(t))throw _.each(t,function(t){n[e].push(t)}),\"Can not merge \"+e+\"(\"+new String(t)+\" => \"+new String(n[e])+\")\";_.each(t,function(t){n[e].push(t)})}else n[e]=t})}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var s=[],i=[],o={Start:[\"Expressions\",\"Empty\"],Expressions:\"[OptionalSpaces][Expression][ExpressionsList*][OptionalSpaces]\",ExpressionsList:\"[Spaces][Expression]\",Expression:s,BasicExpression:i,OptionalSpaces:/ */,Spaces:/ +/,Empty:/(?!.)/},r=0;r<t.length;r++)n(s,i,o,t[r]),_.each(t[r].include,function(e){_.contains(t,e)||t.push(e)});return s.push(\"BasicExpression\"),{start:\"Start\",expressions:o}}function i(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=s.apply(this,e);return new t.Grammar(i.start,i.expressions)}e.Expressions=s,e.ExpressionsGrammar=i}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(e){e.notWordStart=\" ()[],$@'\\\"\",e.notInWord=\" ()[],:\",e.Basic={basicExpressions:[\"Word\",\"DoubleQuoted\"],grammars:{DoubleQuoted:'\"[NotDoubleQuote]\"',NotDoubleQuote:/[^\"]*/,SingleQuoted:\"'[NotSingleQuote]'\",NotSingleQuote:/[^']*/,Number:/[0-9]+/,Word:function(n,s,i){var o=new RegExp(\"[^\"+e.notWordStart.replace(/(.)/g,\"\\\\$1\")+\"][^\"+e.notInWord.replace(/(.)/g,\"\\\\$1\")+\"]*\"),r=n.match(o);null!=r&&0!=r.index&&(r=null);var u=new t.Result(null!=r?r[0]:null,i,n);return u.isSuccess()&&s&&n.length>u.value.length?new t.EndOfInputResult(u):u}}}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.SubExpression={basicExpressions:[\"SubExpression\"],grammars:{SubExpression:\"([Expressions])\"}}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.Date={grammars:{Date:\"[DateYear]/[DateMonth]/[DateDay]\",DateYear:/([0-9]{4})/,DateMonth:/(1[0-2]|0?[1-9])/,DateDay:/([1-2][0-9]|3[0-1]|0?[1-9])/,DateRange:\"[Date][Spaces?]..[Spaces?][Date]\",DateRelative:[\"DateRelativeNegative\",\"DateRelativeTerm\"],DateRelativeTerm:/now|today|yesterday/,DateRelativeNegative:\"[DateRelativeTerm][DateRelativeNegativeRef]\",DateRelativeNegativeRef:/([\\-\\+][0-9]+(s|m|h|d|mo|y))/},include:[t.Basic]}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.Field={basicExpressions:[\"FieldSimpleQuery\",\"FieldQuery\",\"Field\"],grammars:{FieldQuery:\"[Field][OptionalSpaces][FieldQueryOperation]\",FieldQueryOperation:[\"FieldQueryValue\",\"FieldQueryNumeric\"],FieldQueryValue:\"[FieldOperator][OptionalSpaces][FieldValue]\",FieldQueryNumeric:\"[FieldOperatorNumeric][OptionalSpaces][FieldValueNumeric]\",FieldSimpleQuery:\"[FieldName]:[OptionalSpaces][FieldValue]\",Field:\"@[FieldName]\",FieldName:/[a-zA-Z][a-zA-Z0-9\\.\\_]*/,FieldOperator:/==|=|<>/,FieldOperatorNumeric:/<=|>=|<|>/,FieldValue:[\"DateRange\",\"NumberRange\",\"DateRelative\",\"Date\",\"Number\",\"FieldValueList\",\"FieldValueString\"],FieldValueNumeric:[\"DateRelative\",\"Date\",\"Number\"],FieldValueString:[\"DoubleQuoted\",\"FieldValueNotQuoted\"],FieldValueList:\"([FieldValueString][FieldValueStringList*])\",FieldValueStringList:\"[FieldValueSeparator][FieldValueString]\",FieldValueSeparator:/ *, */,FieldValueNotQuoted:/[^ \\(\\),]+/,NumberRange:\"[Number][Spaces?]..[Spaces?][Number]\"},include:[t.Date,t.Basic]}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.QueryExtension={basicExpressions:[\"QueryExtension\"],grammars:{QueryExtension:\"$[QueryExtensionName]([QueryExtensionArguments])\",QueryExtensionName:/\\w+/,QueryExtensionArguments:\"[QueryExtensionArgumentList*][QueryExtensionArgument]\",QueryExtensionArgumentList:\"[QueryExtensionArgument][Spaces?],[Spaces?]\",QueryExtensionArgument:\"[QueryExtensionArgumentName]:[Spaces?][QueryExtensionArgumentValue]\",QueryExtensionArgumentName:/\\w+/,QueryExtensionArgumentValue:[\"SingleQuoted\",\"Expressions\"]},include:[t.Basic]}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.NestedQuery={basicExpressions:[\"NestedQuery\"],grammars:{NestedQuery:\"[[NestedField][OptionalSpaces][Expressions]]\",NestedField:\"[[Field]]\",FieldValue:[\"NestedQuery\"]},include:[t.Field]}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){var e;!function(t){t.Complete={include:[t.NestedQuery,t.QueryExtension,t.SubExpression,t.Field,t.Basic]}}(e=t.Grammars||(t.Grammars={}))}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));var Coveo;!function(t){var e;!function(t){function e(t,e,n){return new s(t,e,n)}function n(t){return\"requestAnimationFrame\"in window?window.requestAnimationFrame(t):setTimeout(t)}var s=function(){function e(e,n,s){var i=this;void 0===s&&(s={}),this.element=e,this.grammar=n,this.options=s,this.lastSuggestions=[],_.isUndefined(this.options.inline)&&(this.options.inline=!1),t.$$(e).addClass(\"magic-box\"),this.options.inline&&t.$$(e).addClass(\"magic-box-inline\"),this.result=this.grammar.parse(\"\"),this.displayedResult=this.result.clean(),this.clearDom=document.createElement(\"div\"),this.clearDom.className=\"magic-box-clear\",this.element.appendChild(this.clearDom);var o=document.createElement(\"div\");o.className=\"magic-box-icon\",this.clearDom.appendChild(o);var r=document.createElement(\"div\");r.className=\"magic-box-input\",e.appendChild(r),this.inputManager=new t.InputManager(r,function(t,e){e?(i.setText(t),i.onselect&&i.onselect(i.getFirstSuggestionText())):(i.setText(t),i.showSuggestion(),i.onchange&&i.onchange())},this),this.inputManager.ontabpress=function(){i.ontabpress&&i.ontabpress()},this.inputManager.setResult(this.displayedResult);var u=document.createElement(\"div\");u.className=\"magic-box-suggestions\",this.element.appendChild(u),this.suggestionsManager=new t.SuggestionsManager(u,{selectableClass:this.options.selectableSuggestionClass,selectedClass:this.options.selectedSuggestionClass,timeout:this.options.suggestionTimeout}),this.setupHandler()}return e.prototype.getResult=function(){return this.result},e.prototype.getDisplayedResult=function(){return this.displayedResult},e.prototype.setText=function(e){t.$$(this.element).toggleClass(\"magic-box-notEmpty\",e.length>0),this.result=this.grammar.parse(e),this.displayedResult=this.result.clean(),this.inputManager.setResult(this.displayedResult)},e.prototype.setCursor=function(t){this.inputManager.setCursor(t)},e.prototype.getCursor=function(){return this.inputManager.getCursor()},e.prototype.resultAtCursor=function(t){return this.displayedResult.resultAt(this.getCursor(),t)},e.prototype.setupHandler=function(){var e=this;this.inputManager.onblur=function(){t.$$(e.element).removeClass(\"magic-box-hasFocus\"),e.onblur&&e.onblur(),e.options.inline||e.clearSuggestion()},this.inputManager.onfocus=function(){t.$$(e.element).addClass(\"magic-box-hasFocus\"),e.showSuggestion(),e.onfocus&&e.onfocus();\n},this.inputManager.onkeydown=function(t){if(38==t||40==t)return!1;if(13==t){var n=e.suggestionsManager.select();return null==n&&e.onsubmit&&e.onsubmit(),!1}return 27==t&&e.clearSuggestion(),!0},this.inputManager.onchangecursor=function(){e.showSuggestion()},this.inputManager.onkeyup=function(t){if(38==t)e.onmove&&e.onmove(),e.focusOnSuggestion(e.suggestionsManager.moveUp()),e.onchange&&e.onchange();else{if(40!=t)return!0;e.onmove&&e.onmove(),e.focusOnSuggestion(e.suggestionsManager.moveDown()),e.onchange&&e.onchange()}return!1},this.clearDom.onclick=function(){e.clear()}},e.prototype.showSuggestion=function(){var t=this;this.suggestionsManager.mergeSuggestions(null!=this.getSuggestions?this.getSuggestions():[],function(e){t.updateSuggestion(e)})},e.prototype.updateSuggestion=function(t){var e=this;this.lastSuggestions=t;var n=this.getFirstSuggestionText();this.inputManager.setWordCompletion(n&&n.text),this.onsuggestions&&this.onsuggestions(t),_.each(t,function(t){null==t.onSelect&&null!=t.text&&(t.onSelect=function(){e.setText(t.text),e.onselect&&e.onselect(t)})})},e.prototype.focus=function(){t.$$(this.element).addClass(\"magic-box-hasFocus\"),this.inputManager.focus()},e.prototype.blur=function(){this.inputManager.blur()},e.prototype.clearSuggestion=function(){var t=this;this.suggestionsManager.mergeSuggestions([],function(e){t.updateSuggestion(e)}),this.inputManager.setWordCompletion(null)},e.prototype.focusOnSuggestion=function(t){null==t||null==t.text?(t=this.getFirstSuggestionText(),this.inputManager.setResult(this.displayedResult,t&&t.text)):this.inputManager.setResult(this.grammar.parse(t.text).clean(),t.text)},e.prototype.getFirstSuggestionText=function(){return _.find(this.lastSuggestions,function(t){return null!=t.text})},e.prototype.getText=function(){return this.inputManager.getValue()},e.prototype.getWordCompletion=function(){return this.inputManager.getWordCompletion()},e.prototype.clear=function(){this.setText(\"\"),this.showSuggestion(),this.focus(),this.onclear&&this.onclear()},e.prototype.hasSuggestions=function(){return this.suggestionsManager.hasSuggestions},e}();t.Instance=s,t.create=e,t.requestAnimationFrame=n}(e=t.MagicBox||(t.MagicBox={}))}(Coveo||(Coveo={}));\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = Coveo.MagicBox;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/exports-loader?Coveo.MagicBox!./~/coveomagicbox/bin/MagicBox.min.js\n ** module id = 26\n ** module chunks = 0 1\n **/","!function(){\"use strict\";var t,e,n=\"undefined\",r=\"string\",i=self.navigator,o=String,a=Object.prototype.hasOwnProperty,l={},u={},s=!1,f=!0,c=/^\\s*application\\/(?:vnd\\.oftn\\.|x-)?l10n\\+json\\s*(?:$|;)/i,p=\"locale\",g=\"defaultLocale\",h=\"toLocaleString\",y=\"toLowerCase\",v=Array.prototype.indexOf||function(t){for(var e=this.length,n=0;e>n;n++)if(n in this&&this[n]===t)return n;return-1},d=function(e){var n=new t;return n.open(\"GET\",e,s),n.send(null),200!==n.status?(setTimeout(function(){var t=new Error(\"Unable to load localization data: \"+e);throw t.name=\"Localization Error\",t},0),{}):JSON.parse(n.responseText)},m=o[h]=function(t){if(arguments.length>0&&\"number\"!=typeof t)if(typeof t===r)m(d(t));else if(t===s)u={};else{var e,n,i;for(e in t)if(a.call(t,e)){if(n=t[e],e=e[y](),e in u&&n!==s||(u[e]={}),n===s)continue;if(typeof n===r){if(0!==o[p][y]().indexOf(e)){e in l||(l[e]=[]),l[e].push(n);continue}n=d(n)}for(i in n)a.call(n,i)&&(u[e][i]=n[i])}}return Function.prototype[h].apply(o,arguments)},w=function(t){for(var e,n=l[t],r=0,i=n.length;i>r;r++)e={},e[t]=d(n[r]),m(e);delete l[t]},b=o.prototype[h]=function(){var t,n=e,r=o[n?g:p],i=r[y]().split(\"-\"),a=i.length,c=this.valueOf();e=s;do if(t=i.slice(0,a).join(\"-\"),t in l&&w(t),t in u&&c in u[t])return u[t][c];while(a-->1);return!n&&o[g]?(e=f,b.call(c)):c};if(typeof XMLHttpRequest===n&&typeof ActiveXObject!==n){var L=ActiveXObject;t=function(){try{return new L(\"Msxml2.XMLHTTP.6.0\")}catch(t){}try{return new L(\"Msxml2.XMLHTTP.3.0\")}catch(e){}try{return new L(\"Msxml2.XMLHTTP\")}catch(n){}throw new Error(\"XMLHttpRequest not supported by this browser.\")}}else t=XMLHttpRequest;if(o[g]=o[g]||\"\",o[p]=i&&(i.language||i.userLanguage)||\"\",typeof document!==n)for(var T,M=document.getElementsByTagName(\"link\"),O=M.length;O--;){var X=M[O],x=(X.getAttribute(\"rel\")||\"\")[y]().split(/\\s+/);c.test(X.type)&&(-1!==v.call(x,\"localizations\")?m(X.getAttribute(\"href\")):-1!==v.call(x,\"localization\")&&(T={},T[(X.getAttribute(\"hreflang\")||\"\")[y]()]=X.getAttribute(\"href\"),m(T)))}}();\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = window.String.toLocaleString;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/exports-loader?window.String.toLocaleString!./lib/l10n.min.js\n ** module id = 27\n ** module chunks = 0 1\n **/","export {Assert} from './misc/Assert';\nexport {Cache} from './misc/Cache';\nexport {Defer} from './misc/Defer';\nexport {L10N} from './misc/L10N';\nexport {Logger} from './misc/Logger';\nexport {Options} from './misc/Options';\nexport {l} from './strings/Strings';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/MiscModules.ts\n **/","export class Cache<Type> {\n  constructor(public onEmpty?: () => Type) {\n  }\n\n  private cache: Type[] = [];\n\n  public get(): Type {\n    if (this.cache.length == 0) {\n      return this.onEmpty();\n    } else {\n      return this.cache.pop();\n    }\n  }\n\n  public push(value: Type) {\n    this.cache.push(value);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/misc/Cache.ts\n **/","export class Defer {\n  private static functions = [];\n\n  static defer(code: () => void) {\n    Defer.functions.push(code);\n    Defer.arm();\n  }\n\n  static flush() {\n    while (Defer.popOne()) {\n    }\n  }\n\n  private static arm() {\n    _.defer(() => {\n      if (Defer.popOne()) {\n        Defer.arm();\n      }\n    });\n  }\n\n  private static popOne() {\n    if (Defer.functions.length > 0) {\n      var fun = Defer.functions[0];\n      Defer.functions = _.rest(Defer.functions);\n      fun();\n      return Defer.functions.length > 0;\n    } else {\n      return false;\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/misc/Defer.ts\n **/","import {LocaleString} from '../ExternalModulesShim';\n\nString.toLocaleString = LocaleString;\nconst pluralRegex = /<pl>(((?!<\\/pl>).)*)<\\/pl>/g;\nconst singularRegex = /<sn>(((?!<\\/sn>).)*)<\\/sn>/g;\n\nexport var L10N = {\n  format: (key: string, ...args: any[]) => {\n    let value = key.toLocaleString();\n    if (args.length > 0) {\n      let last = _.last(args);\n      // Last argument is either the count or a boolean forcing plural (true) or singular (false)\n      if (_.isBoolean(last) || _.isNumber(last)) {\n        args.pop();\n        value = L10N.formatPlSn(value, last);\n      }\n      _.each(args, (arg, i) => value = value.replace(`{${i}}`, arg));\n    }\n    return value;\n  },\n  formatPlSn: (value: string, count: number | boolean) => {\n    let isPlural = _.isBoolean(count) ? count : count > 1;\n    if (isPlural) {\n      value = value.replace(pluralRegex, '$1').replace(singularRegex, '');\n    } else {\n      value = value.replace(pluralRegex, '').replace(singularRegex, '$1');\n    }\n    return value;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/misc/L10N.ts\n **/","import {Utils} from '../utils/Utils';\n\nexport class Options {\n  public merge<T>(provided: T): T {\n    return _.extend({}, this, provided);\n  }\n\n  public mergeDeep<T>(provided: T): T {\n    return _.extend({}, Utils.extendDeep(this, provided));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/misc/Options.ts\n **/","import { L10N } from '../misc/L10N';\nexport function l(str : \"Unknown\");\nexport function l(str : \"And\");\nexport function l(str : \"Authenticating\" , param0: string);\nexport function l(str : \"Clear\" , param0: string);\nexport function l(str : \"CompleteQuery\");\nexport function l(str : \"Exclude\" , param0: string);\nexport function l(str : \"EnterTag\");\nexport function l(str : \"Next\");\nexport function l(str : \"Last\");\nexport function l(str : \"Link\");\nexport function l(str : \"Or\");\nexport function l(str : \"Previous\");\nexport function l(str : \"QueryDidntMatchAnyDocuments\");\nexport function l(str : \"QueryException\" , param0: string);\nexport function l(str : \"Me\");\nexport function l(str : \"Remove\");\nexport function l(str : \"Search\");\nexport function l(str : \"SearchFor\" , param0: string);\nexport function l(str : \"ShareQuery\");\nexport function l(str : \"Preferences\");\nexport function l(str : \"LinkOpeningSettings\");\nexport function l(str : \"Reauthenticate\" , param0: string);\nexport function l(str : \"ResultsFilteringExpression\");\nexport function l(str : \"FiltersInYourPreferences\");\nexport function l(str : \"Create\");\nexport function l(str : \"SearchIn\" , param0: string);\nexport function l(str : \"Seconds\" , param0: string, count: number);\nexport function l(str : \"ShowingResultsOf\" , param0: string, param1: string, param2: string, count: number);\nexport function l(str : \"SwitchTo\" , param0: string);\nexport function l(str : \"Unexclude\" , param0: string);\nexport function l(str : \"ClearAllFilters\");\nexport function l(str : \"SkipLogin\");\nexport function l(str : \"LoginInProgress\");\nexport function l(str : \"Login\");\nexport function l(str : \"GetStarted\");\nexport function l(str : \"More\");\nexport function l(str : \"NMore\" , param0: string);\nexport function l(str : \"Less\");\nexport function l(str : \"Settings\");\nexport function l(str : \"Score\");\nexport function l(str : \"ScoreDescription\");\nexport function l(str : \"Occurrences\");\nexport function l(str : \"OccurrencesDescription\");\nexport function l(str : \"Label\");\nexport function l(str : \"Of\");\nexport function l(str : \"LabelDescription\");\nexport function l(str : \"Value\");\nexport function l(str : \"ValueDescription\");\nexport function l(str : \"AlphaAscending\");\nexport function l(str : \"AlphaDescending\");\nexport function l(str : \"ChiSquare\");\nexport function l(str : \"Nosort\");\nexport function l(str : \"RelativeFrequency\");\nexport function l(str : \"RelativeFrequencyDescription\");\nexport function l(str : \"DateDistribution\");\nexport function l(str : \"Custom\");\nexport function l(str : \"CustomDescription\");\nexport function l(str : \"ComputedField\");\nexport function l(str : \"Ascending\");\nexport function l(str : \"Descending\");\nexport function l(str : \"noResultFor\" , param0: string);\nexport function l(str : \"autoCorrectedQueryTo\" , param0: string);\nexport function l(str : \"didYouMean\" , param0: string);\nexport function l(str : \"SuggestedResults\");\nexport function l(str : \"SuggestedQueries\");\nexport function l(str : \"MostRelevantItems\");\nexport function l(str : \"AllItems\");\nexport function l(str : \"ShowLess\");\nexport function l(str : \"ShowMore\");\nexport function l(str : \"HideFacet\");\nexport function l(str : \"ShowFacet\");\nexport function l(str : \"AndOthers\" , param0: string, count: number);\nexport function l(str : \"Others\" , param0: string, count: number);\nexport function l(str : \"MostRelevantPosts\");\nexport function l(str : \"CompleteThread\");\nexport function l(str : \"ShowCompleteThread\");\nexport function l(str : \"ShowOnlyTopMatchingPosts\");\nexport function l(str : \"MostRelevantReplies\");\nexport function l(str : \"AllConversation\");\nexport function l(str : \"ShowAllConversation\");\nexport function l(str : \"ShowAllReplies\");\nexport function l(str : \"ShowOnlyMostRelevantReplies\");\nexport function l(str : \"Close\");\nexport function l(str : \"Open\");\nexport function l(str : \"OpenInOutlookWhenPossible\");\nexport function l(str : \"AlwaysOpenInNewWindow\");\nexport function l(str : \"Quickview\");\nexport function l(str : \"NoQuickview\");\nexport function l(str : \"ErrorReport\");\nexport function l(str : \"OopsError\");\nexport function l(str : \"ProblemPersists\");\nexport function l(str : \"GoBack\");\nexport function l(str : \"Reset\");\nexport function l(str : \"Retry\");\nexport function l(str : \"MoreInfo\");\nexport function l(str : \"Username\");\nexport function l(str : \"Password\");\nexport function l(str : \"PostedBy\");\nexport function l(str : \"CannotConnect\");\nexport function l(str : \"BadUserPass\");\nexport function l(str : \"PleaseEnterYourCredentials\" , param0: string);\nexport function l(str : \"PleaseEnterYourSearchPage\");\nexport function l(str : \"Collapse\");\nexport function l(str : \"Collapsable\");\nexport function l(str : \"Expand\");\nexport function l(str : \"Today\");\nexport function l(str : \"Yesterday\");\nexport function l(str : \"Tomorrow\");\nexport function l(str : \"Duration\" , param0: string);\nexport function l(str : \"IndexDuration\" , param0: string);\nexport function l(str : \"ProxyDuration\" , param0: string);\nexport function l(str : \"ClientDuration\" , param0: string);\nexport function l(str : \"Unavailable\");\nexport function l(str : \"Reply\");\nexport function l(str : \"ReplyAll\");\nexport function l(str : \"Forward\");\nexport function l(str : \"From\");\nexport function l(str : \"Caption\");\nexport function l(str : \"Expression\");\nexport function l(str : \"Tab\");\nexport function l(str : \"Tabs\");\nexport function l(str : \"EnterExpressionName\");\nexport function l(str : \"EnterExpressionToFilterWith\");\nexport function l(str : \"SelectTab\");\nexport function l(str : \"SelectAll\");\nexport function l(str : \"PageUrl\");\nexport function l(str : \"ErrorSavingToDevice\");\nexport function l(str : \"ErrorReadingFromDevice\");\nexport function l(str : \"AppIntro\");\nexport function l(str : \"TryDemo\");\nexport function l(str : \"ContactUs\");\nexport function l(str : \"NewToCoveo\");\nexport function l(str : \"LetUsHelpGetStarted\");\nexport function l(str : \"LikesThis\" , param0: string, count: number);\nexport function l(str : \"CannotConnectSearchPage\");\nexport function l(str : \"AreYouSureDeleteFilter\" , param0: string, param1: string);\nexport function l(str : \"OnlineHelp\");\nexport function l(str : \"Done\");\nexport function l(str : \"SaveFacetState\");\nexport function l(str : \"ClearFacetState\");\nexport function l(str : \"DisplayingTheOnlyMessage\");\nexport function l(str : \"NoNetworkConnection\");\nexport function l(str : \"UnknownConnection\");\nexport function l(str : \"EthernetConnection\");\nexport function l(str : \"WiFi\");\nexport function l(str : \"CELL\");\nexport function l(str : \"CELL_2G\");\nexport function l(str : \"CELL_3G\");\nexport function l(str : \"CELL_4G\");\nexport function l(str : \"Relevance\");\nexport function l(str : \"Date\");\nexport function l(str : \"Amount\");\nexport function l(str : \"QueryExceptionNoException\");\nexport function l(str : \"QueryExceptionInvalidSyntax\");\nexport function l(str : \"QueryExceptionInvalidCustomField\");\nexport function l(str : \"QueryExceptionInvalidDate\");\nexport function l(str : \"QueryExceptionInvalidExactPhrase\");\nexport function l(str : \"QueryExceptionInvalidDateOp\");\nexport function l(str : \"QueryExceptionInvalidNear\");\nexport function l(str : \"QueryExceptionInvalidWeightedNear\");\nexport function l(str : \"QueryExceptionInvalidTerm\");\nexport function l(str : \"QueryExceptionTooManyTerms\");\nexport function l(str : \"QueryExceptionWildcardTooGeneral\");\nexport function l(str : \"QueryExceptionInvalidSortField\");\nexport function l(str : \"QueryExceptionInvalidSmallStringOp\");\nexport function l(str : \"QueryExceptionRequestedResultsMax\");\nexport function l(str : \"QueryExceptionAggregatedMirrorDead\");\nexport function l(str : \"QueryExceptionAggregatedMirrorQueryTimeOut\");\nexport function l(str : \"QueryExceptionAggregatedMirrorInvalidBuildNumber\");\nexport function l(str : \"QueryExceptionAggregatedMirrorCannotConnect\");\nexport function l(str : \"QueryExceptionNotEnoughLeadingCharsWildcard\");\nexport function l(str : \"QueryExceptionSecurityInverterNotFound\");\nexport function l(str : \"QueryExceptionSecurityInverterAccessDenied\");\nexport function l(str : \"QueryExceptionAggregatedMirrorCannotImpersonate\");\nexport function l(str : \"QueryExceptionUnexpected\");\nexport function l(str : \"QueryExceptionAccessDenied\");\nexport function l(str : \"QueryExceptionSuperUserTokenInvalid\");\nexport function l(str : \"QueryExceptionSuperUserTokenExpired\");\nexport function l(str : \"QueryExceptionLicenseQueriesExpired\");\nexport function l(str : \"QueryExceptionLicenseSuperUserTokenNotSupported\");\nexport function l(str : \"QueryExceptionInvalidSession\");\nexport function l(str : \"QueryExceptionInvalidDocument\");\nexport function l(str : \"QueryExceptionSearchDisabled\");\nexport function l(str : \"FileType\");\nexport function l(str : \"ShowAttachment\");\nexport function l(str : \"OnFeed\" , param0: string);\nexport function l(str : \"Author\");\nexport function l(str : \"NoTitle\");\nexport function l(str : \"CurrentSelections\");\nexport function l(str : \"AllContent\");\nexport function l(str : \"CancelLastAction\");\nexport function l(str : \"SearchTips\");\nexport function l(str : \"CheckSpelling\");\nexport function l(str : \"TryUsingFewerKeywords\");\nexport function l(str : \"SelectFewerFilters\");\nexport function l(str : \"Document\");\nexport function l(str : \"Time\");\nexport function l(str : \"StartDate\");\nexport function l(str : \"StartTime\");\nexport function l(str : \"DurationTitle\");\nexport function l(str : \"UserQuery\");\nexport function l(str : \"ShowUserActions\");\nexport function l(str : \"NoData\");\nexport function l(str : \"EventType\");\nexport function l(str : \"GoToFullSearch\");\nexport function l(str : \"GoToEdition\");\nexport function l(str : \"RemoveContext\");\nexport function l(str : \"BoxAttachToCase\");\nexport function l(str : \"AttachToCase\");\nexport function l(str : \"Attach\");\nexport function l(str : \"Attached\");\nexport function l(str : \"Detach\");\nexport function l(str : \"Details\");\nexport function l(str : \"AdditionalFilters\");\nexport function l(str : \"SelectNonContextualSearch\");\nexport function l(str : \"CopyPasteToSupport\");\nexport function l(str : \"FollowQueryDescription\");\nexport function l(str : \"SearchAlerts_Panel\");\nexport function l(str : \"SearchAlerts_PanelDescription\");\nexport function l(str : \"SearchAlerts_PanelNoSearchAlerts\");\nexport function l(str : \"SearchAlerts_Fail\");\nexport function l(str : \"SearchAlerts_Type\");\nexport function l(str : \"SearchAlerts_Content\");\nexport function l(str : \"SearchAlerts_Actions\");\nexport function l(str : \"EmptyQuery\");\nexport function l(str : \"SearchAlerts_Type_followQuery\");\nexport function l(str : \"SearchAlerts_Type_followDocument\");\nexport function l(str : \"SearchAlerts_unFollowing\");\nexport function l(str : \"SearchAlerts_follow\");\nexport function l(str : \"SearchAlerts_followed\");\nexport function l(str : \"SearchAlerts_followQuery\");\nexport function l(str : \"Subscription_StopFollowingQuery\");\nexport function l(str : \"SearchAlerts_Frequency\");\nexport function l(str : \"SubscriptionsManageSubscriptions\");\nexport function l(str : \"SubscriptionsMessageFollowQuery\" , param0: string);\nexport function l(str : \"SubscriptionsMessageFollow\" , param0: string);\nexport function l(str : \"Expiration\");\nexport function l(str : \"Monthly\");\nexport function l(str : \"Daily\");\nexport function l(str : \"Monday\");\nexport function l(str : \"Tuesday\");\nexport function l(str : \"Wednesday\");\nexport function l(str : \"Thursday\");\nexport function l(str : \"Friday\");\nexport function l(str : \"Saturday\");\nexport function l(str : \"Sunday\");\nexport function l(str : \"StartTypingCaseForSuggestions\");\nexport function l(str : \"ExportToExcel\");\nexport function l(str : \"ExportToExcelDescription\");\nexport function l(str : \"CaseCreationNoResults\");\nexport function l(str : \"SortBy\");\nexport function l(str : \"BoxCreateArticle\");\nexport function l(str : \"Facets\");\nexport function l(str : \"AdvancedSearch\");\nexport function l(str : \"Keywords\");\nexport function l(str : \"AllTheseWords\");\nexport function l(str : \"ExactPhrase\");\nexport function l(str : \"AnyOfTheseWords\");\nexport function l(str : \"NoneOfTheseWords\");\nexport function l(str : \"Anytime\");\nexport function l(str : \"InTheLast\");\nexport function l(str : \"Days\");\nexport function l(str : \"Months\");\nexport function l(str : \"Between\");\nexport function l(str : \"Language\");\nexport function l(str : \"Size\");\nexport function l(str : \"AtLeast\");\nexport function l(str : \"AtMost\");\nexport function l(str : \"Contains\");\nexport function l(str : \"DoesNotContain\");\nexport function l(str : \"Matches\");\nexport function l(str : \"Bytes\");\nexport function l(str : \"objecttype_people\");\nexport function l(str : \"objecttype_message\");\nexport function l(str : \"objecttype_feed\");\nexport function l(str : \"objecttype_thread\");\nexport function l(str : \"objecttype_file\");\nexport function l(str : \"objecttype_board\");\nexport function l(str : \"objecttype_category\");\nexport function l(str : \"objecttype_account\");\nexport function l(str : \"objecttype_campaign\");\nexport function l(str : \"objecttype_case\");\nexport function l(str : \"objecttype_contact\");\nexport function l(str : \"objecttype_contract\");\nexport function l(str : \"objecttype_event\");\nexport function l(str : \"objecttype_lead\");\nexport function l(str : \"objecttype_solution\");\nexport function l(str : \"objecttype_task\");\nexport function l(str : \"objecttype_user\");\nexport function l(str : \"objecttype_attachment\");\nexport function l(str : \"objecttype_casecomment\");\nexport function l(str : \"objecttype_opportunity\");\nexport function l(str : \"objecttype_feeditem\");\nexport function l(str : \"objecttype_feedcomment\");\nexport function l(str : \"objecttype_note\");\nexport function l(str : \"objecttype_product\");\nexport function l(str : \"objecttype_partner\");\nexport function l(str : \"objecttype_kbdocumentation\");\nexport function l(str : \"objecttype_kbtechnicalarticle\");\nexport function l(str : \"objecttype_kbsolution\");\nexport function l(str : \"objecttype_kbknowledgearticle\");\nexport function l(str : \"objecttype_kbattachment\");\nexport function l(str : \"filetype_html\");\nexport function l(str : \"filetype_wiki\");\nexport function l(str : \"filetype_webscraperwebpage\");\nexport function l(str : \"filetype_image\");\nexport function l(str : \"filetype_folder\");\nexport function l(str : \"filetype_txt\");\nexport function l(str : \"filetype_zip\");\nexport function l(str : \"filetype_pdf\");\nexport function l(str : \"filetype_xml\");\nexport function l(str : \"filetype_doc\");\nexport function l(str : \"filetype_xls\");\nexport function l(str : \"filetype_ppt\");\nexport function l(str : \"filetype_video\");\nexport function l(str : \"filetype_youtube\");\nexport function l(str : \"filetype_saleforceitem\");\nexport function l(str : \"filetype_exchangemessage\");\nexport function l(str : \"filetype_exchangeappointment\");\nexport function l(str : \"filetype_exchangenote\");\nexport function l(str : \"filetype_exchangetask\");\nexport function l(str : \"filetype_exchangeperson\");\nexport function l(str : \"filetype_activedirperson\");\nexport function l(str : \"filetype_exchangeactivity\");\nexport function l(str : \"filetype_exchangecalendarmessage\");\nexport function l(str : \"filetype_exchangedocument\");\nexport function l(str : \"filetype_exchangerssfeed\");\nexport function l(str : \"filetype_exchangejunkmessage\");\nexport function l(str : \"filetype_exchangeofficecom\");\nexport function l(str : \"filetype_lithiummessage\");\nexport function l(str : \"filetype_lithiumthread\");\nexport function l(str : \"filetype_lithiumboard\");\nexport function l(str : \"filetype_lithiumcategory\");\nexport function l(str : \"filetype_lithiumcommunity\");\nexport function l(str : \"filetype_spportal\");\nexport function l(str : \"filetype_spsite\");\nexport function l(str : \"filetype_spuserprofile\");\nexport function l(str : \"filetype_sparea\");\nexport function l(str : \"filetype_spannouncement\");\nexport function l(str : \"filetype_spannouncementlist\");\nexport function l(str : \"filetype_spcontact\");\nexport function l(str : \"filetype_spcontactlist\");\nexport function l(str : \"filetype_spcustomlist\");\nexport function l(str : \"filetype_spdiscussionboard\");\nexport function l(str : \"filetype_spdiscussionboardlist\");\nexport function l(str : \"filetype_spdocumentlibrarylist\");\nexport function l(str : \"filetype_spevent\");\nexport function l(str : \"filetype_speventlist\");\nexport function l(str : \"filetype_spformlibrarylist\");\nexport function l(str : \"filetype_spissue\");\nexport function l(str : \"filetype_spissuelist\");\nexport function l(str : \"filetype_splink\");\nexport function l(str : \"filetype_splinklist\");\nexport function l(str : \"filetype_sppicturelibrarylist\");\nexport function l(str : \"filetype_spsurvey\");\nexport function l(str : \"filetype_spsurveylist\");\nexport function l(str : \"filetype_sptask\");\nexport function l(str : \"filetype_sptasklist\");\nexport function l(str : \"filetype_spagenda\");\nexport function l(str : \"filetype_spagendalist\");\nexport function l(str : \"filetype_spattendee\");\nexport function l(str : \"filetype_spattendeelist\");\nexport function l(str : \"filetype_spcustomgridlist\");\nexport function l(str : \"filetype_spdecision\");\nexport function l(str : \"filetype_spdecisionlist\");\nexport function l(str : \"filetype_spobjective\");\nexport function l(str : \"filetype_spobjectivelist\");\nexport function l(str : \"filetype_sptextbox\");\nexport function l(str : \"filetype_sptextboxlist\");\nexport function l(str : \"filetype_spthingstobring\");\nexport function l(str : \"filetype_spthingstobringlist\");\nexport function l(str : \"filetype_sparealisting\");\nexport function l(str : \"filetype_spmeetingserie\");\nexport function l(str : \"filetype_spmeetingserielist\");\nexport function l(str : \"filetype_spsitedirectory\");\nexport function l(str : \"filetype_spsitedirectorylist\");\nexport function l(str : \"filetype_spdatasource\");\nexport function l(str : \"filetype_spdatasourcelist\");\nexport function l(str : \"filetype_splisttemplatecataloglist\");\nexport function l(str : \"filetype_spwebpartcataloglist\");\nexport function l(str : \"filetype_spwebtemplatecataloglist\");\nexport function l(str : \"filetype_spworkspacepagelist\");\nexport function l(str : \"filetype_spunknownlist\");\nexport function l(str : \"filetype_spadministratortask\");\nexport function l(str : \"filetype_spadministratortasklist\");\nexport function l(str : \"filetype_spareadocumentlibrarylist\");\nexport function l(str : \"filetype_spblogcategory\");\nexport function l(str : \"filetype_spblogcategorylist\");\nexport function l(str : \"filetype_spblogcomment\");\nexport function l(str : \"filetype_spblogcommentlist\");\nexport function l(str : \"filetype_spblogpost\");\nexport function l(str : \"filetype_spblogpostlist\");\nexport function l(str : \"filetype_spdataconnectionlibrarylist\");\nexport function l(str : \"filetype_spdistributiongroup\");\nexport function l(str : \"filetype_spdistributiongrouplist\");\nexport function l(str : \"filetype_spipfslist\");\nexport function l(str : \"filetype_spkeyperformanceindicator\");\nexport function l(str : \"filetype_spkeyperformanceindicatorlist\");\nexport function l(str : \"filetype_splanguagesandtranslator\");\nexport function l(str : \"filetype_splanguagesandtranslatorlist\");\nexport function l(str : \"filetype_spmasterpagescataloglist\");\nexport function l(str : \"filetype_spnocodeworkflowlibrarylist\");\nexport function l(str : \"filetype_spprojecttask\");\nexport function l(str : \"filetype_spprojecttasklist\");\nexport function l(str : \"filetype_sppublishingpageslibrarylist\");\nexport function l(str : \"filetype_spreportdocumentlibrarylist\");\nexport function l(str : \"filetype_spreportlibrarylist\");\nexport function l(str : \"filetype_spslidelibrarylist\");\nexport function l(str : \"filetype_sptab\");\nexport function l(str : \"filetype_sptablist\");\nexport function l(str : \"filetype_sptranslationmanagementlibrarylist\");\nexport function l(str : \"filetype_spuserinformation\");\nexport function l(str : \"filetype_spuserinformationlist\");\nexport function l(str : \"filetype_spwikipagelibrarylist\");\nexport function l(str : \"filetype_spworkflowhistory\");\nexport function l(str : \"filetype_spworkflowhistorylist\");\nexport function l(str : \"filetype_spworkflowprocess\");\nexport function l(str : \"filetype_spworkflowprocesslist\");\nexport function l(str : \"filetype_sppublishingimageslibrarylist\");\nexport function l(str : \"filetype_spcirculation\");\nexport function l(str : \"filetype_spcirculationlist\");\nexport function l(str : \"filetype_spdashboardslibrarylist\");\nexport function l(str : \"filetype_spdataconnectionforperformancepointlibrarylist\");\nexport function l(str : \"filetype_sphealthreport\");\nexport function l(str : \"filetype_sphealthreportlist\");\nexport function l(str : \"filetype_sphealthrule\");\nexport function l(str : \"filetype_sphealthrulelist\");\nexport function l(str : \"filetype_spimedictionary\");\nexport function l(str : \"filetype_spimedictionarylist\");\nexport function l(str : \"filetype_spperformancepointcontent\");\nexport function l(str : \"filetype_spperformancepointcontentlist\");\nexport function l(str : \"filetype_spphonecallmemo\");\nexport function l(str : \"filetype_spphonecallmemolist\");\nexport function l(str : \"filetype_sprecordlibrarylist\");\nexport function l(str : \"filetype_spresource\");\nexport function l(str : \"filetype_spresourcelist\");\nexport function l(str : \"filetype_spprocessdiagramslibrarylist\");\nexport function l(str : \"filetype_spsitethemeslibrarylist\");\nexport function l(str : \"filetype_spsolutionslibrarylist\");\nexport function l(str : \"filetype_spwfpublibrarylist\");\nexport function l(str : \"filetype_spwhereabout\");\nexport function l(str : \"filetype_spwhereaboutlist\");\nexport function l(str : \"filetype_spdocumentlink\");\nexport function l(str : \"filetype_spdocumentset\");\nexport function l(str : \"filetype_spmicrofeedpost\");\nexport function l(str : \"filetype_spmicrofeedlist\");\nexport function l(str : \"filetype_splistfolder\");\nexport function l(str : \"filetype_youtubevideo\");\nexport function l(str : \"filetype_youtubeplaylistitem\");\nexport function l(...params : any[]);\nexport function l(...params : any[]) { return L10N.format.apply(this, arguments) };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/strings/Strings.ts\n **/","export {AnalyticsEndpoint} from './rest/AnalyticsEndpoint';\nexport {EndpointCaller} from './rest/EndpointCaller';\nexport {QueryError} from './rest/QueryError';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/RestModules.ts\n **/","import {Logger} from '../misc/Logger';\nimport {EndpointCaller, IEndpointCallerOptions} from '../rest/EndpointCaller';\nimport {IAPIAnalyticsVisitResponseRest} from './APIAnalyticsVisitResponse';\nimport {IErrorResponse} from '../rest/EndpointCaller';\nimport {IAPIAnalyticsSearchEventsResponse} from '../rest/APIAnalyticsSearchEventsResponse';\nimport {ISearchEvent} from '../rest/SearchEvent';\nimport {IClickEvent} from '../rest/ClickEvent';\nimport {IAPIAnalyticsEventResponse} from './APIAnalyticsEventResponse';\nimport {Assert} from '../misc/Assert';\nimport {ICustomEvent} from './CustomEvent';\nimport {ITopQueries} from './TopQueries';\nimport {QueryUtils} from '../utils/QueryUtils';\nimport {Cookie} from '../utils/CookieUtils';\nimport {ISuccessResponse} from '../rest/EndpointCaller';\nimport {IStringMap} from '../rest/GenericParam';\nimport {Promise} from 'es6-promise';\n\nexport interface IAnalyticsEndpointOptions {\n  token: string;\n  serviceUrl: string;\n  organization: string;\n}\n\nexport class AnalyticsEndpoint {\n  logger: Logger;\n\n  static DEFAULT_ANALYTICS_URI = 'https://usageanalytics.coveo.com';\n  static DEFAULT_ANALYTICS_VERSION = 'v15';\n  static CUSTOM_ANALYTICS_VERSION = undefined;\n  static VISITOR_COOKIE_TIME = 10000 * 24 * 60 * 60 * 1000;\n\n  static pendingRequest: Promise<any>;\n\n  private visitId: string;\n  private organization: string;\n  public endpointCaller: EndpointCaller;\n\n  constructor(public options: IAnalyticsEndpointOptions) {\n    this.logger = new Logger(this);\n\n    var endpointCallerOptions: IEndpointCallerOptions = {\n      accessToken: (this.options.token && this.options.token != '') ? this.options.token : null\n    };\n    this.endpointCaller = new EndpointCaller(endpointCallerOptions);\n    this.organization = options.organization;\n  }\n\n  public getCurrentVisitId(): string {\n    return this.visitId;\n  }\n\n  public getCurrentVisitIdPromise(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      if (this.getCurrentVisitId()) {\n        resolve(this.getCurrentVisitId());\n      } else {\n        var url = this.buildAnalyticsUrl('/analytics/visit');\n        this.getFromService<IAPIAnalyticsVisitResponseRest>(url, {})\n          .then((response: IAPIAnalyticsVisitResponseRest) => {\n            this.visitId = response.id;\n            resolve(this.visitId);\n          })\n          .catch((response: IErrorResponse) => {\n            reject(response);\n          });\n      }\n    });\n  }\n\n  public sendSearchEvents(searchEvents: ISearchEvent[]): Promise<IAPIAnalyticsSearchEventsResponse> {\n    if (searchEvents.length > 0) {\n      this.logger.info('Logging analytics search events', searchEvents);\n      return this.sendToService<ISearchEvent[], IAPIAnalyticsSearchEventsResponse>(searchEvents, 'searches', 'searchEvents');\n    }\n  }\n\n  public sendDocumentViewEvent(documentViewEvent: IClickEvent): Promise<IAPIAnalyticsEventResponse> {\n    Assert.exists(documentViewEvent);\n    this.logger.info('Logging analytics document view', documentViewEvent);\n    return this.sendToService(documentViewEvent, 'click', 'clickEvent');\n  }\n\n  public sendCustomEvent(customEvent: ICustomEvent) {\n    Assert.exists(customEvent);\n    this.logger.info('Logging analytics custom event', customEvent);\n    return this.sendToService(customEvent, 'custom', 'customEvent');\n  }\n\n  public getTopQueries(params: ITopQueries): Promise<string[]> {\n    var url = this.buildAnalyticsUrl('/stats/topQueries');\n    return this.getFromService<string[]>(url, params);\n  }\n\n  private sendToService<D, R>(data: D, path: string, paramName: string): Promise<R> {\n    var url = QueryUtils.mergePath(this.options.serviceUrl, '/rest/' + (AnalyticsEndpoint.CUSTOM_ANALYTICS_VERSION || AnalyticsEndpoint.DEFAULT_ANALYTICS_VERSION) + '/analytics/' + path);\n    var queryString = [];\n\n    if (this.organization) {\n      queryString.push('org=' + this.organization);\n    }\n    if (Cookie.get('visitorId')) {\n      queryString.push('visitor=' + encodeURIComponent(Cookie.get('visitorId')));\n    }\n\n    // We use pendingRequest because we don't want to have 2 request to analytics at the same time.\n    // Otherwise the cookie visitId won't be set correctly.\n    if (AnalyticsEndpoint.pendingRequest == null) {\n      AnalyticsEndpoint.pendingRequest = this.endpointCaller.call<R>({\n        errorsAsSuccess: false,\n        method: 'POST',\n        queryString: queryString,\n        requestData: data,\n        url: url,\n        responseType: 'text',\n        requestDataType: 'application/json'\n      }).then((res: ISuccessResponse<R>) => {\n        return this.handleAnalyticsEventResponse(<any>res.data);\n      }).finally(() => {\n        AnalyticsEndpoint.pendingRequest = null;\n      });\n      return AnalyticsEndpoint.pendingRequest;\n    } else {\n      return AnalyticsEndpoint.pendingRequest.finally(() => {\n        return this.sendToService<D, R>(data, path, paramName);\n      });\n    }\n  }\n\n  private getFromService<T>(url: string, params: IStringMap<string>): Promise<T> {\n    var paramsToSend = (this.options.token && this.options.token != '') ? _.extend({ 'access_token': this.options.token }, params) : params;\n    return this.endpointCaller.call<T>({\n      errorsAsSuccess: false,\n      method: 'GET',\n      queryString: this.options.organization ? ['org=' + encodeURIComponent(this.options.organization)] : [],\n      requestData: paramsToSend,\n      responseType: 'json',\n      url: url\n    }).then((res: ISuccessResponse<T>) => {\n      return res.data;\n    });\n  }\n\n  private handleAnalyticsEventResponse(response: IAPIAnalyticsEventResponse | IAPIAnalyticsSearchEventsResponse) {\n    var visitId: string;\n    var visitorId: string;\n\n    if (response['visitId']) {\n      visitId = response['visitId'];\n      visitorId = response['visitorId'];\n    } else if (response['searchEventResponses']) {\n      visitId = (<IAPIAnalyticsEventResponse>_.first(response['searchEventResponses'])).visitId;\n      visitorId = (<IAPIAnalyticsEventResponse>_.first(response['searchEventResponses'])).visitorId;\n    }\n\n    if (visitId) {\n      this.visitId = visitId;\n    }\n    if (visitorId) {\n      Cookie.set('visitorId', visitorId, AnalyticsEndpoint.VISITOR_COOKIE_TIME);\n    }\n\n    return response;\n  }\n\n\n  private buildAnalyticsUrl(path: string) {\n    return this.options.serviceUrl + '/rest/' + (AnalyticsEndpoint.CUSTOM_ANALYTICS_VERSION || AnalyticsEndpoint.DEFAULT_ANALYTICS_VERSION) + path;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rest/AnalyticsEndpoint.ts\n **/","// Code originally taken from : https://developers.livechatinc.com/blog/setting-cookies-to-subdomains-in-javascript/\nexport class Cookie {\n  private static prefix: string = 'coveo_';\n\n  static set(name: string, value: string, expiration?: number) {\n    let domain: string, domainParts: string[], date, expires: string, host: string;\n\n    if (expiration) {\n      date = new Date();\n      date.setTime(date.getTime() + expiration);\n      expires = '; expires=' + date.toGMTString();\n    } else {\n      expires = '';\n    }\n\n    host = location.hostname;\n    if (host.split('.').length === 1) {\n      // no '.' in a domain - it's localhost or something similar\n      document.cookie = this.prefix + name + '=' + value + expires + '; path=/';\n    } else {\n      // Remember the cookie on all subdomains.\n      //\n      // Start with trying to set cookie to the top domain.\n      // (example: if user is on foo.com, try to set\n      //  cookie to domain '.com')\n      //\n      // If the cookie will not be set, it means '.com'\n      // is a top level domain and we need to\n      // set the cookie to '.foo.com'\n      domainParts = host.split('.');\n      domainParts.shift();\n      domain = '.' + domainParts.join('.');\n\n      document.cookie = this.prefix + name + '=' + value + expires + '; path=/; domain=' + domain;\n\n      // check if cookie was successfuly set to the given domain\n      // (otherwise it was a Top-Level Domain)\n      if (Cookie.get(name) == null || Cookie.get(name) != value) {\n        // append '.' to current domain\n        domain = '.' + host;\n        document.cookie = this.prefix + name + '=' + value + expires + '; path=/; domain=' + domain;\n      }\n    }\n  }\n\n  static get(name: string) {\n    let nameEQ = this.prefix + name + '=';\n    let ca = document.cookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n      let c = ca[i];\n      while (c.charAt(0) == ' ') {\n        c = c.substring(1, c.length);\n      }\n\n      if (c.indexOf(nameEQ) == 0) {\n        return c.substring(nameEQ.length, c.length);\n      }\n    }\n    return null;\n  }\n\n  static erase(name: string) {\n    Cookie.set(name, '', -1);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/CookieUtils.ts\n **/","export {AdvancedSearchEvents} from './events/AdvancedSearchEvents';\nexport {AnalyticsEvents} from './events/AnalyticsEvents';\nexport {BreadcrumbEvents} from './events/BreadcrumbEvents';\nexport {DebugEvents} from './events/DebugEvents';\nexport {ImageResultListEvents} from './events/ImageResultListEvents';\nexport {InitializationEvents} from './events/InitializationEvents';\nexport {OmniboxEvents} from './events/OmniboxEvents';\nexport {PreferencesPanelEvents} from './events/PreferencesPanelEvents';\nexport {QueryEvents} from './events/QueryEvents';\nexport {ResultListEvents} from './events/ResultListEvents';\nexport {SearchAlertsEvents} from './events/SearchAlertEvents';\nexport {SettingsEvents} from './events/SettingsEvents';\nexport {SliderEvents} from './events/SliderEvents';\nexport {StandaloneSearchInterfaceEvents} from './events/StandaloneSearchInterfaceEvents';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/EventsModules.ts\n **/","import {IExternalAdvancedSearchSection} from '../ui/AdvancedSearch/AdvancedSearchInput';\nimport {IQueryOptions} from '../controllers/QueryController';\nimport {IQueryResults} from '../rest/QueryResults';\n\n/**\n * Argument sent to all handlers bound on {@link AdvancedSearchEvents.buildingAdvancedSearch}\n */\nexport interface IBuildingAdvancedSearchEventArgs {\n  /**\n   * Sections which external code can populate by pushing into this array.\n   */\n  sections: IExternalAdvancedSearchSection[];\n  /**\n   * An easy way to execute a new query.\n   * @param options\n   */\n  executeQuery: (options: IQueryOptions) => Promise<IQueryResults>;\n}\n\n/**\n * This static class is there to contains the different string definition for all the events related to the {@link AdvancedSearch} component.\n */\nexport class AdvancedSearchEvents {\n  /**\n   * Triggered when the advanced search component is being built.\n   *\n   * Allows external code to add new sections in the advanced search panel.\n   *\n   * All handlers bound will receive {@link IBuildingAdvancedSearchEventArgs} as an argument\n   * @type {string}\n   */\n  public static buildingAdvancedSearch = 'buildingAdvancedSearch';\n  public static executeAdvancedSearch = 'executeAdvancedSearch';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/AdvancedSearchEvents.ts\n **/","import {IAPIDocumentViewEvent} from '../rest/APIDocumentViewEvent';\nimport {IAPISearchEvent} from '../rest/APISearchEvent';\nimport {IAPICustomEvent} from '../rest/APICustomEvent';\n\nexport interface IAnalyticsSearchEventsArgs {\n  searchEvents: IAPISearchEvent[];\n}\n\nexport interface IAnalyticsDocumentViewEventArgs {\n  documentViewEvent: IAPIDocumentViewEvent;\n}\n\nexport interface IAnalyticsCustomEventArgs {\n  customEvent: IAPICustomEvent;\n}\n\nexport interface IChangeAnalyticsCustomDataEventArgs extends IChangeableAnalyticsDataObject {\n  type: string;\n  metaObject: IChangeableAnalyticsMetaObject;\n  actionType: string;\n  actionCause: string;\n}\n\nexport interface IChangeableAnalyticsMetaObject {\n  [name: string]: string;\n}\n\nexport interface IChangeableAnalyticsDataObject {\n  originLevel1: string;\n  originLevel2: string;\n  originLevel3: string;\n  language: string;\n}\n\nexport class AnalyticsEvents {\n  public static searchEvent = 'analyticsSearchEvent';\n  public static documentViewEvent = 'analyticsDocumentViewEvent';\n  public static customEvent = 'analyticsCustomEvent';\n  public static changeAnalyticsCustomData = 'changeAnalyticsCustomData';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/AnalyticsEvents.ts\n **/","/**\n * Represent an item to insert in the breadcrumb\n */\nexport interface IBreadcrumbItem {\n  /**\n   * The HTMLElement to insert in the breadcrumb\n   */\n  element: HTMLElement;\n}\n\n/**\n * Event triggered when populating the breadcrumb\n */\nexport interface IPopulateBreadcrumbEventArgs {\n  breadcrumbs: IBreadcrumbItem[];\n}\n\nexport interface IClearBreadcrumbEventArgs {\n}\n\n/**\n * This static class is there to contains the different string definition for all the events related to {@link Breadcrumb}.\n */\nexport class BreadcrumbEvents {\n  /**\n   * Triggered when the breadcrumb needs to update its content. External code can use this event to provide bits of HTML that should be included in the breadcrumb.\n   *\n   * All handlers bound to this event will receive a {@link IPopulateBreadcrumbEventArgs} as an argument.\n   */\n  public static populateBreadcrumb = 'populateBreadcrumb';\n  /**\n   * Triggered when the user clicks the Clear All button in the breadcrumb. When this event is raised, every filter that is included in the breadcrumb should be removed.\n   *\n   * This event does not provide custom event data.\n   */\n  public static clearBreadcrumb = 'clearBreadcrumb';\n  public static redrawBreadcrumb = 'redrawBreadcrumb';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/BreadcrumbEvents.ts\n **/","export class DebugEvents {\n  public static showDebugPanel = 'showDebugPanel';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/DebugEvents.ts\n **/","\nexport interface ICompletedImageResultsLayoutEventArgs {\n}\n\nexport class ImageResultListEvents {\n  public static imageResultsLayoutComplete = 'imageResultsLayoutComplete';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/ImageResultListEvents.ts\n **/","/**\n * This static class is there to contain the different string definitions for all the events related to initialization.\n *\n * Note that these events will only be triggered when the {@link init} function is called.\n *\n * This means these events are normally called only once when the search interface is initialized.\n */\nexport class InitializationEvents {\n  /**\n   * This event is triggered right before each components inside the search interface get initialized (eg: Before the constructor of each component is executed).\n   *\n   * The string value is `beforeInitialization`.\n   * @type {string}\n   */\n  public static beforeInitialization = 'beforeInitialization';\n  /**\n   * Triggered after the components are initialized (eg: After the constructor of each component is executed)\n   * but before their state is set from the hash portion of the URL (e.g., http://mysearchinterface#q=myQuery ).\n   *\n   * This is also before the first query is launched (if the {@link SearchInterface.options.autoTriggerQuery} is `true`).\n   *\n   * The string value is `afterComponentsInitialization`.\n   * @type {string}\n   */\n  public static afterComponentsInitialization = 'afterComponentsInitialization';\n  /**\n   * Triggered right before the state from the URL (e.g., http://mysearchinterface#q=myQuery ) gets applied in the interface.\n   *\n   * This will typically only be useful if the {@link SearchInterface.options.enableHistory} is set to `true`.\n   *\n   * The string value is `restoreHistoryState`.\n   * @type {string}\n   */\n  public static restoreHistoryState = 'restoreHistoryState';\n  /**\n   * Triggered right after the UI is fully initialized.\n   *\n   * Concretely this means that the constructor of each component has been executed, and that the state coming for the URL (e.g., http://mysearchinterface#q=myquery) has been applied.\n   *\n   * It is triggered *before* the first query is launched, and if the {@link SearchInterface.options.autoTriggerQuery} is `true`.\n   *\n   * The string value is `afterInitialization`.\n   * @type {string}\n   */\n  public static afterInitialization = 'afterInitialization';\n  /**\n   * This is triggered when the UI needs to be dynamically removed so that components can unbind any internal handlers they might have set globally on the window or the document.\n   *\n   * After this event has been executed, the search interface can be dynamically removed and all handlers can be considered cleanly removed.\n   *\n   * The string value is `nuke`.\n   * @type {string}\n   */\n  public static nuke = 'nuke';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/InitializationEvents.ts\n **/","import {IOmniboxData, IOmniboxDataRow} from '../ui/Omnibox/OmniboxInterface';\n\nexport interface IPopulateOmniboxEventArgs extends IOmniboxData {\n}\n\nexport interface IPopulateOmniboxEventRow extends IOmniboxDataRow {\n}\n\nexport interface IOmniboxPreprocessResultForQueryEventArgs {\n  result: Coveo.MagicBox.Result;\n}\n\nexport interface ICloseOmniboxEventArgs {\n}\n\nexport class OmniboxEvents {\n  public static populateOmnibox = 'populateOmnibox';\n  public static openOmnibox = 'openOmnibox';\n  public static closeOmnibox = 'closeOmnibox';\n\n  public static populateOmniboxSuggestions = 'populateOmniboxSuggestions';\n  public static omniboxPreprocessResultForQuery = 'omniboxPreprocessResultForQuery';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/OmniboxEvents.ts\n **/","\nexport interface ISavePreferencesEventArgs {\n}\n\nexport class PreferencesPanelEvents {\n  public static savePreferences = 'savePreferences';\n  public static exitPreferencesWithoutSave = 'exitPreferencesWithoutSave';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/PreferencesPanelEvents.ts\n **/","import {Component} from '../ui/Base/Component';\nimport {QueryBuilder} from '../ui/Base/QueryBuilder';\nimport {IQueryResults} from '../rest/QueryResults';\nimport {IQuery} from '../rest/Query';\nimport {ISearchEndpoint, IEndpointCallOptions} from '../rest/SearchEndpointInterface';\nimport {IEndpointError} from '../rest/EndpointError';\nimport {Promise} from 'es6-promise';\n\n/**\n * Argument sent to all handlers bound on {@link QueryEvents.newQuery}\n */\nexport interface INewQueryEventArgs {\n  /**\n   * Determine if the query is a \"search as you type\"\n   */\n  searchAsYouType: boolean;\n  /**\n   * If this property is set to true by any handlers, the query will not be executed.\n   */\n  cancel: boolean;\n  origin?: Component;\n}\n\n/**\n * Argument sent to all handlers bound on {@link QueryEvents.buildingQuery}\n */\nexport interface IBuildingQueryEventArgs {\n  /**\n   * Allow handlers to modify the query by using the {@link QueryBuilder}\n   */\n  queryBuilder: QueryBuilder;\n  /**\n   * Determine if the query is a \"search as you type\"\n   */\n  searchAsYouType: boolean;\n  /**\n   * If this property is set to true by any handlers, the query will not be executed.\n   */\n  cancel: boolean;\n}\n\n/**\n * Argument sent to all handlers bound on {@link QueryEvents.doneBuildingQuery}\n */\nexport interface IDoneBuildingQueryEventArgs {\n  /**\n   * Allow handlers to modify the query by using the {@link QueryBuilder}\n   */\n  queryBuilder: QueryBuilder;\n  /**\n   * Determine if the query is a \"search as you type\"\n   */\n  searchAsYouType: boolean;\n  /**\n   * If this property is set to true by any handlers, the query will not be executed.\n   */\n  cancel: boolean;\n}\n\n/**\n * Argument sent to all handlers bound on {@link QueryEvents.duringQuery}\n */\nexport interface IDuringQueryEventArgs {\n  /**\n   * The {@link QueryBuilder} that was used for the current query\n   */\n  queryBuilder: QueryBuilder;\n  /**\n   * The query that was just executed\n   */\n  query: IQuery;\n  /**\n   * A promises for the results that will be returned by the Search API\n   */\n  promise: Promise<IQueryResults>;\n  /**\n   * Determine if the query is a \"search as you type\"\n   */\n  searchAsYouType: boolean;\n}\n\n/**\n * Argument sent to all handlers bound on {@link QueryEvents.querySuccess}\n */\nexport interface IQuerySuccessEventArgs {\n  /**\n   * The query that was just executed\n   */\n  query: IQuery;\n  /**\n   * The results returned by the query that was executed\n   */\n  results: IQueryResults;\n  /**\n   * The {@link QueryBuilder} that was used for the current query\n   */\n  queryBuilder: QueryBuilder;\n  /**\n   * Determine if the query is a \"search as you type\"\n   */\n  searchAsYouType: boolean;\n}\n\n/**\n * Argument sent to all handlers bound on {@link QueryEvents.fetchMoreSuccess}\n */\nexport interface IFetchMoreSuccessEventArgs {\n  /**\n   * The query that was just executed\n   */\n  query: IQuery;\n  /**\n   * The results returned by the query that was executed\n   */\n  results: IQueryResults;\n  /**\n   * The {@link QueryBuilder} that was used for the current query\n   */\n  queryBuilder: QueryBuilder;\n  /**\n   * Determine if the query is a \"search as you type\"\n   */\n  searchAsYouType: boolean;\n}\n\n/**\n * Argument sent to all handlers bound on {@link QueryEvents.queryError}\n */\nexport interface IQueryErrorEventArgs {\n  /**\n   * The {@link QueryBuilder} that was used for the current query\n   */\n  queryBuilder: QueryBuilder;\n  /**\n   * The endpoint on which the error happened.\n   */\n  endpoint: ISearchEndpoint;\n  /**\n   * The query that was just executed\n   */\n  query: IQuery;\n  /**\n   * The error info / message itself.\n   */\n  error: IEndpointError;\n  /**\n   * Determine if the query is a \"search as you type\"\n   */\n  searchAsYouType: boolean;\n}\n\n/**\n * Argument sent to all handlers bound on {@link QueryEvents.preprocessResults}\n */\nexport interface IPreprocessResultsEventArgs {\n  /**\n   * The {@link QueryBuilder} that was used for the current query\n   */\n  queryBuilder: QueryBuilder;\n  /**\n   * The query that was just executed\n   */\n  query: IQuery;\n  /**\n   * The results returned by the query that was executed\n   */\n  results: IQueryResults;\n  /**\n   * Determine if the query is a \"search as you type\"\n   */\n  searchAsYouType: boolean;\n}\n\n/**\n * Argument sent to all handlers bound on {@link QueryEvents.preprocessMoreResults}\n */\nexport interface IPreprocessMoreResultsEventArgs {\n  /**\n   * The results returned by the query that was executed\n   */\n  results: IQueryResults;\n}\n\n/**\n * Argument sent to all handlers bound on {@link QueryEvents.noResults}\n */\nexport interface INoResultsEventArgs {\n  /**\n   * The {@link QueryBuilder} that was used for the current query\n   */\n  queryBuilder: QueryBuilder;\n  /**\n   * The query that was just executed\n   */\n  query: IQuery;\n  /**\n   * The results returned by the query that was executed\n   */\n  results: IQueryResults;\n  /**\n   * Determine if the query is a \"search as you type\"\n   */\n  searchAsYouType: boolean;\n  /**\n   * If set to true by any handler, the last query will automatically be re-executed again.\n   */\n  retryTheQuery: boolean;\n}\n\nexport interface IBuildingCallOptionsEventArgs {\n  options: IEndpointCallOptions;\n}\n\n/**\n * This static class is there to contains the different string definition for all the events related to query.\n *\n * Note that these events will only be triggered when the {@link QueryController.executeQuery} method is used, either directly or by using {@link executeQuery}\n */\nexport class QueryEvents {\n  /**\n   * Triggered when a new query is launched.\n   *\n   * All bound handlers will receive {@link INewQueryEventArgs} as an argument.\n   *\n   * The string value is `newQuery`.\n   * @type {string}\n   */\n  public static newQuery = 'newQuery';\n  /**\n   * Triggered when the query is being built.\n   *\n   * This is typically where all components will contribute their part to the {@link IQuery} using the {@link QueryBuilder}.\n   *\n   * All bound handlers will receive {@link IBuildingQueryEventArgs} as an argument.\n   *\n   * The string value is `buildingQuery`.\n   * @type {string}\n   */\n  public static buildingQuery = 'buildingQuery';\n  /**\n   * Triggered when the query is done being built.\n   *\n   * This is typically where the facet will add it's {@link IGroupByRequest} to the {@link IQuery}.\n   *\n   * All bound handlers will receive {@link IDoneBuildingQueryEventArgs} as an argument.\n   *\n   * The string value is `doneBuildingQuery`.\n   * @type {string}\n   */\n  public static doneBuildingQuery = 'doneBuildingQuery';\n  /**\n   * Triggered when the query is being executed on the Search API.\n   *\n   * All bound handlers will receive {@link IDuringQueryEventArgs} as an argument.\n   *\n   * The string value is `duringQuery`.\n   * @type {string}\n   */\n  public static duringQuery = 'duringQuery';\n  /**\n   * Triggered when more results are being fetched on the Search API (think : infinite scrolling, or pager).\n   *\n   * All bound handlers will receive {@link IDuringQueryEventArgs} as an argument.\n   *\n   * The string value is `duringFetchMoreQuery`.\n   * @type {string}\n   */\n  public static duringFetchMoreQuery = 'duringFetchMoreQuery';\n  /**\n   * Triggered when a query successfully returns from the Search API.\n   *\n   * All bound handlers will receive {@link IQuerySuccessEventArgs} as an argument.\n   *\n   * The string value is `querySuccess`.\n   * @type {string}\n   */\n  public static querySuccess = 'querySuccess';\n  /**\n   * Triggered when a more results were successfully returned from the Search API. (think : infinite scrolling, or pager).\n   *\n   * All bound handlers will receive {@link IFetchMoreSuccessEventArgs} as an argument.\n   *\n   * The string value is `fetchMoreSuccess`.\n   * @type {string}\n   */\n  public static fetchMoreSuccess = 'fetchMoreSuccess';\n  /**\n   * Triggered after the main query success event has finished executing.\n   *\n   * This is typically where facets will process the {@link IGroupByResult} and render themselves.\n   *\n   * All bound handlers will receive {@link IQuerySuccessEventArgs} as an argument.\n   *\n   * The string value is `deferredQuerySuccess`.\n   * @type {string}\n   */\n  public static deferredQuerySuccess = 'deferredQuerySuccess';\n  /**\n   * Triggered when there was an error executing a query on the Search API.\n   *\n   * All bound handlers will receive {@link IQueryErrorEventArgs} as an argument.\n   *\n   * The string value is `queryError`.\n   * @type {string}\n   */\n  public static queryError = 'queryError';\n  /**\n   * Triggered before the {@link QueryEvents.querySuccess} event.\n   *\n   * This allows external code to modify the results before rendering them.\n   *\n   * For example, the {@link Folding} component might use this event to construct a coherent parent child relationship between query results.\n   *\n   * All bound handlers will receive {@link IPreprocessResultsEventArgs} as an argument.\n   *\n   * The string value is `preprocessResults`.\n   * @type {string}\n   */\n  public static preprocessResults = 'preprocessResults';\n  /**\n   * Triggered before the {@link QueryEvents.fetchMoreSuccess} event.\n   *\n   * This allows external code to modify the results before rendering them.\n   *\n   * For example, the {@link Folding} component might use this event to construct a coherent parent child relationship between query results.\n   *\n   * All bound handlers will receive {@link IPreprocessResultsEventArgs} as an argument.\n   *\n   * The string value is `preprocessMoreResults`.\n   * @type {string}\n   */\n  public static preprocessMoreResults = 'preprocessMoreResults';\n  /**\n   * Triggered when there is no result for a particular query.\n   *\n   * All bound handlers will receive {@link INoResultsEventArgs} as an argument.\n   *\n   * The string value is `noResults`.\n   * @type {string}\n   */\n  public static noResults = 'noResults';\n  public static buildingCallOptions = 'buildingCallOptions';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/QueryEvents.ts\n **/","import {IQueryResult} from '../rest/QueryResult';\n\nexport interface IDisplayedNewResultEventArgs {\n  result: IQueryResult;\n  item: HTMLElement;\n}\n\nexport interface IDisplayedNewResultsEventArgs {\n}\n\nexport interface IOpenQuickviewEventArgs {\n  termsToHighlight: any;\n}\n\nexport class ResultListEvents {\n  public static newResultsDisplayed = 'newResultsDisplayed';\n  public static newResultDisplayed = 'newResultDisplayed';\n  public static openQuickview = 'openQuickview';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/ResultListEvents.ts\n **/","import {ISubscription} from '../rest/Subscription';\n\nexport interface ISearchAlertsEventArgs {\n  subscription: ISubscription;\n  dom?: HTMLElement;\n}\n\nexport interface ISearchAlertsFailEventArgs {\n  dom?: HTMLElement;\n}\n\nexport interface ISearchAlertsPopulateMessageEventArgs {\n  text: string[];\n}\n\nexport class SearchAlertsEvents {\n  public static searchAlertsCreated = 'searchAlertsCreated';\n  public static searchAlertsDeleted = 'searchAlertsDeleted';\n  public static searchAlertsFail = 'searchAlertsFail';\n  public static searchAlertsPopulateMessage = 'searchAlertsPopulateMessage';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/SearchAlertEvents.ts\n **/","export class SettingsEvents {\n  public static settingsPopulateMenu = 'settingsPopulateMenu';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/SettingsEvents.ts\n **/","export interface IGraphValueSelectedArgs {\n  start: any;\n  end: any;\n  value: any;\n}\n\nexport class SliderEvents {\n  public static startSlide = 'startSlide';\n  public static duringSlide = 'duringSlide';\n  public static endSlide = 'endSlide';\n  public static graphValueSelected = 'graphValueSelected';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/SliderEvents.ts\n **/","export interface IBeforeRedirectEventArgs {\n  searchPageUri: string;\n  cancel: boolean;\n}\n\nexport class StandaloneSearchInterfaceEvents {\n  public static beforeRedirect = 'beforeRedirect';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/StandaloneSearchInterfaceEvents.ts\n **/","export {ColorUtils} from './utils/ColorUtils';\nexport {Cookie} from './utils/CookieUtils';\nexport {CurrencyUtils} from './utils/CurrencyUtils';\nexport {DateUtils} from './utils/DateUtils';\nexport {DeviceUtils} from './utils/DeviceUtils';\nexport {Dom, $$} from './utils/Dom';\nexport {DomUtils} from './utils/DomUtils';\nexport {EmailActionsUtils} from './utils/EmailActionsUtils';\nexport {EmailUtils} from './utils/EmailUtils';\nexport {FeatureDetectionUtils} from './utils/FeatureDetectionUtils';\nexport {HashUtils} from './utils/HashUtils';\nexport {HighlightUtils, StringAndHoles} from './utils/HighlightUtils';\nexport {HTMLUtils} from './utils/HtmlUtils';\nexport {KEYBOARD, KeyboardUtils} from './utils/KeyboardUtils';\nexport {LocalStorageUtils} from './utils/LocalStorageUtils';\nexport {OSUtils, OS_NAME} from './utils/OSUtils';\nexport {PopupUtils} from './utils/PopupUtils';\nexport {QueryUtils} from './utils/QueryUtils';\nexport {StreamHighlightUtils} from './utils/StreamHighlightUtils';\nexport {StringUtils} from './utils/StringUtils';\nexport {TimeSpan} from './utils/TimeSpanUtils';\nexport {Utils} from './utils/Utils';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UtilsModules.ts\n **/","export class ColorUtils {\n  static hsvToRgb(h, s, v) {\n    var r, g, b;\n\n    var i = Math.floor(h * 6);\n    var f = h * 6 - i;\n    var p = v * (1 - s);\n    var q = v * (1 - f * s);\n    var t = v * (1 - (1 - f) * s);\n\n    switch (i % 6) {\n      case 0:\n        r = v, g = t, b = p;\n        break;\n      case 1:\n        r = q, g = v, b = p;\n        break;\n      case 2:\n        r = p, g = v, b = t;\n        break;\n      case 3:\n        r = p, g = q, b = v;\n        break;\n      case 4:\n        r = t, g = p, b = v;\n        break;\n      case 5:\n        r = v, g = p, b = q;\n        break;\n    }\n\n    return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n  }\n\n  static rgbToHsv(r, g, b) {\n    r = r / 255, g = g / 255, b = b / 255;\n    var max = Math.max(r, g, b),\n      min = Math.min(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max == 0 ? 0 : d / max;\n\n    if (max == min) {\n      h = 0; // achromatic\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n\n    return [h, s, v];\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/ColorUtils.ts\n **/","import {Assert} from '../misc/Assert';\nimport {Options} from '../misc/Options';\nimport {Utils} from '../utils/Utils';\nimport Globalize = require('globalize');\n\nexport interface ICurrencyToStringOptions {\n  decimals?: number;\n  symbol?: string;\n}\n\nclass DefaultCurrencyToStringOptions extends Options implements ICurrencyToStringOptions {\n  decimals: number = 0;\n  symbol: string;\n}\n\nexport class CurrencyUtils {\n  static currencyToString(value: number, options?: ICurrencyToStringOptions): string {\n    if (Utils.isNullOrUndefined(value)) {\n      return '';\n    }\n    value = Number(value);\n\n    Assert.isNumber(value);\n\n    options = new DefaultCurrencyToStringOptions().merge(options);\n\n    var currency = Globalize.culture().numberFormat.currency;\n    var backup = currency.symbol;\n\n    if (Utils.isNonEmptyString(options.symbol)) {\n      currency.symbol = options.symbol;\n    }\n\n    var str = Globalize.format(value, 'c' + options.decimals.toString());\n    currency.symbol = backup;\n\n    return str;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/CurrencyUtils.ts\n **/","import {Options} from '../misc/Options';\nimport {Utils} from './Utils';\nimport {l} from '../strings/Strings';\nimport {TimeSpan} from './TimeSpanUtils';\nimport Globalize = require('globalize');\n\nexport interface IDateToStringOptions {\n  now?: Date;\n  useTodayYesterdayAndTomorrow?: boolean;\n  useWeekdayIfThisWeek?: boolean;\n  omitYearIfCurrentOne?: boolean;\n  useLongDateFormat?: boolean;\n  includeTimeIfToday?: boolean;\n  includeTimeIfThisWeek?: boolean;\n  alwaysIncludeTime?: boolean;\n  predefinedFormat?: string;\n}\n\nclass DefaultDateToStringOptions extends Options implements IDateToStringOptions {\n  now: Date = new Date();\n  useTodayYesterdayAndTomorrow = true;\n  useWeekdayIfThisWeek = true;\n  omitYearIfCurrentOne = true;\n  useLongDateFormat = false;\n  includeTimeIfToday = true;\n  includeTimeIfThisWeek = true;\n  alwaysIncludeTime = false;\n  predefinedFormat: string = undefined;\n}\n\nexport class DateUtils {\n  static convertFromJsonDateIfNeeded(date: string): Date;\n  static convertFromJsonDateIfNeeded(date: number): Date;\n  static convertFromJsonDateIfNeeded(date: Date): Date;\n  static convertFromJsonDateIfNeeded(date: any): Date {\n    if (_.isDate(date)) {\n      return date;\n    } else if (date !== null && !isNaN(Number(date))) {\n      return new Date(Number(date));\n    } else if (_.isString(date)) {\n      return new Date(<string>date.replace('@', ' '));\n    } else {\n      return undefined;\n    }\n  }\n\n  static dateForQuery(date: Date): string {\n    return date.getFullYear() + '/' + DateUtils.padNumber((date.getMonth() + 1).toString()) + '/' + DateUtils.padNumber(date.getDate().toString());\n  }\n\n  private static padNumber(num: string, length: number = 2): string {\n    while (num.length < length) {\n      num = '0' + num;\n    }\n    return num;\n  }\n\n  static keepOnlyDatePart(date: Date): Date {\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n  }\n\n  static offsetDateByDays(date: Date, offset: number): Date {\n    var newDate = new Date(date.valueOf());\n    newDate.setDate(newDate.getDate() + offset);\n\n    return newDate;\n  }\n\n  static dateToString(d: Date, options?: IDateToStringOptions): string {\n    if (Utils.isNullOrUndefined(d)) {\n      return '';\n    }\n\n    options = new DefaultDateToStringOptions().merge(options);\n\n    var dateOnly = DateUtils.keepOnlyDatePart(d);\n\n    if (options.predefinedFormat) {\n      return Globalize.format(dateOnly, options.predefinedFormat);\n    }\n\n    var today = DateUtils.keepOnlyDatePart(options.now);\n    if (options.useTodayYesterdayAndTomorrow) {\n      if (dateOnly.valueOf() == today.valueOf()) {\n        return l('Today');\n      }\n      var tomorrow = DateUtils.offsetDateByDays(today, 1);\n      if (dateOnly.valueOf() == tomorrow.valueOf()) {\n        return l('Tomorrow');\n      }\n      var yesterday = DateUtils.offsetDateByDays(today, -1);\n      if (dateOnly.valueOf() == yesterday.valueOf()) {\n        return l('Yesterday');\n      }\n    }\n\n    var isThisWeek = Math.abs(TimeSpan.fromDates(dateOnly, today).getDays()) < 7;\n    if (options.useWeekdayIfThisWeek && isThisWeek) {\n      if (dateOnly.valueOf() > today.valueOf()) {\n        return l('Next') + ' ' + Globalize.format(dateOnly, 'dddd');\n      } else {\n        return l('Last') + ' ' + Globalize.format(dateOnly, 'dddd');\n      }\n    }\n\n    if (options.omitYearIfCurrentOne && dateOnly.getFullYear() === today.getFullYear()) {\n      return Globalize.format(dateOnly, 'M');\n    }\n\n    if (options.useLongDateFormat) {\n      return Globalize.format(dateOnly, 'D');\n    }\n\n    return Globalize.format(dateOnly, 'd');\n  }\n\n  static timeToString(date: Date, options?: IDateToStringOptions): string {\n    if (Utils.isNullOrUndefined(date)) {\n      return '';\n    }\n\n    return Globalize.format(date, 't');\n  }\n\n  static dateTimeToString(date: Date, options?: IDateToStringOptions): string {\n    if (Utils.isNullOrUndefined(date)) {\n      return '';\n    }\n\n    options = new DefaultDateToStringOptions().merge(options);\n\n    var today = DateUtils.keepOnlyDatePart(options.now);\n    var isThisWeek = Math.abs(TimeSpan.fromDates(date, today).getDays()) < 7;\n    var datePart = DateUtils.dateToString(date, options);\n    var dateWithoutTime = DateUtils.keepOnlyDatePart(date);\n\n    if (options.alwaysIncludeTime || (options.includeTimeIfThisWeek && isThisWeek) || (options.includeTimeIfToday && dateWithoutTime.valueOf() == today.valueOf())) {\n      return datePart + ', ' + DateUtils.timeToString(date);\n    } else {\n      return datePart;\n    }\n  }\n\n  static monthToString(month: number): string {\n    var date = new Date(1980, month);\n    return Globalize.format(date, 'MMMM');\n  }\n\n  static isValid(date: any) {\n    if (date instanceof Date) {\n      return !isNaN(date.getTime());\n    }\n    return false;\n  }\n\n  static timeBetween(from: Date, to: Date) {\n    if (Utils.isNullOrUndefined(from) || Utils.isNullOrUndefined(to)) {\n      return '';\n    }\n\n    return ('0' + ((to.getTime() - from.getTime()) / (1000 * 60 * 60)).toFixed()).slice(-2) +\n      ':' + ('0' + ((to.getTime() - from.getTime()) % (1000 * 60 * 60) / (1000 * 60)).toFixed()).slice(-2) +\n      ':' + ('0' + ((to.getTime() - from.getTime()) % (1000 * 60) / (1000)).toFixed()).slice(-2);\n  }\n}\n\n// Shim for IE8 Date.toISOString\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString\nif (!Date.prototype.toISOString) {\n  (function () {\n    function pad(nber) {\n      if (nber < 10) {\n        return '0' + nber;\n      }\n      return nber;\n    }\n\n    Date.prototype.toISOString = function () {\n      return this.getUTCFullYear() +\n        '-' + pad(this.getUTCMonth() + 1) +\n        '-' + pad(this.getUTCDate()) +\n        'T' + pad(this.getUTCHours()) +\n        ':' + pad(this.getUTCMinutes()) +\n        ':' + pad(this.getUTCSeconds()) +\n        '.' + (this.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) +\n        'Z';\n    };\n  } ());\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/DateUtils.ts\n **/","import {Utils} from '../utils/Utils';\nimport {JQueryUtils} from '../utils/JQueryutils';\nimport {Assert} from '../misc/Assert';\nimport {Logger} from '../misc/Logger';\n\nexport interface IOffset {\n  left: number;\n  top: number;\n}\n\n/**\n * This is essentially an helper class for dom manipulation.<br/>\n * This is intended to provide some basic functionality normally offered by jQuery.<br/>\n * To minimize the multiple jQuery conflict we have while integrating in various system, we implemented the very small subset that the framework needs.<br/>\n * See {@link $$}, which is a function that wraps this class constructor, for less verbose code.\n */\nexport class Dom {\n  private static CLASS_NAME_REGEX = /-?[_a-zA-Z]+[_a-zA-Z0-9-]*/g;\n  private static ONLY_WHITE_SPACE_REGEX = /^\\s*$/;\n\n  public el: HTMLElement;\n\n  /**\n   * Create a new Dom object with the given HTMLElement\n   * @param el The HTMLElement to wrap in a Dom object\n   */\n  constructor(el: HTMLElement) {\n    Assert.exists(el);\n    this.el = el;\n  }\n\n  private static handlers: { eventHandle: Function, fn: EventListener }[] = [];\n\n  /**\n   * Helper function to quickly create an HTMLElement\n   * @param type The type of the element (e.g. div, span)\n   * @param props The props (id, className, attributes) of the element<br/>\n   * Can be either specified in dashed-case strings ('my-attribute') or camelCased keys (myAttribute),\n   * the latter of which will automatically get replaced to dash-case.\n   * @param innerHTML The contents of the new HTMLElement, either in string form or as another HTMLElement\n   */\n  static createElement(type: string, props?: Object, ...children: Array<string | HTMLElement | Dom>): HTMLElement {\n    var elem: HTMLElement = document.createElement(type);\n\n    for (var key in props) {\n      if (key === 'className') {\n        elem.className = props['className'];\n      } else {\n        let attr = key.indexOf('-') !== -1 ? key : Utils.toDashCase(key);\n        elem.setAttribute(attr, props[key]);\n      }\n    }\n\n    _.each(children, (child: string | HTMLElement | Dom) => {\n      if (child instanceof HTMLElement) {\n        elem.appendChild(child);\n      } else if (_.isString(child)) {\n        elem.innerHTML += child;\n      } else if (child instanceof Dom) {\n        elem.appendChild(child.el);\n      }\n    });\n\n    return elem;\n  }\n\n  /**\n   * Adds the element to the children of the current element\n   * @param element The element to append\n   * @returns {string}\n   */\n  public append(element: HTMLElement) {\n    this.el.appendChild(element);\n  }\n\n  /**\n   * Get the css value of the specified property.<br/>\n   * @param property The property\n   * @returns {string}\n   */\n  public css(property: string): string {\n    if (this.el.style[property]) {\n      return this.el.style[property];\n    }\n    return window.getComputedStyle(this.el).getPropertyValue(property);\n  }\n\n  /**\n   * Get or set the text content of the HTMLElement.<br/>\n   * @param txt Optional. If given, this will set the text content of the element. If not, will return the text content.\n   * @returns {string}\n   */\n  public text(txt?: string): string {\n    if (Utils.isUndefined(txt)) {\n      return this.el.innerText || this.el.textContent;\n    } else {\n      if (this.el.innerText != undefined) {\n        this.el.innerText = txt;\n      } else if (this.el.textContent != undefined) {\n        this.el.textContent = txt;\n      }\n    }\n  }\n\n  /**\n   * Performant way to transform a NodeList to an array of HTMLElement, for manipulation<br/>\n   * http://jsperf.com/nodelist-to-array/72\n   * @param nodeList a {NodeList} to convert to an array\n   * @returns {HTMLElement[]}\n   */\n  public nodeListToArray(nodeList: NodeList): HTMLElement[] {\n    var i = nodeList.length;\n    var arr: HTMLElement[] = new Array(i);\n    while (i--) {\n      arr[i] = <HTMLElement>nodeList.item(i);\n    }\n    return arr;\n  }\n\n  /**\n   * Empty (remove all child) from the element;\n   */\n  public empty(): void {\n    while (this.el.firstChild) {\n      this.el.removeChild(this.el.firstChild);\n    }\n  }\n\n  /**\n   * Empty the element and all childs from the dom;\n   */\n  public remove(): void {\n    this.el.parentNode.removeChild(this.el);\n  }\n\n  /**\n   * Show the element;\n   */\n  public show(): void {\n    this.el.style.display = 'block';\n  }\n\n  /**\n   * Hide the element;\n   */\n  public hide(): void {\n    this.el.style.display = 'none';\n  }\n\n  /**\n   * Toggle the element visibility.<br/>\n   * Optional visible parameter, if specified will set the element visibility\n   * @param visible Optional parameter to display or hide the element\n   */\n  public toggle(visible?: boolean): void {\n    if (visible === undefined) {\n      if (this.el.style.display == 'block') {\n        this.hide();\n      } else {\n        this.show();\n      }\n    } else {\n      if (visible) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    }\n  }\n\n  /**\n   * Returns the value of the specified attribute.\n   * @param name The name of the attribute\n   */\n  public getAttribute(name: string): string {\n    return this.el.getAttribute(name);\n  }\n\n  /**\n   * Sets the value of the specified attribute.\n   * @param name The name of the attribute\n   * @param value The value to set\n   */\n  public setAttribute(name: string, value: string) {\n    this.el.setAttribute(name, value);\n  }\n\n  /**\n   * Find a child element, given a CSS selector\n   * @param selector A CSS selector, can be a .className or #id\n   * @returns {HTMLElement}\n   */\n  public find(selector: string): HTMLElement {\n    return <HTMLElement>this.el.querySelector(selector);\n  }\n\n  /**\n   * Check if the element match the selector.<br/>\n   * The selector can be a class, an id or a tag.<br/>\n   * Eg : .is('.foo') or .is('#foo') or .is('div').\n   */\n  public is(selector: string): boolean {\n    if (this.el.tagName.toLowerCase() == selector.toLowerCase()) {\n      return true;\n    }\n    if (selector[0] == '.') {\n      if (this.hasClass(selector.substr(1))) {\n        return true;\n      }\n    }\n\n    if (selector[0] == '#') {\n      if (this.el.getAttribute('id') == selector.substr(1)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Get the first element that matches the classname by testing the element itself and traversing up through its ancestors in the DOM tree.\n   *\n   * Stops at the body of the document\n   * @param className A CSS classname\n   */\n  public closest(className: string): HTMLElement {\n    return this.traverseAncestorForClass(this.el, className);\n  }\n\n  /**\n   * Get the first element that matches the classname by testing the element itself and traversing up through its ancestors in the DOM tree.\n   *\n   * Stops at the body of the document\n   * @returns {any}\n   */\n  public parent(className: string): HTMLElement {\n    if (this.el.parentElement == undefined) {\n      return undefined;\n    }\n    return this.traverseAncestorForClass(this.el.parentElement, className);\n  }\n\n  /**\n   *  Get all the ancestors of the current element that match the given className\n   *\n   *  Return an empty array if none found.\n   * @param className\n   * @returns {HTMLElement[]}\n   */\n  public parents(className: string): HTMLElement[] {\n    let parentsFound = [];\n    let parentFound = this.parent(className);\n    while (parentFound) {\n      parentsFound.push(parentFound);\n      parentFound = new Dom(parentFound).parent(className);\n    }\n    return parentsFound;\n  }\n\n  /**\n   * Return all children\n   * @returns {HTMLElement[]}\n   */\n  public children(): HTMLElement[] {\n    return this.nodeListToArray(this.el.children);\n  }\n\n  /**\n   * Return all siblings\n   * @returns {HTMLElement[]}\n   */\n  public siblings(selector: string): HTMLElement[] {\n    let sibs = [];\n    let currentElement = <HTMLElement>this.el.parentNode.firstChild;\n    for (; currentElement; currentElement = <HTMLElement>currentElement.nextSibling) {\n      if (currentElement != this.el) {\n        if (this.matches(currentElement, selector) || !selector) {\n          sibs.push(currentElement);\n        }\n      }\n    }\n    return sibs;\n  }\n\n  private matches(element: HTMLElement, selector: string) {\n    var all = document.querySelectorAll(selector);\n    for (var i = 0; i < all.length; i++) {\n      if (all[i] === element) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Find all children that match the given CSS selector\n   * @param selector A CSS selector, can be a .className\n   * @returns {HTMLElement[]}\n   */\n  public findAll(selector: string): HTMLElement[] {\n    return this.nodeListToArray(this.el.querySelectorAll(selector));\n  }\n\n  /**\n   * Find the child elements using a className\n   * @param className Class of the childs elements to find\n   * @returns {HTMLElement[]}\n   */\n  public findClass(className: string): HTMLElement[] {\n    if ('getElementsByClassName' in this.el) {\n      return this.nodeListToArray(this.el.getElementsByClassName(className));\n    }\n    // For ie 8\n    return this.nodeListToArray(this.el.querySelectorAll('.' + className));\n  }\n\n  /**\n   * Find an element using an ID\n   * @param id ID of the element to find\n   * @returns {HTMLElement}\n   */\n  public findId(id: string): HTMLElement {\n    return document.getElementById(id);\n  }\n\n  /**\n   * Add a class to the element. Takes care of not adding the same class if the element already has it.\n   * @param className Classname to add to the element\n   */\n  public addClass(classNames: string[]): void;\n  public addClass(className: string): void;\n  public addClass(className: any): void {\n    if (_.isArray(className)) {\n      _.each(className, (name: string) => {\n        this.addClass(name);\n      });\n    } else {\n      if (!this.hasClass(className)) {\n        if (this.el.className) {\n          this.el.className += ' ' + className;\n        } else {\n          this.el.className = className;\n        }\n      }\n    }\n  }\n\n  /**\n   * Remove the class on the element. Works even if the element does not possess the class.\n   * @param className Classname to remove on the the element\n   */\n  public removeClass(className: string): void {\n    this.el.className = this.el.className.replace(new RegExp(`(^|\\\\s)${className}(\\\\s|\\\\b)`, 'g'), '$1').trim();\n  }\n\n  /**\n   * Toggle the class on the element.\n   * @param className Classname to toggle\n   * @swtch If true, add the class regardless and if false, remove the class\n   */\n  public toggleClass(className: string, swtch?: boolean): void {\n    if (Utils.isNullOrUndefined(swtch)) {\n      if (this.hasClass(className)) {\n        this.removeClass(className);\n      } else {\n        this.addClass(className);\n      }\n    } else {\n      if (swtch) {\n        this.addClass(className);\n      } else {\n        this.removeClass(className);\n      }\n    }\n  }\n\n  /**\n   * Sets the inner html of the element\n   * @param html The html to set\n   */\n  public setHtml(html: string) {\n    this.el.innerHTML = html;\n  }\n\n  /**\n   * Return an array with all the classname on the element. Empty array if the element has not classname\n   * @returns {any|Array}\n   */\n  public getClass(): string[] {\n    return this.el.className.match(Dom.CLASS_NAME_REGEX) || [];\n  }\n\n  /**\n   * Check if the element has the given class name\n   * @param className Classname to verify\n   * @returns {boolean}\n   */\n  public hasClass(className: string): boolean {\n    return _.contains(this.getClass(), className);\n  }\n\n  /**\n   * Detach the element from the DOM.\n   */\n  public detach(): void {\n    this.el.parentElement && this.el.parentElement.removeChild(this.el);\n  }\n\n  /**\n   * Insert the current node after the given reference node\n   * @param refNode\n   */\n  public insertAfter(refNode: HTMLElement): void {\n    refNode.parentNode && refNode.parentNode.insertBefore(this.el, refNode.nextSibling);\n  }\n\n  /**\n   * Insert the current node before the given reference node\n   * @param refNode\n   */\n  public insertBefore(refNode: HTMLElement): void {\n    refNode.parentNode && refNode.parentNode.insertBefore(this.el, refNode);\n  }\n\n  /**\n   * Insert the given node as the first child of the current node\n   * @param toPrepend\n   */\n  public prepend(toPrepend: HTMLElement) {\n    if (this.el.firstChild) {\n      new Dom(toPrepend).insertBefore(<HTMLElement>this.el.firstChild);\n    } else {\n      this.el.appendChild(toPrepend);\n    }\n  }\n\n  /**\n   * Bind an event handler on the element. Accepts either one (a string) or multiple (Array<String>) event type.<br/>\n   * @param types The {string} or {Array<String>} of types on which to bind an event handler\n   * @param eventHandle The function to execute when the event is triggered\n   */\n  public on(types: string[], eventHandle: (evt: Event, data: any) => void): void;\n  public on(type: string, eventHandle: (evt: Event, data: any) => void): void;\n  public on(type: any, eventHandle: (evt: Event, data: any) => void): void {\n    if (_.isArray(type)) {\n      _.each(type, (t: string) => {\n        this.on(t, eventHandle);\n      });\n    } else {\n      var jq = JQueryUtils.getJQuery();\n      if (jq) {\n        jq(this.el).on(type, eventHandle);\n      } else if (this.el.addEventListener) {\n        var fn = (e: CustomEvent) => {\n          eventHandle(e, e.detail);\n        };\n        Dom.handlers.push({\n          eventHandle: eventHandle,\n          fn: fn\n        });\n        this.el.addEventListener(type, fn, false);\n      } else if (this.el['on']) {\n        this.el['on']('on' + type, eventHandle);\n      }\n    }\n  }\n\n  /**\n   * Bind an event handler on the element. Accepts either one (a string) or multiple (Array<String>) event type.<br/>\n   * The event handler will execute only ONE time.\n   * @param types The {string} or {Array<String>} of types on which to bind an event handler\n   * @param eventHandle The function to execute when the event is triggered\n   */\n  public one(types: string[], eventHandle: (evt: Event, args?: any) => void): void;\n  public one(type: string, eventHandle: (evt: Event, args?: any) => void): void;\n  public one(type: any, eventHandle: (evt: Event, args?: any) => void): void {\n    if (_.isArray(type)) {\n      _.each(type, (t: string) => {\n        this.one(t, eventHandle);\n      });\n    } else {\n      var once = (e: Event, args: any) => {\n        this.off(type, once);\n        return eventHandle(e, args);\n      };\n      this.on(type, once);\n    }\n  }\n\n  /**\n   * Remove an event handler on the element. Accepts either one (a string) or multiple (Array<String>) event type.<br/>\n   * @param types The {string} or {Array<String>} of types on which to remove an event handler\n   * @param eventHandle The function to remove on the element\n   */\n  public off(types: string[], eventHandle: (evt: Event, arg?: any) => void): void;\n  public off(type: string, eventHandle: (evt: Event, arg?: any) => void): void;\n  public off(type: any, eventHandle: (evt: Event, arg?: any) => void): void {\n    if (_.isArray(type)) {\n      _.each(type, (t: string) => {\n        this.off(t, eventHandle);\n      });\n    } else {\n      var jq = JQueryUtils.getJQuery();\n      if (jq) {\n        jq(this.el).off(type, eventHandle);\n      } else if (this.el.removeEventListener) {\n        var idx = 0;\n        var found = _.find(Dom.handlers, (handlerObj: { eventHandle: Function, fn: EventListener }, i) => {\n          if (handlerObj.eventHandle == eventHandle) {\n            idx = i;\n            return true;\n          }\n        });\n        if (found) {\n          this.el.removeEventListener(type, found.fn, false);\n          Dom.handlers.splice(idx, 1);\n        }\n      } else if (this.el['off']) {\n        this.el['off']('on' + type, eventHandle);\n      }\n    }\n  }\n\n  /**\n   * Trigger an event on the element.\n   * @param type The event type to trigger\n   * @param data\n   */\n  public trigger(type: string, data?: { [key: string]: any }): void {\n    var jq = JQueryUtils.getJQuery();\n    if (jq) {\n      jq(this.el).trigger(type, data);\n    } else if (CustomEvent !== undefined) {\n      var event = new CustomEvent(type, { detail: data, bubbles: true });\n      this.el.dispatchEvent(event);\n    } else {\n      // TODO Support for older browser ?\n      new Logger(this).error('CANNOT TRIGGER EVENT FOR OLDER BROWSER');\n    }\n  }\n\n  /**\n   * Check if the element is \"empty\" (has no innerHTML content). Whitespace is considered empty</br>\n   * @returns {boolean}\n   */\n  public isEmpty(): boolean {\n    return Dom.ONLY_WHITE_SPACE_REGEX.test(this.el.innerHTML);\n  }\n\n  /**\n   * Check if the element is a descendant of parent\n   * @param other\n   */\n  public isDescendant(parent: HTMLElement): boolean {\n    var node = this.el.parentNode;\n    while (node != null) {\n      if (node == parent) {\n        return true;\n      }\n      node = node.parentNode;\n    }\n    return false;\n  }\n\n  /**\n   * Replace the current element with the other element, then detach the current element\n   * @param otherElem\n   */\n  public replaceWith(otherElem: HTMLElement): void {\n    var parent = this.el.parentNode;\n    if (parent) {\n      new Dom(otherElem).insertAfter(this.el);\n    }\n    this.detach();\n  }\n\n  // based on http://api.jquery.com/position/\n  /**\n   * Return the position relative to the offset parent.\n   */\n  public position(): IOffset {\n    let offsetParent = this.offsetParent();\n    let parentOffset: IOffset = { top: 0, left: 0 };\n\n    let offset = this.offset();\n    if (!$$(offsetParent).is('html')) {\n      parentOffset = $$(offsetParent).offset();\n    }\n\n    let borderTopWidth = parseInt($$(offsetParent).css('borderTopWidth'));\n    let borderLeftWidth = parseInt($$(offsetParent).css('borderLeftWidth'));\n    borderTopWidth = isNaN(borderTopWidth) ? 0 : borderTopWidth;\n    borderLeftWidth = isNaN(borderLeftWidth) ? 0 : borderLeftWidth;\n\n    parentOffset = {\n      top: parentOffset.top + borderTopWidth,\n      left: parentOffset.left + borderLeftWidth\n    };\n\n    let marginTop = parseInt(this.css('marginTop'));\n    let marginLeft = parseInt(this.css('marginLeft'));\n    marginTop = isNaN(marginTop) ? 0 : marginTop;\n    marginLeft = isNaN(marginLeft) ? 0 : marginLeft;\n\n    return {\n      top: offset.top - parentOffset.top - marginTop,\n      left: offset.left - parentOffset.left - marginLeft\n    };\n  }\n\n  // based on https://api.jquery.com/offsetParent/\n  /**\n   * Returns the offset parent. The offset parent is the closest parent that is positioned.\n   * An element is positioned when its position property is not 'static', which is the default.\n   */\n  public offsetParent(): HTMLElement {\n    let offsetParent = this.el.offsetParent;\n\n    while (offsetParent instanceof HTMLElement && $$(offsetParent).css('position') === 'static') {\n      // Will break out if it stumbles upon an non-HTMLElement and return documentElement\n      offsetParent = (<HTMLElement>offsetParent).offsetParent;\n    }\n\n    if (!(offsetParent instanceof HTMLElement)) {\n      return document.documentElement;\n    }\n    return <HTMLElement>offsetParent;\n  }\n\n  // based on http://api.jquery.com/offset/\n  /**\n   * Return the position relative to the document.\n   */\n  public offset(): IOffset {\n    // In <=IE11, calling getBoundingClientRect on a disconnected node throws an error\n    if (!this.el.getClientRects().length) {\n      return { top: 0, left: 0 };\n    }\n\n\n    let rect = this.el.getBoundingClientRect();\n\n    if (rect.width || rect.height) {\n      let doc = this.el.ownerDocument;\n      let docElem = doc.documentElement;\n\n      return {\n        top: rect.top + window.pageYOffset - docElem.clientTop,\n        left: rect.left + window.pageXOffset - docElem.clientLeft\n      };\n    }\n    return rect;\n  }\n\n  /**\n   * Returns the offset width of the element\n   */\n  public width() {\n    return this.el.offsetWidth;\n  }\n\n  /**\n   * Returns the offset height of the element\n   */\n  public height() {\n    return this.el.offsetHeight;\n  }\n  private traverseAncestorForClass(current = this.el, className: string): HTMLElement {\n    if (className.indexOf('.') == 0) {\n      className = className.substr(1);\n    }\n    var found = false;\n    while (!found) {\n      if ($$(current).hasClass(className)) {\n        found = true;\n      }\n      if (current.tagName.toLowerCase() == 'body') {\n        break;\n      }\n      if (current.parentElement == null) {\n        break;\n      }\n      if (!found) {\n        current = current.parentElement;\n      }\n    }\n    if (found) {\n      return current;\n    }\n    return undefined;\n  }\n}\n\nexport class Win {\n  constructor(public win: Window) {\n  }\n\n  public height(): number {\n    return this.win.innerHeight;\n  }\n\n  public width(): number {\n    return this.win.innerWidth;\n  }\n}\n\nexport class Doc {\n  constructor(public doc: Document) {\n  }\n\n  public height(): number {\n    var body = this.doc.body;\n    return Math.max(body.scrollHeight, body.offsetHeight);\n  }\n\n  public width(): number {\n    var body = this.doc.body;\n    return Math.max(body.scrollWidth, body.offsetWidth);\n  }\n}\n\n/**\n * Convenience wrapper for the {@link Dom} class. Used to do $$(element).<br/>\n * If passed with an argument which is not an HTMLElement, it will call {@link Dom.createElement}.\n * @param el The HTMLElement to wrap in a Dom object\n * @param type See {@link Dom.createElement}\n * @param props See {@link Dom.createElement}\n * @param ...children See {@link Dom.createElement}\n */\nexport function $$(dom: Dom): Dom;\nexport function $$(html: HTMLElement): Dom;\nexport function $$(type: string, props?: Object, ...children: Array<string | HTMLElement | Dom>): Dom;\nexport function $$(...args: any[]): Dom {\n  if (args.length === 1 && args[0] instanceof Dom) {\n    return args[0];\n  } else if (args.length === 1 && (!_.isString(args[0]))) {\n    return new Dom(<HTMLElement>args[0]);\n  } else {\n    return new Dom(Dom.createElement.apply(Dom, args));\n  }\n}\n\nexport function htmlToDom(html: string): Element {\n  var parsedHtml = document.createElement('div');\n  parsedHtml.innerHTML = html;\n  // If the template has a single root element, we return it directly. Otherwise\n  // we'll have to wrap this thing in a div as ResultList expects a single element.\n  if (parsedHtml.children.length == 1) {\n    return parsedHtml.children.item(0);\n  }\n  return parsedHtml;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/Dom.ts\n **/","export class JQueryUtils {\n  static getJQuery() {\n    if (window && window['Coveo'] && window['Coveo']['$']) {\n      return window['Coveo']['$'];\n    }\n    return false;\n  }\n\n  static isInstanceOfJQuery(obj: Object): boolean {\n    let jq = this.getJQuery();\n    if (jq) {\n      return obj instanceof jq;\n    }\n    return false;\n  }\n\n  static isInstanceOfJqueryEvent(obj: Object): boolean {\n    let jq = this.getJQuery();\n    if (jq) {\n      return obj instanceof jq.Event;\n    }\n    return false;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/JQueryutils.ts\n **/","import {$$, Dom} from './Dom';\nimport {IQueryResult} from '../rest/QueryResult';\nimport {IResultsComponentBindings} from '../ui/Base/ResultsComponentBindings';\nimport {DateUtils} from './DateUtils';\nimport {FileTypes} from '../ui/Misc/FileTypes';\nimport {Utils} from './Utils';\nimport {StringUtils} from './StringUtils';\n\nexport class DomUtils {\n  static getPopUpCloseButton(captionForClose: string, captionForReminder: string): string {\n    var container = document.createElement('span');\n\n    var closeButton = document.createElement('span');\n    $$(closeButton).addClass('coveo-close-button');\n    container.appendChild(closeButton);\n\n    var iconClose = document.createElement('span');\n    $$(iconClose).addClass('coveo-icon');\n    $$(iconClose).addClass('coveo-sprites-quickview-close');\n    closeButton.appendChild(iconClose);\n\n    $$(closeButton).text(captionForClose);\n\n    var closeReminder = document.createElement('span');\n    $$(closeReminder).addClass('coveo-pop-up-reminder');\n    $$(closeReminder).text(captionForReminder);\n    container.appendChild(closeReminder);\n\n    return container.outerHTML;\n  }\n\n  static getBasicLoadingAnimation() {\n    var loadDotClass = 'coveo-loading-dot';\n    var dom = document.createElement('div');\n    dom.className = 'coveo-first-loading-animation';\n    dom.innerHTML = `<div class='coveo-logo' ></div>\n    <div class='coveo-loading-container'>\n      <div class='${loadDotClass}'></div>\n      <div class='${loadDotClass}'></div>\n      <div class='${loadDotClass}'></div>\n      <div class='${loadDotClass}'></div>\n    </div>`;\n    return dom;\n  }\n\n  static highlightElement(initialString: string, valueToSearch: string): string {\n    var regex = new RegExp(Utils.escapeRegexCharacter(valueToSearch), 'i');\n    var firstChar = initialString.search(regex);\n    var lastChar = firstChar + valueToSearch.length;\n    return `${StringUtils.htmlEncode(initialString.slice(0, firstChar))}<span class='coveo-highlight'>${StringUtils.htmlEncode(initialString.slice(firstChar, lastChar))}</span>${StringUtils.htmlEncode(initialString.slice(lastChar))}`;\n  }\n\n  static getLoadingSpinner(): HTMLElement {\n    let loading = $$('div');\n    loading.addClass('coveo-loading-spinner');\n    return loading.el;\n  }\n\n  static getModalBoxHeader(title: string): Dom {\n    var header = $$('div');\n    header.el.innerHTML = `<div class='coveo-modalbox-right-header'>\n        <span class='coveo-modalbox-close-button'>\n          <span class='coveo-icon coveo-sprites-common-clear'></span>\n        </span>\n      </div>\n      <div class='coveo-modalbox-left-header'>\n        <span class='coveo-modalbox-pop-up-reminder'> ${title || ''}</span>\n      </div>`;\n    return header;\n  }\n\n  static getQuickviewHeader(result: IQueryResult, options: { showDate: boolean; title: string }, bindings: IResultsComponentBindings): Dom {\n    var date = '';\n    if (options.showDate) {\n      date = DateUtils.dateTimeToString(new Date(result.raw.date));\n    }\n    var fileType = FileTypes.get(result);\n    var header = $$('div');\n    header.el.innerHTML = `<div class='coveo-quickview-right-header'>\n        <span class='coveo-quickview-time'>${date}</span>\n        <span class='coveo-quickview-close-button'>\n          <span class='coveo-icon coveo-sprites-common-clear'></span>\n        </span>\n      </div>\n      <div class='coveo-quickview-left-header'>\n        <span class='coveo-quickview-icon coveo-small ${fileType.icon}'></span>\n        <span class='coveo-quickview-pop-up-reminder'> ${options.title || ''}</span>\n      </div>`;\n    new Coveo[Coveo['Salesforce'] ? 'SalesforceResultLink' : 'ResultLink'](header.find('.coveo-quickview-pop-up-reminder'), undefined, bindings, result);\n    return header;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/DomUtils.ts\n **/","import {IQueryResult} from '../../rest/QueryResult';\nimport {Utils} from '../../utils/Utils';\nimport {l} from '../../strings/Strings';\nimport {Assert} from '../../misc/Assert';\n\n// On-demand mapping of file types to captions. Used by facets, but I don't\n// really like this. Maybe a dedicated filetype facet would be better? Hmm...\nlet fileTypeCaptions: { [id: string]: string };\n\nexport interface IFileTypeInfo {\n  icon: string;\n  caption: string;\n}\n\nexport class FileTypes {\n  static get(result: IQueryResult): IFileTypeInfo {\n    var objecttype = <string>result.raw.objecttype;\n    var filetype = <string>result.raw.filetype;\n\n    // When @objecttype is File we fallback on @filetype for icons and such\n    if (Utils.isNonEmptyString(objecttype) && objecttype.toLowerCase() != 'file') {\n      return FileTypes.getObjectType(objecttype);\n    } else if (Utils.isNonEmptyString(filetype)) {\n      return FileTypes.getFileType(filetype);\n    } else {\n      return {\n        // This will render a default icon. Really it should not happen.\n        icon: 'coveo-icon filetype',\n        caption: l('Unknown')\n      };\n    }\n  }\n\n  static getObjectType(objecttype: string): IFileTypeInfo {\n    // We must use lowercase filetypes because that's how the CSS classes\n    // are generated (they are case sensitive, alas).\n    objecttype = objecttype.toLowerCase();\n\n    // Most object types have a set of localized strings in the main dictionary\n    var localizedString = l('objecttype_' + objecttype);\n\n    return {\n      'icon': 'coveo-icon objecttype ' + objecttype,\n      caption: localizedString != 'objecttype_' + objecttype ? localizedString : objecttype\n    };\n  }\n\n  static getFileType(filetype: string): IFileTypeInfo {\n    // We must use lowercase filetypes because that's how the CSS classes\n    // are generated (they are case sensitive, alas).\n    filetype = filetype.toLowerCase();\n\n    // Sometimes, filetype begins with a period (typically means the index has\n    // no idea and uses the file extension as a filetype).\n    if (filetype[0] == '.') {\n      filetype = filetype.substring(1);\n    }\n\n    // Most filetypes have a set of localized strings in the main dictionary\n    var localizedString = l('filetype_' + filetype);\n    return {\n      'icon': 'coveo-icon filetype ' + filetype,\n      caption: localizedString != 'filetype_' + filetype ? localizedString : filetype\n    };\n  }\n\n  static getFileTypeCaptions() {\n    if (fileTypeCaptions == undefined) {\n      fileTypeCaptions = {};\n      var strings = String['locales'][String['locale'].toLowerCase()];\n      Assert.isNotUndefined(strings);\n      _.each(_.keys(strings), function (key) {\n        if (key.indexOf('filetype_') == 0) {\n          fileTypeCaptions[key.substr('filetype_'.length)] = key.toLocaleString();\n        } else if (key.indexOf('objecttype_') == 0) {\n          fileTypeCaptions[key.substr('objecttype_'.length)] = key.toLocaleString();\n        }\n      });\n    }\n\n    return fileTypeCaptions;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Misc/FileTypes.ts\n **/","import {Assert} from '../misc/Assert';\nimport {IHighlight} from '../rest/Highlight';\nimport {$$} from '../utils/Dom';\n\nexport class StringUtils {\n  static javascriptEncode(value: string): string {\n    Assert.isString(value);\n\n    value = value.replace(/\\\\/g, '\\\\\\\\');\n    value = value.replace(/'/g, '\\\\\\'');\n    value = value.replace(/\"/g, '\\\\\"');\n\n    return value;\n  }\n\n  static htmlEncode(value: string): string {\n    Assert.isString(value);\n    var div = $$('div');\n    div.text(value);\n    return div.el.innerHTML;\n  }\n\n  static splice(value: string, index: number, remove: number, toAdd: string): string {\n    return value.slice(0, index) + toAdd + value.slice(index + Math.abs(remove));\n  }\n\n  static removeMiddle(value: string, length: number, toAdd: string): string {\n    if (value.length < length) {\n      return value;\n    }\n    var toRemove = value.length - length;\n    var index = Math.floor(length / 2);\n    return StringUtils.splice(value, index, toRemove, toAdd);\n  }\n\n  static regexEncode(value: string): string {\n    Assert.isString(value);\n    return value.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n  }\n\n  static stringToRegex(value: string, ignoreAccent = false): string {\n    Assert.isString(value);\n    var encoded = StringUtils.regexEncode(value);\n\n    if (ignoreAccent) {\n      return _.map(encoded, (char: string) => {\n        var regexp = _.find(StringUtils.accented, (regexp: RegExp) => char.match(regexp) != null);\n        if (regexp) {\n          return regexp.source;\n        }\n        return char;\n      }).join('');\n    }\n\n    return encoded;\n  }\n\n  static wildcardsToRegex(value: string, ignoreAccent = false): string {\n    Assert.isString(value);\n\n    var encoded = StringUtils.stringToRegex(value, ignoreAccent);\n\n    encoded = encoded.replace(/\\\\\\*/, '.*');\n    encoded = encoded.replace(/\\\\\\?/, '.');\n\n    return encoded;\n  }\n\n  static getHighlights(strToSearch: string, regexToFind: RegExp, dataHighlightGroupTerm: string): IHighlight[] {\n    var match, indexes: IHighlight[] = [];\n\n    while (match = regexToFind.exec(strToSearch)) {\n      var desiredMatch = match[2];\n      var undesiredMatch = match[1];\n      var offset = match.index + undesiredMatch.length;\n      indexes.push({ offset: offset, length: desiredMatch.length, dataHighlightGroupTerm: dataHighlightGroupTerm });\n      if (!regexToFind.global) {\n        break;\n      }\n    }\n    return _.isEmpty(indexes) ? undefined : indexes;\n  }\n\n  static encodeCarriageReturn(strToEncode: string): string {\n    Assert.isString(strToEncode);\n    return strToEncode.replace(/\\n/g, '<br/>');\n  }\n\n  static equalsCaseInsensitive(str1: string, str2: string) {\n    return str1.toLowerCase() == str2.toLowerCase();\n  }\n\n  static match(value: string, regex: RegExp) {\n    var results: string[][] = [];\n    var arr: string[];\n    while ((arr = regex.exec(value)) !== null) {\n      results.push(arr);\n    }\n    return results;\n  }\n\n  static hashCode(str: string): string {\n    var hash = 0;\n    var len = str.length;\n    for (var i = 0; i < len; i++) {\n      var char = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash.toString(16);\n  }\n\n  // http://stackoverflow.com/a/25575009\n  static removePunctuation(str: string) {\n    var punctRE = /[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#\\$%&\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?@\\[\\]\\^_`\\{\\|\\}~]/g;\n    var spaceRE = /\\s+/g;\n    return str.replace(punctRE, '').replace(spaceRE, ' ');\n  }\n\n  public static accented: { [letter: string]: RegExp } = {\n    'A': /[Aa\\xaa\\xc0-\\xc5\\xe0-\\xe5\\u0100-\\u0105\\u01cd\\u01ce\\u0200-\\u0203\\u0226\\u0227\\u1d2c\\u1d43\\u1e00\\u1e01\\u1e9a\\u1ea0-\\u1ea3\\u2090\\u2100\\u2101\\u213b\\u249c\\u24b6\\u24d0\\u3371-\\u3374\\u3380-\\u3384\\u3388\\u3389\\u33a9-\\u33af\\u33c2\\u33ca\\u33df\\u33ff\\uff21\\uff41]/g,\n    'B': /[Bb\\u1d2e\\u1d47\\u1e02-\\u1e07\\u212c\\u249d\\u24b7\\u24d1\\u3374\\u3385-\\u3387\\u33c3\\u33c8\\u33d4\\u33dd\\uff22\\uff42]/g,\n    'C': /[Cc\\xc7\\xe7\\u0106-\\u010d\\u1d9c\\u2100\\u2102\\u2103\\u2105\\u2106\\u212d\\u216d\\u217d\\u249e\\u24b8\\u24d2\\u3376\\u3388\\u3389\\u339d\\u33a0\\u33a4\\u33c4-\\u33c7\\uff23\\uff43]/g,\n    'D': /[Dd\\u010e\\u010f\\u01c4-\\u01c6\\u01f1-\\u01f3\\u1d30\\u1d48\\u1e0a-\\u1e13\\u2145\\u2146\\u216e\\u217e\\u249f\\u24b9\\u24d3\\u32cf\\u3372\\u3377-\\u3379\\u3397\\u33ad-\\u33af\\u33c5\\u33c8\\uff24\\uff44]/g,\n    'E': /[Ee\\xc8-\\xcb\\xe8-\\xeb\\u0112-\\u011b\\u0204-\\u0207\\u0228\\u0229\\u1d31\\u1d49\\u1e18-\\u1e1b\\u1eb8-\\u1ebd\\u2091\\u2121\\u212f\\u2130\\u2147\\u24a0\\u24ba\\u24d4\\u3250\\u32cd\\u32ce\\uff25\\uff45]/g,\n    'F': /[Ff\\u1da0\\u1e1e\\u1e1f\\u2109\\u2131\\u213b\\u24a1\\u24bb\\u24d5\\u338a-\\u338c\\u3399\\ufb00-\\ufb04\\uff26\\uff46]/g,\n    'G': /[Gg\\u011c-\\u0123\\u01e6\\u01e7\\u01f4\\u01f5\\u1d33\\u1d4d\\u1e20\\u1e21\\u210a\\u24a2\\u24bc\\u24d6\\u32cc\\u32cd\\u3387\\u338d-\\u338f\\u3393\\u33ac\\u33c6\\u33c9\\u33d2\\u33ff\\uff27\\uff47]/g,\n    'H': /[Hh\\u0124\\u0125\\u021e\\u021f\\u02b0\\u1d34\\u1e22-\\u1e2b\\u1e96\\u210b-\\u210e\\u24a3\\u24bd\\u24d7\\u32cc\\u3371\\u3390-\\u3394\\u33ca\\u33cb\\u33d7\\uff28\\uff48]/g,\n    'I': /[Ii\\xcc-\\xcf\\xec-\\xef\\u0128-\\u0130\\u0132\\u0133\\u01cf\\u01d0\\u0208-\\u020b\\u1d35\\u1d62\\u1e2c\\u1e2d\\u1ec8-\\u1ecb\\u2071\\u2110\\u2111\\u2139\\u2148\\u2160-\\u2163\\u2165-\\u2168\\u216a\\u216b\\u2170-\\u2173\\u2175-\\u2178\\u217a\\u217b\\u24a4\\u24be\\u24d8\\u337a\\u33cc\\u33d5\\ufb01\\ufb03\\uff29\\uff49]/g,\n    'J': /[Jj\\u0132-\\u0135\\u01c7-\\u01cc\\u01f0\\u02b2\\u1d36\\u2149\\u24a5\\u24bf\\u24d9\\u2c7c\\uff2a\\uff4a]/g,\n    'K': /[Kk\\u0136\\u0137\\u01e8\\u01e9\\u1d37\\u1d4f\\u1e30-\\u1e35\\u212a\\u24a6\\u24c0\\u24da\\u3384\\u3385\\u3389\\u338f\\u3391\\u3398\\u339e\\u33a2\\u33a6\\u33aa\\u33b8\\u33be\\u33c0\\u33c6\\u33cd-\\u33cf\\uff2b\\uff4b]/g,\n    'L': /[Ll\\u0139-\\u0140\\u01c7-\\u01c9\\u02e1\\u1d38\\u1e36\\u1e37\\u1e3a-\\u1e3d\\u2112\\u2113\\u2121\\u216c\\u217c\\u24a7\\u24c1\\u24db\\u32cf\\u3388\\u3389\\u33d0-\\u33d3\\u33d5\\u33d6\\u33ff\\ufb02\\ufb04\\uff2c\\uff4c]/g,\n    'M': /[Mm\\u1d39\\u1d50\\u1e3e-\\u1e43\\u2120\\u2122\\u2133\\u216f\\u217f\\u24a8\\u24c2\\u24dc\\u3377-\\u3379\\u3383\\u3386\\u338e\\u3392\\u3396\\u3399-\\u33a8\\u33ab\\u33b3\\u33b7\\u33b9\\u33bd\\u33bf\\u33c1\\u33c2\\u33ce\\u33d0\\u33d4-\\u33d6\\u33d8\\u33d9\\u33de\\u33df\\uff2d\\uff4d]/g,\n    'N': /[Nn\\xd1\\xf1\\u0143-\\u0149\\u01ca-\\u01cc\\u01f8\\u01f9\\u1d3a\\u1e44-\\u1e4b\\u207f\\u2115\\u2116\\u24a9\\u24c3\\u24dd\\u3381\\u338b\\u339a\\u33b1\\u33b5\\u33bb\\u33cc\\u33d1\\uff2e\\uff4e]/g,\n    'O': /[Oo\\xba\\xd2-\\xd6\\xf2-\\xf6\\u014c-\\u0151\\u01a0\\u01a1\\u01d1\\u01d2\\u01ea\\u01eb\\u020c-\\u020f\\u022e\\u022f\\u1d3c\\u1d52\\u1ecc-\\u1ecf\\u2092\\u2105\\u2116\\u2134\\u24aa\\u24c4\\u24de\\u3375\\u33c7\\u33d2\\u33d6\\uff2f\\uff4f]/g,\n    'P': /[Pp\\u1d3e\\u1d56\\u1e54-\\u1e57\\u2119\\u24ab\\u24c5\\u24df\\u3250\\u3371\\u3376\\u3380\\u338a\\u33a9-\\u33ac\\u33b0\\u33b4\\u33ba\\u33cb\\u33d7-\\u33da\\uff30\\uff50]/g,\n    'Q': /[Qq\\u211a\\u24ac\\u24c6\\u24e0\\u33c3\\uff31\\uff51]/g,\n    'R': /[Rr\\u0154-\\u0159\\u0210-\\u0213\\u02b3\\u1d3f\\u1d63\\u1e58-\\u1e5b\\u1e5e\\u1e5f\\u20a8\\u211b-\\u211d\\u24ad\\u24c7\\u24e1\\u32cd\\u3374\\u33ad-\\u33af\\u33da\\u33db\\uff32\\uff52]/g,\n    'S': /[Ss\\u015a-\\u0161\\u017f\\u0218\\u0219\\u02e2\\u1e60-\\u1e63\\u20a8\\u2101\\u2120\\u24ae\\u24c8\\u24e2\\u33a7\\u33a8\\u33ae-\\u33b3\\u33db\\u33dc\\ufb06\\uff33\\uff53]/g,\n    'T': /[Tt\\u0162-\\u0165\\u021a\\u021b\\u1d40\\u1d57\\u1e6a-\\u1e71\\u1e97\\u2121\\u2122\\u24af\\u24c9\\u24e3\\u3250\\u32cf\\u3394\\u33cf\\ufb05\\ufb06\\uff34\\uff54]/g,\n    'U': /[Uu\\xd9-\\xdc\\xf9-\\xfc\\u0168-\\u0173\\u01af\\u01b0\\u01d3\\u01d4\\u0214-\\u0217\\u1d41\\u1d58\\u1d64\\u1e72-\\u1e77\\u1ee4-\\u1ee7\\u2106\\u24b0\\u24ca\\u24e4\\u3373\\u337a\\uff35\\uff55]/g,\n    'V': /[Vv\\u1d5b\\u1d65\\u1e7c-\\u1e7f\\u2163-\\u2167\\u2173-\\u2177\\u24b1\\u24cb\\u24e5\\u2c7d\\u32ce\\u3375\\u33b4-\\u33b9\\u33dc\\u33de\\uff36\\uff56]/g,\n    'W': /[Ww\\u0174\\u0175\\u02b7\\u1d42\\u1e80-\\u1e89\\u1e98\\u24b2\\u24cc\\u24e6\\u33ba-\\u33bf\\u33dd\\uff37\\uff57]/g,\n    'X': /[Xx\\u02e3\\u1e8a-\\u1e8d\\u2093\\u213b\\u2168-\\u216b\\u2178-\\u217b\\u24b3\\u24cd\\u24e7\\u33d3\\uff38\\uff58]/g,\n    'Y': /[Yy\\xdd\\xfd\\xff\\u0176-\\u0178\\u0232\\u0233\\u02b8\\u1e8e\\u1e8f\\u1e99\\u1ef2-\\u1ef9\\u24b4\\u24ce\\u24e8\\u33c9\\uff39\\uff59]/g,\n    'Z': /[Zz\\u0179-\\u017e\\u01f1-\\u01f3\\u1dbb\\u1e90-\\u1e95\\u2124\\u2128\\u24b5\\u24cf\\u24e9\\u3390-\\u3394\\uff3a\\uff5a]/g\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/StringUtils.ts\n **/","import {IQueryResult} from '../rest/QueryResult';\nimport {l} from '../strings/Strings';\n\nexport interface IMailToOptions {\n  currentUserEmail?: string;\n  originalFrom?: string;\n  to?: string;\n  subject?: string;\n  cc?: string;\n  bcc?: string;\n  body?: string;\n  bodyIsHTML?: boolean;\n}\n\nexport class EmailActionsUtils {\n  static buildMailToString(options: IMailToOptions): string {\n    var mailTo = options.to ? 'mailto:' + encodeURIComponent(options.to) : 'mailto:';\n    var parameters = EmailActionsUtils.buildMailToParametersString(options.subject, options.cc, options.bcc, options.body, mailTo);\n    if (parameters) {\n      mailTo += '?' + parameters;\n    }\n    return mailTo;\n  }\n\n  static buildMailToParametersString(subject: string, cc: string, bcc: string, body: string, mailTo: string): string {\n    var parametersArray = [];\n    if (subject) {\n      parametersArray.push(EmailActionsUtils.buildMailToParameter('subject', subject));\n    }\n    if (cc) {\n      parametersArray.push(EmailActionsUtils.buildMailToParameter('cc', cc));\n    }\n    if (bcc) {\n      parametersArray.push(EmailActionsUtils.buildMailToParameter('bcc', bcc));\n    }\n    if (body) {\n      var shortenBody = EmailActionsUtils.getShortenBody(body, mailTo + '?' + parametersArray.join('&'));\n      if (shortenBody) {\n        parametersArray.push(EmailActionsUtils.buildMailToParameter('body', shortenBody));\n      }\n    }\n    return parametersArray.join('&');\n  }\n\n  static getShortenBody(body: string, mailTo: string) {\n    var shortenBody = body;\n    if (mailTo.length < MailTo.maxLength) {\n      var maxBodyLength = MailTo.maxLength - mailTo.length - '&body='.length;\n      shortenBody = EmailActionsUtils.shortenString(body, maxBodyLength);\n    }\n    return shortenBody;\n  }\n\n  static buildMailToParameter(name: string, param: string): string {\n    return param ? encodeURIComponent(name) + '=' + encodeURIComponent(param) : '';\n  }\n\n  static shortenString(str: string, maxLength: number, encodeShortenBodyIndication: boolean = false): string {\n    /* There is a size limit on mailto url,\n     * Depending on the browser, the mailto will not open if too large. */\n    var shortenBodyIndicator = encodeShortenBodyIndication ? encodeURIComponent(MailTo.shortenBodyIndicator) : MailTo.shortenBodyIndicator;\n    maxLength = maxLength - MailTo.shortenBodyIndicator.length;\n    var sliced = str.length > maxLength ? true : false;\n    var shortenStr = str.substring(0, maxLength);\n    shortenStr += sliced ? shortenBodyIndicator : '';\n    return shortenStr;\n  }\n\n  static appendShortenBodyToMailToString(mailTo: string, body: string): string {\n    var shortenBody = EmailActionsUtils.getShortenBody(body, mailTo);\n    return mailTo.indexOf('?') >= 0 ? mailTo + '&body=' + shortenBody : mailTo + '?body=' + shortenBody;\n  }\n\n  static removeCurrentUserEmailFromString(currentUserEmail: string, str: string): string {\n    if (str && currentUserEmail) {\n      return _.filter<string>(str.split(';'), (email) => {\n        return email.indexOf(currentUserEmail) == -1;\n      }).join(';');\n    } else {\n      return str;\n    }\n  }\n\n  static buildReplyMailToFromResult(result: IQueryResult, currentUserEmail: string): MailTo {\n    return new MailTo({\n      currentUserEmail: currentUserEmail,\n      originalFrom: result.raw.from,\n      to: result.raw.from,\n      subject: result.raw.conversationsubject,\n    });\n  }\n\n  static buildReplyAllMailToFromResult(result: IQueryResult, currentUserEmail: string): MailTo {\n    return new MailTo({\n      currentUserEmail: currentUserEmail,\n      originalFrom: result.raw.from,\n      to: result.raw.from + ';' + result.raw.to,\n      subject: result.raw.conversationsubject,\n      cc: result.raw.cc,\n    });\n  }\n\n  static buildForwardMailToFromResult(result: IQueryResult, currentUserEmail: string): MailTo {\n    return new MailTo({\n      currentUserEmail: currentUserEmail,\n      originalFrom: result.raw.from,\n      subject: result.raw.conversationsubject,\n    });\n  }\n\n  static encodeMailToBody(body: string): string {\n    var linesArray = body.split('\\n');\n    _.each(linesArray, (line, index) => {\n      linesArray[index] = encodeURIComponent(linesArray[index]);\n    });\n    return linesArray.join(MailTo.enter);\n  }\n}\n\nexport class DefaultMailToOptions implements IMailToOptions {\n  currentUserEmail: string = '';\n  originalFrom: string = '';\n  to: string = '';\n  subject: string = '';\n  cc: string = '';\n  bcc: string = '';\n  body: string = '';\n}\n\nexport class MailTo {\n  private value: string;\n  private body: string;\n  private bodyHeader: string = '';\n  static enter: string = '%0D%0A'; // \\r\\n\n  static shortenBodyIndicator: string = '\\r\\n\\r\\n...';\n  // Arbitrary numbers :\n  static maxLength: number = 1000;\n\n  constructor(public options?: IMailToOptions) {\n    this.options = _.extend(new DefaultMailToOptions(), options);\n    this.removeCurrentUserFromParameters();\n    if (this.options.originalFrom) {\n      this.bodyHeader = this.options.bodyIsHTML ? '<p><br/><br/><br/>' + l('From') + ': ' + this.options.originalFrom + '<hr></p>' :\n        '\\n\\n\\n' + l('From') + ': ' + this.options.originalFrom + '\\n_________________________________\\n';\n    }\n  }\n\n  private removeCurrentUserFromParameters() {\n    this.options.to = EmailActionsUtils.removeCurrentUserEmailFromString(this.options.currentUserEmail, this.options.to);\n    this.options.cc = EmailActionsUtils.removeCurrentUserEmailFromString(this.options.currentUserEmail, this.options.cc);\n    this.options.bcc = EmailActionsUtils.removeCurrentUserEmailFromString(this.options.currentUserEmail, this.options.bcc);\n  }\n\n  public open() {\n    this.ensureValueIsSet();\n    window.location.href = this.value;\n  }\n\n  private ensureValueIsSet() {\n    if (!this.value) {\n      this.setValue();\n    } else if (!this.valueBodyIsSet()) {\n      this.setValueBody();\n    }\n  }\n\n  private setValue() {\n    this.value = EmailActionsUtils.buildMailToString(this.options);\n    if (this.value && !this.valueBodyIsSet()) {\n      this.setValueBody();\n    }\n  }\n\n  private setValueBody() {\n    this.value = EmailActionsUtils.appendShortenBodyToMailToString(this.value, this.body);\n  }\n\n  public setMailToBodyFromText(text = '') {\n    this.body = text;\n  }\n\n  private valueBodyIsSet() {\n    return this.value.indexOf('body=') >= 0;\n  }\n\n  public bodyIsSet(): boolean {\n    return this.body ? true : false;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/EmailActionsUtils.ts\n **/","import {Utils} from './Utils';\nimport {l} from '../strings/Strings';\n\nexport class EmailUtils {\n  static splitSemicolonSeparatedListOfEmailAddresses(addresses: string): string[] {\n    var addressesAsList: string[] = addresses.split(/\\s*;\\s*/);\n    return _.filter(addressesAsList, (s: string) => {\n      return Utils.exists(s) && Utils.isNonEmptyString(Utils.trim(s));\n    });\n  }\n\n  static emailAddressesToHyperlinks(addresses: string[], companyDomain?: string, me?: string, lengthLimit = 2, truncateName = false): string {\n    addresses = _.filter(addresses, (s: string) => {\n      return Utils.exists(s) && Utils.isNonEmptyString(Utils.trim(s));\n    });\n    var hyperlinks = _.map(addresses, (item) => {\n      var emailArray = EmailUtils.parseEmail(item);\n      var email = emailArray[1];\n      var name = emailArray[0];\n      if (Utils.exists(me) && email == me) {\n        name = l('Me');\n      }\n      if (truncateName) {\n        var split = name.split(' ');\n        if (!Utils.isNullOrUndefined(split[1])) {\n          name = split[0] + ' ' + split[1].substring(0, 1) + '.';\n        }\n      }\n      var domainIndex = email.indexOf('@') >= 0 ? email.indexOf('@') + 1 : 0;\n      var domain = email.substr(domainIndex);\n      if (Utils.exists(companyDomain) && domain != companyDomain) {\n        name += ' (' + domain + ')';\n      }\n\n      return '<a title=\"' + item.replace(/'/g, '&quot;') + 'href=\"mailto:' + encodeURI(email) + '\">' + name + '</a>';\n    });\n    var excess = hyperlinks.length - lengthLimit;\n    var andOthers = excess > 0 ? EmailUtils.buildEmailAddressesAndOthers(_.last(hyperlinks, excess)) : '';\n    return _.first(hyperlinks, lengthLimit).join(', ') + andOthers;\n  }\n\n  static buildEmailAddressesAndOthers(excessHyperLinks: string[]) {\n    return '<span class=\"coveo-emails-excess-collapsed coveo-active\" onclick=\"Coveo.TemplateHelpers.getHelper(\\'excessEmailToggle\\')(this);\"> ' + l('AndOthers', excessHyperLinks.length.toString(), excessHyperLinks.length) + '</span>' +\n      '<span class=\"coveo-emails-excess-expanded\"> , ' + excessHyperLinks.join(' , ') + '</span>';\n  }\n\n  static parseEmail(email: string): string[] {\n    let name: string;\n    let match = (<string>email).match(/^\\s*(.*)\\s+<(.*)>$/);\n    if (match != null) {\n      name = match[1];\n      if (/^'.*'|'.*'$/.test(name)) {\n        name = name.substr(1, name.length - 2);\n      }\n      email = match[2];\n    } else {\n      name = <string>email;\n      email = <string>email;\n    }\n    return [name, email];\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/EmailUtils.ts\n **/","export class FeatureDetectionUtils {\n  static supportSVG() {\n    return document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#BasicStructure', '1.1');\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/FeatureDetectionUtils.ts\n **/","import {Assert} from '../misc/Assert';\nimport {Utils} from '../utils/Utils';\n\nexport class HashUtils {\n  private static DELIMITER = {\n    'objectStart': '{',\n    'objectEnd': '}',\n    'arrayStart': '[',\n    'arrayEnd': ']',\n    'objectStartRegExp': '^{',\n    'objectEndRegExp': '}+$',\n    'arrayStartRegExp': '^[',\n    'arrayEndRegExp': ']+$'\n  };\n\n  public static getHash(w = window): string {\n    Assert.exists(w);\n\n    // window.location.hash returns the DECODED hash on Firefox (it's a well known bug),\n    // so any & in values will be already unescaped. This breaks our value splitting.\n    // The following trick works on all browsers.\n    var ret = '#' + (w.location.href.split('#')[1] || '');\n    return HashUtils.getAjaxcrawlableHash(ret);\n  }\n\n  public static getValue(value: string, toParse: string): any {\n    Assert.isNonEmptyString(value);\n    Assert.exists(toParse);\n    toParse = HashUtils.getAjaxcrawlableHash(toParse);\n    var paramValue = HashUtils.getRawValue(value, toParse);\n    if (paramValue != undefined) {\n      paramValue = HashUtils.getValueDependingOnType(paramValue);\n    }\n    return paramValue;\n  }\n\n  public static encodeValues(values: {}): string {\n    var hash: String[] = [];\n    _.each(<_.Dictionary<any>>values, (valueToEncode, key, obj?) => {\n      var encodedValue = '';\n      if (Utils.isNonEmptyArray(valueToEncode)) {\n        encodedValue = HashUtils.encodeArray(valueToEncode);\n      } else if (_.isObject(valueToEncode) && Utils.isNonEmptyArray(_.keys(valueToEncode))) {\n        encodedValue = HashUtils.encodeObject(valueToEncode);\n      } else {\n        encodedValue = encodeURIComponent(valueToEncode.toString());\n      }\n      if (encodedValue != '') {\n        hash.push(key + '=' + encodedValue);\n      }\n    });\n\n    return hash.join('&');\n  }\n\n  private static getAjaxcrawlableHash(hash: string) {\n    if (hash[1] != undefined && hash[1] == '!') {\n      return hash.substring(0, 1) + hash.substring(2);\n    } else {\n      return hash;\n    }\n  }\n\n  private static getRawValue(value: string, toParse: string): string {\n    Assert.exists(value);\n    Assert.exists(toParse);\n    Assert.check(toParse.indexOf('#') == 0 || toParse == '');\n\n    var toParseArray = toParse.substr(1).split('&');\n    var paramPos = 0;\n    var loop = true;\n    var paramValue: string = undefined;\n    while (loop) {\n      var paramValuePair = toParseArray[paramPos].split('=');\n      if (paramValuePair[0] == value) {\n        loop = false;\n        paramValue = paramValuePair[1];\n      } else {\n        paramPos++;\n        if (paramPos >= toParseArray.length) {\n          paramPos = undefined;\n          loop = false;\n        }\n      }\n    }\n    return paramValue;\n  }\n\n  private static getValueDependingOnType(paramValue: string): any {\n    var type = HashUtils.getValueType(paramValue);\n    var returnValue;\n    if (type == 'object') {\n      returnValue = HashUtils.decodeObject(paramValue);\n    } else if (type == 'array') {\n      returnValue = HashUtils.decodeArray(paramValue);\n    } else {\n      returnValue = decodeURIComponent(paramValue);\n    }\n    return returnValue;\n  }\n\n  private static getValueType(paramValue: string): string {\n    if (HashUtils.isObject(paramValue)) {\n      return 'object';\n    } else if (HashUtils.isArray(paramValue)) {\n      return 'array';\n    } else {\n      return 'other';\n    }\n  }\n\n  private static isArrayStartNotEncoded(value: string) {\n    return value.substr(0, 1) == HashUtils.DELIMITER.arrayStart;\n  }\n\n  private static isArrayStartEncoded(value: string) {\n    return value.indexOf(encodeURIComponent(HashUtils.DELIMITER.arrayStart)) == 0;\n  }\n\n  private static isArrayEndNotEncoded(value: string) {\n    return value.substr(value.length - 1);\n  }\n\n  private static isArrayEndEncoded(value: string) {\n    return value.indexOf(encodeURIComponent(HashUtils.DELIMITER.arrayEnd)) == value.length - encodeURIComponent(HashUtils.DELIMITER.arrayEnd).length;\n  }\n\n  private static isObjectStartNotEncoded(value: string) {\n    return value.substr(0, 1) == HashUtils.DELIMITER.objectStart;\n  }\n\n  private static isObjectStartEncoded(value: string) {\n    return value.indexOf(encodeURIComponent(HashUtils.DELIMITER.objectStart)) == 0;\n  }\n\n  private static isObjectEndNotEncoded(value: string) {\n    return value.substr(value.length - 1) == HashUtils.DELIMITER.objectEnd;\n  }\n\n  private static isObjectEndEncoded(value: string) {\n    return value.indexOf(encodeURIComponent(HashUtils.DELIMITER.objectEnd)) == value.length - encodeURIComponent(HashUtils.DELIMITER.objectEnd).length;\n  }\n\n  private static isObject(value: string) {\n    var isObjectStart = HashUtils.isObjectStartNotEncoded(value) || HashUtils.isObjectStartEncoded(value);\n    var isObjectEnd = HashUtils.isObjectEndNotEncoded(value) || HashUtils.isObjectEndEncoded(value);\n    return isObjectStart && isObjectEnd;\n  }\n\n  private static isArray(value: string) {\n    var isArrayStart = HashUtils.isArrayStartNotEncoded(value) || HashUtils.isArrayStartEncoded(value);\n    var isArrayEnd = HashUtils.isArrayEndNotEncoded(value) || HashUtils.isArrayEndEncoded(value);\n    return isArrayStart && isArrayEnd;\n  }\n\n  public static encodeArray(array: string[]): string {\n    var arrayReturn = _.map(array, (value) => {\n      return encodeURIComponent(value);\n    });\n    return HashUtils.DELIMITER.arrayStart + arrayReturn.join(',') + HashUtils.DELIMITER.arrayEnd;\n  }\n\n  public static encodeObject(obj: Object): string {\n    var retArray = _.map(<_.Dictionary<any>>obj, (val, key?, obj?) => {\n      return `\"${encodeURIComponent(key)}\":${this.encodeValue(val)}`;\n    });\n    return HashUtils.DELIMITER.objectStart + retArray.join(' , ') + HashUtils.DELIMITER.objectEnd;\n  }\n\n  private static encodeValue(val: any) {\n    var encodedValue = '';\n    if (_.isArray(val)) {\n      encodedValue = HashUtils.encodeArray(val);\n    } else if (_.isObject(val)) {\n      encodedValue = HashUtils.encodeObject(val);\n    } else if (_.isNumber(val) || _.isBoolean(val)) {\n      encodedValue = encodeURIComponent(val);\n    } else {\n      encodedValue = '\"' + encodeURIComponent(val) + '\"';\n    }\n    return encodedValue;\n  }\n\n  private static decodeObject(obj: string): Object {\n    if (HashUtils.isObjectStartEncoded(obj) && HashUtils.isObjectEndEncoded(obj)) {\n      obj = obj.replace(/encodeURIComponent(HashUtils.Delimiter.objectStart)/, HashUtils.DELIMITER.objectStart);\n      obj = obj.replace(encodeURIComponent(HashUtils.DELIMITER.objectEnd), HashUtils.DELIMITER.objectEnd);\n    }\n    return JSON.parse(decodeURIComponent(obj));\n  }\n\n  private static decodeArray(value: string): any[] {\n    if (HashUtils.isArrayStartEncoded(value) && HashUtils.isArrayEndEncoded(value)) {\n      value = value.replace(encodeURIComponent(HashUtils.DELIMITER.arrayStart), HashUtils.DELIMITER.arrayStart);\n      value = value.replace(encodeURIComponent(HashUtils.DELIMITER.arrayEnd), HashUtils.DELIMITER.arrayEnd);\n    }\n    value = value.substr(1);\n    value = value.substr(0, value.length - 1);\n    var array = value.split(',');\n    return _.map(array, (val) => {\n      return decodeURIComponent(val);\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/HashUtils.ts\n **/","import {Utils} from './Utils';\nimport {IHighlight} from '../rest/Highlight';\nimport {Assert} from '../misc/Assert';\n\nexport interface IStringHole {\n  begin: number;\n  size: number;\n  replacementSize: number;\n}\n\nexport class StringAndHoles {\n  value: string;\n  holes: IStringHole[];\n\n  static SHORTEN_END: string = '...';\n  static WORD_SHORTER: number = 10;\n\n  static replace(str: string, find: string, replace: string): StringAndHoles {\n    let strAndHoles = new StringAndHoles();\n\n    if (Utils.isNullOrEmptyString(str)) {\n      return strAndHoles;\n    }\n\n    let index = str.lastIndexOf(find);\n    if (index == -1) {\n      strAndHoles.value = str;\n      return strAndHoles;\n    }\n\n    let holes: IStringHole[] = [];\n    while (index >= 0) {\n      let hole = <IStringHole>{\n        begin: index,\n        size: find.length,\n        replacementSize: replace.length\n      };\n      holes.push(hole);\n      str = str.slice(0, index) + replace + str.slice(index + find.length);\n      index = str.lastIndexOf(find);\n    }\n\n    strAndHoles.holes = holes;\n    strAndHoles.value = str;\n    return strAndHoles;\n  }\n\n  /**\n   * Shorten the passed path intelligently (path-aware).\n   * Works with *local paths* and *network paths*\n   * @param uriOrig The path to shorten\n   * @param length The length to which the path will be shortened.\n   */\n  static shortenPath(uriOrig: string, length: number): StringAndHoles {\n    let uri = uriOrig;\n    let strAndHoles = new StringAndHoles();\n\n    if (Utils.isNullOrEmptyString(uri) || (uri.length <= length)) {\n      strAndHoles.value = uri;\n      return strAndHoles;\n    }\n\n    let holes: IStringHole[] = [];\n\n    let first = -1;\n    if (Utils.stringStartsWith(uri, '\\\\\\\\')) {\n      first = uri.indexOf('\\\\', first + 2);\n    } else {\n      first = uri.indexOf('\\\\');\n    }\n\n    if (first !== -1) {\n      let removed = 0;\n      let next = uri.indexOf('\\\\', first + 1);\n      while (next !== -1 && uri.length - removed + StringAndHoles.SHORTEN_END.length > length) {\n        removed = next - first - 1;\n        next = uri.indexOf('\\\\', next + 1);\n      }\n\n      if (removed > 0) {\n        uri = uri.slice(0, first + 1) + StringAndHoles.SHORTEN_END + uri.slice(removed);\n        let hole = <IStringHole>{\n          begin: first + 1,\n          size: removed - StringAndHoles.SHORTEN_END.length,\n          replacementSize: StringAndHoles.SHORTEN_END.length\n        };\n        holes.push(hole);\n      }\n    }\n\n    if (uri.length > length) {\n      let over = uri.length - length + StringAndHoles.SHORTEN_END.length;\n      let start = uri.length - over;\n      uri = uri.slice(0, start) + StringAndHoles.SHORTEN_END;\n      let hole = <IStringHole>{\n        begin: start,\n        size: over,\n        replacementSize: StringAndHoles.SHORTEN_END.length\n      };\n      holes.push(hole);\n    }\n\n    strAndHoles.holes = holes;\n    strAndHoles.value = uri;\n    return strAndHoles;\n  }\n\n  /**\n   * Shorten the passed string.\n   * @param toShortenOrig The string to shorten\n   * @param length The length to which the string will be shortened.\n   * @param toAppend The string to append at the end (usually, it is set to '...')\n   */\n  static shortenString(toShortenOrig: string, length: number = 200, toAppend?: string): StringAndHoles {\n    let toShorten = toShortenOrig;\n    toAppend = Utils.toNotNullString(toAppend);\n    let strAndHoles = new StringAndHoles();\n    if (Utils.isNullOrEmptyString(toShorten) || length <= toAppend.length) {\n      strAndHoles.value = toShorten;\n      return strAndHoles;\n    }\n\n    if (toShorten.length <= length) {\n      strAndHoles.value = toShorten;\n      return strAndHoles;\n    }\n\n    let str = toShorten;\n\n    length = length - toAppend.length;\n    str = str.slice(0, length);\n\n    if (toShorten.charAt(str.length) !== ' ') {\n      let pos = str.lastIndexOf(' ');\n      if (pos !== -1 && str.length - pos < StringAndHoles.WORD_SHORTER) {\n        str = str.slice(0, pos);\n      }\n    }\n    let holes: IStringHole[] = [];\n    holes[0] = <IStringHole>{\n      begin: str.length,\n      size: toShorten.length - str.length,\n      replacementSize: toAppend.length\n    };\n    str += toAppend;\n    strAndHoles.value = str;\n    strAndHoles.holes = holes;\n    return strAndHoles;\n  }\n\n  /**\n   * Shorten the passed URI intelligently (path-aware).\n   * @param toShortenOrig The URI to shorten\n   * @param length The length to which the URI will be shortened.\n   */\n  static shortenUri(uri: string, length: number): StringAndHoles {\n    let strAndHoles = new StringAndHoles();\n    if (Utils.isNullOrEmptyString(uri) || (uri.length <= length)) {\n      strAndHoles.value = uri;\n      return strAndHoles;\n    }\n\n    let holes: IStringHole[] = [];\n\n    let first = uri.indexOf('//');\n    if (first !== -1) {\n      first = uri.indexOf('/', first + 2);\n    }\n\n    if (first !== -1) {\n      let removed = 0;\n      let next = uri.indexOf('/', first + 1);\n      while (next !== -1 && uri.length - removed + StringAndHoles.SHORTEN_END.length > length) {\n        removed = next - first - 1;\n        next = uri.indexOf('/', next + 1);\n      }\n\n      if (removed > 0) {\n        uri = uri.slice(0, first + 1) + StringAndHoles.SHORTEN_END + uri.slice(first + 1 + removed);\n        let hole = <IStringHole>{\n          begin: first + 1,\n          size: removed,\n          replacementSize: StringAndHoles.SHORTEN_END.length\n        };\n        holes.push(hole);\n      }\n    }\n\n    if (uri.length > length) {\n      let over = uri.length - length + StringAndHoles.SHORTEN_END.length;\n      let start = uri.length - over;\n      uri = uri.slice(0, start) + StringAndHoles.SHORTEN_END;\n      let hole = <IStringHole>{\n        begin: start,\n        size: over,\n        replacementSize: StringAndHoles.SHORTEN_END.length\n      };\n      holes.push(hole);\n    }\n\n    strAndHoles.holes = holes;\n    strAndHoles.value = uri;\n    return strAndHoles;\n  }\n}\n\nexport class HighlightUtils {\n  /**\n   * Highlight the passed string using specified highlights and holes.\n   * @param content The string to highlight items in.\n   * @param highlights The highlighted positions to highlight in the string.\n   * @param holes Possible holes which are used to skip highlighting.\n   * @param cssClass The css class to use on the highlighting `span`.\n   */\n  static highlightString(content: string, highlights: IHighlight[], holes: IStringHole[], cssClass: string): string {\n    Assert.isNotUndefined(highlights);\n    Assert.isNotNull(highlights);\n    Assert.isNonEmptyString(cssClass);\n    if (Utils.isNullOrEmptyString(content)) {\n      return content;\n    }\n    let last = 0;\n    let maxIndex = content.length;\n    let highlighted = '';\n    for (let i = 0; i < highlights.length; i++) {\n      let highlight = highlights[i];\n      let start: number = highlight.offset;\n      let end: number = start + highlight.length;\n\n      if (holes !== null) {\n        let skip = false;\n        for (let j = 0; j < holes.length; j++) {\n          let hole = holes[j];\n          let holeBegin = hole.begin;\n          let holeEnd = holeBegin + hole.size;\n          if (start < holeBegin && end >= holeBegin && end < holeEnd) {\n            end = holeBegin;\n          } else if (start >= holeBegin && end < holeEnd) {\n            skip = true;\n            break;\n          } else if (start >= holeBegin && start < holeEnd && end >= holeEnd) {\n            start = holeBegin + hole.replacementSize;\n            end -= hole.size - hole.replacementSize;\n          } else if (start < holeBegin && end >= holeEnd) {\n            end -= hole.size - hole.replacementSize;\n          } else if (start >= holeEnd) {\n            let offset = hole.size - hole.replacementSize;\n            start -= offset;\n            end -= offset;\n          }\n        }\n        if (skip || start === end) {\n          continue;\n        }\n      }\n\n      if (end > maxIndex) {\n        break;\n      }\n\n      highlighted += _.escape(content.slice(last, start));\n      highlighted += `<span class=\"${cssClass}\"`;\n      if (highlight.dataHighlightGroup) {\n        highlighted += ` data-highlight-group=\"${highlight.dataHighlightGroup.toString()}\"`;\n      }\n      if (highlight.dataHighlightGroupTerm) {\n        highlighted += ` data-highlight-group-term=\"${highlight.dataHighlightGroupTerm}\"`;\n      }\n      highlighted += '>';\n      highlighted += _.escape(content.slice(start, end));\n      highlighted += '</span>';\n\n      last = end;\n    }\n    if (last != maxIndex) {\n      highlighted += _.escape(content.slice(last));\n    }\n    return highlighted;\n  }\n}\n\n\n\nexport function highlightString(value: string, search: string) {\n  let hightlightTemplate = _.template('<% var i = 0; var lowercaseValue = value.toLowerCase(); while(i < value.length) { %>' +\n    '<% var index = lowercaseValue.indexOf(search, i); if(index != -1) { %>' +\n    '<% if(i != index){ %> <span><%- value.substr(i, index) %></span><% } %>' +\n    '<span class=\"coveo-hightlight\"><%- value.substr(index, search.length) %></span>' +\n    '<% i = index + search.length %></span>' +\n    '<% } else { %>' +\n    '<span><%- value.substr(i) %></span>' +\n    '<% i = value.length; %>' +\n    '<% } %>' +\n    '<% } %>');\n  if (_.isEmpty(search)) {\n    return value;\n  }\n  return hightlightTemplate({ value: value, search: search.toLowerCase() });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/HighlightUtils.ts\n **/","import {DeviceUtils} from './DeviceUtils';\nimport {IQueryResult} from '../rest/QueryResult';\nimport {SearchEndpoint} from '../rest/SearchEndpoint';\n\n/**\n * Options for building an `<a>` tag.\n */\nexport interface IAnchorUtilsOptions {\n  /**\n   * The tag's text content.\n   */\n  text?: string;\n  /**\n   * The target (`href` attribute).\n   */\n  target?: string;\n  /**\n   * The CSS class(es) of the tag.\n   */\n  class?: string;\n}\n\n/**\n * Options for building an `<img>` tag.\n */\nexport interface IImageUtilsOptions {\n  /**\n   * The alternative text for the image (`alt` attribute).\n   */\n  alt?: string;\n  /**\n   * The height of the image\n   */\n  height?: string;\n  /**\n   * The width of the image\n   */\n  width?: string;\n}\n\nexport class HTMLUtils {\n  static buildAttributeString(options: any): string {\n    var ret = [];\n    _.each(options, (val: any, key?: string, obj?) => {\n      if (val != undefined) {\n        ret.push(key + '=' + JSON.stringify(val.toString()));\n      }\n    });\n    return ret.join(' ');\n  }\n}\n\nexport class AnchorUtils {\n  static buildAnchor(href: string, options?: IAnchorUtilsOptions) {\n    var text;\n    if (!options || !options.text) {\n      text = href;\n    } else {\n      text = options.text;\n      options.text = undefined;\n    }\n    return `<a href='${href} ${HTMLUtils.buildAttributeString(options)} '>${text}</a>`;\n  }\n}\n\nexport class ImageUtils {\n  static buildImage(src?: string, options?: IImageUtilsOptions) {\n    var ret = '<img ';\n    ret += src ? `src='${src}' ` : '';\n    ret += HTMLUtils.buildAttributeString(options) + '/>';\n    return ret;\n  }\n\n  static selectImageFromResult(result: IQueryResult): HTMLElement {\n    return <HTMLElement>document.querySelector(`img[data-coveo-uri-hash=${result.raw['urihash']}]`);\n  }\n\n  static buildImageWithDirectSrcAttribute(endpoint: SearchEndpoint, result: IQueryResult) {\n    var image = new Image();\n    var dataStreamUri = endpoint.getViewAsDatastreamUri(result.uniqueId, '$Thumbnail$', { contentType: 'image/png' });\n    image.onload = () => {\n      ImageUtils.selectImageFromResult(result).setAttribute('src', dataStreamUri);\n    };\n    image.src = dataStreamUri;\n  }\n\n  static buildImageWithBase64SrcAttribute(endpoint: SearchEndpoint, result: IQueryResult) {\n    endpoint.getRawDataStream(result.uniqueId, '$Thumbnail$')\n      .then((response) => {\n        var rawBinary = String.fromCharCode.apply(null, new Uint8Array(response));\n        ImageUtils.selectImageFromResult(result).setAttribute('src', 'data:image/png;base64, ' + btoa(rawBinary));\n      })\n      .catch(() => {\n        ImageUtils.selectImageFromResult(result).remove();\n      });\n  }\n\n  static buildImageFromResult(result: IQueryResult, endpoint: SearchEndpoint, options?: IImageUtilsOptions) {\n    options = options ? options : <IImageUtilsOptions>{};\n\n    let img = ImageUtils.buildImage(undefined, _.extend(options, { 'data-coveo-uri-hash': result.raw['urihash'] }));\n    if (endpoint.isJsonp() || DeviceUtils.isIE8or9()) {\n      // For jsonp and IE8-9 (XDomain) we can't GET/POST for binary data. We are limited to only setting the src attribute directly on the img.\n      ImageUtils.buildImageWithDirectSrcAttribute(endpoint, result);\n    } else {\n      // Base 64 img allows us to GET/POST the image as raw binary, so that we can also pass the credential of the user\n      // Useful for phonegap.\n      ImageUtils.buildImageWithBase64SrcAttribute(endpoint, result);\n    }\n    return img;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/HtmlUtils.ts\n **/","import {Utils} from './Utils';\n\nexport enum KEYBOARD {\n  BACKSPACE = 8,\n  TAB = 9,\n  ENTER = 13,\n  SHIFT = 16,\n  CTRL = 17,\n  ALT = 18,\n  ESCAPE = 27,\n  SPACEBAR = 32,\n  PAGE_UP = 33,\n  PAGE_DOWN = 34,\n  HOME = 36,\n  LEFT_ARROW = 37,\n  UP_ARROW = 38,\n  RIGHT_ARROW = 39,\n  DOWN_ARROW = 40,\n  INSERT = 45,\n  DELETE = 46\n}\n\nexport class KeyboardUtils {\n  static keysEqual(key, code) {\n    if (!Utils.isNullOrUndefined(key.keyCode)) {\n      return key.keyCode == code;\n    } else if (!Utils.isNullOrUndefined(key.which)) {\n      return key.which == code;\n    }\n    return false;\n  }\n\n  static isAllowedKeyForOmnibox(e: KeyboardEvent): boolean {\n    var keycode = e.keyCode;\n    var valid =\n      (KeyboardUtils.isNumberKeyPushed(keycode)) ||\n      (keycode == 32 || keycode == 13) || // spacebar & return key(s)\n      (KeyboardUtils.isLetterKeyPushed(keycode)) ||\n      (keycode > 95 && keycode < 112) || // numpad keys\n      (keycode > 185 && keycode < 193) || // ;=,-./` (in order)\n      (keycode > 218 && keycode < 223) || // [\\]' (in order)\n      (keycode == KEYBOARD.BACKSPACE || keycode == KEYBOARD.DELETE) ||\n      (KeyboardUtils.isArrowKeyPushed(keycode));\n\n    return valid;\n  }\n\n  static isAllowedKeyForSearchAsYouType(e: KeyboardEvent): boolean {\n    return KeyboardUtils.isAllowedKeyForOmnibox(e) && !KeyboardUtils.isArrowKeyPushed(e.keyCode);\n  }\n\n  static isDeleteOrBackspace(e: KeyboardEvent) {\n    return KeyboardUtils.keysEqual(e, KEYBOARD.BACKSPACE) || KeyboardUtils.keysEqual(e, KEYBOARD.DELETE);\n  }\n\n  static isArrowKeyPushed(keycode: number): boolean {\n    return keycode == KEYBOARD.LEFT_ARROW ||\n      keycode == KEYBOARD.UP_ARROW ||\n      keycode == KEYBOARD.RIGHT_ARROW ||\n      keycode == KEYBOARD.DOWN_ARROW;\n  }\n\n  static isNumberKeyPushed(keycode: number): boolean {\n    return keycode > 47 && keycode < 58;\n  }\n\n  static isLetterKeyPushed(keycode: number): boolean {\n    return keycode > 64 && keycode < 91;\n  }\n\n  // Return a keyboard event listener that only executes the function if certain keys are pressed.\n  static keypressAction(keyCode: KEYBOARD | KEYBOARD[], action: Function) {\n    return (e: KeyboardEvent, ...data: any[]) => {\n      const eventCode = (e.charCode || e.keyCode);\n      if (_.isArray(keyCode) && _.contains(keyCode, eventCode)) {\n        action(e);\n      } else if (eventCode === keyCode) {\n        action(e);\n      }\n      return false;\n    };\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/KeyboardUtils.ts\n **/","var localStorage = window.localStorage;\nexport class LocalStorageUtils<T> {\n  constructor(public id: string) {\n  }\n\n  public save(data: T) {\n    try {\n      if (localStorage != null) {\n        localStorage.setItem(this.getLocalStorageKey(), JSON.stringify(data));\n      }\n    } catch (error) {\n    }\n  }\n\n  public load(): T {\n    try {\n      if (localStorage == null) {\n        return null;\n      }\n      var value = localStorage.getItem(this.getLocalStorageKey());\n      return value && JSON.parse(value);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  public remove(key?: string) {\n    try {\n      if (localStorage != null) {\n        if (key == undefined) {\n          localStorage.removeItem(this.getLocalStorageKey());\n        } else {\n          var oldObj = this.load();\n          delete oldObj[key];\n          this.save(oldObj);\n        }\n      }\n    } catch (error) {\n    }\n  }\n\n  private getLocalStorageKey() {\n    return 'coveo-' + this.id;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/LocalStorageUtils.ts\n **/","export enum OS_NAME {\n  WINDOWS,\n  MACOSX,\n  UNIX,\n  LINUX,\n  UNKNOWN\n}\n\nexport class OSUtils {\n  static get(nav = navigator) {\n    var osName;\n    if (nav.appVersion.indexOf('Win') != -1) {\n      osName = OS_NAME.WINDOWS;\n    } else if (nav.appVersion.indexOf('Mac') != -1) {\n      osName = OS_NAME.MACOSX;\n    } else if (nav.appVersion.indexOf('X11') != -1) {\n      osName = OS_NAME.UNIX;\n    } else if (nav.appVersion.indexOf('Linux') != -1) {\n      osName = OS_NAME.LINUX;\n    } else {\n      osName = OS_NAME.UNKNOWN;\n    }\n    return osName;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/OSUtils.ts\n **/","import {$$, IOffset} from './Dom';\n\nexport interface IPosition {\n  vertical: VerticalAlignment;\n  horizontal: HorizontalAlignment;\n  verticalOffset?: number;\n  horizontalOffset?: number;\n  horizontalClip?: boolean;\n}\n\nexport enum VerticalAlignment {\n  TOP,\n  MIDDLE,\n  BOTTOM,\n  INNERTOP,\n  INNERBOTTOM\n}\n\nexport enum HorizontalAlignment {\n  LEFT,\n  CENTER,\n  RIGHT,\n  INNERLEFT,\n  INNERRIGHT\n}\n\ninterface IElementBoundary {\n  top: number;\n  left: number;\n  right: number;\n  bottom: number;\n}\n\nexport class PopupUtils {\n  static positionPopup(popUp: HTMLElement, nextTo: HTMLElement, boundary: HTMLElement, desiredPosition: IPosition, appendTo?: HTMLElement, checkForBoundary = 0) {\n    popUp.style.position = 'absolute';\n    if (appendTo) {\n      $$(appendTo).append(popUp);\n    }\n    desiredPosition.verticalOffset = desiredPosition.verticalOffset ? desiredPosition.verticalOffset : 0;\n    desiredPosition.horizontalOffset = desiredPosition.horizontalOffset ? desiredPosition.horizontalOffset : 0;\n\n    let popUpPosition = $$(nextTo).offset();\n    PopupUtils.basicVerticalAlignment(popUpPosition, popUp, nextTo, desiredPosition);\n    PopupUtils.basicHorizontalAlignment(popUpPosition, popUp, nextTo, desiredPosition);\n    PopupUtils.finalAdjustement($$(popUp).offset(), popUpPosition, popUp, desiredPosition);\n\n    let popUpBoundary = PopupUtils.getBoundary(popUp);\n    let boundaryPosition = PopupUtils.getBoundary(boundary);\n    if (checkForBoundary < 2) {\n      let checkBoundary = PopupUtils.checkForOutOfBoundary(popUpBoundary, boundaryPosition);\n      if (checkBoundary.horizontal != 'ok' && desiredPosition.horizontalClip === true) {\n        let width = popUp.offsetWidth;\n        if (popUpBoundary.left < boundaryPosition.left) {\n          width -= boundaryPosition.left - popUpBoundary.left;\n        }\n        if (popUpBoundary.right > boundaryPosition.right) {\n          width -= popUpBoundary.right - boundaryPosition.right;\n        }\n        popUp.style.width = width + 'px';\n        checkBoundary.horizontal = 'ok';\n      }\n      if (checkBoundary.vertical != 'ok' || checkBoundary.horizontal != 'ok') {\n        let newDesiredPosition = PopupUtils.alignInsideBoundary(desiredPosition, checkBoundary);\n        PopupUtils.positionPopup(popUp, nextTo, boundary, newDesiredPosition, appendTo, checkForBoundary + 1);\n      }\n    }\n  }\n\n  private static finalAdjustement(popUpOffSet: IOffset, popUpPosition: IOffset, popUp: HTMLElement, desiredPosition: IPosition) {\n    let position = $$(popUp).position();\n    popUp.style.top = (position.top + desiredPosition.verticalOffset) - (popUpOffSet.top - popUpPosition.top) + 'px';\n    popUp.style.left = (position.left + desiredPosition.horizontalOffset) - (popUpOffSet.left - popUpPosition.left) + 'px';\n  }\n\n  private static basicVerticalAlignment(popUpPosition: IOffset, popUp: HTMLElement, nextTo: HTMLElement, desiredPosition: IPosition) {\n    switch (desiredPosition.vertical) {\n      case VerticalAlignment.TOP:\n        popUpPosition.top -= popUp.offsetHeight;\n        break;\n      case VerticalAlignment.BOTTOM:\n        popUpPosition.top += nextTo.offsetHeight;\n        break;\n      case VerticalAlignment.MIDDLE:\n        popUpPosition.top -= popUp.offsetHeight / 3;\n      case VerticalAlignment.INNERTOP:\n        break; // Nothing to do, it's the default alignment normally\n      case VerticalAlignment.INNERBOTTOM:\n        popUpPosition.top -= popUp.offsetHeight - nextTo.offsetHeight;\n        break;\n      default:\n        break;\n    }\n  }\n\n  private static basicHorizontalAlignment(popUpPosition: IOffset, popUp: HTMLElement, nextTo: HTMLElement, desiredPosition: IPosition) {\n    switch (desiredPosition.horizontal) {\n      case HorizontalAlignment.LEFT:\n        popUpPosition.left -= popUp.offsetWidth;\n        break;\n      case HorizontalAlignment.RIGHT:\n        popUpPosition.left += nextTo.offsetWidth;\n        break;\n      case HorizontalAlignment.CENTER:\n        popUpPosition.left += PopupUtils.offSetToAlignCenter(popUp, nextTo);\n        break;\n      case HorizontalAlignment.INNERLEFT:\n        break; // Nothing to do, it's the default alignment normally\n      case HorizontalAlignment.INNERRIGHT:\n        popUpPosition.left -= popUp.offsetWidth - nextTo.offsetWidth;\n        break;\n      default:\n        break;\n    }\n  }\n\n  private static alignInsideBoundary(oldPosition: IPosition, checkBoundary) {\n    let newDesiredPosition = oldPosition;\n    if (checkBoundary.horizontal == 'left') {\n      newDesiredPosition.horizontal = HorizontalAlignment.RIGHT;\n    }\n    if (checkBoundary.horizontal == 'right') {\n      newDesiredPosition.horizontal = HorizontalAlignment.LEFT;\n    }\n    if (checkBoundary.vertical == 'top') {\n      newDesiredPosition.vertical = VerticalAlignment.BOTTOM;\n    }\n    if (checkBoundary.vertical == 'bottom') {\n      newDesiredPosition.vertical = VerticalAlignment.TOP;\n    }\n    return newDesiredPosition;\n  }\n\n  private static offSetToAlignCenter(popUp: HTMLElement, nextTo: HTMLElement) {\n    return (nextTo.offsetWidth - popUp.offsetWidth) / 2;\n  }\n\n  private static getBoundary(element: HTMLElement) {\n    let boundaryOffset = $$(element).offset();\n    let toAddVertically;\n    if (element.tagName.toLowerCase() == 'body') {\n      toAddVertically = Math.max(element.scrollHeight, element.offsetHeight);\n    } else if (element.tagName.toLowerCase() == 'html') {\n      toAddVertically = Math.max(element.clientHeight, element.scrollHeight, element.offsetHeight);\n    } else {\n      toAddVertically = element.offsetHeight;\n    }\n    return {\n      top: boundaryOffset.top,\n      left: boundaryOffset.left,\n      right: boundaryOffset.left + element.offsetWidth,\n      bottom: boundaryOffset.top + toAddVertically\n    };\n  }\n\n  private static checkForOutOfBoundary(popUpBoundary: IElementBoundary, boundary: IElementBoundary) {\n    let ret = {\n      vertical: 'ok',\n      horizontal: 'ok'\n    };\n    if (popUpBoundary.top < boundary.top) {\n      ret.vertical = 'top';\n    }\n    if (popUpBoundary.bottom > boundary.bottom) {\n      ret.vertical = 'bottom';\n    }\n    if (popUpBoundary.left < boundary.left) {\n      ret.horizontal = 'left';\n    }\n    if (popUpBoundary.right > boundary.right) {\n      ret.horizontal = 'right';\n    }\n    return ret;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/PopupUtils.ts\n **/","import {Options} from '../misc/Options';\nimport {HighlightUtils} from './HighlightUtils';\nimport {StringUtils} from './StringUtils';\nimport {Utils} from './Utils';\nimport {IHighlight} from '../rest/Highlight';\nimport {$$} from './Dom';\n\n// \\u2011: http://graphemica.com/%E2%80%91\nlet nonWordBoundary = '[\\\\.\\\\-\\\\u2011\\\\s~=,.\\\\|\\\\/:\\'`’;_()!?]';\nlet regexStart = '(' + nonWordBoundary + '|^)(';\nexport interface IStreamHighlightOptions {\n  cssClass?: string;\n  regexFlags?: string;\n}\n\nclass DefaultStreamHighlightOptions extends Options implements IStreamHighlightOptions {\n  constructor(public cssClass = 'coveo-highlight', public shorten = 0, public regexFlags = 'gi') {\n    super();\n  }\n}\n\nexport class StreamHighlightUtils {\n  static highlightStreamHTML(stream: string, termsToHighlight: { [originalTerm: string]: string[] }, phrasesToHighlight: { [phrase: string]: { [originalTerm: string]: string[] } }, options?: IStreamHighlightOptions) {\n    let opts = new DefaultStreamHighlightOptions().merge(options);\n    let container = createStreamHTMLContainer(stream);\n    _.each($$(container).findAll('*'), (elem: HTMLElement, i: number) => {\n      let text = $$(elem).text();\n      elem.innerHTML = HighlightUtils.highlightString(text, getRestHighlightsForAllTerms(text, termsToHighlight, phrasesToHighlight, opts), [], opts.cssClass);\n    });\n    return container.innerHTML;\n  }\n\n  static highlightStreamText(stream: string, termsToHighlight: { [originalTerm: string]: string[] }, phrasesToHighlight: { [phrase: string]: { [originalTerm: string]: string[] } }, options?: IStreamHighlightOptions) {\n    let opts = new DefaultStreamHighlightOptions().merge(options);\n    return HighlightUtils.highlightString(stream, getRestHighlightsForAllTerms(stream, termsToHighlight, phrasesToHighlight, opts), [], opts.cssClass);\n  }\n}\n\n\nfunction getRestHighlightsForAllTerms(toHighlight: string, termsToHighlight: { [originalTerm: string]: string[] }, phrasesToHighlight: { [phrase: string]: { [originalTerm: string]: string[] } }, opts: IStreamHighlightOptions): IHighlight[] {\n  let indexes = [];\n  let sortedTerms = _.keys(termsToHighlight).sort(termsSorting);\n  _.each(sortedTerms, (term: string) => {\n    let termsToIterate = _.compact([term].concat(termsToHighlight[term]).sort(termsSorting));\n    let regex = regexStart;\n    regex += termsToIterate.join('|') + ')(?=(?:' + nonWordBoundary + '|$)+)';\n    let indexesFound = StringUtils.getHighlights(toHighlight, new RegExp(regex, opts.regexFlags), term);\n    if (indexesFound != undefined && Utils.isNonEmptyArray(indexesFound)) {\n      indexes.push(indexesFound);\n    }\n  });\n\n  _.each(phrasesToHighlight, (phrase, origPhrase) => {\n    let split = origPhrase.split(' ');\n    let regex = regexStart;\n    _.each(split, (origWord, i) => {\n      regex += '(?:' + [origWord].concat(phrase[origWord]).join('|') + ')';\n      if (i == split.length - 1) {\n        regex += '(?=';\n      }\n      regex += nonWordBoundary;\n      if (i == split.length - 1) {\n        regex += ')';\n      }\n      if (i != split.length - 1) {\n        regex += '+';\n      }\n    });\n    regex += ')';\n    let indexesFound = StringUtils.getHighlights(toHighlight, new RegExp(regex, opts.regexFlags), origPhrase);\n    if (indexesFound != undefined && Utils.isNonEmptyArray(indexesFound)) {\n      indexes.push(indexesFound);\n    }\n  });\n\n  return _.chain(indexes)\n    .flatten()\n    .compact()\n    .uniq((highlight: IHighlight) => {\n      return highlight.offset;\n    })\n    .sortBy((highlight: IHighlight) => {\n      return highlight.offset;\n    })\n    .map((highlight) => {\n      let keysFromTerms = _.keys(termsToHighlight);\n      let keysFromPhrases = _.keys(phrasesToHighlight);\n      let keys = keysFromTerms.concat(keysFromPhrases);\n      let group = _.indexOf(keys, highlight.dataHighlightGroupTerm) + 1;\n      return _.extend(highlight, { dataHighlightGroup: group });\n    })\n    .value();\n}\n\nfunction termsSorting(first: string, second: string) {\n  return first.length - second.length;\n}\n\nfunction createStreamHTMLContainer(stream: string) {\n  let container = $$('div').el;\n  container.innerHTML = stream;\n  return container;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/StreamHighlightUtils.ts\n **/","export {QueryController} from './controllers/QueryController';\nexport {FacetQueryController} from './controllers/FacetQueryController';\nexport {FacetRangeQueryController} from './controllers/FacetRangeQueryController';\nexport {FacetSliderQueryController} from './controllers/FacetSliderQueryController';\nexport {HierarchicalFacetQueryController} from './controllers/HierarchicalFacetQueryController';\nexport {HistoryController} from './controllers/HistoryController';\nexport {LocalStorageHistoryController} from './controllers/LocalStorageHistoryController';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ControllersModules.ts\n **/","import {RootComponent} from '../ui/Base/RootComponent';\nimport {IQueryResults} from '../rest/QueryResults';\nimport {QueryBuilder} from '../ui/Base/QueryBuilder';\nimport {IQuery} from '../rest/Query';\nimport {ISearchEndpoint, IEndpointCallOptions} from '../rest/SearchEndpointInterface';\nimport {SearchEndpoint} from '../rest/SearchEndpoint';\nimport {LocalStorageUtils} from '../utils/LocalStorageUtils';\nimport {ISearchInterfaceOptions} from '../ui/SearchInterface/SearchInterface';\nimport {Assert} from '../misc/Assert';\nimport {SearchEndpointWithDefaultCallOptions} from '../rest/SearchEndpointWithDefaultCallOptions';\nimport {INewQueryEventArgs, IPreprocessResultsEventArgs, INoResultsEventArgs, IQuerySuccessEventArgs, IQueryErrorEventArgs, IDuringQueryEventArgs, QueryEvents, IFetchMoreSuccessEventArgs, IDoneBuildingQueryEventArgs, IBuildingQueryEventArgs, IBuildingCallOptionsEventArgs} from '../events/QueryEvents';\nimport {QueryUtils} from '../utils/QueryUtils';\nimport {Defer} from '../misc/Defer';\nimport {$$, Dom} from '../utils/Dom';\nimport {Utils} from '../utils/Utils';\nimport {Promise} from 'es6-promise';\nimport {BaseComponent} from '../ui/Base/BaseComponent';\nimport {ModalBox} from '../ExternalModulesShim';\ndeclare const coveoanalytics: CoveoAnalytics.CoveoUA;\n\n/**\n * Possible options when performing a query with the query controller\n */\nexport interface IQueryOptions {\n  /**\n   * If the analytics component is enabled in the interface, it will look for any query executed by the query controller for which no analytics event was associated.<br/>\n   * By setting this property to true, this will cancel this check when the query is performed\n   */\n  ignoreWarningSearchEvent?: boolean;\n  /**\n   * Specify that the query to execute is a search as you type. This information will be passed down in the query events for component and external code to determine their behavior\n   */\n  searchAsYouType?: boolean;\n  /**\n   * Specify a function that you wish to execute just before the query is executed\n   */\n  beforeExecuteQuery?: () => void;\n  /**\n   * Cancel the query\n   */\n  cancel?: boolean;\n  /**\n   * The component from which the query originated. For example the pager will set the property to tweak it's behaviour\n   */\n  origin?: any;\n\n  /**\n   * Whether or not to log the query in the user actions history when using the page view script: https://github.com/coveo/coveo.analytics.js.\n   * Only the 'q' part of the query will be logged.\n   * This option is useful, because it prevents the query to be logged twice when a {@link Recommendation} component is present.\n   * It also makes sure that only relevant queries are logged. For exemple, the 'empty' interface load query isn't logged.\n   */\n  logInActionsHistory?: boolean;\n  isFirstQuery?: boolean;\n  keepLastSearchUid?: boolean;\n  closeModalBox?: boolean;\n}\n\ninterface ILastQueryLocalStorage {\n  hash: string;\n  uid: string;\n  expire: number;\n}\n\nclass DefaultQueryOptions implements IQueryOptions {\n  searchAsYouType = false;\n  beforeExecuteQuery: () => void;\n  closeModalBox = true;\n  cancel = false;\n  logInActionsHistory = false;\n}\n\n/**\n * This class is automatically instantiated and bound to the root of your search interface when you initialize the framework.<br/>\n * It is essentially a singleton that wraps the access to the {@link SearchEndpoint} endpoint to execute query, and is in charge of triggering the different query events.<br/>\n * This is what every component of the framework uses internally to execute query or access the endpoint.<br/>\n * When calling <code>Coveo.executeQuery</code> this class is used.\n */\nexport class QueryController extends RootComponent {\n  static ID = 'QueryController';\n\n  private currentPendingQuery: Promise<IQueryResults>;\n  private lastQueryBuilder: QueryBuilder;\n  private lastQueryHash: string;\n  private lastQuery: IQuery;\n  private lastSearchUid: string;\n  private lastQueryResults: IQueryResults;\n  private currentError: any;\n  private firstQuery: boolean;\n  private createdOneQueryBuilder: boolean;\n  private showingExecutingQueryAnimation = false;\n  private overrideEndpoint: SearchEndpoint;\n\n  private localStorage = new LocalStorageUtils<ILastQueryLocalStorage>('lastQueryHash');\n\n  /**\n   * Create a new query controller\n   * @param element\n   * @param options\n   */\n  constructor(element: HTMLElement, public options: ISearchInterfaceOptions, public usageAnalytics, public searchInterface) {\n    super(element, QueryController.ID);\n    Assert.exists(element);\n    Assert.exists(options);\n    this.firstQuery = true;\n  }\n\n  /**\n   * Set the {@link SearchEndpoint} that the query controller should use to execute query\n   * @param endpoint\n   */\n  public setEndpoint(endpoint: SearchEndpoint) {\n    this.overrideEndpoint = endpoint;\n    this.logger.debug('Endpoint set', endpoint);\n  }\n\n  /**\n   * Get the {@link SearchEndpoint} that is currently used by the query controller to execute query\n   * @returns {SearchEndpoint}\n   */\n  public getEndpoint(): ISearchEndpoint {\n    let endpoint = this.overrideEndpoint || this.options.endpoint;\n\n    // We must wrap the endpoint in a decorator that'll add the call options\n    // we obtain by firing the proper event. Those are used for authentication\n    // providers, and I guess other stuff later on.\n    return new SearchEndpointWithDefaultCallOptions(endpoint, this.getCallOptions());\n  }\n\n  /**\n   * Return the last query that was performed by the query controller\n   * @returns {IQuery|Query}\n   */\n  public getLastQuery() {\n    return this.lastQuery || new QueryBuilder().build();\n  }\n\n  /**\n   * Execute a query and return a Promise of IQueryResults.<br/>\n   * This will execute the normal query flow, triggering all the necessary query events (newQuery <br/>\n   * All components present in the interface will act accordingly (modify the query and render results if needed).\n   * @param options\n   * @returns {Promise<IQueryResults>}\n   */\n  public executeQuery(options?: IQueryOptions): Promise<IQueryResults> {\n    options = <IQueryOptions>_.extend(new DefaultQueryOptions(), options);\n\n    if (options.closeModalBox) {\n      ModalBox.close(true);\n    }\n\n    this.logger.debug('Executing new query');\n\n    this.cancelAnyCurrentPendingQuery();\n\n    if (options.beforeExecuteQuery != null) {\n      options.beforeExecuteQuery();\n    }\n\n    if (!options.ignoreWarningSearchEvent) {\n      this.usageAnalytics.warnAboutSearchEvent();\n    }\n\n    this.showExecutingQueryAnimation();\n\n    let dataToSendOnNewQuery: INewQueryEventArgs = {\n      searchAsYouType: options.searchAsYouType,\n      cancel: options.cancel,\n      origin: options.origin\n    };\n\n    this.newQueryEvent(dataToSendOnNewQuery);\n\n    if (dataToSendOnNewQuery.cancel) {\n      this.cancelQuery();\n      return;\n    }\n\n    let queryBuilder = this.createQueryBuilder(options);\n\n    // The query was canceled\n    if (!queryBuilder) {\n      return;\n    }\n\n    let query = queryBuilder.build();\n    if (options.logInActionsHistory) {\n      this.logQueryInActionsHistory(query, options.isFirstQuery);\n    }\n\n    let endpointToUse = this.getEndpoint();\n\n    let promise = this.currentPendingQuery = endpointToUse.search(query);\n    promise.then((queryResults) => {\n      Assert.exists(queryResults);\n      let firstQuery = this.firstQuery;\n      if (this.firstQuery) {\n        this.firstQuery = false;\n      }\n      // If our promise is no longer the current one, then the query\n      // has been cancel. We should do nothing here.\n      if (promise !== this.currentPendingQuery) {\n        return;\n      }\n\n      this.logger.debug('Query results received', query, queryResults);\n      let enableHistory = this.searchInterface && this.searchInterface.options && this.searchInterface.options.enableHistory;\n\n      if ((!firstQuery || enableHistory) && this.keepLastSearchUid(query, queryResults)) {\n        queryResults.searchUid = this.getLastSearchUid();\n        queryResults._reusedSearchUid = true;\n        QueryUtils.setPropertyOnResults(queryResults, 'queryUid', this.getLastSearchUid());\n      } else {\n        this.lastQueryHash = this.queryHash(query, queryResults);\n        this.lastSearchUid = queryResults.searchUid;\n      }\n\n      this.lastQuery = query;\n      this.lastQueryResults = queryResults;\n      this.currentError = null;\n\n      let dataToSendOnPreprocessResult: IPreprocessResultsEventArgs = {\n        queryBuilder: queryBuilder,\n        query: query,\n        results: queryResults,\n        searchAsYouType: options.searchAsYouType\n      };\n      this.preprocessResultsEvent(dataToSendOnPreprocessResult);\n\n      let dataToSendOnNoResult: INoResultsEventArgs = {\n        queryBuilder: queryBuilder,\n        query: query,\n        results: queryResults,\n        searchAsYouType: options.searchAsYouType,\n        retryTheQuery: false\n      };\n      if (queryResults.results.length == 0) {\n        this.noResultEvent(dataToSendOnNoResult);\n      }\n\n      if (dataToSendOnNoResult.retryTheQuery) {\n        // When retrying the query, we must forward the results to the deferred we\n        // initially returned, in case someone is listening on it.\n        return this.executeQuery();\n      } else {\n        this.lastQueryBuilder = queryBuilder;\n        this.currentPendingQuery = undefined;\n\n        let dataToSendOnSuccess: IQuerySuccessEventArgs = {\n          queryBuilder: queryBuilder,\n          query: query,\n          results: queryResults,\n          searchAsYouType: options.searchAsYouType\n        };\n        this.querySuccessEvent(dataToSendOnSuccess);\n\n        Defer.defer(() => {\n          this.deferredQuerySuccessEvent(dataToSendOnSuccess);\n          this.hideExecutingQueryAnimation();\n        });\n        return queryResults;\n      }\n    }).catch((error?: any) => {\n      // If our deferred is no longer the current one, then the query\n      // has been cancel. We should do nothing here.\n      if (promise !== this.currentPendingQuery) {\n        return;\n      }\n\n      this.logger.error('Query triggered an error', query, error);\n\n      // this.currentPendingQuery.reject(error);\n      this.currentPendingQuery = undefined;\n      let dataToSendOnError: IQueryErrorEventArgs = {\n        queryBuilder: queryBuilder,\n        endpoint: endpointToUse,\n        query: query,\n        error: error,\n        searchAsYouType: options.searchAsYouType\n      };\n\n      this.lastQuery = query;\n      this.lastQueryResults = null;\n      this.currentError = error;\n      this.queryError(dataToSendOnError);\n\n      this.hideExecutingQueryAnimation();\n    });\n\n    let dataToSendDuringQuery: IDuringQueryEventArgs = {\n      queryBuilder: queryBuilder,\n      query: query,\n      searchAsYouType: options.searchAsYouType,\n      promise: promise\n    };\n    this.duringQueryEvent(dataToSendDuringQuery);\n\n    return this.currentPendingQuery;\n  }\n\n  /**\n   * Using the same parameters as the last successful query, fetch another batch of results. Particularly useful for infinite scrolling, for example.\n   * @param count\n   * @returns {any}\n   */\n  public fetchMore(count: number): Promise<IQueryResults> {\n    if (this.currentPendingQuery != undefined) {\n      return undefined;\n    }\n    // Send all pending events (think : search as you type)\n    // This allows us to get the real search id for the results when the query returns\n    this.usageAnalytics.sendAllPendingEvents();\n\n    let queryBuilder = new QueryBuilder();\n    this.continueLastQueryBuilder(queryBuilder, count);\n    let query = queryBuilder.build();\n    let endpointToUse = this.getEndpoint();\n    let promise: any = this.currentPendingQuery = endpointToUse.search(query);\n    let dataToSendDuringQuery: IDuringQueryEventArgs = {\n      queryBuilder: queryBuilder,\n      query: query,\n      searchAsYouType: false,\n      promise: promise\n    };\n    $$(this.element).trigger(QueryEvents.duringFetchMoreQuery, dataToSendDuringQuery);\n    this.lastQueryBuilder = queryBuilder;\n    this.lastQuery = query;\n    promise.then((results?: IQueryResults) => {\n      // We re-use the search id from the initial search here, even though the\n      // server provided us with a new one. 'Fetch mores' are considered to be\n      // the same query from an analytics point of view.\n\n      this.currentPendingQuery = undefined;\n\n      if (this.lastQueryResults == null) {\n        this.lastQueryResults = results;\n      } else {\n        _.forEach(results.results, (result) => {\n          this.lastQueryResults.results.push(result);\n        });\n      }\n\n      let dataToSendOnPreprocessResult: IPreprocessResultsEventArgs = {\n        queryBuilder: queryBuilder,\n        query: query,\n        results: results,\n        searchAsYouType: false\n      };\n      this.preprocessResultsEvent(dataToSendOnPreprocessResult);\n      QueryUtils.setIndexAndUidOnQueryResults(query, results, this.getLastSearchUid(), results.pipeline, results.splitTestRun);\n      let dataToSendOnFetchMoreSuccess: IFetchMoreSuccessEventArgs = {\n        query: query,\n        results: results,\n        queryBuilder: queryBuilder,\n        searchAsYouType: false\n      };\n      this.fetchMoreSuccessEvent(dataToSendOnFetchMoreSuccess);\n    });\n    return this.currentPendingQuery;\n  }\n\n  /**\n   * Cancel any pending query\n   */\n  public cancelQuery(): void {\n    this.cancelAnyCurrentPendingQuery();\n    this.hideExecutingQueryAnimation();\n  }\n\n  public deferExecuteQuery(options?: IQueryOptions) {\n    this.showExecutingQueryAnimation();\n    Defer.defer(() => this.executeQuery(options));\n  }\n\n  public ensureCreatedQueryBuilder() {\n    if (!this.createdOneQueryBuilder) {\n      this.createQueryBuilder(new DefaultQueryOptions());\n    }\n  }\n\n  public createQueryBuilder(options: IQueryOptions): QueryBuilder {\n    Assert.exists(options);\n\n    this.createdOneQueryBuilder = true;\n\n    let queryBuilder = new QueryBuilder();\n\n    // Default values, components will probably override them if they exists\n    queryBuilder.language = <string>String['locale'];\n    queryBuilder.firstResult = queryBuilder.firstResult || 0;\n\n    // Allow outside code to customize the query builder. We provide two events,\n    // to allow someone to have a peep at the query builder after the first phase\n    // and add some stuff depending on what was put in there. The facets are using\n    // this mechanism to generate query overrides.\n    let dataToSendDuringBuildingQuery: IBuildingQueryEventArgs = {\n      queryBuilder: queryBuilder,\n      searchAsYouType: options.searchAsYouType,\n      cancel: options.cancel\n    };\n    this.buildingQueryEvent(dataToSendDuringBuildingQuery);\n\n    let dataToSendDuringDoneBuildingQuery: IDoneBuildingQueryEventArgs = {\n      queryBuilder: queryBuilder,\n      searchAsYouType: options.searchAsYouType,\n      cancel: options.cancel\n    };\n    this.doneBuildingQueryEvent(dataToSendDuringDoneBuildingQuery);\n\n    if (dataToSendDuringBuildingQuery.cancel || dataToSendDuringDoneBuildingQuery.cancel) {\n      this.cancelQuery();\n      return;\n    }\n\n    let pipeline = this.getPipelineInUrl();\n    if (pipeline) {\n      queryBuilder.pipeline = pipeline;\n    }\n\n    return queryBuilder;\n  }\n\n  public isStandaloneSearchbox(): boolean {\n    return Utils.isNonEmptyString(this.options.searchPageUri);\n  }\n\n  public saveLastQuery() {\n    this.localStorage.save({\n      expire: new Date().getTime() + 1000 * 60 * 30, // Psoucy rolled dice and said 30 mins was the magic number\n      hash: this.lastQueryHash,\n      uid: this.lastSearchUid\n    });\n  }\n\n\n  // This field is exposed for components rendered in the results or on-demand which\n  // need access to the entire query. For example, the QuickviewDocument need to pass\n  // the entire query to the Search API. For other components, QueryStateModel or\n  // listening to events like 'doneBuildingQuery' is the way to go.\n  public getLastQueryHash(): string {\n    if (this.lastQueryHash != null) {\n      return this.lastQueryHash;\n    }\n    this.loadLastQueryHash();\n    return this.lastQueryHash || this.queryHash(new QueryBuilder().build());\n  }\n\n  private getLastSearchUid(): string {\n    if (this.lastSearchUid != null) {\n      return this.lastSearchUid;\n    }\n    this.loadLastQueryHash();\n    return this.lastSearchUid;\n  }\n\n  private loadLastQueryHash() {\n    let lastQuery = this.localStorage.load();\n    if (lastQuery != null && new Date().getTime() <= lastQuery.expire) {\n      this.lastQueryHash = lastQuery.hash;\n      this.lastSearchUid = lastQuery.uid;\n      this.localStorage.remove();\n    }\n  }\n\n  private continueLastQueryBuilder(queryBuilder: QueryBuilder, count: number) {\n    _.extend(queryBuilder, this.lastQueryBuilder);\n    queryBuilder.firstResult = queryBuilder.firstResult + queryBuilder.numberOfResults;\n    queryBuilder.numberOfResults = count;\n  }\n\n  private getPipelineInUrl() {\n    return QueryUtils.getUrlParameter('pipeline');\n  }\n\n  private cancelAnyCurrentPendingQuery() {\n    if (Utils.exists(this.currentPendingQuery)) {\n      this.logger.debug('Cancelling current pending query');\n      Promise.reject(this.currentPendingQuery);\n      this.currentPendingQuery = undefined;\n      return true;\n    }\n    return false;\n  }\n\n  private showExecutingQueryAnimation() {\n    if (!this.showingExecutingQueryAnimation) {\n      $$(this.element).addClass('coveo-executing-query');\n      this.showingExecutingQueryAnimation = true;\n    }\n  }\n\n  private hideExecutingQueryAnimation() {\n    if (this.showingExecutingQueryAnimation) {\n      $$(this.element).removeClass('coveo-executing-query');\n      this.showingExecutingQueryAnimation = false;\n    }\n  }\n\n  private keepLastSearchUid(query: IQuery, queryResults: IQueryResults) {\n    return this.getLastQueryHash() == this.queryHash(query, queryResults);\n  }\n\n  private queryHash(query: IQuery, queryResults?: IQueryResults): string {\n    let queryHash = JSON.stringify(_.omit(query, 'firstResult', 'groupBy', 'debug'));\n    if (queryResults != null) {\n      queryHash += queryResults.pipeline;\n    }\n    return queryHash;\n  }\n\n  private getCallOptions(): IEndpointCallOptions {\n    let args: IBuildingCallOptionsEventArgs = {\n      options: {\n        authentication: []\n      }\n    };\n\n    $$(this.element).trigger(QueryEvents.buildingCallOptions, args);\n    return args.options;\n  }\n\n  private newQueryEvent(args) {\n    $$(this.element).trigger(QueryEvents.newQuery, args);\n  }\n\n  private buildingQueryEvent(args) {\n    $$(this.element).trigger(QueryEvents.buildingQuery, args);\n  }\n\n  private doneBuildingQueryEvent(args) {\n    $$(this.element).trigger(QueryEvents.doneBuildingQuery, args);\n  }\n\n  private duringQueryEvent(args) {\n    $$(this.element).trigger(QueryEvents.duringQuery, args);\n  }\n\n  private querySuccessEvent(args) {\n    $$(this.element).trigger(QueryEvents.querySuccess, args);\n  }\n\n  private fetchMoreSuccessEvent(args) {\n    $$(this.element).trigger(QueryEvents.fetchMoreSuccess, args);\n  }\n\n  private deferredQuerySuccessEvent(args) {\n    $$(this.element).trigger(QueryEvents.deferredQuerySuccess, args);\n  }\n\n  private queryError(args) {\n    $$(this.element).trigger(QueryEvents.queryError, args);\n  }\n\n  private preprocessResultsEvent(args) {\n    $$(this.element).trigger(QueryEvents.preprocessResults, args);\n  }\n\n  private noResultEvent(args) {\n    $$(this.element).trigger(QueryEvents.noResults, args);\n  }\n\n  public debugInfo() {\n    let info: any = {\n      'query': this.lastQuery,\n    };\n\n    if (this.lastQueryResults != null) {\n      info.queryDuration = () => this.buildQueryDurationSection(this.lastQueryResults);\n      info.results = () => _.omit(this.lastQueryResults, 'results');\n    }\n\n    if (this.currentError != null) {\n      info.error = () => this.currentError;\n    }\n\n    return info;\n  }\n\n  private buildQueryDurationSection(queryResults: IQueryResults) {\n    let dom = Dom.createElement('div', { className: 'coveo-debug-queryDuration' });\n    let graph = Dom.createElement('div', { className: 'coveo-debug-durations' });\n    let debugRef = BaseComponent.getComponentRef('Debug');\n    dom.appendChild(graph);\n    _.forEach(debugRef.durationKeys, (key: string) => {\n      let duration = queryResults[key];\n      if (duration != null) {\n        graph.appendChild(Dom.createElement('div', {\n          className: 'coveo-debug-duration',\n          style: `width:${duration}px`,\n          'data-id': key\n        }));\n        let legend = Dom.createElement('div', { className: 'coveo-debug-duration-legend', 'data-id': key });\n        dom.appendChild(legend);\n        let keyDom = Dom.createElement('span', { className: 'coveo-debug-duration-label' });\n        keyDom.appendChild(document.createTextNode(key));\n        legend.appendChild(keyDom);\n        let durationDom = Dom.createElement('span', { className: 'coveo-debug-duration-value' });\n        durationDom.appendChild(document.createTextNode(duration));\n        legend.appendChild(durationDom);\n      }\n    });\n    return dom;\n  }\n\n  private logQueryInActionsHistory(query: IQuery, isFirstQuery: boolean) {\n    if (typeof coveoanalytics != 'undefined') {\n      let store = new coveoanalytics.history.HistoryStore();\n      let queryElement: CoveoAnalytics.HistoryQueryElement = {\n        name: 'Query',\n        value: query.q,\n        time: JSON.stringify(new Date())\n      };\n      store.addElement(queryElement);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/QueryController.ts\n **/","import {BaseComponent} from './BaseComponent';\n\nexport class RootComponent extends BaseComponent {\n  constructor(public element: HTMLElement, public type: string) {\n    super(element, type);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Base/RootComponent.ts\n **/","import {Assert} from '../../misc/Assert';\nimport {$$} from '../../utils/Dom';\nimport {DebugEvents} from '../../events/DebugEvents';\nimport {Logger} from '../../misc/Logger';\n\ndeclare var Coveo;\n\nexport interface IComponentHtmlElement extends HTMLElement {\n  CoveoBoundComponents?: BaseComponent[];\n}\n\n/**\n * Every component in the framework ultimately inherits from this base component class.\n */\nexport class BaseComponent {\n  /**\n   * Allows component to log in the dev console.\n   */\n  public logger: Logger;\n  /**\n   * A disabled component will not participate in the query, or listen to {@link ComponentEvents}.\n   * @type {boolean}\n   */\n  public disabled = false;\n  /**\n   * The static ID that each component need to be identified.<br/>\n   * For example, SearchButton -> static ID : SearchButton -> className : CoveoSearchButton\n   */\n  static ID: string;\n\n  constructor(public element: HTMLElement, public type: string) {\n    Assert.exists(element);\n    Assert.isNonEmptyString(type);\n    this.logger = new Logger(this);\n    this.initDebugInfo();\n    BaseComponent.bindComponentToElement(element, this);\n  }\n\n  /**\n   * Return the debug info about this component.\n   * @returns {any}\n   */\n  public debugInfo() {\n    var info: any = {};\n    info[this['constructor']['ID']] = this;\n    return info;\n  }\n\n  /**\n   * Disable the component.\n   * Normally this means that the component will not execute handlers for the framework events (query events, for example).\n   * Component are enabled by default on creation.\n   */\n  public disable() {\n    this.disabled = true;\n  }\n\n  /**\n   * Enable the component.\n   * Normally this means that the component will execute handlers for the framework events (query events, for example).\n   * Components are enabled by default on creation.\n   */\n  public enable() {\n    this.disabled = false;\n  }\n\n\n  private initDebugInfo() {\n    $$(this.element).on('doubleclick', function (e: MouseEvent) {\n      if (e.altKey) {\n        var debugInfo = this.debugInfo();\n        if (debugInfo != null) {\n          $(this.root).trigger(DebugEvents.showDebugPanel, this.debugInfo());\n        }\n      }\n    });\n  }\n\n  static bindComponentToElement(element: HTMLElement, component: BaseComponent) {\n    Assert.exists(element);\n    Assert.exists(component);\n    Assert.isNonEmptyString(component.type);\n    element[BaseComponent.computeCssClassNameForType(component.type)] = component;\n    $$(element).addClass(BaseComponent.computeCssClassNameForType(component.type));\n    BaseComponent.getBoundComponentsForElement(element).push(component);\n  }\n\n  static computeCssClassName(componentClass: any): string {\n    return componentClass['className'] ? componentClass['className'] : componentClass['className'] = BaseComponent.computeCssClassNameForType(componentClass['ID']);\n  }\n\n  static computeCssClassNameForType(type: string): string {\n    Assert.isNonEmptyString(type);\n    return 'Coveo' + type;\n  }\n\n  static computeSelectorForType(type: string): string {\n    Assert.isNonEmptyString(type);\n    return '.' + BaseComponent.computeCssClassNameForType(type);\n  }\n\n  static getBoundComponentsForElement(element: IComponentHtmlElement): BaseComponent[] {\n    Assert.exists(element);\n\n    if (element.CoveoBoundComponents == null) {\n      element.CoveoBoundComponents = [];\n    }\n    return element.CoveoBoundComponents;\n  }\n\n  static getComponentRef(component: string): any {\n    return Coveo[component];\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Base/BaseComponent.ts\n **/","import {ExpressionBuilder} from './ExpressionBuilder';\nimport {QueryUtils} from '../../utils/QueryUtils';\nimport {IRankingFunction} from '../../rest/RankingFunction';\nimport {IQueryFunction} from '../../rest/QueryFunction';\nimport {IGroupByRequest} from '../../rest/GroupByRequest';\nimport {IQuery} from '../../rest/Query';\n\n/**\n * Describe the expressions part of a QueryBuilder.\n */\nexport interface IQueryBuilderExpression {\n  /**\n   * The whole expression\n   */\n  full?: string;\n  /**\n   * The full part, but without the constant.\n   */\n  withoutConstant?: string;\n  /**\n   * The constant part of the expression\n   */\n  constant?: string;\n  /**\n   * The basic part of the expression\n   */\n  basic?: string;\n  /**\n   * The advanced part of the expression\n   */\n  advanced?: string;\n}\n\n/**\n * The QueryBuilder is used to build a {@link IQuery} that will be able to be executed using the Search API.<br/>\n * The class exposes several members and methods that help components and external code to build up the final query that is sent to the Search API.<br/>\n */\nexport class QueryBuilder {\n  /**\n   * Used to build the basic part of the query expression.<br/>\n   * This part typically consists of user-entered content such as query keywords, etc.\n   * @type {Coveo.ExpressionBuilder}\n   */\n  public expression: ExpressionBuilder = new ExpressionBuilder();\n  /**\n   * Used to build the advanced part of the query expression.<br/>\n   * This part is typically formed of filter expressions generated by components such as facets, external code, etc.\n   * @type {Coveo.ExpressionBuilder}\n   */\n  public advancedExpression: ExpressionBuilder = new ExpressionBuilder();\n  /**\n   * Used to build the advanced part of the query expression.<br/>\n   * This part is similar to `advancedExpression`, but its content is interpreted as a constant expression by the index and it takes advantage of special caching features.\n   * @type {Coveo.ExpressionBuilder}\n   */\n  public constantExpression: ExpressionBuilder = new ExpressionBuilder();\n  /**\n   * Used to build the disjunctive part of the query expression.<br/>\n   * When present, this part is evaluated separately from the other expressions and the matching results are merged to those matching expressions, `advancedExpression` and `constantExpression`.<br/>\n   * The final boolean expression for the query is thus (basic advanced constant) OR (disjunction).\n   * @type {Coveo.ExpressionBuilder}\n   */\n  public disjunctionExpression: ExpressionBuilder = new ExpressionBuilder();\n  /**\n   * The hub value set from the {@link Analytics} component.<br/>\n   * Used for analytics reporting in the Coveo platform.\n   */\n  public searchHub: string;\n  /**\n   * The tab value set from the {@link Tab} component.\n   */\n  public tab: string;\n  public language: string;\n  /**\n   * Name of the query pipeline to use.<br/>\n   * This specifies the name of the query pipeline to use for the query. If not specified, the default value is default, which means the default query pipeline will be used.\n   */\n  public pipeline: string;\n  /**\n   * The maximum age for cached query results, in milliseconds.<br/>\n   * If results for the exact same request (including user identities) are available in the in-memory cache, they will be used if they are not older than the specified value.<br/>\n   * Otherwise, the query will be sent to the index.\n   */\n  public maximumAge: number;\n  /**\n   * Whether to enable wildcards on the basic expression keywords.<br/>\n   * This enables the wildcard features of the index. Coveo Platform will expand keywords containing wildcard characters to the possible matching keywords to broaden the query.<br/>\n   * (see : https://onlinehelp.coveo.com/en/ces/7.0/user/using_wildcards_in_queries.htm).<br/>\n   * If not specified, this parameter defaults to false.\n   */\n  public enableWildcards: boolean;\n  /**\n   * Whether to enable question marks with wildcards.<br/>\n   * This enables using the question mark ? character within wildcard expressions.\n   */\n  public enableQuestionMarks: boolean;\n  /**\n   * Whether to disable the special query syntax such as field references for the basic query expression (parameter q).\n   * It is equivalent to a No syntax block applied to the basic query expression.\n   * If not specified, the parameter defaults to false.\n   */\n  public disableQuerySyntax: boolean = false;\n  /**\n   * Whether to enable the support for operator in lowercase (AND OR -> and or).\n   */\n  public enableLowercaseOperators: boolean;\n  /**\n   * Whether to enable partial matching of the basic expression keywords.<br/>\n   * By activating this, when the basic expression contains at least {@link IQuery.partialMatchKeywords}, documents containing only the number of keywords specified by {@link IQuery.partialMatchThreshold} will also match the query.<br/>\n   * Without this option, documents are required to contain all the keywords in order to match the query.<br/>\n   * If not specified, this parameter defaults to false.\n   */\n  public enablePartialMatch: boolean;\n  /**\n   * The minimum number of keywords needed to activate partial match.<br/>\n   * This specifies the minimum number of keywords needed for the partial match feature to activate.<br/>\n   * If the basic expression contains less than this number of keywords, no transformation is applied on the query.<br/>\n   * If not specified, this parameter defaults to 5.\n   */\n  public partialMatchKeywords: number;\n  /**\n   * The threshold to use for matching documents when partial match is enabled.<br/>\n   * This specifies the minimum number of query keywords that a document must contain when partial match is enabled. This value can either be an absolute number or a percentage value based on the total number of keywords.<br/>\n   * If not specified, this parameter defaults to 50%.\n   */\n  public partialMatchThreshold: string;\n  /**\n   * This is the 0-based index of the first result to return.<br/>\n   * If not specified, this parameter defaults to 0.\n   */\n  public firstResult: number = 0;\n  /**\n   * This is the number of results to return, starting from {@link IQuery.firstResult}.<br/>\n   * If not specified, this parameter defaults to 10.\n   */\n  public numberOfResults: number = 10;\n  /**\n   * This specifies the length (in number of characters) of the excerpts generated by the indexer based on the keywords present in the query.<br/>\n   * The index includes the top most interesting sentences (in the order they appear in the document) that fit in the specified number of characters.<br/>\n   * When not specified, the default value is 200.\n   */\n  public excerptLength: number;\n  /**\n   * This specifies a field on which {@link Folding} should be performed.<br/>\n   * Folding is a kind of duplicate filtering where only the first result with any given value of the field is included in the result set.<br/>\n   * It's typically used to return only one result in a conversation, for example when forum posts in a thread are indexed as separate items.\n   */\n  public filterField: string;\n  /**\n   * Number of results that should be folded, using the {@link IQuery.filterField}.\n   */\n  public filterFieldRange: number;\n  /**\n   * Specifies the `parentField` when doing parent-child loading (See : {@link Folding}).\n   */\n  public parentField: string;\n  /**\n   * Specifies the childField when doing parent-child loading (See : {@link Folding}).\n   */\n  public childField: string;\n  public fieldsToInclude: string[];\n  public requiredFields: string[] = [];\n  public includeRequiredFields: boolean = false;\n  public fieldsToExclude: string[];\n  /**\n   * Whether to enable query corrections on this query (see {@link DidYouMean}).\n   */\n  public enableDidYouMean: boolean = false;\n  /**\n   * Whether to enable debug info on the query.<br/>\n   * This will return additional information on the resulting JSON response from the Search API.<br/>\n   * Mostly: execution report (a detailed breakdown of the parsed and executed query).\n   */\n  public enableDebug: boolean = false;\n  /**\n   * Whether the index should take collaborative rating in account when ranking result (see : {@link ResultRating}).\n   */\n  public enableCollaborativeRating: boolean;\n  /**\n   * This specifies the sort criterion(s) to use to sort results. If not specified, this parameter defaults to relevancy.<br/>\n   * Possible values are : <br/>\n   * -- relevancy :  This uses all the configured ranking weights as well as any specified ranking expressions to rank results.<br/>\n   * -- dateascending / datedescending Sort using the value of the `@date` field, which is typically the last modification date of an item in the index.<br/>\n   * -- qre : Sort using only the weights applied through ranking expressions. This is much like using `relevancy` except that automatic weights based on keyword proximity etc, are not computed.<br/>\n   * -- nosort : Do not sort the results. The order in which items are returned is essentially random.<br/>\n   * -- @field ascending / @field descending Sort using the value of a custom field.\n   */\n  public sortCriteria: string = 'relevancy';\n  public sortField: string;\n  public retrieveFirstSentences: boolean = true;\n  public timezone: string;\n  public queryUid: string = QueryUtils.createGuid();\n  /**\n   * This specifies an array of Query Function operation that will be executed on the results.\n   */\n  public queryFunctions: IQueryFunction[] = [];\n  /**\n   * This specifies an array of Ranking Function operations that will be executed on the results.\n   */\n  public rankingFunctions: IRankingFunction[] = [];\n  /**\n   * This specifies an array of Group By operations that can be performed on the query results to extract facets.\n   */\n  public groupByRequests: IGroupByRequest[] = [];\n  public enableDuplicateFiltering: boolean = false;\n  /**\n   * The context is a map of key_value that can be used in the Query pipeline in the Coveo platform.<br/>\n   */\n  public context: { [key: string]: any };\n  /**\n   * The actions history represents the past actions a user made and is used by reveal to suggest recommendations.\n   * It is generated by the page view script (https://github.com/coveo/coveo.analytics.js).\n   */\n  public actionsHistory: string;\n  /**\n   * This is the ID of the recommendation interface that generated the query.\n   */\n  public recommendation: string;\n  /**\n   * Build the current content or state of the query builder and return a {@link IQuery}.<br/>\n   * build can be called multiple times on the same QueryBuilder.\n   * @returns {IQuery}\n   */\n  build(): IQuery {\n    var query: IQuery = {\n      q: this.expression.build(),\n      aq: this.advancedExpression.build(),\n      cq: this.constantExpression.build(),\n      dq: this.disjunctionExpression.build(),\n\n      searchHub: this.searchHub,\n      tab: this.tab,\n      language: this.language,\n      pipeline: this.pipeline,\n      maximumAge: this.maximumAge,\n\n      wildcards: this.enableWildcards,\n      questionMark: this.enableQuestionMarks,\n      lowercaseOperators: this.enableLowercaseOperators,\n      partialMatch: this.enablePartialMatch,\n      partialMatchKeywords: this.partialMatchKeywords,\n      partialMatchThreshold: this.partialMatchThreshold,\n\n      firstResult: this.firstResult,\n      numberOfResults: this.numberOfResults,\n      excerptLength: this.excerptLength,\n      filterField: this.filterField,\n      filterFieldRange: this.filterFieldRange,\n      parentField: this.parentField,\n      childField: this.childField,\n      fieldsToInclude: this.computeFieldsToInclude(),\n      fieldsToExclude: this.fieldsToExclude,\n      enableDidYouMean: this.enableDidYouMean,\n      sortCriteria: this.sortCriteria,\n      sortField: this.sortField,\n      queryFunctions: this.queryFunctions,\n      rankingFunctions: this.rankingFunctions,\n      groupBy: this.groupByRequests,\n      retrieveFirstSentences: this.retrieveFirstSentences,\n      timezone: this.timezone,\n      disableQuerySyntax: this.disableQuerySyntax,\n      enableDuplicateFiltering: this.enableDuplicateFiltering,\n      enableCollaborativeRating: this.enableCollaborativeRating,\n      debug: this.enableDebug,\n      context: this.context,\n      actionsHistory: this.actionsHistory,\n      recommendation: this.recommendation\n    };\n    return query;\n  }\n\n  /**\n   * Return only the expression(s) part(s) of the query, as a string.<br/>\n   * This means the basic, advanced and constant part in a complete expression {@link IQuery.q}, {@link IQuery.aq}, {@link IQuery.cq}.\n   * @returns {string}\n   */\n  public computeCompleteExpression(): string {\n    return this.computeCompleteExpressionParts().full;\n  }\n\n  /**\n   * Return only the expression(s) part(s) of the query, as an object.\n   * @returns {{full: string, withoutConstant: string, constant: string}}\n   */\n  public computeCompleteExpressionParts(): IQueryBuilderExpression {\n    var withoutConstant = ExpressionBuilder.merge(this.expression, this.advancedExpression);\n\n    return {\n      full: ExpressionBuilder.mergeUsingOr(ExpressionBuilder.merge(withoutConstant, this.constantExpression), this.disjunctionExpression).build(),\n      withoutConstant: ExpressionBuilder.mergeUsingOr(withoutConstant, this.disjunctionExpression).build(),\n      basic: ExpressionBuilder.mergeUsingOr(this.expression, this.disjunctionExpression).build(),\n      advanced: ExpressionBuilder.mergeUsingOr(this.advancedExpression, this.disjunctionExpression).build(),\n      constant: ExpressionBuilder.mergeUsingOr(this.constantExpression, this.disjunctionExpression).build()\n    };\n  }\n\n  /**\n   * Return only the expression(s) part(s) of the query, as a string, except the given expression.<br/>\n   * This is used by {@link Facet}, to build their group by request with query override.\n   * @param except\n   * @returns {string}\n   */\n  public computeCompleteExpressionExcept(except: string): string {\n    return this.computeCompleteExpressionPartsExcept(except).full;\n  }\n\n  /**\n   * Return only the expression(s) part(s) of the query, as an object, except the given expression.<br/>\n   * This is used by {@link Facet}, to build their group by request with query override.\n   * @param except\n   * @returns {{full: string, withoutConstant: string, constant: string}}\n   */\n  public computeCompleteExpressionPartsExcept(except: string): IQueryBuilderExpression {\n    var withoutConstantAndExcept = ExpressionBuilder.merge(this.expression, this.advancedExpression);\n    withoutConstantAndExcept.remove(except);\n\n    var basicAndExcept = new ExpressionBuilder();\n    basicAndExcept.fromExpressionBuilder(this.expression);\n    basicAndExcept.remove(except);\n\n    var advancedAndExcept = new ExpressionBuilder();\n    advancedAndExcept.fromExpressionBuilder(this.advancedExpression);\n    advancedAndExcept.remove(except);\n\n    return {\n      full: ExpressionBuilder.mergeUsingOr(ExpressionBuilder.merge(withoutConstantAndExcept, this.constantExpression), this.disjunctionExpression).build(),\n      withoutConstant: ExpressionBuilder.mergeUsingOr(withoutConstantAndExcept, this.disjunctionExpression).build(),\n      basic: ExpressionBuilder.mergeUsingOr(basicAndExcept, this.disjunctionExpression).build(),\n      advanced: ExpressionBuilder.mergeUsingOr(advancedAndExcept, this.disjunctionExpression).build(),\n      constant: ExpressionBuilder.mergeUsingOr(this.constantExpression, this.disjunctionExpression).build()\n    };\n  }\n\n  /**\n   * Add fields to specifically include when the results return.<br/>\n   * This can be used to accelerate the execution time of every query, as there is much less data to process if you whitelist specific fields.\n   * @param fields\n   */\n  public addFieldsToInclude(fields: string[]) {\n    this.fieldsToInclude = _.uniq((this.fieldsToInclude || []).concat(fields));\n  }\n\n  public addRequiredFields(fields: string[]) {\n    this.requiredFields = _.uniq(this.requiredFields.concat(fields));\n  }\n\n  /**\n   * Add fields to specifically exclude when the results return.<br/>\n   * This can be used to accelerate the execution time of every query, as there is much less data to process if you blacklist specific fields.\n   * @param fields\n   */\n  public addFieldsToExclude(fields: string[]) {\n    this.fieldsToExclude = _.uniq((this.fieldsToInclude || []).concat(fields));\n  }\n\n  public computeFieldsToInclude() {\n    if (this.includeRequiredFields || this.fieldsToInclude != null) {\n      return this.requiredFields.concat(this.fieldsToInclude || []);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Add a single context key->value pair to the query.<br/>\n   * This is used by the Query pipeline in the Coveo platform.\n   * @param key\n   * @param value\n   */\n  public addContextValue(key: string, value: any) {\n    if (this.context == null) {\n      this.context = {};\n    }\n    this.context[key] = value;\n  }\n\n  /**\n   * Add a context object to the query.<br/>\n   * This can contain multiple key->value.<br/>\n   * This is used by the Query pipeline in the Coveo platform.\n   * @param values\n   */\n  public addContext(values: { [key: string]: any }) {\n    if (this.context == null) {\n      this.context = {};\n    }\n    _.extend(this.context, values);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Base/QueryBuilder.ts\n **/","import {Assert} from '../../misc/Assert';\nimport {QueryUtils} from '../../utils/QueryUtils';\n\n/**\n * An `ExpressionBuilder` that is mostly used by the {@link QueryBuilder}.<br/>\n * It is used to build a single query expression.<br/>\n * It allows combining multiple expression parts into a single string and provides utilities to generate common expression parts.\n */\nexport class ExpressionBuilder {\n  private parts: string[] = []; // he he he\n  public wrapParts: boolean = true;\n\n  /**\n   * Add a new part to the expression.\n   * @param expression\n   */\n  public add(expression: string) {\n    Assert.isNonEmptyString(expression);\n    this.parts.push(expression);\n  }\n\n  /**\n   * Take another `ExpressionBuilder`, and copy it.\n   * @param expression\n   */\n  public fromExpressionBuilder(expression: ExpressionBuilder) {\n    this.parts = this.parts.concat(expression.parts);\n  }\n\n  /**\n   * Add a new part to the expression, but specific for field values<br/>\n   * eg @field=(value1,value2,value3).\n   * @param field The field for which to create an expression (e.g.: @foo).\n   * @param operator The operator to use e.g.: = (equal) == (strict equal) <> (not equal).\n   * @param values The values to put in the expression.\n   */\n  public addFieldExpression(field: string, operator: string, values: string[]) {\n    Assert.isNonEmptyString(field);\n    Assert.stringStartsWith(field, '@');\n    Assert.isNonEmptyString(operator);\n    Assert.isLargerOrEqualsThan(1, values.length);\n\n    this.add(QueryUtils.buildFieldExpression(field, operator, values));\n  }\n\n  /**\n   * Add a new part to the expression, but specific for field values<br/>\n   * eg : NOT @field==(value1, value2, value3).\n   * @param field The field for which to create an expression (e.g.: @foo)\n   * @param values The values to put in the expression.\n   */\n  public addFieldNotEqualExpression(field: string, values: string[]) {\n    Assert.isNonEmptyString(field);\n    Assert.stringStartsWith(field, '@');\n    Assert.isLargerOrEqualsThan(1, values.length);\n\n    this.add(QueryUtils.buildFieldNotEqualExpression(field, values));\n  }\n\n  /**\n   * Removes an expression from the builder.\n   * @param expression\n   */\n  public remove(expression: string) {\n    Assert.isNonEmptyString(expression);\n    var index = _.indexOf(this.parts, expression);\n    if (index != -1) {\n      this.parts.splice(_.indexOf(this.parts, expression), 1);\n    }\n  }\n\n  /**\n   * Checks if the builder is currently empty.\n   * @returns {boolean}\n   */\n  public isEmpty(): boolean {\n    return this.parts.length == 0;\n  }\n\n  /**\n   * Builds the expression string by combining all the parts together.<br/>\n   * @param exp expression to join the different parts, default to a space.\n   * @returns {any}\n   */\n  public build(exp: string = ' '): string {\n    if (this.parts.length == 0) {\n      return undefined;\n    } else if (this.parts.length == 1) {\n      return this.parts[0];\n    } else if (this.wrapParts) {\n      return '(' + this.parts.join(')' + exp + '(') + ')';\n    } else {\n      return this.parts.join(exp);\n    }\n  }\n\n  /**\n   * Merges several `ExpressionBuilder` together.\n   * @param builders Builders that should be merged.\n   * @returns {Coveo.ExpressionBuilder}\n   */\n  static merge(...builders: ExpressionBuilder[]): ExpressionBuilder {\n    var merged = new ExpressionBuilder();\n    _.each(builders, (builder: ExpressionBuilder) => {\n      merged.parts = merged.parts.concat(builder.parts);\n    });\n\n    return merged;\n  }\n\n  /**\n   * Merges several `ExpressionBuilder` together, using the OR operator.\n   * @param builders Builders that should be merged.\n   * @returns {Coveo.ExpressionBuilder}\n   */\n  static mergeUsingOr(...builders: ExpressionBuilder[]): ExpressionBuilder {\n    var nonEmpty = _.filter(builders, (b: ExpressionBuilder) => !b.isEmpty());\n\n    var merged = new ExpressionBuilder();\n\n    if (nonEmpty.length == 1) {\n      merged.parts = [].concat(nonEmpty[0].parts);\n    } else if (nonEmpty.length > 1) {\n      var parts = _.map(nonEmpty, b => b.build());\n      merged.add('(' + parts.join(') OR (') + ')');\n    }\n    return merged;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Base/ExpressionBuilder.ts\n **/","import {ISearchEndpoint, IEndpointCallOptions, IGetDocumentOptions, ISearchEndpointOptions, IViewAsHtmlOptions} from './SearchEndpointInterface';\nimport {IQuery} from './Query';\nimport {ITaggingRequest} from './TaggingRequest';\nimport {IRatingRequest} from './RatingRequest';\nimport {IRevealQuerySuggestRequest} from './RevealQuerySuggest';\nimport {IRevealQuerySuggestResponse} from './RevealQuerySuggest';\nimport {IIndexFieldValue} from '../rest/FieldValue';\nimport {IQueryResult} from '../rest/QueryResult';\nimport {IEndpointError} from '../rest/EndpointError';\nimport {IExtension} from '../rest/Extension';\nimport {IQueryResults} from './QueryResults';\nimport {IFieldDescription} from '../rest/FieldDescription';\nimport {IListFieldValuesRequest} from './ListFieldValuesRequest';\nimport {ISubscriptionRequest, ISubscription} from './Subscription';\nimport {ISentryLog} from './SentryLog';\n\nexport class SearchEndpointWithDefaultCallOptions implements ISearchEndpoint {\n  options: ISearchEndpointOptions;\n\n  constructor(private endpoint: ISearchEndpoint, private callOptions?: IEndpointCallOptions) {\n    this.options = endpoint.options;\n  }\n\n  public getBaseUri(): string {\n    return this.endpoint.getBaseUri();\n  }\n\n  public getBaseAlertsUri(): string {\n    return this.endpoint.getBaseAlertsUri();\n  }\n\n  public getAuthenticationProviderUri(provider: string, returnUri: string, message: string): string {\n    return this.endpoint.getAuthenticationProviderUri(provider, returnUri, message);\n  }\n\n  public isJsonp(): boolean {\n    return this.endpoint.isJsonp();\n  }\n\n  public search(query: IQuery, callOptions?: IEndpointCallOptions): Promise<IQueryResults> {\n    return this.endpoint.search(query, this.enrichCallOptions(callOptions));\n  }\n\n  public getExportToExcelLink(query: IQuery, numberOfResults: number, callOptions?: IEndpointCallOptions): string {\n    return this.endpoint.getExportToExcelLink(query, numberOfResults, this.enrichCallOptions(callOptions));\n  }\n\n  public tagDocument(taggingRequest: ITaggingRequest, callOptions?: IEndpointCallOptions): Promise<boolean> {\n    return this.endpoint.tagDocument(taggingRequest, this.enrichCallOptions(taggingRequest));\n  }\n\n  public getRevealQuerySuggest(request: IRevealQuerySuggestRequest, callOptions?: IEndpointCallOptions): Promise<IRevealQuerySuggestResponse> {\n    return this.endpoint.getRevealQuerySuggest(request, this.enrichCallOptions(callOptions));\n  }\n\n  public rateDocument(ratingRequest: IRatingRequest, callOptions?: IEndpointCallOptions): Promise<boolean> {\n    return this.endpoint.rateDocument(ratingRequest, this.enrichCallOptions(callOptions));\n  }\n\n  public getRawDataStream(documentUniqueId: string, dataStreamType: string, callOptions?: IViewAsHtmlOptions): Promise<ArrayBuffer> {\n    return this.endpoint.getRawDataStream(documentUniqueId, dataStreamType, this.enrichCallOptions(callOptions));\n  }\n\n  public getDocument(documentUniqueId: string, callOptions?: IGetDocumentOptions): Promise<IQueryResult> {\n    return this.endpoint.getDocument(documentUniqueId, this.enrichCallOptions(callOptions));\n  }\n\n  public getDocumentText(documentUniqueID: string, callOptions?: IEndpointCallOptions): Promise<string> {\n    return this.endpoint.getDocumentText(documentUniqueID, this.enrichCallOptions(callOptions));\n  }\n\n  public getDocumentHtml(documentUniqueID: string, callOptions?: IViewAsHtmlOptions): Promise<HTMLDocument> {\n    return this.endpoint.getDocumentHtml(documentUniqueID, this.enrichCallOptions(callOptions));\n  }\n\n  public getViewAsHtmlUri(documentUniqueID: string, callOptions?: IViewAsHtmlOptions): string {\n    return this.endpoint.getViewAsHtmlUri(documentUniqueID, this.enrichCallOptions(callOptions));\n  }\n\n  public getViewAsDatastreamUri(documentUniqueID: string, dataStreamType: string, callOptions?: IViewAsHtmlOptions): string {\n    return this.endpoint.getViewAsDatastreamUri(documentUniqueID, dataStreamType, this.enrichCallOptions(callOptions));\n  }\n\n  public listFieldValues(request: IListFieldValuesRequest, callOptions?: IEndpointCallOptions): Promise<IIndexFieldValue[]> {\n    return this.endpoint.listFieldValues(request, this.enrichCallOptions(callOptions));\n  }\n\n  public listFields(callOptions?: IEndpointCallOptions): Promise<IFieldDescription[]> {\n    return this.endpoint.listFields(this.enrichCallOptions(callOptions));\n  }\n\n  public extensions(callOptions?: IEndpointCallOptions): Promise<IExtension[]> | Promise<IEndpointError> {\n    return this.endpoint.extensions(this.enrichCallOptions(callOptions));\n  }\n\n  public follow(request: ISubscriptionRequest): Promise<ISubscription> {\n    return this.endpoint.follow(request);\n  }\n\n  public listSubscriptions(page: number): Promise<ISubscription[]> {\n    return this.endpoint.listSubscriptions(page);\n  }\n\n  public updateSubscription(subscription: ISubscription): Promise<ISubscription> {\n    return this.endpoint.updateSubscription(subscription);\n  }\n\n  public deleteSubscription(subscription: ISubscription): Promise<ISubscription> {\n    return this.endpoint.deleteSubscription(subscription);\n  }\n\n  public logError(sentryLog: ISentryLog): Promise<boolean> {\n    return this.endpoint.logError(sentryLog);\n  }\n\n  private enrichCallOptions<T extends IEndpointCallOptions>(callOptions?: T): T {\n    return _.extend({}, callOptions, this.callOptions);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rest/SearchEndpointWithDefaultCallOptions.ts\n **/","/// <reference path='../ui/Facet/Facet.ts' />\n\nimport {Facet} from '../ui/Facet/Facet';\nimport {IGroupByRequest} from '../rest/GroupByRequest';\nimport {IGroupByResult} from '../rest/GroupByResult';\nimport {ExpressionBuilder} from '../ui/Base/ExpressionBuilder';\nimport {FacetValue} from '../ui/Facet/FacetValues';\nimport {Utils} from '../utils/Utils';\nimport {QueryBuilder} from '../ui/Base/QueryBuilder';\nimport {FacetSearchParameters} from '../ui/Facet/FacetSearchParameters';\nimport {Assert} from '../misc/Assert';\nimport {IIndexFieldValue} from '../rest/FieldValue';\nimport {FacetUtils} from '../ui/Facet/FacetUtils';\nimport {IQueryResults} from '../rest/QueryResults';\nimport {IGroupByValue} from '../rest/GroupByValue';\nimport {IEndpointError} from '../rest/EndpointError';\nimport {IQueryBuilderExpression} from '../ui/Base/QueryBuilder';\n\nexport class FacetQueryController {\n  public expressionToUseForFacetSearch: string;\n  public constantExpressionToUseForFacetSearch: string;\n  public lastGroupByRequestIndex: number;\n  public lastGroupByRequest: IGroupByRequest;\n  public lastGroupByResult: IGroupByResult;\n\n  constructor(public facet: Facet) {\n  }\n\n  /**\n   * Reset the expression for the facet search, used when a new query is triggered\n   */\n  public prepareForNewQuery() {\n    this.lastGroupByRequestIndex = undefined;\n    this.expressionToUseForFacetSearch = undefined;\n    this.constantExpressionToUseForFacetSearch = undefined;\n  }\n\n  /**\n   * Compute the filter expression that the facet need to output for the query\n   * @returns {string}\n   */\n  public computeOurFilterExpression(): string {\n    let builder = new ExpressionBuilder();\n    let selected = this.facet.values.getSelected();\n    if (selected.length > 0) {\n      if (this.facet.options.useAnd) {\n        _.each(selected, (value: FacetValue) => {\n          builder.addFieldExpression(this.facet.options.field, '==', [value.value]);\n        });\n      } else {\n        builder.addFieldExpression(this.facet.options.field, '==', _.map(selected, (value: FacetValue) => value.value));\n      }\n    }\n    let excluded = this.facet.values.getExcluded();\n    if (excluded.length > 0) {\n      builder.addFieldNotEqualExpression(this.facet.options.field, _.map(excluded, (value: FacetValue) => value.value));\n    }\n    if (Utils.isNonEmptyString(this.facet.options.additionalFilter)) {\n      builder.add(this.facet.options.additionalFilter);\n    }\n    return builder.build();\n  }\n\n  /**\n   * Build the group by request for the facet, and insert it in the query builder\n   * @param queryBuilder\n   */\n  public putGroupByIntoQueryBuilder(queryBuilder: QueryBuilder) {\n    Assert.exists(queryBuilder);\n\n    let allowedValues = this.createGroupByAllowedValues();\n    let groupByRequest = this.createBasicGroupByRequest(allowedValues);\n\n    let queryOverrideObject = this.createGroupByQueryOverride(queryBuilder);\n    if (!Utils.isNullOrUndefined(queryOverrideObject)) {\n      groupByRequest.queryOverride = queryOverrideObject.basic;\n      groupByRequest.advancedQueryOverride = queryOverrideObject.advanced;\n      groupByRequest.constantQueryOverride = queryOverrideObject.constant;\n      this.expressionToUseForFacetSearch = queryOverrideObject.withoutConstant;\n      this.constantExpressionToUseForFacetSearch = queryOverrideObject.constant;\n    } else {\n      let parts = queryBuilder.computeCompleteExpressionParts();\n      this.expressionToUseForFacetSearch = parts.withoutConstant;\n      if (this.expressionToUseForFacetSearch == null) {\n        this.expressionToUseForFacetSearch = '@uri';\n      }\n      this.constantExpressionToUseForFacetSearch = parts.constant;\n    }\n    this.lastGroupByRequestIndex = queryBuilder.groupByRequests.length;\n    this.lastGroupByRequest = groupByRequest;\n    queryBuilder.groupByRequests.push(groupByRequest);\n  }\n\n  /**\n   * Search inside the facet, using a group by request\n   * @param params\n   * @param oldLength Optional params, used by the search method to call itself recursively to fetch all required values\n   * @returns {Promise|Promise<T>}\n   */\n  public search(params: FacetSearchParameters, oldLength = params.nbResults): Promise<IIndexFieldValue[]> {\n\n    return new Promise((resolve, reject) => {\n      let onResult = (fieldValues?: IIndexFieldValue[]) => {\n        let newLength = fieldValues.length;\n        fieldValues = this.checkForFacetSearchValuesToRemove(fieldValues, params.valueToSearch);\n        if (FacetUtils.needAnotherFacetSearch(fieldValues.length, newLength, oldLength, 5)) {\n          // This means that we removed enough values from the returned one that we need to perform a new search with more values requested.\n          params.nbResults += 5;\n          return this.search(params, fieldValues.length);\n        } else {\n          resolve(fieldValues);\n        }\n      };\n\n      this.facet.getEndpoint().search(params.getQuery())\n        .then((queryResults: IQueryResults) => {\n          if (this.facet.searchInterface.isNewDesign()) {\n            // params.getQuery() will generate a query for all excluded values + some new values\n            // there is no clean way to do a group by and remove some values\n            // so instead we request more values than we need, and crop all the one we don't want\n            let valuesCropped: IGroupByValue[] = [];\n            if (queryResults.groupByResults && queryResults.groupByResults[0]) {\n              _.each(queryResults.groupByResults[0].values, (v: IGroupByValue) => {\n                if (v.lookupValue) {\n                  if (!_.contains(params.alwaysExclude, v.lookupValue.toLowerCase())) {\n                    valuesCropped.push(v);\n                  }\n                } else {\n                  if (!_.contains(params.alwaysExclude, v.value.toLowerCase())) {\n                    valuesCropped.push(v);\n                  }\n                }\n              });\n            }\n            onResult(_.first(valuesCropped, params.nbResults));\n          } else {\n            resolve(queryResults.groupByResults[0].values);\n          }\n        })\n        .catch((error: IEndpointError) => {\n          reject(error);\n        });\n    });\n  }\n\n  public fetchMore(numberOfValuesToFetch: number) {\n    let params = new FacetSearchParameters(this.facet);\n    params.alwaysInclude = this.facet.options.allowedValues || _.pluck(this.facet.values.getAll(), 'value');\n    params.nbResults = numberOfValuesToFetch;\n    return this.facet.getEndpoint().search(params.getQuery());\n  }\n\n  public searchInFacetToUpdateDelta(facetValues: FacetValue[]) {\n    let params = new FacetSearchParameters(this.facet);\n    let query = params.getQuery();\n    query.aq = this.computeOurFilterExpression();\n    _.each(facetValues, (facetValue: FacetValue) => {\n      facetValue.waitingForDelta = true;\n    });\n    query.groupBy = [this.createBasicGroupByRequest(_.map(facetValues, (facetValue: FacetValue) => facetValue.value))];\n    query.groupBy[0].completeFacetWithStandardValues = false;\n    return this.facet.getEndpoint().search(query);\n  }\n\n  protected createGroupByAllowedValues() {\n    // if you want to keep displayed values next time, take all current values as allowed values\n    // otherwise take only the selected value\n    if (this.facet.options.allowedValues != undefined) {\n      return this.facet.options.allowedValues;\n    } else if (this.facet.options.customSort != undefined) {\n      // If there is a custom sort, we still need to add selectedValues to the group by\n      // Filter out duplicates with a lower case comparison on the value\n      let toCompare = _.map(this.facet.options.customSort, (val: string) => {\n        return val.toLowerCase();\n      });\n      let filtered = _.filter(this.getAllowedValuesFromSelected(), (value: string) => {\n        return !_.contains(toCompare, value.toLowerCase());\n      });\n      return this.facet.options.customSort.concat(filtered);\n\n    } else {\n      return this.getAllowedValuesFromSelected();\n    }\n  }\n\n  private getAllowedValuesFromSelected() {\n    let toMap: FacetValue[] = [];\n    if (this.facet.options.useAnd || !this.facet.keepDisplayedValuesNextTime) {\n      let selected = this.facet.values.getSelected();\n      if (selected.length == 0) {\n        return undefined;\n      }\n      toMap = this.facet.values.getSelected();\n    } else {\n      toMap = this.facet.values.getAll();\n    }\n    return _.map(toMap, (facetValue: FacetValue) => facetValue.value);\n  }\n\n  private createGroupByQueryOverride(queryBuilder: QueryBuilder): IQueryBuilderExpression {\n    let additionalFilter = this.facet.options.additionalFilter ? this.facet.options.additionalFilter : '';\n    let queryOverrideObject: IQueryBuilderExpression = undefined;\n\n    if (this.facet.options.useAnd) {\n      if (Utils.isNonEmptyString(additionalFilter)) {\n        queryOverrideObject = queryBuilder.computeCompleteExpressionParts();\n        if (Utils.isEmptyString(queryOverrideObject.basic)) {\n          queryOverrideObject.basic = '@uri';\n        }\n      }\n    } else {\n      if (this.facet.values.hasSelectedOrExcludedValues()) {\n        queryOverrideObject = queryBuilder.computeCompleteExpressionPartsExcept(this.computeOurFilterExpression());\n        if (Utils.isEmptyString(queryOverrideObject.basic)) {\n          queryOverrideObject.basic = '@uri';\n        }\n      } else {\n        if (Utils.isNonEmptyString(additionalFilter)) {\n          queryOverrideObject = queryBuilder.computeCompleteExpressionParts();\n          if (Utils.isEmptyString(queryOverrideObject.basic)) {\n            queryOverrideObject.basic = '@uri';\n          }\n        }\n      }\n    }\n\n    if (queryOverrideObject) {\n      if (Utils.isNonEmptyString(additionalFilter)) {\n        queryOverrideObject.constant = queryOverrideObject.constant ? queryOverrideObject.constant + ' ' + additionalFilter : additionalFilter;\n      }\n    }\n    _.each(_.keys(queryOverrideObject), (k) => {\n      if (Utils.isEmptyString(queryOverrideObject[k]) || Utils.isNullOrUndefined(queryOverrideObject[k])) {\n        delete queryOverrideObject[k];\n      }\n    });\n    if (_.keys(queryOverrideObject).length == 0) {\n      queryOverrideObject = undefined;\n    }\n    return queryOverrideObject;\n  }\n\n  protected createBasicGroupByRequest(allowedValues?: string[], addComputedField: boolean = true): IGroupByRequest {\n    let nbOfRequestedValues = this.facet.numberOfValues;\n    if (this.facet.options.customSort != null) {\n      let usedValues = _.union(_.map(this.facet.values.getSelected(), (facetValue: FacetValue) => facetValue.value), _.map(this.facet.values.getExcluded(), (facetValue: FacetValue) => facetValue.value), this.facet.options.customSort);\n      nbOfRequestedValues = Math.max(nbOfRequestedValues, usedValues.length);\n    }\n\n    let groupByRequest: IGroupByRequest = {\n      field: this.facet.options.field,\n      maximumNumberOfValues: nbOfRequestedValues + (this.facet.options.enableMoreLess ? 1 : 0),\n      sortCriteria: this.facet.options.sortCriteria,\n      injectionDepth: this.facet.options.injectionDepth,\n      completeFacetWithStandardValues: this.facet.options.allowedValues == undefined ? true : false\n    };\n    if (this.facet.options.lookupField) {\n      groupByRequest.lookupField = this.facet.options.lookupField;\n    }\n    if (allowedValues != null) {\n      groupByRequest.allowedValues = allowedValues;\n    }\n\n    if (addComputedField && Utils.isNonEmptyString(this.facet.options.computedField)) {\n      groupByRequest.computedFields = [{\n        field: this.facet.options.computedField,\n        operation: this.facet.options.computedFieldOperation\n      }];\n    }\n    return groupByRequest;\n  }\n\n  private checkForFacetSearchValuesToRemove(fieldValues: IIndexFieldValue[], valueToCheckAgainst: string) {\n    let regex = FacetUtils.getRegexToUseForFacetSearch(valueToCheckAgainst, this.facet.options.facetSearchIgnoreAccents);\n\n    return _.filter<IIndexFieldValue>(fieldValues, (fieldValue) => {\n      let isAllowed =\n        _.isEmpty(this.facet.options.allowedValues) ||\n        _.contains(this.facet.options.allowedValues, fieldValue.value);\n\n      let value = this.facet.getValueCaption(fieldValue);\n      return isAllowed && regex.test(value);\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/FacetQueryController.ts\n **/","/// <reference path=\"Facet.ts\" />\n\nimport {Facet} from './Facet';\nimport {Utils} from '../../utils/Utils';\nimport {FacetUtils} from './FacetUtils';\nimport {IGroupByRequest} from '../../rest/GroupByRequest';\nimport {IQuery} from '../../rest/Query';\nimport {QueryBuilder} from '../Base/QueryBuilder';\nimport {$$} from '../../utils/Dom';\n\nexport class FacetSearchParameters {\n  public searchEvenIfEmpty: boolean;\n  public nbResults: number;\n  public ignoreAccents: boolean;\n  public valueToSearch: string = '';\n  public alwaysInclude: string[] = [];\n  public alwaysExclude: string[] = [];\n  public sortCriteria = 'occurrences';\n  public fetchMore = false;\n\n  constructor(public facet: Facet) {\n    this.nbResults = facet.options.numberOfValuesInFacetSearch;\n    this.ignoreAccents = facet.options.facetSearchIgnoreAccents;\n    this.searchEvenIfEmpty = facet.searchInterface.isNewDesign();\n  }\n\n  public setValueToSearch(value: string) {\n    this.valueToSearch = value;\n    if (Utils.isNonEmptyString(value)) {\n      this.alwaysInclude = this.alwaysInclude.concat(FacetUtils.getValuesToUseForSearchInFacet(this.valueToSearch, this.facet));\n    }\n    return this;\n  }\n\n  public excludeCurrentlyDisplayedValuesInSearch(searchResults: HTMLElement) {\n    _.each(this.getCurrentlyShowedValueInSearch(searchResults), (v) => {\n      var expandedValues = FacetUtils.getValuesToUseForSearchInFacet(v, this.facet);\n      _.each(expandedValues, (expanded) => {\n        this.alwaysExclude.push(expanded);\n      });\n    });\n    _.each(this.facet.getDisplayedFacetValues(), (v) => {\n      var expandedValues = FacetUtils.getValuesToUseForSearchInFacet(v.value, this.facet);\n      _.each(expandedValues, (expanded) => {\n        this.alwaysExclude.push(expanded);\n      });\n    });\n  }\n\n  public getGroupByRequest(): IGroupByRequest {\n    this.lowerCaseAll();\n    var nbResults = this.nbResults;\n    if (this.facet.searchInterface.isNewDesign()) {\n      nbResults += this.alwaysExclude.length;\n    }\n\n    var typedByUser = [];\n    if (this.valueToSearch) {\n      typedByUser = ['*' + this.valueToSearch + '*'];\n    }\n\n    var request: IGroupByRequest = {\n      allowedValues: typedByUser.concat(this.alwaysInclude).concat(this.alwaysExclude),\n      maximumNumberOfValues: nbResults,\n      completeFacetWithStandardValues: this.facet.options.lookupField ? false : true, // See : https://coveord.atlassian.net/browse/JSUI-728\n      field: this.facet.options.field,\n      sortCriteria: this.facet.options.sortCriteria || this.sortCriteria,\n      injectionDepth: this.facet.options.injectionDepth,\n    };\n\n    if (this.facet.options.lookupField) {\n      request.lookupField = this.facet.options.lookupField;\n    }\n\n    if (this.facet.options.computedField) {\n      request.computedFields = [{\n        field: this.facet.options.computedField,\n        operation: this.facet.options.computedFieldOperation\n      }];\n    }\n    return request;\n  }\n\n  public getQuery(): IQuery {\n    var lastQuery = _.clone(this.facet.queryController.getLastQuery());\n    if (!lastQuery) {\n      // There should normally always be a last query available\n      // If not, just create en empty one.\n      lastQuery = new QueryBuilder().build();\n    }\n    lastQuery.q = this.facet.facetQueryController.expressionToUseForFacetSearch;\n    lastQuery.cq = this.facet.facetQueryController.constantExpressionToUseForFacetSearch;\n    lastQuery.aq = null;\n    lastQuery.enableDidYouMean = false;\n    lastQuery.firstResult = 0;\n    lastQuery.numberOfResults = 0;\n    lastQuery.fieldsToInclude = [];\n    lastQuery.groupBy = [this.getGroupByRequest()];\n    return lastQuery;\n  }\n\n  private getCurrentlyShowedValueInSearch(searchResults: HTMLElement) {\n    return _.map($$(searchResults).findAll('.coveo-facet-value-caption'), (val) => {\n      return $$(val).text();\n    });\n  }\n\n  private lowerCaseAll() {\n    this.alwaysExclude = _.chain(this.alwaysExclude)\n      .map((v) => {\n        return v.toLowerCase();\n      })\n      .uniq()\n      .value();\n\n    this.alwaysInclude = _.chain(this.alwaysInclude)\n      .map((v) => {\n        return v.toLowerCase();\n      })\n      .uniq()\n      .value();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Facet/FacetSearchParameters.ts\n **/","/// <reference path='Facet.ts' />\nimport {Facet} from './Facet';\nimport {StringUtils} from '../../utils/StringUtils';\nimport {QueryUtils} from '../../utils/QueryUtils';\nimport {FileTypes} from '../Misc/FileTypes';\nimport {DateUtils} from '../../utils/DateUtils';\nimport {Utils} from '../../utils/Utils';\nimport {$$} from '../../utils/Dom';\n\ndeclare const Coveo;\n\nexport class FacetUtils {\n  static getRegexToUseForFacetSearch(value: string, ignoreAccent: boolean) {\n    return new RegExp(StringUtils.stringToRegex(value, ignoreAccent), 'i');\n  }\n\n  static getValuesToUseForSearchInFacet(original: string, facet: Facet): string[] {\n    let ret = [original];\n    let regex = this.getRegexToUseForFacetSearch(original, facet.options.facetSearchIgnoreAccents);\n    if (facet.options.valueCaption) {\n      _.chain(facet.options.valueCaption)\n        .pairs()\n        .filter((pair) => {\n          return regex.test(pair[1]);\n        })\n        .each((match) => {\n          ret.push(match[0]);\n        });\n      if (QueryUtils.isStratusAgnosticField(facet.options.field, '@objecttype') || QueryUtils.isStratusAgnosticField(facet.options.field, '@filetype')) {\n        _.each(FileTypes.getFileTypeCaptions(), (value: string, key: string) => {\n          if (!(key in facet.options.valueCaption) && regex.test(value)) {\n            ret.push(key);\n          }\n        });\n      }\n    } else if (QueryUtils.isStratusAgnosticField(facet.options.field, '@objecttype') || QueryUtils.isStratusAgnosticField(facet.options.field, '@filetype')) {\n      _.each(_.filter(_.pairs(FileTypes.getFileTypeCaptions()), (pair) => {\n        return regex.test(pair[1]);\n      }), (match) => {\n        ret.push(match[0]);\n      });\n    } else if (QueryUtils.isStratusAgnosticField(facet.options.field, '@month')) {\n      _.each(_.range(1, 13), (month) => {\n        if (regex.test(DateUtils.monthToString(month - 1))) {\n          ret.push(('0' + month.toString()).substr(-2));\n        }\n      });\n    }\n    return ret;\n  }\n\n  static buildFacetSearchPattern(values: string[]) {\n    values = _.map(values, (value) => {\n      return Utils.escapeRegexCharacter(value);\n    });\n    values[0] = '.*' + values[0] + '.*';\n    return values.join('|');\n  }\n\n  static needAnotherFacetSearch(currentSearchLength: number, newSearchLength: number, oldSearchLength: number, desiredSearchLength: number) {\n    // Something was removed (currentSearch < newSearch)\n    // && we might want to display more facet search result(currentSearch < desiredSearch)\n    // && the new query returned more stuff than the old one so there's still more results(currentSearchLength > oldLength)\n    return currentSearchLength < newSearchLength && currentSearchLength < desiredSearchLength && currentSearchLength > oldSearchLength;\n  }\n\n  static addNoStateCssClassToFacetValues(facet: Facet, container: HTMLElement) {\n    // This takes care of adding the correct css class on each facet value checkbox (empty white box) if at least one value is selected in that facet\n    if (facet.values.getSelected().length != 0) {\n      let noStates = $$(container).findAll('li:not(.coveo-selected)');\n      _.each(noStates, (noState) => {\n        $$(noState).addClass('coveo-no-state');\n      });\n    }\n  }\n\n  static tryToGetTranslatedCaption(field: string, value: string) {\n    let found: string;\n\n    if (QueryUtils.isStratusAgnosticField(field.toLowerCase(), '@filetype')) {\n      found = FileTypes.getFileTypeCaptions()[value.toLowerCase()];\n    } else if (QueryUtils.isStratusAgnosticField(field.toLowerCase(), '@month')) {\n      try {\n        let month = parseInt(value);\n        found = DateUtils.monthToString(month - 1);\n      } catch (ex) {\n        // Do nothing\n      }\n    }\n    return found != undefined && Utils.isNonEmptyString(found) ? found : value;\n  }\n\n  static clipCaptionsToAvoidOverflowingTheirContainer(facet: Facet, forceClip?: boolean) {\n    // in new design, we don't need this : use flexbox instead (sorry IE user)\n    if (facet.getBindings && facet.getBindings().searchInterface && facet.getBindings().searchInterface.isNewDesign()) {\n      return;\n    }\n    if (!(Coveo.HierarchicalFacet && facet instanceof Coveo.HierarchicalFacet) || forceClip) {\n      facet.logger.trace('Clipping captions');\n      // force facet to show to calculate width\n      $$(facet.element).show();\n      let element = facet.element;\n      let captions = $$(element).findAll('.coveo-facet-value-caption');\n      for (let i = 0; i < captions.length; i++) {\n        if (captions[i].style.width != '') {\n          captions[i].style.width = '';\n        }\n      }\n      let labels = $$(element).findAll('.coveo-facet-value-label-wrapper');\n      let labelsMaxWidth: { element: HTMLElement; width: number; crop: number; label: HTMLElement; }[] = [];\n      for (let i = 0; i < labels.length; i++) {\n        let label: HTMLElement = labels[i];\n        let caption: HTMLElement = $$(label).find('.coveo-facet-value-caption');\n\n        let labelWidth = label.scrollWidth;\n        let labelVisibleWidth = label.clientWidth;\n\n        let captionWidth = caption.scrollWidth;\n\n        let crop = Math.max(0, labelWidth - labelVisibleWidth);\n        if (crop) {\n          labelsMaxWidth.push({\n            element: caption,\n            width: captionWidth,\n            crop: crop,\n            label: label\n          });\n        }\n      }\n      // remove the specific css class\n      element.style.display = '';\n      for (let i = 0; i < labelsMaxWidth.length; i++) {\n        let labelMaxWidth = labelsMaxWidth[i];\n        labelMaxWidth.element.style.width = labelMaxWidth.width - labelMaxWidth.crop + 'px';\n        if (labelMaxWidth.crop > 0) {\n          labelMaxWidth.label.setAttribute('title', $$(labelMaxWidth.element).text());\n        } else {\n          labelMaxWidth.label.setAttribute('title', null);\n        }\n      }\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Facet/FacetUtils.ts\n **/","/// <reference path=\"../ui/FacetRange/FacetRange.ts\" />\n\nimport {FacetQueryController} from './FacetQueryController';\nimport {FacetRange} from '../ui/FacetRange/FacetRange';\nimport {Utils} from '../utils/Utils';\nimport {IGroupByRequest} from '../rest/GroupByRequest';\n\nexport class FacetRangeQueryController extends FacetQueryController {\n  public graphGroupByQueriesIndex: number;\n\n  constructor(public facet: FacetRange) {\n    super(facet);\n  }\n\n  protected createBasicGroupByRequest(allowedValues?: string[], addComputedField: boolean = true) {\n    var groupByQuery = super.createBasicGroupByRequest(null, addComputedField);\n    groupByQuery.allowedValues = undefined;\n    if (Utils.isNonEmptyArray(this.facet.options.ranges)) {\n      groupByQuery = this.buildGroupByQueryForPredefinedRanges(groupByQuery);\n    } else {\n      groupByQuery = this.buildGroupByQueryForAutomaticRanges(groupByQuery);\n    }\n    return groupByQuery;\n  }\n\n  protected createGroupByAllowedValues(): string[] {\n    return undefined;\n  }\n\n  private buildGroupByQueryForAutomaticRanges(groupByQuery: IGroupByRequest) {\n    groupByQuery.generateAutomaticRanges = true;\n    return groupByQuery;\n  }\n\n  private buildGroupByQueryForPredefinedRanges(groupByQuery: IGroupByRequest) {\n    groupByQuery.rangeValues = this.facet.options.ranges;\n    groupByQuery.maximumNumberOfValues = this.facet.options.ranges.length;\n    return groupByQuery;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/FacetRangeQueryController.ts\n **/","/// <reference path=\"../ui/FacetSlider/FacetSlider.ts\" />\n\nimport {FacetSlider} from '../ui/FacetSlider/FacetSlider';\nimport {QueryEvents, IQuerySuccessEventArgs} from '../events/QueryEvents';\nimport {QueryBuilder} from '../ui/Base/QueryBuilder';\nimport {IGroupByRequest} from '../rest/GroupByRequest';\nimport {ExpressionBuilder} from '../ui/Base/ExpressionBuilder';\nimport {IRangeValue} from '../rest/RangeValue';\nimport {DateUtils} from '../utils/DateUtils';\n\nexport class FacetSliderQueryController {\n  public graphGroupByQueriesIndex: number;\n  private rangeValuesForGraphToUse: { start: any; end: any }[];\n  public lastGroupByRequestIndex: number;\n\n  constructor(public facet: FacetSlider) {\n    this.facet.bind.onRootElement(QueryEvents.querySuccess, (args: IQuerySuccessEventArgs) => this.handleQuerySuccess(args));\n  }\n\n  public prepareForNewQuery() {\n    this.lastGroupByRequestIndex = undefined;\n  }\n\n  public putGroupByIntoQueryBuilder(queryBuilder: QueryBuilder) {\n    if (this.facet.options.graph) {\n      this.putGroupByForGraphIntoQueryBuilder(queryBuilder);\n    }\n    this.putGroupByForSliderIntoQueryBuilder(queryBuilder);\n  }\n\n  public createBasicGroupByRequest(allowedValues?: string[], addComputedField: boolean = true) {\n    let groupByQuery: IGroupByRequest = {\n      field: this.facet.options.field,\n      completeFacetWithStandardValues: true\n    };\n    groupByQuery.allowedValues = undefined;\n    if (this.facet.options.graph) {\n      groupByQuery = this.buildGroupByQueryForSlider(groupByQuery);\n    } else {\n      groupByQuery = this.buildGroupByQueryForAutomaticRanges(groupByQuery);\n    }\n    return groupByQuery;\n  }\n\n  public computeOurFilterExpression(boundary = [this.facet.startOfSlider, this.facet.endOfSlider]) {\n    let builder = new ExpressionBuilder();\n    if (boundary[0] != undefined && boundary[1] != undefined) {\n      if (this.facet.options.excludeOuterBounds) {\n        this.addFilterExpressionWithOuterBoundsExcluded(boundary[0], boundary[1], builder);\n      } else {\n        this.addFilterExpressionWithOuterBoundsIncluded(boundary[0], boundary[1], builder);\n      }\n    }\n    return builder.build();\n  }\n\n  private handleQuerySuccess(args: IQuerySuccessEventArgs) {\n    if (this.facet.options && this.facet.options.graph && this.rangeValuesForGraphToUse == undefined) {\n      this.rangeValuesForGraphToUse = [];\n      let rawValues = args.results.groupByResults[this.graphGroupByQueriesIndex].values;\n      _.each(rawValues, (rawValue) => {\n        let rawSplit = rawValue.value.split('..');\n        this.rangeValuesForGraphToUse.push({\n          start: this.facet.options.dateField ? this.getISOFormat(rawSplit[0].replace('@', ' ')) : parseInt(rawSplit[0], 10),\n          end: this.facet.options.dateField ? this.getISOFormat(rawSplit[1].replace('@', ' ')) : parseInt(rawSplit[1], 10)\n        });\n      });\n    }\n  }\n\n  private addFilterExpressionWithOuterBoundsIncluded(start: any, end: any, builder: ExpressionBuilder) {\n    if (start != this.facet.options.start || end != this.facet.options.end) {\n      if (this.facet.options.dateField) {\n        start = this.getFilterDateFormat(start);\n        end = this.getFilterDateFormat(end);\n      }\n      builder.addFieldExpression(this.facet.options.field, '==', [start + '..' + end]);\n    }\n  }\n\n  private addFilterExpressionWithOuterBoundsExcluded(start: any, end: any, builder: ExpressionBuilder) {\n    let startCompare = this.facet.options.start;\n    let endCompare = this.facet.options.end;\n    let startCompared = start;\n    let endCompared = end;\n    if (this.facet.options.dateField) {\n      startCompared = this.getFilterDateFormat(start);\n      endCompared = this.getFilterDateFormat(end);\n      startCompare = this.getFilterDateFormat(startCompare);\n      endCompare = this.getFilterDateFormat(endCompare);\n    } else {\n      startCompared += '';\n      endCompared += '';\n      startCompare += '';\n      endCompare += '';\n    }\n    if (startCompared != startCompare && endCompared == endCompare) {\n      builder.addFieldExpression(this.facet.options.field, '>=', [startCompared]);\n    } else if (startCompared == startCompare && endCompared != endCompare) {\n      builder.addFieldExpression(this.facet.options.field, '<=', [endCompared]);\n    } else {\n      this.addFilterExpressionWithOuterBoundsIncluded(start, end, builder);\n    }\n  }\n\n  private buildGroupByQueryForSlider(groupByQuery: IGroupByRequest) {\n    if (this.facet.options.start != undefined && this.facet.options.end != undefined) {\n      let start = this.facet.options.start;\n      let end = this.facet.options.end;\n      if (this.facet.options.dateField || this.facet.options.dateField) {\n        start = this.getISOFormat(start);\n        end = this.getISOFormat(end);\n      }\n      groupByQuery.rangeValues = [{\n        start: start,\n        end: end,\n        endInclusive: true,\n        label: 'Slider'\n      }];\n      return groupByQuery;\n    } else {\n      return this.buildGroupByQueryForAutomaticRanges(groupByQuery);\n    }\n  }\n\n  private buildGroupByQueryForAutomaticRanges(groupByQuery: IGroupByRequest) {\n    groupByQuery.generateAutomaticRanges = true;\n    return groupByQuery;\n  }\n\n  private putGroupByForGraphIntoQueryBuilder(queryBuilder: QueryBuilder) {\n    this.graphGroupByQueriesIndex = queryBuilder.groupByRequests.length;\n    let basicGroupByRequestForGraph = this.createBasicGroupByRequest();\n    if (basicGroupByRequestForGraph.rangeValues) {\n      let basicRangeRequest = basicGroupByRequestForGraph.rangeValues[0];\n      basicGroupByRequestForGraph.rangeValues = this.createRangeValuesForGraph(basicRangeRequest);\n    }\n    let filter = this.computeOurFilterExpression(this.facet.getSliderBoundaryForQuery());\n    if (filter != undefined) {\n      let queryOverrideObject = queryBuilder.computeCompleteExpressionPartsExcept(filter);\n      basicGroupByRequestForGraph.queryOverride = queryOverrideObject.basic;\n      basicGroupByRequestForGraph.advancedQueryOverride = queryOverrideObject.advanced;\n      basicGroupByRequestForGraph.constantQueryOverride = queryOverrideObject.constant;\n      if (basicGroupByRequestForGraph.queryOverride == undefined) {\n        basicGroupByRequestForGraph.queryOverride = this.facet.options.queryOverride || '@uri';\n      } else {\n        basicGroupByRequestForGraph.queryOverride += (this.facet.options.queryOverride ? ' ' + this.facet.options.queryOverride : '');\n      }\n    } else if (this.facet.options.queryOverride != null) {\n      let completeExpression = queryBuilder.computeCompleteExpression();\n      basicGroupByRequestForGraph.queryOverride = (completeExpression != null ? completeExpression + ' ' : '') + this.facet.options.queryOverride;\n    }\n\n    basicGroupByRequestForGraph.sortCriteria = 'nosort';\n    basicGroupByRequestForGraph.maximumNumberOfValues = this.facet.options.graph.steps;\n    queryBuilder.groupByRequests.push(basicGroupByRequestForGraph);\n  }\n\n  private putGroupByForSliderIntoQueryBuilder(queryBuilder: QueryBuilder) {\n    this.lastGroupByRequestIndex = queryBuilder.groupByRequests.length;\n    let basicGroupByRequestForSlider = this.createBasicGroupByRequest();\n    basicGroupByRequestForSlider.maximumNumberOfValues = this.facet.options.graph != null ? this.facet.options.graph.steps || 1 : 1;\n    basicGroupByRequestForSlider.queryOverride = this.facet.options.queryOverride || '@uri';\n    basicGroupByRequestForSlider.sortCriteria = 'nosort';\n    basicGroupByRequestForSlider.generateAutomaticRanges = true;\n    basicGroupByRequestForSlider.rangeValues = undefined;\n    queryBuilder.groupByRequests.push(basicGroupByRequestForSlider);\n  }\n\n  private createRangeValuesForGraph(basicRangeRequest: IRangeValue) {\n    if (this.facet.options.graph.steps == undefined) {\n      this.facet.options.graph.steps = 10;\n    }\n    if (this.facet.options.dateField && isNaN(this.facet.options.start)) {\n      this.facet.options.start = new Date(this.facet.options.start).getTime();\n    }\n    if (this.facet.options.dateField && isNaN(this.facet.options.end)) {\n      this.facet.options.end = new Date(this.facet.options.end).getTime();\n    }\n    if (this.rangeValuesForGraphToUse != undefined) {\n      return this.usePrebuiltRange(basicRangeRequest);\n    } else {\n      return this.buildRange(basicRangeRequest);\n    }\n  }\n\n  private usePrebuiltRange(basicRangeRequest: IRangeValue) {\n    return _.map(this.rangeValuesForGraphToUse, (value) => {\n      return {\n        start: value.start,\n        end: value.end,\n        endInclusive: basicRangeRequest.endInclusive,\n        label: basicRangeRequest.label\n      };\n    });\n  }\n\n  private buildRange(basicRangeRequest: IRangeValue) {\n    let start = this.facet.options.start;\n    let oneStep = (this.facet.options.end - this.facet.options.start) / this.facet.options.graph.steps;\n    return _.map(_.range(0, this.facet.options.graph.steps, 1), (step) => {\n      let newStart = start + (step * oneStep);\n      let newEnd = start + ((step + 1) * oneStep);\n      if (this.facet.options.dateField) {\n        newStart = this.getISOFormat(newStart);\n        newEnd = this.getISOFormat(newEnd);\n      }\n      return {\n        endInclusive: basicRangeRequest.endInclusive,\n        label: basicRangeRequest.label,\n        start: newStart,\n        end: newEnd\n      };\n    });\n  }\n\n  private getISOFormat(value: any) {\n    if (value) {\n      if (!isNaN(value)) {\n        value = Number(value);\n      }\n      let date = new Date(value);\n      if (!DateUtils.isValid(date)) {\n        date = new Date(this.getBrowserCompatibleFormat(value));\n        if (!DateUtils.isValid(date)) {\n          // If we get here, we'll probably get an error further down the line when querying the index anyway ...\n          this.facet.logger.error('Cannot parse this date format.', value, new Date(value));\n          return undefined;\n        }\n      }\n      return date.toISOString();\n    } else {\n      return undefined;\n    }\n  }\n\n  private getFilterDateFormat(rawValue: any) {\n    if (rawValue) {\n      return this.getISOFormat(rawValue).replace('T', '@').replace('.000Z', '').replace(/-/g, '/');\n    } else {\n      return undefined;\n    }\n  }\n\n  private getBrowserCompatibleFormat(value: string) {\n    return value.replace('@', 'T').replace(/\\//g, '-');\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/FacetSliderQueryController.ts\n **/","/// <reference path=\"../ui/HierarchicalFacet/HierarchicalFacet.ts\" />\n/// <reference path=\"./FacetQueryController.ts\" />\n\nimport {FacetQueryController} from './FacetQueryController';\nimport {IGroupByResult} from '../rest/GroupByResult';\nimport {HierarchicalFacet} from '../ui/HierarchicalFacet/HierarchicalFacet';\n\nexport class HierarchicalFacetQueryController extends FacetQueryController {\n  public lastGroupByForCountOf: IGroupByResult;\n\n  constructor(public facet: HierarchicalFacet) {\n    super(facet);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/HierarchicalFacetQueryController.ts\n **/","import {Assert} from '../misc/Assert';\nimport {QueryController} from '../controllers/QueryController';\nimport {Model} from '../models/Model';\nimport {InitializationEvents} from '../events/InitializationEvents';\nimport {$$} from '../utils/Dom';\nimport {HashUtils} from '../utils/HashUtils';\nimport {Defer} from '../misc/Defer';\nimport {RootComponent} from '../ui/Base/RootComponent';\n\n/**\n * This component is instantiated automatically by the framework on the root if the {@link SearchInterface}.<br/>\n * When the {@link SearchInterface.options.enableHistory} option is set to true, this component is instantiated.<br/>\n * It's only job is to apply changes in the {@link QueryStateModel} to the hash in the URL, and vice versa.<br/>\n * This component does *not* hold the state of the interface, it only represent it in the URL.\n */\nexport class HistoryController extends RootComponent {\n  static ID = 'HistoryController';\n\n  static attributesThatDoNotTriggerQuery = ['quickview'];\n\n  private ignoreNextHashChange = false;\n  private initialHashChange = false;\n  private willUpdateHash: boolean = false;\n  private hashchange: (...args: any[]) => void;\n\n  /**\n   * Create a new history controller\n   * @param element\n   * @param windoh For mock / test purpose.\n   * @param model\n   * @param queryController\n   */\n  constructor(element: HTMLElement, public windoh: Window, public model: Model, public queryController: QueryController) {\n    super(element, HistoryController.ID);\n\n    this.windoh = this.windoh || window;\n    Assert.exists(this.model);\n    Assert.exists(this.queryController);\n\n    $$(this.element).on(InitializationEvents.restoreHistoryState, () => {\n      this.logger.trace('Restore history state. Update model');\n      this.updateModelFromHash();\n    });\n\n    $$(this.element).on(this.model.getEventName(Model.eventTypes.all), () => {\n      this.logger.trace('Query model changed. Update hash');\n      this.updateHashFromModel();\n    });\n    this.hashchange = () => {\n      this.handleHashChange();\n    };\n    this.windoh.addEventListener('hashchange', this.hashchange);\n    $$(this.element).on(InitializationEvents.nuke, () => this.handleNuke());\n  }\n\n  /**\n   * Set the given map of key value in the hash of the URL\n   * @param values\n   */\n  public setHashValues(values: {}) {\n    this.logger.trace('Update history hash');\n\n    var hash = '#' + HashUtils.encodeValues(values);\n    this.ignoreNextHashChange = this.windoh.location.hash != hash;\n\n    this.logger.trace('ignoreNextHashChange', this.ignoreNextHashChange);\n    this.logger.trace('initialHashChange', this.initialHashChange);\n    this.logger.trace('from', this.windoh.location.hash, 'to', hash);\n\n    if (this.initialHashChange) {\n      this.initialHashChange = false;\n      this.windoh.location.replace(hash);\n      this.logger.trace('History hash modified', hash);\n    } else if (this.ignoreNextHashChange) {\n      this.windoh.location.hash = hash;\n      this.logger.trace('History hash created', hash);\n    }\n  }\n\n  private handleNuke() {\n    this.windoh.removeEventListener('hashchange', this.hashchange);\n  }\n\n  private handleHashChange() {\n    this.logger.trace('History hash changed');\n\n    if (this.ignoreNextHashChange) {\n      this.logger.trace('History hash change ignored');\n      this.ignoreNextHashChange = false;\n      return;\n    }\n\n    var diff = this.updateModelFromHash();\n\n    if (_.difference(diff, HistoryController.attributesThatDoNotTriggerQuery).length > 0) {\n      this.queryController.executeQuery();\n    }\n  }\n\n  private updateHashFromModel() {\n    this.logger.trace('Model -> history hash');\n\n    if (!this.willUpdateHash) {\n      Defer.defer(() => {\n        var attributes = this.model.getAttributes();\n        this.setHashValues(attributes);\n        this.logger.debug('Saving state to hash', attributes);\n        this.willUpdateHash = false;\n      });\n      this.willUpdateHash = true;\n    }\n  }\n\n  private updateModelFromHash() {\n    this.logger.trace('History hash -> model');\n\n    var toSet: { [key: string]: any } = {};\n    var diff: string[] = [];\n    _.each(<_.Dictionary<any>>this.model.attributes, (value, key?, obj?) => {\n      var valToSet = this.getHashValue(key);\n      if (valToSet == undefined) {\n        valToSet = this.model.defaultAttributes[key];\n      }\n      toSet[key] = valToSet;\n      if (this.model.get(key) != valToSet) {\n        diff.push(key);\n      }\n    });\n    this.initialHashChange = true;\n    this.model.setMultiple(toSet);\n    return diff;\n  }\n\n  private getHashValue(value: string): any {\n    Assert.isNonEmptyString(value);\n    return HashUtils.getValue(value, HashUtils.getHash(this.windoh));\n  }\n\n  public debugInfo() {\n    return {\n      'state': this.model.getAttributes()\n    };\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/HistoryController.ts\n **/","import {$$} from '../utils/Dom';\nimport {Assert} from '../misc/Assert';\nimport {Utils} from '../utils/Utils';\nimport {BaseComponent} from '../ui/Base/BaseComponent';\n\nexport const MODEL_EVENTS = {\n  PREPROCESS: 'preprocess',\n  CHANGE_ONE: 'change:',\n  CHANGE: 'change',\n  RESET: 'reset',\n  ALL: 'all'\n};\n\nexport interface IModelSetOptions {\n  silent?: boolean;\n  customAttribute?: boolean;\n  validateType?: boolean;\n}\n\nexport interface IAttributeChangedEventArg {\n  attribute: string;\n  value: any;\n}\n\nexport interface IAttributesChangedEventArg {\n  attributes: {};\n}\n\nexport interface IModelChangedEventArg {\n  model: Model;\n}\n\n/**\n * A model is basically a key -> value store that trigger letious javascript event when one of the value for each of it's key changes.<br/>\n * This is a class that is meant to be extended : the most important one probably being the {@link QueryStateModel}<br/>\n * Component set values in this key -> value store, and listen to event triggered to react accordingly.<br/>\n */\nexport class Model extends BaseComponent {\n  /**\n   * The attributes contained in this model. Normally, you should not set attribute directly on this property, as this will not cause the required events to be triggered.\n   */\n  public attributes: { [key: string]: any };\n  public defaultAttributes: { [key: string]: any };\n  private eventNameSpace;\n\n  // changeOne: is when one specific attribute change, change is when any attribute change\n  /**\n   * The event type that can be triggered :<br/>\n   * -- preprocess -> triggered before a value is set on an attribute, to allow to modify it before it's set.<br/>\n   * -- changeOne -> triggered when a single value change.\n   * @type {{preprocess: string, changeOne: string, change: string, reset: string, all: string}}\n   */\n  public static eventTypes = {\n    preprocess: 'preprocess',\n    changeOne: 'change:',\n    change: 'change',\n    reset: 'reset',\n    all: 'all'\n  };\n\n  constructor(element: HTMLElement, id: string, attributes: { [key: string]: any }) {\n    super(element, id);\n    this.eventNameSpace = id;\n\n    this.defaultAttributes = Utils.extendDeep(this.defaultAttributes, attributes);\n    this.attributes = attributes;\n    this.logger.debug('Creating model');\n  }\n\n  public set(attribute: string, value: any, options?: IModelSetOptions) {\n    let toSet: { [key: string]: any } = {};\n    toSet[attribute] = value;\n    this.setMultiple(toSet, options);\n  }\n\n  public getAttributes() {\n    let attributes: { [key: string]: any } = {};\n    _.each(this.attributes, (attribute, key) => {\n      if (_.isObject(attribute)) {\n        if (!Utils.objectEqual(attribute, this.defaultAttributes[key])) {\n          attributes[key] = attribute;\n        }\n      } else if (attribute != this.defaultAttributes[key]) {\n        attributes[key] = attribute;\n      }\n    });\n    return attributes;\n  }\n\n  public setMultiple(toSet: { [key: string]: any }, options?: IModelSetOptions) {\n    let anythingChanged = false;\n    this.preprocessEvent(toSet);\n    _.each(<_.Dictionary<any>>toSet, (value, attribute?) => {\n      if (!options || !options.customAttribute) {\n        this.checkIfAttributeExists(attribute);\n      }\n      value = this.parseToCorrectType(attribute, value);\n      if (!options || options.validateType) {\n        this.validateType(attribute, value);\n      }\n      if (this.checkIfAttributeChanged(attribute, value)) {\n        this.attributes[attribute] = value;\n        anythingChanged = true;\n        if (options == null || !options.silent) {\n          this.attributeHasChangedEvent(attribute);\n        }\n      }\n    });\n    if (anythingChanged && (options == null || !options.silent)) {\n      this.attributesHasChangedEvent();\n      this.anyEvent();\n    }\n  }\n\n  public setNewDefault(attribute: string, value: any, options?: IModelSetOptions) {\n    if (!options || !options.customAttribute) {\n      this.checkIfAttributeExists(attribute);\n    }\n    this.defaultAttributes[attribute] = value;\n  }\n\n  public setDefault(attribute: string, options?: IModelSetOptions) {\n    this.set(attribute, this.defaultAttributes[attribute]);\n  }\n\n  public get(attribute?: string): any {\n    if (attribute == undefined) {\n      return this.attributes;\n    } else {\n      return this.attributes[attribute];\n    }\n  }\n\n  public getDefault(attribute?: string): any {\n    if (attribute == undefined) {\n      return this.defaultAttributes;\n    } else {\n      return this.defaultAttributes[attribute];\n    }\n  }\n\n  public reset() {\n    this.setMultiple(this.defaultAttributes);\n    this.modelWasResetEvent();\n  }\n\n  public registerNewAttribute(attribute: string, defaultValue: any) {\n    this.defaultAttributes[attribute] = defaultValue;\n    this.attributes[attribute] = defaultValue;\n  }\n\n  public getEventName(event: string) {\n    return this.eventNameSpace + ':' + event;\n  }\n\n  private attributesHasChangedEvent() {\n    $$(this.element).trigger(this.getEventName(Model.eventTypes.change), this.createAttributesChangedArgument());\n  }\n\n  private attributeHasChangedEvent(attr: string) {\n    $$(this.element).trigger(this.getEventName(Model.eventTypes.changeOne) + attr, this.createAttributeChangedArgument(attr));\n  }\n\n  private preprocessEvent(attributes: { [key: string]: any }) {\n    $$(this.element).trigger(this.getEventName(Model.eventTypes.preprocess), attributes);\n  }\n\n  private modelWasResetEvent() {\n    $$(this.element).trigger(this.getEventName(Model.eventTypes.reset), this.createModelChangedArgument());\n  }\n\n  private anyEvent() {\n    $$(this.element).trigger(this.getEventName(Model.eventTypes.all), this.createModelChangedArgument());\n  }\n\n  private createAttributeChangedArgument(attribute: string): IAttributeChangedEventArg {\n    return { attribute: attribute, value: this.attributes[attribute] };\n  }\n\n  private createAttributesChangedArgument(): IAttributesChangedEventArg {\n    return { attributes: this.attributes };\n  }\n\n  private createModelChangedArgument(): IModelChangedEventArg {\n    return { model: this };\n  }\n\n  private checkIfAttributeExists(attribute: string) {\n    Assert.check(_.has(this.attributes, attribute));\n  }\n\n  private validateType(attribute: string, value: any) {\n    if (!Utils.isNullOrUndefined(this.attributes[attribute]) && !Utils.isUndefined(value)) {\n      if (_.isNumber(this.attributes[attribute])) {\n        Assert.check(_.isNumber(value) && !isNaN(value), 'Non-matching type');\n      } else if (_.isBoolean(this.attributes[attribute])) {\n        Assert.check(_.isBoolean(value) || Utils.parseBooleanIfNotUndefined(value) !== undefined, 'Non-matching type');\n      } else {\n        if (!Utils.isNullOrUndefined(this.defaultAttributes[attribute])) {\n          Assert.check(typeof value === typeof this.defaultAttributes[attribute], 'Non-matching type');\n        }\n      }\n    }\n  }\n\n  private parseToCorrectType(attribute: string, value: any): any {\n    if (_.isNumber(this.attributes[attribute])) {\n      return parseInt(value, 10);\n    } else if (_.isBoolean(this.attributes[attribute])) {\n      if (_.isBoolean(value)) {\n        return value;\n      } else {\n        return Utils.parseBooleanIfNotUndefined(value);\n      }\n    }\n    return value;\n  }\n\n  private checkIfAttributeChanged(attribute: string, newValue: any): boolean {\n    let oldValue = this.attributes[attribute];\n    if (_.isNumber(oldValue) || _.isString(oldValue) || _.isBoolean(oldValue)) {\n      return oldValue !== newValue;\n    }\n    if (_.isArray(oldValue)) {\n      return !Utils.arrayEqual(oldValue, newValue);\n    }\n    if (_.isObject(oldValue)) {\n      return !Utils.objectEqual(oldValue, newValue);\n    }\n    return true;\n  }\n\n  public debugInfo() {\n    return null;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/Model.ts\n **/","import {LocalStorageUtils} from '../utils/LocalStorageUtils';\nimport {Model} from '../models/Model';\nimport {QueryController} from './QueryController';\nimport {Logger} from '../misc/Logger';\nimport {Assert} from '../misc/Assert';\nimport {InitializationEvents} from '../events/InitializationEvents';\nimport {RootComponent} from '../ui/Base/RootComponent';\nimport {$$} from '../utils/Dom';\n\n/**\n * This component acts like the {@link HistoryController} excepts that is saves the {@link QueryStateModel} in the local storage.<br/>\n * This will not allow 'back' and 'forward' navigation in the history, like the standard {@link HistoryController} allows. Instead, it load the query state only on page load.<br/>\n * To enable this component, you should set the {@link SearchInterface.options.useLocalStorageForHistory} as well as the {@link SearchInterface.options.enableHistory} options to true.\n */\nexport class LocalStorageHistoryController extends RootComponent {\n  static ID = 'LocalStorageHistoryController';\n\n  public storage: LocalStorageUtils<{ [key: string]: any }>;\n  private omit: string[] = [];\n\n  /**\n   * Create a new LocalStorageHistoryController instance\n   * @param element\n   * @param windoh For mock purpose\n   * @param model\n   * @param queryController\n   */\n  constructor(element: HTMLElement, public windoh: Window, public model: Model, public queryController: QueryController) {\n    super(element, LocalStorageHistoryController.ID);\n    if (!windoh['localStorage']) {\n      new Logger(element).info('No local storage available in current browser. LocalStorageHistoryController cannot initialize itself', this);\n    } else {\n      this.storage = new LocalStorageUtils<{ [key: string]: any }>(LocalStorageHistoryController.ID);\n      Assert.exists(this.model);\n      Assert.exists(this.queryController);\n      $$(this.element).on(InitializationEvents.restoreHistoryState, () => this.updateModelFromLocalStorage());\n      $$(this.element).on(this.model.getEventName(Model.eventTypes.all), () => this.updateLocalStorageFromModel());\n    }\n  }\n\n  /**\n   * Specifies an array of attributes from the query state model that should not be persisted in the local storage\n   * @param attributes\n   */\n  public withoutThoseAttribute(attributes: string[]) {\n    this.omit = attributes;\n  }\n\n  private updateLocalStorageFromModel() {\n    var attributes = _.omit(this.model.getAttributes(), this.omit);\n    this.setStorageValues(attributes);\n    this.logger.debug('Saving state to localstorage', attributes);\n  }\n\n  private updateModelFromLocalStorage() {\n    var toSet: { [key: string]: any } = {};\n    var loadedFromStorage = this.storage.load();\n    _.each(<_.Dictionary<any>>this.model.attributes, (value, key?, obj?) => {\n      var valToSet = loadedFromStorage ? loadedFromStorage[key] : undefined;\n      if (valToSet == undefined) {\n        valToSet = this.model.defaultAttributes[key];\n      }\n      toSet[key] = valToSet;\n    });\n    this.model.setMultiple(toSet);\n  }\n\n  public setStorageValues(values: { [key: string]: any }) {\n    this.storage.save(values);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/LocalStorageHistoryController.ts\n **/","export {Model} from './models/Model';\nexport {QueryStateModel} from './models/QueryStateModel';\nexport {ComponentOptionsModel} from './models/ComponentOptionsModel';\nexport {ComponentStateModel} from './models/ComponentStateModel';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ModelsModules.ts\n **/","import {Model, IModelSetOptions} from './Model';\nimport {Assert} from '../misc/Assert';\nimport {IStringMap} from '../rest/GenericParam';\nimport {Utils} from '../utils/Utils';\n\nexport const QUERY_STATE_ATTRIBUTES = {\n  Q: 'q',\n  FIRST: 'first',\n  T: 't',\n  TG: 'tg',\n  SORT: 'sort',\n  HD: 'hd',\n  HQ: 'hq',\n  QUICKVIEW: 'quickview'\n};\n\nexport interface IQueryStateIncludedAttribute {\n  title: string;\n  included: string[];\n}\n\nexport interface IQueryStateExcludedAttribute {\n  title: string;\n  excluded: string[];\n}\n\n/**\n * The QueryStateModel is a key->value store of the state of every component that can affect a query.<br/>\n * Component set values in this key -> value store, and listen to event triggered to react accordingly.<br/>\n * For example, when a query is launched, the searchbox will set the 'q' attribute, the pager will set the 'first' attribute, etc.<br/>\n * At the same time, this class will trigger the associated event when a value is modified.<br/>\n * eg : The user change the content of the searchbox, and submit a query. This will trigger the following events :<br/>\n * -- state:change:q (because the value of 'q' changed)</br>\n * -- state:change (because at least one value changed in the query state)<br/>\n * Component or external code could hook handler on those events : document.addEventListener('state:change:q', handler);<br/>\n * See : {@link Model}, as all the relevant method are exposed in the base class.<br/>\n * Optionally, the state can be persisted to the query string to allow browser history management : See {@link HistoryController}\n */\nexport class QueryStateModel extends Model {\n  static ID = 'state';\n\n  static defaultAttributes = {\n    q: '',\n    first: 0,\n    t: '',\n    hd: '',\n    hq: '',\n    sort: '',\n    tg: '',\n    quickview: ''\n  };\n\n  static attributesEnum = {\n    q: 'q',\n    first: 'first',\n    t: 't',\n    sort: 'sort',\n    hd: 'hd',\n    hq: 'hq',\n    tg: 'tg',\n    quickview: 'quickview'\n  };\n\n  static getFacetId(id: string, include: boolean = true) {\n    return 'f:' + id + (include ? '' : ':not');\n  }\n\n  static getFacetOperator(id: string) {\n    return 'f:' + id + ':operator';\n  }\n\n  static getFacetLookupValue(id: string) {\n    return QueryStateModel.getFacetId(id) + ':lookupvalues';\n  }\n\n  /**\n   * Create a new QueryState\n   * @param element\n   * @param attributes\n   * @param bindings\n   */\n  constructor(element: HTMLElement, attributes?: IStringMap<string>) {\n    let merged = _.extend({}, QueryStateModel.defaultAttributes, attributes);\n    super(element, QueryStateModel.ID, merged);\n  }\n\n  /**\n   * Determine if at least one facet is currently active in the interface (this means that a facet has selected or excluded values)\n   * @returns {boolean}\n   */\n  public atLeastOneFacetIsActive() {\n    return !_.isUndefined(_.find(this.attributes, (value, key: any) => {\n      return key.indexOf('f:') == 0 && Utils.isNonEmptyArray(value) && key.indexOf(':range') < 0;\n    }));\n  }\n\n  public set(attribute: string, value: any, options?: IModelSetOptions) {\n    this.validate(attribute, value);\n    super.set(attribute, value, options);\n  }\n\n  private validate(attribute: string, value: any) {\n    if (attribute == QueryStateModel.attributesEnum.first) {\n      Assert.isLargerOrEqualsThan(0, value);\n    }\n  }\n}\n\nexport function setState(model: Model, args: any[]): any {\n  Assert.exists(model);\n\n  if (args.length == 0 || args[0] == undefined) {\n    // No args means return the model\n    return model;\n  } else if (args.length == 1 && Utils.isNonEmptyString(args[0])) {\n    // One string arg means retrieve value from model\n    return model.get(args[0]);\n  } else if (_.isObject(args[0])) {\n    // One dictionary means set multiple values\n    let toSet = args[0];\n    let options = _.extend(<IModelSetOptions>{ customAttribute: true }, <IModelSetOptions>args[1]);\n    return model.setMultiple(toSet, options);\n  } else if (args.length > 1) {\n    // Otherwise we're setting a value\n    let name = <string>args[0];\n    let value = args[1];\n    let options = _.extend(<IModelSetOptions>{ customAttribute: true }, <IModelSetOptions>args[2]);\n    Assert.isNonEmptyString(name);\n    return model.set(name, value, options);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/QueryStateModel.ts\n **/","import {Model} from './Model';\n\nexport interface IComponentOptionsAttributes {\n  resultLink: any;\n  searchHub: string;\n}\n\nexport class ComponentOptionsModel extends Model {\n  static ID = 'ComponentOptions';\n\n  static defaultAttributes: IComponentOptionsAttributes = {\n    resultLink: undefined,\n    searchHub: undefined\n  };\n\n  static attributesEnum = {\n    resultLink: 'resultLink',\n    searchHub: 'searchHub'\n  };\n\n  constructor(element: HTMLElement, attributes?: IComponentOptionsAttributes) {\n    var merged = _.extend({}, ComponentOptionsModel.defaultAttributes, attributes);\n    super(element, ComponentOptionsModel.ID, merged);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/ComponentOptionsModel.ts\n **/","import {Model} from './Model';\nimport {BaseComponent} from '../ui/Base/BaseComponent';\n\nexport class ComponentStateModel extends Model {\n  static ID = 'ComponentState';\n\n  constructor(element: HTMLElement) {\n    super(element, ComponentStateModel.ID, {});\n  }\n\n  public registerComponent(componentId: string, component: BaseComponent) {\n    var currentAttribute = this.attributes[componentId];\n    if (currentAttribute == undefined) {\n      this.attributes[componentId] = [component];\n    } else {\n      this.attributes[componentId].push(component);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/ComponentStateModel.ts\n **/","export * from './ui/Base/RegisteredNamedMethods';\nexport {ComponentOptions, ComponentOptionsType} from './ui/Base/ComponentOptions';\nexport {Component} from './ui/Base/Component';\nexport {BaseComponent} from './ui/Base/BaseComponent';\nexport {RootComponent} from './ui/Base/RootComponent';\nexport {QueryBuilder} from './ui/Base/QueryBuilder';\nexport {ExpressionBuilder} from './ui/Base/ExpressionBuilder';\nexport {IResultsComponentBindings} from './ui/Base/ResultsComponentBindings';\n// Export Initialization under both name, for legacy reason and old code in the wild that\n// reference the old CoveoJQuery module\nexport {Initialization} from './ui/Base/Initialization';\nexport {Initialization as CoveoJQuery} from './ui/Base/Initialization';\nexport {initCoveoJQuery} from './ui/Base/CoveoJQuery';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UIBaseModules.ts\n **/","import {Initialization} from './Initialization';\nimport {Assert} from '../../misc/Assert';\nimport {QueryController} from '../../controllers/QueryController';\nimport {QueryStateModel, setState} from '../../models/QueryStateModel';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {IQueryResults} from '../../rest/QueryResults';\nimport {Analytics} from '../Analytics/Analytics';\nimport {IAnalyticsClient} from '../Analytics/AnalyticsClient';\nimport {InitializationEvents} from '../../events/InitializationEvents';\nimport {$$} from '../../utils/Dom';\nimport {IAnalyticsActionCause, IAnalyticsDocumentViewMeta} from '../Analytics/AnalyticsActionListMeta';\nimport {IStringMap} from '../../rest/GenericParam';\nimport {BaseComponent} from '../Base/BaseComponent';\nimport {Component} from '../Base/Component';\nimport {IStandaloneSearchInterfaceOptions} from '../SearchInterface/SearchInterface';\nimport {IRecommendationOptions} from '../Recommendation/Recommendation';\n\n/**\n * Initialize the framework with a basic search interface. Calls {@link Initialization.initSearchInterface}.<br/>\n * If using the jQuery extension, this is called using <code>$('#root').coveo('init');</code>.\n * @param element The root of the interface to initialize.\n * @param options JSON options for the framework (e.g.: <code>{Searchbox : {enableSearchAsYouType : true}}</code>).\n */\nexport function init(element: HTMLElement, options: any = {}) {\n  Initialization.initializeFramework(element, options, () => {\n    Initialization.initSearchInterface(element, options);\n  });\n}\n\nInitialization.registerNamedMethod('init', (element: HTMLElement, options: any = {}) => {\n  init(element, options);\n});\n\n/**\n * Initialize the framework with a standalone search box. Calls {@link Initialize.initStandaloneSearchInterface}.<br/>\n * If using the jQuery extension, this is called using <code>$('#root').coveo('initSearchbox');</code>.\n * @param element The root of the interface to initialize.\n * @param searchPageUri The search page on which to redirect when there is a query.\n * @param options JSON options for the framework (e.g.: <code>{Searchbox : {enableSearchAsYouType : true}}</code>).\n */\nexport function initSearchbox(element: HTMLElement, searchPageUri: string, options: any = {}): void {\n  Assert.isNonEmptyString(searchPageUri);\n  var searchInterfaceOptions = <IStandaloneSearchInterfaceOptions>{};\n  searchInterfaceOptions.searchPageUri = searchPageUri;\n  searchInterfaceOptions.autoTriggerQuery = false;\n  searchInterfaceOptions.hideUntilFirstQuery = false;\n  searchInterfaceOptions.enableHistory = false;\n  options = _.extend({}, options, { StandaloneSearchInterface: searchInterfaceOptions });\n  Initialization.initializeFramework(element, options, () => {\n    Initialization.initStandaloneSearchInterface(element, options);\n  });\n}\n\nInitialization.registerNamedMethod('initSearchbox', (element: HTMLElement, searchPageUri: string, options: any = {}) => {\n  initSearchbox(element, searchPageUri, options);\n});\n\n/**\n * Initialize the framework with a recommendation interface. Calls {@link Initialization.initRecommendationInterface}.<br/>\n * If using the jQuery extension, this is called using <code>$('#root').coveo('initRecommendation');</code>.\n * @param element The root of the interface to initialize.\n * @param mainSearchInterface The search interface to link with the recommendation interface (see {@link Recommendation}).\n * @param userContext The user context to pass with the query generated in the recommendation interface (see {@link Recommendation}).\n * @param options JSON options for the framework (e.g.: <code>{Searchbox : {enableSearchAsYouType: true}}</code>).\n */\nexport function initRecommendation(element: HTMLElement, mainSearchInterface?: HTMLElement, userContext?: { [name: string]: any }, options: any = {}): void {\n  var recommendationOptions = <IRecommendationOptions>{};\n  recommendationOptions.mainSearchInterface = mainSearchInterface;\n  recommendationOptions.userContext = JSON.stringify(userContext);\n  recommendationOptions.enableHistory = false;\n  options = _.extend({}, options, { Recommendation: recommendationOptions });\n  Initialization.initializeFramework(element, options, () => {\n    Initialization.initRecommendationInterface(element, options);\n  });\n}\n\nInitialization.registerNamedMethod('initRecommendation', (element: HTMLElement, mainSearchInterface: HTMLElement, userContext: any = {}, options: any = {}) => {\n  initRecommendation(element, mainSearchInterface, userContext, options);\n});\n\n\n/**\n * Execute a standard query. Active component in the interface will react to events/ push data in the query / handle the query success or failure as needed.<br/>\n * It triggers a standard query flow for which the standard component will perform their expected behavior.<br/>\n * If you wish to only perform a query on the index to retrieve results (without the component reacting), look into {@link SearchInterface} instead.<br/>\n * Calling this method is the same as calling {@link QueryController.executeQuery}.\n * @param element The root of the interface to initialize.\n */\nexport function executeQuery(element: HTMLElement): Promise<IQueryResults> {\n  Assert.exists(element);\n\n  var queryController = <QueryController>Component.resolveBinding(element, QueryController);\n  Assert.exists(queryController);\n  return queryController.executeQuery();\n}\n\nInitialization.registerNamedMethod('executeQuery', (element: HTMLElement) => {\n  return executeQuery(element);\n});\n\n/**\n * Perform operation on the state ({@link QueryStateModel} of the interface.<br/>\n * Get the complete {@link QueryStateModel} object: <code>Coveo.state(element)</code><br/>.\n * Get an attribute from the {@link QueryStateModel}: <code>Coveo.state(element, 'q')</code> Can be any attribute.<br/>\n * Set an attribute on the {@link QueryStateModel}: <code>Coveo.state(element, 'q', 'foobar')</code>. Can be any attribute.<br/>\n * Set multiple attribute on the {@link QueryStateModel}: <code>Coveo.state(element, {'q' : 'foobar' , sort : 'relevancy'})</code>. Can be any attribute.<br/>\n * If using the jQuery extension, this is called using <code>$('#root').coveo('state');</code>.\n * @param element The root of the interface for which to access the {@link QueryStateModel}.\n * @param args\n * @returns {any}\n */\nexport function state(element: HTMLElement, ...args: any[]): any {\n  Assert.exists(element);\n  var model = <QueryStateModel>Component.resolveBinding(element, QueryStateModel);\n  return setState(model, args);\n}\n\nInitialization.registerNamedMethod('state', (element: HTMLElement, ...args: any[]): any => {\n  if (args.length != 0) {\n    return state.apply(undefined, [element].concat(args));\n  } else {\n    return state.apply(undefined, [element]);\n  }\n});\n\n/**\n * Get the component bound on the given `HTMLElement`.\n * @param element The `HTMLElement` for which to get the component instance.\n * @param componentClass If multiple components are bound to a single `HTMLElement`, you need to specify which components you wish to get.\n * @param noThrow By default, the GET method will throw if there is no component bound, or if there are multiple component and no `componentClass` is specified. This deletes the error if set to true.\n * @returns {Component}\n */\nexport function get(element: HTMLElement, componentClass?, noThrow?: boolean): BaseComponent {\n  Assert.exists(element);\n  return Component.get(element, componentClass, noThrow);\n}\n\nInitialization.registerNamedMethod('get', (element: HTMLElement, componentClass?: any, noThrow?: boolean): BaseComponent => {\n  return get(element, componentClass, noThrow);\n});\n\nexport function result(element: HTMLElement, noThrow?: boolean): IQueryResult {\n  Assert.exists(element);\n  return Component.getResult(element, noThrow);\n}\n\nInitialization.registerNamedMethod('result', (element: HTMLElement, noThrow?: boolean): IQueryResult => {\n  return result(element, noThrow);\n});\n\nfunction getCoveoAnalyticsClient(element: HTMLElement): IAnalyticsClient {\n  var analytics = getCoveoAnalytics(element);\n  if (analytics) {\n    return analytics.client;\n  } else {\n    return undefined;\n  }\n}\n\nfunction getCoveoAnalytics(element: HTMLElement): Analytics {\n  var analyticsElement = $$(element).find('.' + Component.computeCssClassName(Analytics));\n  if (analyticsElement) {\n    return <Analytics>Component.get(analyticsElement);\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Log a custom event on the Coveo Usage Analytics service.\n * @param element The root of the interface for which to log analytics events.\n * @param customEventCause The cause of the event.\n * @param metadata The metadata associated with the event (JSON key value).\n */\nexport function logCustomEvent(element: HTMLElement, customEventCause: IAnalyticsActionCause, metadata: IStringMap<string>) {\n  var client = getCoveoAnalyticsClient(element);\n  if (client) {\n    client.logCustomEvent<any>(customEventCause, metadata, element);\n  }\n}\n\nInitialization.registerNamedMethod('logCustomEvent', (element: HTMLElement, customEventCause: IAnalyticsActionCause, metadata: any) => {\n  logCustomEvent(element, customEventCause, metadata);\n});\n\n/**\n * Log a `SearchEvent` on the Coveo Usage Analytics service.\n * @param element The root of the interface for which to log analytics events.\n * @param searchEventCause The cause of the event.\n * @param metadata The metadata associated with the event (JSON key value).\n */\nexport function logSearchEvent(element: HTMLElement, searchEventCause: IAnalyticsActionCause, metadata: IStringMap<string>) {\n  var client = getCoveoAnalyticsClient(element);\n  if (client) {\n    client.logSearchEvent<any>(searchEventCause, metadata);\n  }\n}\n\nInitialization.registerNamedMethod('logSearchEvent', (element: HTMLElement, searchEventCause: IAnalyticsActionCause, metadata: IStringMap<string>) => {\n  logSearchEvent(element, searchEventCause, metadata);\n});\n\n/**\n * Log a `SearchAsYouTypeEvent` on the Coveo Usage Analytics service.<br/>\n * It is a bit different from a standard search event, as it will wait 5 seconds before sending the final `SearchAsYouType` event.\n * @param element The root of the interface for which to log analytics events.\n * @param searchAsYouTypeEventCause The cause of the event.\n * @param metadata The metadata associated with the event (JSON key value).\n */\nexport function logSearchAsYouTypeEvent(element: HTMLElement, searchAsYouTypeEventCause: IAnalyticsActionCause, metadata: IStringMap<string>) {\n  var client = getCoveoAnalyticsClient(element);\n  if (client) {\n    client.logSearchAsYouType<any>(searchAsYouTypeEventCause, metadata);\n  }\n}\n\nInitialization.registerNamedMethod('logSearchAsYouTypeEvent', (element: HTMLElement, searchAsYouTypeEventCause: IAnalyticsActionCause, metadata: IStringMap<string>) => {\n  logSearchAsYouTypeEvent(element, searchAsYouTypeEventCause, metadata);\n});\n\n/**\n * Log a `ClickEvent` on the Coveo Usage Analytics service.\n * @param element The root of the interface for which to log analytics events.\n * @param clickEventCause The cause of the event.\n * @param metadata The metadata associated with the event (JSON key value).\n * @param result The result that was clicked.\n */\nexport function logClickEvent(element: HTMLElement, clickEventCause: IAnalyticsActionCause, metadata: IStringMap<any>, result: IQueryResult) {\n  var client = getCoveoAnalyticsClient(element);\n  if (client) {\n    client.logClickEvent(clickEventCause, <IAnalyticsDocumentViewMeta>metadata, result, element);\n  }\n}\n\nInitialization.registerNamedMethod('logClickEvent', (element: HTMLElement, clickEventCause: IAnalyticsActionCause, metadata: IStringMap<string>, result: IQueryResult) => {\n  logClickEvent(element, clickEventCause, metadata, result);\n});\n\n/**\n * Pass options to the framework, before it is initialized ({@link init}).<br/>\n * All the options passed with this calls will be merged together on initialization.\n * @param element The root of the interface for which you wish to set options.\n * @param optionsToSet JSON options for the framework (e.g.: <code>{Searchbox : {enableSearchAsYouType: true}}</code>).\n */\nexport function options(element: HTMLElement, optionsToSet: any = {}) {\n  Initialization.registerDefaultOptions(element, optionsToSet);\n}\n\nInitialization.registerNamedMethod('options', (element: HTMLElement, optionsToSet: any = {}) => {\n  options(element, optionsToSet);\n});\n\n/**\n * Patch the given `methodName` on an instance of a component bound to an `HTMLElement` with a new handler.\n * @param element\n * @param methodName\n * @param handler\n */\nexport function patch(element: HTMLElement, methodName: string, handler: (...args: any[]) => any) {\n  Initialization.monkeyPatchComponentMethod(methodName, element, handler);\n}\n\nInitialization.registerNamedMethod('patch', (element?: HTMLElement, methodName?: string, handler?: (...args: any[]) => any) => {\n  patch(element, methodName, handler);\n});\n\nexport function initBox(element: HTMLElement, ...args: any[]) {\n  var type, options: any = {}, injectMarkup;\n  // This means : initBox, no type (no injection) and no options\n  if (args.length == 0) {\n    type = 'Standard';\n    injectMarkup = false;\n  } else if (args.length == 1) { // 1 arg, might be options or type\n    // This mean a type (with injection) and no options\n    if (typeof args[0] == 'string') {\n      type = args[0];\n      injectMarkup = true;\n    } else if (typeof args[0] == 'object') { // This means no type(no injection) and with options\n      type = 'Standard';\n      injectMarkup = false;\n      options = args[0];\n    } else {\n      Assert.fail('Invalid parameters to init a box');\n    }\n  } else if (args.length == 2) { // 2 args means both options and type (with injection);\n    type = args[0];\n    options = args[1];\n    injectMarkup = true;\n  }\n  var merged: any = {};\n  merged[type || 'Container'] = _.extend({}, options.SearchInterface, options[type]);\n  options = _.extend({}, options, merged);\n  Initialization.initializeFramework(element, options, () => {\n    Initialization.initBoxInterface(element, options, type, injectMarkup);\n  });\n}\n\n\nInitialization.registerNamedMethod('initBox', (element?: HTMLElement, ...args: any[]) => {\n  initBox(element, args);\n});\n\nexport function nuke(element: HTMLElement) {\n  $$(element).trigger(InitializationEvents.nuke);\n}\n\nInitialization.registerNamedMethod('nuke', (element: HTMLElement) => {\n  nuke(element);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Base/RegisteredNamedMethods.ts\n **/","import {IQueryResult} from '../../rest/QueryResult';\nimport {Logger} from '../../misc/Logger';\nimport {IComponentDefinition, Component} from '../Base/Component';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {Utils} from '../../utils/Utils';\nimport {Assert} from '../../misc/Assert';\nimport {$$} from '../../utils/Dom';\nimport {InitializationEvents} from '../../events/InitializationEvents';\nimport {SearchInterface, StandaloneSearchInterface} from '../SearchInterface/SearchInterface';\nimport {QueryController} from '../../controllers/QueryController';\nimport {HashUtils} from '../../utils/HashUtils';\nimport {QueryStateModel} from '../../models/QueryStateModel';\nimport {ComponentStateModel} from '../../models/ComponentStateModel';\nimport {ComponentOptionsModel} from '../../models/ComponentOptionsModel';\nimport {IAnalyticsNoMeta, analyticsActionCauseList} from '../Analytics/AnalyticsActionListMeta';\nimport {BaseComponent} from '../Base/BaseComponent';\nimport {Recommendation} from '../Recommendation/Recommendation';\n\n/**\n * Represent the initialization parameters required to init a new component.\n */\nexport interface IInitializationParameters {\n  options: any;\n  result?: IQueryResult;\n  bindings: IComponentBindings;\n}\n\n/**\n * The main purpose of this class is to initialize the framework (a.k.a the code executed when calling `Coveo.init`).<br/>\n * It's also in charge or registering the available components, as well as the method that we expost to the global Coveo scope.<br/>\n * For example, the `Coveo.executeQuery` function will be registed in this class by the {@link QueryController}.\n */\nexport class Initialization {\n  private static logger = new Logger('Initialization');\n  private static autoCreateComponents: { [s: string]: any; } = {};\n  private static namedMethods: { [s: string]: any; } = {};\n\n  /**\n   * Register a new set of options for a given element.<br/>\n   * When the element is eventually initialized as a component, those options will be used / merged to create the final option set to use for this component.<br/>\n   * Note that this function should not normally be called directly, but instead using the global `Coveo.options` function\n   * @param element\n   * @param options\n   */\n  public static registerDefaultOptions(element: HTMLElement, options: {}): void {\n    let existing = element['CoveoDefaultOptions'] || {};\n    let updated = Utils.extendDeep(existing, options);\n    element['CoveoDefaultOptions'] = updated;\n  }\n\n  public static resolveDefaultOptions(element: HTMLElement, options: {}): {} {\n    let optionsForThisElement = element['CoveoDefaultOptions'];\n\n    let optionsSoFar: {};\n    if (Utils.exists(optionsForThisElement)) {\n      optionsSoFar = Utils.extendDeep(optionsForThisElement, options);\n    } else {\n      optionsSoFar = options;\n    }\n\n    if (element.parentElement) {\n      return Initialization.resolveDefaultOptions(element.parentElement, optionsSoFar);\n    } else {\n      return optionsSoFar;\n    }\n  }\n\n  /**\n   * Register a new Component to be recognized by the framework.<br/>\n   * This essentially mean that when we call `Coveo.init`, the Initialization class will scan the DOM for known component (which have registed themselves with this call) and create a new component on each element.\n   * @param componentClass\n   */\n  public static registerAutoCreateComponent(componentClass: IComponentDefinition): void {\n    Assert.exists(componentClass);\n    Assert.exists(componentClass.ID);\n    Assert.doesNotExists(Initialization.autoCreateComponents[componentClass.ID]);\n    Assert.doesNotExists(Initialization.namedMethods[componentClass.ID]);\n    Initialization.autoCreateComponents[componentClass.ID] = componentClass;\n  }\n\n  /**\n   * Check if a component is already registed, using it's ID (e.g. : 'Facet').\n   * @param componentClassId\n   * @returns {boolean}\n   */\n  public static isComponentClassIdRegistered(componentClassId: string): boolean {\n    return Utils.exists(Initialization.autoCreateComponents[componentClassId]);\n  }\n\n  /**\n   * Return the list of all known components (the list of ID for each component).\n   * @returns {string[]}\n   */\n  public static getListOfRegisteredComponents() {\n    return _.keys(Initialization.autoCreateComponents);\n  }\n\n  /**\n   * Return the component class definition, using it's ID (e.g. : 'CoveoFacet').\n   * @param name\n   * @returns {IComponentDefinition}\n   */\n  public static getRegisteredComponent(name: string) {\n    return Initialization.autoCreateComponents[name];\n  }\n\n  /**\n   * Initialize the framework. Note that this function should not normally be called directly, but instead using a globally registered function (e.g.: Coveo.init), or {@link Initialization.initSearchInterface} or {@link Initialization.initStandaloneSearchInterface} <br/>\n   * (e.g. : `Coveo.init` or `Coveo.initSearchbox`).\n   * @param element The element on which to initialize the interface.\n   * @param options The options for all components (eg: {Searchbox : {enableSearchAsYouType : true}}).\n   * @param initSearchInterfaceFunction The function to execute to create the {@link SearchInterface} component. Different init call will create different {@link SearchInterface}.\n   */\n  public static initializeFramework(element: HTMLElement, options?: any, initSearchInterfaceFunction?: (...args: any[]) => void) {\n    Assert.exists(element);\n    let alreadyInitialized = Component.get(element, QueryController, true);\n    if (alreadyInitialized) {\n      this.logger.error('This DOM element has already been initialized as a search interface, skipping initialization', element);\n      return;\n    }\n\n    options = Initialization.resolveDefaultOptions(element, options);\n\n    Initialization.performInitFunctionsOption(options, InitializationEvents.beforeInitialization);\n    $$(element).trigger(InitializationEvents.beforeInitialization);\n\n    initSearchInterfaceFunction(element, options);\n    Initialization.initExternalComponents(element, options);\n\n    Initialization.performInitFunctionsOption(options, InitializationEvents.afterComponentsInitialization);\n    $$(element).trigger(InitializationEvents.afterComponentsInitialization);\n\n    $$(element).trigger(InitializationEvents.restoreHistoryState);\n\n    Initialization.performInitFunctionsOption(options, InitializationEvents.afterInitialization);\n    $$(element).trigger(InitializationEvents.afterInitialization);\n\n    let searchInterface = <SearchInterface>Component.get(element, SearchInterface);\n\n\n    // Elements that have the coveo-hide-until-loaded class are hidden by default.\n    // Now that we're loaded (and before the first query returns), we can remove\n    // the class. Also, we add a class that gives the opportunity for an animation\n    // to apply at startup, such as a fade-in that comes in by default.\n    let elemsHidden = $$(element).findAll('.coveo-hide-until-loaded');\n    _.each(elemsHidden, (e: HTMLElement) => {\n      $$(e).removeClass('coveo-hide-until-loaded');\n      $$(e).addClass('coveo-show-after-loaded');\n    });\n\n    if (searchInterface.options.autoTriggerQuery) {\n      Initialization.logFirstQueryCause(searchInterface);\n      (<QueryController>Component.get(element, QueryController)).executeQuery({\n        logInActionsHistory: searchInterface instanceof Recommendation ? false : true,\n        isFirstQuery: true\n      });\n    }\n  }\n\n  /**\n   * Create a new standard search interface. This is the function executed when calling `Coveo.init`.\n   * @param element\n   * @param options\n   */\n  public static initSearchInterface(element: HTMLElement, options: any = {}) {\n    options = Initialization.resolveDefaultOptions(element, options);\n    let searchInterface = new SearchInterface(element, options.SearchInterface, options.Analytics);\n    searchInterface.options.originalOptionsObject = options;\n    let initParameters: IInitializationParameters = { options: options, bindings: searchInterface.getBindings() };\n    Initialization.automaticallyCreateComponentsInside(element, initParameters);\n  }\n\n  /**\n   * Create a new standalone search interface (standalone search box). This is the function executed when calling `Coveo.initSearchbox`.\n   * @param element\n   * @param options\n   */\n  public static initStandaloneSearchInterface(element: HTMLElement, options: any = {}) {\n    options = Initialization.resolveDefaultOptions(element, options);\n\n    // Set trigger query on clear to false for standalone search interface automatically\n    // Take care of not overriding any options that could have been set by external code.\n    if (!options.Querybox) {\n      options.Querybox = {};\n    }\n    if (!options.Omnibox) {\n      options.Omnibox = {};\n    }\n    if (!options.Searchbox) {\n      options.Searchbox = {};\n    }\n    if (!options.Querybox.triggerQueryOnClear || !options.Omnibox.triggerQueryOnClear || !options.Searchbox.triggerOnQueryClear) {\n      options.Querybox.triggerQueryOnClear = false;\n      options.Omnibox.triggerQueryOnClear = false;\n      options.Searchbox.triggerQueryOnClear = false;\n    }\n\n    let searchInterface = new StandaloneSearchInterface(element, options.StandaloneSearchInterface, options.Analytics);\n    searchInterface.options.originalOptionsObject = options;\n    let initParameters: IInitializationParameters = { options: options, bindings: searchInterface.getBindings() };\n    Initialization.automaticallyCreateComponentsInside(element, initParameters);\n  }\n\n  /**\n   * Create a new recommendation search interface. This is the function executed when calling `Coveo.initRecommendation`.\n   * @param element\n   * @param options\n   */\n  public static initRecommendationInterface(element: HTMLElement, options: any = {}) {\n    options = Initialization.resolveDefaultOptions(element, options);\n    // Since a recommendation interface inherits from a search interface, we need to merge those if passed on init\n    let optionsForRecommendation = _.extend({}, options.SearchInterface, options.Recommendation);\n    let recommendation = new window['Coveo']['Recommendation'](element, optionsForRecommendation, options.Analytics);\n    recommendation.options.originalOptionsObject = options;\n    let initParameters: IInitializationParameters = { options: options, bindings: recommendation.getBindings() };\n    Initialization.automaticallyCreateComponentsInside(element, initParameters);\n  }\n\n  /**\n   * Scan the element and all its children for known components. Initialize every known component found.\n   * @param element The element for which to scan it's children.\n   * @param initParameters Needed parameters to initialize all the children components.\n   * @param ignore An optional list of component ID to ignore and skip when scanning for known components.\n   */\n  public static automaticallyCreateComponentsInside(element: HTMLElement, initParameters: IInitializationParameters, ignore?: string[]) {\n    Assert.exists(element);\n\n    let codeToExecute: { (): void }[] = [];\n\n    for (let componentClassId in Initialization.autoCreateComponents) {\n      if (!_.contains(ignore, componentClassId)) {\n        let componentClass = Initialization.autoCreateComponents[componentClassId];\n        let classname = Component.computeCssClassName(componentClass);\n        let elements = $$(element).findAll('.' + classname);\n        if ($$(element).hasClass(classname)) {\n          elements.push(element);\n        }\n        if (elements.length != 0) {\n          // Queue the code that will scan the now resolved selector to after we've\n          // finished evaluating all selectors. This ensures that if a component\n          // constructor adds child components under his tags, those won't get auto-\n          // initialize by this invocation of this method. Components inserting child\n          // components are responsible of invoking this method again if they want\n          // child components to be auto-initialized.\n          //\n          // Explanation: If we don't do that, child components for which selector have\n          // already been evaluated won't be initialized, whereas those that are next\n          // in the list will be.\n          codeToExecute.push(Initialization.createFunctionThatInitializesComponentOnElements(elements, componentClassId, componentClass, initParameters));\n        }\n      }\n    }\n\n    // Now that all selectors are executed, let's really initialize the components.\n    _.each(codeToExecute, (code) => code());\n  }\n\n  /**\n   * Create a new component on the given element.\n   * @param componentClassId The ID of the component to initialize (e.g. : 'CoveoFacet').\n   * @param element The HTMLElement on which to initialize.\n   * @param initParameters Needed parameters to initialize the component.\n   * @returns {Component}\n   */\n  public static createComponentOfThisClassOnElement(componentClassId: string, element: HTMLElement, initParameters?: IInitializationParameters): Component {\n    Assert.isNonEmptyString(componentClassId);\n    Assert.exists(element);\n\n    let componentClass = Initialization.autoCreateComponents[componentClassId];\n    Assert.exists(componentClass);\n\n    let bindings: IComponentBindings = {};\n    let options = {};\n    let result: IQueryResult = undefined;\n\n    if (initParameters != undefined) {\n      _.each(<{ [key: string]: any }>initParameters.bindings, (value, key) => {\n        bindings[key] = value;\n      });\n      options = initParameters.options;\n      result = initParameters.result;\n    }\n\n    Initialization.logger.trace('Creating component of class ' + componentClassId, element, options);\n    return new componentClass(element, options, bindings, result);\n  }\n\n  /**\n   * Register a new globally available method in the Coveo namespace (e.g.: `Coveo.init`).\n   * @param methodName The method name to register.\n   * @param handler The function to execute when the method is called.\n   */\n  public static registerNamedMethod(methodName: string, handler: (element: HTMLElement, ...args: any[]) => any) {\n    Assert.isNonEmptyString(methodName);\n    Assert.doesNotExists(Initialization.autoCreateComponents[methodName]);\n    Assert.doesNotExists(Initialization.namedMethods[methodName]);\n    Assert.exists(handler);\n    Initialization.namedMethods[methodName] = handler;\n  }\n\n  /**\n   * Check if the method is already registed.\n   * @param methodName\n   * @returns {boolean}\n   */\n  public static isNamedMethodRegistered(methodName: string): boolean {\n    return Utils.exists(Initialization.namedMethods[methodName]);\n  }\n\n  /**\n   * 'Monkey patch' (replace the function with a new one) a given method on a component instance.\n   * @param methodName\n   * @param element\n   * @param handler\n   */\n  public static monkeyPatchComponentMethod(methodName: string, element: HTMLElement, handler: (...args: any[]) => any) {\n    Assert.isNonEmptyString(methodName);\n    Assert.exists(handler);\n\n    let componentClass;\n    if (methodName.indexOf('.') > 0) {\n      let splitArg = methodName.split('.');\n      Assert.check(splitArg.length == 2, 'Invalid method name, correct syntax is CoveoComponent.methodName.');\n      componentClass = splitArg[0];\n      methodName = <string>splitArg[1];\n    }\n\n    let boundComponent = Component.get(element, componentClass);\n    Assert.exists(boundComponent);\n    Assert.exists(boundComponent[methodName]);\n\n    let originalMethodName = '__' + methodName;\n    if (!Utils.exists(boundComponent[originalMethodName])) {\n      boundComponent[originalMethodName] = boundComponent[methodName];\n    }\n\n    boundComponent[methodName] = handler;\n  }\n\n  public static initBoxInterface(element: HTMLElement, options: any = {}, type: string = 'Standard', injectMarkup: boolean = true) {\n    options = Initialization.resolveDefaultOptions(element, options);\n    let fromInitTypeToBoxReference = 'Box';\n    if (type != 'Standard') {\n      fromInitTypeToBoxReference += 'For' + type;\n    }\n    let boxRef = Component.getComponentRef(fromInitTypeToBoxReference);\n    if (boxRef) {\n      new Logger(element).info('Initializing box of type ' + fromInitTypeToBoxReference);\n      let injectFunction: () => any = injectMarkup ? boxRef.getInjection : () => {\n      };\n      let box = new boxRef(element, options[fromInitTypeToBoxReference], options.Analytics, injectFunction, options);\n      box.options.originalOptionsObject = options;\n      let initParameters: IInitializationParameters = { options: options, bindings: box.getBindings() };\n      Initialization.automaticallyCreateComponentsInside(element, initParameters);\n    } else {\n      new Logger(element).error('Trying to initialize box of type : ' + fromInitTypeToBoxReference + ' but not found in code (not compiled)!');\n      Assert.fail('Cannot initialize unknown type of box');\n    }\n  }\n\n  public static dispatchNamedMethodCall(methodName: string, element: HTMLElement, args: any[]): any {\n    Assert.isNonEmptyString(methodName);\n    Assert.exists(element);\n\n    let namedMethodHandler: (element: HTMLElement, ...args: any[]) => any = Initialization.namedMethods[methodName];\n    Assert.exists(namedMethodHandler);\n\n    Initialization.logger.trace('Dispatching named method call of ' + methodName, element, args);\n    if (args.length != 0) {\n      return namedMethodHandler.apply(null, [element].concat(args));\n    } else {\n      return namedMethodHandler.apply(null, [element]);\n    }\n\n  }\n\n  public static dispatchNamedMethodCallOrComponentCreation(token: string, element: HTMLElement, args: any[]): any {\n    Assert.isNonEmptyString(token);\n    Assert.exists(element);\n\n    if (Initialization.isNamedMethodRegistered(token)) {\n      return Initialization.dispatchNamedMethodCall(token, element, args);\n    } else if (Initialization.isComponentClassIdRegistered(token)) {\n      return Initialization.createComponentOfThisClassOnElement(token, element, args[0]);\n    } else if (Initialization.isThereASingleComponentBoundToThisElement(element)) {\n      return Initialization.dispatchMethodCallOnBoundComponent(token, element, args);\n    } else {\n      Assert.fail('No method or component named ' + token + ' are registered.');\n    }\n  }\n\n  public static isSearchFromLink(searchInterface: SearchInterface) {\n    return Utils.isNonEmptyString(searchInterface.getBindings().queryStateModel.get('q'));\n  }\n\n  private static isThereASingleComponentBoundToThisElement(element: HTMLElement): boolean {\n    Assert.exists(element);\n    return Utils.exists(Component.get(element));\n  }\n\n  private static dispatchMethodCallOnBoundComponent(methodName: string, element: HTMLElement, args: any[]): any {\n    Assert.isNonEmptyString(methodName);\n    Assert.exists(element);\n\n    let boundComponent = Component.get(element);\n    Assert.exists(boundComponent);\n\n    let method = boundComponent[methodName];\n    if (Utils.exists(method)) {\n      return method.apply(boundComponent, args);\n    } else {\n      Assert.fail('No method named ' + methodName + ' exist on component ' + boundComponent.type);\n    }\n  }\n\n\n  private static logFirstQueryCause(searchInterface: SearchInterface) {\n    let firstQueryCause = HashUtils.getValue('firstQueryCause', HashUtils.getHash());\n    if (firstQueryCause != null) {\n      let meta = HashUtils.getValue('firstQueryMeta', HashUtils.getHash()) || {};\n      searchInterface.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList[firstQueryCause], meta);\n    } else {\n      if (Initialization.isSearchFromLink(searchInterface)) {\n        searchInterface.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.searchFromLink, {});\n      } else {\n        searchInterface.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.interfaceLoad, {});\n      }\n    }\n  }\n\n  private static performInitFunctionsOption(options, event: string) {\n    if (Utils.exists(options)) {\n      Initialization.performFunctions(options[event]);\n    }\n  }\n\n  private static performFunctions(option) {\n    if (Utils.exists(option)) {\n      _.each(option, (func: () => void) => {\n        if (typeof func == 'function') {\n          func();\n        }\n      });\n    }\n  }\n\n  private static initExternalComponents(element: HTMLElement, options?: any) {\n    if (options && options['externalComponents']) {\n      let searchInterface = <SearchInterface>Component.get(element, SearchInterface);\n      let queryStateModel = <QueryStateModel>Component.get(element, QueryStateModel);\n      let componentStateModel = <ComponentStateModel>Component.get(element, ComponentStateModel);\n      let queryController = <QueryController>Component.get(element, QueryController);\n      let componentOptionsModel = <ComponentOptionsModel>Component.get(element, ComponentOptionsModel);\n      let usageAnalytics = searchInterface.usageAnalytics;\n      Assert.exists(searchInterface);\n      Assert.exists(queryStateModel);\n      Assert.exists(queryController);\n      Assert.exists(componentStateModel);\n      Assert.exists(usageAnalytics);\n      let initParameters: IInitializationParameters = {\n        options: options,\n        bindings: {\n          searchInterface: searchInterface,\n          queryStateModel: queryStateModel,\n          queryController: queryController,\n          usageAnalytics: usageAnalytics,\n          componentStateModel: componentStateModel,\n          componentOptionsModel: componentOptionsModel,\n          root: element\n        }\n      };\n      _.each(options['externalComponents'], (externalComponent: HTMLElement) => {\n        let elementToInstantiate = externalComponent;\n        if (Utils.isHtmlElement(elementToInstantiate)) {\n          Initialization.automaticallyCreateComponentsInside(elementToInstantiate, initParameters);\n        }\n      });\n    }\n  }\n\n  private static createFunctionThatInitializesComponentOnElements(elements: Element[], componentClassId: string, componentClass: BaseComponent, initParameters: IInitializationParameters) {\n    return () => {\n      _.each(elements, (matchingElement: HTMLElement) => {\n        if (Component.get(matchingElement, componentClassId) == null) {\n          // If options were provided, lookup options for this component class and\n          // also for the element id. Merge them and pass those to the factory method.\n          let optionsToUse = undefined;\n          if (Utils.exists(initParameters.options)) {\n            let optionsForComponentClass = initParameters.options[componentClassId];\n            let optionsForElementId = initParameters.options[matchingElement.id];\n            let initOptions = initParameters.options['initOptions'] ? initParameters.options['initOptions'][componentClassId] : {};\n            optionsToUse = Utils.extendDeep(optionsForElementId, initOptions);\n            optionsToUse = Utils.extendDeep(optionsForComponentClass, optionsToUse);\n          }\n          let initParamToUse = _.extend({}, initParameters, { options: optionsToUse });\n          Initialization.createComponentOfThisClassOnElement(componentClass['ID'], matchingElement, initParamToUse);\n        }\n      });\n    };\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Base/Initialization.ts\n **/","import {Assert} from '../../misc/Assert';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {Utils} from '../../utils/Utils';\nimport {JQueryUtils} from '../../utils/JQueryutils';\nimport {$$, Dom} from '../../utils/Dom';\nimport {QueryStateModel} from '../../models/QueryStateModel';\nimport {ComponentStateModel} from '../../models/ComponentStateModel';\nimport {ComponentOptionsModel} from '../../models/ComponentOptionsModel';\nimport {QueryController} from '../../controllers/QueryController';\nimport {SearchInterface} from '../../ui/SearchInterface/SearchInterface';\nimport {IAnalyticsClient} from '../../ui/Analytics/AnalyticsClient';\nimport {NoopAnalyticsClient} from '../../ui/Analytics/NoopAnalyticsClient';\nimport {BaseComponent} from './BaseComponent';\nimport {IComponentBindings} from './ComponentBindings';\n\n/**\n * Definition for a Component.\n */\nexport interface IComponentDefinition {\n  /**\n   * The static ID that each component need to be identified.<br/>\n   * For example, SearchButton -> static ID : SearchButton -> className : CoveoSearchButton\n   */\n  ID: string;\n  /**\n   * The generated `className` for this component.<br/>\n   * For example, SearchButton -> static ID : SearchButton -> className : CoveoSearchButton\n   */\n  className?: string;\n  /**\n   * Constructor for each component\n   * @param element The HTMLElement on which the component will instantiate.\n   * @param options The available options for the component.\n   * @param bindings The bindings (or environment) for the component.For exemple, the {@link QueryController} or {@link SearchInterface}. Optional, if not provided, the component will resolve those automatically. This has a cost on performance, though, since it has to traverses it's parents to find the correct elements.\n   * @param args Optional arguments, depending on the component type. For example, ResultComponent will receive the result there.\n   */\n  new (element: HTMLElement, options: any, bindings: IComponentBindings, ...args: any[]): Component;\n  /**\n   * The available options for the component.\n   */\n  options?: any;\n  /**\n   * The optional parent of the component, which will be a component itself.\n   */\n  parent?: IComponentDefinition;\n  /**\n   * The optional index fields that the component possess or display.\n   */\n  fields?: string[];\n}\n\n/**\n * The base class for every component in the framework.\n */\nexport class Component extends BaseComponent {\n  /**\n   * Allows the component to bind events and execute them only when it is enabled.\n   * @type {Coveo.ComponentEvents}\n   */\n  public bind = new ComponentEvents(this);\n  /**\n   * A reference to the root HTMLElement (the {@link SearchInterface}).\n   */\n  public root: HTMLElement;\n  /**\n   * Contains the state of the query. Allows to get/set values. Trigger query state event when modified. Each component can listen to those events.\n   */\n  public queryStateModel: QueryStateModel;\n  /**\n   * Contains the state of different component (enabled vs disabled). Allows to get/set values. Trigger component state event when modified. Each component can listen to those events.\n   */\n  public componentStateModel: ComponentStateModel;\n  /**\n   * Contains the singleton that allows to trigger queries.\n   */\n  public queryController: QueryController;\n  /**\n   * A reference to the root of every component, the {@link SearchInterface}.\n   */\n  public searchInterface: SearchInterface;\n  /**\n   * A reference to the {@link Analytics.client}.\n   */\n  public usageAnalytics: IAnalyticsClient;\n  /**\n   * Contains the state of options for differents component. Mainly used by {@link ResultLink}.\n   */\n  public componentOptionsModel: ComponentOptionsModel;\n  public ensureDom: Function;\n  public options: any;\n\n  /**\n   * Create a new Component. Resolve all {@link IComponentBindings} if not provided.<br/>\n   * Create a new Logger for this component.\n   * Attach the component to the {@link SearchInterface}.<br/>\n   * @param element The HTMLElement on which to create the component. Used to bind data on the element.\n   * @param type The unique identifier for this component. See : {@link IComponentDefinition.ID}. Used to generate the unique Coveo CSS class associated with every component.\n   * @param bindings The environment for every component. Optional, but omitting to provide one will impact performance.\n   */\n  constructor(public element: HTMLElement, public type: string, bindings: IComponentBindings = {}) {\n    super(element, type);\n    this.root = bindings.root || this.resolveRoot();\n    this.queryStateModel = bindings.queryStateModel || this.resolveQueryStateModel();\n    this.componentStateModel = bindings.componentStateModel || this.resolveComponentStateModel();\n    this.queryController = bindings.queryController || this.resolveQueryController();\n    this.searchInterface = bindings.searchInterface || this.resolveSearchInterface();\n    this.usageAnalytics = bindings.usageAnalytics || this.resolveUA();\n    this.componentOptionsModel = bindings.componentOptionsModel || this.resolveComponentOptionsModel();\n    this.ensureDom = _.once(() => this.createDom());\n\n    if (this.searchInterface != null) {\n      this.searchInterface.attachComponent(type, this);\n    }\n  }\n\n  /**\n   * Return the bindings, or environment, for the current component.\n   * @returns {IComponentBindings}\n   */\n  public getBindings(): IComponentBindings {\n    return <IComponentBindings>{\n      root: this.root,\n      queryStateModel: this.queryStateModel,\n      queryController: this.queryController,\n      searchInterface: this.searchInterface,\n      componentStateModel: this.componentStateModel,\n      componentOptionsModel: this.componentOptionsModel,\n      usageAnalytics: this.usageAnalytics\n    };\n  }\n\n  public createDom() {\n    // By default we do nothing\n  }\n\n  public resolveSearchInterface(): SearchInterface {\n    return <SearchInterface>Component.resolveBinding(this.element, SearchInterface);\n  }\n\n  public resolveRoot(): HTMLElement {\n    var resolvedSearchInterface = Component.resolveBinding(this.element, SearchInterface);\n    return resolvedSearchInterface ? resolvedSearchInterface.element : undefined;\n  }\n\n  public resolveQueryController(): QueryController {\n    return <QueryController>Component.resolveBinding(this.element, QueryController);\n  }\n\n  public resolveComponentStateModel(): ComponentStateModel {\n    return <ComponentStateModel>Component.resolveBinding(this.element, ComponentStateModel);\n  }\n\n  public resolveQueryStateModel(): QueryStateModel {\n    return <QueryStateModel>Component.resolveBinding(this.element, QueryStateModel);\n  }\n\n  public resolveComponentOptionsModel(): ComponentOptionsModel {\n    return <ComponentOptionsModel>Component.resolveBinding(this.element, ComponentOptionsModel);\n  }\n\n  public resolveUA(): IAnalyticsClient {\n    var searchInterface = this.resolveSearchInterface();\n    return (searchInterface && searchInterface.usageAnalytics) ? searchInterface.usageAnalytics : new NoopAnalyticsClient();\n  }\n\n  public resolveResult(): IQueryResult {\n    return Component.getResult(this.element);\n  }\n\n  /**\n   * Get the bound component to the given HTMLElement. Throws an assert if the HTMLElement has no component bound, unless using the noThrow argument.<br/>\n   * If there is multiple component bound to the current HTMLElement, you must specify the component class.\n   * @param element HTMLElement for which to get the bound component.\n   * @param componentClass Optional component class. If the HTMLElement has multiple components bound, you must specify which one you are targeting.\n   * @param noThrow Boolean option to tell the method to not throw on error.\n   * @returns {Component}\n   */\n  static get(element: HTMLElement, componentClass?: any, noThrow?: boolean): BaseComponent {\n    Assert.exists(element);\n\n    if (_.isString(componentClass)) {\n      return <Component>element[Component.computeCssClassNameForType(componentClass)];\n    } else if (Utils.exists(componentClass)) {\n      Assert.exists(componentClass.ID);\n      return <Component>element[Component.computeCssClassNameForType(componentClass.ID)];\n    } else {\n      // No class specified, but we support returning the bound component\n      // if there is exactly one.\n      var boundComponents = BaseComponent.getBoundComponentsForElement(element);\n      if (!noThrow) {\n        Assert.check(boundComponents.length <= 1, 'More than one component is bound to this element. You need to specify the component type.');\n      }\n      return boundComponents[0];\n    }\n  }\n\n  static getResult(element: HTMLElement, noThrow: boolean = false): IQueryResult {\n    var resultElement = $$(element).closest('.CoveoResult');\n    Assert.check(noThrow || resultElement != undefined);\n    return resultElement['CoveoResult'];\n  }\n\n  static bindResultToElement(element: HTMLElement, result: IQueryResult) {\n    Assert.exists(element);\n    Assert.exists(result);\n    $$(element).addClass('CoveoResult');\n    element['CoveoResult'] = result;\n  }\n\n  static resolveBinding(element: HTMLElement, componentClass: any): BaseComponent {\n    Assert.exists(element);\n    Assert.exists(componentClass);\n    Assert.exists(componentClass.ID);\n    // first, look down\n    var found;\n    if ($$(element).is('.' + Component.computeCssClassNameForType(componentClass.ID))) {\n      found = element;\n    } else {\n      var findDown = $$(element).findClass(Component.computeCssClassNameForType(componentClass.ID));\n      if (!findDown || findDown.length == 0) {\n        var findUp = $$(element).closest(Component.computeCssClassNameForType(componentClass.ID));\n        if (findUp) {\n          found = findUp;\n        }\n      } else {\n        found = findDown;\n      }\n    }\n    if (found) {\n      return <BaseComponent>found[Component.computeCssClassNameForType(componentClass.ID)];\n    } else {\n      return undefined;\n    }\n  }\n\n\n  static pointElementsToDummyForm(element: HTMLElement) {\n    let inputs = $$(element).is('input') ? [element] : [];\n    inputs = inputs.concat($$(element).findAll('input'));\n    _.each(_.compact(inputs), (input) => {\n      input.setAttribute('form', 'coveo-dummy-form');\n    });\n  }\n}\n\n/**\n * Used by the various Coveo Component to trigger and bind event.<br/>\n * It adds a small logic to execute handler or triggers only when the component is \"enabled\".<br/>\n * A component is disabled by calling {Component.disable}<br/>\n * Typically, a component is disabled when it is not active in the current {Tab}.<br/>\n * It can also be disabled by external code.<br/>\n * The class serves as a way to not execute handler on component that are invisible and inactive in the query.\n */\nexport class ComponentEvents {\n  /**\n   * Create a new `ComponentEvents` for the given {@link Component}.\n   * @param owner The {@link Component} which owns those events handler and trigger.\n   */\n  constructor(public owner: Component) {\n    Assert.exists(owner);\n  }\n\n  /**\n   * Execute the handler for the given event on the given target element.<br/>\n   * Execute only if the component is \"enabled\" (see {@link Component.enable}).\n   * @param el The target on which the event will originate.\n   * @param event The event for which to register an handler.\n   * @param handler The function to execute when the event is triggered.\n   */\n  public on(el: HTMLElement, event: string, handler: Function);\n  public on(el: Dom, event: string, handler: Function);\n  public on(arg: any, event: string, handler: Function) {\n    if (!JQueryUtils.getJQuery() || !JQueryUtils.isInstanceOfJQuery(arg)) {\n      var htmlEl: HTMLElement = arg;\n      $$(htmlEl).on(event, this.wrapToCallIfEnabled(handler));\n    } else {\n      var jq: Dom = arg;\n      jq.on(event, this.wrapToCallIfEnabled(handler));\n    }\n  }\n\n  /**\n   * Execute the handler for the given event on the given target element.<br/>\n   * Execute only if the component is \"enabled\" (see {@link Component.enable}).<br/>\n   * Execute the handler only ONE time.\n   * @param el The target on which the event will originate.\n   * @param event The event for which to register an handler.\n   * @param handler The function to execute when the event is triggered.\n   */\n  public one(el: HTMLElement, event: string, handler: Function);\n  public one(el: Dom, event: string, handler: Function);\n  public one(arg: any, event: string, handler: Function) {\n    if (arg instanceof HTMLElement) {\n      var htmlEl: HTMLElement = arg;\n      $$(htmlEl).one(event, this.wrapToCallIfEnabled(handler));\n    } else {\n      var jq: Dom = arg;\n      jq.one(event, this.wrapToCallIfEnabled(handler));\n    }\n  }\n\n  /**\n   * Bind on the \"root\" of the Component. The root is typically the {@link SearchInterface}.<br/>\n   * Bind an event using native javascript code.\n   * @param event The event for which to register an handler.\n   * @param handler The function to execute when the event is triggered.\n   */\n  public onRootElement<T>(event: string, handler: (args: T) => any) {\n    this.on(this.owner.root, event, handler);\n  }\n\n  /**\n   * Bind on the \"root\" of the Component. The root is typically the {@link SearchInterface}.<br/>\n   * Bind an event using native javascript code.\n   * The handler will execute only ONE time.\n   * @param event The event for which to register an handler.\n   * @param handler The function to execute when the event is triggered.\n   */\n  public oneRootElement<T>(event: string, handler: (args: T) => any) {\n    this.one(this.owner.root, event, handler);\n  }\n\n  /**\n   * Bind an event related specially to the query state model.<br/>\n   * This will build the correct string event and execute the handler only if the component is activated.\n   * @param eventType The event type for which to register an event.\n   * @param attribute The attribute for which to register an event.\n   * @param handler The handler to execute when the query state event is triggered.\n   */\n  public onQueryState<T>(eventType: string, attribute?: string, handler?: (args: T) => any) {\n    this.onRootElement(this.getQueryStateEventName(eventType, attribute), handler);\n  }\n\n  /**\n   * Bind an event related specially to the query state model.<br/>\n   * This will build the correct string event and execute the handler only if the component is activated.<br/>\n   * Will execute only once.\n   * @param eventType The event type for which to register an event.\n   * @param attribute The attribute for which to register an event.\n   * @param handler The handler to execute when the query state event is triggered.\n   */\n  public oneQueryState<T>(eventType: string, attribute?: string, handler?: (args: T) => any) {\n    this.oneRootElement(this.getQueryStateEventName(eventType, attribute), handler);\n  }\n\n  /**\n   * Trigger an event on the target element, with optional arguments.\n   * @param el The target HTMLElement on which to trigger the event.\n   * @param event The event to trigger.\n   * @param args The optional argument to pass to the handlers.\n   */\n  public trigger(el: HTMLElement, event: string, args?: Object);\n  public trigger(el: Dom, event: string, args?: Object);\n  public trigger(arg: any, event: string, args?: Object) {\n    this.wrapToCallIfEnabled(() => {\n      if (arg instanceof HTMLElement) {\n        var htmlEl: HTMLElement = arg;\n        $$(htmlEl).trigger(event, args);\n      } else {\n        var jq: Dom = arg;\n        jq.trigger(event, args);\n      }\n    })(args);\n  }\n\n  /**\n   * Execute the function only if the component is enabled.\n   * @param func The function to execute if the component is enabled.\n   * @returns {function(...[any]): *}\n   */\n  private wrapToCallIfEnabled(func: Function) {\n    return (...args: any[]) => {\n      if (!this.owner.disabled) {\n        if (args && args[0] instanceof CustomEvent) {\n          if (args[0].detail) {\n            args = [args[0].detail];\n          }\n        } else if (args && JQueryUtils.isInstanceOfJqueryEvent(args[0])) {\n          if (args[1] != undefined) {\n            args = [args[1]];\n          } else {\n            args = [];\n          }\n        }\n        return func.apply(this.owner, args);\n      }\n    };\n  }\n\n  private getQueryStateEventName(eventType: string, attribute?: string): string {\n    var evtName;\n    if (eventType && attribute) {\n      evtName = this.owner.queryStateModel.getEventName(eventType + attribute);\n    } else {\n      evtName = this.owner.queryStateModel.getEventName(eventType);\n    }\n    return evtName;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Base/Component.ts\n **/","import {SearchEndpoint} from '../../rest/SearchEndpoint';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {DeviceUtils} from '../../utils/DeviceUtils';\nimport {$$} from '../../utils/Dom';\nimport {DomUtils} from '../../utils/DomUtils';\nimport {Assert} from '../../misc/Assert';\nimport {QueryStateModel} from '../../models/QueryStateModel';\nimport {ComponentStateModel} from '../../models/ComponentStateModel';\nimport {ComponentOptionsModel} from '../../models/ComponentOptionsModel';\nimport {QueryController} from '../../controllers/QueryController';\nimport {Model, IAttributeChangedEventArg} from '../../models/Model';\nimport {QueryEvents, IBuildingQueryEventArgs, INewQueryEventArgs, IQuerySuccessEventArgs, IQueryErrorEventArgs} from '../../events/QueryEvents';\nimport {IBeforeRedirectEventArgs, StandaloneSearchInterfaceEvents} from '../../events/StandaloneSearchInterfaceEvents';\nimport {HistoryController} from '../../controllers/HistoryController';\nimport {LocalStorageHistoryController} from '../../controllers/LocalStorageHistoryController';\nimport {InitializationEvents} from '../../events/InitializationEvents';\nimport {IAnalyticsClient} from '../Analytics/AnalyticsClient';\nimport {NoopAnalyticsClient} from '../Analytics/NoopAnalyticsClient';\nimport {Utils} from '../../utils/Utils';\nimport {RootComponent} from '../Base/RootComponent';\nimport {BaseComponent} from '../Base/BaseComponent';\nimport {Debug} from '../Debug/Debug';\nimport {HashUtils} from '../../utils/HashUtils';\nimport FastClick = require('fastclick');\nimport timezone = require('jstz');\nimport {SentryLogger} from '../../misc/SentryLogger';\n\nexport interface ISearchInterfaceOptions {\n  enableHistory?: boolean;\n  enableAutomaticResponsiveMode?: boolean;\n  useLocalStorageForHistory?: boolean;\n  resultsPerPage?: number;\n  excerptLength?: number;\n  expression?: string;\n  filterField?: string;\n  hideUntilFirstQuery?: boolean;\n  firstLoadingAnimation?: HTMLElement;\n  autoTriggerQuery?: boolean;\n  timezone?: string;\n  enableDebugInfo?: boolean;\n  enableCollaborativeRating?: boolean;\n  enableDuplicateFiltering?: boolean;\n  pipeline?: string;\n  maximumAge?: number;\n  searchPageUri?: string;\n  initOptions?: any;\n  endpoint?: SearchEndpoint;\n  originalOptionsObject?: any;\n}\n\n/**\n * This component is the root and main component of your search interface.<br/>\n * You should place every other component inside this component.<br/>\n * It is also on this component that you call the initialization function.<br/>\n * Since this component is the root of your Search UI, it is recommended that you give it a unique HTML id attribute in order to reference it easily.\n */\nexport class SearchInterface extends RootComponent {\n  static ID = 'SearchInterface';\n  /**\n   * The options for the search interface\n   * @componentOptions\n   */\n  static options: ISearchInterfaceOptions = {\n    /**\n     * Specifies whether your search interface allows users to navigate in the search history using the browser back/forward buttons.<br/>\n     * When enabled, the search interface saves the state of the current query in the hash portion of the URL.<br/>\n     * For example #q=foobar.<br/>\n     * The default value is `false`.\n     */\n    enableHistory: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * Specifies whether the UI should use an automatic responsive mode (eg : The tab(s) and facet(s) being placed automatically under the search box)<br/>\n     * This can be disabled for design reasons, if it does not fit with the implementation needs.<br/>\n     * The default value is `true`\n     */\n    enableAutomaticResponsiveMode: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    /**\n     * Specifies that you wish to use the local storage of the browser to store the state of the interface.<br/>\n     * This can be used for very specific purpose, and only if you know what you are doing.<br/>\n     * Default value is `false`.\n     */\n    useLocalStorageForHistory: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * Specifies the number of results that each page displays.<br/>\n     * Default is 10.\n     */\n    resultsPerPage: ComponentOptions.buildNumberOption({ defaultValue: 10, min: 0 }),\n    /**\n     * Specifies the number of characters of the excerpt to get at query time and display for each query result.<br/>\n     * This setting is global and can not be modified on a per result basis.<br/>\n     * The default value is 200.\n     */\n    excerptLength: ComponentOptions.buildNumberOption({ defaultValue: 200, min: 0 }),\n    /**\n     * Specifies an expression to add to each query.<br/>\n     * This should be use if you wish to add a global filter for your whole search interface that applies for all tabs.<br/>\n     * Do not use this for security concern ... (It is JavaScript after all).<br/>\n     * By default none is added.\n     */\n    expression: ComponentOptions.buildStringOption({ defaultValue: '' }),\n    /**\n     * Specifies the name of a field to use as a custom filter when executing the query (also referred to as 'folding').<br/>\n     * Setting this option causes the index to return only one result having any particular value inside the filter field. Any other matching result is 'folded' inside the childResults member of each JSON query result.<br/>\n     * This feature is typically used with threaded conversations to include only one top-level result per conversation. Thus, the field specified in this option typically is a value unique to each thread that is shared by all items (e.g.: posts, emails, etc.) in the thread.<br/>\n     * This is obviously an advanced feature. Instead, look into using the {@link Folding} component, which covers a lot of different use cases.<br/>\n     * By default none is added\n     */\n    filterField: ComponentOptions.buildStringOption({ defaultValue: '' }),\n    /**\n     * Specifies whether the interface should display a loading animation before the first query has completed successfully.<br/>\n     * Note that if you set autoTriggerQuery to false, this means that the loading animation will not go away automatically.<br/>\n     * Default is true.\n     */\n    hideUntilFirstQuery: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    /**\n     * Specifies the animation that you wish to use for your interface.<br/>\n     * This can be a selector or an element that matches the correct CSS class.<br/>\n     * Eg : firstLoadingAnimation : '.CustomFirstLoadingAnimation' / data-first-loading-animation='.CustomFirstLoadingAnimation'.</br>\n     * Eg : &lt;element class='CoveoSearchInterface'&gt;&lt;element class='coveo-first-loading-animation'/&gt;&lt;/element&gt;<br/>\n     * By default, this will be a Coveo CSS animation (which can also be customized with CSS).\n     */\n    firstLoadingAnimation: ComponentOptions.buildChildHtmlElementOption({\n      childSelector: '.coveo-first-loading-animation',\n      defaultFunction: () => DomUtils.getBasicLoadingAnimation()\n    }),\n    /**\n     * Specifies whether the init function should trigger the first query automatically when the page is loaded.<br/>\n     * Note that if you set this to false, then the hideUntilFirstQuery option still applies. This means that the animation will still show until a query is triggered.<br/>\n     * Default is `true`.\n     */\n    autoTriggerQuery: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    endpoint: ComponentOptions.buildCustomOption((endpoint) => endpoint != null && endpoint in SearchEndpoint.endpoints ? SearchEndpoint.endpoints[endpoint] : null, { defaultFunction: () => SearchEndpoint.endpoints['default'] }),\n    /**\n     * Specifies the timezone in which the search interface is loaded. This allows the index to recognize some special query syntax.<br/>\n     * This must be an IANA zone info key (aka the Olson time zone database). For example : 'America/New_York'.<br/>\n     * By default, we use a library that tries to detect the timezone automatically.<br/>\n     */\n    timezone: ComponentOptions.buildStringOption({ defaultFunction: () => timezone.jstz.determine().name() }),\n    /**\n     * Specifies whether to enable the feature that allows users to ALT + double click on any results to get the Debug page with a detailed view of all the properties and fields for a given result.<br/>\n     * This has no security concern (as all those informations are visible to users through the browser developer console or by calling the Coveo API directly).<br/>\n     * The default value is `true`.\n     */\n    enableDebugInfo: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    /**\n     * Specifies whether to enable the collaborative rating for the index and and include the user rating on each results to the normal index ranking.<br/>\n     * If activated, this option can be leveraged with the {@link ResultRating} component.<br/>\n     * The default value is `false`.\n     */\n    enableCollaborativeRating: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * Specifies whether to filter duplicates on the search results.<br/>\n     * When true, duplicates do not appear in search results, but they however are included in facet counts, which can be sometimes confusing for the users. This is a limitation of the index.<br/>\n     * Example: The user narrows a query to one document that has a duplicate. Only one document appears in search results, but the facet count is 2.<br/>\n     * The default value is `false`.\n     */\n    enableDuplicateFiltering: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * Specifies the name of the query pipeline to use for the queries. If not specified, the default value is default, which means the default query pipeline will be used.<br/>\n     * You can use this parameter when your index is in a Coveo Cloud organization where you created pipelines (see https://onlinehelp.coveo.com/en/cloud/creating_and_managing_query_pipelines.htm).<br/>\n     * Default value is 'default'.\n     */\n    pipeline: ComponentOptions.buildStringOption(),\n    /**\n     * Specifies the maximum age in milliseconds that cached query results can have in order to be used (instead of performing a new query on the index).<br/>\n     * If cached results are available but are older than the specified age, a new query will be performed on the index.<br/>\n     * On high-volume public web sites, having a larger maximum age can greatly improve query response time at the cost of result freshness.<br/>\n     * By default, the Coveo Search API will determine the cache length. This typically takes 15 minutes.\n     */\n    maximumAge: ComponentOptions.buildNumberOption(),\n    /**\n     * Specifies the search page you wish to navigate to when instantiating a standalone search box interface.<br/>\n     * By default this is undefined, meaning the search interface will not redirect.\n     */\n    searchPageUri: ComponentOptions.buildStringOption()\n  };\n\n  public static SMALL_INTERFACE_CLASS_NAME = 'coveo-small-search-interface';\n\n  private attachedComponents: { [type: string]: BaseComponent[] };\n  private isNewDesignAttribute = false;\n\n  public root: HTMLElement;\n  public queryStateModel: QueryStateModel;\n  public componentStateModel: ComponentStateModel;\n  public queryController: QueryController;\n  public componentOptionsModel: ComponentOptionsModel;\n  public usageAnalytics: IAnalyticsClient;\n\n  /**\n   * Create a new search interface. Initialize letious singleton for the interface (eg : Usage analytic, query controller, state model, etc.)<br/>\n   * Bind event related to the query.<br/>\n   * Will hide and show the loading animation, if activated.<br/>\n   * @param element The `HTMLElement` on which the element will be instantiated. This cannot be an `HTMLInputElement` for technical reasons.\n   * @param options The options for the querybox.\n   * @param analyticsOptions The options for the analytics component. Since the analytics component is normally global, it needs to be passed at initialization of the whole interface.\n   * @param _window The window object for the search interface. Used for unit tests, which can pass a mock. Default is the global window object.\n   */\n  constructor(public element: HTMLElement, public options?: ISearchInterfaceOptions, public analyticsOptions?, _window = window) {\n    super(element, SearchInterface.ID);\n\n    if (DeviceUtils.isMobileDevice()) {\n      $$(document.body).addClass('coveo-mobile-device');\n    }\n\n    FastClick.attach(element);\n\n    this.options = ComponentOptions.initComponentOptions(element, SearchInterface, options);\n    Assert.exists(element);\n    Assert.exists(this.options);\n\n    if (this.options.hideUntilFirstQuery) {\n      this.showAndHideFirstQueryAnimation();\n    }\n\n    this.root = element;\n    this.queryStateModel = new QueryStateModel(element);\n    this.componentStateModel = new ComponentStateModel(element);\n    this.componentOptionsModel = new ComponentOptionsModel(element);\n    this.usageAnalytics = this.initializeAnalytics();\n    this.queryController = new QueryController(element, this.options, this.usageAnalytics, this);\n    new SentryLogger(this.queryController);\n\n    let eventName = this.queryStateModel.getEventName(Model.eventTypes.preprocess);\n    $$(this.element).on(eventName, (e, args) => this.handlePreprocessQueryStateModel(args));\n    $$(this.element).on(QueryEvents.buildingQuery, (e, args) => this.handleBuildingQuery(args));\n    $$(this.element).on(QueryEvents.querySuccess, (e, args) => this.handleQuerySuccess(args));\n    $$(this.element).on(QueryEvents.queryError, (e, args) => this.handleQueryError(args));\n\n    if (this.options.enableHistory) {\n      if (!this.options.useLocalStorageForHistory) {\n        new HistoryController(element, _window, this.queryStateModel, this.queryController);\n      } else {\n        new LocalStorageHistoryController(element, _window, this.queryStateModel, this.queryController);\n      }\n    } else {\n      $$(this.element).on(InitializationEvents.restoreHistoryState, () => this.queryStateModel.setMultiple(this.queryStateModel.defaultAttributes));\n    }\n\n    let eventNameQuickview = this.queryStateModel.getEventName(Model.eventTypes.changeOne + QueryStateModel.attributesEnum.quickview);\n    $$(this.element).on(eventNameQuickview, (e, args) => this.handleQuickviewChanged(args));\n    // shows the UI, since it's been hidden while loading\n    this.element.style.display = element.style.display || 'block';\n    this.setupDebugInfo();\n    this.isNewDesignAttribute = this.root.getAttribute('data-design') == 'new';\n  }\n\n  /**\n   * Display the first query animation.<br/>\n   * This is normally the Coveo logo with a CSS animation (which can be customized with options or CSS).\n   */\n  public showWaitAnimation() {\n    $$(this.options.firstLoadingAnimation).detach();\n    $$(this.element).addClass('coveo-waiting-for-first-query');\n    this.element.appendChild(this.options.firstLoadingAnimation);\n  }\n\n  /**\n   * Hide the first query animation.<br/>\n   * This is normally the Coveo logo with a CSS animation (which can be customized with options or CSS).\n   */\n  public hideWaitAnimation() {\n    $$(this.options.firstLoadingAnimation).detach();\n    $$(this.element).removeClass('coveo-waiting-for-first-query');\n  }\n\n  /**\n   * Attach a component to the interface. This allows the interface to easily list and traverse its component.\n   * @param type Normally a unique identifier without the Coveo prefix (e.g.: CoveoFacet -> Facet, CoveoPager -> Pager, CoveoQuerybox -> Querybox, etc.)\n   * @param component The component instance to attach.\n   */\n  public attachComponent(type: string, component: BaseComponent) {\n    this.getComponents(type).push(component);\n  }\n\n  /**\n   * Detach a component from the interface.\n   * @param type Normally a unique identifier without the Coveo prefix (e.g.: CoveoFacet -> Facet, CoveoPager -> Pager, CoveoQuerybox -> Querybox, etc.)\n   * @param component The component instance to detach.\n   */\n  public detachComponent(type: string, component: BaseComponent) {\n    let components = this.getComponents(type);\n    let index = _.indexOf(components, component);\n    if (index > -1) {\n      components.splice(index, 1);\n    }\n  }\n\n  /**\n   * Return the bindings, or environment, for the current component\n   * @returns {IComponentBindings}\n   */\n  public getBindings() {\n    return {\n      root: this.root,\n      queryStateModel: this.queryStateModel,\n      queryController: this.queryController,\n      searchInterface: <SearchInterface>this,\n      componentStateModel: this.componentStateModel,\n      componentOptionsModel: this.componentOptionsModel,\n      usageAnalytics: this.usageAnalytics\n    };\n  }\n\n  /**\n   * Get all the components for a given type\n   * @param type Normally a unique identifier without the Coveo prefix (e.g.: CoveoFacet -> Facet, CoveoPager -> Pager, CoveoQuerybox -> Querybox, etc.)\n   */\n  public getComponents<T>(type: string): T[];\n  /**\n   * Get all the components for a given type\n   * @param type Normally a unique identifier without the Coveo prefix (e.g.: CoveoFacet -> Facet, CoveoPager -> Pager, CoveoQuerybox -> Querybox, etc.)\n   */\n  public getComponents(type: string): BaseComponent[] {\n    if (this.attachedComponents == null) {\n      this.attachedComponents = {};\n    }\n    if (!(type in this.attachedComponents)) {\n      this.attachedComponents[type] = [];\n    }\n    return this.attachedComponents[type];\n  }\n\n  /**\n   * Determines whether the interface is using the new design.<br/>\n   * This changes the rendering of multiple components.\n   */\n  public isNewDesign() {\n    return this.isNewDesignAttribute;\n  }\n\n  protected initializeAnalytics(): IAnalyticsClient {\n    let analyticsRef = BaseComponent.getComponentRef('Analytics');\n    if (analyticsRef) {\n      return analyticsRef.create(this.element, this.analyticsOptions);\n    }\n    return new NoopAnalyticsClient();\n  }\n\n  private setupDebugInfo() {\n    if (this.options.enableDebugInfo) {\n      setTimeout(() => new Debug(this.element, this.queryController));\n    }\n  }\n\n  private showAndHideFirstQueryAnimation() {\n    this.showWaitAnimation();\n    // On first query success or error, wait for call stack to finish, then remove the animation\n    $$(this.element).one(QueryEvents.querySuccess, () => {\n      _.defer(() => this.hideWaitAnimation());\n    });\n    $$(this.element).one(QueryEvents.queryError, () => {\n      _.defer(() => this.hideWaitAnimation());\n    });\n  }\n\n  private handlePreprocessQueryStateModel(args: any) {\n    let tgFromModel = this.queryStateModel.get(QueryStateModel.attributesEnum.tg);\n    let tFromModel = this.queryStateModel.get(QueryStateModel.attributesEnum.t);\n\n    let tg = tgFromModel;\n    let t = tFromModel;\n\n    // if you want to set the tab group\n    if (args.tg !== undefined) {\n      args.tg = this.getTabGroupId(args.tg);\n      if (tg != args.tg) {\n        args.t = args.t || QueryStateModel.defaultAttributes.t;\n        args.sort = args.sort || QueryStateModel.defaultAttributes.sort;\n        tg = args.tg;\n      }\n    }\n\n    if (args.t !== undefined) {\n      args.t = this.getTabId(tg, args.t);\n      if (t != args.t) {\n        args.sort = args.sort || QueryStateModel.defaultAttributes.sort;\n        t = args.t;\n      }\n    }\n\n    if (args.sort !== undefined) {\n      args.sort = this.getSort(t, args.sort);\n    }\n\n    if (args.quickview !== undefined) {\n      args.quickview = this.getQuickview(args.quickview);\n    }\n  }\n\n  private getTabGroupId(tabGroupId: string) {\n    let tabGroupRef = BaseComponent.getComponentRef('TabGroup');\n    if (tabGroupRef) {\n      let tabGroups = this.getComponents<any>(tabGroupRef.ID);\n      // check if the tabgroup is correct\n      if (tabGroupId != QueryStateModel.defaultAttributes.tg && _.any(tabGroups, (tabGroup: any) => !tabGroup.disabled && tabGroupId == tabGroup.options.id)) {\n        return tabGroupId;\n      }\n      // select the first tabGroup\n      if (tabGroups.length > 0) {\n        return tabGroups[0].options.id;\n      }\n    }\n    return QueryStateModel.defaultAttributes.tg;\n  }\n\n  private getTabId(tabGroupId: string, tabId: string) {\n    let tabRef = BaseComponent.getComponentRef('Tab');\n    let tabGroupRef = BaseComponent.getComponentRef('TabGroup');\n    if (tabRef) {\n      let tabs = this.getComponents<any>(tabRef.ID);\n      if (tabGroupRef) {\n        // if has a tabGroup\n        if (tabGroupId != QueryStateModel.defaultAttributes.tg) {\n          let tabGroups = this.getComponents<any>(tabGroupRef.ID);\n          let tabGroup = _.find(tabGroups, (tabGroup: any) => tabGroupId == tabGroup.options.id);\n          // check if the tabgroup contain this tab\n          if (tabId != QueryStateModel.defaultAttributes.t && _.any(tabs, (tab: any) => tabId == tab.options.id && tabGroup.isElementIncludedInTabGroup(tab.element))) {\n            return tabId;\n          }\n          // select the first tab in the tabGroup\n          let tab = _.find(tabs, (tab: any) => tabGroup.isElementIncludedInTabGroup(tab.element));\n          if (tab != null) {\n            return tab.options.id;\n          }\n          return QueryStateModel.defaultAttributes.t;\n        }\n      }\n      // check if the tab is correct\n      if (tabId != QueryStateModel.defaultAttributes.t && _.any(tabs, (tab: any) => tabId == tab.options.id)) {\n        return tabId;\n      }\n      // select the first tab\n      if (tabs.length > 0) {\n        return tabs[0].options.id;\n      }\n    }\n    return QueryStateModel.defaultAttributes.t;\n  }\n\n  private getSort(tabId: string, sortId: string) {\n    let sortRef = BaseComponent.getComponentRef('Sort');\n    if (sortRef) {\n      let sorts = this.getComponents<any>(sortRef.ID);\n      // if has a selected tab\n      let tabRef = BaseComponent.getComponentRef('Tab');\n      if (tabRef) {\n        if (tabId != QueryStateModel.defaultAttributes.t) {\n          let tabs = this.getComponents<any>(tabRef.ID);\n          let tab = _.find(tabs, (tab: any) => tabId == tab.options.id);\n          let sortCriteria = tab.options.sort;\n\n          // check if the tab contain this sort\n          if (sortId != QueryStateModel.defaultAttributes.sort && _.any(sorts, (sort: any) => tab.isElementIncludedInTab(sort.element) && sort.match(sortId))) {\n            return sortId;\n          } else if (sortCriteria != null) {\n            // if not and tab.options.sort is set apply it\n            return sortCriteria.toString();\n          }\n          // select the first sort in the tab\n          let sort = _.find(sorts, (sort: any) => tab.isElementIncludedInTab(sort.element));\n          if (sort != null) {\n            return sort.options.sortCriteria[0].toString();\n          }\n          return QueryStateModel.defaultAttributes.sort;\n        }\n      }\n      // check if the sort is correct\n      if (sortId != QueryStateModel.defaultAttributes.sort && _.any(sorts, (sort: any) => sort.match(sortId))) {\n        return sortId;\n      }\n      // select the first sort\n      if (sorts.length > 0) {\n        return sorts[0].options.sortCriteria[0].toString();\n      }\n    }\n    return QueryStateModel.defaultAttributes.sort;\n  }\n\n  private getQuickview(quickviewId: string) {\n    let quickviewRef = BaseComponent.getComponentRef('Quickview');\n    if (quickviewRef) {\n      let quickviews = this.getComponents<any>(quickviewRef.ID);\n      if (_.any(quickviews, (quickview: any) => quickview.getHashId() == quickviewId)) {\n        return quickviewId;\n      }\n    }\n    return QueryStateModel.defaultAttributes.quickview;\n  }\n\n  private handleQuickviewChanged(args: IAttributeChangedEventArg) {\n    let quickviewRef = BaseComponent.getComponentRef('Quickview');\n    if (quickviewRef) {\n      let quickviews = this.getComponents<any>(quickviewRef.ID);\n      if (args.value != '') {\n        let quickviewsPartition = _.partition(quickviews, (quickview) => quickview.getHashId() == args.value);\n        if (quickviewsPartition[0].length != 0) {\n          _.first(quickviewsPartition[0]).open();\n          _.forEach(_.tail(quickviewsPartition[0]), (quickview) => quickview.close());\n        }\n        _.forEach(quickviewsPartition[1], (quickview) => quickview.close());\n      } else {\n        _.forEach(quickviews, (quickview) => {\n          quickview.close();\n        });\n      }\n    }\n  }\n\n  private handleBuildingQuery(data: IBuildingQueryEventArgs) {\n    if (this.options.enableDuplicateFiltering) {\n      data.queryBuilder.enableDuplicateFiltering = true;\n    }\n\n    if (!Utils.isNullOrUndefined(this.options.pipeline)) {\n      data.queryBuilder.pipeline = this.options.pipeline;\n    }\n\n    if (!Utils.isNullOrUndefined(this.options.maximumAge)) {\n      data.queryBuilder.maximumAge = this.options.maximumAge;\n    }\n\n    if (!Utils.isNullOrUndefined(this.options.resultsPerPage)) {\n      data.queryBuilder.numberOfResults = this.options.resultsPerPage;\n    }\n\n    if (!Utils.isNullOrUndefined(this.options.excerptLength)) {\n      data.queryBuilder.excerptLength = this.options.excerptLength;\n    }\n\n    if (Utils.isNonEmptyString(this.options.expression)) {\n      data.queryBuilder.advancedExpression.add(this.options.expression);\n    }\n\n    if (Utils.isNonEmptyString(this.options.filterField)) {\n      data.queryBuilder.filterField = this.options.filterField;\n    }\n\n    if (Utils.isNonEmptyString(this.options.timezone)) {\n      data.queryBuilder.timezone = this.options.timezone;\n    }\n\n    data.queryBuilder.enableCollaborativeRating = this.options.enableCollaborativeRating;\n\n    data.queryBuilder.enableDuplicateFiltering = this.options.enableDuplicateFiltering;\n  }\n\n  private handleQuerySuccess(data: IQuerySuccessEventArgs) {\n    let noResults = data.results.results.length == 0;\n    this.toggleSectionState('coveo-no-results', noResults);\n    let resultsHeader = $$(this.element).find('.coveo-results-header');\n    if (resultsHeader) {\n      $$(resultsHeader).removeClass('coveo-query-error');\n    }\n  }\n\n  private handleQueryError(data: IQueryErrorEventArgs) {\n    this.toggleSectionState('coveo-no-results');\n    let resultsHeader = $$(this.element).find('.coveo-results-header');\n    if (resultsHeader) {\n      $$(resultsHeader).addClass('coveo-query-error');\n    }\n  }\n\n  private toggleSectionState(cssClass: string, toggle = true) {\n    let facetSection = $$(this.element).find('.coveo-facet-column');\n    let resultsSection = $$(this.element).find('.coveo-results-column');\n    let resultsHeader = $$(this.element).find('.coveo-results-header');\n    let facetSearchs = $$(this.element).findAll('.coveo-facet-search-results');\n\n    if (facetSection) {\n      $$(facetSection).toggleClass(cssClass, toggle && !this.queryStateModel.atLeastOneFacetIsActive());\n    }\n    if (resultsSection) {\n      $$(resultsSection).toggleClass(cssClass, toggle && !this.queryStateModel.atLeastOneFacetIsActive());\n    }\n    if (resultsHeader) {\n      $$(resultsHeader).toggleClass(cssClass, toggle && !this.queryStateModel.atLeastOneFacetIsActive());\n    }\n    if (facetSearchs && facetSearchs.length > 0) {\n      _.each(facetSearchs, (facetSearch) => {\n        $$(facetSearch).toggleClass(cssClass, toggle && !this.queryStateModel.atLeastOneFacetIsActive());\n      });\n    }\n  }\n}\n\n\nexport interface IStandaloneSearchInterfaceOptions extends ISearchInterfaceOptions {\n  redirectIfEmpty?: boolean;\n}\n\nexport class StandaloneSearchInterface extends SearchInterface {\n  static ID = 'StandaloneSearchInterface';\n\n  public static options: IStandaloneSearchInterfaceOptions = {\n    redirectIfEmpty: ComponentOptions.buildBooleanOption({ defaultValue: true })\n  };\n\n  constructor(public element: HTMLElement, public options?: IStandaloneSearchInterfaceOptions, public analyticsOptions?, _window = window) {\n    super(element, ComponentOptions.initComponentOptions(element, StandaloneSearchInterface, options), analyticsOptions, _window);\n    $$(this.root).on(QueryEvents.newQuery, (e: Event, args: INewQueryEventArgs) => this.handleRedirect(e, args));\n  }\n\n  public handleRedirect(e: Event, data: INewQueryEventArgs) {\n\n    let dataToSendOnBeforeRedirect: IBeforeRedirectEventArgs = {\n      searchPageUri: this.options.searchPageUri,\n      cancel: false\n    };\n\n    $$(this.root).trigger(StandaloneSearchInterfaceEvents.beforeRedirect, dataToSendOnBeforeRedirect);\n\n    if (dataToSendOnBeforeRedirect.cancel) {\n      return;\n    }\n\n    data.cancel = true;\n\n    if (!this.searchboxIsEmpty() || this.options.redirectIfEmpty) {\n      this.redirectToSearchPage(dataToSendOnBeforeRedirect.searchPageUri);\n    }\n  }\n\n  public redirectToSearchPage(searchPage: string) {\n    let stateValues = this.queryStateModel.getAttributes();\n    let uaCausedBy = this.usageAnalytics.getCurrentEventCause();\n    if (uaCausedBy != null) {\n      stateValues['firstQueryCause'] = uaCausedBy;\n    }\n    let uaMeta = this.usageAnalytics.getCurrentEventMeta();\n    if (uaMeta != null) {\n      stateValues['firstQueryMeta'] = uaMeta;\n    }\n    window.location.href = searchPage + '#' + HashUtils.encodeValues(stateValues);\n  }\n\n  private searchboxIsEmpty(): boolean {\n    return Utils.isEmptyString(this.queryStateModel.get(QueryStateModel.attributesEnum.q));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/SearchInterface/SearchInterface.ts\n **/","import {IFieldDescription} from '../../rest/FieldDescription';\nimport {Assert} from '../../misc/Assert';\nimport {Logger} from '../../misc/Logger';\nimport {Template} from '../Templates/Template';\nimport {$$} from '../../utils/Dom';\nimport {TemplateCache} from '../Templates/TemplateCache';\nimport {TemplateList} from '../Templates/TemplateList';\nimport {UnderscoreTemplate} from '../Templates/UnderscoreTemplate';\nimport {HtmlTemplate} from '../Templates/HtmlTemplate';\nimport {Utils} from '../../utils/Utils';\nimport {l} from '../../strings/Strings';\n\nexport interface IComponentOptionsLoadOption<T> {\n  (element: HTMLElement, name: string, option: IComponentOptionsOption<T>): T;\n}\n\nexport interface IComponentOptionsPostProcessing<T> {\n  (value: T, options: any): T;\n}\n\nexport interface IComponentOptionsOption<T> extends IComponentOptions<T> {\n  type?: ComponentOptionsType;\n  load?: IComponentOptionsLoadOption<T>;\n}\n\nexport interface IComponentOptions<T> {\n  defaultValue?: T;\n  defaultFunction?: (element: HTMLElement) => T;\n  required?: boolean;\n  postProcessing?: IComponentOptionsPostProcessing<T>;\n  attrName?: string;\n  alias?: string;\n  section?: string;\n  depend?: string;\n  priority?: number;\n  deprecated?: string;\n  validator?: (value: T) => boolean;\n}\n\nexport interface IComponentOptionsNumberOption extends IComponentOptionsOption<number>, IComponentOptionsNumberOptionArgs {\n}\nexport interface IComponentOptionsNumberOptionArgs extends IComponentOptions<number> {\n  min?: number;\n  max?: number;\n  float?: boolean;\n}\n\nexport interface IComponentOptionsListOption extends IComponentOptionsOption<string[]>, IComponentOptionsListOptionArgs {\n}\nexport interface IComponentOptionsListOptionArgs extends IComponentOptions<string[]> {\n  separator?: RegExp;\n  values?: any;\n}\n\nexport interface IComponentOptionsCustomListOptionArgs<T> extends IComponentOptions<T> {\n  separator?: RegExp;\n  values?: any;\n}\n\nexport interface IComponentOptionsChildHtmlElementOption extends IComponentOptionsOption<HTMLElement>, IComponentOptionsChildHtmlElementOptionArgs {\n}\nexport interface IComponentOptionsChildHtmlElementOptionArgs extends IComponentOptions<HTMLElement> {\n  selectorAttr?: string;\n  childSelector?: string;\n}\n\nexport interface IComponentOptionsTemplateOption extends IComponentOptionsOption<Template>, IComponentOptionsTemplateOptionArgs {\n}\nexport interface IComponentOptionsTemplateOptionArgs extends IComponentOptions<Template> {\n  selectorAttr?: string;\n  childSelector?: string;\n  idAttr?: string;\n}\n\nexport interface IComponentOptionsFieldOption extends IComponentOptionsOption<string>, IComponentOptionsFieldOptionArgs {\n}\nexport interface IComponentOptionsFieldOptionArgs extends IComponentOptions<string> {\n  groupByField?: boolean;\n  includeInResults?: boolean;\n  sortByField?: boolean;\n  splitGroupByField?: boolean;\n  match?: (field: IFieldDescription) => boolean;\n}\n\nexport interface IComponentOptionsFieldsOption extends IComponentOptionsOption<string[]>, IComponentOptionsFieldsOptionArgs {\n}\nexport interface IComponentOptionsFieldsOptionArgs extends IComponentOptions<string[]> {\n  groupByField?: boolean;\n  includeInResults?: boolean;\n  sortByField?: boolean;\n  splitGroupByField?: boolean;\n  match?: (field: IFieldDescription) => boolean;\n}\n\nexport interface IComponentOptionsObjectOption extends IComponentOptionsOption<{ [key: string]: any }>, IComponentOptionsObjectOptionArgs {\n}\nexport interface IComponentOptionsObjectOptionArgs extends IComponentOptions<{ [key: string]: any }> {\n  subOptions: { [key: string]: IComponentOptionsOption<any> };\n}\n\nexport enum ComponentOptionsType {\n  BOOLEAN,\n  NUMBER,\n  STRING,\n  LOCALIZED_STRING,\n  LIST,\n  SELECTOR,\n  CHILD_HTML_ELEMENT,\n  TEMPLATE,\n  FIELD,\n  FIELDS,\n  ICON,\n  OBJECT,\n  QUERY,\n  HELPER,\n  LONG_STRING,\n  JSON,\n  JAVASCRIPT,\n  NONE\n}\n\nconst camelCaseToHyphenRegex = /([A-Z])|\\W+(\\w)/g;\nconst fieldsSeperator = /\\s*,\\s*/;\nconst localizer = /([a-zA-Z\\-]+)\\s*:\\s*(([^,]|,\\s*(?!([a-zA-Z\\-]+)\\s*:))+)/g;\n\nexport class ComponentOptions {\n  static buildBooleanOption(optionArgs?: IComponentOptions<boolean>): boolean {\n    return ComponentOptions.buildOption<boolean>(ComponentOptionsType.BOOLEAN, ComponentOptions.loadBooleanOption, optionArgs);\n  }\n\n  static buildNumberOption(optionArgs?: IComponentOptionsNumberOptionArgs): number {\n    return ComponentOptions.buildOption<number>(ComponentOptionsType.NUMBER, ComponentOptions.loadNumberOption, optionArgs);\n  }\n\n  static buildStringOption(optionArgs?: IComponentOptions<string>): string {\n    return ComponentOptions.buildOption<string>(ComponentOptionsType.STRING, ComponentOptions.loadStringOption, optionArgs);\n  }\n\n  static buildIconOption(optionArgs?: IComponentOptions<string>): string {\n    return ComponentOptions.buildOption<string>(ComponentOptionsType.ICON, ComponentOptions.loadStringOption, optionArgs);\n  }\n\n  static buildHelperOption(optionArgs?: IComponentOptions<string>): string {\n    return ComponentOptions.buildOption<string>(ComponentOptionsType.HELPER, ComponentOptions.loadStringOption, optionArgs);\n  }\n\n  static buildJsonOption(optionArgs?: IComponentOptions<string>): string {\n    return ComponentOptions.buildOption<string>(ComponentOptionsType.JSON, ComponentOptions.loadStringOption, optionArgs);\n  }\n\n  static buildLocalizedStringOption(optionArgs?: IComponentOptions<string>): string {\n    return ComponentOptions.buildOption<string>(ComponentOptionsType.LOCALIZED_STRING, ComponentOptions.loadLocalizedStringOption, optionArgs);\n  }\n\n  static buildFieldOption(optionArgs?: IComponentOptionsFieldOptionArgs): string {\n    return ComponentOptions.buildOption<string>(ComponentOptionsType.FIELD, ComponentOptions.loadFieldOption, optionArgs);\n  }\n\n  static buildFieldsOption(optionArgs?: IComponentOptionsFieldsOptionArgs): string[] {\n    return ComponentOptions.buildOption<string[]>(ComponentOptionsType.FIELDS, ComponentOptions.loadFieldsOption, optionArgs);\n  }\n\n  static buildListOption(optionArgs?: IComponentOptionsListOptionArgs): string[] {\n    return ComponentOptions.buildOption<string[]>(ComponentOptionsType.LIST, ComponentOptions.loadListOption, optionArgs);\n  }\n\n  static buildSelectorOption(optionArgs?: IComponentOptions<HTMLElement>): HTMLElement {\n    return ComponentOptions.buildOption<HTMLElement>(ComponentOptionsType.SELECTOR, ComponentOptions.loadSelectorOption, optionArgs);\n  }\n\n  static buildChildHtmlElementOption(optionArgs?: IComponentOptionsChildHtmlElementOptionArgs): HTMLElement {\n    return ComponentOptions.buildOption<HTMLElement>(ComponentOptionsType.CHILD_HTML_ELEMENT, ComponentOptions.loadChildHtmlElementOption, optionArgs);\n  }\n\n  static buildTemplateOption(optionArgs?: IComponentOptionsTemplateOptionArgs): Template {\n    return ComponentOptions.buildOption<Template>(ComponentOptionsType.TEMPLATE, ComponentOptions.loadTemplateOption, optionArgs);\n  }\n\n  static buildCustomOption<T>(converter: (value: string) => T, optionArgs?: IComponentOptions<T>): T {\n    let loadOption: IComponentOptionsLoadOption<T> = (element: HTMLElement, name: string, option: IComponentOptionsOption<T>) => {\n      let stringvalue = ComponentOptions.loadStringOption(element, name, option);\n      if (!Utils.isNullOrEmptyString(stringvalue)) {\n        return converter(stringvalue);\n      }\n    };\n    return ComponentOptions.buildOption<T>(ComponentOptionsType.STRING, loadOption, optionArgs);\n  }\n\n  static buildCustomListOption<T>(converter: (value: string[]) => T, optionArgs?: IComponentOptionsCustomListOptionArgs<T>): T {\n    let loadOption: IComponentOptionsLoadOption<T> = (element: HTMLElement, name: string, option: any) => {\n      let stringvalue = ComponentOptions.loadListOption(element, name, option);\n      return converter(stringvalue);\n    };\n    return ComponentOptions.buildOption<any>(ComponentOptionsType.LIST, loadOption, optionArgs);\n  }\n\n  static buildObjectOption(optionArgs?: IComponentOptionsObjectOptionArgs): any {\n    let loadOption: IComponentOptionsLoadOption<{\n      [key: string]: any\n    }> = (element: HTMLElement, name: string, option: IComponentOptionsOption<any>) => {\n      let keys = _.keys(optionArgs.subOptions);\n      let scopedOptions: {\n        [name: string]: IComponentOptionsOption<any>\n      } = {};\n      let scopedValues: {\n        [name: string]: any\n      } = {};\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        let scopedkey = ComponentOptions.mergeCamelCase(name, key);\n        scopedOptions[scopedkey] = optionArgs.subOptions[key];\n      }\n      ComponentOptions.initOptions(element, scopedOptions, scopedValues);\n      let resultValues: {\n        [name: string]: any\n      } = {};\n      let resultFound = false;\n      for (let i = 0; i < keys.length; i++) {\n        let key = keys[i];\n        let scopedkey = ComponentOptions.mergeCamelCase(name, key);\n        if (scopedValues[scopedkey] != null) {\n          resultValues[key] = scopedValues[scopedkey];\n          resultFound = true;\n        }\n      }\n      return resultFound ? resultValues : null;\n    };\n    return ComponentOptions.buildOption<{\n      [key: string]: any\n    }>(ComponentOptionsType.OBJECT, loadOption, optionArgs);\n  }\n\n  static buildOption<T>(type: ComponentOptionsType, load: IComponentOptionsLoadOption<T>, optionArg: IComponentOptions<T> = {}): T {\n    let option: IComponentOptionsOption<T> = <any>optionArg;\n    option.type = type;\n    option.load = load;\n    return <any>option;\n  }\n\n  static attrNameFromName(name: string, optionArgs?: IComponentOptions<any>) {\n    if (optionArgs && optionArgs.attrName) {\n      return optionArgs.attrName;\n    }\n    if (name) {\n      return 'data-' + ComponentOptions.camelCaseToHyphen(name);\n    }\n    return name;\n  }\n\n  static camelCaseToHyphen(name: string) {\n    return name.replace(camelCaseToHyphenRegex, '-$1$2').toLowerCase();\n  }\n\n  static mergeCamelCase(parent: string, name: string) {\n    return parent + name.substr(0, 1).toUpperCase() + name.substr(1);\n  }\n\n  static initComponentOptions(element: HTMLElement, component: any, values?: any) {\n    return ComponentOptions.initOptions(element, component.options, values, component.ID);\n  }\n\n  static initOptions(element: HTMLElement, options: {\n    [name: string]: IComponentOptionsOption<any>\n  }, values?: any, componentID?: any) {\n    let logger = new Logger(this);\n    if (values == null) {\n      values = {};\n    }\n    let names: string[] = _.keys(options);\n    for (let i = 0; i < names.length; i++) {\n      let name = names[i];\n      let optionDefinition = options[name];\n      let value: any;\n      let loadFromAttribute = optionDefinition.load;\n\n      if (loadFromAttribute != null) {\n        value = loadFromAttribute(element, name, optionDefinition);\n        if (value && optionDefinition.deprecated) {\n          logger.warn(componentID + '.' + name + ' : ' + optionDefinition.deprecated);\n        }\n      }\n\n      if (Utils.isNullOrUndefined(value) && values[name] != undefined) {\n        value = values[name];\n      }\n\n      if (value == null && values[name] == undefined) {\n        if (optionDefinition.defaultValue != null) {\n          if (optionDefinition.type == ComponentOptionsType.LIST) {\n            value = _.extend([], optionDefinition.defaultValue);\n          } else if (optionDefinition.type == ComponentOptionsType.OBJECT) {\n            value = _.extend({}, optionDefinition.defaultValue);\n          } else {\n            value = optionDefinition.defaultValue;\n          }\n        } else if (optionDefinition.defaultFunction != null) {\n          value = optionDefinition.defaultFunction(element);\n        }\n      }\n      if (value != null) {\n        if (optionDefinition.validator) {\n          let isValid = optionDefinition.validator(value);\n          if (!isValid) {\n            logger.warn(`${componentID} .${name} has invalid value :  ${value}`);\n            if (optionDefinition.required) {\n              logger.error(`${componentID} .${name} is required and has an invalid value : ${value}. ***THIS COMPONENT WILL NOT WORK***`);\n            }\n            delete values[name];\n            continue;\n          }\n        }\n        if (optionDefinition.type == ComponentOptionsType.OBJECT && values[name] != null) {\n          values[name] = _.extend(values[name], value);\n        } else if (optionDefinition.type == ComponentOptionsType.LOCALIZED_STRING) {\n          values[name] = l(value);\n        } else {\n          values[name] = value;\n        }\n      }\n    }\n    for (let i = 0; i < names.length; i++) {\n      let name = names[i];\n      let optionDefinition = options[name];\n      if (optionDefinition.postProcessing) {\n        values[name] = optionDefinition.postProcessing(values[name], values);\n      }\n    }\n    return values;\n  }\n\n  static loadStringOption(element: HTMLElement, name: string, option: IComponentOptions<any>): string {\n    return element.getAttribute(ComponentOptions.attrNameFromName(name, option)) || ComponentOptions.getAttributeFromAlias(element, option);\n  }\n\n  static loadFieldOption(element: HTMLElement, name: string, option: IComponentOptionsOption<any>): string {\n    let field = ComponentOptions.loadStringOption(element, name, option);\n    Assert.check(!Utils.isNonEmptyString(field) || Utils.isCoveoField(field), field + ' is not a valid field');\n    return field;\n  }\n\n  static loadFieldsOption(element: HTMLElement, name: string, option: IComponentOptionsOption<any>): string[] {\n    let fieldsAttr = ComponentOptions.loadStringOption(element, name, option);\n    if (fieldsAttr == null) {\n      return null;\n    }\n    let fields = fieldsAttr.split(fieldsSeperator);\n    _.each(fields, (field: string) => {\n      Assert.check(Utils.isCoveoField(field), field + ' is not a valid field');\n    });\n    return fields;\n  }\n\n  static loadLocalizedStringOption(element: HTMLElement, name: string, option: IComponentOptionsOption<any>): string {\n    let attributeValue = ComponentOptions.loadStringOption(element, name, option);\n    let locale: string = String['locale'] || String['defaultLocale'];\n    if (locale != null && attributeValue != null) {\n      let localeParts = locale.toLowerCase().split('-');\n      let locales = _.map(localeParts, (part, i) => localeParts.slice(0, i + 1).join('-'));\n      let localizers = attributeValue.match(localizer);\n      if (localizers != null) {\n        for (let i = 0; i < localizers.length; i++) {\n          let groups = localizer.exec(localizers[i]);\n          if (groups != null) {\n            let lang = groups[1].toLowerCase();\n            if (_.contains(locales, lang)) {\n              return groups[2].replace(/^\\s+|\\s+$/g, '');\n            }\n          }\n        }\n      }\n      return attributeValue != null ? attributeValue.toLocaleString() : null;\n    }\n    return attributeValue;\n  }\n\n  static loadNumberOption(element: HTMLElement, name: string, option: IComponentOptionsNumberOption): number {\n    let attributeValue = ComponentOptions.loadStringOption(element, name, option);\n    if (attributeValue == null) {\n      return null;\n    }\n    let numberValue = option.float === true ? Utils.parseFloatIfNotUndefined(attributeValue) : Utils.parseIntIfNotUndefined(attributeValue);\n    if (option.min != null && option.min > numberValue) {\n      numberValue = option.min;\n    }\n    if (option.max != null && option.max < numberValue) {\n      numberValue = option.max;\n    }\n    return numberValue;\n  }\n\n  static loadBooleanOption(element: HTMLElement, name: string, option: IComponentOptionsOption<any>): boolean {\n    return Utils.parseBooleanIfNotUndefined(ComponentOptions.loadStringOption(element, name, option));\n  }\n\n  static loadListOption(element: HTMLElement, name: string, option: IComponentOptionsListOption): string[] {\n    let separator = option.separator || /\\s*,\\s*/;\n    let attributeValue = ComponentOptions.loadStringOption(element, name, option);\n    return Utils.isNonEmptyString(attributeValue) ? attributeValue.split(separator) : null;\n  }\n\n  static loadEnumOption(element: HTMLElement, name: string, option: IComponentOptionsOption<any>, _enum: any): number {\n    let enumAsString = ComponentOptions.loadStringOption(element, name, option);\n    return enumAsString != null ? _enum[enumAsString] : null;\n  }\n\n  static loadSelectorOption(element: HTMLElement, name: string, option: IComponentOptionsOption<any>, doc: Document = document): HTMLElement {\n    let attributeValue = ComponentOptions.loadStringOption(element, name, option);\n    return Utils.isNonEmptyString(attributeValue) ? <HTMLElement>doc.querySelector(attributeValue) : null;\n  }\n\n  static loadChildHtmlElementOption(element: HTMLElement, name: string, option: IComponentOptionsChildHtmlElementOption, doc: Document = document): HTMLElement {\n    let htmlElement: HTMLElement;\n    // Attribute: selector\n    let selectorAttr = option.selectorAttr || ComponentOptions.attrNameFromName(name, option) + '-selector';\n    let selector = element.getAttribute(selectorAttr) || ComponentOptions.getAttributeFromAlias(element, option);\n    if (selector != null) {\n      htmlElement = <HTMLElement>doc.body.querySelector(selector);\n    }\n    // Child\n    if (htmlElement == null) {\n      let childSelector = option.childSelector;\n      if (childSelector == null) {\n        childSelector = '.' + name;\n      }\n      htmlElement = ComponentOptions.loadChildHtmlElementFromSelector(element, childSelector);\n    }\n    return htmlElement;\n  }\n\n  static loadChildHtmlElementFromSelector(element: HTMLElement, selector: string): HTMLElement {\n    Assert.isNonEmptyString(selector);\n    if ($$(element).is(selector)) {\n      return element;\n    }\n    return <HTMLElement>$$(element).find(selector);\n  }\n\n  static loadChildrenHtmlElementFromSelector(element: HTMLElement, selector: string): HTMLElement[] {\n    Assert.isNonEmptyString(selector);\n    return $$(element).findAll(selector);\n  }\n\n  static loadTemplateOption(element: HTMLElement, name: string, option: IComponentOptionsTemplateOption, doc: Document = document): Template {\n\n    let template: Template;\n\n    // Attribute: template selector\n    let selectorAttr = option.selectorAttr || ComponentOptions.attrNameFromName(name, option) + '-selector';\n    let selector = element.getAttribute(selectorAttr) || ComponentOptions.getAttributeFromAlias(element, option);\n    if (selector != null) {\n      let templateElement = <HTMLElement>doc.querySelector(selector);\n      if (templateElement != null) {\n        template = ComponentOptions.createResultTemplateFromElement(templateElement);\n      }\n    }\n    // Attribute: template id\n    if (template == null) {\n      let idAttr = option.idAttr || ComponentOptions.attrNameFromName(name, option) + '-id';\n      let id = element.getAttribute(idAttr) || ComponentOptions.getAttributeFromAlias(element, option);\n      if (id != null) {\n        template = ComponentOptions.loadResultTemplateFromId(id);\n      }\n    }\n    // Child\n    if (template == null) {\n      let childSelector = option.childSelector;\n      if (childSelector == null) {\n        childSelector = '.' + name.replace(/([A-Z])/g, '-$1').toLowerCase();\n      }\n      template = ComponentOptions.loadChildrenResultTemplateFromSelector(element, childSelector);\n    }\n    return template;\n  }\n\n  static loadResultTemplateFromId(templateId: string): Template {\n    return Utils.isNonEmptyString(templateId) ? TemplateCache.getTemplate(templateId) : null;\n  }\n\n  static loadChildrenResultTemplateFromSelector(element: HTMLElement, selector: string): Template {\n    let foundElements = ComponentOptions.loadChildrenHtmlElementFromSelector(element, selector);\n    if (foundElements.length > 0) {\n      return new TemplateList(_.compact(_.map(foundElements, (element) => ComponentOptions.createResultTemplateFromElement(element))));\n    }\n    return null;\n  }\n\n  static findParentScrolling(element: HTMLElement, doc: Document = document): HTMLElement {\n    while (<Node>element != doc && element != null) {\n      if (ComponentOptions.isElementScrollable(element)) {\n        if (element.tagName.toLowerCase() !== 'body') {\n          return element;\n        }\n        return <any>window;\n      }\n      element = element.parentElement;\n    }\n    return <any>window;\n  }\n\n  static isElementScrollable(element: HTMLElement) {\n    return $$(element).css('overflow-y') == 'scroll' || element.style.overflowY == 'scroll';\n  }\n\n  static getAttributeFromAlias(element: HTMLElement, option: IComponentOptions<any>) {\n    if (option.alias) {\n      return element.getAttribute(ComponentOptions.attrNameFromName(option.alias));\n    }\n  }\n\n  static createResultTemplateFromElement(element: HTMLElement): Template {\n    Assert.exists(element);\n    let type = element.getAttribute('type');\n    let mimeTypes = 'You must specify the type of template. Valid values are :' +\n      ' ' + UnderscoreTemplate.mimeTypes.toString() +\n      ' ' + HtmlTemplate.mimeTypes.toString();\n    Assert.check(Utils.isNonEmptyString(type), mimeTypes);\n\n    if (_.indexOf(UnderscoreTemplate.mimeTypes, type) != -1) {\n      return UnderscoreTemplate.create(element);\n    } else if (_.indexOf(HtmlTemplate.mimeTypes, type) != -1) {\n      return new HtmlTemplate(element);\n    } else {\n      Assert.fail('Cannot guess template type from attribute: ' + type + '. Valid values are ' + mimeTypes);\n      return undefined;\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Base/ComponentOptions.ts\n **/","import {Template} from './Template';\nimport {Assert} from '../../misc/Assert';\nimport {UnderscoreTemplate} from './UnderscoreTemplate';\nimport {HtmlTemplate} from './HtmlTemplate';\n\n/**\n * Holds a reference to all template available in the framework\n */\nexport class TemplateCache {\n  private static templates: { [templateName: string]: Template; } = {};\n  private static templateNames: string[] = [];\n  private static defaultTemplates: { [templateName: string]: Template; } = {};\n\n\n  public static registerTemplate(name: string, template: Template, publicTemplate?: boolean, defaultTemplate?: boolean);\n  public static registerTemplate(name: string, template: (data: {}) => string, publicTemplate?: boolean, defaultTemplate?: boolean);\n  /**\n   * Register a new template in the framework, which will be available to render any results.\n   * @param name\n   * @param template\n   * @param publicTemplate\n   * @param defaultTemplate\n   */\n  public static registerTemplate(name: string, template: any, publicTemplate: boolean = true, defaultTemplate: boolean = false) {\n    Assert.isNonEmptyString(name);\n    Assert.exists(template);\n    if (!(template instanceof Template)) {\n      template = new Template(template);\n    }\n    if (template.name == null) {\n      template.name = name;\n    }\n    TemplateCache.templates[name] = template;\n    if (publicTemplate && !_.contains(TemplateCache.templateNames, name)) {\n      TemplateCache.templateNames.push(name);\n    }\n    if (defaultTemplate) {\n      TemplateCache.defaultTemplates[name] = template;\n    }\n  }\n\n  /**\n   * Return a template by its name/ID.\n   * @param name\n   * @returns {Template}\n   */\n  public static getTemplate(name: string): Template {\n    Assert.exists(TemplateCache.templates[name]);\n    return TemplateCache.templates[name];\n  }\n\n  /**\n   * Get all templates currently registered in the framework.\n   * @returns {{}}\n   */\n  public static getTemplates(): { [templateName: string]: Template; } {\n    return TemplateCache.templates;\n  }\n\n  /**\n   * Get all templates name currently registered in the framework.\n   * @returns {string[]}\n   */\n  public static getTemplateNames(): string[] {\n    return TemplateCache.templateNames;\n  }\n\n  /**\n   * Get all the \"default\" templates in the framework.\n   * @returns {string[]}\n   */\n  public static getDefaultTemplates(): string[] {\n    return _.keys(TemplateCache.defaultTemplates);\n  }\n\n  public static getDefaultTemplate(name: string): Template {\n    Assert.exists(TemplateCache.defaultTemplates[name]);\n    return TemplateCache.defaultTemplates[name];\n  }\n\n  static scanAndRegisterTemplates() {\n    // Here we take care not to scan for templates for which the base library\n    // is not available. Case in point: someone was using the JS UI on a page\n    // that was also using Handlebars, but our code was initialized before\n    // the Handlebars library (loaded through AMD).\n    if (UnderscoreTemplate.isLibraryAvailable()) {\n      TemplateCache.scanAndRegisterUnderscoreTemplates();\n    }\n    TemplateCache.scanAndRegisterHtmlTemplates();\n  }\n\n  private static scanAndRegisterUnderscoreTemplates() {\n    _.each(UnderscoreTemplate.mimeTypes, (type) => {\n      let scriptList = document.querySelectorAll(`script[id][type='${type}']`);\n      let i = scriptList.length;\n      let arr: HTMLElement[] = new Array(i);\n      while (i--) {\n        arr[i] = <HTMLElement>scriptList.item(i);\n      }\n      _.each(arr, (elem: HTMLElement) => {\n        let template = new UnderscoreTemplate(elem);\n        TemplateCache.registerTemplate(elem.getAttribute('id'), template);\n      });\n    });\n  }\n\n  private static scanAndRegisterHtmlTemplates() {\n    _.each(HtmlTemplate.mimeTypes, (type) => {\n      let scriptList = document.querySelectorAll(`script[id][type='${type}']`);\n      let i = scriptList.length;\n      let arr: HTMLElement[] = new Array(i);\n      while (i--) {\n        arr[i] = <HTMLElement>scriptList.item(i);\n      }\n\n      _.each(arr, (elem: HTMLElement) => {\n        let template = new HtmlTemplate(elem);\n        TemplateCache.registerTemplate(elem.getAttribute('id'), template);\n      });\n    });\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  TemplateCache.scanAndRegisterTemplates();\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Templates/TemplateCache.ts\n **/","import {Logger} from '../../misc/Logger';\nimport {StringUtils} from '../../utils/StringUtils';\nimport {Initialization} from '../Base/Initialization';\nimport {htmlToDom} from '../../utils/Dom';\nimport {BaseComponent} from '../Base/BaseComponent';\n\nexport class Template {\n  static getFieldFromString(text: string) {\n    var fields: string[] = _.map(StringUtils.match(text, /(?:(?!\\b@)@([a-z0-9]+(?:\\.[a-z0-9]+)*\\b))|\\braw.([a-z0-9]+)|\\braw\\['([^']+)'\\]|\\braw\\['([^']+)'\\]/gi), (field) => {\n      return field[1] || field[2] || field[3] || field[4] || null;\n    });\n\n    _.each(Initialization.getListOfRegisteredComponents(), (componentId: string) => {\n      var componentFields = (<any>Initialization.getRegisteredComponent(componentId)).fields;\n      if (componentFields != null && text.indexOf(BaseComponent.computeCssClassNameForType(componentId)) != -1) {\n        fields = fields.concat(componentFields);\n      }\n    });\n\n    return fields;\n  }\n\n  private logger: Logger = new Logger(this);\n\n  constructor(public dataToString?: (object?: any) => string, public condition?: Function) {\n  }\n\n  instantiateToString(object?: any, checkCondition = true): string {\n    if (this.dataToString && (!checkCondition || this.condition == null || this.condition(object))) {\n      return this.dataToString(object);\n    }\n    return null;\n  }\n\n  instantiateToElement(object?: any, checkCondition = true): HTMLElement {\n    var html = this.instantiateToString(object, checkCondition);\n    if (html != null) {\n      var element = <HTMLElement>htmlToDom(html);\n      this.logger.trace('Instantiated result template', object, element);\n      element['template'] = this;\n      return element;\n    }\n    return null;\n  }\n\n  toHtmlElement(): HTMLElement {\n    return null;\n  }\n\n  getFields(): string[] {\n    return [];\n  }\n\n  getType() {\n    return 'Template';\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Templates/Template.ts\n **/","import {Template} from './Template';\nimport {ITemplateHelperFunction} from './TemplateHelpers';\nimport {Assert} from '../../misc/Assert';\nimport {ComponentOptions, IComponentOptionsFieldsOption} from '../Base/ComponentOptions';\nimport {Utils} from '../../utils/Utils';\nimport {$$} from '../../utils/Dom';\n\n_.templateSettings = {\n  evaluate: /(?:<%|{{)([\\s\\S]+?)(?:%>|}})/g,\n  interpolate: /(?:<%|{{)=([\\s\\S]+?)(?:%>|}})/g,\n  escape: /(?:<%|{{)-([\\s\\S]+?)(?:%>|}})/g\n};\n\nexport class UnderscoreTemplate extends Template {\n  private template: (data: any) => string;\n  public static templateHelpers: { [templateName: string]: ITemplateHelperFunction; } = {};\n  private fields: string[];\n\n  public static mimeTypes = [\n    'text/underscore',\n    'text/underscore-template',\n    'text/x-underscore',\n    'text/x-underscore-template'\n  ];\n\n  constructor(public element: HTMLElement) {\n    super();\n\n    Assert.exists(element);\n    var templateString = element.innerHTML;\n    this.template = _.template(templateString);\n\n    var condition = $$(element).getAttribute('data-condition');\n    if (condition != null) {\n      this.condition = new Function('obj', 'with(obj||{}){return ' + condition + '}');\n    }\n\n    this.dataToString = (object) => {\n      var extended = _.extend({}, object, UnderscoreTemplate.templateHelpers);\n      return this.template(extended);\n    };\n\n    this.fields = Template.getFieldFromString(templateString + ' ' + condition);\n\n    var additionalFields = ComponentOptions.loadFieldsOption(element, 'fields', <IComponentOptionsFieldsOption>{ includeInResults: true });\n    if (additionalFields != null) {\n      // remove the @\n      this.fields = this.fields.concat(_.map(additionalFields, (field) => field.substr(1)));\n    }\n  }\n\n  toHtmlElement(): HTMLElement {\n    var script = $$('script');\n    script.setAttribute('type', _.first(UnderscoreTemplate.mimeTypes));\n    script.setAttribute('data-condition', $(this.element).data('condition'));\n    script.text(this.element.innerHTML);\n    return script.el;\n  }\n\n  getType() {\n    return 'UnderscoreTemplate';\n  }\n\n  static create(element: HTMLElement): UnderscoreTemplate {\n    Assert.exists(element);\n    return new UnderscoreTemplate(element);\n  }\n\n  static fromString(template: string, condition?: string): UnderscoreTemplate {\n    var script = document.createElement('script');\n    script.text = template;\n    if (condition != null) {\n      $$(script).setAttribute('data-condition', condition);\n    }\n    $$(script).setAttribute('type', UnderscoreTemplate.mimeTypes[0]);\n    return new UnderscoreTemplate(script);\n  }\n\n  getFields() {\n    return this.fields;\n  }\n\n  static registerTemplateHelper(helperName: string, helper: ITemplateHelperFunction) {\n    UnderscoreTemplate.templateHelpers[helperName] = helper;\n  }\n\n  static isLibraryAvailable(): boolean {\n    return Utils.exists(window['_']);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Templates/UnderscoreTemplate.ts\n **/","import {Template} from './Template';\nimport {ComponentOptions, IComponentOptionsFieldsOption} from '../Base/ComponentOptions';\nimport {Assert} from '../../misc/Assert';\nimport {$$} from '../../utils/Dom';\n\n\nexport class HtmlTemplate extends Template {\n\n  public static mimeTypes = [\n    'text/html'\n  ];\n\n  private fields: string[];\n\n  constructor(public element: HTMLElement) {\n    super(() => {\n      return element.innerHTML;\n    });\n\n    var condition = $$(element).getAttribute('data-condition');\n    if (condition != null) {\n      // Allows to add quotes in data-condition on the templates\n      condition = condition.toString().replace(/&quot;/g, '\"');\n      this.condition = new Function('obj', 'with(obj||{}){return ' + condition + '}');\n    }\n\n    this.fields = Template.getFieldFromString(element.innerHTML + ' ' + condition);\n\n    var additionalFields = ComponentOptions.loadFieldsOption(element, 'fields', <IComponentOptionsFieldsOption>{ includeInResults: true });\n    if (additionalFields != null) {\n      // remove the @\n      this.fields = this.fields.concat(_.map(additionalFields, (field) => field.substr(1)));\n    }\n  }\n\n  toHtmlElement(): HTMLElement {\n    var script = $$('script');\n    script.setAttribute('type', _.first(HtmlTemplate.mimeTypes));\n    script.setAttribute('data-condition', $$(this.element).getAttribute('data-condition'));\n    script.text(this.element.innerHTML);\n    return script.el;\n  }\n\n  getType() {\n    return 'HtmlTemplate';\n  }\n\n  getFields(): string[] {\n    return this.fields;\n  }\n\n  static create(element: HTMLElement): HtmlTemplate {\n    Assert.exists(element);\n    return new HtmlTemplate(element);\n  }\n\n  static fromString(template: string, condition?: string): HtmlTemplate {\n    var script = document.createElement('script');\n    script.text = template;\n    if (condition != null) {\n      $$(script).setAttribute('data-condition', condition);\n    }\n    $$(script).setAttribute('type', HtmlTemplate.mimeTypes[0]);\n    return new HtmlTemplate(script);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Templates/HtmlTemplate.ts\n **/","import {Template} from './Template';\nimport {DefaultResultTemplate} from './DefaultResultTemplate';\n\nexport class TemplateList extends Template {\n\n  constructor(private templates: Template[]) {\n    super();\n  }\n\n  instantiateToString(object?: any, checkCondition?: boolean): string {\n    for (var i = 0; i < this.templates.length; i++) {\n      var result = this.templates[i].instantiateToString(object, checkCondition);\n      if (result != null) {\n        return result;\n      }\n    }\n    return new DefaultResultTemplate().instantiateToString(object);\n  }\n\n  instantiateToElement(object?: any, checkCondition = true): HTMLElement {\n    for (var i = 0; i < this.templates.length; i++) {\n      var element = this.templates[i].instantiateToElement(object, checkCondition);\n      if (element != null) {\n        return element;\n      }\n    }\n\n    return new DefaultResultTemplate().instantiateToElement(object);\n  }\n\n  getFields() {\n    return _.reduce(this.templates, (fields: string[], template: Template) => fields.concat(template.getFields()), []);\n  }\n\n  getType() {\n    return 'TemplateList';\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Templates/TemplateList.ts\n **/","import {Template} from './Template';\nimport {UnderscoreTemplate} from './UnderscoreTemplate';\nimport {TemplateCache} from './TemplateCache';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {Assert} from '../../misc/Assert';\n\n\nexport class DefaultResultTemplate extends Template {\n\n  constructor() {\n    super();\n  }\n\n  instantiateToString(queryResult?: IQueryResult): string {\n    Assert.exists(queryResult);\n    queryResult = _.extend({}, queryResult, UnderscoreTemplate.templateHelpers);\n\n    var defaultTemplates = _.map(TemplateCache.getDefaultTemplates(), (name) => TemplateCache.getTemplate(name));\n\n    // We want to put templates with conditions first\n    defaultTemplates.sort((a, b) => {\n      if (a.condition == null && b.condition != null) {\n        return 1;\n      } else if (a.condition != null && b.condition == null) {\n        return -1;\n      }\n      return 0;\n    });\n\n    for (var i = 0; i < defaultTemplates.length; i++) {\n      var result = defaultTemplates[i].instantiateToString(queryResult);\n      if (result != null) {\n        return result;\n      }\n    }\n\n    return _.template('<div>' +\n      '<div class=\"coveo-title\"><a class=\"CoveoResultLink\"><%= title?Coveo.TemplateHelpers.getHelper(\"highlight\").call(title, titleHighlights):clickUri %></a></div>' +\n      '<% if(excerpt){ %><div class=\"coveo-excerpt\"><%= Coveo.TemplateHelpers.getHelper(\"highlight\").call(excerpt, excerptHighlights) %></div><% } %>' +\n      '<table class=\"CoveoFieldTable\"><%= Coveo.TemplateHelpers.getHelper(\"highlight\").call() %></table>' +\n      '</div>')(queryResult);\n  }\n\n  instantiateToElement(queryResult?: IQueryResult): HTMLElement {\n    var div = document.createElement('div');\n    div.innerHTML = this.instantiateToString(queryResult);\n    return div;\n  }\n\n\n  getFields() {\n    var defaultTemplates = _.map(TemplateCache.getDefaultTemplates(), (name) => TemplateCache.getTemplate(name));\n    return _.flatten(_.map(defaultTemplates, (template: Template) => template.getFields()));\n  }\n\n  getType() {\n    return 'DefaultResultTemplate';\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Templates/DefaultResultTemplate.ts\n **/","import {IAnalyticsClient} from './AnalyticsClient';\nimport {IAnalyticsActionCause} from './AnalyticsActionListMeta';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {ITopQueries} from '../../rest/TopQueries';\nimport {Promise} from 'es6-promise';\n\nexport class NoopAnalyticsClient implements IAnalyticsClient {\n  public isContextual: boolean = false;\n\n  isActivated() {\n    return false;\n  }\n\n  getCurrentEventCause(): string {\n    return null;\n  }\n\n  getCurrentEventMeta(): { [key: string]: any } {\n    return {};\n  }\n\n  logSearchEvent<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta) {\n  }\n\n  logSearchAsYouType<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta) {\n  }\n\n  logClickEvent<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta, result?: IQueryResult, element?: HTMLElement) {\n  }\n\n  logCustomEvent<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta, element?: HTMLElement) {\n  }\n\n  getTopQueries(params: ITopQueries): Promise<string[]> {\n    return new Promise((resolve, reject) => {\n      resolve([]);\n    });\n  }\n\n  getCurrentVisitIdPromise(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      resolve(null);\n    });\n  }\n\n  getCurrentVisitId(): string {\n    return null;\n  }\n\n  sendAllPendingEvents() {\n  }\n\n  cancelAllPendingEvents() {\n  }\n\n  warnAboutSearchEvent() {\n  }\n\n  getPendingSearchEvent() {\n    return null;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Analytics/NoopAnalyticsClient.ts\n **/","/// <reference path=\"../../../node_modules/modal-box/bin/ModalBox.d.ts\" />\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {LocalStorageUtils} from '../../utils/LocalStorageUtils';\nimport {IFieldDescription} from '../../rest/FieldDescription';\nimport {IBuildingQueryEventArgs, IQuerySuccessEventArgs, QueryEvents} from '../../events/QueryEvents';\nimport {ResultListEvents, IDisplayedNewResultEventArgs} from '../../events/ResultListEvents';\nimport {DebugEvents} from '../../events/DebugEvents';\nimport {IQueryResults} from '../../rest/QueryResults';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {$$, Dom} from '../../utils/Dom';\nimport {StringUtils} from '../../utils/StringUtils';\nimport {SearchEndpoint} from '../../rest/SearchEndpoint';\nimport {Template} from '../Templates/Template';\nimport {Promise} from 'es6-promise';\nimport {RootComponent} from '../Base/RootComponent';\nimport {QueryController} from '../../controllers/QueryController';\nimport {BaseComponent} from '../Base/BaseComponent';\nimport {ModalBox} from '../../ExternalModulesShim';\nimport Globalize = require('globalize');\nimport {KEYBOARD} from '../../utils/KeyboardUtils';\nimport {InitializationEvents} from '../../events/InitializationEvents';\n\nexport interface IDebugOptions {\n  enableDebug?: boolean;\n}\n\nexport class Debug extends RootComponent {\n  static ID = 'Debug';\n  static options: IDebugOptions = {\n    enableDebug: ComponentOptions.buildBooleanOption({ defaultValue: false })\n  };\n\n  static customOrder = ['error', 'queryDuration', 'result', 'fields', 'rankingInfo', 'template', 'query', 'results', 'state'];\n\n  static durationKeys = ['indexDuration', 'proxyDuration', 'clientDuration', 'duration'];\n  static maxDepth = 10;\n\n  public localStorageDebug: LocalStorageUtils<string[]>;\n  public collapsedSections: string[];\n\n  private debug = false;\n  private highlightRecommendation = false;\n  private fields: { [field: string]: IFieldDescription };\n\n  private stackDebug: any;\n  private boundEscapeKey: (evt: Event, arg?: any) => void;\n\n  constructor(public element: HTMLElement, public queryController: QueryController, public options?: IDebugOptions, public modalBox = ModalBox) {\n    super(element, Debug.ID);\n    this.options = ComponentOptions.initComponentOptions(element, Debug, options);\n    $$(this.element).on(QueryEvents.buildingQuery, (e, args: IBuildingQueryEventArgs) => {\n      args.queryBuilder.enableDebug = this.debug || args.queryBuilder.enableDebug;\n    });\n    $$(this.element).on(ResultListEvents.newResultDisplayed, (e, args: IDisplayedNewResultEventArgs) => this.handleNewResultDisplayed(args));\n    $$(this.element).on(DebugEvents.showDebugPanel, (e, args) => {\n      this.handleShowDebugPanel(args);\n    });\n    $$(this.element).on(InitializationEvents.nuke, () => {\n      this.unbindEscapeEvent();\n    });\n\n    this.localStorageDebug = new LocalStorageUtils<string[]>('DebugPanel');\n    this.collapsedSections = this.localStorageDebug.load() || [];\n  }\n\n  private showDebugPanel(builder: (results?: IQueryResults) => { body: HTMLElement; json: any; }) {\n    let build = builder();\n\n    let modalbox = this.modalBox.open(build.body, {\n      title: '',\n      className: 'coveo-debug',\n      titleClose: true,\n      overlayClose: true,\n      validation: () => {\n        this.unbindEscapeEvent();\n        return true;\n      }\n    });\n    this.bindEscapeEvent();\n\n    let title = $$(modalbox.wrapper).find('.coveo-title');\n    let search = this.buildSearchBox(build.body);\n    let downloadLink = $$('a', { download: 'debug.json', 'href': this.downloadHref(build.json) }, 'Download');\n    let bodyBuilder = (results?: IQueryResults) => {\n      let build = builder();\n      downloadLink.el.setAttribute('href', this.downloadHref(build.json));\n      return build.body;\n    };\n    title.appendChild(this.buildEnabledHighlightRecommendation());\n    title.appendChild(this.buildEnableDebugCheckbox(build.body, search, bodyBuilder));\n    title.appendChild(search);\n    title.appendChild(downloadLink.el);\n  }\n\n  private handleEscapeEvent(e: KeyboardEvent) {\n    if (e.keyCode == KEYBOARD.ESCAPE) {\n      if (this.modalBox) {\n        this.modalBox.close();\n      }\n    }\n  }\n\n  private bindEscapeEvent() {\n    this.boundEscapeKey = this.handleEscapeEvent.bind(this);\n    $$(document.body).on('keyup', this.boundEscapeKey);\n  }\n\n  private unbindEscapeEvent() {\n    if (this.boundEscapeKey) {\n      $$(document.body).off('keyup', this.boundEscapeKey);\n    }\n    this.boundEscapeKey = null;\n  }\n\n  private handleShowDebugPanel(info: any) {\n    if (this.stackDebug == null) {\n      setTimeout(() => {\n        let stackDebug = this.stackDebug;\n        this.showDebugPanel(() => this.buildStackPanel(stackDebug));\n        this.stackDebug = null;\n      });\n      this.stackDebug = {};\n    }\n    _.extend(this.stackDebug, info);\n  }\n\n  private handleNewResultDisplayed(args: IDisplayedNewResultEventArgs) {\n    if (args.item != null) {\n      if (this.highlightRecommendation && args.result.isRecommendation) {\n        $$(args.item).addClass('coveo-is-recommendation');\n      }\n      $$(args.item).on('dblclick', (e: MouseEvent) => {\n        this.handleResultDoubleClick(e, args);\n      });\n    }\n  }\n\n  private handleResultDoubleClick(e: MouseEvent, args: IDisplayedNewResultEventArgs) {\n    if (e.altKey) {\n      let index = args.result.index;\n      let findResult = (results?: IQueryResults) => results != null ? _.find(results.results, (result: IQueryResult) => result.index == index) : args.result;\n      let template = args.item['template'];\n\n      let debugPanel = {\n        result: findResult,\n        fields: (results?: IQueryResults) => this.buildFieldsSection(findResult(results)),\n        rankingInfo: (results?: IQueryResults) => this.buildRankingInfoSection(findResult(results)),\n        template: this.templateToJson(template),\n      };\n      this.handleShowDebugPanel(debugPanel);\n    }\n  }\n\n  private downloadHref(info: any) {\n    return 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(info));\n  }\n\n  public buildStackPanel(stackDebug: any, results?: IQueryResults): { body: HTMLElement; json: any; } {\n    let body = Dom.createElement('div', { className: 'coveo-debug' });\n\n    let keys: any[][] = _.pairs(_.keys(stackDebug));\n\n    keys = keys.sort((a: any[], b: any[]) => {\n      let indexA = _.indexOf(Debug.customOrder, a[1]);\n      let indexB = _.indexOf(Debug.customOrder, b[1]);\n      if (indexA != -1 && indexB != -1) {\n        return indexA - indexB;\n      }\n      if (indexA != -1) {\n        return -1;\n      }\n      if (indexB != -1) {\n        return 1;\n      }\n      return a[0] - b[0];\n    });\n\n    let json = {};\n\n    _.forEach(keys, (key: string[]) => {\n      let section = this.buildSection(key[1]);\n      let build = this.buildStackPanelSection(stackDebug[key[1]], results);\n      section.container.appendChild(build.section);\n      if (build.json != null) {\n        json[key[1]] = build.json;\n      }\n      body.appendChild(section.dom);\n    });\n\n    return { body: body, json: json };\n  }\n\n  private buildStackPanelSection(value: any, results: IQueryResults): { section: HTMLElement; json?: any; } {\n    if (value instanceof HTMLElement) {\n      return { section: value };\n    } else if (_.isFunction(value)) {\n      return this.buildStackPanelSection(value(results), results);\n    }\n    let json = this.toJson(value);\n    return { section: this.buildProperty(json), json: json };\n  }\n\n  private buildSearchBox(body: HTMLElement) {\n    let dom = Dom.createElement('div', { className: 'coveo-debug-search' }, '<input type=\\'text\\'/>');\n    dom.onclick = (e) => {\n      e.stopPropagation();\n    };\n    let lastSearch = '';\n    let input = dom.querySelector('input') as HTMLInputElement;\n    input.setAttribute('placeholder', 'Search in debug');\n    input.onkeyup = (e) => {\n      if (e == null || e.keyCode == 13) {\n        let value = input.value.toLowerCase();\n        if (lastSearch != value) {\n          lastSearch = value;\n          this.search(value, body);\n        }\n      }\n    };\n    input.onchange = () => {\n      let value = input.value.toLowerCase();\n      if (lastSearch != value) {\n        lastSearch = value;\n        this.search(value, body);\n      }\n    };\n    return dom;\n  }\n\n  private search(value: string, body: HTMLElement) {\n    if (_.isEmpty(value)) {\n      $$(body).findAll('.coveo-search-match, .coveo-search-submatch').forEach((el) => {\n        $$(el).removeClass('coveo-search-match, coveo-search-submatch');\n      });\n      $$(body).removeClass('coveo-searching');\n    } else {\n      $$(body).addClass('coveo-searching-loading');\n      setTimeout(() => {\n        let rootProperties = $$(body).findAll('.coveo-section .coveo-section-container > .coveo-property');\n        _.each(rootProperties, (element: HTMLElement) => {\n          this.findInProperty(element, value);\n        });\n        $$(body).addClass('coveo-searching');\n        $$(body).removeClass('coveo-searching-loading');\n      });\n    }\n  }\n\n  private findInProperty(element: HTMLElement, value: string): boolean {\n    let jElement = $$(element);\n    let match = element['label'].indexOf(value) != -1;\n    if (match) {\n      this.highlightSearch(element['labelDom'], value);\n    } else {\n      this.removeHighlightSearch(element['labelDom']);\n    }\n    if (jElement.hasClass('coveo-property-object')) {\n      jElement.toggleClass('coveo-search-match', match);\n      let children = element['buildKeys']();\n      let submatch = false;\n      _.each(children, (child: HTMLElement) => {\n        submatch = this.findInProperty(child, value) || submatch;\n      });\n      jElement.toggleClass('coveo-search-submatch', submatch);\n      return match || submatch;\n    } else {\n      if (element['value'].indexOf(value) != -1) {\n        this.highlightSearch(element['valueDom'], value);\n        match = true;\n      } else {\n        this.removeHighlightSearch(element['valueDom']);\n      }\n      jElement.toggleClass('coveo-search-match', match);\n    }\n    return match;\n  }\n\n  private buildEnableDebugCheckbox(body: HTMLElement, search: HTMLElement, bodyBuilder: (results: IQueryResults) => HTMLElement) {\n    let dom = Dom.createElement('div', { className: 'coveo-enabled-debug' }, '<label>Enable query debug <input type=\\'checkbox\\'/></label>');\n    $$(dom).on('click', (e) => {\n      e.stopPropagation();\n    });\n    let checkbox = $$(dom).find('input');\n    if (this.debug) {\n      checkbox.setAttribute('checked', 'checked');\n    }\n    checkbox.onchange = () => {\n      this.debug = !this.debug;\n      $$(this.element).one(QueryEvents.querySuccess + ' ' + QueryEvents.queryError, (e: Event, args: IQuerySuccessEventArgs) => {\n        $$(body).removeClass('coveo-debug-loading');\n        $$(body).empty();\n        $$(bodyBuilder(args.results)).children().forEach((child) => {\n          body.appendChild(child);\n        });\n      });\n      this.queryController.executeQuery({ closeModalBox: false });\n      $$(body).addClass('coveo-debug-loading');\n      let input = search.querySelector('input') as HTMLInputElement;\n      input.value = '';\n      input.onkeyup(null);\n    };\n    return dom;\n  }\n\n  private buildEnabledHighlightRecommendation() {\n    let dom = Dom.createElement('div', { className: 'coveo-enabled-highlight-recommendation' }, '<label>Highlight recommendation <input type=\\'checkbox\\'/></label>');\n    dom.onclick = (e) => {\n      e.stopPropagation();\n    };\n    let checkbox = $$(dom).find('input');\n    if (this.highlightRecommendation) {\n      checkbox.setAttribute('checked', 'checked');\n    }\n    checkbox.onchange = () => {\n      this.highlightRecommendation = !this.highlightRecommendation;\n      this.queryController.executeQuery({ closeModalBox: false });\n    };\n    return dom;\n  }\n\n  private buildSection(id: string) {\n    let dom = Dom.createElement('div', { className: 'coveo-section coveo-' + id + '-section' });\n    let header = Dom.createElement('div', { className: 'coveo-section-header' });\n    $$(header).text(id);\n    dom.appendChild(header);\n\n    let container = Dom.createElement('div', { className: 'coveo-section-container' });\n    dom.appendChild(container);\n\n    if (_.contains(this.collapsedSections, id)) {\n      $$(dom).addClass('coveo-debug-collapsed');\n    }\n\n    header.onclick = () => {\n      $$(dom).toggleClass('coveo-debug-collapsed');\n      if (_.contains(this.collapsedSections, id)) {\n        this.collapsedSections = _.without(this.collapsedSections, id);\n      } else {\n        this.collapsedSections.push(id);\n      }\n      this.localStorageDebug.save(this.collapsedSections);\n    };\n\n    return {\n      dom: dom,\n      header: header,\n      container: container\n    };\n  }\n\n  private fetchFields(): Promise<{ [field: string]: IFieldDescription }> {\n    if (this.fields == null) {\n      return this.queryController.getEndpoint().listFields().then((fields: IFieldDescription[]) => {\n        this.fields = {};\n        fields.forEach((field) => {\n          this.fields[field.name] = field;\n        });\n        return this.fields;\n      });\n    } else {\n      return Promise.resolve(this.fields);\n    }\n  }\n\n  private buildFieldsSection(result: IQueryResult) {\n    return this.fetchFields()\n      .then((fieldDescriptions: { [field: string]: IFieldDescription }) => {\n        let fields = {};\n        _.each(result.raw, (value: any, key: string) => {\n          let fieldDescription = fieldDescriptions['@' + key];\n          if (fieldDescription == null && key.match(/^sys/)) {\n            fieldDescription = fieldDescriptions['@' + key.substr(3)];\n          }\n          if (fieldDescription == null) {\n            fields['@' + key] = value;\n          } else if (fieldDescription.fieldType == 'Date') {\n            fields['@' + key] = new Date(value);\n          } else if (fieldDescription.splitGroupByField) {\n            fields['@' + key] = value.split(/\\s*;\\s*/);\n          } else {\n            fields['@' + key] = value;\n          }\n        });\n        return fields;\n      });\n  }\n\n  private buildRankingInfoSection(result: IQueryResult) {\n    return result.rankingInfo && this.parseRankingInfo(result.rankingInfo);\n  }\n\n  public parseRankingInfo(value: string) {\n    let rankingInfo = {};\n\n    let infos = value.match(/^(?:Document weights:\\n((?:.)*?)\\n)?\\n(?:Terms weights:\\n((?:.|\\n)*))?Total weight: ([0-9]+)$/);\n\n    if (infos[1] != null) {\n      rankingInfo['Document weights'] = this.parseWeights(infos[1]);\n    }\n    if (infos[2] != null) {\n      let terms = StringUtils.match(infos[2], /((?:[^:]+: [0-9]+, [0-9]+; )+)\\n((?:\\w+: [0-9]+; )+)/g);\n      rankingInfo['Terms weights'] = _.object(_.map(terms, (term) => {\n        let words = _.object(_.map(StringUtils.match(term[1], /([^:]+): ([0-9]+), ([0-9]+); /g), (word) => {\n          return [\n            word[1],\n            {\n              Correlation: Number(word[2]),\n              'TF-IDF': Number(word[3]),\n            }\n          ];\n        }));\n        let weights = this.parseWeights(term[2]);\n        return [\n          _.keys(words).join(', '),\n          {\n            terms: words,\n            Weights: weights\n          }];\n      }));\n    }\n    rankingInfo['Total weight'] = Number(infos[3]);\n\n    return rankingInfo;\n  }\n\n  private parseWeights(value: string) {\n    let listOfWeight = value.match(/(\\w+(?:\\s\\w+)*): ([-0-9]+)/g);\n    return _.object(_.map(listOfWeight, (weight) => {\n      let weightGroup = weight.match(/^(\\w+(?:\\s\\w+)*): ([-0-9]+)$/);\n      return [weightGroup[1], Number(weightGroup[2])];\n    }));\n  }\n\n  private buildProperty(value: any, label?: string): HTMLElement {\n    if (value instanceof Promise) {\n      return this.buildPromise(value, label);\n    } else if ((_.isArray(value) || (_.isObject(value))) && !_.isString(value)) {\n      return this.buildObjectProperty(value, label);\n    } else {\n      return this.buildBasicProperty(value, label);\n    }\n  }\n\n  private buildPromise(promise: Promise<any>, label?: string): HTMLElement {\n    let dom: HTMLElement = document.createElement('div');\n    dom.className = 'coveo-property coveo-property-promise';\n    promise.then((value) => {\n      let resolvedDom = this.buildProperty(value, label);\n      $$(dom).replaceWith(resolvedDom);\n    });\n    return dom;\n  }\n\n  private buildObjectProperty(object: any, label?: string): HTMLElement {\n    let dom: HTMLElement = document.createElement('div');\n    dom.className = 'coveo-property coveo-property-object';\n\n    let valueContainer: HTMLElement = document.createElement('div');\n    valueContainer.className = 'coveo-property-value';\n\n    let keys = _.keys(object);\n    if (!_.isArray(object)) {\n      keys.sort();\n    }\n\n    let children: HTMLElement[];\n    let buildKeys = () => {\n      if (children == null) {\n        children = [];\n        _.each(keys, (key: string) => {\n          let property = this.buildProperty(object[key], key);\n          if (property != null) {\n            children.push(property);\n            valueContainer.appendChild(property);\n          }\n        });\n      }\n      return children;\n    };\n    dom['buildKeys'] = buildKeys;\n\n    if (label != null) {\n      let labelDom = document.createElement('div');\n      labelDom.className = 'coveo-property-label';\n      labelDom.appendChild(document.createTextNode(label));\n      dom['labelDom'] = labelDom;\n\n      dom.appendChild(labelDom);\n      if (keys.length != 0) {\n        dom.className += ' coveo-collapsible';\n        labelDom.onclick = () => {\n          buildKeys();\n          let className = dom.className.split(/\\s+/);\n          if (_.contains(className, 'coveo-expanded')) {\n            className = _.without(className, 'coveo-expanded');\n          } else {\n            className.push('coveo-expanded');\n          }\n          dom.className = className.join(' ');\n        };\n      }\n    } else {\n      buildKeys();\n    }\n    if (keys.length == 0) {\n      let className = _.without(dom.className.split(/\\s+/), 'coveo-property-object');\n      className.push('coveo-property-basic');\n      dom.className = className.join(' ');\n      if (_.isArray(object)) {\n        valueContainer.innerHTML = '[]';\n      } else {\n        valueContainer.innerHTML = '{}';\n      }\n      dom['value'] = '';\n    }\n    dom['label'] = label != null ? label.toLowerCase() : '';\n    dom.appendChild(valueContainer);\n    return dom;\n  }\n\n  private buildBasicProperty(value: string, label?: string): HTMLElement {\n    let dom: HTMLElement = document.createElement('div');\n    dom.className = 'coveo-property coveo-property-basic';\n\n    if (label != null) {\n      let labelDom = document.createElement('div');\n      labelDom.className = 'coveo-property-label';\n      labelDom.appendChild(document.createTextNode(label));\n      dom.appendChild(labelDom);\n      dom['labelDom'] = labelDom;\n    }\n    let stringValue = value != null ? value.toString() : String(value);\n    if (value != null && value['ref'] != null) {\n      value = value['ref'];\n    }\n    let valueDom = document.createElement('div');\n    valueDom.appendChild(document.createTextNode(stringValue));\n    valueDom.ondblclick = () => {\n      this.selectElementText(valueDom);\n    };\n    dom.appendChild(valueDom);\n    dom['valueDom'] = valueDom;\n\n    let className: string[] = ['coveo-property-value'];\n    if (_.isString(value)) {\n      className.push('coveo-property-value-string');\n    }\n    if (_.isNull(value) || _.isUndefined(value)) {\n      className.push('coveo-property-value-null');\n    }\n    if (_.isNumber(value)) {\n      className.push('coveo-property-value-number');\n    }\n    if (_.isBoolean(value)) {\n      className.push('coveo-property-value-boolean');\n    }\n    if (_.isDate(value)) {\n      className.push('coveo-property-value-date');\n    }\n    if (_.isObject(value)) {\n      className.push('coveo-property-value-object');\n    }\n    if (_.isArray(value)) {\n      className.push('coveo-property-value-array');\n    }\n    valueDom.className = className.join(' ');\n\n    dom['label'] = label != null ? label.toLowerCase() : '';\n    dom['value'] = stringValue.toLowerCase();\n    return dom;\n  }\n\n  private toJson(value: any, depth = 0, done: any[] = []) {\n    if (value instanceof BaseComponent || value instanceof SearchEndpoint) {\n      return this.componentToJson(value, depth);\n    }\n    if (value instanceof HTMLElement) {\n      return this.htmlToJson(value);\n    }\n    if (value instanceof Template) {\n      return this.templateToJson(value);\n    }\n    if (value instanceof Promise) {\n      return value.then((value) => {\n        return this.toJson(value, depth, done);\n      });\n    }\n    if (value == window) {\n      return this.toJsonRef(value);\n    }\n    if (_.isArray(value) || _.isObject(value)) {\n      if (_.contains(done, value)) {\n        return this.toJsonRef(value, '< RECURSIVE >');\n      } else if (depth >= Debug.maxDepth) {\n        return this.toJsonRef(value);\n      } else if (_.isArray(value)) {\n        return _.map(value, (subValue, key) => this.toJson(subValue, depth + 1, done.concat([value])));\n      } else if (_.isDate(value)) {\n        return this.toJsonRef(value, Globalize.format(value, 'F'));\n      } else {\n        let result = {};\n        _.each(value, (subValue, key) => {\n          result[key] = this.toJson(subValue, depth + 1, done.concat([value]));\n        });\n        result['ref'];\n        return result;\n      }\n    }\n    return value;\n  }\n\n  private toJsonRef(value: any, stringValue?: String): String {\n    stringValue = new String(stringValue || value);\n    stringValue['ref'] = value;\n    return stringValue;\n  }\n\n  private componentToJson(value: BaseComponent, depth = 0): any {\n    let options = _.keys(value['options']);\n    if (options.length > 0) {\n      return this.toJson(value['options'], depth);\n    } else {\n      return this.toJsonRef(value['options'], new String('No options'));\n    }\n  }\n\n  private htmlToJson(value: HTMLElement): any {\n    if (value == null) {\n      return undefined;\n    }\n    return {\n      tagName: value.tagName,\n      id: value.id,\n      classList: value.className.split(/\\s+/)\n    };\n  }\n\n  private templateToJson(template: Template) {\n    if (template == null) {\n      return null;\n    }\n    let element: HTMLElement = template['element'];\n    let templateObject: any = {\n      type: template.getType(),\n    };\n    if (element != null) {\n      templateObject.id = element.id;\n      templateObject.condition = element.attributes['data-condition'];\n      templateObject.content = element.innerText;\n    }\n    return templateObject;\n  }\n\n  private selectElementText(el: HTMLElement) {\n    if (window.getSelection && document.createRange) {\n      let selection = window.getSelection();\n      let range = document.createRange();\n      range.selectNodeContents(el);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    } else if ('createTextRange' in document.body) {\n      let textRange = document.body['createTextRange']();\n      textRange.moveToElementText(el);\n      textRange.select();\n    }\n  }\n\n  private highlightSearch(element: HTMLElement, search: string) {\n    if (element != null) {\n      let match = element.innerText.split(new RegExp('(?=' + StringUtils.regexEncode(search) + ')', 'gi'));\n      element.innerHTML = '';\n      match.forEach((value) => {\n        let regex = new RegExp('(' + StringUtils.regexEncode(search) + ')', 'i');\n        let group = value.match(regex);\n        let span: HTMLSpanElement;\n        if (group != null) {\n          span = Dom.createElement('span', { className: 'coveo-debug-highlight' });\n          span.appendChild(document.createTextNode(group[1]));\n          element.appendChild(span);\n          span = Dom.createElement('span');\n          span.appendChild(document.createTextNode(value.substr(group[1].length)));\n          element.appendChild(span);\n        } else {\n          span = Dom.createElement('span');\n          span.appendChild(document.createTextNode(value));\n          element.appendChild(span);\n        }\n      });\n    }\n  }\n\n  private removeHighlightSearch(element: HTMLElement) {\n    if (element != null) {\n      element.innerHTML = element.innerText;\n    }\n  }\n\n  public debugInfo() {\n    return null;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Debug/Debug.ts\n **/","!function(){\"use strict\";function t(e,o){function i(t,e){return function(){return t.apply(e,arguments)}}var r;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=e,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!t.notNeeded(e)){for(var a=[\"onMouse\",\"onClick\",\"onTouchStart\",\"onTouchMove\",\"onTouchEnd\",\"onTouchCancel\"],c=this,s=0,u=a.length;u>s;s++)c[a[s]]=i(c[a[s]],c);n&&(e.addEventListener(\"mouseover\",this.onMouse,!0),e.addEventListener(\"mousedown\",this.onMouse,!0),e.addEventListener(\"mouseup\",this.onMouse,!0)),e.addEventListener(\"click\",this.onClick,!0),e.addEventListener(\"touchstart\",this.onTouchStart,!1),e.addEventListener(\"touchmove\",this.onTouchMove,!1),e.addEventListener(\"touchend\",this.onTouchEnd,!1),e.addEventListener(\"touchcancel\",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,o){var i=Node.prototype.removeEventListener;\"click\"===t?i.call(e,t,n.hijacked||n,o):i.call(e,t,n,o)},e.addEventListener=function(t,n,o){var i=Node.prototype.addEventListener;\"click\"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),o):i.call(e,t,n,o)}),\"function\"==typeof e.onclick&&(r=e.onclick,e.addEventListener(\"click\",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf(\"Windows Phone\")>=0,n=navigator.userAgent.indexOf(\"Android\")>0&&!e,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,i=o&&/OS 4_\\d(_\\d)?/.test(navigator.userAgent),r=o&&/OS [6-7]_\\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf(\"BB10\")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case\"button\":case\"select\":case\"textarea\":if(t.disabled)return!0;break;case\"input\":if(o&&\"file\"===t.type||t.disabled)return!0;break;case\"label\":case\"iframe\":case\"video\":return!0}return/\\bneedsclick\\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case\"textarea\":return!0;case\"select\":return!n;case\"input\":switch(t.type){case\"button\":case\"checkbox\":case\"file\":case\"image\":case\"radio\":case\"submit\":return!1}return!t.disabled&&!t.readOnly;default:return/\\bneedsfocus\\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,o;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),o=e.changedTouches[0],n=document.createEvent(\"MouseEvents\"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&\"select\"===t.tagName.toLowerCase()?\"mousedown\":\"click\"},t.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf(\"date\")&&\"time\"!==t.type&&\"month\"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],o){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector(\"button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea\")},t.prototype.onTouchEnd=function(t){var e,a,c,s,u,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(u=t.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=l.tagName.toLowerCase(),\"label\"===c){if(e=this.findControl(l)){if(this.focus(l),n)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-a>100||o&&window.top!==window&&\"input\"===c?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),o&&\"select\"===c||(this.targetElement=null,t.preventDefault()),!1);return o&&!i&&(s=l.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):\"submit\"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener(\"mouseover\",this.onMouse,!0),t.removeEventListener(\"mousedown\",this.onMouse,!0),t.removeEventListener(\"mouseup\",this.onMouse,!0)),t.removeEventListener(\"click\",this.onClick,!0),t.removeEventListener(\"touchstart\",this.onTouchStart,!1),t.removeEventListener(\"touchmove\",this.onTouchMove,!1),t.removeEventListener(\"touchend\",this.onTouchEnd,!1),t.removeEventListener(\"touchcancel\",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,o,i,r;if(\"undefined\"==typeof window.ontouchstart)return!0;if(o=+(/Chrome\\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector(\"meta[name=viewport]\")){if(-1!==e.content.indexOf(\"user-scalable=no\"))return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(i=navigator.userAgent.match(/Version\\/([0-9]*)\\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector(\"meta[name=viewport]\")))){if(-1!==e.content.indexOf(\"user-scalable=no\"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return\"none\"===t.style.msTouchAction||\"manipulation\"===t.style.touchAction?!0:(r=+(/Firefox\\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(e=document.querySelector(\"meta[name=viewport]\"),e&&(-1!==e.content.indexOf(\"user-scalable=no\")||document.documentElement.scrollWidth<=window.outerWidth))?!0:\"none\"===t.style.touchAction||\"manipulation\"===t.style.touchAction?!0:!1)},t.attach=function(e,n){return new t(e,n)},\"function\"==typeof define&&\"object\"==typeof define.amd&&define.amd?define(function(){return t}):\"undefined\"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/fastclick.min.js\n ** module id = 106\n ** module chunks = 0 1\n **/","(function(e){var t=function(){\"use strict\";var e=\"s\",n=2011,r=function(e){var t=-e.getTimezoneOffset();return t!==null?t:0},i=function(e,t,n){var r=new Date;return e!==undefined&&r.setFullYear(e),r.setDate(n),r.setMonth(t),r},s=function(e){return r(i(e,0,2))},o=function(e){return r(i(e,5,2))},u=function(e){var t=e.getMonth()>7?o(e.getFullYear()):s(e.getFullYear()),n=r(e);return t-n!==0},a=function(){var t=s(n),r=o(n),i=t-r;return i<0?t+\",1\":i>0?r+\",1,\"+e:t+\",0\"},f=function(){var e=a();return new t.TimeZone(t.olson.timezones[e])},l=function(e){var t=new Date(2010,6,15,1,0,0,0),n={\"America/Denver\":new Date(2011,2,13,3,0,0,0),\"America/Mazatlan\":new Date(2011,3,3,3,0,0,0),\"America/Chicago\":new Date(2011,2,13,3,0,0,0),\"America/Mexico_City\":new Date(2011,3,3,3,0,0,0),\"America/Asuncion\":new Date(2012,9,7,3,0,0,0),\"America/Santiago\":new Date(2012,9,3,3,0,0,0),\"America/Campo_Grande\":new Date(2012,9,21,5,0,0,0),\"America/Montevideo\":new Date(2011,9,2,3,0,0,0),\"America/Sao_Paulo\":new Date(2011,9,16,5,0,0,0),\"America/Los_Angeles\":new Date(2011,2,13,8,0,0,0),\"America/Santa_Isabel\":new Date(2011,3,5,8,0,0,0),\"America/Havana\":new Date(2012,2,10,2,0,0,0),\"America/New_York\":new Date(2012,2,10,7,0,0,0),\"Asia/Beirut\":new Date(2011,2,27,1,0,0,0),\"Europe/Helsinki\":new Date(2011,2,27,4,0,0,0),\"Europe/Istanbul\":new Date(2011,2,28,5,0,0,0),\"Asia/Damascus\":new Date(2011,3,1,2,0,0,0),\"Asia/Jerusalem\":new Date(2011,3,1,6,0,0,0),\"Asia/Gaza\":new Date(2009,2,28,0,30,0,0),\"Africa/Cairo\":new Date(2009,3,25,0,30,0,0),\"Pacific/Auckland\":new Date(2011,8,26,7,0,0,0),\"Pacific/Fiji\":new Date(2010,10,29,23,0,0,0),\"America/Halifax\":new Date(2011,2,13,6,0,0,0),\"America/Goose_Bay\":new Date(2011,2,13,2,1,0,0),\"America/Miquelon\":new Date(2011,2,13,5,0,0,0),\"America/Godthab\":new Date(2011,2,27,1,0,0,0),\"Europe/Moscow\":t,\"Asia/Yekaterinburg\":t,\"Asia/Omsk\":t,\"Asia/Krasnoyarsk\":t,\"Asia/Irkutsk\":t,\"Asia/Yakutsk\":t,\"Asia/Vladivostok\":t,\"Asia/Kamchatka\":t,\"Europe/Minsk\":t,\"Pacific/Apia\":new Date(2010,10,1,1,0,0,0),\"Australia/Perth\":new Date(2008,10,1,1,0,0,0)};return n[e]};return{determine:f,date_is_dst:u,dst_start_for:l}}();t.TimeZone=function(e){\"use strict\";var n={\"America/Denver\":[\"America/Denver\",\"America/Mazatlan\"],\"America/Chicago\":[\"America/Chicago\",\"America/Mexico_City\"],\"America/Santiago\":[\"America/Santiago\",\"America/Asuncion\",\"America/Campo_Grande\"],\"America/Montevideo\":[\"America/Montevideo\",\"America/Sao_Paulo\"],\"Asia/Beirut\":[\"Asia/Beirut\",\"Europe/Helsinki\",\"Europe/Istanbul\",\"Asia/Damascus\",\"Asia/Jerusalem\",\"Asia/Gaza\"],\"Pacific/Auckland\":[\"Pacific/Auckland\",\"Pacific/Fiji\"],\"America/Los_Angeles\":[\"America/Los_Angeles\",\"America/Santa_Isabel\"],\"America/New_York\":[\"America/Havana\",\"America/New_York\"],\"America/Halifax\":[\"America/Goose_Bay\",\"America/Halifax\"],\"America/Godthab\":[\"America/Miquelon\",\"America/Godthab\"],\"Asia/Dubai\":[\"Europe/Moscow\"],\"Asia/Dhaka\":[\"Asia/Yekaterinburg\"],\"Asia/Jakarta\":[\"Asia/Omsk\"],\"Asia/Shanghai\":[\"Asia/Krasnoyarsk\",\"Australia/Perth\"],\"Asia/Tokyo\":[\"Asia/Irkutsk\"],\"Australia/Brisbane\":[\"Asia/Yakutsk\"],\"Pacific/Noumea\":[\"Asia/Vladivostok\"],\"Pacific/Tarawa\":[\"Asia/Kamchatka\"],\"Pacific/Tongatapu\":[\"Pacific/Apia\"],\"Africa/Johannesburg\":[\"Asia/Gaza\",\"Africa/Cairo\"],\"Asia/Baghdad\":[\"Europe/Minsk\"]},r=e,i=function(){var e=n[r],i=e.length,s=0,o=e[0];for(;s<i;s+=1){o=e[s];if(t.date_is_dst(t.dst_start_for(o))){r=o;return}}},s=function(){return typeof n[r]!=\"undefined\"};return s()&&i(),{name:function(){return r}}},t.olson={},t.olson.timezones={\"-720,0\":\"Pacific/Majuro\",\"-660,0\":\"Pacific/Pago_Pago\",\"-600,1\":\"America/Adak\",\"-600,0\":\"Pacific/Honolulu\",\"-570,0\":\"Pacific/Marquesas\",\"-540,0\":\"Pacific/Gambier\",\"-540,1\":\"America/Anchorage\",\"-480,1\":\"America/Los_Angeles\",\"-480,0\":\"Pacific/Pitcairn\",\"-420,0\":\"America/Phoenix\",\"-420,1\":\"America/Denver\",\"-360,0\":\"America/Guatemala\",\"-360,1\":\"America/Chicago\",\"-360,1,s\":\"Pacific/Easter\",\"-300,0\":\"America/Bogota\",\"-300,1\":\"America/New_York\",\"-270,0\":\"America/Caracas\",\"-240,1\":\"America/Halifax\",\"-240,0\":\"America/Santo_Domingo\",\"-240,1,s\":\"America/Santiago\",\"-210,1\":\"America/St_Johns\",\"-180,1\":\"America/Godthab\",\"-180,0\":\"America/Argentina/Buenos_Aires\",\"-180,1,s\":\"America/Montevideo\",\"-120,0\":\"America/Noronha\",\"-120,1\":\"America/Noronha\",\"-60,1\":\"Atlantic/Azores\",\"-60,0\":\"Atlantic/Cape_Verde\",\"0,0\":\"UTC\",\"0,1\":\"Europe/London\",\"60,1\":\"Europe/Berlin\",\"60,0\":\"Africa/Lagos\",\"60,1,s\":\"Africa/Windhoek\",\"120,1\":\"Asia/Beirut\",\"120,0\":\"Africa/Johannesburg\",\"180,0\":\"Asia/Baghdad\",\"180,1\":\"Europe/Moscow\",\"210,1\":\"Asia/Tehran\",\"240,0\":\"Asia/Dubai\",\"240,1\":\"Asia/Baku\",\"270,0\":\"Asia/Kabul\",\"300,1\":\"Asia/Yekaterinburg\",\"300,0\":\"Asia/Karachi\",\"330,0\":\"Asia/Kolkata\",\"345,0\":\"Asia/Kathmandu\",\"360,0\":\"Asia/Dhaka\",\"360,1\":\"Asia/Omsk\",\"390,0\":\"Asia/Rangoon\",\"420,1\":\"Asia/Krasnoyarsk\",\"420,0\":\"Asia/Jakarta\",\"480,0\":\"Asia/Shanghai\",\"480,1\":\"Asia/Irkutsk\",\"525,0\":\"Australia/Eucla\",\"525,1,s\":\"Australia/Eucla\",\"540,1\":\"Asia/Yakutsk\",\"540,0\":\"Asia/Tokyo\",\"570,0\":\"Australia/Darwin\",\"570,1,s\":\"Australia/Adelaide\",\"600,0\":\"Australia/Brisbane\",\"600,1\":\"Asia/Vladivostok\",\"600,1,s\":\"Australia/Sydney\",\"630,1,s\":\"Australia/Lord_Howe\",\"660,1\":\"Asia/Kamchatka\",\"660,0\":\"Pacific/Noumea\",\"690,0\":\"Pacific/Norfolk\",\"720,1,s\":\"Pacific/Auckland\",\"720,0\":\"Pacific/Tarawa\",\"765,1,s\":\"Pacific/Chatham\",\"780,0\":\"Pacific/Tongatapu\",\"780,1,s\":\"Pacific/Apia\",\"840,0\":\"Pacific/Kiritimati\"},typeof exports!=\"undefined\"?exports.jstz=t:e.jstz=t})(this);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/jstz.min.js\n ** module id = 107\n ** module chunks = 0 1\n **/","import {QueryController} from '../controllers/QueryController';\nimport {Logger} from './Logger';\nimport {ISentryLog} from '../rest/SentryLog';\nimport {DeviceUtils} from '../utils/DeviceUtils';\n\nexport class SentryLogger {\n  private logger: Logger;\n\n  constructor(private queryController: QueryController, private windoh: Window = window) {\n    this.logger = new Logger(this);\n    this.bindErrorHandler();\n  }\n\n  private bindErrorHandler() {\n    // take care of not overriding any existing onerror handler that might be already present in the page.\n    let oldHandler = this.windoh.onerror;\n    if (_.isFunction(oldHandler)) {\n      this.windoh.onerror = (...args: any[]) => {\n        oldHandler.apply(oldHandler, args);\n        this.handleError.apply(this, args);\n      };\n    } else {\n      this.windoh.onerror = this.handleError.bind(this);\n    }\n  }\n\n  private handleError(message: string, filename?: string, lineno?: number, colno?: number, error?: Error) {\n    // try not to log irrelevant errors ...\n    if (!filename.toLowerCase().match(/coveo/) || this.windoh.location.host.toLowerCase().match(/localhost/)) {\n      return;\n    }\n\n    let errorInfo = {\n      message: message,\n      filename: filename,\n      line: lineno,\n      column: colno,\n      error: error.toString(),\n      errorStack: error['stack'], // Not all browser will return this,\n      device: DeviceUtils.getDeviceName()\n    };\n\n    let sentryLog: ISentryLog = {\n      level: 'DEBUG',\n      title: this.windoh.location.href,\n      message: JSON.stringify(errorInfo)\n    };\n\n    this.queryController.getEndpoint().logError(sentryLog);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/misc/SentryLogger.ts\n **/","/**\n * Describe the cause of an event for the analytics service.\n */\nexport interface IAnalyticsActionCause {\n  /**\n   * The name of the event. Should be unique for each event.<br/>\n   * Eg : searchBoxSubmit or resultSort\n   */\n  name: string;\n  /**\n   * The type of the event. Allows to regroup similar event types together when doing reporting.<br/>\n   * For example, all search box events will be of type \"search box\"\n   */\n  type: string;\n  metaMap?: { [name: string]: number };\n}\n\nexport interface IAnalyticsNoMeta {\n}\n\nexport interface IAnalyticsInterfaceChange {\n  interfaceChangeTo: string;\n}\n\nexport interface IAnalyticsContextAddMeta {\n  contextName: string;\n}\n\nexport interface IAnalyticsContextRemoveMeta {\n  contextName: string;\n}\n\nexport interface IAnalyticsResultsSortMeta {\n  resultsSortBy: string;\n}\n\n/**\n * The expected metadata when logging a click event / document view\n */\nexport interface IAnalyticsDocumentViewMeta {\n  /**\n   * The url of the clicked document.\n   */\n  documentURL?: string;\n  /**\n   * The title of the clicked document.\n   */\n  documentTitle?: string;\n  /**\n   * The author of the clicked document.\n   */\n  author: string;\n}\n\nexport interface IAnalyticsOmniboxFacetMeta {\n  facetId: string;\n  facetTitle: string;\n  facetValue?: string;\n  suggestions: string;\n  suggestionRanking: number;\n  query: string;\n}\n\nexport interface IAnalyticsFacetMeta {\n  facetId: string;\n  facetValue?: string;\n  facetTitle: string;\n}\n\nexport interface IAnalyticsQueryErrorMeta {\n  query: string;\n  aq: string;\n  cq: string;\n  dq: string;\n  errorType: string;\n  errorMessage: string;\n}\n\nexport interface IAnalyticsTopSuggestionMeta {\n  suggestionRanking: number;\n  partialQueries: string;\n  suggestions: string;\n  partialQuery: string;\n}\n\nexport interface IAnalyticsOmniboxSuggestionMeta {\n  suggestionRanking: number;\n  partialQueries: string;\n  suggestions: string;\n  partialQuery: string;\n}\n\nexport interface IAnalyticsFacetSliderChangeMeta {\n  facetId: string;\n  facetRangeStart: any;\n  facetRangeEnd: any;\n}\n\nexport interface IAnalyticsFacetGraphSelectedMeta extends IAnalyticsFacetSliderChangeMeta {\n}\n\nexport interface IAnalyticsFacetOperatorMeta extends IAnalyticsFacetMeta {\n  facetOperatorBefore: string;\n  facetOperatorAfter: string;\n}\n\nexport interface IAnalyticsPreferencesChangeMeta {\n  preferenceName: string;\n  preferenceType: string;\n}\n\nexport interface IAnalyticsCustomFiltersChangeMeta {\n  customFilterName: string;\n  customFilterType: string;\n  customFilterExpression: string;\n}\n\nexport interface IAnalyticsCaseAttachMeta {\n  resultUriHash: string;\n  articleID: string;\n  caseID: string;\n  author: string;\n}\n\nexport interface IAnalyticsCaseContextAddMeta {\n  caseID: string;\n}\n\nexport interface IAnalyticsCaseContextRemoveMeta {\n  caseID: string;\n}\n\nexport interface IAnalyticsCaseDetachMeta extends IAnalyticsCaseAttachMeta {\n}\n\nexport interface IAnalyticsCaseCreationInputChangeMeta {\n  inputTitle: string;\n  input: string;\n  value: string;\n}\n\nexport interface IAnalyticsCaseCreationDeflectionMeta {\n  hasClicks: boolean;\n  values: { [field: string]: string };\n}\n\nexport interface IAnalyticsPagerMeta {\n  pagerNumber: number;\n}\n\nexport interface IAnalyticsResultsPerPageMeta {\n  currentResultsPerPage: number;\n}\n\nexport interface IAnalyticsTriggerNotify {\n  notification: string;\n}\n\nexport interface IAnalyticsTriggerRedirect {\n  redirectedTo: string;\n}\n\nexport interface IAnalyticsTriggerQuery {\n  query: string;\n}\n\nexport interface IAnalyticsTriggerExecute {\n  executed: string;\n}\n\nexport var analyticsActionCauseList = {\n  interfaceLoad: <IAnalyticsActionCause>{\n    name: 'interfaceLoad',\n    type: 'interface'\n  },\n  interfaceChange: <IAnalyticsActionCause>{\n    name: 'interfaceChange',\n    type: 'interface',\n    metaMap: { interfaceChangeTo: 1 }\n  },\n  contextRemove: <IAnalyticsActionCause>{\n    name: 'contextRemove',\n    type: 'misc',\n    metaMap: { contextName: 1 }\n  },\n  didyoumeanAutomatic: <IAnalyticsActionCause>{\n    name: 'didyoumeanAutomatic',\n    type: 'misc'\n  },\n  didyoumeanClick: <IAnalyticsActionCause>{\n    name: 'didyoumeanClick',\n    type: 'misc'\n  },\n  resultsSort: <IAnalyticsActionCause>{\n    name: 'resultsSort',\n    type: 'misc',\n    metaMap: { resultsSortBy: 1 }\n  },\n  searchboxSubmit: <IAnalyticsActionCause>{\n    name: 'searchboxSubmit',\n    type: 'search box'\n  },\n  searchboxClear: <IAnalyticsActionCause>{\n    name: 'searchboxClear',\n    type: 'search box'\n  },\n  searchboxAsYouType: <IAnalyticsActionCause>{\n    name: 'searchboxAsYouType',\n    type: 'search box'\n  },\n  breadcrumbFacet: <IAnalyticsActionCause>{\n    name: 'breadcrumbFacet',\n    type: 'breadcrumb',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  breadcrumbResetAll: <IAnalyticsActionCause>{\n    name: 'breadcrumbResetAll',\n    type: 'breadcrumb',\n  },\n  documentTag: <IAnalyticsActionCause>{\n    name: 'documentTag',\n    type: 'document',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  documentField: <IAnalyticsActionCause>{\n    name: 'documentField',\n    type: 'document',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  documentQuickview: <IAnalyticsActionCause>{\n    name: 'documentQuickview',\n    type: 'document',\n    metaMap: { documentTitle: 1, documentURL: 2 }\n  },\n  documentOpen: <IAnalyticsActionCause>{\n    name: 'documentOpen',\n    type: 'document',\n    metaMap: { documentTitle: 1, documentURL: 2 }\n  },\n  omniboxFacetSelect: <IAnalyticsActionCause>{\n    name: 'omniboxFacetSelect',\n    type: 'omnibox',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  omniboxFacetExclude: <IAnalyticsActionCause>{\n    name: 'omniboxFacetExclude',\n    type: 'omnibox',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  omniboxFacetDeselect: <IAnalyticsActionCause>{\n    name: 'omniboxFacetDeselect',\n    type: 'omnibox',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  omniboxFacetUnexclude: <IAnalyticsActionCause>{\n    name: 'omniboxFacetUnexclude',\n    type: 'omnibox',\n    metaMap: { faceId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  omniboxAnalytics: <IAnalyticsActionCause>{\n    name: 'omniboxAnalytics',\n    type: 'omnibox',\n    metaMap: {\n      partialQuery: 1,\n      suggestionRanking: 2,\n      partialQueries: 3,\n      suggestions: 4\n    }\n  },\n  omniboxField: <IAnalyticsActionCause>{\n    name: 'omniboxField',\n    type: 'omnibox'\n  },\n  facetClearAll: <IAnalyticsActionCause>{\n    name: 'facetClearAll',\n    type: 'facet',\n    metaMap: { facetId: 1 }\n  },\n  facetSearch: <IAnalyticsActionCause>{\n    name: 'facetSearch',\n    type: 'facet',\n    metaMap: { facetId: 1 }\n  },\n  facetToggle: <IAnalyticsActionCause>{\n    name: 'facetToggle',\n    type: 'facet',\n    metaMap: { facetId: 1, facetOperatorBefore: 2, facetOperatorAfter: 3 }\n  },\n  facetRangeSlider: <IAnalyticsActionCause>{\n    name: 'facetRangeSlider',\n    type: 'facet',\n    metaMap: { facetId: 1, facetRangeStart: 2, facetRangeEnd: 3 }\n  },\n  facetRangeGraph: <IAnalyticsActionCause>{\n    name: 'facetRangeGraph',\n    type: 'facet',\n    metaMap: { facetId: 1, facetRangeStart: 2, facetRangeEnd: 3 }\n  },\n  facetSelect: <IAnalyticsActionCause>{\n    name: 'facetSelect',\n    type: 'facet',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  facetSelectAll: <IAnalyticsActionCause>{\n    name: 'facetSelectAll',\n    type: 'facet',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  facetDeselect: <IAnalyticsActionCause>{\n    name: 'facetDeselect',\n    type: 'facet',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  facetExclude: <IAnalyticsActionCause>{\n    name: 'facetExclude',\n    type: 'facet',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  facetUnexclude: <IAnalyticsActionCause>{\n    name: 'facetUnexclude',\n    type: 'facet',\n    metaMap: { facetId: 1, facetValue: 2, facetTitle: 3 }\n  },\n  errorBack: <IAnalyticsActionCause>{\n    name: 'errorBack',\n    type: 'errors'\n  },\n  errorClearQuery: <IAnalyticsActionCause>{\n    name: 'errorClearQuery',\n    type: 'errors'\n  },\n  errorRetry: <IAnalyticsActionCause>{\n    name: 'errorRetry',\n    type: 'errors'\n  },\n  noResultsBack: <IAnalyticsActionCause>{\n    name: 'noResultsBack',\n    type: 'noResults'\n  },\n  expandToFullUI: <IAnalyticsActionCause>{\n    name: 'expandToFullUI',\n    type: 'interface'\n  },\n  caseCreationInputChange: <IAnalyticsActionCause>{\n    name: 'inputChange',\n    type: 'caseCreation'\n  },\n  caseCreationSubmitButton: <IAnalyticsActionCause>{\n    name: 'submitButton',\n    type: 'caseCreation'\n  },\n  caseCreationCancelButton: <IAnalyticsActionCause>{\n    name: 'cancelButton',\n    type: 'caseCreation'\n  },\n  caseCreationUnloadPage: <IAnalyticsActionCause>{\n    name: 'unloadPage',\n    type: 'caseCreation'\n  },\n  casecontextAdd: <IAnalyticsActionCause>{\n    name: 'casecontextAdd',\n    type: 'casecontext',\n    metaMap: { caseID: 5 }\n  },\n  casecontextRemove: <IAnalyticsActionCause>{\n    name: 'casecontextRemove',\n    type: 'casecontext',\n    metaMap: { caseID: 5 }\n  },\n  preferencesChange: <IAnalyticsActionCause>{\n    name: 'preferencesChange',\n    type: 'preferences',\n    metaMap: { preferenceName: 1, preferenceType: 2 }\n  },\n  getUserHistory: <IAnalyticsActionCause>{\n    name: 'getUserHistory',\n    type: 'userHistory'\n  },\n  userActionDocumentClick: <IAnalyticsActionCause>{\n    name: 'userActionDocumentClick',\n    type: 'userHistory'\n  },\n  caseAttach: <IAnalyticsActionCause>{\n    name: 'caseAttach',\n    type: 'case',\n    metaMap: { documentTitle: 1, resultUriHash: 3, articleID: 4, caseID: 5 }\n  },\n  caseDetach: <IAnalyticsActionCause>{\n    name: 'caseDetach',\n    type: 'case',\n    metaMap: { documentTitle: 1, resultUriHash: 3, articleID: 4, caseID: 5 }\n  },\n  customfiltersChange: <IAnalyticsActionCause>{\n    name: 'customfiltersChange',\n    type: 'customfilters',\n    metaMap: { customFilterName: 1, customFilterType: 2, customFilterExpression: 3 }\n  },\n  pagerNumber: <IAnalyticsActionCause>{\n    name: 'pagerNumber',\n    type: 'getMoreResults',\n    metaMap: { 'pagerNumber': 1 }\n  },\n  pagerNext: <IAnalyticsActionCause>{\n    name: 'pagerNext',\n    type: 'getMoreResults',\n    metaMap: { 'pagerNumber': 1 }\n  },\n  pagerPrevious: <IAnalyticsActionCause>{\n    name: 'pagerPrevious',\n    type: 'getMoreResults',\n    metaMap: { 'pagerNumber': 1 }\n  },\n  pagerScrolling: <IAnalyticsActionCause>{\n    name: 'pagerScrolling',\n    type: 'getMoreResults'\n  },\n  pagerResize: <IAnalyticsActionCause>{\n    name: 'pagerResize',\n    type: 'getMoreResults'\n  },\n  searchFromLink: <IAnalyticsActionCause>{\n    name: 'searchFromLink',\n    type: 'interface'\n  },\n  triggerNotify: <IAnalyticsActionCause>{\n    name: 'notify',\n    type: 'queryPipelineTriggers'\n  },\n  triggerExecute: <IAnalyticsActionCause>{\n    name: 'execute',\n    type: 'queryPipelineTriggers'\n  },\n  triggerQuery: <IAnalyticsActionCause>{\n    name: 'query',\n    type: 'queryPipelineTriggers'\n  },\n  triggerRedirect: <IAnalyticsActionCause>{\n    name: 'redirect',\n    type: 'queryPipelineTriggers'\n  },\n  queryError: <IAnalyticsActionCause>{\n    name: 'query',\n    type: 'errors',\n    metaMap: { 'query': 1, 'aq': 2, 'cq': 3, 'dq': 4, 'errorType': 5, 'errorMessage': 6 }\n  },\n  exportToExcel: <IAnalyticsActionCause>{\n    name: 'exportToExcel',\n    type: 'misc'\n  },\n  recommendation: <IAnalyticsActionCause>{\n    name: 'recommendation',\n    type: 'recommendation'\n  },\n  recommendationInterfaceLoad: <IAnalyticsActionCause>{\n    name: 'recommendationInterfaceLoad',\n    type: 'recommendation'\n  },\n  recommendationOpen: <IAnalyticsActionCause>{\n    name: 'recommendationOpen',\n    type: 'recommendation'\n  },\n  advancedSearch: <IAnalyticsActionCause>{\n    name: 'advancedSearch',\n    type: 'advancedSearch'\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Analytics/AnalyticsActionListMeta.ts\n **/","import {SearchInterface, ISearchInterfaceOptions} from '../SearchInterface/SearchInterface';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {QueryEvents, IQuerySuccessEventArgs, IBuildingQueryEventArgs} from '../../events/QueryEvents';\nimport {OmniboxEvents} from '../../events/OmniboxEvents';\nimport {ResultListEvents} from '../../events/ResultListEvents';\nimport {SettingsEvents} from '../../events/SettingsEvents';\nimport {PreferencesPanelEvents} from '../../events/PreferencesPanelEvents';\nimport {AnalyticsEvents} from '../../events/AnalyticsEvents';\nimport {analyticsActionCauseList, IAnalyticsNoMeta} from '../Analytics/AnalyticsActionListMeta';\nimport {BreadcrumbEvents} from '../../events/BreadcrumbEvents';\nimport {QuickviewEvents} from '../../events/QuickviewEvents';\nimport {QUERY_STATE_ATTRIBUTES} from '../../models/QueryStateModel';\nimport {Model} from '../../models/Model';\nimport {Utils} from '../../utils/Utils';\nimport {$$} from '../../utils/Dom';\nimport {INoResultsEventArgs} from '../../events/QueryEvents';\nimport {IQueryErrorEventArgs} from '../../events/QueryEvents';\n\ndeclare var coveoanalytics: CoveoAnalytics.CoveoUA;\n\nexport interface IRecommendationOptions extends ISearchInterfaceOptions {\n  mainSearchInterface?: HTMLElement;\n  userContext?: string;\n  id?: string;\n  optionsToUse?: string[];\n  sendActionsHistory?: boolean;\n  hideIfNoResults?: boolean;\n}\n\n/**\n * This component is a {@link SearchInterface} that will display recommendations based on the user history.\n * To get recommendations, the page view script must also be included in the page. View: https://github.com/coveo/coveo.analytics.js\n * This component listens when the main search interface generates a query and it generates another to get the recommendations at the same time.\n *\n * This component can be included in another SearchInterface, but you need to initialize the recommendation component with Coveo('initRecommendation'), before\n * the parent SearchInterface.\n */\nexport class Recommendation extends SearchInterface {\n  static ID = 'Recommendation';\n  private static NEXT_ID = 1;\n\n  /**\n   * The options for the recommendation component\n   * @componentOptions\n   */\n  static options: IRecommendationOptions = {\n    /**\n     * Specifies the main {@link SearchInterface} to listen to.\n     */\n    mainSearchInterface: ComponentOptions.buildSelectorOption(),\n\n    /**\n     * Specifies the user context to send to Coveo analytics.\n     * It will be sent with the query alongside the user history to get the recommendations.\n     */\n    userContext: ComponentOptions.buildJsonOption(),\n\n    /**\n     * Specifies the id of the interface.\n     * It is used by the analytics to know which recommendation interface was selected.\n     * The default value is \"Recommendation\" for the first one and \"Recommendation_{number}\" where {number} depends on the number of recommendation interface with default ids in the page for the others. \n     */\n    id: ComponentOptions.buildStringOption(),\n    /**\n     * Specifies which options from the main {@link QueryBuilder} to use in the triggered query.\n     * Ex: <code data-options-to-use=\"expression, advancedExpression\"></code> would add the expression and the advanced expression parts from the main query in the triggered query.\n     * The default value is undefined.\n     */\n    optionsToUse: ComponentOptions.buildListOption({ defaultValue: ['expression'] }),\n\n    /**\n     * Specifies whether or not to send the actions history along with the triggered query.\n     * Disabling this option means this component won't be able to get Reveal recommendations.\n     * However, it could be useful to display side results in a search page.\n     * The default value is true.\n     */\n    sendActionsHistory: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\n    /**\n     * Hides the component if there a no results / recommendations.\n     * The default value is false.\n     */\n    hideIfNoResults: ComponentOptions.buildBooleanOption({ defaultValue: true })\n\n  };\n\n  private mainInterfaceQuery: IQuerySuccessEventArgs;\n  public mainQuerySearchUID: string;\n  private displayStyle: string;\n\n  constructor(public element: HTMLElement, public options: IRecommendationOptions = {}, public analyticsOptions = {}, _window = window) {\n    super(element, ComponentOptions.initComponentOptions(element, Recommendation, options), analyticsOptions, _window);\n\n    if (!this.options.id) {\n      this.generateDefaultId();\n    }\n\n    if (this.options.mainSearchInterface) {\n      this.bindToMainSearchInterface();\n    }\n\n    $$(this.element).on(QueryEvents.buildingQuery, (e: Event, args: IBuildingQueryEventArgs) => this.handleRecommendationBuildingQuery(args));\n    $$(this.element).on(QueryEvents.querySuccess, (e: Event, args: IQuerySuccessEventArgs) => this.handleRecommendationQuerySuccess(args));\n    $$(this.element).on(QueryEvents.noResults, (e: Event, args: INoResultsEventArgs) => {\n      if (this.options.hideIfNoResults) {\n        this.hide();\n      }\n    });\n    $$(this.element).on(QueryEvents.queryError, (e: Event, args: IQueryErrorEventArgs) => this.hide());\n\n    // This is done to allow the component to be included in another search interface without triggering the parent events.\n    this.preventEventPropagation();\n\n  }\n\n  public getId(): string {\n    return this.options.id;\n  }\n\n  public hide(): void {\n    this.displayStyle = this.element.style.display;\n    $$(this.element).hide();\n  }\n\n  public show(): void {\n    if (!this.displayStyle) {\n      this.displayStyle = this.element.style.display;\n    }\n    this.element.style.display = this.displayStyle;\n  }\n\n  private bindToMainSearchInterface() {\n    $$(this.options.mainSearchInterface).on(QueryEvents.querySuccess, (e: Event, args: IQuerySuccessEventArgs) => {\n      this.mainInterfaceQuery = args;\n      this.mainQuerySearchUID = args.results.searchUid;\n      this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.recommendation, {});\n      this.queryController.executeQuery();\n    });\n  }\n\n  private handleRecommendationBuildingQuery(data: IBuildingQueryEventArgs) {\n    this.modifyQueryForRecommendation(data);\n    this.addRecommendationInfoInQuery(data);\n  }\n\n  private handleRecommendationQuerySuccess(data: IQuerySuccessEventArgs) {\n    if (this.options.hideIfNoResults) {\n      if (data.results.totalCount === 0) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    }\n  }\n\n  private modifyQueryForRecommendation(data: IBuildingQueryEventArgs) {\n    if (this.mainInterfaceQuery) {\n      Utils.copyObjectAttributes(data.queryBuilder, this.mainInterfaceQuery.queryBuilder, this.options.optionsToUse);\n    }\n  }\n\n  private addRecommendationInfoInQuery(data: IBuildingQueryEventArgs) {\n    if (!_.isEmpty(this.options.userContext)) {\n      data.queryBuilder.addContext(JSON.parse(this.options.userContext));\n    }\n    if (this.options.sendActionsHistory) {\n      data.queryBuilder.actionsHistory = this.getHistory();\n    }\n\n    data.queryBuilder.recommendation = this.options.id;\n  }\n\n  private getHistory(): string {\n    if (typeof coveoanalytics != 'undefined') {\n      var store = new coveoanalytics.history.HistoryStore();\n      return JSON.stringify(store.getHistory());\n    } else {\n      return '[]';\n    }\n  }\n\n  private preventEventPropagation() {\n    this.preventEventPropagationOn(QueryEvents);\n    this.preventEventPropagationOn(OmniboxEvents);\n    this.preventEventPropagationOn(ResultListEvents);\n    this.preventEventPropagationOn(SettingsEvents);\n    this.preventEventPropagationOn(PreferencesPanelEvents);\n    this.preventEventPropagationOn(AnalyticsEvents);\n    this.preventEventPropagationOn(BreadcrumbEvents);\n    this.preventEventPropagationOn(QuickviewEvents);\n    this.preventEventPropagationOn(this.getAllModelEvents());\n  }\n\n  private preventEventPropagationOn(eventType, eventName = (event: string) => { return event; }) {\n    for (let event in eventType) {\n      $$(this.root).on(eventName(event), (e: Event) => e.stopPropagation());\n    }\n  }\n\n  private getAllModelEvents() {\n    let events = {};\n    _.each(_.values(Model.eventTypes), (event) => {\n      _.each(_.values(QUERY_STATE_ATTRIBUTES), (attribute) => {\n        let eventName = this.getBindings().queryStateModel.getEventName(event + attribute);\n        events[eventName] = eventName;\n      });\n    });\n    return events;\n  }\n\n  private generateDefaultId() {\n    let id = 'Recommendation';\n    if (Recommendation.NEXT_ID !== 1) {\n      this.logger.warn('Generating another recommendation default id', 'Consider configuring a human friendly / meaningful id for this interface');\n      id = id + '_' + Recommendation.NEXT_ID;\n    }\n    Recommendation.NEXT_ID++;\n    this.options.id = id;\n  }\n\n}\n// We do not register the Recommendation component since it is done with .coveo('initRecommendation')\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Recommendation/Recommendation.ts\n **/","export interface IQuickviewLoadedEventArgs {\n  duration: number;\n}\n\nexport class QuickviewEvents {\n  public static quickviewLoaded = 'quickviewLoaded';\n  public static openQuickview = 'openQuickview';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/events/QuickviewEvents.ts\n **/","import {Component} from '../Base/Component';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {IAnalyticsClient} from './AnalyticsClient';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {AnalyticsEndpoint} from '../../rest/AnalyticsEndpoint';\nimport {SearchEndpoint} from '../../rest/SearchEndpoint';\nimport {Assert} from '../../misc/Assert';\nimport {QueryEvents, IBuildingQueryEventArgs, IQueryErrorEventArgs} from '../../events/QueryEvents';\nimport {ComponentOptionsModel} from '../../models/ComponentOptionsModel';\nimport {$$} from '../../utils/Dom';\nimport {Model, IAttributeChangedEventArg} from '../../models/Model';\nimport {IAnalyticsActionCause, IAnalyticsDocumentViewMeta} from '../Analytics/AnalyticsActionListMeta';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {Utils} from '../../utils/Utils';\nimport {NoopAnalyticsClient} from '../Analytics/NoopAnalyticsClient';\nimport {LiveAnalyticsClient} from './LiveAnalyticsClient';\nimport {MultiAnalyticsClient} from './MultiAnalyticsClient';\nimport {IAnalyticsQueryErrorMeta, analyticsActionCauseList} from './AnalyticsActionListMeta';\nimport {SearchInterface} from '../SearchInterface/SearchInterface';\nimport {Recommendation} from '../Recommendation/Recommendation';\nimport {RecommendationAnalyticsClient} from './RecommendationAnalyticsClient';\n\n\nexport interface IAnalyticsOptions {\n  user?: string;\n  userDisplayName?: string;\n  token?: string;\n  endpoint?: string;\n  anonymous?: boolean;\n  searchHub?: string;\n  splitTestRunName?: string;\n  splitTestRunVersion?: string;\n  sendToCloud?: boolean;\n  organization?: string;\n}\n\n/**\n * This component logs all user actions performed in the search interface and sends them to a REST web service exposed through the Coveo Cloud platform.<br/>\n * You can use data to evaluate how users are interacting with the search interface, improve relevance and produce analytics dashboards in the Coveo platform.\n *\n * # Send Custom Events\n * In some scenarios, you want to send custom data to the Coveo Cloud analytics (see [Coveo Cloud Usage Analytics](http://www.coveo.com/go?dest=cloudhelp&lcid=9&context=89)). The Coveo JavaScript Search Framework offers helpers to communicate with the Coveo Analytics REST API, so you do not have to write code to call the API directly.\n *\n * 1. First, you need to craft your custom event cause and meta.<br/>**NB: The event names must be unique.**\n * ```\n *   // customEventType allows to regroup similar event types together when doing reporting (e.g., search box).\n *   var customEventCause = {name: 'customEventName', type:'customEventType'};\n *   var metadata = {key1: \"value1\", key2:\"value2\"};\n * ```\n *\n * 2. Send your custom event.\n * ```\n *   Coveo.logCustomEvent(document.querySelector('#search'), customEventCause, metadata);\n *      // OR (using the jquery extension)\n *   $('#search').coveo('logCustomEvent', customEventCause, metadata);\n * ```\n *\n * 3. Send your custom search event<br/>**NB: If you want to log a `searchEvent`, be sure to always call the helper before you call `executeQuery`.**\n * ```\n * function myCustomButtonWasClicked() {\n *      Coveo.logSearchEvent(document.querySelector('#search'), customEventCause, metadata);\n *      Coveo.executeQuery(document.querySelector('#search'));\n *      // OR (using the jquery extension)\n *      $('#search').coveo('logSearchEvent', customEventCause, metadata);\n *      $('#search').coveo('executeQuery');\n * }\n * ```\n *\n * 4. Send a custom `searchAsYouType` event<br/>**NB: If you want to log a `searchAsYouTypeEvent`, be sure to always call the helper before you call `executeQuery`.**\n * ```\n * function myCustomButtonWasClicked() {\n *      Coveo.logSearchAsYouTypeEvent(document.querySelector('#search'), customEventCause, metadata);\n *      Coveo.executeQuery(document.querySelector('#search'));\n *      // OR (using the jquery extension)\n *      $('#search').coveo('logSearchAsYouTypeEvent', customEventCause, metadata);\n *      $('#search').coveo('executeQuery');\n * }\n * ```\n *\n * 5. Send a custom click event.\n * ```\n * Coveo.logClickEvent(document.querySelector('#search'), customEventCause, metadata, result);\n * // OR (using the jQuery extension)\n * $('#search').coveo('logClickEvent', customEventCause, metadata, result);\n * ```\n */\nexport class Analytics extends Component {\n  static ID = 'Analytics';\n  // NOTE: The default values for some of those options (`organization`, `endpoint`, `searchHub`) can be\n  // overridden by generated code when using hosted search pages.\n\n  /**\n   * Options for the component\n   * @componentOptions\n   */\n  static options: IAnalyticsOptions = {\n    /**\n     * Specifies the name of the user for usage analytics logs.\n     */\n    user: ComponentOptions.buildStringOption(),\n    /**\n     * Specifies the name of the user display name for usage analytics logs.\n     */\n    userDisplayName: ComponentOptions.buildStringOption(),\n    /**\n     * Specifies the token used to gain access the analytics endpoint.<br/>\n     * This attribute is optional, the component will use the search token by default.\n     */\n    token: ComponentOptions.buildStringOption(),\n    /**\n     * Specifies the URL of the analytics logger for rare cases where it is different from the default usage analytics Coveo Cloud endpoint (https://usageanalytics.coveo.com).\n     */\n    endpoint: ComponentOptions.buildStringOption({ defaultValue: AnalyticsEndpoint.DEFAULT_ANALYTICS_URI }),\n    /**\n     * Specifies whether the search user identities are converted in a unique hash in the logged analytics data to prevent analytics reviewers and managers to identify who performs which queries.<br/>\n     * When enabled, the Coveo Analytics Platform can still properly identify sessions made by anonymous users, versus ones from users that are authenticated in some way with the site containing the search page.<br/>\n     * The default value is `false`.\n     */\n    anonymous: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * Sets the Search Hub dimension on the search events.<br/>\n     * The Search Hub dimension is typically a name that refers to a specific search page. For example, one could use the CommunitySite value to refer to a search page on a company's public community site.<br/>\n     * The default value is default.\n     */\n    searchHub: ComponentOptions.buildStringOption({ defaultValue: 'default' }),\n    /**\n     * Specifies the name of the split test run that the search page is a part of.<br/>\n     * This dimension can be used to perform A/B testing using different search page layouts and features, inside the Coveo Query pipeline.<br/>\n     * By default, this value is not specified and no split test run name is reported to the Coveo Analytics Platform.\n     */\n    splitTestRunName: ComponentOptions.buildStringOption(),\n    /**\n     * Specifies the version name for the page when a split test run is active.<br/>\n     * When reporting on A/B testing analytics data, this value specifies the test run version name that has been presented to the user.<br/>\n     * By default, this value is not specified.\n     */\n    splitTestRunVersion: ComponentOptions.buildStringOption(),\n    sendToCloud: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    /**\n     * Specifies the organization bound to the access token. This is necessary when using an access token because it can be associated with more than organization.\n     * If this parameter is not specified, it will fallback on the organization used for the search endpoint.\n     */\n    organization: ComponentOptions.buildStringOption()\n  };\n\n  /**\n   * A reference to the `analyticsClient`, which will perform the heavy duty part of logging the actual events on the service.\n   */\n  public client: IAnalyticsClient;\n\n  /**\n   * Create a new Analytics component. Create the {@link IAnalyticsClient}.\n   * @param element The HTMLElement on which the component will be instantiated.\n   * @param options The options for the Analytics.\n   * @param bindings The bindings that the component requires to function normally. If not set, it will automatically resolve them (with slower execution time).\n   */\n  constructor(public element: HTMLElement, public options: IAnalyticsOptions = {}, public bindings?: IComponentBindings) {\n    super(element, Analytics.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, Analytics, options);\n\n    this.retrieveInfoFromDefaultSearchEndpoint();\n    this.initializeAnalyticsClient();\n    Assert.exists(this.client);\n\n    this.bind.onRootElement(QueryEvents.buildingQuery, (data: IBuildingQueryEventArgs) => this.handleBuildingQuery(data));\n    this.bind.onRootElement(QueryEvents.queryError, (data: IQueryErrorEventArgs) => this.handleQueryError(data));\n\n    // Analytics component is a bit special: It can be higher in the dom tree than the search interface\n    // Need to resolve down to find the componentOptionsModel if we need to.\n    if (!this.componentOptionsModel) {\n      let cmpOptionElement = $$(element).find('.' + Component.computeCssClassName(ComponentOptionsModel));\n      if (cmpOptionElement) {\n        this.componentOptionsModel = cmpOptionElement[Component.computeCssClassName(ComponentOptionsModel)];\n      }\n    }\n\n    if (this.componentOptionsModel) {\n      this.componentOptionsModel.set(ComponentOptionsModel.attributesEnum.searchHub, this.options.searchHub);\n      let event = this.componentOptionsModel.getEventName(Model.eventTypes.changeOne + ComponentOptionsModel.attributesEnum.searchHub);\n      this.bind.onRootElement(event, (args: IAttributeChangedEventArg) => this.handleSearchHubChanged(args));\n    }\n  }\n\n  /**\n   * Log a search event on the service, using a cause and a meta object.<br/>\n   * Note that the event will be sent on the service when a query successfully return, not immediately after calling this method.<br/>\n   * Normally, this should be called using the following \"format\": <br/>\n   * usageAnalytics.logSearchEvent<SomeMeta>({name : 'foo', type : 'bar'}, <SomeMeta>{'key':'value'});<br/>\n   * this.queryController.executeQuery();<br/>\n   * This will queue up an analytics search event. Then the query is executed. The search event will be sent to the service when the query is successfully completed.<br/>\n   * @param actionCause\n   * @param meta Can be an empty object ( {} ).\n   */\n  public logSearchEvent<T>(actionCause: IAnalyticsActionCause, meta: T) {\n    this.client.logSearchEvent<T>(actionCause, meta);\n  }\n\n  /**\n   * Log a search as you type event on the service, using a cause and a meta object.<br/>\n   * This is extremely similar to a search event, except that search as you type, by definition, will be frequently called.<br/>\n   * The `PendingSearchAsYouTypeEvent` will take care of logging only the \"relevant\" last event: After 5 seconds of no event logged, or after another search event is triggered somewhere else in the interface.<br/>\n   * This is to ensure that we do not needlessly log every single partial query, which would make the reporting very confusing.\n   * @param actionCause\n   * @param meta Can be an empty object ( {} ).\n   */\n  public logSearchAsYouType<T>(actionCause: IAnalyticsActionCause, meta: T) {\n    this.client.logSearchAsYouType(actionCause, meta);\n  }\n\n  /**\n   * Log a custom event on the service. A custom event can be used to create customized report, or to track events which are not queries or document views.\n   * @param actionCause\n   * @param meta\n   * @param element The HTMLElement that was interacted with for this custom event.\n   */\n  public logCustomEvent<T>(actionCause: IAnalyticsActionCause, meta: T, element: HTMLElement = this.element) {\n    this.client.logCustomEvent(actionCause, meta, element);\n  }\n\n  /**\n   * Log a click event. A click event can be understood as a document view.<br/>\n   * eg : Clicking on a result link of opening a quickview.<br/>\n   * This event will be logged immediately on the service.\n   * @param actionCause\n   * @param meta Can be an empty object ( {} ).\n   * @param result The result that was clicked.\n   * @param element The HTMLElement that was clicked in the interface.\n   */\n  public logClickEvent(actionCause: IAnalyticsActionCause, meta: IAnalyticsDocumentViewMeta, result: IQueryResult, element: HTMLElement = this.element) {\n    this.client.logClickEvent(actionCause, meta, result, element);\n  }\n\n  protected initializeAnalyticsEndpoint(): AnalyticsEndpoint {\n    return new AnalyticsEndpoint({\n      token: this.options.token,\n      serviceUrl: this.options.endpoint,\n      organization: this.options.organization\n    });\n  }\n\n  private initializeAnalyticsClient() {\n    if (Utils.isNonEmptyString(this.options.endpoint)) {\n      let endpoint = this.initializeAnalyticsEndpoint();\n      let elementToInitializeClient: HTMLElement;\n      if (this.root && this.element) {\n        if (this.root.contains(this.element)) {\n          elementToInitializeClient = this.root;\n        } else {\n          elementToInitializeClient = this.element;\n        }\n\n      }\n\n      let isRecommendation = $$(this.root).hasClass(Component.computeCssClassName(Recommendation));\n      this.instantiateAnalyticsClient(endpoint, elementToInitializeClient, isRecommendation);\n\n    } else {\n      this.client = new NoopAnalyticsClient();\n    }\n  }\n\n  private instantiateAnalyticsClient(endpoint: AnalyticsEndpoint, elementToInitializeClient: HTMLElement, isRecommendation: boolean) {\n    if (isRecommendation) {\n      this.client = new RecommendationAnalyticsClient(endpoint, elementToInitializeClient,\n        this.options.user,\n        this.options.userDisplayName,\n        this.options.anonymous,\n        this.options.splitTestRunName,\n        this.options.splitTestRunVersion,\n        this.options.searchHub,\n        this.options.sendToCloud,\n        this.getBindings());\n    } else {\n      this.client = new LiveAnalyticsClient(endpoint, elementToInitializeClient,\n        this.options.user,\n        this.options.userDisplayName,\n        this.options.anonymous,\n        this.options.splitTestRunName,\n        this.options.splitTestRunVersion,\n        this.options.searchHub,\n        this.options.sendToCloud);\n    }\n  }\n\n  private retrieveInfoFromDefaultSearchEndpoint() {\n    let defaultEndpoint = SearchEndpoint.endpoints['default'];\n    if (this.options.token == null && defaultEndpoint) {\n      this.options.token = defaultEndpoint.options.accessToken;\n    }\n\n    if (!this.options.organization && defaultEndpoint) {\n      this.options.organization = defaultEndpoint.options.queryStringArguments['workgroup'];\n    }\n  }\n\n  private handleBuildingQuery(data: IBuildingQueryEventArgs) {\n    Assert.exists(data);\n\n    data.queryBuilder.searchHub = this.options.searchHub;\n  }\n\n  private handleSearchHubChanged(data: IAttributeChangedEventArg) {\n    this.options.searchHub = data.value;\n  }\n\n  private handleQueryError(data: IQueryErrorEventArgs) {\n    Assert.exists(data);\n\n    this.client.logCustomEvent<IAnalyticsQueryErrorMeta>(analyticsActionCauseList.queryError, {\n      query: data.query.q,\n      aq: data.query.aq,\n      cq: data.query.cq,\n      dq: data.query.dq,\n      errorType: data.error.type,\n      errorMessage: data.error.message\n    }, this.element);\n  }\n\n  public static create(element: HTMLElement, options: IAnalyticsOptions, bindings: IComponentBindings) {\n    let selector = Component.computeSelectorForType(Analytics.ID);\n    let found: HTMLElement[] = [];\n    found = found.concat($$(element).findAll(selector));\n    if (!(Component.get(element, SearchInterface) instanceof Recommendation)) {\n      found = this.ignoreElementsInsideRecommendationInterface(found);\n    }\n    found.push($$(element).closest(Component.computeCssClassName(Analytics)));\n    if ($$(element).is(selector)) {\n      found.push(element);\n    }\n    found = _.compact(found);\n\n    if (found.length == 1) {\n      return Analytics.getClient(found[0], options, bindings);\n    } else if (found.length > 1) {\n      return new MultiAnalyticsClient(_.map(found, (el) => Analytics.getClient(el, options, bindings)));\n    } else {\n      return new NoopAnalyticsClient();\n    }\n  }\n\n  private static ignoreElementsInsideRecommendationInterface(found: HTMLElement[]): HTMLElement[] {\n    return _.filter(found, (element) => {\n      return $$(element).closest(Component.computeCssClassName(Recommendation)) === undefined;\n    });\n  }\n\n  private static getClient(element: HTMLElement, options: IAnalyticsOptions, bindings: IComponentBindings): IAnalyticsClient {\n    // This check if an element is already initialized as an analytics component.\n    // If that's the case, return the client on that element.\n    // Otherwise, init and return.\n    let foundOnElement = Component.get(element, Analytics, true);\n    if (foundOnElement instanceof Analytics) {\n      return (<Analytics>foundOnElement).client;\n    } else {\n      return new Analytics(element, options, bindings).client;\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Analytics/Analytics.ts\n **/","import {IAnalyticsClient} from './AnalyticsClient';\nimport {DeviceUtils} from '../../utils/DeviceUtils';\nimport {PendingSearchEvent} from './PendingSearchEvent';\nimport {PendingSearchAsYouTypeSearchEvent} from './PendingSearchAsYouTypeSearchEvent';\nimport {AnalyticsEndpoint} from '../../rest/AnalyticsEndpoint';\nimport {Assert} from '../../misc/Assert';\nimport {Logger} from '../../misc/Logger';\nimport {IAnalyticsActionCause, analyticsActionCauseList} from './AnalyticsActionListMeta';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {ITopQueries} from '../../rest/TopQueries';\nimport {IChangeableAnalyticsMetaObject, IChangeableAnalyticsDataObject, IChangeAnalyticsCustomDataEventArgs} from '../../events/AnalyticsEvents';\nimport {Defer} from '../../misc/Defer';\nimport {$$} from '../../utils/Dom';\nimport {AnalyticsEvents, IAnalyticsCustomEventArgs} from '../../events/AnalyticsEvents';\nimport {APIAnalyticsBuilder} from '../../rest/APIAnalyticsBuilder';\nimport {IAnalyticsEvent} from '../../rest/AnalyticsEvent';\nimport {ISearchEvent} from '../../rest/SearchEvent';\nimport {IClickEvent} from '../../rest/ClickEvent';\nimport {ICustomEvent} from '../../rest/CustomEvent';\nimport {QueryStateModel} from '../../models/QueryStateModel';\nimport {Component} from '../Base/Component';\nimport {version} from '../../misc/Version';\n\nexport class LiveAnalyticsClient implements IAnalyticsClient {\n  public isContextual: boolean = false;\n  private language = <string>String['locale'];\n  private device = DeviceUtils.getDeviceName();\n  private mobile = DeviceUtils.isMobileDevice();\n  private pendingSearchEvent: PendingSearchEvent;\n  private pendingSearchAsYouTypeSearchEvent: PendingSearchAsYouTypeSearchEvent;\n  private logger: Logger;\n\n  constructor(public endpoint: AnalyticsEndpoint, public rootElement: HTMLElement, public userId: string, public userDisplayName: string, public anonymous: boolean, public splitTestRunName: string, public splitTestRunVersion: string, public originLevel1: string, public sendToCloud: boolean) {\n\n    Assert.exists(endpoint);\n    Assert.exists(rootElement);\n    Assert.isNonEmptyString(this.language);\n    Assert.isNonEmptyString(this.device);\n    Assert.isNonEmptyString(this.originLevel1);\n    this.logger = new Logger(this);\n  }\n\n  public isActivated(): boolean {\n    return true;\n  }\n\n  public getCurrentVisitId(): string {\n    return this.endpoint.getCurrentVisitId();\n  }\n\n  public getCurrentVisitIdPromise(): Promise<string> {\n    return this.endpoint.getCurrentVisitIdPromise();\n  }\n\n  public getCurrentEventCause() {\n    if (this.pendingSearchEvent != null) {\n      return this.pendingSearchEvent.getEventCause();\n    }\n    if (this.pendingSearchAsYouTypeSearchEvent != null) {\n      return this.pendingSearchAsYouTypeSearchEvent.getEventCause();\n    }\n    return null;\n  }\n\n  public getCurrentEventMeta() {\n    if (this.pendingSearchEvent != null) {\n      return this.pendingSearchEvent.getEventMeta();\n    }\n    if (this.pendingSearchAsYouTypeSearchEvent != null) {\n      return this.pendingSearchAsYouTypeSearchEvent.getEventMeta();\n    }\n    return null;\n  }\n\n  public logSearchEvent<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta) {\n    var metaObject = this.buildMetaObject(meta);\n    this.pushSearchEvent(actionCause, metaObject);\n  }\n\n  public logSearchAsYouType<TMeta>(actionCause: IAnalyticsActionCause, meta?: TMeta) {\n    var metaObject = this.buildMetaObject(meta);\n    this.pushSearchAsYouTypeEvent(actionCause, metaObject);\n  }\n\n  public logClickEvent<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta, result: IQueryResult, element: HTMLElement) {\n    var metaObject = this.buildMetaObject(meta);\n    this.pushClickEvent(actionCause, metaObject, result, element);\n  }\n\n  public logCustomEvent<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta, element: HTMLElement) {\n    var metaObject = this.buildMetaObject(meta);\n    this.pushCustomEvent(actionCause, metaObject, element);\n  }\n\n  public getTopQueries(params: ITopQueries): Promise<string[]> {\n    return this.endpoint.getTopQueries(params);\n  }\n\n  public sendAllPendingEvents() {\n    if (this.pendingSearchAsYouTypeSearchEvent) {\n      this.pendingSearchAsYouTypeSearchEvent.sendRightNow();\n    }\n  }\n\n  public cancelAllPendingEvents() {\n    if (this.pendingSearchAsYouTypeSearchEvent) {\n      this.pendingSearchAsYouTypeSearchEvent.cancel();\n      this.pendingSearchAsYouTypeSearchEvent = null;\n    }\n    if (this.pendingSearchEvent) {\n      this.pendingSearchEvent.cancel();\n      this.pendingSearchEvent = null;\n    }\n  }\n\n  public getPendingSearchEvent(): PendingSearchEvent {\n    if (this.pendingSearchEvent) {\n      return this.pendingSearchEvent;\n    } else if (this.pendingSearchAsYouTypeSearchEvent) {\n      return this.pendingSearchAsYouTypeSearchEvent;\n    }\n    return null;\n  }\n\n  public warnAboutSearchEvent() {\n    if (_.isUndefined(this.pendingSearchEvent) && _.isUndefined(this.pendingSearchAsYouTypeSearchEvent)) {\n      this.logger.warn('A search was triggered, but no analytics event was logged. If you wish to have consistent analytics data, consider logging a search event using the methods provided by the framework', 'https://developers.coveo.com/x/TwA5');\n      if (window['console'] && console.trace) {\n        console.trace();\n      }\n    }\n  }\n\n  private pushCustomEvent(actionCause: IAnalyticsActionCause, metaObject: IChangeableAnalyticsMetaObject, element?: HTMLElement) {\n    var customEvent = this.buildCustomEvent(actionCause, metaObject, element);\n    this.triggerChangeAnalyticsCustomData('CustomEvent', metaObject, customEvent);\n    this.checkToSendAnyPendingSearchAsYouType(actionCause);\n    Defer.defer(() => {\n      if (this.sendToCloud) {\n        this.endpoint.sendCustomEvent(customEvent);\n      }\n      $$(this.rootElement).trigger(AnalyticsEvents.customEvent, <IAnalyticsCustomEventArgs>{ customEvent: APIAnalyticsBuilder.convertCustomEventToAPI(customEvent) });\n    });\n  }\n\n  private pushSearchEvent(actionCause: IAnalyticsActionCause, metaObject: IChangeableAnalyticsMetaObject) {\n    Assert.exists(actionCause);\n    if (this.pendingSearchEvent && this.pendingSearchEvent.getEventCause() !== actionCause.name) {\n      this.pendingSearchEvent.stopRecording();\n      this.pendingSearchEvent = null;\n    }\n    this.checkToSendAnyPendingSearchAsYouType(actionCause);\n\n    if (!this.pendingSearchEvent) {\n      var searchEvent = this.buildSearchEvent(actionCause, metaObject);\n      this.triggerChangeAnalyticsCustomData('SearchEvent', metaObject, searchEvent);\n      var pendingSearchEvent = this.pendingSearchEvent = new PendingSearchEvent(this.rootElement, this.endpoint, searchEvent, this.sendToCloud);\n\n      Defer.defer(() => {\n        // At this point all `duringQuery` events should have been fired, so we can forget\n        // about the pending search event. It will finish processing automatically when\n        // all the deferred that were caught terminate.\n        this.pendingSearchEvent = undefined;\n        pendingSearchEvent.stopRecording();\n      });\n    }\n  }\n\n  private checkToSendAnyPendingSearchAsYouType(actionCause: IAnalyticsActionCause) {\n    if (this.eventIsNotRelatedToSearchbox(actionCause.name)) {\n      this.sendAllPendingEvents();\n    } else {\n      this.cancelAnyPendingSearchAsYouTypeEvent();\n    }\n  }\n\n  private pushSearchAsYouTypeEvent(actionCause: IAnalyticsActionCause, metaObject: IChangeableAnalyticsMetaObject) {\n    this.cancelAnyPendingSearchAsYouTypeEvent();\n    var searchEvent = this.buildSearchEvent(actionCause, metaObject);\n    this.triggerChangeAnalyticsCustomData('SearchEvent', metaObject, searchEvent);\n    this.pendingSearchAsYouTypeSearchEvent = new PendingSearchAsYouTypeSearchEvent(this.rootElement, this.endpoint, searchEvent, this.sendToCloud);\n  }\n\n  private pushClickEvent(actionCause: IAnalyticsActionCause, metaObject: IChangeableAnalyticsMetaObject, result: IQueryResult, element: HTMLElement) {\n    var event = this.buildClickEvent(actionCause, metaObject, result, element);\n    this.checkToSendAnyPendingSearchAsYouType(actionCause);\n    this.triggerChangeAnalyticsCustomData('ClickEvent', metaObject, event, { resultData: result });\n    Assert.isNonEmptyString(event.searchQueryUid);\n    Assert.isNonEmptyString(event.collectionName);\n    Assert.isNonEmptyString(event.sourceName);\n    Assert.isNumber(event.documentPosition);\n    Defer.defer(() => {\n      if (this.sendToCloud) {\n        this.endpoint.sendDocumentViewEvent(event);\n      }\n      $$(this.rootElement).trigger(AnalyticsEvents.documentViewEvent, {\n        documentViewEvent: APIAnalyticsBuilder.convertDocumentViewToAPI(event)\n      });\n    });\n  }\n\n  private buildAnalyticsEvent(actionCause: IAnalyticsActionCause, metaObject: IChangeableAnalyticsMetaObject): IAnalyticsEvent {\n    return {\n      actionCause: actionCause.name,\n      actionType: actionCause.type,\n      username: this.userId,\n      userDisplayName: this.userDisplayName,\n      anonymous: this.anonymous,\n      device: this.device,\n      mobile: this.mobile,\n      language: this.language,\n      responseTime: undefined,\n      originLevel1: this.originLevel1,\n      originLevel2: this.getOriginLevel2(this.rootElement),\n      originLevel3: document.referrer,\n      customData: _.keys(metaObject).length > 0 ? metaObject : undefined,\n      userAgent: navigator.userAgent\n    };\n  }\n\n  private buildSearchEvent(actionCause: IAnalyticsActionCause, metaObject: IChangeableAnalyticsMetaObject): ISearchEvent {\n    return this.merge<ISearchEvent>(this.buildAnalyticsEvent(actionCause, metaObject), {\n      searchQueryUid: undefined,\n      pipeline: undefined,\n      splitTestRunName: this.splitTestRunName,\n      splitTestRunVersion: this.splitTestRunVersion,\n      queryText: undefined,\n      advancedQuery: undefined,\n      results: undefined,\n      resultsPerPage: undefined,\n      pageNumber: undefined,\n      didYouMean: undefined,\n      facets: undefined,\n      contextual: this.isContextual\n    });\n  }\n\n  private buildClickEvent(actionCause: IAnalyticsActionCause, metaObject: IChangeableAnalyticsMetaObject, result: IQueryResult, element: HTMLElement): IClickEvent {\n    return this.merge<IClickEvent>(this.buildAnalyticsEvent(actionCause, metaObject), {\n      searchQueryUid: result.queryUid,\n      queryPipeline: result.pipeline,\n      splitTestRunName: this.splitTestRunName || result.splitTestRun,\n      splitTestRunVersion: this.splitTestRunVersion || (result.splitTestRun != undefined ? result.pipeline : undefined),\n      documentUri: result.uri,\n      documentUriHash: result.raw['urihash'],\n      documentUrl: result.clickUri,\n      documentTitle: result.title,\n      documentCategory: result.raw['objecttype'],\n      originLevel2: this.getOriginLevel2(element),\n      collectionName: <string>result.raw['collection'],\n      sourceName: <string>result.raw['source'],\n      documentPosition: result.index + 1,\n      responseTime: 0,\n      viewMethod: actionCause.name,\n      rankingModifier: result.rankingModifier\n    });\n  }\n\n  private buildCustomEvent(actionCause: IAnalyticsActionCause, metaObject: IChangeableAnalyticsMetaObject, element: HTMLElement): ICustomEvent {\n    return this.merge<ICustomEvent>(this.buildAnalyticsEvent(actionCause, metaObject), {\n      eventType: actionCause.type,\n      eventValue: actionCause.name,\n      originLevel2: this.getOriginLevel2(element),\n      responseTime: 0\n    });\n  }\n\n  protected getOriginLevel2(element: HTMLElement): string {\n    return this.resolveActiveTabFromElement(element) || 'default';\n  }\n\n  private buildMetaObject<TMeta>(meta: TMeta): IChangeableAnalyticsMetaObject {\n    var build: IChangeableAnalyticsMetaObject = _.extend({}, meta);\n    build['JSUIVersion'] = version.lib + ';' + version.product;\n    return build;\n  }\n\n  private cancelAnyPendingSearchAsYouTypeEvent() {\n    if (this.pendingSearchAsYouTypeSearchEvent) {\n      this.pendingSearchAsYouTypeSearchEvent.cancel();\n      this.pendingSearchAsYouTypeSearchEvent = undefined;\n    }\n  }\n\n  private resolveActiveTabFromElement(element: HTMLElement): string {\n    Assert.exists(element);\n    var queryStateModel = this.resolveQueryStateModel(element);\n    return (queryStateModel && <string>queryStateModel.get(QueryStateModel.attributesEnum.t));\n  }\n\n  private resolveQueryStateModel(rootElement: HTMLElement): QueryStateModel {\n    return <QueryStateModel>Component.resolveBinding(rootElement, QueryStateModel);\n  }\n\n  private eventIsNotRelatedToSearchbox(event: string) {\n    return event !== analyticsActionCauseList.searchboxSubmit.name && event !== analyticsActionCauseList.searchboxClear.name;\n  }\n\n  private triggerChangeAnalyticsCustomData(type: string, metaObject: IChangeableAnalyticsMetaObject, event: IAnalyticsEvent, data?: any) {\n    var changeableAnalyticsDataObject: IChangeableAnalyticsDataObject = {\n      language: event.language,\n      originLevel1: event.originLevel1,\n      originLevel2: event.originLevel2,\n      originLevel3: event.originLevel3\n    };\n\n    // This is for backward compatibility. Before the analytics were using either numbered\n    // metas in `metaDataAsNumber` of later on named metas in `metaDataAsString`. Thus we still\n    // provide those properties in a deprecated way. Below we are moving any data that put\n    // in them to the root.\n    (<any>metaObject)['metaDataAsString'] = {};\n    (<any>metaObject)['metaDataAsNumber'] = {};\n\n    var args: IChangeAnalyticsCustomDataEventArgs = _.extend({}, {\n      type: type,\n      metaObject: metaObject,\n      actionType: event.actionType,\n      actionCause: event.actionCause\n    }, changeableAnalyticsDataObject);\n    $$(this.rootElement).trigger(AnalyticsEvents.changeAnalyticsCustomData, args);\n\n    event.language = args.language;\n    event.originLevel1 = args.originLevel1;\n    event.originLevel2 = args.originLevel2;\n    event.originLevel3 = args.originLevel3;\n    event.customData = metaObject;\n\n    // This is for backward compatibility. Before the analytics were using either numbered\n    // metas in `metaDataAsNumber` of later on named metas in `metaDataAsString`. We are now putting\n    // them all at the root, and if I encounter the older properties I move them to the top\n    // level after issuing a warning.\n\n    var metaDataAsString = event.customData['metaDataAsString'];\n    if (_.keys(metaDataAsString).length > 0) {\n      this.logger.warn('Using deprecated \\'metaDataAsString\\' key to log custom analytics data. Custom meta should now be put at the root of the object.');\n      _.extend(event.customData, metaDataAsString);\n    }\n    delete event.customData['metaDataAsString'];\n\n    var metaDataAsNumber = event.customData['metaDataAsNumber'];\n    if (_.keys(metaDataAsNumber).length > 0) {\n      this.logger.warn('Using deprecated \\'metaDataAsNumber\\' key to log custom analytics data. Custom meta should now be put at the root of the object.');\n      _.extend(event.customData, metaDataAsNumber);\n    }\n    delete event.customData['metaDataAsNumber'];\n  }\n\n  private merge<T extends IAnalyticsEvent>(first: IAnalyticsEvent, second: any): T {\n    return _.extend({}, first, second);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Analytics/LiveAnalyticsClient.ts\n **/","import {IDuringQueryEventArgs, QueryEvents} from '../../events/QueryEvents';\nimport {IQueryResults} from '../../rest/QueryResults';\nimport {IQuery} from '../../rest/Query';\nimport {ISearchEvent} from '../../rest/SearchEvent';\nimport {AnalyticsEndpoint} from '../../rest/AnalyticsEndpoint';\nimport {Assert} from '../../misc/Assert';\nimport {$$} from '../../utils/Dom';\nimport {SearchInterface} from '../SearchInterface/SearchInterface';\nimport {Component} from '../Base/Component';\nimport {QueryController} from '../../controllers/QueryController';\nimport {Defer} from '../../misc/Defer';\nimport {APIAnalyticsBuilder} from '../../rest/APIAnalyticsBuilder';\nimport {IAnalyticsSearchEventsArgs, AnalyticsEvents} from '../../events/AnalyticsEvents';\nimport {analyticsActionCauseList} from '../Analytics/AnalyticsActionListMeta';\nimport {QueryStateModel} from '../../models/QueryStateModel';\n\nexport class PendingSearchEvent {\n  private handler: (evt: Event, arg: IDuringQueryEventArgs) => void;\n  private searchPromises: Promise<IQueryResults>[] = [];\n  private results: IQueryResults[] = [];\n  protected cancelled = false;\n  protected finished = false;\n  protected searchEvents: ISearchEvent[] = [];\n\n  constructor(public root: HTMLElement, public endpoint: AnalyticsEndpoint, public templateSearchEvent: ISearchEvent, public sendToCloud: boolean) {\n    Assert.exists(root);\n    Assert.exists(endpoint);\n    Assert.exists(templateSearchEvent);\n\n    this.handler = (evt: Event, arg: IDuringQueryEventArgs) => {\n      this.handleDuringQuery(evt, arg);\n    };\n    $$(root).on(QueryEvents.duringQuery, this.handler);\n  }\n\n  public getEventCause() {\n    return this.templateSearchEvent.actionCause;\n  }\n\n  public getEventMeta() {\n    return this.templateSearchEvent.customData;\n  }\n\n  public cancel() {\n    this.stopRecording();\n    this.cancelled = true;\n  }\n\n  protected handleDuringQuery(evt: Event, args: IDuringQueryEventArgs) {\n    Assert.check(!this.finished);\n    Assert.check(!this.cancelled);\n\n    // When synchronizing multiple search interfaces under a single search event\n    // (think Salesforce boxes), we need to collect all search events and send them\n    // in one single batch. So we gather all events until we idle out and then we\n    // monitor those before sending the data.\n\n    this.searchPromises.push(args.promise);\n\n    // TODO: Maybe a better way to grab the search interface?\n    let eventTarget: HTMLElement;\n    eventTarget = <HTMLElement>evt.target;\n    let searchInterface = <SearchInterface>Component.get(eventTarget, SearchInterface);\n    Assert.exists(searchInterface);\n    // TODO: Maybe a better way to grab the query controller?\n    let queryController = Component.get(eventTarget, QueryController);\n    Assert.exists(queryController);\n\n    args.promise.then((queryResults: IQueryResults) => {\n      Assert.exists(queryResults);\n      Assert.check(!this.finished);\n      if (queryResults._reusedSearchUid !== true || this.templateSearchEvent.actionCause == analyticsActionCauseList.recommendation.name) {\n        let searchEvent = <ISearchEvent>_.extend({}, this.templateSearchEvent);\n        this.fillSearchEvent(searchEvent, searchInterface, args.query, queryResults);\n        this.searchEvents.push(searchEvent);\n        this.results.push(queryResults);\n        return queryResults;\n      }\n    }).finally(() => {\n      let index = _.indexOf(this.searchPromises, args.promise);\n      this.searchPromises.splice(index, 1);\n      if (this.searchPromises.length == 0) {\n        this.flush();\n      }\n    });\n  }\n\n  public stopRecording() {\n    if (this.handler) {\n      $$(this.root).off(QueryEvents.duringQuery, this.handler);\n      $$(this.root).off(QueryEvents.duringFetchMoreQuery, this.handler);\n      this.handler = null;\n    }\n  }\n\n  private flush() {\n    if (!this.cancelled) {\n      this.stopRecording();\n      this.finished = true;\n      Assert.check(this.searchEvents.length == this.results.length);\n\n      Defer.defer(() => {\n        if (this.sendToCloud) {\n          this.endpoint.sendSearchEvents(this.searchEvents);\n        }\n        let apiSearchEvents = _.map(this.searchEvents, (searchEvent: ISearchEvent) => {\n          return APIAnalyticsBuilder.convertSearchEventToAPI(searchEvent);\n        });\n        $$(this.root).trigger(AnalyticsEvents.searchEvent, <IAnalyticsSearchEventsArgs>{ searchEvents: apiSearchEvents });\n      });\n    }\n  }\n\n  private fillSearchEvent(searchEvent: ISearchEvent, searchInterface: SearchInterface, query: IQuery, queryResults: IQueryResults) {\n    Assert.exists(searchEvent);\n    Assert.exists(searchInterface);\n    Assert.exists(query);\n    Assert.exists(queryResults);\n\n    let currentQuery = <string>searchInterface.queryStateModel.get(QueryStateModel.attributesEnum.q);\n    searchEvent.queryPipeline = queryResults.pipeline;\n    searchEvent.splitTestRunName = searchEvent.splitTestRunName || queryResults.splitTestRun;\n    searchEvent.splitTestRunVersion = searchEvent.splitTestRunVersion || (queryResults.splitTestRun != undefined ? queryResults.pipeline : undefined);\n    searchEvent.originLevel2 = searchEvent.originLevel2 || searchInterface.queryStateModel.get('t') || 'default';\n    searchEvent.queryText = currentQuery || query.q || ''; // do not log the query sent to the server if possible; it may contain added syntax depending on options\n    searchEvent.advancedQuery = query.aq || '';\n    searchEvent.didYouMean = query.enableDidYouMean;\n    searchEvent.numberOfResults = queryResults.totalCount;\n    searchEvent.responseTime = queryResults.duration;\n    searchEvent.pageNumber = (query.firstResult / query.numberOfResults);\n    searchEvent.resultsPerPage = query.numberOfResults;\n    searchEvent.searchQueryUid = queryResults.searchUid;\n    searchEvent.queryPipeline = queryResults.pipeline;\n\n    // The context_${key} format is important for the Analytics backend\n    // This is what they use to recognize a custom data that will be used internally by other coveo's service.\n    // In this case, Reveal will be the consumer of this information.\n    if (query.context != undefined) {\n      _.each(query.context, (value: string, key: string) => {\n        searchEvent.customData[`context_${key}`] = value;\n      });\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Analytics/PendingSearchEvent.ts\n **/","import {ISearchEvent} from './SearchEvent';\nimport {IAPISearchEvent} from './APISearchEvent';\nimport {IClickEvent} from './ClickEvent';\nimport {IAPIDocumentViewEvent} from './APIDocumentViewEvent';\nimport {IAPICustomEvent} from './APICustomEvent';\nimport {ICustomEvent} from './CustomEvent';\n\nexport class APIAnalyticsBuilder {\n  public static convertSearchEventToAPI(searchEvent: ISearchEvent) {\n    var apiSearchEvent: IAPISearchEvent = {\n      advancedQuery: searchEvent.advancedQuery,\n      customMetadatas: searchEvent.customData,\n      device: searchEvent.device,\n      didYouMean: searchEvent.didYouMean,\n      language: searchEvent.language,\n      pageNumber: searchEvent.pageNumber,\n      queryText: searchEvent.queryText,\n      responseTime: searchEvent.responseTime,\n      numberOfResults: searchEvent.numberOfResults,\n      resultsPerPage: searchEvent.resultsPerPage,\n      searchHub: searchEvent.originLevel1,\n      searchInterface: searchEvent.originLevel2,\n      searchQueryUid: searchEvent.searchQueryUid,\n      type: searchEvent.actionType,\n      actionCause: searchEvent.actionCause,\n      queryPipeline: searchEvent.queryPipeline,\n      splitTestRunName: searchEvent.splitTestRunName,\n      splitTestRunVersion: searchEvent.splitTestRunVersion\n    };\n    return apiSearchEvent;\n  }\n\n  public static convertDocumentViewToAPI(documentView: IClickEvent): IAPIDocumentViewEvent {\n    var apiDocumentView: IAPIDocumentViewEvent = {\n      collectionName: documentView.collectionName,\n      device: documentView.device,\n      documentPosition: documentView.documentPosition,\n      title: documentView.documentTitle,\n      documentUrl: documentView.documentUrl,\n      documentUri: documentView.documentUri,\n      documentUriHash: documentView.documentUriHash,\n      language: documentView.language,\n      responseTime: documentView.responseTime,\n      searchHub: documentView.originLevel1,\n      searchInterface: documentView.originLevel2,\n      searchQueryUid: documentView.searchQueryUid,\n      sourceName: documentView.sourceName,\n      viewMethod: documentView.viewMethod,\n      customMetadatas: documentView.customData,\n      actionCause: documentView.actionCause,\n      queryPipeline: documentView.queryPipeline,\n      splitTestRunName: documentView.splitTestRunName,\n      splitTestRunVersion: documentView.splitTestRunVersion\n    };\n    return apiDocumentView;\n  }\n\n  public static convertCustomEventToAPI(customEvent: ICustomEvent): IAPICustomEvent {\n\n    var apiCustomEvent: IAPICustomEvent = {\n      actionCause: customEvent.actionCause,\n      actionType: customEvent.actionType,\n      device: customEvent.device,\n      language: customEvent.language,\n      responseTime: customEvent.responseTime,\n      searchHub: customEvent.originLevel1,\n      searchInterface: customEvent.originLevel2,\n      customMetadatas: customEvent.customData\n    };\n    return apiCustomEvent;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rest/APIAnalyticsBuilder.ts\n **/","import {PendingSearchEvent} from './PendingSearchEvent';\nimport {AnalyticsEndpoint} from '../../rest/AnalyticsEndpoint';\nimport {$$} from '../../utils/Dom';\nimport {InitializationEvents} from '../../events/InitializationEvents';\nimport {ISearchEvent} from '../../rest/SearchEvent';\nimport {IDuringQueryEventArgs} from '../../events/QueryEvents';\nimport {IAnalyticsActionCause} from './AnalyticsActionListMeta';\nimport _ = require('underscore');\n\nexport class PendingSearchAsYouTypeSearchEvent extends PendingSearchEvent {\n  public delayBeforeSending = 5000;\n  public beforeResolve: Promise<PendingSearchAsYouTypeSearchEvent>;\n  private beforeUnloadHandler: (...args: any[]) => void;\n  private armBatchDelay = 50;\n  private toSendRightNow: () => void;\n\n  constructor(public root: HTMLElement, public endpoint: AnalyticsEndpoint, public templateSearchEvent: ISearchEvent, public sendToCloud) {\n    super(root, endpoint, templateSearchEvent, sendToCloud);\n    this.beforeUnloadHandler = () => {\n      this.onWindowUnload();\n    };\n    window.addEventListener('beforeunload', this.beforeUnloadHandler);\n    $$(root).on(InitializationEvents.nuke, () => this.handleNuke());\n  }\n\n  protected handleDuringQuery(e: Event, args: IDuringQueryEventArgs) {\n    var event = _.clone(e);\n    this.beforeResolve = new Promise((resolve) => {\n      this.toSendRightNow = () => {\n        if (!this.isCancelledOrFinished()) {\n          resolve(this);\n          super.handleDuringQuery(event, args);\n        }\n      };\n      _.delay(() => {\n        this.toSendRightNow();\n      }, this.delayBeforeSending);\n    });\n  }\n\n  public sendRightNow() {\n    if (this.toSendRightNow) {\n      this.toSendRightNow();\n    }\n  }\n\n  public modifyCustomData(key: string, newData: any) {\n    _.each(this.searchEvents, (searchEvent: ISearchEvent) => {\n      searchEvent.customData[key] = newData;\n    });\n    if (!this.templateSearchEvent.customData) {\n      this.templateSearchEvent.customData = {};\n    }\n    this.templateSearchEvent.customData[key] = newData;\n  }\n\n  public modifyEventCause(newCause: IAnalyticsActionCause) {\n    _.each(this.searchEvents, (searchEvent: ISearchEvent) => {\n      searchEvent.actionCause = newCause.name;\n      searchEvent.actionType = newCause.type;\n    });\n    this.templateSearchEvent.actionCause = newCause.name;\n    this.templateSearchEvent.actionType = newCause.type;\n  }\n\n  public stopRecording() {\n    super.stopRecording();\n    if (this.beforeUnloadHandler) {\n      window.removeEventListener('beforeunload', this.beforeUnloadHandler);\n      this.beforeUnloadHandler = undefined;\n    }\n  }\n\n  private handleNuke() {\n    window.removeEventListener('beforeunload', this.beforeUnloadHandler);\n  }\n\n  private onWindowUnload() {\n    if (!this.isCancelledOrFinished()) {\n      this.armBatchDelay = 0;\n      this.sendRightNow();\n    }\n  }\n\n  private isCancelledOrFinished() {\n    if (!this.cancelled) {\n      if (this.finished) {\n        this.cancel();\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return true;\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Analytics/PendingSearchAsYouTypeSearchEvent.ts\n **/","import {IAnalyticsClient} from './AnalyticsClient';\nimport {PendingSearchEvent} from './PendingSearchEvent';\nimport {IAnalyticsActionCause, IAnalyticsDocumentViewMeta} from './AnalyticsActionListMeta';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {ITopQueries} from '../../rest/TopQueries';\n\nexport class MultiAnalyticsClient implements IAnalyticsClient {\n  public isContextual = false;\n\n  constructor(private analyticsClients: IAnalyticsClient[] = []) {\n  }\n\n  public isActivated(): boolean {\n    return _.some(this.analyticsClients, (analyticsClient: IAnalyticsClient) => analyticsClient.isActivated());\n  }\n\n  public getCurrentEventCause(): string {\n    return _.find(_.map(this.analyticsClients, (analyticsClient: IAnalyticsClient) => analyticsClient.getCurrentEventCause()), (currentEventCause: string) => currentEventCause != null);\n  }\n\n  public getCurrentEventMeta(): { [key: string]: any } {\n    return _.find(_.map(this.analyticsClients, (analyticsClient: IAnalyticsClient) => analyticsClient.getCurrentEventMeta()), (currentEventMeta: { [key: string]: any }) => currentEventMeta != null);\n  }\n\n  public logSearchEvent<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta) {\n    _.each(this.analyticsClients, (analyticsClient: IAnalyticsClient) => analyticsClient.logSearchEvent<TMeta>(actionCause, meta));\n  }\n\n  public logSearchAsYouType<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta) {\n    _.each(this.analyticsClients, (analyticsClient: IAnalyticsClient) => analyticsClient.logSearchEvent<TMeta>(actionCause, meta));\n  }\n\n  public logClickEvent(actionCause: IAnalyticsActionCause, meta?: IAnalyticsDocumentViewMeta, result?: IQueryResult, element?: HTMLElement) {\n    _.each(this.analyticsClients, (analyticsClient: IAnalyticsClient) => analyticsClient.logClickEvent(actionCause, meta, result, element));\n  }\n\n  public logCustomEvent<TMeta>(actionCause: IAnalyticsActionCause, meta?: TMeta, element?: HTMLElement) {\n    _.each(this.analyticsClients, (analyticsClient: IAnalyticsClient) => analyticsClient.logCustomEvent<TMeta>(actionCause, meta, element));\n  }\n\n  public getTopQueries(params: ITopQueries): Promise<string[]> {\n    return Promise.all(_.map(this.analyticsClients, (client) => {\n      return client.getTopQueries(params);\n    }))\n      .then((values: string[][]) => {\n        return this.mergeTopQueries(values, params.pageSize);\n      });\n  }\n\n  public getCurrentVisitIdPromise(): Promise<string> {\n    return _.first(this.analyticsClients).getCurrentVisitIdPromise();\n  }\n\n  public getCurrentVisitId(): string {\n    return _.first(this.analyticsClients).getCurrentVisitId();\n  }\n\n  public sendAllPendingEvents(): void {\n    _.each(this.analyticsClients, (analyticsClient: IAnalyticsClient) => analyticsClient.sendAllPendingEvents());\n  }\n\n  public warnAboutSearchEvent(): void {\n    _.each(this.analyticsClients, (analyticsClient: IAnalyticsClient) => analyticsClient.warnAboutSearchEvent());\n  }\n\n  public cancelAllPendingEvents(): void {\n    _.each(this.analyticsClients, (analyticsClient: IAnalyticsClient) => analyticsClient.cancelAllPendingEvents());\n  }\n\n  public getPendingSearchEvent(): PendingSearchEvent {\n    return _.first(this.analyticsClients).getPendingSearchEvent();\n  }\n\n  private mergeTopQueries(values: string[][], pageSize: number = 5) {\n    return _.chain(values)\n      .flatten()\n      .first(pageSize)\n      .value();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Analytics/MultiAnalyticsClient.ts\n **/","import {LiveAnalyticsClient} from './LiveAnalyticsClient';\nimport {IAnalyticsActionCause, analyticsActionCauseList} from './AnalyticsActionListMeta';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {AnalyticsEndpoint} from '../../rest/AnalyticsEndpoint';\nimport {Component} from '../Base/Component';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {Recommendation} from '../Recommendation/Recommendation';\nimport {SearchInterface} from '../SearchInterface/SearchInterface';\n\nexport class RecommendationAnalyticsClient extends LiveAnalyticsClient {\n\n  private recommendation: Recommendation;\n\n  constructor(public endpoint: AnalyticsEndpoint,\n    public rootElement: HTMLElement,\n    public userId: string,\n    public userDisplayName: string,\n    public anonymous: boolean,\n    public splitTestRunName: string,\n    public splitTestRunVersion: string,\n    public originLevel1: string,\n    public sendToCloud: boolean,\n    public bindings: IComponentBindings) {\n    super(endpoint, rootElement, userId, userDisplayName, anonymous, splitTestRunName, splitTestRunVersion, originLevel1, sendToCloud);\n    this.recommendation = <Recommendation>this.bindings.searchInterface;\n  }\n\n  public logSearchEvent<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta) {\n    if (actionCause == analyticsActionCauseList.interfaceLoad) {\n      actionCause = analyticsActionCauseList.recommendationInterfaceLoad;\n    }\n    super.logSearchEvent(actionCause, meta);\n  }\n\n  public logClickEvent<TMeta>(actionCause: IAnalyticsActionCause, meta: TMeta, result: IQueryResult, element: HTMLElement) {\n    if (actionCause == analyticsActionCauseList.documentOpen) {\n      actionCause = analyticsActionCauseList.recommendationOpen;\n    }\n\n    super.logClickEvent(actionCause, meta, result, element);\n\n    if (this.recommendation.mainQuerySearchUID) {\n      // We log a second click associated with the main interface query to tell the analytics that the query was a success.\n      let mainInterface = <SearchInterface>Component.get(this.recommendation.options.mainSearchInterface, SearchInterface);\n      result.queryUid = this.recommendation.mainQuerySearchUID;\n      mainInterface.usageAnalytics.logClickEvent(actionCause, meta, result, element);\n    }\n  }\n\n  protected getOriginLevel2(element: HTMLElement): string {\n    return this.recommendation.getId();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Analytics/RecommendationAnalyticsClient.ts\n **/","import {Initialization} from './Initialization';\n\ninterface IWindow {\n  $: any;\n}\n\nexport var jQueryInstance: JQueryStatic;\n\nif (!initCoveoJQuery()) {\n  // Adding a check in case jQuery was added after the jsSearch\n  // Since this event listener is registered before the Coveo.init call, JQuery should always be initiated before the Coveo.init call  \n  document.addEventListener('DOMContentLoaded', () => {\n    initCoveoJQuery();\n  });\n}\n\nexport function initCoveoJQuery() {\n  if (!jQueryIsDefined()) {\n    return false;\n  }\n\n  jQueryInstance = getJQuery();\n\n  if (window['Coveo'] == undefined) {\n    window['Coveo'] = {};\n  }\n  if (window['Coveo']['$'] == undefined) {\n    window['Coveo']['$'] = jQueryInstance;\n  }\n\n  jQueryInstance.fn.coveo = function (...args: any[]) {\n    var returnValue: any;\n    this.each((index: number, element: HTMLElement) => {\n      var returnValueForThisElement: any;\n      if (_.isString(args[0])) {\n        var token = <string>args[0];\n        returnValueForThisElement = Initialization.dispatchNamedMethodCallOrComponentCreation(token, element, args.slice(1));\n      } else {\n        // Invoking with no method name is a shortcut for the 'get' method (from Component).\n        returnValueForThisElement = Initialization.dispatchNamedMethodCall('get', element, args);\n      }\n\n      // Keep only the first return value we encounter\n      returnValue = returnValue || returnValueForThisElement;\n    });\n    return returnValue;\n  };\n\n  return true;\n}\n\nexport function jQueryIsDefined(): boolean {\n  return jQueryDefinedOnWindow() || jQueryDefinedOnCoveoObject();\n}\n\nfunction jQueryDefinedOnCoveoObject(): boolean {\n  return window['Coveo'] != undefined && window['Coveo']['$'] != undefined;\n}\n\nfunction jQueryDefinedOnWindow(): boolean {\n  return window['$'] != undefined && window['$'].fn != undefined && window['$'].fn.jquery != undefined;\n}\n\nfunction getJQuery(): JQueryStatic {\n  let jQueryInstance: JQueryStatic;\n  if (window['$']) {\n    jQueryInstance = window['$'];\n  } else {\n    jQueryInstance = window['Coveo']['$'];\n  }\n  return jQueryInstance;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Base/CoveoJQuery.ts\n **/","export {TemplateHelpers} from './ui/Templates/TemplateHelpers';\nexport {TemplateCache} from './ui/Templates/TemplateCache';\nexport {HtmlTemplate} from './ui/Templates/HtmlTemplate';\nexport {UnderscoreTemplate} from './ui/Templates/UnderscoreTemplate';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/TemplatesModules.ts\n **/","import {Assert} from '../../misc/Assert';\nimport {UnderscoreTemplate} from './UnderscoreTemplate';\nimport {Utils} from '../../utils/Utils';\n\n/**\n * A function that describe a templates.\n *\n * It can take any number of arguments, but needs to return a simple string.\n */\nexport interface ITemplateHelperFunction {\n  (...args: any[]): string;\n}\n\n/**\n * Allow to register and return template helpers (essentially: Utility functions that can be executed in the context of a template to render complex elements).\n */\nexport class TemplateHelpers {\n  private static helpers: { [templateName: string]: ITemplateHelperFunction; } = {};\n  public static fieldHelpers: string[] = [];\n\n  static registerFieldHelper<T1>(name: string, helper: (value: string, options?: any) => string) {\n    TemplateHelpers.fieldHelpers.push(name);\n    TemplateHelpers.registerTemplateHelper(name, helper);\n  }\n\n  static registerTemplateHelper<T1>(name: string, helper: (arg1: T1) => string);\n  static registerTemplateHelper<T1, T2>(name: string, helper: (arg1: T1, arg2: T2) => string);\n  static registerTemplateHelper<T1, T2, T3>(name: string, helper: (arg1: T1, arg2: T2, arg3: T3) => string);\n  static registerTemplateHelper<T1, T2, T3, T4>(name: string, helper: (arg1: T1, arg2: T2, arg3: T3, arg4: T4) => string);\n  static registerTemplateHelper<T1, T2, T3, T4, T5>(name: string, helper: (arg1: T1, arg2: T2, arg3: T3, arg4: T4, arg5: T5) => string);\n  /**\n   * Register a new helper in the framework, that will be available inside all templates execution context.\n   * @param name\n   * @param helper\n   */\n  static registerTemplateHelper(name: string, helper: ITemplateHelperFunction) {\n    Assert.isNonEmptyString(name);\n    Assert.exists(helper);\n\n    TemplateHelpers.registerTemplateHelperInUnderscore(name, helper);\n    TemplateHelpers.helpers[name] = helper;\n  }\n\n  /**\n   * Return a template helper function\n   * @param name\n   * @returns {any}\n   */\n  static getHelper(name: string): ITemplateHelperFunction {\n    return Utils.getCaseInsensitiveProperty(TemplateHelpers.helpers, name);\n  }\n\n  /**\n   * Get all available helpers\n   * @returns {{}}\n   */\n  static getHelpers() {\n    return TemplateHelpers.helpers;\n  }\n\n  private static registerTemplateHelperInUnderscore(name: string, helper: ITemplateHelperFunction) {\n    Assert.isNonEmptyString(name);\n    Assert.exists(helper);\n    UnderscoreTemplate.registerTemplateHelper(name, helper);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Templates/TemplateHelpers.ts\n **/","import {TemplateHelpers, ITemplateHelperFunction} from './TemplateHelpers';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {IHighlight, IHighlightPhrase, IHighlightTerm} from '../../rest/Highlight';\nimport {HighlightUtils, StringAndHoles} from '../../utils/HighlightUtils';\nimport {IStreamHighlightOptions} from '../../utils/StreamHighlightUtils';\nimport {IDateToStringOptions, DateUtils} from '../../utils/DateUtils';\nimport {ICurrencyToStringOptions, CurrencyUtils} from '../../utils/CurrencyUtils';\nimport {IAnchorUtilsOptions, IImageUtilsOptions, AnchorUtils, ImageUtils} from '../../utils/HtmlUtils';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {IIconOptions, Icon} from '../Icon/Icon';\nimport {Utils} from '../../utils/Utils';\nimport {StringUtils} from '../../utils/StringUtils';\nimport {TimeSpan, ITimeSpanUtilsOptions} from '../../utils/TimeSpanUtils';\nimport {EmailUtils} from '../../utils/EmailUtils';\nimport {QueryUtils} from '../../utils/QueryUtils';\nimport {DeviceUtils} from '../../utils/DeviceUtils';\nimport {TemplateCache} from './TemplateCache';\nimport {$$} from '../../utils/Dom';\nimport {SearchEndpoint} from '../../rest/SearchEndpoint';\nimport {ResultList} from '../ResultList/ResultList';\nimport {StreamHighlightUtils} from '../../utils/StreamHighlightUtils';\nimport Globalize = require('globalize');\nimport {IStringMap} from '../../rest/GenericParam';\nimport {Quickview} from '../Quickview/Quickview';\n\n/**\n * The core template helpers provided by default.\n *\n * Example usage (using Underscore templating):\n *\n * ```\n * <%= helperName(argument1, argument2) %>\n * ```\n */\nexport interface ICoreHelpers {\n  /**\n   * Shortens a string so that its length does not exceed a specific number of\n   * characters. An ellipsis is appended to the string if it exceeds the\n   * maximum length.\n   *\n   * - `value`: The string to shorten.\n   * - `length`: The maximum length of the resulting string.\n   * - `highlights`: Optional. If provided, the string will be highlighted\n   *   using this highlight information.\n   * - `cssClass`: Optional. When highlighting, the name of the CSS class to use.\n   */\n  shorten: (content: string, length: number, highlights?: IHighlight[], cssClass?: string) => string;\n  /**\n   * Shortens a string using an algorithm suitable for file paths. The helper\n   * will insert an ellipsis in the string where text has been removed when\n   * the path exceeds the maximum length.\n   *\n   * - `value`: The path to shorten.\n   * - `length`: The maximum length of the resulting string.\n   * - `highlights`: Optional. If provided, the string will be highlighted using\n   *   this highlight information.\n   * - `cssClass`: Optional. When highlighting, the name of the CSS class to use.\n   */\n  shortenPath: (content: string, length: number, highlights?: IHighlight[], cssClass?: string) => string;\n  /**\n   * Shortens a string using an algorithm suitable for URIs. The helper will\n   * insert an ellipsis in the string where text has been removed when the URI\n   * exceeds the maximum length.\n   *\n   * - `value`: The URI to shorten.\n   * - `length`: The maximum length of the resulting string.\n   * - `highlights`: Optional. If provided, the string will be highlighted\n   *   using this highlight information.\n   * - `cssClass`: Optional. When highlighting, the name of the CSS class to use.\n   */\n  shortenUri: (content: string, length: number, highlights?: IHighlight[], cssClass?: string) => string;\n  /**\n   * Highlights a string using the provided highlight information.\n   *\n   * - `highlights`: The highlight information to use.\n   * - `cssClass`: Optional. The name of the CSS class to use for highlighting.\n   */\n  highlight: (content: string, highlights?: IHighlight[], cssClass?: string) => string;\n  /**\n   * This helper highlights the provided terms in a given string.<br/>\n   * By default, the terms to highlight are the current query and the\n   * associated stemming words from the index.\n   *\n   * - `content`: The string content to highlight\n   * - `termsToHighlight`: The terms to highlight (see {@link IHighlightTerm})\n   * - `phraseToHighlight`: The phrases to highlight (see {@link IHighlightPhrase})\n   * - `options`: Optional. The options defined below as {@link IStreamHighlightOptions}\n   */\n  highlightStreamText: (content: string,\n    termsToHighlight: IHighlightTerm,\n    phrasesToHighlight: IHighlightPhrase,\n    options?: IStreamHighlightOptions) => string;\n  /**\n   * This helper operates exactly like the {@link highlightStreamText} helper, except\n   * that it should be used to highlight HTML content. The helper takes care\n   * of not highlighting the HTML markup.\n   *\n   * - `content`: The string content to highlight\n   * - `termsToHighlight`: The terms to highlight (see {@link IHighlightTerm})\n   * - `phraseToHighlight`: The phrases to highlight (see {@link IHighlightPhrase})\n   * - `options`: Optional. The options defined below as {@link IStreamHighlightOptions}\n   */\n  highlightStreamHTML: (content: string,\n    termsToHighlight: IHighlightTerm,\n    phrasesToHighlight: IHighlightPhrase,\n    options?: IStreamHighlightOptions) => string;\n  /**\n   * Formats a numeric value using the format string.\n   *\n   * - `value`: The numeric value to format.\n   * - `format`: The format string to use. The options available are defined by\n   *   the [Globalize](https://github.com/klaaspieter/jquery-global#numbers) library.\n   */\n  number: (content: string, format: string) => string;\n  /**\n   * Formats a date value to a date-only string using the specified options.\n   *\n   * - `value`: The Date value to format.\n   * - `options`: The options to use (see IDateToStringOptions).\n   */\n  date: (content: any, options?: IDateToStringOptions) => string;\n  /**\n   * Formats a date value to a time-only string using the sepcified options.\n   *\n   * - `value`: The Date value to format.\n   * - `options`: The options to use (see IDateToStringOptions).\n   */\n  time: (content: any, options?: IDateToStringOptions) => string;\n  /**\n   * Formats a date value to a date and time string using the specified\n   * options.\n   *\n   * - `value`: The Date value to format.\n   * - `options`: The options to use (see IDateToStringOptions).\n   */\n  dateTime: (content: any, options?: IDateToStringOptions) => string;\n  /**\n   * Formats a currency value to a string using the specified options.\n   *\n   * - `value`: The number value to format.\n   * - `options`: The options to use (see ICurrencyToStringOptions).\n   */\n  currency: (content: any, options?: ICurrencyToStringOptions) => string;\n  /**\n   * Formats a date value to a date and time string using options suitable for\n   * email dates\n   *\n   * - `value`: The Date value to format.\n   * - `options`: The options to use (see IDateToStringOptions).\n   */\n  emailDateTime: (content: any, options?: IDateToStringOptions) => string;\n  /**\n   * Renders one or several email values in `mailto:` hyperlinks.\n   *\n   * - `value`: The string that contains a list of semicolon-separated email\n   *   values. When multiple values are passed, each value is displayed in a\n   *   separate hyperlink.\n   * - `companyDomain`: The string that contains your own domain (e.g.:\n   *   coveo.com). When specified, this parameter allows email addresses\n   *   coming from your own domain to be displayed in a shortened format\n   *   (e.g.: Full Name), whereas email addresses coming from an external\n   *   domain will be displayed in an extended format (e.g.: Full Name\n   *   (domain.com)). If this parameter is not specified, then the shortened\n   *   format will automatically be used.\n   * - `me`: The string that contains the current username. If it is\n   *   specified, then the email address containing the current username will\n   *   be replaced by the localized string 'Me'.\n   * - `lengthLimit`: The number of email addresses that you want to display\n   *   before an ellipse is added (e.g.: 'From Joe, John and 5 others').<br/>\n   *   The default value is 2.\n   * - `truncateName`: When the username is available from the email address,\n   *   then you can specify if you want to truncate the full name. (e.g.:\n   *   'John S.' instead of 'John Smith').<br/>\n   *   The default value is `false`.\n   */\n  email: (value: string, companyDomain?: string, me?: string, lengthLimit?: number, truncateName?: boolean) => string;\n  /**\n   * Formats a clickable HTML link (`<a>`).\n   *\n   * - `href`: The link URI\n   * - `options`: The options to use (see {@link IAnchorUtilsOptions})\n   */\n  anchor: (href: string, options?: IAnchorUtilsOptions) => string;\n  /**\n   * Formats an HTML image tag (`<img>`).\n   *\n   * - `src`: The image source URI\n   * - `options`: The options to use (see {@link IImageUtilsOptions})\n   */\n  image: (src: string, options?: IImageUtilsOptions) => string;\n  /**\n   * Formats an HTML image tag (`<img>`), and automatically uses the result\n   * object to query the REST API to get the thumbnail for this result. For\n   * example, this can be used to great effect when designing a template\n   * showing users or preview of files.\n   * - `result`: The current result object inside your template. In\n   *   underscore, it is referenced as `obj`. Optional, by default the result\n   *   will be resolved automatically from your current template function (\n   *   Meaning the nearest result in the current call stack execution inside\n   *   your template)\n   * - `endpoint`: Optional. The name of the endpoint to use for your\n   *   thumbnail. Default is default.\n   * - `options`: The options to use (see {@link IImageUtilsOptions}).\n   */\n  thumbnail: (result?: IQueryResult, endpoint?: string, options?: IImageUtilsOptions) => string;\n  /**\n   * Generates an icon based on the file type of the current result. The icon\n   * will be contained inside a `<span>` element with the appropriate CSS\n   * class.\n   *\n   * - `result`: The current result object inside your template. In\n   *   underscore, it is referenced as `obj`. *Optional*, by default the result\n   *   will be resolved automatically from your current template function (\n   *   Meaning the nearest result in the current call stack execution inside\n   *   your template)\n   * - `options`: The options to use (see {@link IIconOptions}).\n   */\n  fromFileTypeToIcon: (result?: IQueryResult, options?: IIconOptions) => string;\n  /**\n   * Loads a partial template in the current template, by passing the ID of\n   * the template to load, the condition for which this template should be\n   * loaded, and the context object (the object that the loaded template will\n   * use as its data). By default, the context object will be the same as the\n   * template that called this helper function. So, for example, in a\n   * ResultList Component, the contextObject would, by default, be the Query\n   * Results.\n   *\n   * - `templateId`: the ID of the template to load.\n   * - `condition`: The boolean condition to determine if this template should\n   *   load for this result set. Most of the time this would be a condition of\n   *   the type if raw.somefield == 'something'.\n   * - `contextObject`: The object that should be used by the loaded template\n   *   as its contextObject.\n   */\n  loadTemplate: (templateId: string, condition?: boolean, contextObject?: any) => string;\n}\n\nexport class CoreHelpers {\n  public constructor() {\n  }\n\n  /**\n   * For backward compatibility reason, the \"global\" template helper should be available under the\n   * coveo namespace.\n   * @param scope\n   */\n  public static exportAllHelpersGlobally(scope: IStringMap<any>) {\n    _.each(TemplateHelpers.getHelpers(), (helper: ITemplateHelperFunction, name: string) => {\n      if (scope[name] == undefined) {\n        scope[name] = helper;\n      }\n    });\n  }\n}\n\nTemplateHelpers.registerFieldHelper('javascriptEncode', (value: string) => {\n  return Utils.exists(value) ? StringUtils.javascriptEncode(value) : undefined;\n});\n\nTemplateHelpers.registerTemplateHelper('shorten', (content: string, length: number, highlights?: IHighlight[], cssClass?: string) => {\n  var strAndHoles = StringAndHoles.shortenString(content, length, '...');\n\n  if (Utils.exists(highlights)) {\n    return HighlightUtils.highlightString(strAndHoles.value, highlights, strAndHoles.holes, cssClass || 'highlight');\n  } else {\n    return strAndHoles.value;\n  }\n});\n\nTemplateHelpers.registerTemplateHelper('shortenPath', (content: string, length: number, highlights?: IHighlight[], cssClass?: string) => {\n  var strAndHoles = StringAndHoles.shortenPath(content, length);\n\n  if (Utils.exists(highlights)) {\n    return HighlightUtils.highlightString(strAndHoles.value, highlights, strAndHoles.holes, cssClass || 'highlight');\n  } else {\n    return strAndHoles.value;\n  }\n});\n\nTemplateHelpers.registerTemplateHelper('shortenUri', (content: string, length: number, highlights?: IHighlight[], cssClass?: string) => {\n  var strAndHoles = StringAndHoles.shortenUri(content, length);\n\n  if (Utils.exists(highlights)) {\n    return HighlightUtils.highlightString(strAndHoles.value, highlights, strAndHoles.holes, cssClass || 'highlight');\n  } else {\n    return strAndHoles.value;\n  }\n});\n\nTemplateHelpers.registerTemplateHelper('highlight', (content: string, highlights: IHighlight[], cssClass?: string) => {\n  if (Utils.exists(content)) {\n    if (Utils.exists(highlights)) {\n      return HighlightUtils.highlightString(content, highlights, null, cssClass || 'highlight');\n    } else {\n      return content;\n    }\n  } else {\n    return undefined;\n  }\n});\n\nTemplateHelpers.registerTemplateHelper('highlightStreamText', (content: string, termsToHighlight = resolveTermsToHighlight(), phrasesToHighlight = resolvePhrasesToHighlight(), opts?: IStreamHighlightOptions) => {\n  if (Utils.exists(content) && Utils.exists(termsToHighlight) && Utils.exists(phrasesToHighlight)) {\n    if (Utils.isNonEmptyArray(_.keys(termsToHighlight)) || Utils.isNonEmptyArray(_.keys(phrasesToHighlight))) {\n      return StreamHighlightUtils.highlightStreamText(content, termsToHighlight, phrasesToHighlight, opts);\n    } else {\n      return content;\n    }\n  } else {\n    return undefined;\n  }\n});\n\nTemplateHelpers.registerTemplateHelper('highlightStreamHTML', (content: string, termsToHighlight = resolveTermsToHighlight(), phrasesToHighlight = resolvePhrasesToHighlight(), opts?: IStreamHighlightOptions) => {\n  if (Utils.exists(content) && Utils.exists(termsToHighlight) && Utils.exists(phrasesToHighlight)) {\n    if (Utils.isNonEmptyArray(termsToHighlight)) {\n      return StreamHighlightUtils.highlightStreamHTML(content, termsToHighlight, phrasesToHighlight, opts);\n    } else {\n      return content;\n    }\n  } else {\n    return undefined;\n  }\n});\n\nTemplateHelpers.registerFieldHelper('number', (value: any, options?: any) => {\n  var numberValue = Number(value);\n  if (Utils.exists(value)) {\n    if (_.isString(options)) {\n      return StringUtils.htmlEncode(Globalize.format(numberValue, <string>options));\n    } else {\n      return StringUtils.htmlEncode(numberValue.toString());\n    }\n  } else {\n    return undefined;\n  }\n});\n\nTemplateHelpers.registerFieldHelper('date', (value: any, options?: IDateToStringOptions) => {\n  return DateUtils.dateToString(DateUtils.convertFromJsonDateIfNeeded(value), options);\n});\n\nTemplateHelpers.registerFieldHelper('time', (value: any, options?: IDateToStringOptions) => {\n  return DateUtils.timeToString(DateUtils.convertFromJsonDateIfNeeded(value), options);\n});\n\nTemplateHelpers.registerFieldHelper('dateTime', (value: any, options?: IDateToStringOptions) => {\n  return DateUtils.dateTimeToString(DateUtils.convertFromJsonDateIfNeeded(value), options);\n});\n\nTemplateHelpers.registerFieldHelper('emailDateTime', (value: any, options?: IDateToStringOptions) => {\n  var defaultOptions = <IDateToStringOptions>{};\n  defaultOptions.includeTimeIfThisWeek = true;\n  var optionsToUse = <IDateToStringOptions>_.extend(options, defaultOptions);\n  return value ? DateUtils.dateTimeToString(DateUtils.convertFromJsonDateIfNeeded(value), optionsToUse) : undefined;\n});\n\nTemplateHelpers.registerFieldHelper('currency', (value: any, options?: ICurrencyToStringOptions) => {\n  return CurrencyUtils.currencyToString(value, options);\n});\n\nTemplateHelpers.registerFieldHelper('timeSpan', (value: any, options: ITimeSpanUtilsOptions = { isMilliseconds: false }) => {\n  return new TimeSpan(value, options.isMilliseconds).getHHMMSS();\n});\n\nTemplateHelpers.registerFieldHelper('email', (value: any, ...args: any[]) => {\n  // support old arguments (value: any, companyDomain: string, me: string, lengthLimit = 2, truncateName = false)\n  var companyDomain: string;\n  var me: string;\n  var lengthLimit: number;\n  var truncateName: boolean;\n  if (_.isObject(args[0])) {\n    companyDomain = args[0]['companyDomain'];\n    me = args[0]['me'];\n    lengthLimit = args[0]['lengthLimit'];\n    truncateName = args[0]['truncateName'];\n  } else {\n    companyDomain = args[0];\n    me = args[1];\n    lengthLimit = args[2];\n    truncateName = args[3];\n  }\n  if (lengthLimit == undefined) {\n    lengthLimit = 2;\n  }\n  if (truncateName == undefined) {\n    truncateName = false;\n  }\n  if (_.isString(value)) {\n    var listOfAddresses = EmailUtils.splitSemicolonSeparatedListOfEmailAddresses(<string>value);\n    return EmailUtils.emailAddressesToHyperlinks(listOfAddresses, companyDomain, me, lengthLimit, truncateName);\n  } else if (_.isArray(value)) {\n    return EmailUtils.emailAddressesToHyperlinks(<string[]>value, companyDomain, me, lengthLimit, truncateName);\n  } else {\n    return undefined;\n  }\n});\n\nTemplateHelpers.registerTemplateHelper('excessEmailToggle', (target: HTMLElement) => {\n  $$(target).removeClass('coveo-active');\n  if ($$(target).hasClass('coveo-emails-excess-collapsed')) {\n    _.each($$(target).siblings('.coveo-emails-excess-expanded'), (sibling) => {\n      $$(sibling).addClass('coveo-active');\n    });\n  } else if ($$(target).hasClass('coveo-hide-expanded')) {\n    $$(target.parentElement).addClass('coveo-inactive');\n    _.each($$(target.parentElement).siblings('.coveo-emails-excess-collapsed'), (sibling) => {\n      $$(sibling).addClass('coveo-active');\n    });\n  }\n  return undefined;\n});\n\nTemplateHelpers.registerFieldHelper('anchor', (href: string, options?: IAnchorUtilsOptions) => {\n  return AnchorUtils.buildAnchor(href, options);\n});\n\nTemplateHelpers.registerFieldHelper('image', (src: string, options?: IImageUtilsOptions) => {\n  return ImageUtils.buildImage(src, options);\n});\n\nTemplateHelpers.registerTemplateHelper('thumbnail', (result: IQueryResult = resolveQueryResult(), endpoint: string = 'default', options?: IImageUtilsOptions) => {\n  if (QueryUtils.hasThumbnail(result)) {\n    return ImageUtils.buildImageFromResult(result, SearchEndpoint.endpoints[endpoint], options);\n  }\n});\n\nTemplateHelpers.registerTemplateHelper('fromFileTypeToIcon', (result: IQueryResult = resolveQueryResult(), options: IIconOptions = {}) => {\n  return Icon.createIcon(result, options).outerHTML;\n});\n\nTemplateHelpers.registerTemplateHelper('attrEncode', (value: string) => {\n  return ('' + value)/* Forces the conversion to string. */\n    .replace(/&/g, '&amp;')/* This MUST be the 1st replacement. */\n    .replace(/'/g, '&apos;')/* The 4 other predefined entities, required. */\n    .replace(/'/g, '&quot;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n});\n\nTemplateHelpers.registerTemplateHelper('templateFields', (result: IQueryResult = resolveQueryResult()) => {\n  var rows: string[] = [];\n  if (result.fields != null) {\n    _.forEach(result.fields, (tableField: any) => {\n      var tr = $$('tr');\n      _.forEach(tableField, (value: any, key: string) => {\n        if (_.isObject(value)) {\n          tr.setAttribute(ComponentOptions.attrNameFromName(key), JSON.stringify(value));\n        } else {\n          tr.setAttribute(ComponentOptions.attrNameFromName(key), value);\n        }\n      });\n      return rows.push(tr.el.outerHTML);\n    });\n  }\n  return rows.join('');\n}\n);\n\nTemplateHelpers.registerTemplateHelper('loadTemplates', (templatesToLoad: { [id: string]: any }, once = true) => {\n  var ret = '';\n  var data = resolveQueryResult();\n  var atLeastOneWasLoaded = false;\n  var toLoad = templatesToLoad;\n  var defaultTmpl;\n  _.each(templatesToLoad, (value, key?, obj?) => {\n    if (value == 'default') {\n      defaultTmpl = key;\n    }\n  });\n  if (defaultTmpl != undefined) {\n    toLoad = _.omit(templatesToLoad, defaultTmpl);\n  }\n  _.each(toLoad, (condition, id?, obj?) => {\n    if (!atLeastOneWasLoaded || !once) {\n      atLeastOneWasLoaded = atLeastOneWasLoaded || condition;\n      ret += TemplateHelpers.getHelper('loadTemplate')(id, condition, data);\n    }\n  });\n  if (!atLeastOneWasLoaded && defaultTmpl != undefined) {\n    ret += TemplateHelpers.getHelper('loadTemplate')(defaultTmpl, true, data);\n  }\n  return ret;\n});\n\nvar byteMeasure = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB'];\n\nTemplateHelpers.registerFieldHelper('size', (value: any, options?: { base?: number; presision?: number; }) => {\n  var size = Number(value);\n  var presision = (options != null && options.presision != null ? options.presision : 2);\n  var base = (options != null && options.base != null ? options.base : 0);\n  while (size > 1024 && base + 1 < byteMeasure.length) {\n    size /= 1024;\n    base++;\n  }\n  size = Math.floor(size * Math.pow(10, presision)) / Math.pow(10, presision);\n  return size + ' ' + byteMeasure[base];\n});\n\nTemplateHelpers.registerTemplateHelper('loadTemplate', (id: string, condition: boolean = true, data?: any) => {\n  if (Utils.isNullOrUndefined(data)) {\n    data = resolveQueryResult();\n  }\n  if (condition) {\n    return TemplateCache.getTemplate(id).instantiateToString(data, false);\n  }\n  return '';\n});\n\nTemplateHelpers.registerTemplateHelper('encodeCarriageReturn', (data: string) => {\n  if (Utils.isNullOrUndefined(data)) {\n    return undefined;\n  } else {\n    return StringUtils.encodeCarriageReturn(data);\n  }\n});\n\nTemplateHelpers.registerTemplateHelper('isMobileDevice', () => {\n  return DeviceUtils.isMobileDevice() ? DeviceUtils.getDeviceName() : null;\n});\n\nfunction resolveQueryResult(): IQueryResult {\n  return ResultList.resultCurrentlyBeingRendered || Quickview.resultCurrentlyBeingRendered;\n}\n\nfunction resolveTermsToHighlight(): IHighlightTerm {\n  let currentQueryResult = resolveQueryResult();\n  if (currentQueryResult) {\n    return currentQueryResult.termsToHighlight;\n  }\n}\n\nfunction resolvePhrasesToHighlight(): IHighlightPhrase {\n  let currentQueryResult = resolveQueryResult();\n  if (currentQueryResult) {\n    return currentQueryResult.phrasesToHighlight;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Templates/CoreHelpers.ts\n **/","import {Component} from '../Base/Component';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {Assert} from '../../misc/Assert';\nimport {QueryUtils} from '../../utils/QueryUtils';\nimport {Initialization} from '../Base/Initialization';\nimport {Utils} from '../../utils/Utils';\nimport {FileTypes, IFileTypeInfo} from '../Misc/FileTypes';\nimport {Quickview} from '../Quickview/Quickview';\nimport {$$} from '../../utils/Dom';\n\nexport interface IIconOptions {\n  value?: string;\n  small?: boolean;\n  withLabel?: boolean;\n  labelValue?: string;\n}\n\n/**\n * An icon component is a Result template component which outputs the corresponding icon for a given filetype. It uses the\n * available icons in the framework, and if no suitable one are found, it fallback on a generic icon.\n */\nexport class Icon extends Component {\n  static ID = 'Icon';\n\n  /**\n   * The options for the component\n   * @componentOptions\n   */\n  static options: IIconOptions = {\n    /**\n     * Setting this value will tell the `Icon` component to output this value as its CSS class, instead of the auto-selected one.<br/>\n     * Default is `undefined`, and the framework will determine an icon from the result filetype.\n     */\n    value: ComponentOptions.buildIconOption(),\n    /**\n     * Setting this value to true will output the smaller version of the auto-generated icon.<br/>\n     * Default is `false`.\n     */\n    small: ComponentOptions.buildBooleanOption(),\n    /**\n     * Setting this to true will force the caption/label to appear.<br/>\n     * Setting this to false will force the caption/label to never appear.<br/>\n     * Default value is `undefined`, and the framework will determine if a label needs to be displayed.\n     */\n    withLabel: ComponentOptions.buildBooleanOption(),\n    /**\n     * Setting this option allow to set the label that should be displayed.<br/>\n     * Default value is `undefined`, and the framework will determine the label that will be displayed.\n     */\n    labelValue: ComponentOptions.buildLocalizedStringOption()\n  };\n\n  static fields = [\n    'objecttype',\n    'filetype',\n  ];\n\n  /**\n   * Create a new Icon component\n   * @param element\n   * @param options\n   * @param bindings\n   * @param result\n   */\n  constructor(public element: HTMLElement, public options?: IIconOptions, bindings?: IComponentBindings, public result?: IQueryResult) {\n    super(element, Icon.ID, bindings);\n\n    this.options = ComponentOptions.initComponentOptions(element, Icon, options);\n    this.result = this.result || this.resolveResult();\n    Assert.exists(this.result);\n\n    var possibleInternalQuickview = $$(this.element).find('.' + Component.computeCssClassNameForType(Quickview.ID));\n    if (!Utils.isNullOrUndefined(possibleInternalQuickview) && QueryUtils.hasHTMLVersion(this.result)) {\n      $$(this.element).addClass('coveo-with-quickview');\n      $$(this.element).on('click', () => {\n        var qv: Quickview = <Quickview>Component.get(possibleInternalQuickview);\n        qv.open();\n      });\n    }\n\n    Icon.createIcon(this.result, this.options, element, bindings);\n  }\n\n  static createIcon(result: IQueryResult, options: IIconOptions = {}, element: HTMLElement = $$('div').el, bindings?: IComponentBindings) {\n    var info = FileTypes.get(result);\n    info = Icon.preprocessIconInfo(options, info);\n    $$(element).toggleClass('coveo-small', options.small === true);\n\n    if (options.value != undefined) {\n      if (options.small === true) {\n        if (options.value.indexOf('-small') == -1) {\n          info.icon += '-small';\n        }\n      }\n      if (options.small === false) {\n        if (options.value.indexOf('-small') != -1) {\n          info.icon = info.icon.replace('-small', '');\n        }\n      }\n    }\n    $$(element).addClass(info.icon);\n    element.setAttribute('title', info.caption);\n\n    if (Icon.shouldDisplayLabel(options, bindings)) {\n      element.appendChild($$('span', {\n        className: 'coveo-icon-caption-overlay'\n      }, info.caption).el);\n      $$(element).addClass('coveo-icon-with-caption-overlay');\n    }\n    return element;\n  }\n\n  static shouldDisplayLabel(options: IIconOptions, bindings: IComponentBindings) {\n    // Display only in new design.\n    // If withLabel is explicitely set to false, the label will never display\n    // If withLabel is explicitely set to true, the label will always display\n    // If withLabel is set to default value (not a hard true or false), the label will display based on ./core/filetypes/**.json\n    // with the property shouldDisplayLabel set on each file type/ objecttype\n    // In this case, the generated css will take care of outputting the correct css to display : block\n    return bindings && bindings.searchInterface.isNewDesign() && options.withLabel !== false;\n  }\n\n  static preprocessIconInfo(options: IIconOptions, info: IFileTypeInfo) {\n    if (options.labelValue != null) {\n      info.caption = options.labelValue;\n    }\n    if (options.value != null) {\n      info.icon = 'coveo-icon ' + options.value;\n    }\n    if (info.caption == null) {\n      info.caption = '';\n    }\n    if (info.icon == null) {\n      info.icon = 'coveo-icon coveo-sprites-custom';\n    }\n    return info;\n  }\n}\nInitialization.registerAutoCreateComponent(Icon);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Icon/Icon.ts\n **/","import {Component} from '../Base/Component';\nimport {ComponentOptions, ComponentOptionsType} from '../Base/ComponentOptions';\nimport {IResultsComponentBindings} from '../Base/ResultsComponentBindings';\nimport {Template} from '../Templates/Template';\nimport {DomUtils} from '../../utils/DomUtils';\nimport {DeviceUtils} from '../../utils/DeviceUtils';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {$$, Dom} from '../../utils/Dom';\nimport {DefaultQuickviewTemplate} from './DefaultQuickviewTemplate';\nimport {ResultListEvents} from '../../events/ResultListEvents';\nimport {StringUtils} from '../../utils/StringUtils';\nimport {QuickviewDocument} from './QuickviewDocument';\nimport {QueryStateModel} from '../../models/QueryStateModel';\nimport {QuickviewEvents} from '../../events/QuickviewEvents';\nimport {Initialization, IInitializationParameters} from '../Base/Initialization';\nimport {KeyboardUtils, KEYBOARD} from '../../utils/KeyboardUtils';\nimport {ModalBox as ModalBoxModule} from '../../ExternalModulesShim';\n\nexport interface IQuickviewOptions {\n  title?: string;\n  showDate?: boolean;\n  contentTemplate?: Template;\n  enableLoadingAnimation?: boolean;\n  loadingAnimation?: HTMLElement;\n  alwaysShow?: boolean;\n  size?: string;\n}\n\ninterface IQuickviewOpenerObject {\n  content: Dom;\n  loadingAnimation: HTMLElement;\n}\n\n/**\n * This component is meant to exist within a result template.\n * It allows to create a button/link inside the result list that opens a modal box for a given result.\n *\n * Most of the time, this component will reference a {@link QuickviewDocument} in its content template.\n *\n * # Choosing what to display for the Quickview\n * The Quick View uses any HTML structure you put inside its tag and uses that as the content of the dialog box. This content can thus be any element you decide, using your CSS and your structure.\n *\n * > Example\n * > You can change the appearance of the Quick View link by adding HTML inside the body of the div.\n * > You can change the content of the Quick View link by specifying a template ID.\n *\n * ```html\n * <!-- This would change the appearance of the quickview button itself in the result. -->\n * <div class=\"CoveoQuickview\" data-template-id=\"TemplateId\">\n *   <span>Click here for Quickview</span>\n * </div>\n *\n * <!-- This would modify the content of the quickview when it is opened in the modal box -->\n * <script class='result-template' type='text/underscore' id='TemplateId' >\n *   <div>\n *     <span>This is the content that will be displayed when you open the Quick View. You can also include any other Coveo components.</span>\n *     <table class=\"CoveoFieldTable\">\n *       <tr data-field=\"@liboardshorttitle\" data-caption=\"Board\" />\n *       <tr data-field=\"@licategoryshorttitle\" data-caption=\"Category\" />\n *       <tr data-field=\"@sysauthor\" data-caption=\"Author\" />\n *     </table>\n *   </div>\n * </script>\n *\n * <!-- Note that this is all optional: Just including a <div class='CoveoQuickview'></div> will do the job most of the time, and will include a default template and default button appearance -->\n * ```\n */\nexport class Quickview extends Component {\n  static ID = 'Quickview';\n\n  static fields = [\n    'urihash', // analytics\n    'collection', // analytics\n    'source', // analytics,\n    'author' // analytics\n  ];\n\n  /**\n   * @componentOptions\n   */\n  static options: IQuickviewOptions = {\n    /**\n     * Specifies whether the quickview is always shown, even when the index body for a document is empty.<br/>\n     * In such cases, the {@link Quickview.options.contentTemplate} specifies what appears in the quickview.<br/>\n     * If there is no quickview for the document, you *MUST* specify a contentTemplate otherwise the component will throw an error when opened.\n     */\n    alwaysShow: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * Specifies the title of your choice that appears at the top of the Quick View modal window.\n     */\n    title: ComponentOptions.buildStringOption(),\n    /**\n     * Specifies whether to show the document date in the Quick View modal window header.<br/>\n     * The default value is `true`.\n     */\n    showDate: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    enableLoadingAnimation: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    /**\n     * Specifies the template to use to present the Quick View content in the modal window.<br/>\n     * e.g.: <br/>\n     *     <div class=\"CoveoQuickview\" data-template-id=\"TemplateId\"></div>\n     *     <div class=\"CoveoQuickview\" data-template-selector=\".templateSelector\"></div>\n     */\n    contentTemplate: ComponentOptions.buildTemplateOption({\n      selectorAttr: 'data-template-selector',\n      idAttr: 'data-template-id'\n    }),\n    loadingAnimation: ComponentOptions.buildOption<HTMLElement>(ComponentOptionsType.NONE, (element: HTMLElement) => {\n      let loadingAnimationSelector = element.getAttribute('data-loading-animation-selector');\n      if (loadingAnimationSelector != null) {\n        let loadingAnimation = $$(document.documentElement).find(loadingAnimationSelector);\n        if (loadingAnimation != null) {\n          $$(loadingAnimation).detach();\n          return loadingAnimation;\n        }\n      }\n      let id = element.getAttribute('data-loading-animation-template-id');\n      if (id != null) {\n        let loadingAnimationTemplate = ComponentOptions.loadResultTemplateFromId(id);\n        if (loadingAnimationTemplate) {\n          return loadingAnimationTemplate.instantiateToElement({});\n        }\n      }\n      return DomUtils.getBasicLoadingAnimation();\n    }),\n    /**\n     * Specifies the Quick View modal window size (width and height) relative to the full window.<br/>\n     * The default value is 95% on a desktop and 100% on a mobile device.\n     */\n    size: ComponentOptions.buildStringOption({ defaultValue: DeviceUtils.isMobileDevice() ? '100%' : '95%' })\n  };\n\n  public static resultCurrentlyBeingRendered: IQueryResult = null;\n\n  private modalbox: Coveo.ModalBox.ModalBox;\n  private bindedHandleEscapeEvent = this.handleEscapeEvent.bind(this);\n\n  constructor(public element: HTMLElement, public options?: IQuickviewOptions, public bindings?: IResultsComponentBindings, public result?: IQueryResult, private ModalBox = ModalBoxModule) {\n    super(element, Quickview.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, Quickview, options);\n\n    if (this.options.contentTemplate == null) {\n      this.options.contentTemplate = new DefaultQuickviewTemplate();\n    }\n\n    // If there is no content inside the Quickview div,\n    // we need to add something that will show up in the result template itself\n    if (/^\\s*$/.test(this.element.innerHTML)) {\n      let iconForQuickview = $$('div');\n      iconForQuickview.addClass('coveo-icon-for-quickview');\n      if (this.searchInterface.isNewDesign()) {\n        let captionForQuickview = $$(\n          'div',\n          { className: 'coveo-caption-for-quickview', tabindex: 0 },\n          'Quickview'.toLocaleString()\n        ).el;\n        let div = $$('div');\n        div.append(iconForQuickview.el);\n        div.append(captionForQuickview);\n        $$(this.element).append(div.el);\n      } else {\n        iconForQuickview.text('Quickview'.toLocaleString());\n        $$(this.element).append(iconForQuickview.el);\n      }\n    }\n\n    this.bindClick(result);\n    if (this.bindings.resultElement) {\n      this.bind.on(this.bindings.resultElement, ResultListEvents.openQuickview, () => this.open());\n    }\n  }\n\n  /**\n   * Open the quickview\n   */\n  public open() {\n    if (this.modalbox == null) {\n      // To prevent the keyboard from opening on mobile if the search bar has focus\n      Quickview.resultCurrentlyBeingRendered = this.result;\n      $$(<HTMLElement>document.activeElement).trigger('blur');\n\n      let openerObject = this.prepareOpenQuickviewObject();\n      this.createModalBox(openerObject);\n      this.bindQuickviewEvents(openerObject);\n      this.animateAndOpen();\n      this.queryStateModel.set(QueryStateModel.attributesEnum.quickview, this.getHashId());\n      Quickview.resultCurrentlyBeingRendered = null;\n    }\n  }\n\n  /**\n   * Close the quickview\n   */\n  public close() {\n    if (this.modalbox != null) {\n      this.modalbox.close();\n      this.modalbox = null;\n      $$(document.body).off('keyup', this.bindedHandleEscapeEvent);\n    }\n  }\n\n  public getHashId() {\n    return this.result.queryUid + '.' + this.result.index + '.' + StringUtils.hashCode(this.result.uniqueId);\n  }\n\n  private bindClick(result: IQueryResult) {\n    if (typeof result.hasHtmlVersion == 'undefined' || result.hasHtmlVersion || this.options.alwaysShow) {\n      const clickAction = () => this.open();\n      $$(this.element).on('click', clickAction);\n      this.bind.on(this.element, 'keyup', KeyboardUtils.keypressAction(KEYBOARD.ENTER, clickAction));\n    } else {\n      this.element.style.display = 'none';\n    }\n  }\n\n  private bindQuickviewEvents(openerObject: IQuickviewOpenerObject) {\n\n    let closeButton = $$(this.modalbox.wrapper).find('.coveo-quickview-close-button');\n    $$(closeButton).on('click', () => {\n      this.closeQuickview();\n      this.close();\n    });\n\n    $$(this.modalbox.overlay).on('click', () => {\n      this.closeQuickview();\n    });\n\n    $$(this.modalbox.content).on(QuickviewEvents.quickviewLoaded, () => {\n      $$(openerObject.loadingAnimation).remove();\n      this.bindIFrameEscape();\n    });\n\n    this.bindEscape();\n  }\n\n  private animateAndOpen() {\n    let animationDuration = this.modalbox.wrapper.style.animationDuration;\n    let quickviewDocument = $$(this.modalbox.modalBox).find('.' + Component.computeCssClassName(QuickviewDocument));\n    if (quickviewDocument) {\n      if (animationDuration) {\n        let duration = /^(.+)(ms|s)$/.exec(animationDuration);\n        let durationMs = Number(duration[1]) * (duration[2] == 's' ? 1000 : 1);\n        // open the QuickviewDocument\n        setTimeout(() => {\n          if (this.modalbox != null) {\n            Initialization.dispatchNamedMethodCallOrComponentCreation('open', quickviewDocument, null);\n          }\n        }, durationMs);\n      } else {\n        Initialization.dispatchNamedMethodCallOrComponentCreation('open', quickviewDocument, null);\n      }\n    }\n  }\n\n  private createModalBox(openerObject: IQuickviewOpenerObject) {\n\n    let computedModalBoxContent = $$('div');\n    computedModalBoxContent.append(openerObject.content.el);\n    this.modalbox = this.ModalBox.open(computedModalBoxContent.el, {\n      title: DomUtils.getQuickviewHeader(this.result, {\n        showDate: this.options.showDate,\n        title: this.options.title\n      }, this.bindings).el.outerHTML,\n      className: 'coveo-quick-view',\n      validation: () => true,\n      body: this.element.ownerDocument.body\n    });\n    this.setQuickviewSize();\n  }\n\n  private prepareOpenQuickviewObject() {\n    let loadingAnimation = this.options.loadingAnimation;\n    return {\n      loadingAnimation: loadingAnimation,\n      content: this.prepareQuickviewContent(loadingAnimation)\n    };\n  }\n\n  private prepareQuickviewContent(loadingAnimation: HTMLElement) {\n    let content = $$(this.options.contentTemplate.instantiateToElement(this.result));\n    let initOptions = this.searchInterface.options;\n    let initParameters: IInitializationParameters = {\n      options: initOptions,\n      bindings: this.getBindings(),\n      result: this.result\n    };\n    Initialization.automaticallyCreateComponentsInside(content.el, initParameters);\n    if (content.find('.' + Component.computeCssClassName(QuickviewDocument)) != undefined && this.options.enableLoadingAnimation) {\n      content.prepend(loadingAnimation);\n    }\n    return content;\n  }\n\n  private bindEscape() {\n    $$(document.body).on('keyup', this.bindedHandleEscapeEvent);\n  }\n\n  private bindIFrameEscape() {\n    let quickviewDocument = $$(this.modalbox.content).find('.' + Component.computeCssClassName(QuickviewDocument));\n    quickviewDocument = $$(quickviewDocument).find('iframe');\n    let body = (<HTMLIFrameElement>quickviewDocument).contentWindow.document.body;\n    $$(body).on('keyup', this.bindedHandleEscapeEvent);\n  }\n\n  private closeQuickview() {\n    this.queryStateModel.set(QueryStateModel.attributesEnum.quickview, '');\n  }\n\n  private setQuickviewSize() {\n    let wrapper = $$($$(this.modalbox.modalBox).find('.coveo-wrapper'));\n    wrapper.el.style.width = this.options.size;\n    wrapper.el.style.height = this.options.size;\n    wrapper.el.style.maxWidth = this.options.size;\n    wrapper.el.style.maxHeight = this.options.size;\n  }\n\n  private handleEscapeEvent(e: KeyboardEvent) {\n    if (e.keyCode == KEYBOARD.ESCAPE) {\n      this.closeQuickview();\n      this.close();\n    }\n  }\n}\nInitialization.registerAutoCreateComponent(Quickview);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Quickview/Quickview.ts\n **/","import {Template} from '../Templates/Template';\nimport {IQueryResult} from '../../rest/QueryResult';\n\nexport class DefaultQuickviewTemplate extends Template {\n\n  constructor() {\n    super();\n  }\n\n  instantiateToString(queryResult?: IQueryResult): string {\n    return '<div class=\"coveo-quick-view-full-height\"><div class=\"CoveoQuickviewDocument\"></div></div>';\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Quickview/DefaultQuickviewTemplate.ts\n **/","import {Component} from '../Base/Component';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {analyticsActionCauseList} from '../Analytics/AnalyticsActionListMeta';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {Assert} from '../../misc/Assert';\nimport {$$, Dom} from '../../utils/Dom';\nimport {IOpenQuickviewEventArgs} from '../../events/ResultListEvents';\nimport {QuickviewEvents, IQuickviewLoadedEventArgs} from '../../events/QuickviewEvents';\nimport {DeviceUtils} from '../../utils/DeviceUtils';\nimport {Utils} from '../../utils/Utils';\nimport {ColorUtils} from '../../utils/ColorUtils';\nimport {Initialization} from '../Base/Initialization';\nimport {IQuery} from '../../rest/Query';\nimport {IViewAsHtmlOptions} from '../../rest/SearchEndpointInterface';\nimport {AjaxError} from '../../rest/AjaxError';\nimport {l} from '../../strings/Strings';\n\nconst HIGHLIGHT_PREFIX = 'CoveoHighlight';\n\nexport interface IQuickviewDocumentOptions {\n  maximumDocumentSize?: number;\n}\n\ninterface IWord {\n  text: string;\n  count: number;\n  index: number;\n  termsCount: number;\n  element: HTMLElement;\n  occurence: number;\n}\n\ninterface IWordState {\n  word: IWord;\n  color: string;\n  currentIndex: number;\n  index: number;\n}\n\n/**\n * The QuickviewDocument component is meant to exist within Result Templates, more specifically inside a {@link Quickview} component.\n * The sole purpose of this component is to include an iframe which will load the correct HTML version of the current document.\n * By default, this component is included in the default template for a {@link Quickview} component.\n */\nexport class QuickviewDocument extends Component {\n  static ID = 'QuickviewDocument';\n\n  /**\n   * The options for the component\n   * @componentOptions\n   */\n  static options: IQuickviewDocumentOptions = {\n    /**\n     * Specifies the maximum document size (the preview) that should be returned by the index.\n     *\n     * By default its value is 0, and the whole preview is returned.\n     */\n    maximumDocumentSize: ComponentOptions.buildNumberOption({ defaultValue: 0, min: 0 }),\n  };\n\n  private iframe: Dom;\n  private header: Dom;\n  private termsToHighlightWereModified: boolean;\n  private keywordsState: IWordState[];\n\n  /**\n   * Create a new instance of the component\n   * @param element\n   * @param options\n   * @param bindings\n   * @param result\n   */\n  constructor(public element: HTMLElement, public options?: IQuickviewDocumentOptions, bindings?: IComponentBindings, public result?: IQueryResult) {\n    super(element, QuickviewDocument.ID, bindings);\n\n    this.options = ComponentOptions.initComponentOptions(element, QuickviewDocument, options);\n    this.result = result || this.resolveResult();\n    this.termsToHighlightWereModified = false;\n    Assert.exists(this.result);\n  }\n\n  public createDom() {\n    let container = $$('div');\n    container.addClass('coveo-quickview-document');\n    this.element.appendChild(container.el);\n\n    this.header = this.buildHeader();\n    this.iframe = this.buildIFrame();\n\n    container.append(this.header.el);\n    container.append(this.iframe.el);\n  }\n\n  public open() {\n    this.ensureDom();\n    let documentURL = $$(this.element).getAttribute('href');\n    if (documentURL == undefined || documentURL == '') {\n      documentURL = this.result.clickUri;\n    }\n    this.usageAnalytics.logClickEvent(analyticsActionCauseList.documentQuickview, {\n      author: this.result.raw.author,\n      documentURL: documentURL,\n      documentTitle: this.result.title\n    }, this.result, this.queryController.element);\n    let beforeLoad = (new Date()).getTime();\n    let iframe = <HTMLIFrameElement>this.iframe.find('iframe');\n    iframe.src = 'about:blank';\n    let endpoint = this.queryController.getEndpoint();\n\n    let termsToHighlight = _.keys(this.result.termsToHighlight);\n    let dataToSendOnOpenQuickView: IOpenQuickviewEventArgs = {\n      termsToHighlight: termsToHighlight\n    };\n\n    $$(this.element).trigger(QuickviewEvents.openQuickview, dataToSendOnOpenQuickView);\n    this.checkIfTermsToHighlightWereModified(dataToSendOnOpenQuickView.termsToHighlight);\n\n    let queryObject = _.extend({}, this.getBindings().queryController.getLastQuery());\n\n    if (this.termsToHighlightWereModified) {\n      this.handleTermsToHighlight(dataToSendOnOpenQuickView.termsToHighlight, queryObject);\n    }\n\n    let callOptions: IViewAsHtmlOptions = {\n      queryObject: queryObject,\n      requestedOutputSize: this.options.maximumDocumentSize\n    };\n\n    endpoint.getDocumentHtml(this.result.uniqueId, callOptions)\n      .then((html: HTMLDocument) => {\n        // If the contentDocument is null at this point it means that the Quick View\n        // was closed before we've finished loading it. In this case do nothing.\n        if (iframe.contentDocument == null) {\n          return;\n        }\n\n        this.renderHTMLDocument(iframe, html);\n        this.triggerQuickviewLoaded(beforeLoad);\n      })\n      .catch((error: AjaxError) => {\n        // If the contentDocument is null at this point it means that the Quick View\n        // was closed before we've finished loading it. In this case do nothing.\n        if (iframe.contentDocument == null) {\n          return;\n        }\n\n        if (error.status != 0) {\n          this.renderErrorReport(iframe, error.status);\n          this.triggerQuickviewLoaded(beforeLoad);\n        } else {\n          iframe.onload = () => {\n            this.triggerQuickviewLoaded(beforeLoad);\n          };\n          iframe.src = endpoint.getViewAsHtmlUri(this.result.uniqueId, callOptions);\n        }\n      });\n  }\n\n  protected renderHTMLDocument(iframe: HTMLIFrameElement, html: HTMLDocument) {\n    iframe.onload = () => {\n      this.computeHighlights(iframe.contentWindow);\n\n      // Remove white border for new Quickview\n      if (this.isNewQuickviewDocument(iframe.contentWindow)) {\n        let body = $$(this.element).closest('.coveo-body');\n        body.style.padding = '0';\n        let header = $$(this.element).find('.coveo-quickview-header');\n        header.style.paddingTop = '10';\n        header.style.paddingLeft = '10';\n      }\n\n      if ($$(this.element).find('.coveo-quickview-header').innerHTML == '') {\n        $$(this.element).find('.coveo-quickview-header').style.display = 'none';\n      }\n    };\n\n    this.writeToIFrame(iframe, html);\n    this.wrapPreElementsInIframe(iframe);\n  }\n\n\n  private renderErrorReport(iframe: HTMLIFrameElement, errorStatus: number) {\n    let errorString = '';\n    if (errorStatus == 400) {\n      errorString = 'NoQuickview';\n    } else {\n      errorString = 'OopsError';\n    }\n    let errorMessage = `<html><body style='font-family: Arimo, \\'Helvetica Neue\\', Helvetica, Arial, sans-serif; -webkit-text-size-adjust: none;' >${l(errorString)} </body></html>`;\n    this.writeToIFrame(iframe, errorMessage);\n  }\n\n  private writeToIFrame(iframe: HTMLIFrameElement, content: HTMLDocument);\n  private writeToIFrame(iframe: HTMLIFrameElement, content: String);\n  private writeToIFrame(iframe: HTMLIFrameElement, content: any) {\n    let toWrite = content;\n    // This sucks because we can't do instanceof HTMLDocument\n    // lib.d.ts declare HTMLDocument as an interface, not an actual object\n    if (typeof content == 'object') {\n      toWrite = content.getElementsByTagName('html')[0].outerHTML;\n    }\n\n    iframe.contentWindow.document.open();\n    iframe.contentWindow.document.write(toWrite);\n    iframe.contentWindow.document.close();\n  }\n\n  private wrapPreElementsInIframe(iframe: HTMLIFrameElement) {\n    try {\n      let style = document.createElement('style');\n      style.type = 'text/css';\n\n      // This CSS forces <pre> tags used in some emails to wrap by default\n      let cssText = 'html pre { white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; }';\n\n      // Some people react strongly when presented with their browser's default font, so let's fix that\n      cssText += 'body, html { font-family: Arimo, \\'Helvetica Neue\\', Helvetica, Arial, sans-serif; -webkit-text-size-adjust: none; }';\n\n      if (DeviceUtils.isIos()) {\n        // Safari on iOS forces resize iframes to fit their content, even if an explicit size\n        // is set on the iframe. Isn't that great? By chance there is a trick around it: by\n        // setting a very small size on the body and instead using min-* to set the size to\n        // 100% we're able to trick Safari from thinking it must expand the iframe. Amazed.\n        // The 'scrolling' part is required otherwise the hack doesn't work.\n        //\n        // http://stackoverflow.com/questions/23083462/how-to-get-an-iframe-to-be-responsive-in-ios-safari\n        cssText += 'body, html { height: 1px !important; min-height: 100%; overflow: scroll; }';\n        $$(iframe).setAttribute('scrolling', 'no');\n\n        // Some content is cropped on iOs if a margin is present\n        // We remove it and add one on the iframe wrapper.\n        cssText += 'body, html {margin: auto}';\n        iframe.parentElement.style.margin = '0 0 5px 5px';\n\n        // While we're on the topic of iOS Safari: This magic trick prevents iOS from NOT\n        // displaying the content of the iframe. If we don't do this, you'll see the body\n        // of the iframe ONLY when viewing the page in the tab switcher.  Isn't that *magical*?\n        iframe.style.position = 'relative';\n      }\n\n      if ('styleSheet' in style) {\n        style['styleSheet'].cssText = cssText;\n      } else {\n        style.appendChild(document.createTextNode(cssText));\n      }\n      let head = iframe.contentWindow.document.head;\n      head.appendChild(style);\n    } catch (e) {\n      // if not allowed\n    }\n  }\n\n  private triggerQuickviewLoaded(beforeLoad: number) {\n    let afterLoad = (new Date()).getTime();\n    let eventArgs: IQuickviewLoadedEventArgs = { duration: afterLoad - beforeLoad };\n    $$(this.element).trigger(QuickviewEvents.quickviewLoaded, eventArgs);\n  }\n\n  // An highlighted term looks like:\n  //\n  //     <span id='CoveoHighlight:X.Y.Z'>a</span>\n  //\n  // The id has 3 components:\n  // - X: the term\n  // - Y: the term occurence\n  // - Z: the term part\n  //\n  // For the 'Z' component, if the term 'foo bar' is found in multiple elements, we will see:\n  //\n  //     <span id='CoveoHighlight:1.1.1'>foo</span>\n  //     <span id='CoveoHighlight:1.1.2'>bar</span>\n  //\n  // Highlighted words can overlap, which looks like:\n  //\n  //     <span id='CoveoHighlight:1.Y.Z'>\n  //         a\n  //         <coveotaggedword id='CoveoHighlight:2.Y.Z'>b</coveotaggedword>\n  //     </span>\n  //     <span id='CoveoHighlight:2.Y.Z'>c</span>\n  //\n  // In the previous example, the words 'ab' and 'bc' are highlighted.\n  //\n  // One thing important to note is that the id of all 'coveotaggedword' for\n  // the same word AND the first 'span' for that word will have the same id.\n  //\n  // Example:\n  //\n  //     <span id='CoveoHighlight:1.1.1'>\n  //         a\n  //         <coveotaggedword id='CoveoHighlight:2.1.1'>b</coveotaggedword>\n  //     </span>\n  //     <span id='CoveoHighlight:1.1.2'>\n  //         c\n  //         <coveotaggedword id='CoveoHighlight:2.1.1'>d</coveotaggedword>\n  //     </span>\n  //     <span id='CoveoHighlight:2.1.1'>e</span>\n  //     <span id='CoveoHighlight:2.1.2'>f</span>\n  //\n  // In the previous example, the words 'abcd' and 'bcdef' are highlighted.\n  //\n  // This method is public for testing purposes.\n  public computeHighlights(window: Window): string[] {\n    $$(this.header).empty();\n    this.keywordsState = [];\n\n    let words: { [index: string]: IWord } = {};\n    let highlightsCount = 0;\n    _.each($$(window.document.body).findAll('[id^=\"' + HIGHLIGHT_PREFIX + '\"]'), (element: HTMLElement, index: number) => {\n      let idParts = this.getHighlightIdParts(element);\n\n      if (idParts) {\n        let idIndexPart = idParts[1];                    // X\n        let idOccurencePart = parseInt(idParts[2], 10);  // Y\n        let idTermPart = parseInt(idParts[3], 10);       // Z in <span id='CoveoHighlight:X.Y.Z'>a</span>\n\n        let word = words[idIndexPart];\n\n        // The 'idTermPart' check is to circumvent a bug from the index\n        // where an highlight of an empty string start with an idTermPart > 1.\n        if (word == null && idTermPart == 1) {\n          words[idIndexPart] = word = {\n            text: this.getHighlightInnerText(element),\n            count: 1,\n            index: parseInt(idIndexPart, 10),\n\n            // Here I try to be clever.\n            // An overlaping word:\n            // 1) always start with a 'coveotaggedword' element.\n            // 2) then other 'coveotaggedword' elements may follow\n            // 3) then a 'span' element may follow.\n            //\n            // All 1), 2) and 3) will have the same id so I consider them as\n            // a whole having the id 0 instead of 1.\n            termsCount: element.nodeName.toLowerCase() == 'coveotaggedword' ? 0 : 1,\n            element: element,\n            occurence: idOccurencePart\n          };\n        } else if (word) {\n          if (word.occurence == idOccurencePart) {\n            if (element.nodeName.toLowerCase() == 'coveotaggedword') {\n              word.text += this.getHighlightInnerText(element);\n              // Doesn't count as a term part (see method description for more info).\n            } else if (word.termsCount < idTermPart) {\n              word.text += this.getHighlightInnerText(element);\n              word.termsCount += 1;\n            }\n          }\n\n          word.count = Math.max(word.count, idOccurencePart);\n          highlightsCount += 1;\n        }\n\n        // See the method description to understand why this code let us\n        // create the word 'bcdef' instead of 'bdef'.\n        if (word && word.occurence == idOccurencePart && element.nodeName.toLowerCase() == 'span') {\n          let embeddedWordParts = this.getHightlightEmbeddedWordIdParts(element);\n          let embeddedWord = embeddedWordParts ? words[embeddedWordParts[1]] : null;\n\n          if (embeddedWord && embeddedWord.occurence == parseInt(embeddedWordParts[2], 10)) {\n            embeddedWord.text += element.childNodes[0].nodeValue || ''; // only immediate text without children.\n          }\n        }\n      }\n    });\n\n    if (highlightsCount == 0) {\n      this.header.el.style.minHeight = '0';\n    }\n\n    let resolvedWords = [];\n\n    _.each(words, (word) => {\n      // When possible, take care to find the original term from the query instead of the\n      // first highlighted version we encounter. This relies on a recent feature by the\n      // Search API, but will fallback properly on older versions.\n      word.text = this.resolveOriginalTermFromHighlight(word.text);\n\n      let state = {\n        word: word,\n        color: word.element.style.backgroundColor,\n        currentIndex: 0,\n        index: word.index\n      };\n\n      this.keywordsState.push(state);\n      $$(this.header).append(this.buildWordButton(state, window));\n\n      resolvedWords.push(word.text);\n    });\n\n    return resolvedWords;\n  }\n\n  private getHighlightIdParts(element: HTMLElement): string[] {\n    let parts = element\n      .id\n      .substr(HIGHLIGHT_PREFIX.length + 1)\n      .match(/^([0-9]+)\\.([0-9]+)\\.([0-9]+)$/);\n\n    return (parts && parts.length > 3) ? parts : null;\n  }\n\n  private getHighlightInnerText(element: HTMLElement): string {\n    if (element.nodeName.toLowerCase() == 'coveotaggedword') {\n      // only immediate text without children.\n      return element.childNodes.length >= 1 ? (element.childNodes.item(0).textContent || '') : '';\n    } else {\n      return element.textContent || '';\n    }\n  }\n\n  private getHightlightEmbeddedWordIdParts(element: HTMLElement): string[] {\n    let embedded = element.getElementsByTagName('coveotaggedword')[0];\n\n    return embedded ? this.getHighlightIdParts(<HTMLElement>embedded) : null;\n  }\n\n  private resolveOriginalTermFromHighlight(highlight: string): string {\n    let found = highlight;\n\n    // Beware, terms to highlight is only set by recent search APIs.\n    if (this.result.termsToHighlight) {\n      // We look for the term expansion and we'll return the corresponding\n      // original term is one is found.\n      found = _.find(_.keys(this.result.termsToHighlight), (originalTerm: string) => {\n        // The expansions do NOT include the original term (makes sense), so be sure to check\n        // the original term for a match too.\n        return (originalTerm.toLowerCase() == highlight.toLowerCase()) ||\n          (_.find(this.result.termsToHighlight[originalTerm], (expansion: string) => expansion.toLowerCase() == highlight.toLowerCase()) != undefined);\n      }) || found;\n    }\n    return found;\n  }\n\n  private buildWordButton(wordState: IWordState, window: Window): HTMLElement {\n    let wordHtml = $$('span');\n    wordHtml.addClass('coveo-term-for-quickview');\n\n    let quickviewName = $$('span');\n    quickviewName.addClass('coveo-term-for-quickview-name');\n    quickviewName.setHtml(wordState.word.text);\n    quickviewName.on('click', () => {\n      this.navigate(wordState, false, window);\n    });\n    wordHtml.append(quickviewName.el);\n\n    let quickviewUpArrow = $$('span');\n    quickviewUpArrow.addClass('coveo-term-for-quickview-up-arrow');\n    let quickviewUpArrowIcon = $$('span');\n    quickviewUpArrowIcon.addClass('coveo-term-for-quickview-up-arrow-icon');\n    quickviewUpArrow.append(quickviewUpArrowIcon.el);\n    quickviewUpArrow.on('click', () => {\n      this.navigate(wordState, true, window);\n    });\n    wordHtml.append(quickviewUpArrow.el);\n\n    let quickviewDownArrow = $$('span');\n    quickviewDownArrow.addClass('coveo-term-for-quickview-down-arrow');\n    let quickviewDownArrowIcon = $$('span');\n    quickviewDownArrowIcon.addClass('coveo-term-for-quickview-down-arrow-icon');\n    quickviewDownArrow.append(quickviewDownArrowIcon.el);\n    quickviewDownArrow.on('click', () => {\n      this.navigate(wordState, false, window);\n    });\n    wordHtml.append(quickviewDownArrow.el);\n\n    wordHtml.el.style.backgroundColor = wordState.color;\n    wordHtml.el.style.borderColor = this.getSaturatedColor(wordState.color);\n    quickviewDownArrow.el.style.borderColor = this.getSaturatedColor(wordState.color);\n\n    return wordHtml.el;\n  }\n\n  private navigate(state: IWordState, backward: boolean, window: Window) {\n    let fromIndex = state.currentIndex;\n    let toIndex: number;\n    if (!backward) {\n      toIndex = fromIndex == state.word.count ? 1 : fromIndex + 1;\n    } else {\n      toIndex = fromIndex <= 1 ? state.word.count : fromIndex - 1;\n    }\n\n    let scroll = this.getScrollingElement(window);\n\n    // Un-highlight any currently selected element\n    let current = $$(scroll).find('[id^=\"' + HIGHLIGHT_PREFIX + ':' + state.word.index + '.' + fromIndex + '\"]');\n    if (current) {\n      current.style.border = '';\n    }\n\n    // Find and highlight the new element.\n    let element = $$(window.document.body).find('[id^=\"' + HIGHLIGHT_PREFIX + ':' + state.word.index + '.' + toIndex + '\"]');\n    element.style.border = '1px dotted #333';\n    state.currentIndex = toIndex;\n\n    // pdf2html docs hide the non-visible frames by default, to speed up browsers.\n    // But this prevents keyword navigation from working so we must force show it. This\n    // is done by adding the 'opened' class to it (defined by pdf2html).\n    if (this.isNewQuickviewDocument(window)) {\n      let pdf = $$(element).closest('.pc');\n      $$(pdf).addClass('opened');\n    }\n\n    // pdf2html docs hide the non-visible frames by default, to speed up browsers.\n    // Hack for now: the new Quick View is far too complex to manually scroll\n    // to the content, so SCREW IT and use good ol' scrollIntoView. I'm planning\n    // on a page-based quick view in an upcoming hackaton anyway :)\n    //\n    // Also, mobile devices have troubles with the animation.\n    if (this.isNewQuickviewDocument(window) || DeviceUtils.isMobileDevice()) {\n      element.scrollIntoView();\n\n      // iOS on Safari might scroll the whole modal box body when we do this,\n      // so give it a nudge in the right direction.\n      let body = this.iframe.closest('.coveo-body');\n      body.scrollLeft = 0;\n      body.scrollTop = 0;\n\n      return;\n    }\n\n    // For other quick views we use a nicer animation that centers the keyword\n\n    this.animateScroll(scroll,\n      element.offsetLeft - scroll.clientWidth / 2 + $$(element).width() / 2,\n      element.offsetTop - scroll.clientHeight / 2 + $$(element).height() / 2);\n\n    this.animateScroll(this.iframe.el,\n      element.offsetLeft - this.iframe.width() / 2 + $$(element).width() / 2,\n      element.offsetTop - this.iframe.height() / 2 + $$(element).height() / 2);\n\n  }\n\n  private buildHeader(): Dom {\n    let header = $$('div');\n    header.addClass('coveo-quickview-header');\n    return header;\n  }\n\n  private buildIFrame(): Dom {\n    let iFrame = $$('iframe');\n    iFrame.setAttribute('sandbox', 'allow-same-origin');\n    let iFrameWrapper = $$('div');\n    iFrameWrapper.addClass('coveo-iframeWrapper');\n    iFrameWrapper.el.appendChild(iFrame.el);\n    return iFrameWrapper;\n  }\n\n  private getScrollingElement(iframeWindow: Window): HTMLElement {\n    let found: HTMLElement;\n\n    if (this.isNewQuickviewDocument(iframeWindow)) {\n      // 'New' quick views have a #page-container element generated by the pdf2html thing.\n      // This is the element we want to scroll on.\n      found = $$(iframeWindow.document.body).find('#page-container');\n    }\n\n    // If all else fails, we use the body\n    if (!found) {\n      found = $$(iframeWindow.document.body).el;\n    }\n\n    return found;\n  }\n\n  private isNewQuickviewDocument(iframeWindow: Window): boolean {\n    let meta = $$(iframeWindow.document.head).find('meta[name=\\'generator\\']');\n    return meta && meta.getAttribute('content') == 'pdf2htmlEX';\n  }\n\n  private handleTermsToHighlight(termsToHighlight: Array<string>, queryObject: IQuery) {\n    for (let term in this.result.termsToHighlight) {\n      delete this.result.termsToHighlight[term];\n    }\n    let query = '';\n    _.each(termsToHighlight, (term) => {\n      query += term + ' ';\n      this.result.termsToHighlight[term] = new Array<string>(term);\n    });\n    query = query.substring(0, query.length - 1);\n    queryObject.q = query;\n  }\n\n  private checkIfTermsToHighlightWereModified(termsToHighlight: Array<string>) {\n    if (!Utils.arrayEqual(termsToHighlight, _.keys(this.result.termsToHighlight))) {\n      this.termsToHighlightWereModified = true;\n    }\n  }\n\n  private getSaturatedColor(color: string): string {\n    let r = parseInt(color.substring(4, 7));\n    let g = parseInt(color.substring(9, 12));\n    let b = parseInt(color.substring(14, 17));\n    let hsv = ColorUtils.rgbToHsv(r, g, b);\n    hsv[1] *= 2;\n    if (hsv[1] > 1) {\n      hsv[1] = 1;\n    }\n    let rgb = ColorUtils.hsvToRgb(hsv[0], hsv[1], hsv[2]);\n    return 'rgb(' + rgb[0].toString() + ', ' + rgb[1].toString() + ', ' + rgb[2].toString() + ')';\n  }\n\n  private animateScroll(scroll: HTMLElement, scrollLeftValue: number, scrollTopValue: number, duration: number = 100) {\n    let leftStep = Math.round((scrollLeftValue - scroll.scrollLeft) / duration);\n    let topStep = Math.round((scrollTopValue - scroll.scrollTop) / duration);\n\n    let interval = setInterval(function () {\n      if (duration != 0) {\n        scroll.scrollLeft += leftStep;\n        scroll.scrollTop += topStep;\n        duration -= 1;\n      } else {\n        clearInterval(interval);\n      }\n    }, 1);\n  }\n}\n\nInitialization.registerAutoCreateComponent(QuickviewDocument);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Quickview/QuickviewDocument.ts\n **/","import {Template} from '../Templates/Template';\nimport {DefaultResultTemplate} from '../Templates/DefaultResultTemplate';\nimport {Component} from '../Base/Component';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {IResultsComponentBindings} from '../Base/ResultsComponentBindings';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {IQueryResult} from '../../rest/QueryResult';\nimport {IQueryResults} from '../../rest/QueryResults';\nimport {Assert} from '../../misc/Assert';\nimport {QueryEvents, INewQueryEventArgs, IBuildingQueryEventArgs, IQuerySuccessEventArgs, IDuringQueryEventArgs, IQueryErrorEventArgs} from '../../events/QueryEvents';\nimport {MODEL_EVENTS} from '../../models/Model';\nimport {QUERY_STATE_ATTRIBUTES} from '../../models/QueryStateModel';\nimport {QueryUtils} from '../../utils/QueryUtils';\nimport {$$, Win, Doc} from '../../utils/Dom';\nimport {analyticsActionCauseList, IAnalyticsNoMeta} from '../Analytics/AnalyticsActionListMeta';\nimport {Initialization, IInitializationParameters} from '../Base/Initialization';\nimport {Defer} from '../../misc/Defer';\nimport {DeviceUtils} from '../../utils/DeviceUtils';\nimport {ResultListEvents, IDisplayedNewResultEventArgs} from '../../events/ResultListEvents';\nimport {Utils} from '../../utils/Utils';\nimport {DomUtils} from '../../utils/DomUtils';\nimport {Recommendation} from '../Recommendation/Recommendation';\nimport {DefaultRecommendationTemplate} from '../Templates/DefaultRecommendationTemplate';\n\nexport interface IResultListOptions {\n  resultContainer?: HTMLElement;\n  resultTemplate?: Template;\n  resultOptions?: {};\n  waitAnimationContainer?: HTMLElement;\n  enableInfiniteScroll?: boolean;\n  infiniteScrollPageSize?: number;\n  infiniteScrollContainer?: HTMLElement | Window;\n  waitAnimation?: string;\n  mobileScrollContainer?: HTMLElement;\n  enableInfiniteScrollWaitingAnimation?: boolean;\n  fieldsToInclude?: string[];\n  autoSelectFieldsToInclude?: boolean;\n}\n\n/**\n * This component is responsible for displaying the results of the current query using one or more result templates.<br/>\n * It supports many additional features such as infinite scrolling.\n *\n * # Examples / samples\n * This contains some quick example. Refer to result templates on developers.coveo.com for more information.\n *\n * ```html\n * <!-- A very simple result list with a single underscore template.\n * The template has no condition : It will load for all results.\n * Every results will show the same template. -->\n *\n * <div class=\"CoveoResultList\">\n *   <script class=\"result-template\" type=\"text/underscore\" id='MyDefaultTemplate'>\n *     <div>\n *       <a class='CoveoResultLink'>Hey, click on this ! <%- title %></a>\n *     </div>\n *   </script>\n * </div>\n *\n * <!-- 2 different template in the same result list : The first template has a condition attribute, the second one does not.\n *\n * The first condition will be evaluated against each result. If a result match this condition (in this case if the result.raw.objecttype property in the JSON equals MyObjectType) then the template will be rendered and the next template won't be rendered or evaluated for this result. -->\n *\n * If the result does not match the first template, the next one will be evaluated. Since the second one has no condition, it is always considered \"true\" and will load as a fallback.\n *\n * This process will repeat for each result that was returned by the query to the index. -->\n *\n * <div class=\"CoveoResultList\">\n *   <script class=\"result-template\" type=\"text/underscore\" data-condition='raw.objecttype==MyObjectType' id='MyObjectTypeTemplate'>\n *     <div>\n *       <a class='CoveoResultLink'>Hey, click on this ! <%- title %></a>\n *       <div class='CoveoExcerpt'></div>\n *       <span>This is a result for the type : <%- raw.objecttype %></span>\n *     </div>\n *   </script>\n *\n *   <script class=\"result-template\" type=\"text/underscore\">\n *     <div>\n *       <a class='CoveoResultLink'>Hey, click on this ! <%- title %></a>\n *     </div>\n *   </script>\n * </div>\n *\n * <!-- 2 different template in the same result list : Both have a data-condition attribute.\n *\n * Same as before : the condition will be evaluated against all results.\n *\n * Since there is no \"default\" template with no condition specified, the framework will fallback on the default templates included in the framework if no template match a given result. This is to ensure that all results get rendered -->\n *\n * <div class=\"CoveoResultList\">\n *   <script class=\"result-template\" type=\"text/underscore\" data-condition='raw.objecttype==MyObjectType' id='MyObjectTypeTemplate'>\n *     <div>\n *       <a class='CoveoResultLink'>Hey, click on this ! <%- title %></a>\n *       <div class='CoveoExcerpt'></div>\n *       <span>This is a result for the type : <%- raw.objecttype %></span>\n *      </div>\n *   </script>\n *\n *   <script class=\"result-template\" type=\"text/underscore\" data-condition='raw.objecttype==MySecondObjectType' id='MySecondObjectTypeTemplate'>\n *     <div>\n *       <span class='CoveoIcon'></span>\n *       <a class='CoveoResultLink'></a>\n *     </div>\n *     <div class='CoveoExcerpt'></div>\n *     <div class='CoveoPrintableUri'></div>\n *   </script>\n * </div>\n * ```\n */\nexport class ResultList extends Component {\n  static ID = 'ResultList';\n  /**\n   * The options for the ResultList\n   * @componentOptions\n   */\n  static options: IResultListOptions = {\n    /**\n     * Specifies the element within which the rendered templates for results are inserted.<br/>\n     * The content of this element is cleared when a new query is performed. If this option is not specified, a &lt;div&gt; element will by dynamically created in javascript and appended to the result list and used as a result container.<br/>\n     * You can change the container by specifying it's selector: Eg  data-result-container-selector=\"#someCssSelector\"\n     */\n    resultContainer: ComponentOptions.buildChildHtmlElementOption({\n      defaultFunction: (element: HTMLElement) => {\n        var d = document.createElement('div');\n        element.appendChild(d);\n        return d;\n      }\n    }),\n    resultTemplate: ComponentOptions.buildTemplateOption({ defaultFunction: ResultList.getDefaultTemplate }),\n    /**\n     * Specifies the type of animation to display while waiting for a new query to finish executing.<br/>\n     * Possible values are :<br/>\n     * 'fade' : Fades out the currently displayed results while the query is executing.<br/>\n     * 'spinner' : Shows a spinning animation while the query is executing.<br/>\n     * 'none' : Use no animation during queries.<br/>\n     * Default value is 'none'\n     */\n    waitAnimation: ComponentOptions.buildStringOption({ defaultValue: 'none' }),\n    /**\n     * Specifies the element inside which an animation is displayed while waiting for a new query to finish executing.<br/>\n     * You can change this by specifying a css selector.<br/>\n     * Eg : data-wait-animation-container-selector=\"#someCssSelector\"\n     * By default, the animation appears in the the resultContainer.\n     */\n    waitAnimationContainer: ComponentOptions.buildChildHtmlElementOption({ postProcessing: (value, options: IResultListOptions) => value || options.resultContainer }),\n    /**\n     * Specifies whether the ResultList automatically retrieves an additional page of results and appends them to those already being displayed whenever the user scrolls to the end of the infiniteScrollContainer.<br/>\n     * The waitAnimation will be displayed while additional results are fetched.<br/>\n     * Default value is false\n     */\n    enableInfiniteScroll: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * When infiniteScroll is enabled, specifies the number of additional results that are fetched when the user scrolls to the bottom of the infiniteScrollContainer.<br/>\n     * Default value is 10\n     */\n    infiniteScrollPageSize: ComponentOptions.buildNumberOption({ defaultValue: 10, min: 1, depend: 'enableInfiniteScroll' }),\n    /**\n     * When infinite scrolling is enabled, specifies the element whose scrolling is monitored to trigger fetching of additional results.<br/>\n     * By default, the framework will try to find the first scrolling parent it encounter, starting from the ResultList itself<br/>\n     * This also means that if it encounter no parent that are scrollable (in css this means having overflow-y: scroll), then the window itself will be the scroll container\n     */\n    infiniteScrollContainer: ComponentOptions.buildChildHtmlElementOption({ depend: 'enableInfiniteScroll', defaultFunction: (element) => ComponentOptions.findParentScrolling(element) }),\n    /**\n     * Specifies if the wait animation should be displayed when a query is being performed using infinite scroll.<br/>\n     * Default value is true\n     */\n    enableInfiniteScrollWaitingAnimation: ComponentOptions.buildBooleanOption({ depend: 'enableInfiniteScroll', defaultValue: true }),\n    mobileScrollContainer: ComponentOptions.buildSelectorOption({ defaultFunction: () => <HTMLElement>document.querySelector('.coveo-results-column') }),\n    /**\n     * Specifies a list of fields to include in the query.<br/>\n     * This is to ensure that fields that are not needed for the UI to function are not sent by the search API.<br/>\n     * By default, this list is empty.<br/>\n     * Note that this option has an interaction with autoSelectFieldsToInclude\n     */\n    fieldsToInclude: ComponentOptions.buildFieldsOption({ includeInResults: true }),\n    /**\n     * Specifies that the result list should scan it's template and discover which field it will need to render every results.<br/>\n     * This is to ensure that fields that are not needed for the UI to function are not sent by the search API.<br/>\n     * Default value is false.<br/>\n     * NB: Many interface created by the interface editor will actually explicitly set this option to true.\n     */\n    autoSelectFieldsToInclude: ComponentOptions.buildBooleanOption({ defaultValue: false })\n  };\n\n  public static resultCurrentlyBeingRendered: IQueryResult = null;\n  public currentlyDisplayedResults: IQueryResult[] = [];\n  private fetchingMoreResults: Promise<IQueryResults>;\n  private reachedTheEndOfResults = false;\n\n  /**\n   * Create a new ResultList.<br/>\n   * Bind various event related to queries (eg : on querySuccess -> renderResults)<br/>\n   * Bind scroll event if infinite scrolling is enabled.\n   * @param element The HTMLElement on which the element will be instantiated.\n   * @param options The options for the ResultList.\n   * @param bindings The bindings that the component requires to function normally. If not set, will automatically resolve them (With slower execution time)\n   * @param elementClassId The class that this component should instantiate. By default this will be CoveoResultList. This is used by component that extends the base ResultList\n   */\n  constructor(public element: HTMLElement, public options?: IResultListOptions, public bindings?: IComponentBindings, elementClassId: string = ResultList.ID) {\n    super(element, elementClassId, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, ResultList, options);\n\n    Assert.exists(element);\n    Assert.exists(this.options);\n    Assert.exists(this.options.resultContainer);\n    Assert.exists(this.options.resultTemplate);\n    Assert.exists(this.options.waitAnimationContainer);\n    Assert.exists(this.options.infiniteScrollContainer);\n\n    this.showOrHideElementsDependingOnState(false, false);\n\n    this.bind.onRootElement<INewQueryEventArgs>(QueryEvents.newQuery, (args: INewQueryEventArgs) => this.handleNewQuery());\n    this.bind.onRootElement<IBuildingQueryEventArgs>(QueryEvents.buildingQuery, (args: IBuildingQueryEventArgs) => this.handleBuildingQuery(args));\n    this.bind.onRootElement<IQuerySuccessEventArgs>(QueryEvents.querySuccess, (args: IQuerySuccessEventArgs) => this.handleQuerySuccess(args));\n    this.bind.onRootElement<IDuringQueryEventArgs>(QueryEvents.duringQuery, (args: IDuringQueryEventArgs) => this.handleDuringQuery());\n    this.bind.onRootElement<IQueryErrorEventArgs>(QueryEvents.queryError, (args: IQueryErrorEventArgs) => this.handleQueryError());\n\n    if (this.options.enableInfiniteScroll) {\n      this.bind.on(<HTMLElement>this.options.infiniteScrollContainer, 'scroll', (e: Event) => this.handleScrollOfResultList());\n    }\n    this.bind.onQueryState(MODEL_EVENTS.CHANGE_ONE, QUERY_STATE_ATTRIBUTES.FIRST, () => this.handlePageChanged());\n  }\n\n  /**\n   * Empty the current result list content and append the given array of HTMLElement.<br/>\n   * Can append to existing elements in the result list, or replace them.<br/>\n   * Triggers the newResultDiplayed and newResultsDisplayed event\n   * @param resultsElement\n   * @param append\n   */\n  public renderResults(resultsElement: HTMLElement[], append = false) {\n    if (!append) {\n      this.options.resultContainer.innerHTML = '';\n    }\n    _.each(resultsElement, (resultElement) => {\n      this.options.resultContainer.appendChild(resultElement);\n      this.triggerNewResultDisplayed(Component.getResult(resultElement), resultElement);\n    });\n    this.triggerNewResultsDisplayed();\n  }\n\n  /**\n   * Build and return an array of HTMLElement with the given result set.\n   * @param results\n   */\n  public buildResults(results: IQueryResults): HTMLElement[] {\n    var res: HTMLElement[] = [];\n    _.each(results.results, (result: IQueryResult) => {\n      var resultElement = this.buildResult(result);\n      if (resultElement != null) {\n        res.push(resultElement);\n      }\n    });\n    ResultList.resultCurrentlyBeingRendered = null;\n    return res;\n  }\n\n  /**\n   * Build and return an HTMLElement for the given result.\n   * @param result\n   * @returns {HTMLElement}\n   */\n  public buildResult(result: IQueryResult): HTMLElement {\n    Assert.exists(result);\n    QueryUtils.setStateObjectOnQueryResult(this.queryStateModel.get(), result);\n    ResultList.resultCurrentlyBeingRendered = result;\n    var resultElement = this.options.resultTemplate.instantiateToElement(result);\n    if (resultElement != null) {\n      Component.bindResultToElement(resultElement, result);\n    }\n    this.autoCreateComponentsInsideResult(resultElement, result);\n    return resultElement;\n  }\n\n  /**\n   * Execute a query to fetch new results. After the query is done, render those new results.<br/>\n   * Assert that there is actually more results to display by checking that the last query returned as many results as requested.<br/>\n   * Assert that the result list is not currently fetching results\n   * @param count The number of results to fetch and display\n   */\n  public displayMoreResults(count: number) {\n    Assert.isLargerOrEqualsThan(1, count);\n\n    if (this.isCurrentlyFetchingMoreResults()) {\n      this.logger.warn('Ignoring request to display more results since we\\'re already doing so');\n      return;\n    }\n    if (!this.hasPotentiallyMoreResultsToDisplay()) {\n      this.logger.warn('Ignoring request to display more results since we know there aren\\'t more to display');\n      return;\n    }\n\n    if (this.options.enableInfiniteScrollWaitingAnimation) {\n      this.showWaitingAnimationForInfiniteScrolling();\n    }\n\n    this.fetchingMoreResults = this.queryController.fetchMore(count);\n    this.fetchingMoreResults.then((data: IQueryResults) => {\n      Assert.exists(data);\n      this.usageAnalytics.logCustomEvent<IAnalyticsNoMeta>(analyticsActionCauseList.pagerScrolling, {}, this.element);\n      var results = data.results;\n      this.reachedTheEndOfResults = count > data.results.length;\n      this.renderResults(this.buildResults(data), true);\n      _.each(results, (result) => {\n        this.currentlyDisplayedResults.push(result);\n      });\n      this.triggerNewResultsDisplayed();\n    });\n\n    this.fetchingMoreResults.then(() => {\n      this.hideWaitingAnimationForInfiniteScrolling();\n      this.fetchingMoreResults = undefined;\n      Defer.defer(() => this.handleScrollOfResultList());\n    });\n  }\n\n  /**\n   * Get the list of currently displayed result\n   * @returns {IQueryResult[]}\n   */\n  public getDisplayedResults(): IQueryResult[] {\n    return this.currentlyDisplayedResults;\n  }\n\n  /**\n   * Get the list of currently displayed result HTMLElement\n   * @returns {HTMLElement[]}\n   */\n  public getDisplayedResultsElements(): HTMLElement[] {\n    return $$(this.options.resultContainer).findAll('.CoveoResult');\n  }\n\n  protected autoCreateComponentsInsideResult(element: HTMLElement, result: IQueryResult) {\n    Assert.exists(element);\n\n    var initOptions = this.searchInterface.options.originalOptionsObject;\n    var resultComponentBindings: IResultsComponentBindings = _.extend({}, this.getBindings(), {\n      resultElement: element\n    });\n    var initParameters: IInitializationParameters = {\n      options: initOptions,\n      bindings: resultComponentBindings,\n      result: result\n    };\n    Initialization.automaticallyCreateComponentsInside(element, initParameters);\n  }\n\n  protected triggerNewResultDisplayed(result: IQueryResult, resultElement: HTMLElement) {\n    var args: IDisplayedNewResultEventArgs = {\n      result: result,\n      item: resultElement\n    };\n    $$(this.element).trigger(ResultListEvents.newResultDisplayed, args);\n  }\n\n  protected triggerNewResultsDisplayed() {\n    $$(this.element).trigger(ResultListEvents.newResultsDisplayed, {});\n  }\n\n  private handleDuringQuery() {\n    this.logger.trace('Emptying the result container');\n    this.cancelFetchingMoreResultsIfNeeded();\n    this.showWaitingAnimation();\n    this.showOrHideElementsDependingOnState(false, false);\n  }\n\n  private handleQueryError() {\n    this.hideWaitingAnimation();\n    $$(this.options.resultContainer).empty();\n    this.currentlyDisplayedResults = [];\n  }\n\n  private handleQuerySuccess(data: IQuerySuccessEventArgs) {\n    Assert.exists(data);\n    Assert.exists(data.results);\n    $$(this.element).toggle(!this.disabled);\n    if (!this.disabled) {\n      var results = data.results;\n      this.logger.trace('Received query results from new query', results);\n      this.hideWaitingAnimation();\n      ResultList.resultCurrentlyBeingRendered = undefined;\n      this.currentlyDisplayedResults = [];\n      this.renderResults(this.buildResults(data.results));\n      this.currentlyDisplayedResults = results.results;\n      this.reachedTheEndOfResults = false;\n      this.showOrHideElementsDependingOnState(true, this.currentlyDisplayedResults.length != 0);\n\n      if (this.options.enableInfiniteScroll && results.results.length == data.queryBuilder.numberOfResults) {\n        // This will check right away if we need to add more results to make the scroll container full & scrolling.\n        this.handleScrollOfResultList();\n      }\n\n      if (DeviceUtils.isMobileDevice() && this.options.mobileScrollContainer != undefined) {\n        this.options.mobileScrollContainer.scrollTop = 0;\n      }\n    }\n  }\n\n  private handleScrollOfResultList() {\n    if (this.isCurrentlyFetchingMoreResults() || !this.options.enableInfiniteScroll) {\n      return;\n    }\n    if (this.isScrollingOfResultListAlmostAtTheBottom() && this.hasPotentiallyMoreResultsToDisplay()) {\n      this.displayMoreResults(this.options.infiniteScrollPageSize);\n    }\n  }\n\n  private handlePageChanged() {\n    this.bind.oneRootElement(QueryEvents.querySuccess, () => {\n      if (this.options.infiniteScrollContainer instanceof Window) {\n        var win = <Window>this.options.infiniteScrollContainer;\n        win.scrollTo(0, 0);\n      } else {\n        var el = <HTMLElement>this.options.infiniteScrollContainer;\n        if (el.scrollIntoView) {\n          el.scrollIntoView();\n        }\n      }\n    });\n  }\n\n  private handleNewQuery() {\n    $$(this.element).show();\n    ResultList.resultCurrentlyBeingRendered = undefined;\n  }\n\n  private handleBuildingQuery(args: IBuildingQueryEventArgs) {\n    if (this.options.fieldsToInclude != null) {\n      // remove the @\n      args.queryBuilder.addFieldsToInclude(_.map(this.options.fieldsToInclude, (field) => field.substr(1)));\n    }\n    if (this.options.autoSelectFieldsToInclude) {\n      args.queryBuilder.addRequiredFields(this.getAutoSelectedFieldsToInclude());\n      args.queryBuilder.includeRequiredFields = true;\n    }\n  }\n\n  private getAutoSelectedFieldsToInclude() {\n    return _.chain(this.options.resultTemplate.getFields())\n      .compact()\n      .unique()\n      .value();\n  }\n\n  private isCurrentlyFetchingMoreResults(): boolean {\n    return Utils.exists(this.fetchingMoreResults);\n  }\n\n  private isScrollingOfResultListAlmostAtTheBottom(): boolean {\n    // this is in a try catch because the unit test fail otherwise (Window does not exist for phantom js in the console)\n    var isWindow;\n    try {\n      isWindow = this.options.infiniteScrollContainer instanceof Window;\n    } catch (e) {\n      isWindow = false;\n    }\n    return isWindow ? this.isScrollAtBottomForWindowElement() : this.isScrollAtBottomForHtmlElement();\n  }\n\n  private isScrollAtBottomForWindowElement() {\n    var windowHeight = new Win(window).height();\n    var scrollTop = window.scrollY;\n    var bodyHeight = new Doc(document).height();\n    return bodyHeight - (windowHeight + scrollTop) < windowHeight / 2;\n  }\n\n  private isScrollAtBottomForHtmlElement() {\n    var el = <HTMLElement>this.options.infiniteScrollContainer;\n    var elementHeight = el.clientHeight;\n    var scrollHeight = el.scrollHeight;\n    var bottomPosition = el.scrollTop + elementHeight;\n    return (scrollHeight - bottomPosition) < elementHeight / 2;\n  }\n\n  public hasPotentiallyMoreResultsToDisplay(): boolean {\n    return this.currentlyDisplayedResults.length > 0 && !this.reachedTheEndOfResults;\n  }\n\n  private cancelFetchingMoreResultsIfNeeded() {\n    if (this.isCurrentlyFetchingMoreResults()) {\n      this.logger.trace('Cancelling fetching more results');\n      Promise.reject(this.fetchingMoreResults);\n      this.fetchingMoreResults = undefined;\n    }\n  }\n\n  private showOrHideElementsDependingOnState(hasQuery: boolean, hasResults: boolean) {\n    var showIfQuery = $$(this.element).findAll('.coveo-show-if-query');\n    var showIfNoQuery = $$(this.element).findAll('.coveo-show-if-no-query');\n    var showIfResults = $$(this.element).findAll('.coveo-show-if-results');\n    var showIfNoResults = $$(this.element).findAll('.coveo-show-if-no-results');\n\n    _.each(showIfQuery, (s: HTMLElement) => {\n      $$(s).toggle(hasQuery);\n    });\n    _.each(showIfNoQuery, (s: HTMLElement) => {\n      $$(s).toggle(!hasQuery);\n    });\n    _.each(showIfResults, (s: HTMLElement) => {\n      $$(s).toggle(hasQuery && hasResults);\n    });\n    _.each(showIfNoResults, (s: HTMLElement) => {\n      $$(s).toggle(hasQuery && !hasResults);\n    });\n  }\n\n  private showWaitingAnimation() {\n    switch (this.options.waitAnimation.toLowerCase()) {\n      case 'fade':\n        $$(this.options.waitAnimationContainer).addClass('coveo-fade-out');\n        break;\n      case 'spinner':\n        _.each(this.options.resultContainer.children, (child: HTMLElement) => {\n          $$(child).hide();\n        });\n        if ($$(this.options.waitAnimationContainer).find('.coveo-wait-animation') == undefined) {\n          this.options.waitAnimationContainer.appendChild(DomUtils.getBasicLoadingAnimation());\n        }\n        break;\n    }\n  }\n\n  private hideWaitingAnimation() {\n    switch (this.options.waitAnimation.toLowerCase()) {\n      case 'fade':\n        $$(this.options.waitAnimationContainer).removeClass('coveo-fade-out');\n        break;\n      case 'spinner':\n        var spinner = $$(this.options.waitAnimationContainer).find('.coveo-loading-spinner');\n        if (spinner) {\n          $$(spinner).detach();\n        }\n        break;\n    }\n  }\n\n  private showWaitingAnimationForInfiniteScrolling() {\n    this.options.waitAnimationContainer.appendChild(DomUtils.getLoadingSpinner());\n  }\n\n  private hideWaitingAnimationForInfiniteScrolling() {\n    var spinner = $$(this.options.waitAnimationContainer).find('.coveo-loading-spinner');\n    if (spinner) {\n      $$(spinner).detach();\n    }\n  }\n\n  private static getDefaultTemplate(e: HTMLElement): Template {\n    let component = <ResultList>Component.get(e);\n    if (component.searchInterface instanceof Recommendation) {\n      return new DefaultRecommendationTemplate();\n    }\n    return new DefaultResultTemplate();\n  }\n}\n\n\nInitialization.registerAutoCreateComponent(ResultList);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/ResultList/ResultList.ts\n **/","import {Template} from './Template';\nimport {IQueryResult} from '../../rest/QueryResult';\n\nexport class DefaultRecommendationTemplate extends Template {\n\n  instantiateToString(object?: IQueryResult): string {\n    var template =\n      `<div class=\"coveo-result-frame\">\n        <div class=\"coveo-result-row\">\n          <div class=\"coveo-result-cell\" style=\"width:40px;text-align:center;vertical-align:middle;\">\n            <span class=\"CoveoIcon\" data-small=\"true\">\n            </span>\n          </div>\n          <div class=\"coveo-result-cell\" style=\"padding:0 0 3px 5px;vertical-align:middle\">\n            <div class=\"coveo-result-row\">\n              <div class=\"coveo-result-cell\" style=\"font-size:10pt;\">\n                <a class=\"CoveoResultLink\" style=\"display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\">\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>`;\n    return template;\n  }\n\n  instantiateToElement(object?: IQueryResult): HTMLElement {\n    var div = document.createElement('div');\n    div.innerHTML = this.instantiateToString(object);\n    return div;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Templates/DefaultRecommendationTemplate.ts\n **/","import {Initialization} from '../Base/Initialization';\nimport {Component} from '../Base/Component';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {QueryEvents, IBuildingQueryEventArgs} from '../../events/QueryEvents';\nimport {MODEL_EVENTS, IAttributeChangedEventArg} from '../../models/Model';\nimport {QUERY_STATE_ATTRIBUTES, QueryStateModel} from '../../models/QueryStateModel';\nimport {StandaloneSearchInterfaceEvents} from '../../events/StandaloneSearchInterfaceEvents';\nimport {IAnalyticsNoMeta, analyticsActionCauseList} from '../Analytics/AnalyticsActionListMeta';\nimport {$$} from '../../utils/Dom';\nimport {Assert} from '../../misc/Assert';\nimport {QueryboxQueryParameters} from './QueryboxQueryParameters';\n\nexport interface IQueryboxOptions {\n  enableSearchAsYouType?: boolean;\n  searchAsYouTypeDelay?: number;\n  enableQuerySyntax?: boolean;\n  enableWildcards?: boolean;\n  enableQuestionMarks?: boolean;\n  enableLowercaseOperators?: boolean;\n  enablePartialMatch?: boolean;\n  partialMatchKeywords?: number;\n  partialMatchThreshold?: string;\n  autoFocus?: boolean;\n  placeholder?: string;\n  triggerQueryOnClear?: boolean;\n}\n\n/**\n * A component that allows a user to enter a query inside an input.<br/>\n * The component will trigger a query when submitted (the 'Enter' keypress) and log the proper analytics data.<br/>\n * It must be instantiated on a div (and not directly on an input element): This is for styling purpose (ghost type ahead, for example).\n */\nexport class Querybox extends Component {\n  static ID = 'Querybox';\n  /**\n   * The options for the Querybox.\n   * @componentOptions\n   */\n  public static options: IQueryboxOptions = {\n    /**\n     * Specify if search as you type should be enabled.<br/>\n     * Default to `false`.\n     */\n    enableSearchAsYouType: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * If `enableSearchAsYouType` is enabled, this option specify the delay (in ms) between a keypress and a query being triggered<br/>\n     * Default to 500 ms.\n     */\n    searchAsYouTypeDelay: ComponentOptions.buildNumberOption({ defaultValue: 500, min: 0 }),\n    /**\n     * Specifies whether the Coveo Platform does try to interpret special query syntax such as field references in the query entered through the query box.<br/>\n     * The default value is `true`.\n     */\n    enableQuerySyntax: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    /**\n     * Specifies whether the Coveo Platform expands keywords containing wildcard characters (*) to the possible matching keywords to broaden the query.<br/>\n     * The default value is `false`.\n     */\n    enableWildcards: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * Specifies whether the Coveo Platform expands keywords containing question mark characters (?) to the possible matching keywords to broaden the query.<br/>\n     * The default value is `false`.\n     */\n    enableQuestionMarks: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * If true, the or and and keywords in the query box will be treated as boolean operators for the query when they are typed in lowercase.<br/>\n     * This applies for all operators<br/>\n     * Default value is `false`.\n     */\n    enableLowercaseOperators: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * Specifies whether a query containing a large number of keywords (see partialMatchKeywords) is automatically converted to a partial match expression in order to match documents containing only a subset of the keywords (see partialMatchThreshold for defining the subset).<br/>\n     * The default value is `false`.\n     */\n    enablePartialMatch: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * When partial match is enabled, specifies the minimum number of keywords that must be present in the query to activate the partial match.<br/>\n     * The default value is 5.\n     */\n    partialMatchKeywords: ComponentOptions.buildNumberOption({ defaultValue: 5, min: 1 }),\n    /**\n     * When partial match is enabled, specifies either an absolute or percentage value indicating the minimum number of keywords a document must contain in order to match the query.<br/>\n     * The default value is 50%.\n     */\n    partialMatchThreshold: ComponentOptions.buildStringOption({ defaultValue: '50%' }),\n    /**\n     * Specifies whether or not to trigger a query when the searchbox is cleared.\n     * The default value is `true`.\n     */\n    triggerQueryOnClear: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    /**\n     *  Specifies a placeholder for input.\n     */\n    placeholder: ComponentOptions.buildStringOption(),\n    /**\n     * Specifies whether the `QueryBox` gets the focus and is selected on initialization.\n     * The default value is `true`.\n     */\n    autoFocus: ComponentOptions.buildBooleanOption({ defaultValue: true })\n  };\n\n  public magicBox: Coveo.MagicBox.Instance;\n  private lastQuery: string;\n  private searchAsYouTypeTimeout: number;\n\n  /**\n   * Create a new Querybox.<br/>\n   * Create a new Coveo.Magicbox instance and wrap magic box method (on blur, on submit etc).<br/>\n   * Bind event on buildingQuery and on redirection (for standalone box).\n   * @param element The `HTMLElement` on which the element will be instantiated. This cannot be an `HTMLInputElement` for technical reasons.\n   * @param options The options for the querybox.\n   * @param bindings The bindings that the component requires to function normally. If not set, will automatically resolve them (with slower execution time).\n   */\n  constructor(public element: HTMLElement, public options?: IQueryboxOptions, public bindings?: IComponentBindings) {\n    super(element, Querybox.ID, bindings);\n\n    if (element instanceof HTMLInputElement) {\n      this.logger.error('QueryBox can\\'t be use on a HTMLInputElement');\n    }\n\n    this.options = ComponentOptions.initComponentOptions(element, Querybox, options);\n\n    this.magicBox = Coveo.MagicBox.create(element, new Coveo.MagicBox.Grammar('Query', {\n      Query: '[Term*][Spaces?]',\n      Term: '[Spaces?][Word]',\n      Spaces: / +/,\n      Word: /[^ ]+/\n    }), {\n        inline: true\n      });\n\n    this.bind.onRootElement(QueryEvents.buildingQuery, (args: IBuildingQueryEventArgs) => this.handleBuildingQuery(args));\n    this.bind.onRootElement(StandaloneSearchInterfaceEvents.beforeRedirect, () => this.updateQueryState());\n    this.bind.onQueryState(MODEL_EVENTS.CHANGE_ONE, QUERY_STATE_ATTRIBUTES.Q, (args: IAttributeChangedEventArg) => this.handleQueryStateChanged(args));\n\n    if (this.options.enableSearchAsYouType) {\n      $$(this.element).addClass('coveo-search-as-you-type');\n      this.magicBox.onchange = () => {\n        this.searchAsYouType();\n      };\n    }\n\n    this.magicBox.onsubmit = () => {\n      this.submit();\n    };\n\n    this.magicBox.onblur = () => {\n      this.updateQueryState();\n    };\n\n    this.magicBox.onclear = () => {\n      this.updateQueryState();\n      if (this.options.triggerQueryOnClear) {\n        this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.searchboxClear, {});\n        this.triggerNewQuery(false);\n      }\n    };\n\n    if (this.options.autoFocus) {\n      this.magicBox.focus();\n    }\n  }\n\n  /**\n   * Trigger a query. The current input content will be added to the query.<br/>\n   * If the content of the input has not changed since the last submit, no new query will be triggered.\n   */\n  public submit(): void {\n    this.magicBox.clearSuggestion();\n    this.updateQueryState();\n    this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.searchboxSubmit, {});\n    this.triggerNewQuery(false);\n  }\n\n  /**\n   * Set the content of the input\n   * @param text The string to set in the input\n   */\n  public setText(text: string): void {\n    this.magicBox.setText(text);\n    this.updateQueryState();\n  }\n\n  /**\n   * Clear the content of the input\n   */\n  public clear(): void {\n    this.magicBox.clear();\n  }\n\n  /**\n   * Get the current content of the input\n   * @returns {string}\n   */\n  public getText(): string {\n    return this.magicBox.getText();\n  }\n\n  public getResult() {\n    return this.magicBox.getResult();\n  }\n\n  public getDisplayedResult() {\n    return this.magicBox.getDisplayedResult();\n  }\n\n  public getCursor(): number {\n    return this.magicBox.getCursor();\n  }\n\n  public resultAtCursor(match?: string | { (result): boolean; }) {\n    return this.magicBox.resultAtCursor(match);\n  }\n\n  private handleBuildingQuery(args: IBuildingQueryEventArgs): void {\n    Assert.exists(args);\n    Assert.exists(args.queryBuilder);\n\n    this.updateQueryState();\n    this.lastQuery = this.magicBox.getText();\n    new QueryboxQueryParameters(this.options).addParameters(args.queryBuilder, this.lastQuery);\n  }\n\n  private triggerNewQuery(searchAsYouType: boolean): void {\n    clearTimeout(this.searchAsYouTypeTimeout);\n    let text = this.magicBox.getText();\n    if (this.lastQuery != text && text != null) {\n      this.lastQuery = text;\n      this.queryController.executeQuery({\n        searchAsYouType: searchAsYouType,\n        logInActionsHistory: true\n      });\n    }\n  }\n\n  private updateQueryState(): void {\n    this.queryStateModel.set(QueryStateModel.attributesEnum.q, this.magicBox.getText());\n  }\n\n  private handleQueryStateChanged(args: IAttributeChangedEventArg): void {\n    Assert.exists(args);\n    let q = <string>args.value;\n    if (q != this.magicBox.getText()) {\n      this.magicBox.setText(q);\n    }\n  }\n\n  private searchAsYouType(): void {\n    clearTimeout(this.searchAsYouTypeTimeout);\n    this.searchAsYouTypeTimeout = setTimeout(() => {\n      this.usageAnalytics.logSearchAsYouType<IAnalyticsNoMeta>(analyticsActionCauseList.searchboxAsYouType, {});\n      this.triggerNewQuery(true);\n    }, this.options.searchAsYouTypeDelay);\n  }\n}\nInitialization.registerAutoCreateComponent(Querybox);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Querybox/Querybox.ts\n **/","import {IQueryboxOptions} from './Querybox';\nimport {QueryBuilder} from '../Base/QueryBuilder';\n\nexport class QueryboxQueryParameters {\n  constructor(private options: IQueryboxOptions) {\n  }\n\n  public addParameters(queryBuilder: QueryBuilder, lastQuery: string) {\n    if (this.options.enableWildcards) {\n      queryBuilder.enableWildcards = true;\n    }\n\n    if (this.options.enableQuestionMarks) {\n      queryBuilder.enableQuestionMarks = true;\n    }\n\n    if (this.options.enableLowercaseOperators) {\n      queryBuilder.enableLowercaseOperators = true;\n    }\n\n    if (!_.isEmpty(lastQuery)) {\n      queryBuilder.disableQuerySyntax = !this.options.enableQuerySyntax;\n      queryBuilder.expression.add(lastQuery);\n      if (this.options.enablePartialMatch) {\n        queryBuilder.enablePartialMatch = this.options.enablePartialMatch;\n        if (this.options.partialMatchKeywords) {\n          queryBuilder.partialMatchKeywords = this.options.partialMatchKeywords;\n        }\n        if (this.options.partialMatchThreshold) {\n          queryBuilder.partialMatchThreshold = this.options.partialMatchThreshold;\n        }\n      }\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Querybox/QueryboxQueryParameters.ts\n **/","import {Component} from '../Base/Component';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {Utils} from '../../utils/Utils';\nimport {$$} from '../../utils/Dom';\nimport {l} from '../../strings/Strings';\nimport {IAnalyticsNoMeta, analyticsActionCauseList} from '../Analytics/AnalyticsActionListMeta';\nimport {Initialization} from '../Base/Initialization';\n\nexport interface ISearchButtonOptions {\n}\n\n/**\n * A component that allows user to trigger a query by clicking on it.<br/>\n * This component will instantiate on an element and add a search icon.<br/>\n * It will also sends an analytics event to the Coveo platform when clicked.\n */\nexport class SearchButton extends Component {\n  static ID = 'SearchButton';\n\n  static options: ISearchButtonOptions = {};\n\n  /**\n   * Create a new SearchButton on the given element with the given options.\n   * Bind a click event on the element\n   * Adds a search icon on the element\n   * @param element\n   * @param options\n   * @param bindings\n   */\n  constructor(public element: HTMLElement, public options?: ISearchButtonOptions, bindings?: IComponentBindings) {\n    super(element, SearchButton.ID, bindings);\n\n    this.bind.on(element, 'click', () => this.handleClick());\n    // Provide a magnifier icon if element contains nothing\n    if (Utils.trim($$(this.element).text()) == '') {\n      element.innerHTML = '<span class=\\'coveo-icon\\'>' + l('Search') + '</span>';\n    }\n  }\n\n  /**\n   * Trigger the click handler\n   */\n  public click() {\n    this.handleClick();\n  }\n\n  private handleClick() {\n    this.logger.debug('Performing query following button click');\n    this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.searchboxSubmit, {});\n    this.queryController.executeQuery();\n  }\n}\n\nInitialization.registerAutoCreateComponent(SearchButton);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/SearchButton/SearchButton.ts\n **/","import {IOmniboxOptions} from '../Omnibox/Omnibox';\nimport {Component} from '../Base/Component';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {Omnibox} from '../Omnibox/Omnibox';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {SearchButton} from '../SearchButton/SearchButton';\nimport {Querybox} from '../Querybox/Querybox';\nimport {$$} from '../../utils/Dom';\nimport {Initialization} from '../Base/Initialization';\n\nexport interface ISearchboxOptions extends IOmniboxOptions {\n  addSearchButton?: boolean;\n  enableOmnibox?: boolean;\n}\n\n/**\n * This component is mostly used for simplicity purpose because it creates 2 components that are very frequently used together.<br/>\n * This component attaches itself to a div and takes care of instantiating a {@link Querybox} component or a {@link Omnibox} component, depending on the options.<br/>\n * Add a {@link SearchButton} component if desired, and appends them to the same div.\n */\nexport class Searchbox extends Component {\n  static ID = 'Searchbox';\n  static parent = Omnibox;\n\n  /**\n   * Possible options for the {@link Searchbox}\n   * @componentOptions\n   */\n  static options: ISearchboxOptions = {\n    /**\n     * Specifies whether the search box instantiates a {@link SearchButton}.<br/>\n     * Default value is `true`.\n     */\n    addSearchButton: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    /**\n     * Specifies whether the search box instantiates a {@link Omnibox} component.<br/>\n     * Otherwise, the search box instantiates a {@link Querybox} component.<br/>\n     * Default value is `false`.\n     */\n    enableOmnibox: ComponentOptions.buildBooleanOption({ defaultValue: false })\n  };\n\n  /**\n   * Instance of the {@link SearchButton}\n   */\n  public searchButton: SearchButton;\n\n  /**\n   * Instance of compomnent that allows user to input query.<br/>\n   * Can be a {@link Querybox} or {@link Omnibox}\n   */\n  public searchbox: Querybox | Omnibox;\n\n  /**\n   * Create a new Searchbox<br/>\n   * Create a new Coveo.Magicbox instance and wrap magic box method (on blur, on submit etc).<br/>\n   * Bind event on `buildingQuery` and on redirection (for standalone box).\n   * @param element The `HTMLElement` on which the element will be instantiated. This cannot be an `HTMLInputElement` for technical reason\n   * @param options The options for the component. Will be merged with the options from the component set directly on the `HTMLElement`.\n   * @param bindings The bindings that the component requires to function normally. If not set, will automatically resolve them (with slower execution time).\n   */\n  constructor(public element: HTMLElement, public options?: ISearchboxOptions, bindings?: IComponentBindings) {\n    super(element, Searchbox.ID, bindings);\n\n    this.options = ComponentOptions.initComponentOptions(element, Searchbox, options);\n\n    if (this.options.inline) {\n      $$(element).addClass('coveo-inline');\n    }\n\n    if (this.options.addSearchButton) {\n      var anchor = document.createElement('a');\n      this.element.appendChild(anchor);\n      this.searchButton = new SearchButton(anchor, undefined, bindings);\n    }\n\n    var div = document.createElement('div');\n    this.element.appendChild(div);\n\n    if (this.options.enableOmnibox) {\n      this.searchbox = new Omnibox(div, this.options, bindings);\n    } else {\n      this.searchbox = new Querybox(div, this.options, bindings);\n    }\n  }\n}\n\nSearchbox.options = _.extend({}, Searchbox.options, Omnibox.options, Querybox.options);\n\n// Only parse omnibox option if omnibox is enabled\n_.each(Searchbox.options, (value, key: string) => {\n  if (key in Omnibox.options && !(key in Querybox.options)) {\n    Searchbox.options[key] = _.extend({ depend: 'enableOmnibox' }, value);\n  }\n});\n\nInitialization.registerAutoCreateComponent(Searchbox);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Searchbox/Searchbox.ts\n **/","///<reference path=\"FieldAddon.ts\" />\n///<reference path=\"QueryExtensionAddon.ts\" />\n///<reference path=\"RevealQuerySuggestAddon.ts\" />\n///<reference path=\"OldOmniboxAddon.ts\" />\nimport {IQueryboxOptions} from '../Querybox/Querybox';\nimport {Component} from '../Base/Component';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {QueryEvents, IBuildingQueryEventArgs} from '../../events/QueryEvents';\nimport {StandaloneSearchInterfaceEvents} from '../../events/StandaloneSearchInterfaceEvents';\nimport {MODEL_EVENTS, IAttributeChangedEventArg} from '../../models/Model';\nimport {QUERY_STATE_ATTRIBUTES} from '../../models/QueryStateModel';\nimport {IAnalyticsNoMeta, analyticsActionCauseList, IAnalyticsOmniboxSuggestionMeta} from '../Analytics/AnalyticsActionListMeta';\nimport {OmniboxEvents, IOmniboxPreprocessResultForQueryEventArgs} from '../../events/OmniboxEvents';\nimport {$$} from '../../utils/Dom';\nimport {Assert} from '../../misc/Assert';\nimport {QueryStateModel} from '../../models/QueryStateModel';\nimport {Initialization} from '../Base/Initialization';\nimport {Querybox} from '../Querybox/Querybox';\nimport {FieldAddon} from './FieldAddon';\nimport {QueryExtensionAddon} from './QueryExtensionAddon';\nimport {RevealQuerySuggestAddon} from './RevealQuerySuggestAddon';\nimport {OldOmniboxAddon} from './OldOmniboxAddon';\nimport {QueryboxQueryParameters} from '../Querybox/QueryboxQueryParameters';\nimport {IAnalyticsActionCause} from '../Analytics/AnalyticsActionListMeta';\nimport {IDuringQueryEventArgs} from '../../events/QueryEvents';\nimport {PendingSearchAsYouTypeSearchEvent} from '../Analytics/PendingSearchAsYouTypeSearchEvent';\nimport {Utils} from '../../utils/Utils';\nimport {MagicBox} from '../../ExternalModulesShim';\n\nexport interface IPopulateOmniboxSuggestionsEventArgs {\n  omnibox: Omnibox;\n  suggestions: Array<Coveo.MagicBox.Suggestion[] | Promise<Coveo.MagicBox.Suggestion[]>>;\n}\n\nexport interface IOmniboxSuggestion extends Coveo.MagicBox.Suggestion {\n  executableConfidence?: number;\n}\n\nexport interface IOmniboxOptions extends IQueryboxOptions {\n  inline?: boolean;\n  enableFieldAddon?: boolean;\n  enableSimpleFieldAddon?: boolean;\n  listOfFields?: string[];\n  fieldAlias?: { [alias: string]: string };\n  enableRevealQuerySuggestAddon?: boolean;\n  enableQueryExtensionAddon?: boolean;\n  omniboxTimeout?: number;\n  placeholder?: string;\n  grammar?: (grammar: { start: string; expressions: { [id: string]: Coveo.MagicBox.ExpressionDef }; }) => { start: string; expressions: { [id: string]: Coveo.MagicBox.ExpressionDef } };\n}\n\nconst MINIMUM_EXECUTABLE_CONFIDENCE = 0.8;\n\n/**\n * This component is very similar to the simpler {@link Querybox} component and support all the same options/behavior except for the search-as-you-type feature.<br/>\n * In addition, it takes care of adding a type-ahead capability. The type-ahead and the suggestions it displays are customizable and extensible by any custom component.<br/>\n * The type-ahead is configurable by activating addon which are provided OOTB (facets, analytics suggestions, Reveal suggestions, and advanced Coveo syntax suggestions).<br/>\n * It is also possible for external code to provide suggestions.\n */\nexport class Omnibox extends Component {\n  public static ID = 'Omnibox';\n\n  /**\n   * The options for the omnibox\n   * @componentOptions\n   */\n  static options: IOmniboxOptions = {\n    /**\n     * Specifies that suggestions appearing in the omnibox should push the result down, instead of appearing over the results.<br/>\n     * Activate this as well a `SearchAsYouType` + Reveal suggestions for a cool effect!<br/>\n     * Default value is false\n     */\n    inline: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * Specifies whether a new query is automatically triggered whenever the user types new text inside the query box.<br/>\n     * Activate this as well a inline + Reveal suggestions for a cool effect!<br/>\n     * The default is `false`.\n     */\n    enableSearchAsYouType: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    /**\n     * When search as you type is enabled, specifies the delay in milliseconds before a new query is triggered when the user types new text inside the query box.<br/>\n     * The default value is 2000 milliseconds.\n     */\n    searchAsYouTypeDelay: ComponentOptions.buildNumberOption({\n      defaultValue: 2000,\n      min: 0,\n      depend: 'enableSearchAsYouType'\n    }),\n    /**\n     * Specifies whether the field addon should be enabled.<br/>\n     * The field addon allows the search box to highlight and complete field syntax.<br/>\n     * Default value is `false`.\n     *\n     * > Example:\n     * > You want to filter on a file type. You start typing @sysf and matching fields are proposed. You select the @sysfiletype suggestion, enter = and the available matching file types are proposed.\n     */\n    enableFieldAddon: ComponentOptions.buildBooleanOption({ defaultValue: false, depend: 'enableQuerySyntax' }),\n    enableSimpleFieldAddon: ComponentOptions.buildBooleanOption({ defaultValue: false, depend: 'enableFieldAddon' }),\n    listOfFields: ComponentOptions.buildFieldsOption({ depend: 'enableFieldAddon' }),\n    /**\n     * Specifies whether the Reveal query suggestions should be enabled.<br/>\n     * This implies that your integration has a proper Reveal integration configured.<br/>\n     * Default value is `false`.\n     */\n    enableRevealQuerySuggestAddon: ComponentOptions.buildBooleanOption({ defaultValue: false, alias: 'enableTopQueryAddon' }),\n    /**\n     * Specifies whether the query extension addon should be enabled.<br/>\n     * This allows the omnibox to complete the syntax for query extensions.<br/>\n     * Default value is `false`.\n     */\n    enableQueryExtensionAddon: ComponentOptions.buildBooleanOption({ defaultValue: false, depend: 'enableQuerySyntax' }),\n    /**\n     * Specifies a placeholder for input\n     */\n    placeholder: ComponentOptions.buildStringOption(),\n    /**\n     * Specifies a timeout before rejecting suggestions in the omnibox.<br/>\n     * Default value is 2000 (2 seconds).\n     */\n    omniboxTimeout: ComponentOptions.buildNumberOption({ defaultValue: 2000 })\n  };\n\n  public magicBox: Coveo.MagicBox.Instance;\n  private partialQueries: string[] = [];\n  private lastSuggestions: IOmniboxSuggestion[] = [];\n  private lastQuery: string;\n  private modifyEventTo: IAnalyticsActionCause;\n  private movedOnce = false;\n  private searchAsYouTypeTimeout: number;\n  private skipRevealAutoSuggest = false;\n\n  /**\n   * Create a new omnibox with, enable required addons, and bind events on letious query events.\n   */\n  constructor(public element: HTMLElement, public options?: IOmniboxOptions, bindings?: IComponentBindings) {\n    super(element, Omnibox.ID, bindings);\n\n    this.options = ComponentOptions.initComponentOptions(element, Omnibox, options);\n\n    let grammar: { start: string; expressions: { [id: string]: Coveo.MagicBox.ExpressionDef } };\n\n    if (this.options.enableQuerySyntax) {\n      grammar = MagicBox.Grammars.Expressions(MagicBox.Grammars.Complete);\n\n      if (this.options.enableFieldAddon) {\n        new FieldAddon(this);\n      }\n      if (this.options.fieldAlias != null) {\n        this.options.listOfFields = this.options.listOfFields || [];\n        this.options.listOfFields = this.options.listOfFields.concat(_.keys(this.options.fieldAlias));\n      }\n      if (this.options.enableQueryExtensionAddon) {\n        new QueryExtensionAddon(this);\n      }\n    } else {\n      grammar = { start: 'Any', expressions: { Any: /.*/ } };\n    }\n\n    if (this.options.enableRevealQuerySuggestAddon) {\n      new RevealQuerySuggestAddon(this);\n    }\n\n    new OldOmniboxAddon(this);\n\n    if (this.options.grammar != null) {\n      grammar = this.options.grammar(grammar);\n    }\n\n    this.magicBox = MagicBox.create(element, new MagicBox.Grammar(grammar.start, grammar.expressions), {\n      inline: this.options.inline,\n      selectableSuggestionClass: 'coveo-omnibox-selectable',\n      selectedSuggestionClass: 'coveo-omnibox-selected',\n      suggestionTimeout: this.options.omniboxTimeout\n    });\n\n    this.bind.onRootElement(QueryEvents.buildingQuery, (args: IBuildingQueryEventArgs) => this.handleBuildingQuery(args));\n    this.bind.onRootElement(StandaloneSearchInterfaceEvents.beforeRedirect, () => this.handleBeforeRedirect());\n    this.bind.onRootElement(QueryEvents.querySuccess, () => this.handleQuerySuccess());\n    this.bind.onQueryState(MODEL_EVENTS.CHANGE_ONE, QUERY_STATE_ATTRIBUTES.Q, (args: IAttributeChangedEventArg) => this.handleQueryStateChanged(args));\n    if (this.isRevealAutoSuggestion()) {\n      this.bind.onRootElement(QueryEvents.duringQuery, (args: IDuringQueryEventArgs) => this.handleDuringQuery(args));\n    }\n    this.setupMagicBox();\n  }\n\n  /**\n   * Trigger a query. The current input content will be added to the query.<br/>\n   * If the content of the input has not changed since the last submit, no new query will be triggered.\n   */\n  public submit() {\n    this.magicBox.clearSuggestion();\n    this.updateQueryState();\n    this.triggerNewQuery(false, () => {\n      this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.searchboxSubmit, {});\n    });\n  }\n\n  /**\n   * Get the current content of the input\n   * @returns {string}\n   */\n  public getText() {\n    return this.magicBox.getText();\n  }\n\n  /**\n   * Set the content of the input\n   * @param text The string to set in the input\n   */\n  public setText(text: string) {\n    this.magicBox.setText(text);\n    this.updateQueryState();\n  }\n\n  /**\n   * Clear the content of the input\n   */\n  public clear() {\n    this.magicBox.clear();\n  }\n\n  /**\n   * Get the `HTMLInputElement` of the omnibox\n   */\n  public getInput() {\n    return <HTMLInputElement>this.magicBox.element.querySelector('input');\n  }\n\n  public getResult() {\n    return this.magicBox.getResult();\n  }\n\n  public getDisplayedResult() {\n    return this.magicBox.getDisplayedResult();\n  }\n\n  public getCursor() {\n    return this.magicBox.getCursor();\n  }\n\n  public resultAtCursor(match?: string | { (result: Coveo.MagicBox.Result): boolean; }) {\n    return this.magicBox.resultAtCursor(match);\n  }\n\n  private setupMagicBox() {\n    this.magicBox.onmove = () => {\n      // We assume that once the user has moved it's selection, it becomes an explicit omnibox analytics event\n      if (this.isRevealAutoSuggestion()) {\n        this.modifyEventTo = analyticsActionCauseList.omniboxAnalytics;\n      }\n      this.movedOnce = true;\n    };\n\n    this.magicBox.onfocus = () => {\n      if (this.isRevealAutoSuggestion()) {\n        // This flag is used to block the automatic query when the UI is loaded with a query (#q=foo)\n        // and then the input is focused. We want to block that query, even if it match the suggestion\n        // Only when there is an actual change in the input (user typing something) is when we want the automatic query to kick in\n        this.skipRevealAutoSuggest = true;\n      }\n    };\n\n    this.magicBox.onsuggestions = (suggestions: IOmniboxSuggestion[]) => {\n      // If text is empty, this can mean that user selected text from the search box\n      // and hit \"delete\" : Reset the partial queries in this case\n      if (Utils.isEmptyString(this.getText())) {\n        this.partialQueries = [];\n      }\n      this.movedOnce = false;\n      this.lastSuggestions = suggestions;\n      if (this.isRevealAutoSuggestion() && !this.skipRevealAutoSuggest) {\n        this.searchAsYouType();\n      }\n    };\n\n    if (this.options.enableSearchAsYouType) {\n      $$(this.element).addClass('coveo-magicbox-search-as-you-type');\n    }\n\n    this.magicBox.onchange = () => {\n      this.skipRevealAutoSuggest = false;\n      let text = this.getText();\n      if (text != undefined && text != '') {\n        if (this.isRevealAutoSuggestion()) {\n          if (this.movedOnce) {\n            this.searchAsYouType(true);\n          }\n        } else if (this.options.enableSearchAsYouType) {\n          this.searchAsYouType(true);\n        }\n      } else {\n        this.clear();\n      }\n\n    };\n\n    if (this.options.placeholder) {\n      (<HTMLInputElement>this.magicBox.element.querySelector('input')).placeholder = this.options.placeholder;\n    }\n    this.magicBox.onsubmit = () => {\n      this.magicBox.clearSuggestion();\n      this.updateQueryState();\n      this.triggerNewQuery(false, () => {\n        this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.searchboxSubmit, {});\n      });\n    };\n\n    this.magicBox.onselect = (suggestion: IOmniboxSuggestion) => {\n      let index = _.indexOf(this.lastSuggestions, suggestion);\n      let suggestions = _.map(this.lastSuggestions, (suggestion) => suggestion.text);\n      this.magicBox.clearSuggestion();\n      this.updateQueryState();\n      // A bit tricky here : When it's reveal auto suggestions\n      // the mouse selection and keyboard selection acts differently :\n      // keyboard selection will automatically do the query (which will log a search as you type event -> further modified by this.modifyEventTo if needed)\n      // mouse selection will not \"auto\" send the query.\n      // the movedOnce variable detect the keyboard movement, and is used to differentiate mouse vs keyboard\n      if (!this.isRevealAutoSuggestion()) {\n        this.usageAnalytics.cancelAllPendingEvents();\n        this.triggerNewQuery(false, () => {\n          this.usageAnalytics.logSearchEvent<IAnalyticsOmniboxSuggestionMeta>(analyticsActionCauseList.omniboxAnalytics, this.buildCustomDataForPartialQueries(index, suggestions));\n        });\n      } else if (this.isRevealAutoSuggestion() && this.movedOnce) {\n        this.handleRevealAutoSuggestionWithKeyboard(index, suggestions);\n      } else if (this.isRevealAutoSuggestion() && !this.movedOnce) {\n        this.handleRevealAutoSuggestionsWithMouse(index, suggestions);\n      }\n\n      // Consider a selection like a reset of the partial queries (it's the end of a suggestion pattern)\n      if (this.isRevealAutoSuggestion()) {\n        this.partialQueries = [];\n      }\n    };\n\n    this.magicBox.onblur = () => {\n      if (this.options.enableSearchAsYouType && !this.options.inline) {\n        this.setText(this.lastQuery);\n      } else {\n        this.updateQueryState();\n      }\n      if (this.isRevealAutoSuggestion()) {\n        this.usageAnalytics.sendAllPendingEvents();\n      }\n    };\n\n    this.magicBox.onclear = () => {\n      this.updateQueryState();\n      if (this.options.triggerQueryOnClear) {\n        this.triggerNewQuery(false, () => {\n          this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.searchboxClear, {});\n        });\n      }\n    };\n\n    if (this.options.autoFocus) {\n      this.magicBox.focus();\n    }\n    this.magicBox.getSuggestions = () => this.handleSuggestions();\n  }\n\n  private handleRevealAutoSuggestionWithKeyboard(index: number, suggestions: string[]) {\n    if (this.searchAsYouTypeTimeout) {\n      // Here, there is currently a search as you typed queued up :\n      // Think : user typed very quickly, then very quickly selected a suggestion (without waiting for the search as you type)\n      // Cancel the search as you type query, then immediately do the query with the selection (+analytics event with the selection)\n      this.usageAnalytics.cancelAllPendingEvents();\n      clearTimeout(this.searchAsYouTypeTimeout);\n      this.searchAsYouTypeTimeout = undefined;\n      this.triggerNewQuery(false, () => {\n        this.usageAnalytics.logSearchEvent<IAnalyticsOmniboxSuggestionMeta>(analyticsActionCauseList.omniboxAnalytics, this.buildCustomDataForPartialQueries(index, suggestions));\n      });\n\n    } else {\n      // Here, the search as you type query has returned, but the analytics event has not ye been sent.\n      // Think : user typed slowly, the query returned, and then the user selected a suggestion.\n      // Since the analytics event has not yet been sent (search as you type event have a 5 sec delay)\n      // modify the pending event, then send the newly modified analytics event immediately.\n      this.modifyEventTo = analyticsActionCauseList.omniboxAnalytics;\n      this.modifyCustomDataOnPending(index, suggestions);\n      this.usageAnalytics.sendAllPendingEvents();\n    }\n  }\n\n  private handleRevealAutoSuggestionsWithMouse(index: number, suggestions: string[]) {\n    if (this.searchAsYouTypeTimeout || index != 0) {\n      // Here : the user either very quickly chose the first suggestion, and the search as you type is still queued up.\n      // OR\n      // the user chose something different then the first suggestion.\n      // Remove the search as you type if it's there, and do the query with the suggestion directly.\n      this.clearSearchAsYouType();\n      this.usageAnalytics.cancelAllPendingEvents();\n      this.triggerNewQuery(false, () => {\n        this.usageAnalytics.logSearchEvent<IAnalyticsOmniboxSuggestionMeta>(analyticsActionCauseList.omniboxAnalytics, this.buildCustomDataForPartialQueries(index, suggestions));\n      });\n\n    } else {\n      // Here : the user either very slowly chose a suggestion, and there is no search as you typed queued up\n      // AND\n      // the user chose the first suggestion.\n      // this means the query is already returned, but the analytics event is still queued up.\n      // modify the analytics event, and send it.\n      this.modifyEventTo = analyticsActionCauseList.omniboxAnalytics;\n      this.modifyCustomDataOnPending(index, suggestions);\n      this.usageAnalytics.sendAllPendingEvents();\n    }\n  }\n\n  private modifyCustomDataOnPending(index: number, suggestions: string[]) {\n    let pendingEvt = this.usageAnalytics.getPendingSearchEvent();\n    if (pendingEvt instanceof PendingSearchAsYouTypeSearchEvent) {\n      let newCustomData = this.buildCustomDataForPartialQueries(index, suggestions);\n      _.each(_.keys(newCustomData), (k: string) => {\n        (<PendingSearchAsYouTypeSearchEvent>pendingEvt).modifyCustomData(k, newCustomData[k]);\n      });\n    }\n  }\n\n  private buildCustomDataForPartialQueries(index: number, suggestions: string[]): IAnalyticsOmniboxSuggestionMeta {\n    return {\n      partialQueries: this.cleanCustomData(this.partialQueries),\n      suggestionRanking: index,\n      suggestions: this.cleanCustomData(suggestions),\n      partialQuery: _.last(this.partialQueries)\n    };\n  }\n\n  private cleanCustomData(toClean: string[], rejectLength = 256) {\n    // Filter out only consecutive values that are the identical\n    toClean = _.filter(toClean, (partial: string, pos?: number, array?: string[]) => {\n      return pos === 0 || partial !== array[pos - 1];\n    });\n\n    // Custom dimensions cannot be an array in analytics service: Send a string joined by ; instead.\n    // Need to replace ;\n    toClean = _.map(toClean, (partial) => {\n      return partial.replace(/;/g, '');\n    });\n\n    // Reduce right to get the last X words that adds to less then rejectLength\n    let reducedToRejectLengthOrLess = [];\n    _.reduceRight(toClean, (memo: number, partial: string) => {\n      let totalSoFar = memo + partial.length;\n      if (totalSoFar <= rejectLength) {\n        reducedToRejectLengthOrLess.push(partial);\n      }\n      return totalSoFar;\n    }, 0);\n    toClean = reducedToRejectLengthOrLess.reverse();\n    let ret = toClean.join(';');\n\n    // analytics service can store max 256 char in a custom event\n    // if we're over that, call cleanup again with an arbitrary 10 less char accepted\n    if (ret.length >= 256) {\n      return this.cleanCustomData(toClean, rejectLength - 10);\n    }\n\n    return toClean.join(';');\n  }\n\n  private handleSuggestions() {\n    let suggestionsEventArgs: IPopulateOmniboxSuggestionsEventArgs = {\n      suggestions: [],\n      omnibox: this\n    };\n    this.bind.trigger(this.element, OmniboxEvents.populateOmniboxSuggestions, suggestionsEventArgs);\n    let text = this.getText();\n    if (!Utils.isNullOrEmptyString(text)) {\n      this.partialQueries.push(text);\n    }\n    return suggestionsEventArgs.suggestions;\n  }\n\n  private handleBeforeRedirect() {\n    this.updateQueryState();\n  }\n\n  private handleBuildingQuery(data: IBuildingQueryEventArgs) {\n    Assert.exists(data);\n    Assert.exists(data.queryBuilder);\n    this.updateQueryState();\n    this.lastQuery = this.getQuery(data.searchAsYouType);\n\n    let result: Coveo.MagicBox.Result = this.lastQuery == this.magicBox.getDisplayedResult().input ? this.magicBox.getDisplayedResult().clone() : this.magicBox.grammar.parse(this.lastQuery).clean();\n    let preprocessResultForQueryArgs: IOmniboxPreprocessResultForQueryEventArgs = {\n      result: result\n    };\n\n    if (this.options.enableQuerySyntax) {\n      let notQuotedValues = preprocessResultForQueryArgs.result.findAll('FieldValueNotQuoted');\n      _.each(notQuotedValues, (value: Coveo.MagicBox.Result) => value.value = '\"' + value.value.replace(/\"|\\u00A0/g, ' ') + '\"');\n      if (this.options.fieldAlias) {\n        let fieldNames = preprocessResultForQueryArgs.result.findAll((result: Coveo.MagicBox.Result) => result.expression.id == 'FieldName' && result.isSuccess());\n        _.each(fieldNames, (result: Coveo.MagicBox.Result) => {\n          let alias = _.find(_.keys(this.options.fieldAlias), (alias: string) => alias.toLowerCase() == result.value.toLowerCase());\n          if (alias != null) {\n            result.value = this.options.fieldAlias[alias];\n          }\n        });\n      }\n    }\n\n    this.bind.trigger(this.element, OmniboxEvents.omniboxPreprocessResultForQuery, preprocessResultForQueryArgs);\n    let query = preprocessResultForQueryArgs.result.toString();\n    new QueryboxQueryParameters(this.options).addParameters(data.queryBuilder, query);\n  }\n\n\n  private triggerNewQuery(searchAsYouType: boolean, analyticsEvent: () => void) {\n    clearTimeout(this.searchAsYouTypeTimeout);\n    let text = this.getQuery(searchAsYouType);\n    if (this.shouldExecuteQuery(searchAsYouType)) {\n      this.lastQuery = text;\n      analyticsEvent();\n      this.queryController.executeQuery({\n        searchAsYouType: searchAsYouType,\n        logInActionsHistory: true\n      });\n    }\n  }\n\n  private getQuery(searchAsYouType: boolean) {\n    let query: string;\n    if (searchAsYouType) {\n      query = this.magicBox.getWordCompletion();\n      if (query == null && this.lastSuggestions != null && this.lastSuggestions.length > 0) {\n        let textSuggestion = _.find(this.lastSuggestions, (suggestion: IOmniboxSuggestion) => suggestion.text != null);\n        if (textSuggestion != null) {\n          query = textSuggestion.text;\n        }\n      }\n    }\n    return query || this.magicBox.getText();\n  }\n\n  public updateQueryState() {\n    this.queryStateModel.set(QueryStateModel.attributesEnum.q, this.magicBox.getText());\n  }\n\n  private handleQueryStateChanged(args: IAttributeChangedEventArg) {\n    Assert.exists(args);\n    let q = <string>args.value;\n    if (q != this.magicBox.getText()) {\n      this.magicBox.setText(q);\n    }\n  }\n\n  private handleQuerySuccess() {\n    if (!this.isRevealAutoSuggestion()) {\n      this.partialQueries = [];\n    }\n  }\n\n  private handleDuringQuery(args: IDuringQueryEventArgs) {\n    // When the query results returns ... (args.promise)\n    args.promise.then(() => {\n      // Get a handle on a pending search as you type (those events are delayed, not sent instantly)\n      let pendingEvent = this.usageAnalytics.getPendingSearchEvent();\n      if (pendingEvent instanceof PendingSearchAsYouTypeSearchEvent) {\n        (<PendingSearchAsYouTypeSearchEvent>pendingEvent).beforeResolve.then((evt) => {\n          // Check if we need to modify the event type beforeResolving it\n          args.promise.then(() => {\n            if (this.modifyEventTo) {\n              evt.modifyEventCause(this.modifyEventTo);\n              this.modifyEventTo = null;\n            }\n          });\n        });\n      }\n    });\n  }\n\n  private searchAsYouType(forceExecuteQuery = false) {\n    this.clearSearchAsYouType();\n    if (this.shouldExecuteQuery(true)) {\n      this.searchAsYouTypeTimeout = setTimeout(() => {\n        if (this.suggestionShouldTriggerQuery() || forceExecuteQuery) {\n          let suggestions = _.map(this.lastSuggestions, (suggestion) => suggestion.text);\n          let index = _.indexOf(suggestions, this.magicBox.getWordCompletion());\n          this.triggerNewQuery(true, () => {\n            this.usageAnalytics.logSearchAsYouType<IAnalyticsOmniboxSuggestionMeta>(analyticsActionCauseList.searchboxAsYouType, this.buildCustomDataForPartialQueries(index, suggestions));\n          });\n          this.clearSearchAsYouType();\n        }\n\n      }, this.options.searchAsYouTypeDelay);\n    }\n  }\n\n  private isRevealAutoSuggestion() {\n    return this.options.enableSearchAsYouType && this.options.enableRevealQuerySuggestAddon;\n  }\n\n  private shouldExecuteQuery(searchAsYouType: boolean) {\n    let text = this.getQuery(searchAsYouType);\n    return this.lastQuery != text && text != null;\n  }\n\n  private suggestionShouldTriggerQuery(suggestions = this.lastSuggestions) {\n    if (this.shouldExecuteQuery(true)) {\n      if (suggestions && suggestions[0]) {\n        let suggestion = suggestions[0];\n        // If we have access to a confidence level, return true if we are equal or above the minimum confidence level.\n        if (suggestion && suggestion.executableConfidence != undefined) {\n          return suggestion.executableConfidence >= MINIMUM_EXECUTABLE_CONFIDENCE;\n        }\n        // If we don't have access to a confidence level, return true only if it \"starts with\" the content of the search box\n        if (suggestion.text && suggestion.text.indexOf(this.magicBox.getText()) == 0) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  private clearSearchAsYouType() {\n    clearTimeout(this.searchAsYouTypeTimeout);\n    this.searchAsYouTypeTimeout = undefined;\n  }\n}\n\nOmnibox.options = _.extend({}, Omnibox.options, Querybox.options);\nInitialization.registerAutoCreateComponent(Omnibox);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Omnibox/Omnibox.ts\n **/","///<reference path='Omnibox.ts'/>\nimport {Omnibox, IPopulateOmniboxSuggestionsEventArgs, IOmniboxSuggestion} from './Omnibox';\nimport {OmniboxEvents} from '../../events/OmniboxEvents';\nimport {IFieldDescription} from '../../rest/FieldDescription';\nimport {IEndpointError} from '../../rest/EndpointError';\nimport {MagicBox} from '../../ExternalModulesShim';\n\ninterface IFieldAddonHash {\n  type: string;\n  before: string;\n  after: string;\n  current: string;\n  field?: string;\n}\n\nexport class FieldAddon {\n  static INDEX = 64;\n\n  cache: { [hash: string]: Promise<string[]> } = {};\n\n  constructor(public omnibox: Omnibox) {\n    this.omnibox.bind.on(this.omnibox.element, OmniboxEvents.populateOmniboxSuggestions, (args: IPopulateOmniboxSuggestionsEventArgs) => {\n      args.suggestions.push(this.getSuggestion());\n    });\n  }\n\n  public getSuggestion(): Promise<IOmniboxSuggestion[]> {\n    var hash = this.getHash();\n    if (hash == null) {\n      return null;\n    }\n    var hashString = this.hashToString(hash);\n    if (this.cache[hashString] != null) {\n      return this.hashValueToSuggestion(hash, this.cache[hashString]);\n    }\n    var values: Promise<IOmniboxSuggestion[]>;\n    if (hash.type == 'FieldName') {\n      values = this.fieldNames(hash.current);\n    }\n    if (hash.type == 'FieldValue') {\n      values = this.fieldValues(hash.field, hash.current);\n    }\n    if (hash.type == 'SimpleFieldName') {\n      values = this.simpleFieldNames(hash.current);\n    }\n    this.cache[hashString] = values;\n    values.catch(() => {\n      delete this.cache[hashString];\n    });\n    return this.hashValueToSuggestion(hash, values);\n  }\n\n  private getHash(): IFieldAddonHash {\n    var fieldName: Coveo.MagicBox.Result = _.last(this.omnibox.resultAtCursor('FieldName'));\n    if (fieldName != null) {\n      fieldName = fieldName.findParent('Field') || fieldName;\n      var currentField = fieldName.toString();\n      var before = fieldName.before();\n      var after = fieldName.after();\n      return { type: 'FieldName', current: currentField, before: before, after: after };\n    }\n    var fieldValue: Coveo.MagicBox.Result = _.last(this.omnibox.resultAtCursor('FieldValue'));\n    if (fieldValue) {\n      var fieldQuery = fieldValue.findParent('FieldQuery') || (this.omnibox.options.enableSimpleFieldAddon && fieldValue.findParent('FieldSimpleQuery'));\n      if (fieldQuery) {\n        var field = fieldQuery.find('FieldName').toString();\n        if (this.omnibox.options.fieldAlias) {\n          if (field in this.omnibox.options.fieldAlias) {\n            field = this.omnibox.options.fieldAlias[field];\n          }\n        }\n        var value = fieldValue.toString();\n        var before = fieldValue.before();\n        var after = fieldValue.after();\n        return { type: 'FieldValue', field: field, current: value, before: before, after: after };\n      }\n    }\n    if (this.omnibox.options.enableSimpleFieldAddon) {\n      var word: Coveo.MagicBox.Result = _.last(this.omnibox.resultAtCursor('Word'));\n      if (word != null) {\n        var currentField = word.toString();\n        var before = word.before();\n        var after = word.after();\n        return { type: 'SimpleFieldName', current: currentField, before: before, after: after };\n      }\n    }\n  }\n\n  private hashToString(hash: IFieldAddonHash) {\n    if (hash == null) {\n      return null;\n    }\n    return hash.type + hash.current + (hash.field || '');\n  }\n\n  private hashValueToSuggestion(hash: IFieldAddonHash, promise: Promise<string[]>): Promise<IOmniboxSuggestion[]> {\n    return promise.then((values) => {\n      var suggestions: IOmniboxSuggestion[] = _.map(values, (value: string, i) => {\n        return {\n          text: hash.before + (hash.current.toLowerCase().indexOf(value.toLowerCase()) == 0 ? hash.current + value.substr(hash.current.length) : value) + hash.after,\n          html: MagicBox.Utils.highlightText(value, hash.current, true),\n          index: FieldAddon.INDEX - i / values.length\n        };\n      });\n      return suggestions;\n    });\n  }\n\n  private fields: Promise<string[]>;\n\n  private getFields(): Promise<string[]> {\n    if (this.fields == null) {\n      this.fields = new Promise<string[]>((resolve, reject) => {\n        if (this.omnibox.options.listOfFields != null) {\n          resolve(this.omnibox.options.listOfFields);\n        } else {\n          var promise: Promise<IFieldDescription[] | IEndpointError> = this.omnibox.queryController.getEndpoint().listFields();\n          promise.then((fieldDescriptions: IFieldDescription[]) => {\n            var fieldNames = _.chain(fieldDescriptions)\n              .filter((fieldDescription: IFieldDescription) => fieldDescription.includeInQuery && fieldDescription.groupByField)\n              .map((fieldDescription: IFieldDescription) => fieldDescription.name.substr(1))\n              .value();\n\n            resolve(fieldNames);\n          }).catch(() => {\n            reject();\n          });\n        }\n      });\n    }\n    return this.fields;\n  }\n\n  private fieldNames(current: string): Promise<IOmniboxSuggestion[]> {\n    var withAt = current.length > 0 && current[0] == '@';\n    var fieldName = withAt ? current.substr(1) : current;\n    var fieldNameLC = fieldName.toLowerCase();\n\n    return this.getFields().then((fields: string[]) => {\n      var matchFields = _.chain(fields)\n        .map((field: string) => {\n          return {\n            index: field.toLowerCase().indexOf(fieldNameLC),\n            field: withAt ? field : '@' + field\n          };\n        })\n        .filter((field) => {\n          return field.index != -1 && field.field.length > current.length;\n        })\n        .sortBy('index')\n        .map((field) => field.field)\n        .value();\n      matchFields = _.first(matchFields, 5);\n      return matchFields;\n    });\n  }\n\n  private fieldValues(field: string, current: string): Promise<IOmniboxSuggestion[]> {\n    return this.omnibox.queryController.getEndpoint().listFieldValues({\n      pattern: '.*' + current + '.*',\n      patternType: 'RegularExpression',\n      sortCriteria: 'occurrences',\n      field: '@' + field,\n      maximumNumberOfValues: 5\n    }).then((values) => {\n      return _.chain(values)\n        .map((value) => {\n          return {\n            index: value.value.toLowerCase().indexOf(current),\n            value: value.value\n          };\n        })\n        .filter((value) => {\n          return value.value.length > current.length;\n        })\n        .sortBy('index')\n        .map((value) => {\n          return value.value.replace(/ /g, '\\u00A0');\n        })\n        .value();\n    });\n  }\n\n  private simpleFieldNames(current: string): Promise<IOmniboxSuggestion[]> {\n    var fieldName = current;\n    var fieldNameLC = fieldName.toLowerCase();\n\n    return this.getFields().then((fields: string[]) => {\n      var matchFields = _.chain(fields)\n        .map((field: string) => {\n          return {\n            index: field.toLowerCase().indexOf(fieldNameLC),\n            field: field + ':'\n          };\n        })\n        .filter((field) => {\n          return field.index != -1 && field.field.length > current.length;\n        })\n        .sortBy('index')\n        .map((field) => field.field)\n        .value();\n      matchFields = _.first(matchFields, 5);\n      return matchFields;\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Omnibox/FieldAddon.ts\n **/","///<reference path='Omnibox.ts'/>\nimport {OmniboxEvents} from '../../events/OmniboxEvents';\nimport {Omnibox, IPopulateOmniboxSuggestionsEventArgs, IOmniboxSuggestion} from './Omnibox';\nimport {IExtension} from '../../rest/Extension';\nimport {MagicBox} from '../../ExternalModulesShim';\n\ninterface IQueryExtensionAddonHash {\n  type: string;\n  before: string;\n  after: string;\n  current: string;\n  name?: string;\n  used?: string[];\n}\n\nexport class QueryExtensionAddon {\n  static INDEX = 62;\n\n  cache: { [hash: string]: Promise<string[]> } = {};\n\n  constructor(public omnibox: Omnibox) {\n    this.omnibox.bind.on(this.omnibox.element, OmniboxEvents.populateOmniboxSuggestions, (args: IPopulateOmniboxSuggestionsEventArgs) => {\n      args.suggestions.push(this.getSuggestion());\n    });\n  }\n\n  public getSuggestion(): Promise<IOmniboxSuggestion[]> {\n    var hash = this.getHash(this.omnibox.magicBox);\n    if (hash == null) {\n      return null;\n    }\n    var hashString = this.hashToString(hash);\n    if (this.cache[hashString] != null) {\n      return this.hashValueToSuggestion(hash, this.cache[hashString]);\n    }\n    var values = (hash.type == 'QueryExtensionName' ? this.names(hash.current) : this.attributeNames(hash.name, hash.current, hash.used));\n    this.cache[hashString] = values;\n    values.catch(() => {\n      delete this.cache[hashString];\n    });\n    return this.hashValueToSuggestion(hash, values);\n  }\n\n  private getHash(magicBox: Coveo.MagicBox.Instance): IQueryExtensionAddonHash {\n    var queryExtension: Coveo.MagicBox.Result = _.last(magicBox.resultAtCursor('QueryExtension'));\n    if (queryExtension != null) {\n      var queryExtensionArgumentResults = queryExtension.findAll('QueryExtensionArgument');\n      var current = _.last(magicBox.resultAtCursor('QueryExtensionName'));\n      if (current != null) {\n        return {\n          type: 'QueryExtensionName',\n          current: current.toString(),\n          before: current.before(),\n          after: current.after()\n        };\n      }\n\n      current = _.last(magicBox.resultAtCursor('QueryExtensionArgumentName'));\n      if (current != null) {\n\n        var used: string[] = _.chain(queryExtensionArgumentResults)\n          .map((result) => {\n            var name = result.find('QueryExtensionArgumentName');\n            return name && name.toString();\n          })\n          .compact()\n          .value();\n\n        var name = queryExtension.find('QueryExtensionName').toString();\n\n        return {\n          type: 'QueryExtensionArgumentName',\n          current: current.toString(),\n          before: current.before(),\n          after: current.after(),\n          name: name,\n          used: used\n        };\n      }\n    }\n    return null;\n  }\n\n  private hashToString(hash: IQueryExtensionAddonHash) {\n    if (hash == null) {\n      return null;\n    }\n    return [hash.type, hash.current, (hash.name || ''), (hash.used ? hash.used.join() : '')].join();\n  }\n\n  private hashValueToSuggestion(hash: IQueryExtensionAddonHash, promise: Promise<string[]>): Promise<IOmniboxSuggestion[]> {\n    return promise.then((values) => {\n      var suggestions: IOmniboxSuggestion[] = _.map(values, (value, i) => {\n        return {\n          html: MagicBox.Utils.highlightText(value, hash.current, true),\n          text: hash.before + value + hash.after,\n          index: QueryExtensionAddon.INDEX - i / values.length\n        };\n      });\n      return suggestions;\n    });\n  }\n\n  private extensions: Promise<any>;\n\n  private getExtensions() {\n    if (this.extensions == null) {\n      this.extensions = this.omnibox.queryController.getEndpoint().extensions();\n    }\n    return this.extensions;\n  }\n\n  private names(current: string): Promise<string[]> {\n    var extensionName = current.toLowerCase();\n    return this.getExtensions().then((extensions: IExtension[]) => {\n      var matchExtensions = _.chain(extensions)\n        .map((extension: IExtension) => {\n          return {\n            index: extension.name.toLowerCase().indexOf(extensionName),\n            extension: extension.name\n          };\n        })\n        .filter((extension) => {\n          return extension.index != -1 && extension.extension.length > extensionName.length;\n        })\n        .sortBy('index')\n        .pluck('extension')\n        .value();\n      matchExtensions = _.first(matchExtensions, 5);\n      return matchExtensions;\n    });\n  }\n\n  private attributeNames(name: string, current: string, used: string[]): Promise<string[]> {\n    return this.getExtensions().then((extensions: IExtension[]) => {\n      var extension = _.find(extensions, (extension: IExtension) => extension.name == name);\n      if (extension == null) {\n        return [];\n      } else {\n        return _.filter(_.difference(extension.argumentNames, used), (argumentName: string) => argumentName.indexOf(current) == 0);\n      }\n    });\n  }\n\n  public hash() {\n    return;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Omnibox/QueryExtensionAddon.ts\n **/","///<reference path=\"Omnibox.ts\"/>\nimport {Omnibox, IPopulateOmniboxSuggestionsEventArgs, IOmniboxSuggestion} from './Omnibox';\nimport {$$} from '../../utils/Dom';\nimport {IRevealQuerySuggestCompletion, IRevealQuerySuggestRequest, IRevealQuerySuggestResponse} from '../../rest/RevealQuerySuggest';\nimport {ComponentOptionsModel} from '../../models/ComponentOptionsModel';\nimport {OmniboxEvents} from '../../events/OmniboxEvents';\nimport {StringUtils} from '../../utils/StringUtils';\n\nexport class RevealQuerySuggestAddon {\n\n  static INDEX = 60;\n\n  static suggestiontHtmlTemplate = _.template('<span<%= className? \\' class=\"\\'+className+\\'\"\\':\\'\\' %>><%- text %></span>');\n\n  private static suggestiontHtml(suggestion: IRevealQuerySuggestCompletion) {\n    return suggestion.highlighted.replace(/\\[(.*?)\\]|\\{(.*?)\\}|\\((.*?)\\)/g, (part, notMatched, matched, corrected) => {\n      var className = '';\n      if (matched) {\n        className = 'coveo-omnibox-hightlight';\n      }\n      if (corrected) {\n        className = 'coveo-omnibox-hightlight2';\n      }\n      return RevealQuerySuggestAddon.suggestiontHtmlTemplate({\n        className: className,\n        text: notMatched || matched || corrected\n      });\n    });\n  }\n\n  private static isPartialMatch(suggestion: IRevealQuerySuggestCompletion) {\n    // groups : 1=notMatched, 2=matched, 3=corrected\n    var parts = StringUtils.match(suggestion.highlighted, /\\[(.*?)\\]|\\{(.*?)\\}|\\((.*?)\\)/g);\n    var firstFail = _.find(parts, (part: string[]) => part[1] != null);\n    // if no fail found, this is a partial or a full match\n    if (firstFail == null) {\n      return true;\n    }\n    // if all right parts are notMatched, the right parts is autocomplete\n    return _.every(_.last(parts, _.indexOf(parts, firstFail) - parts.length), (part: string[]) => part[1] != null);\n  }\n\n  private cache: { [hash: string]: Promise<IOmniboxSuggestion[]> } = {};\n\n  constructor(public omnibox: Omnibox) {\n    $$(this.omnibox.element).on(OmniboxEvents.populateOmniboxSuggestions, (e: Event, args: IPopulateOmniboxSuggestionsEventArgs) => {\n      args.suggestions.push(this.getSuggestion());\n    });\n  }\n\n  public getSuggestion(): Promise<IOmniboxSuggestion[]> {\n\n    var text = this.omnibox.magicBox.getText();\n\n    if (text.length == 0) {\n      return null;\n    }\n\n    if (this.cache[text] != null) {\n      return this.cache[text];\n    }\n\n    let promise = this.getRevealQuerySuggest(text);\n    this.cache[text] = promise;\n    promise.catch(() => {\n      delete this.cache[text];\n    });\n    return this.cache[text];\n  }\n\n  private getRevealQuerySuggest(text: string): Promise<IOmniboxSuggestion[]> {\n    var payload = <IRevealQuerySuggestRequest>{ q: text },\n      language = <string>String['locale'],\n      searchHub = this.omnibox.getBindings().componentOptionsModel.get(ComponentOptionsModel.attributesEnum.searchHub),\n      pipeline = this.omnibox.getBindings().searchInterface.options.pipeline;\n\n    if (language) {\n      payload.language = language;\n    }\n\n    if (searchHub) {\n      payload.searchHub = searchHub;\n    }\n\n    if (pipeline) {\n      payload.pipeline = pipeline;\n    }\n\n    return this.omnibox.queryController.getEndpoint()\n      .getRevealQuerySuggest(payload)\n      .then((result: IRevealQuerySuggestResponse) => {\n        var completions = result.completions;\n        var results: IOmniboxSuggestion[] = _.map(completions, (completion, i) => {\n          return {\n            html: RevealQuerySuggestAddon.suggestiontHtml(completion),\n            text: completion.expression,\n            index: RevealQuerySuggestAddon.INDEX - i / completions.length,\n            partial: RevealQuerySuggestAddon.isPartialMatch(completion),\n            executableConfidence: completion.executableConfidence\n          };\n        });\n        return results;\n      });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Omnibox/RevealQuerySuggestAddon.ts\n **/","///<reference path=\"Omnibox.ts\"/>\nimport {Omnibox, IPopulateOmniboxSuggestionsEventArgs, IOmniboxSuggestion} from './Omnibox';\nimport {IOmniboxDataRow} from './OmniboxInterface';\nimport {OmniboxEvents, IPopulateOmniboxEventArgs, IPopulateOmniboxEventRow} from '../../events/OmniboxEvents';\nimport {$$} from '../../utils/Dom';\nimport {Utils} from '../../utils/Utils';\n\nexport class OldOmniboxAddon {\n  constructor(public omnibox: Omnibox) {\n    this.omnibox.bind.on(this.omnibox.element, OmniboxEvents.populateOmniboxSuggestions, (args: IPopulateOmniboxSuggestionsEventArgs) => {\n      _.each(this.getSuggestion(), (suggestion) => {\n        args.suggestions.push(suggestion);\n      });\n    });\n  }\n\n  private lastQuery: string;\n  private lastSuggestions: Promise<IOmniboxSuggestion[]>[];\n\n  public getSuggestion(): Promise<IOmniboxSuggestion[]>[] {\n    let text = this.omnibox.magicBox.getText();\n\n    if (text.length == 0) {\n      return null;\n    }\n\n    if (this.lastQuery == text) {\n      return this.lastSuggestions;\n    }\n\n    this.lastQuery = text;\n\n    let eventArgs = this.buildPopulateOmniboxEventArgs();\n    $$(this.omnibox.element).trigger(OmniboxEvents.populateOmnibox, eventArgs);\n\n    return this.lastSuggestions = this.rowsToSuggestions(eventArgs.rows);\n  }\n\n  private getCurrentQueryExpression() {\n    let cursorPos = this.omnibox.getCursor();\n    let value = this.omnibox.getText();\n    let length = value.length;\n    let start = cursorPos;\n    let end = cursorPos;\n    if (value[start] == ' ') {\n      start--;\n    }\n    while (start > 0 && value[start] != ' ') {\n      start--;\n    }\n    while (end < length && value[end] != ' ') {\n      end++;\n    }\n    return value.substring(start, end);\n  }\n\n  private getRegexToSearch(strValue?: string) {\n    if (strValue == null) {\n      strValue = this.omnibox.getText();\n    }\n    return new RegExp(Utils.escapeRegexCharacter(strValue), 'i');\n  }\n\n  private getQueryExpressionBreakDown() {\n    let ret = [];\n    let queryWords = this.omnibox.getText().split(' ');\n    _.each(queryWords, (word) => {\n      ret.push({\n        word: word,\n        regex: this.getRegexToSearch(word)\n      });\n    });\n    return ret;\n  }\n\n  private replace(searchValue: string, newValue: string) {\n    this.omnibox.setText(this.omnibox.getText().replace(searchValue, newValue));\n  }\n\n  private clearCurrentExpression() {\n    this.replace(this.getCurrentQueryExpression(), '');\n  }\n\n  private insertAt(at: number, toInsert: string) {\n    let oldValue = this.omnibox.getText();\n    let newValue = [oldValue.slice(0, at), toInsert, oldValue.slice(at)].join('');\n    this.omnibox.setText(newValue);\n  }\n\n  private replaceCurrentExpression(newValue: string) {\n    this.replace(this.getCurrentQueryExpression(), newValue);\n  }\n\n  private buildPopulateOmniboxEventArgs() {\n    let currentQueryExpression = this.getCurrentQueryExpression();\n    let ret: IPopulateOmniboxEventArgs = {\n      rows: [],\n      completeQueryExpression: {\n        word: this.omnibox.getText(),\n        regex: this.getRegexToSearch()\n      },\n      currentQueryExpression: {\n        word: currentQueryExpression,\n        regex: this.getRegexToSearch(currentQueryExpression)\n      },\n      allQueryExpressions: this.getQueryExpressionBreakDown(),\n      cursorPosition: this.omnibox.getCursor(),\n      clear: () => {\n        this.omnibox.clear();\n      },\n      clearCurrentExpression: () => {\n        this.clearCurrentExpression();\n      },\n      replace: (searchValue: string, newValue: string) => {\n        this.replace(searchValue, newValue);\n      },\n      replaceCurrentExpression: (newValue: string) => {\n        this.replaceCurrentExpression(newValue);\n      },\n      insertAt: (at: number, toInsert: string) => {\n        this.insertAt(at, toInsert);\n      },\n      closeOmnibox: () => {\n        this.omnibox.magicBox.blur();\n      }\n    };\n    return ret;\n  }\n\n  private rowsToSuggestions(rows: IOmniboxDataRow[]): Promise<IOmniboxSuggestion[]>[] {\n    return _.map(rows, (row: IPopulateOmniboxEventRow) => {\n      if (!Utils.isNullOrUndefined(row.element)) {\n        return new Promise<IOmniboxSuggestion[]>((resolve) => {\n          resolve([{\n            dom: row.element,\n            index: row.zIndex\n          }]);\n        });\n      } else if (!Utils.isNullOrUndefined(row.deferred)) {\n        return new Promise<IOmniboxSuggestion[]>((resolve) => {\n          row.deferred.then((row) => {\n            if (row.element != null) {\n              resolve([{\n                dom: row.element,\n                index: row.zIndex\n              }]);\n            } else {\n              resolve(null);\n            }\n          });\n        });\n      }\n      return null;\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Omnibox/OldOmniboxAddon.ts\n **/","import {IPopulateOmniboxEventArgs} from '../../events/OmniboxEvents';\nimport {DomUtils} from '../../utils/DomUtils';\nimport {$$} from '../../utils/Dom';\n\nexport interface ISuggestionForOmniboxOptionsOnSelect {\n  (value: string, args: IPopulateOmniboxEventArgs): void;\n}\n\nexport interface ISuggestionForOmniboxOptions {\n  omniboxZIndex?: number;\n  headerTitle?: string;\n  onSelect?: ISuggestionForOmniboxOptionsOnSelect;\n  numberOfSuggestions?: number;\n}\n\nexport interface ISuggestionForOmniboxTemplate {\n  header?: {\n    template: (...args: any[]) => string;\n    title: string;\n  };\n  row: (...args: any[]) => string;\n}\n\nexport interface ISuggestionForOmniboxResult {\n  value: string;\n}\n\nexport class SuggestionForOmnibox {\n\n  constructor(public structure: ISuggestionForOmniboxTemplate, public onSelect: (value: string, args: IPopulateOmniboxEventArgs) => void) {\n  }\n\n  public buildOmniboxElement(results: ISuggestionForOmniboxResult[], args: IPopulateOmniboxEventArgs): HTMLElement {\n    let element: HTMLElement;\n    if (results.length != 0) {\n      element = $$('div').el;\n      if (this.structure.header) {\n        let header = this.buildElementHeader();\n        element.appendChild(header);\n      }\n      let rows = this.buildRowElements(results, args);\n      _.each(rows, (row) => {\n        element.appendChild(row);\n      });\n    }\n    return element;\n  }\n\n  private buildElementHeader(): HTMLElement {\n    return $$('div', undefined, this.structure.header.template({\n      headerTitle: this.structure.header.title\n    })).el;\n  }\n\n  private buildRowElements(results: ISuggestionForOmniboxResult[], args: IPopulateOmniboxEventArgs): HTMLElement[] {\n    let ret = [];\n    _.each(results, (result) => {\n      let row = $$('div', undefined, this.structure.row({\n        rawValue: result.value,\n        data: DomUtils.highlightElement(result.value, args.completeQueryExpression.word)\n      })).el;\n      $$(row).on('click', () => {\n        this.onSelect.call(this, result.value, args);\n      });\n      $$(row).on('keyboardSelect', () => {\n        this.onSelect.call(this, result.value, args);\n      });\n      ret.push(row);\n    });\n    return ret;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/Misc/SuggestionForOmnibox.ts\n **/","import {ISuggestionForOmniboxOptions, SuggestionForOmnibox, ISuggestionForOmniboxTemplate} from '../Misc/SuggestionForOmnibox';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {Component} from '../Base/Component';\nimport {Assert} from '../../misc/Assert';\nimport {OmniboxEvents, IPopulateOmniboxEventArgs} from '../../events/OmniboxEvents';\nimport {QueryEvents} from '../../events/QueryEvents';\nimport {l} from '../../strings/Strings';\nimport {QueryStateModel} from '../../models/QueryStateModel';\nimport {analyticsActionCauseList, IAnalyticsTopSuggestionMeta} from '../Analytics/AnalyticsActionListMeta';\nimport {Initialization} from '../Base/Initialization';\nimport {$$} from '../../utils/Dom';\n\nexport interface IAnalyticsSuggestionsOptions extends ISuggestionForOmniboxOptions {\n}\n\n/**\n * This component is used to provide query suggestions based on the most commonly logged queries by a Coveo Analytics service.\n * In order to provide relevant suggestions, they are shown in order of successful document views: thus, queries resulting in no clicks from users or that require refinements are not suggested if better options exist.\n * These suggestions appear in the Omnibox Component. This component is thus highly related to the {@link Analytics} Component.\n * While a user is typing in a query box, he will be able to see and select the most commonly used queries.\n */\nexport class AnalyticsSuggestions extends Component {\n  static ID = 'AnalyticsSuggestions';\n  /**\n   * The options for the component\n   * @componentOptions\n   */\n  static options: IAnalyticsSuggestionsOptions = {\n    /**\n     * The index at which the suggestions should render in the omnibox. Higher value = placed first.<br/>\n     * The default value is `52`.\n     */\n    omniboxZIndex: ComponentOptions.buildNumberOption({ defaultValue: 52, min: 0 }),\n    /**\n     * Specifies the title in the Omnibox for this group of suggestions. This option is not available when using the Lightning Friendly Theme, which is the default design.\n     */\n    headerTitle: ComponentOptions.buildLocalizedStringOption({ defaultValue: l('SuggestedQueries') }),\n    /**\n     * The number of suggestions that should be requested and displayed in the omnibox.<br/>\n     * The default value is `5`.\n     */\n    numberOfSuggestions: ComponentOptions.buildNumberOption({ defaultValue: 5, min: 1 })\n  };\n\n  private suggestionForOmnibox: SuggestionForOmnibox;\n  private partialQueries: string[] = [];\n  private lastSuggestions: string[] = [];\n  private resultsToBuildWith = [];\n  private currentlyDisplayedSuggestions: { [suggestion: string]: { element: HTMLElement, pos: number } };\n\n  constructor(element: HTMLElement, public options: IAnalyticsSuggestionsOptions, bindings?: IComponentBindings) {\n    super(element, AnalyticsSuggestions.ID, bindings);\n\n\n    if (this.options && 'omniboxSuggestionOptions' in this.options) {\n      this.options = _.extend(this.options, this.options['omniboxSuggestionOptions']);\n    }\n\n    this.options = ComponentOptions.initComponentOptions(element, AnalyticsSuggestions, this.options);\n\n    let rowTemplate = _.template(`<div class='magic-box-suggestion coveo-omnibox-selectable coveo-top-analytics-suggestion-row'><%= data %></div>`);\n    this.options.onSelect = this.options.onSelect || this.onRowSelection;\n\n    let suggestionStructure: ISuggestionForOmniboxTemplate;\n    if (this.searchInterface.isNewDesign()) {\n      suggestionStructure = {\n        row: rowTemplate\n      };\n    } else {\n      let headerTemplate = _.template(`<div class='coveo-top-analytics-suggestion-header'><span class='coveo-icon-top-analytics'></span><span class='coveo-caption'><%= headerTitle %></span></div>`);\n      suggestionStructure = {\n        header: { template: headerTemplate, title: this.options.headerTitle },\n        row: rowTemplate\n      };\n    }\n\n    this.suggestionForOmnibox = new SuggestionForOmnibox(suggestionStructure, (value: string, args: IPopulateOmniboxEventArgs) => {\n      this.options.onSelect.call(this, value, args);\n    });\n    this.bind.onRootElement(OmniboxEvents.populateOmnibox, (args: IPopulateOmniboxEventArgs) => this.handlePopulateOmnibox(args));\n    this.bind.onRootElement(QueryEvents.querySuccess, () => this.partialQueries = []);\n  }\n\n  /**\n   * Select a currently displayed suggestion. This means that at least one suggestion must have been returned at least once.\n   * The suggestion parameter can either be a number (0 based index of the suggestion to select) or a string that match the suggestion.\n   * @param suggestion\n   */\n  public selectSuggestion(suggestion: number);\n  public selectSuggestion(suggestion: string);\n  public selectSuggestion(suggestion: any) {\n    if (this.currentlyDisplayedSuggestions) {\n      if (isNaN(suggestion)) {\n        if (this.currentlyDisplayedSuggestions[suggestion]) {\n          $$(this.currentlyDisplayedSuggestions[suggestion].element).trigger('click');\n        }\n      } else {\n        let currentlySuggested = <{ element: HTMLElement, pos: number }>_.findWhere(<any>this.currentlyDisplayedSuggestions, { pos: suggestion });\n        if (currentlySuggested) {\n          $$(currentlySuggested.element).trigger('click');\n        }\n      }\n    }\n  }\n\n  private handlePopulateOmnibox(args: IPopulateOmniboxEventArgs) {\n    Assert.exists(args);\n\n    var promise = new Promise((resolve, reject) => {\n      let searchPromise = this.usageAnalytics.getTopQueries({\n        pageSize: this.options.numberOfSuggestions,\n        queryText: args.completeQueryExpression.word\n      });\n\n      searchPromise.then((results: string[]) => {\n        this.resultsToBuildWith = _.map(results, (result) => {\n          return {\n            value: result\n          };\n        });\n        this.lastSuggestions = results;\n        if (!_.isEmpty(this.resultsToBuildWith) && args.completeQueryExpression.word != '') {\n          this.partialQueries.push(args.completeQueryExpression.word);\n        }\n        let element = this.suggestionForOmnibox.buildOmniboxElement(this.resultsToBuildWith, args);\n        this.currentlyDisplayedSuggestions = {};\n        _.map($$(element).findAll('.coveo-omnibox-selectable'), (selectable, i?) => {\n          this.currentlyDisplayedSuggestions[$$(selectable).text()] = {\n            element: selectable,\n            pos: i\n          };\n        });\n        resolve({\n          element: element,\n          zIndex: this.options.omniboxZIndex\n        });\n      });\n      searchPromise.catch(() => {\n        resolve({\n          element: undefined\n        });\n      });\n    });\n\n    args.rows.push({ deferred: promise });\n  }\n\n  private onRowSelection(value: string, args: IPopulateOmniboxEventArgs) {\n    args.clear();\n    args.closeOmnibox();\n    this.queryStateModel.set(QueryStateModel.attributesEnum.q, value);\n    this.usageAnalytics.logSearchEvent<IAnalyticsTopSuggestionMeta>(analyticsActionCauseList.omniboxAnalytics, {\n      partialQueries: this.cleanCustomData(this.partialQueries),\n      suggestionRanking: _.indexOf(_.pluck(this.resultsToBuildWith, 'value'), value),\n      suggestions: this.cleanCustomData(this.lastSuggestions),\n      partialQuery: args.completeQueryExpression.word\n    });\n    this.queryController.executeQuery();\n  }\n\n  private cleanCustomData(toClean: string[], rejectLength = 256) {\n    // Filter out only consecutive values that are the identical\n    toClean = _.filter(toClean, (partial: string, pos?: number, array?: string[]) => {\n      return pos === 0 || partial !== array[pos - 1];\n    });\n\n    // Custom dimensions cannot be an array in analytics service: Send a string joined by ; instead.\n    // Need to replace ;\n    toClean = _.map(toClean, (partial) => {\n      return partial.replace(/;/g, '');\n    });\n\n    // Reduce right to get the last X words that adds to less then rejectLength\n    let reducedToRejectLengthOrLess = [];\n    _.reduceRight(toClean, (memo: number, partial: string) => {\n      let totalSoFar = memo + partial.length;\n      if (totalSoFar <= rejectLength) {\n        reducedToRejectLengthOrLess.push(partial);\n      }\n      return totalSoFar;\n    }, 0);\n    toClean = reducedToRejectLengthOrLess.reverse();\n    let ret = toClean.join(';');\n\n    // analytics service can store max 256 char in a custom event\n    // if we're over that, call cleanup again with an arbitrary 10 less char accepted\n    if (ret.length >= 256) {\n      return this.cleanCustomData(toClean, rejectLength - 10);\n    }\n\n    return toClean.join(';');\n  }\n}\nInitialization.registerAutoCreateComponent(AnalyticsSuggestions);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/AnalyticsSuggestions/AnalyticsSuggestions.ts\n **/","import {ISuggestionForOmniboxOptions, SuggestionForOmnibox, ISuggestionForOmniboxTemplate} from '../Misc/SuggestionForOmnibox';\nimport {Component} from '../Base/Component';\nimport {ComponentOptions} from '../Base/ComponentOptions';\nimport {IComponentBindings} from '../Base/ComponentBindings';\nimport {Assert} from '../../misc/Assert';\nimport {Utils} from '../../utils/Utils';\nimport {OmniboxEvents, IPopulateOmniboxEventArgs} from '../../events/OmniboxEvents';\nimport {IIndexFieldValue} from '../../rest/FieldValue';\nimport {IListFieldValuesRequest} from '../../rest/ListFieldValuesRequest';\nimport {QueryStateModel} from '../../models/QueryStateModel';\nimport {Initialization} from '../Base/Initialization';\nimport {analyticsActionCauseList, IAnalyticsNoMeta} from '../Analytics/AnalyticsActionListMeta';\nimport {l} from '../../strings/Strings';\nimport {$$} from '../../utils/Dom';\nimport {ISuggestionForOmniboxOptionsOnSelect} from '../Misc/SuggestionForOmnibox';\n\nexport interface IFieldSuggestionsOptions extends ISuggestionForOmniboxOptions {\n  field?: string;\n  queryOverride?: string;\n}\n\n/**\n * This component provides query suggestions based on a particular facet field.\n * For example, this can be used to provide auto-complete suggestions when you type in document titles.\n */\nexport class FieldSuggestions extends Component {\n  static ID = 'FieldSuggestions';\n\n  /**\n   * @componentOptions\n   */\n  static options: IFieldSuggestionsOptions = {\n    /**\n     * Specifies the field from which suggestions are provided.<br/>\n     * This is a required option.\n     */\n    field: ComponentOptions.buildFieldOption({ required: true }),\n    /**\n     * Specifies a query override (any query expression) which should be applied when retrieving suggestions.\n     */\n    queryOverride: ComponentOptions.buildStringOption({ defaultValue: '' }),\n    /**\n     * Specifies the position at which the suggestions should render when there are multiple suggestions providers. (eg : {@link Facet} or {@link AnalyticsSuggestions}).<br/>\n     * The default value is 51.\n     */\n    omniboxZIndex: ComponentOptions.buildNumberOption({ defaultValue: 51, min: 0 }),\n    /**\n     * Specifies the title in the Omnibox for this group of suggestions. This option is not available when using the Lightning Friendly Theme, which is the default design.\n     */\n    headerTitle: ComponentOptions.buildLocalizedStringOption({ defaultValue: l('SuggestedResults') }),\n    /**\n     * Specifies the number of suggestions that should be rendered in the omnibox.<br/>\n     * Default value is 5.\n     */\n    numberOfSuggestions: ComponentOptions.buildNumberOption({ defaultValue: 5, min: 1 }),\n    /**\n     * The event handler function to execute when a value is selected in the Omnibox. By default, the query box text is replaced by what was selected and a new query is executed. You can however replace this default text by providing a callback function to execute when the value is selected.\n     * For example:\n     *\n     * ```\n     * Coveo.init(document.querySelector('#search'), {\n     *    FieldSuggestions : {\n     *      omniboxSuggestionOptions : {\n     *        onSelect : function(valueSelected, populateOmniBoxEventArgs){\n     *          // Do something special when a value is selected.\n     *          // You receive the selected value as the first argument, and the Omnibox object as the second parameter.\n     *        }\n     *      }\n     *    }\n     * })\n     *\n     * // OR using the jQuery extension\n     *\n     * $('#mySearch').coveo('init', {\n     *    FieldSuggestions : {\n     *      omniboxSuggestionOptions : {\n     *        onSelect : function(valueSelected, populateOmniBoxEventArgs){\n     *          // Do something special when a value is selected.\n     *          // You receive the selected value as the first argument, and the Omnibox object as the second parameter.\n     *        }\n     *      }\n     *    }\n     * })\n     * ```\n     */\n    onSelect: ComponentOptions.buildCustomOption<ISuggestionForOmniboxOptionsOnSelect>(() => {\n      return null;\n    })\n  };\n\n  private suggestionForOmnibox: SuggestionForOmnibox;\n  private currentlyDisplayedSuggestions: { [suggestion: string]: { element: HTMLElement, pos: number } };\n\n  /**\n   * Create a new `FieldSuggestions` component\n   * @param element\n   * @param options\n   * @param bindings\n   */\n  constructor(element: HTMLElement, public options: IFieldSuggestionsOptions, bindings?: IComponentBindings) {\n    super(element, FieldSuggestions.ID, bindings);\n\n    if (this.options && 'omniboxSuggestionOptions' in this.options) {\n      this.options = _.extend(this.options, this.options['omniboxSuggestionOptions']);\n    }\n\n    this.options = ComponentOptions.initComponentOptions(element, FieldSuggestions, options);\n\n    Assert.check(Utils.isCoveoField(this.options.field), this.options.field + ' is not a valid field');\n\n    this.options.onSelect = this.options.onSelect || this.onRowSelection;\n\n    let rowTemplate = _.template(`<div class='magic-box-suggestion coveo-omnibox-selectable coveo-top-field-suggestion-row'><%= data %></div>`);\n\n    let suggestionStructure: ISuggestionForOmniboxTemplate;\n    if (this.searchInterface.isNewDesign()) {\n      suggestionStructure = {\n        row: rowTemplate\n      };\n    } else {\n      let headerTemplate = _.template(`<div class='coveo-top-field-suggestion-header'><span class='coveo-icon-top-field'></span><span class='coveo-caption'><%= headerTitle %></span></div>`);\n      suggestionStructure = {\n        header: { template: headerTemplate, title: this.options.headerTitle },\n        row: rowTemplate\n      };\n    }\n\n    this.suggestionForOmnibox = new SuggestionForOmnibox(suggestionStructure, (value: string, args: IPopulateOmniboxEventArgs) => {\n      this.options.onSelect.call(this, value, args);\n    });\n    this.bind.onRootElement(OmniboxEvents.populateOmnibox, (args: IPopulateOmniboxEventArgs) => this.handlePopulateOmnibox(args));\n  }\n\n  /**\n   * Select a currently displayed suggestion. This means that at least one suggestion must have been returned at least once.\n   * The suggestion parameter can either be a number (0 based index of the suggestion to select) or a string that match the suggestion.\n   * @param suggestion\n   */\n  public selectSuggestion(suggestion: number);\n  public selectSuggestion(suggestion: string);\n  public selectSuggestion(suggestion: any) {\n    if (this.currentlyDisplayedSuggestions) {\n      if (isNaN(suggestion)) {\n        if (this.currentlyDisplayedSuggestions[suggestion]) {\n          $$(this.currentlyDisplayedSuggestions[suggestion].element).trigger('click');\n        }\n      } else {\n        let currentlySuggested = <{ element: HTMLElement, pos: number }>_.findWhere(<any>this.currentlyDisplayedSuggestions, { pos: suggestion });\n        if (currentlySuggested) {\n          $$(currentlySuggested.element).trigger('click');\n        }\n      }\n    }\n  }\n\n  private handlePopulateOmnibox(args: IPopulateOmniboxEventArgs) {\n    Assert.exists(args);\n\n    let valueToSearch = args.completeQueryExpression.word;\n    let promise = new Promise((resolve) => {\n      this.queryController.getEndpoint().listFieldValues(this.buildListFieldValueRequest(valueToSearch)).then((results: IIndexFieldValue[]) => {\n        let element = this.suggestionForOmnibox.buildOmniboxElement(results, args);\n        this.currentlyDisplayedSuggestions = {};\n        _.map($$(element).findAll('.coveo-omnibox-selectable'), (selectable, i?) => {\n          this.currentlyDisplayedSuggestions[$$(selectable).text()] = {\n            element: selectable,\n            pos: i\n          };\n        });\n        resolve({\n          element: element,\n          zIndex: this.options.omniboxZIndex\n        });\n      }).catch(() => {\n        resolve({\n          element: undefined\n        });\n      });\n    });\n    args.rows.push({\n      deferred: promise\n    });\n  }\n\n  private onRowSelection(value: string, args: IPopulateOmniboxEventArgs) {\n    args.clear();\n    args.closeOmnibox();\n    this.queryStateModel.set(QueryStateModel.attributesEnum.q, value);\n    this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.omniboxField, {});\n    this.queryController.executeQuery();\n  }\n\n  private buildListFieldValueRequest(valueToSearch: string): IListFieldValuesRequest {\n    return {\n      field: this.options.field,\n      ignoreAccents: true,\n      sortCriteria: 'occurrences',\n      maximumNumberOfValues: this.options.numberOfSuggestions,\n      patternType: 'Wildcards',\n      pattern: '*' + valueToSearch + '*',\n      queryOverride: this.options.queryOverride\n    };\n  }\n}\n\nInitialization.registerAutoCreateComponent(FieldSuggestions);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/FieldSuggestions/FieldSuggestions.ts\n **/","import {CoreHelpers} from './ui/Templates/CoreHelpers';\n\n// Webpack output a library target with a temporary name.\n// This is to allow end user to put CoveoJsSearch.Dependencie.js before or after the main CoveoJsSearch.js, without breaking\n// This code swap the current module to the \"real\" Coveo variable.\n\n\nexport function swapVar(scope: any) {\n  if (window['Coveo'] == undefined) {\n    window['Coveo'] = scope;\n  } else {\n    _.each(_.keys(scope), (k) => {\n      window['Coveo'][k] = scope[k];\n    });\n  }\n  CoreHelpers.exportAllHelpersGlobally(window['Coveo']);\n  if (window['__extends'] == undefined) {\n    var __extends = function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) {\n          d[p] = b[p];\n        }\n      }\n      function __() {\n        this.constructor = d;\n      }\n\n      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n    window['__extends'] = __extends;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/SwapVar.ts\n **/"],"sourceRoot":""}