webpackJsonpCoveo__temporary([10,11],{117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(104),i=function(){function e(){}return e.shouldDrawFacetSlider=function(e,t){return o.ResponsiveDropdownContent.isTargetInsideOpenedDropdown(t)||!this.isSmallFacetActivated(e)},e.isSmallTabsActivated=function(e){return e.hasClass(this.smallTabsClassName)},e.isSmallFacetActivated=function(e){return e.hasClass(this.smallFacetClassName)},e.isSmallRecommendationActivated=function(e){return e.hasClass(this.smallRecommendationClassName)},e.activateSmallTabs=function(e){e.addClass(this.smallTabsClassName)},e.deactivateSmallTabs=function(e){e.removeClass(this.smallTabsClassName)},e.activateSmallFacet=function(e){e.addClass(this.smallFacetClassName)},e.deactivateSmallFacet=function(e){e.removeClass(this.smallFacetClassName)},e.activateSmallRecommendation=function(e){e.addClass(this.smallRecommendationClassName)},e.deactivateSmallRecommendation=function(e){e.removeClass(this.smallRecommendationClassName)},e.smallTabsClassName="coveo-small-tabs",e.smallFacetClassName="coveo-small-facets",e.smallRecommendationClassName="coveo-small-recommendation",e}();t.ResponsiveComponentsUtils=i},122:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0}),n(467);var s=n(0),a=n(1),r=n(3),l=n(6),c=n(8),u=n(2),p=n(84),d=n(468),h=n(469),f=n(471),m=n(474),y=n(10),g=n(12),v=n(478),b=n(4),C=n(16),O=n(5),_=n(479),F=n(7),S=n(22),V=n(37),w=n(9),A=n(480),D=function(e){function t(n,o,i){var a=e.call(this,n,t.ID,i)||this;return a.element=n,a.options=o,a.listenToQueryStateChange=!0,a.position=null,a.handleQueryStateChangedIncluded=function(e){var t=a.values.selectedValues,n=s.difference(e,t),o=s.difference(t,e);b.Utils.isNonEmptyArray(n)&&(a.selectMultipleValues(n),a.logAnalyticsEvent(w.analyticsActionCauseList.dynamicFacetSelect,a.values.get(n[0]).analyticsMeta)),b.Utils.isNonEmptyArray(o)&&(a.deselectMultipleValues(o),a.logAnalyticsEvent(w.analyticsActionCauseList.dynamicFacetDeselect,a.values.get(o[0]).analyticsMeta))},a.options=c.ComponentOptions.initComponentOptions(n,t,o),a.initDynamicFacetQueryController(),a.initQueryEvents(),a.initQueryStateEvents(),a.initBreadCrumbEvents(),a.initComponentStateEvents(),a.values=new m.DynamicFacetValues(a),a.isCollapsed=a.options.enableCollapse&&a.options.collapsedByDefault,d.ResponsiveDynamicFacets.init(a.root,a,a.options),a}return o(t,e),Object.defineProperty(t.prototype,"fieldName",{get:function(){return this.options.field.slice(1)},enumerable:!0,configurable:!0}),t.prototype.selectValue=function(e){O.Assert.exists(e),this.selectMultipleValues([e])},t.prototype.selectMultipleValues=function(e){var t=this;O.Assert.exists(e),this.ensureDom(),this.logger.info("Selecting facet value(s)",e),e.forEach(function(e){t.values.get(e).select()}),this.handleFacetValuesChanged()},t.prototype.deselectValue=function(e){O.Assert.exists(e),this.deselectMultipleValues([e])},t.prototype.deselectMultipleValues=function(e){var t=this;O.Assert.exists(e),this.ensureDom(),this.logger.info("Deselecting facet value(s)",e),e.forEach(function(e){t.values.get(e).deselect()}),this.handleFacetValuesChanged()},t.prototype.toggleSelectValue=function(e){O.Assert.exists(e),this.ensureDom(),this.logger.info("Toggle select facet value",this.values.get(e).toggleSelect()),this.handleFacetValuesChanged()},t.prototype.showMoreValues=function(e){void 0===e&&(e=this.options.numberOfValues),this.ensureDom(),this.logger.info("Show more values"),this.dynamicFacetQueryController.increaseNumberOfValuesToRequest(e),this.triggerNewQuery(),this.logAnalyticsFacetShowMoreLess(w.analyticsActionCauseList.facetShowMore)},t.prototype.showLessValues=function(){this.ensureDom(),this.logger.info("Show less values"),this.dynamicFacetQueryController.resetNumberOfValuesToRequest(),this.triggerNewQuery(),this.logAnalyticsFacetShowMoreLess(w.analyticsActionCauseList.facetShowLess)},t.prototype.reset=function(){this.ensureDom(),this.logger.info("Deselect all values"),this.values.clearAll(),this.values.render(),this.updateAppearance(),this.updateQueryStateModel()},t.prototype.toggleCollapse=function(){this.isCollapsed?this.expand():this.collapse()},t.prototype.expand=function(){this.ensureDom(),this.logger.info("Expand facet values"),this.isCollapsed=!1,this.updateAppearance()},t.prototype.collapse=function(){this.ensureDom(),this.logger.info("Collapse facet values"),this.isCollapsed=!0,this.updateAppearance()},t.prototype.enableFreezeCurrentValuesFlag=function(){O.Assert.exists(this.dynamicFacetQueryController),this.dynamicFacetQueryController.enableFreezeCurrentValuesFlag()},t.prototype.enableFreezeFacetOrderFlag=function(){O.Assert.exists(this.dynamicFacetQueryController),this.dynamicFacetQueryController.enableFreezeFacetOrderFlag()},t.prototype.pinFacetPosition=function(){this.padding&&this.padding.pin()},Object.defineProperty(t.prototype,"analyticsFacetState",{get:function(){return this.values.activeFacetValues.map(function(e){return e.analyticsMeta})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"basicAnalyticsFacetState",{get:function(){return{field:this.options.field.toString(),id:this.options.id,facetType:w.AnalyticsDynamicFacetType.string,facetPosition:this.position}},enumerable:!0,configurable:!0}),t.prototype.logAnalyticsEvent=function(e,t){this.usageAnalytics.logSearchEvent(e,t)},t.prototype.putStateIntoQueryBuilder=function(e){O.Assert.exists(e),this.dynamicFacetQueryController.putFacetIntoQueryBuilder(e)},t.prototype.putStateIntoAnalytics=function(){var e=this.usageAnalytics.getPendingSearchEvent();e&&e.addFacetState(this.analyticsFacetState)},t.prototype.isCurrentlyDisplayed=function(){return!!a.$$(this.element).isVisible()&&!a.$$(this.element).hasClass("coveo-hidden")},t.prototype.initQueryEvents=function(){var e=this;this.bind.onRootElement(y.QueryEvents.duringQuery,function(){return e.ensureDom()}),this.bind.onRootElement(y.QueryEvents.doneBuildingQuery,function(t){return e.handleDoneBuildingQuery(t)}),this.bind.onRootElement(y.QueryEvents.querySuccess,function(t){return e.handleQuerySuccess(t)}),this.bind.onRootElement(y.QueryEvents.deferredQuerySuccess,function(){return e.handleDeferredQuerySuccess()}),this.bind.onRootElement(y.QueryEvents.queryError,function(){return e.onQueryResponse()})},t.prototype.initQueryStateEvents=function(){this.includedAttributeId=g.QueryStateModel.getFacetId(this.options.id),this.queryStateModel.registerNewAttribute(this.includedAttributeId,[]),this.bind.onQueryState(C.MODEL_EVENTS.CHANGE,void 0,this.handleQueryStateChanged)},t.prototype.initBreadCrumbEvents=function(){var e=this;this.options.includeInBreadcrumb&&(this.bind.onRootElement(V.BreadcrumbEvents.populateBreadcrumb,function(t){return e.handlePopulateBreadcrumb(t)}),this.bind.onRootElement(V.BreadcrumbEvents.clearBreadcrumb,function(){return e.reset()}))},t.prototype.initComponentStateEvents=function(){var e=g.QueryStateModel.getFacetId(this.options.id);this.componentStateModel.registerComponent(e,this)},t.prototype.initDynamicFacetQueryController=function(){this.dynamicFacetQueryController=new v.DynamicFacetQueryController(this)},t.prototype.handleDoneBuildingQuery=function(e){this.dynamicFacetManager||(O.Assert.exists(e),O.Assert.exists(e.queryBuilder),this.putStateIntoQueryBuilder(e.queryBuilder),this.putStateIntoAnalytics())},t.prototype.handleQuerySuccess=function(e){if(b.Utils.isNullOrUndefined(e.results.facets))return this.notImplementedError();var t=s.findIndex(e.results.facets,{facetId:this.options.id}),n=-1!==t?e.results.facets[t]:null;this.position=t+1,this.onQueryResponse(n)},t.prototype.handleDeferredQuerySuccess=function(){this.header.hideLoading(),this.values.render(),this.updateAppearance(),this.padding&&this.padding.ensurePinnedFacetHasNotMoved()},t.prototype.onQueryResponse=function(e){e?this.values.createFromResponse(e):this.values.resetValues()},t.prototype.handleQueryStateChanged=function(e){if(this.listenToQueryStateChange){var t=e.attributes[this.includedAttributeId];t&&this.handleQueryStateChangedIncluded(t)}},t.prototype.handlePopulateBreadcrumb=function(e){if(O.Assert.exists(e),this.values.hasActiveValues){var t=new h.DynamicFacetBreadcrumbs(this);e.breadcrumbs.push({element:t.element})}},t.prototype.createDom=function(){this.createPadding(),this.createContent(),this.updateAppearance()},t.prototype.createPadding=function(){if(this.options.preservePosition){var e=a.$$(this.element).parent("coveo-facet-column");if(!e)return this.logger.info('Padding feature deactivated because facet doesn\'t have a parent with the class "coveo-facet-column"');this.padding=new A.FacetPadding(this.element,e)}},t.prototype.createContent=function(){this.header=this.createHeader(),this.element.appendChild(this.header.element),this.element.appendChild(this.values.render())},t.prototype.createHeader=function(){return new f.DynamicFacetHeader(this)},t.prototype.handleFacetValuesChanged=function(){this.updateQueryStateModel()},t.prototype.updateQueryStateModel=function(){this.listenToQueryStateChange=!1,this.updateIncludedQueryStateModel(),this.listenToQueryStateChange=!0},t.prototype.updateIncludedQueryStateModel=function(){this.queryStateModel.set(this.includedAttributeId,this.values.selectedValues)},t.prototype.updateAppearance=function(){this.header.toggleClear(this.values.hasSelectedValues),this.header.toggleCollapse(this.isCollapsed),a.$$(this.element).toggleClass("coveo-dynamic-facet-collapsed",this.isCollapsed),a.$$(this.element).toggleClass("coveo-active",this.values.hasSelectedValues),a.$$(this.element).toggleClass("coveo-hidden",this.values.isEmpty)},t.prototype.triggerNewQuery=function(e){this.beforeSendingQuery();var t=e?{beforeExecuteQuery:e}:{ignoreWarningSearchEvent:!0};this.queryController.executeQuery(t)},t.prototype.beforeSendingQuery=function(){this.header.showLoading(),this.updateAppearance()},t.prototype.notImplementedError=function(){this.logger.error("DynamicFacets are not supported by your current search endpoint. Disabling this component."),this.disable(),this.updateAppearance()},t.prototype.logAnalyticsFacetShowMoreLess=function(e){this.usageAnalytics.logCustomEvent(e,{facetId:this.options.id,facetField:this.options.field.toString(),facetTitle:this.options.title},this.element)},t.ID="DynamicFacet",t.doExport=function(){return r.exportGlobally({DynamicFacet:t})},t.options=i({},p.ResponsiveFacetOptions,{id:c.ComponentOptions.buildStringOption({postProcessing:function(e,t){void 0===e&&(e="");var n=e.replace(/[^A-Za-z0-9-_@]+/g,"");return b.Utils.isNonEmptyString(n)?n.slice(0,59):t.field.slice(0,59)}}),title:c.ComponentOptions.buildLocalizedStringOption({defaultValue:F.l("NoTitle"),section:"CommonOptions",priority:10}),field:c.ComponentOptions.buildFieldOption({required:!0,section:"CommonOptions"}),sortCriteria:c.ComponentOptions.buildStringOption({postProcessing:function(e){return _.isFacetSortCriteria(e)?e:void 0},section:"Sorting"}),numberOfValues:c.ComponentOptions.buildNumberOption({min:0,defaultValue:8,section:"CommonOptions"}),enableCollapse:c.ComponentOptions.buildBooleanOption({defaultValue:!1,section:"Filtering"}),collapsedByDefault:c.ComponentOptions.buildBooleanOption({defaultValue:!1,section:"Filtering"}),includeInBreadcrumb:c.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"CommonOptions"}),numberOfValuesInBreadcrumb:c.ComponentOptions.buildNumberOption({defaultFunction:function(){return S.DeviceUtils.isMobileDevice()?3:5},min:0,depend:"includeInBreadcrumb",section:"CommonOptions"}),valueCaption:c.ComponentOptions.buildJsonOption(),preservePosition:c.ComponentOptions.buildBooleanOption({defaultValue:!0})}),t}(l.Component);t.DynamicFacet=D,u.Initialization.registerAutoCreateComponent(D),D.doExport()},129:function(module,exports,__webpack_require__){"use strict";function showOnlyWithHelper(e,t){return null==t&&(t={}),t.helpers=e,t}var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var underscore_1=__webpack_require__(0),GlobalExports_1=__webpack_require__(3),Assert_1=__webpack_require__(5),QueryStateModel_1=__webpack_require__(12),AccessibleButton_1=__webpack_require__(17),DateUtils_1=__webpack_require__(30),Dom_1=__webpack_require__(1),StringUtils_1=__webpack_require__(19),Utils_1=__webpack_require__(4),AnalyticsActionListMeta_1=__webpack_require__(9),Component_1=__webpack_require__(6),ComponentOptions_1=__webpack_require__(8),Initialization_1=__webpack_require__(2),FacetUtils_1=__webpack_require__(46),TemplateHelpers_1=__webpack_require__(109),Strings_1=__webpack_require__(7),DynamicFacet_1=__webpack_require__(122),FieldValue=function(_super){function FieldValue(e,t,n,o,i){void 0===i&&(i=FieldValue.ID);var s=_super.call(this,e,i,n)||this;s.element=e,s.options=t,s.result=o,s.options=ComponentOptions_1.ComponentOptions.initOptions(e,FieldValue.simpleOptions,t),null!=s.options.helper&&s.normalizeHelperAndOptions(),s.result=s.result||s.resolveResult(),Assert_1.Assert.exists(s.result);var a=s.getValue();if(null==a)null!=s.element.parentElement&&s.element.parentElement.removeChild(s.element);else{var r=void 0;underscore_1.isArray(a)?r=a:s.options.splitValues?underscore_1.isString(a)&&(r=underscore_1.map(a.split(s.options.separator),function(e){return e.trim()})):(a=a.toString(),r=[a]),s.appendValuesToDom(r),null!=s.options.textCaption&&s.prependTextCaptionToDom()}return s}return __extends(FieldValue,_super),FieldValue.prototype.getValue=function(){var e=Utils_1.Utils.getFieldValue(this.result,this.options.field);return!underscore_1.isArray(e)&&underscore_1.isObject(e)&&(e=null),e},FieldValue.prototype.renderOneValue=function(e){var t=Dom_1.$$("span").el,n=FacetUtils_1.FacetUtils.tryToGetTranslatedCaption(this.options.field,e);if(this.options.helper){var o=TemplateHelpers_1.TemplateHelpers.getHelper(this.options.helper+"v2")||TemplateHelpers_1.TemplateHelpers.getHelper(""+this.options.helper);Utils_1.Utils.exists(o)?n=o.call(this,e,this.getHelperOptions()):this.logger.warn("Helper "+this.options.helper+" is not found in available helpers. The list of supported helpers is :",underscore_1.keys(TemplateHelpers_1.TemplateHelpers.getHelpers()));var i=this.getFullDate(e,this.options.helper);i&&t.setAttribute("title",i),"date"!=this.options.helper&&"dateTime"!=this.options.helper&&"emailDateTime"!=this.options.helper||(n=StringUtils_1.StringUtils.capitalizeFirstLetter(n))}return this.options.htmlValue?t.innerHTML=n:t.appendChild(document.createTextNode(n)),this.bindEventOnValue(t,e,n),t},FieldValue.prototype.getValueContainer=function(){return this.element},FieldValue.prototype.normalizeHelperAndOptions=function(){var e=this;this.options=ComponentOptions_1.ComponentOptions.initOptions(this.element,FieldValue.helperOptions,this.options);var t=underscore_1.keys(FieldValue.options.helperOptions.subOptions),n=underscore_1.filter(t,function(t){var n=FieldValue.options.helperOptions.subOptions[t];if(n){var o=n.helpers;return null!=o&&underscore_1.contains(o,e.options.helper)}return!1});this.options.helperOptions=underscore_1.omit(this.options.helperOptions,function(e,t){return!underscore_1.contains(n,t)})},FieldValue.prototype.getHelperOptions=function(){var inlineOptions=ComponentOptions_1.ComponentOptions.loadStringOption(this.element,"helperOptions",{});return Utils_1.Utils.isNonEmptyString(inlineOptions)?underscore_1.extend({},this.options.helperOptions,eval("("+inlineOptions+")")):this.options.helperOptions},FieldValue.prototype.getFullDate=function(e,t){var n={useLongDateFormat:!0,useTodayYesterdayAndTomorrow:!1,useWeekdayIfThisWeek:!1,omitYearIfCurrentOne:!1};return"date"==t?DateUtils_1.DateUtils.dateToString(new Date(parseInt(e)),n):"dateTime"==t||"emailDateTime"==t?DateUtils_1.DateUtils.dateTimeToString(new Date(parseInt(e)),n):""},FieldValue.prototype.appendValuesToDom=function(e){var t=this;underscore_1.each(e,function(n,o){void 0!=n&&(t.getValueContainer().appendChild(t.renderOneValue(n)),o!==e.length-1&&t.getValueContainer().appendChild(document.createTextNode(t.options.displaySeparator)))})},FieldValue.prototype.renderTextCaption=function(){return Dom_1.$$("span",{className:"coveo-field-caption"},underscore_1.escape(this.options.textCaption)).el},FieldValue.prototype.prependTextCaptionToDom=function(){var e=this.getValueContainer();Dom_1.$$(e).prepend(this.renderTextCaption()),Dom_1.$$(e).addClass("coveo-with-label")},FieldValue.prototype.bindEventOnValue=function(e,t,n){this.bindFacets(e,t,n),this.bindDynamicFacets(e,t,n)},FieldValue.prototype.bindFacets=function(e,t,n){var o=this,i=QueryStateModel_1.QueryStateModel.getFacetId(this.options.facet),s=underscore_1.filter(this.componentStateModel.get(i),function(e){var t=!0,n=Component_1.Component.getComponentRef("FacetRange"),o=Component_1.Component.getComponentRef("FacetSlider");return!e.disabled&&(t&&n&&(t=!(e instanceof n)),t&&o&&(t=!(e instanceof o)),t)});if(s.length){var a=!!underscore_1.find(s,function(e){var n=e.values.get(t);return n&&n.selected}),r=function(){return o.handleFacetSelection(a,s,t)};this.buildClickableElement(e,!!a,n,r)}},FieldValue.prototype.getDynamicFacets=function(){var e=QueryStateModel_1.QueryStateModel.getFacetId(this.options.facet);return underscore_1.filter(this.componentStateModel.get(e),function(e){return e.type===DynamicFacet_1.DynamicFacet.ID&&!e.disabled})},FieldValue.prototype.bindDynamicFacets=function(e,t,n){var o=this,i=this.getDynamicFacets();if(i.length){var s=!!underscore_1.find(i,function(e){return e.values.hasSelectedValue(t)}),a=function(){return o.handleDynamicFacetSelection(s,i,t)};this.buildClickableElement(e,s,n,a)}},FieldValue.prototype.buildClickableElement=function(e,t,n,o){var i=t?Strings_1.l("RemoveFilterOn",n):Strings_1.l("FilterOn",n);(new AccessibleButton_1.AccessibleButton).withTitle(i).withLabel(i).withElement(e).withSelectAction(o).build(),t&&Dom_1.$$(e).addClass("coveo-selected"),Dom_1.$$(e).addClass("coveo-clickable")},FieldValue.prototype.handleFacetSelection=function(e,t,n){t.forEach(function(t){e?t.deselectValue(n):t.selectValue(n)}),this.executeQuery(n)},FieldValue.prototype.handleDynamicFacetSelection=function(e,t,n){t.forEach(function(t){e?t.deselectValue(n):t.selectValue(n)}),this.executeQuery(n)},FieldValue.prototype.executeQuery=function(e){var t=this;this.queryController.deferExecuteQuery({beforeExecuteQuery:function(){return t.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.documentField,{facetId:t.options.facet,facetField:t.options.field.toString(),facetValue:e.toLowerCase()})}})},FieldValue.ID="FieldValue",FieldValue.doExport=function(){GlobalExports_1.exportGlobally({FieldValue:FieldValue})},FieldValue.options={field:ComponentOptions_1.ComponentOptions.buildFieldOption({defaultValue:"@field",required:!0}),facet:ComponentOptions_1.ComponentOptions.buildStringOption({postProcessing:function(e,t){return e||t.field}}),htmlValue:ComponentOptions_1.ComponentOptions.buildBooleanOption({defaultValue:!1}),splitValues:ComponentOptions_1.ComponentOptions.buildBooleanOption({defaultValue:!1}),separator:ComponentOptions_1.ComponentOptions.buildStringOption({depend:"splitValues",defaultValue:";"}),displaySeparator:ComponentOptions_1.ComponentOptions.buildStringOption({depend:"splitValues",defaultValue:", "}),helper:ComponentOptions_1.ComponentOptions.buildHelperOption(),helperOptions:ComponentOptions_1.ComponentOptions.buildObjectOption({subOptions:{text:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["anchor"])),target:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["anchor"])),class:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["anchor"])),decimals:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["currency"],{min:0})),symbol:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["currency"])),useTodayYesterdayAndTomorrow:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),useWeekdayIfThisWeek:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),omitYearIfCurrentOne:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),useLongDateFormat:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!1})),includeTimeIfToday:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),includeTimeIfThisWeek:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!0})),alwaysIncludeTime:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"],{defaultValue:!1})),predefinedFormat:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["date","dateTime","emailDateTime","time"])),companyDomain:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["email"])),me:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["email"])),lengthLimit:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["email"],{min:1})),truncateName:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["email"])),alt:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["image"])),height:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["image"])),width:ComponentOptions_1.ComponentOptions.buildStringOption(showOnlyWithHelper(["image"])),precision:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["size"],{min:0,defaultValue:2})),base:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["size"],{min:0,defaultValue:0})),isMilliseconds:ComponentOptions_1.ComponentOptions.buildBooleanOption(showOnlyWithHelper(["timeSpan"])),length:ComponentOptions_1.ComponentOptions.buildNumberOption(showOnlyWithHelper(["shorten","shortenPath","shortenUri"],{defaultValue:200}))}}),textCaption:ComponentOptions_1.ComponentOptions.buildLocalizedStringOption()},FieldValue.simpleOptions=underscore_1.omit(FieldValue.options,"helperOptions"),FieldValue.helperOptions={helperOptions:FieldValue.options.helperOptions},FieldValue}(Component_1.Component);exports.FieldValue=FieldValue,Initialization_1.Initialization.registerAutoCreateComponent(FieldValue)},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=function(){function e(){}return e.addClassToSVGInContainer=function(t,n){var o=t.querySelector("svg");o.setAttribute("class",""+e.getClass(o)+n)},e.removeClassFromSVGInContainer=function(t,n){var o=t.querySelector("svg");o.setAttribute("class",e.getClass(o).replace(n,""))},e.addStyleToSVGInContainer=function(e,t){var n=e.querySelector("svg");o.each(t,function(e,t){n.style[t]=e})},e.getClass=function(e){var t=e.getAttribute("class");return t?t+" ":""},e}();t.SVGDom=i},192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(464);var o=n(10),i=n(11),s=n(7),a=n(1),r=n(4),l=n(6),c=n(18),u=n(49),p=n(55),d=n(117),h=n(107),f=n(104),m=n(123),y=n(0),g=n(79),v=function(){function e(e,t,n,o){this.coveoRoot=e,this.ID=t,this.componentsInFacetColumn=[],this.preservePositionOriginalValues=[],this.dropdownHeaderLabel=this.getDropdownHeaderLabel(),this.dropdown=this.buildDropdown(o),this.searchInterface=l.Component.get(this.coveoRoot.el,c.SearchInterface,!1),this.bindDropdownContentEvents(),this.registerOnCloseHandler(),this.registerQueryEvents(),this.breakpoint=n.responsiveBreakpoint}return e.init=function(t,n,o,i,s){this.findColumn(n)&&(p.ResponsiveComponentsManager.register(e,a.$$(n),"ResponsiveFacetColumn",o,i),p.ResponsiveComponentsManager.register(t,a.$$(n),s,o,i))},e.findColumn=function(e){var t=a.$$(e).find(".coveo-facet-column");if(!t){new i.Logger("ResponsiveFacets").info("No element with class coveo-facet-column. Responsive facets cannot be enabled")}return t},e.prototype.registerComponent=function(e){return this.componentsInFacetColumn.push(e),this.preservePositionOriginalValues.push(e.options.preservePosition),!0},e.prototype.needDropdownWrapper=function(){return this.needSmallMode()},e.prototype.handleResizeEvent=function(){this.needSmallMode()&&!d.ResponsiveComponentsUtils.isSmallFacetActivated(this.coveoRoot)?this.changeToSmallMode():!this.needSmallMode()&&d.ResponsiveComponentsUtils.isSmallFacetActivated(this.coveoRoot)&&this.changeToLargeMode(),this.dropdown.isOpened&&this.dropdown.dropdownContent.positionDropdown()},e.prototype.dismissFacetSearches=function(){y.each(this.componentsInFacetColumn,function(e){e.facetSearch&&e.facetSearch.currentlyDisplayedResults&&e.facetSearch.dismissSearchResults()})},e.prototype.needSmallMode=function(){if(!this.searchInterface)return this.coveoRoot.width()<=(r.Utils.isNullOrUndefined(this.breakpoint)?(new u.ResponsiveComponents).getMediumScreenWidth():this.breakpoint);switch(this.searchInterface.responsiveComponents.getResponsiveMode()){case"small":case"medium":return!0;case"auto":return this.coveoRoot.width()<=(r.Utils.isNullOrUndefined(this.breakpoint)?this.searchInterface.responsiveComponents.getMediumScreenWidth():this.breakpoint);default:return!1}},e.prototype.changeToSmallMode=function(){this.dropdown.close(),this.disableFacetPreservePosition(),a.$$(this.coveoRoot.find("."+p.ResponsiveComponentsManager.DROPDOWN_HEADER_WRAPPER_CSS_CLASS)).append(this.dropdown.dropdownHeader.element.el),d.ResponsiveComponentsUtils.activateSmallFacet(this.coveoRoot)},e.prototype.changeToLargeMode=function(){this.restoreFacetPreservePositionValue(),this.dropdown.cleanUp(),d.ResponsiveComponentsUtils.deactivateSmallFacet(this.coveoRoot)},e.prototype.buildDropdown=function(e){var t=this.buildDropdownContent(),n=this.buildDropdownHeader();return e||new h.ResponsiveDropdown(t,n,this.coveoRoot)},e.prototype.buildDropdownContent=function(){var t=a.$$(this.coveoRoot.find(".coveo-facet-column")),n=a.$$("div",{className:"coveo-facet-header-filter-by-container",style:"display: none"}),o=a.$$("div",{className:"coveo-facet-header-filter-by"});return o.text(s.l("Filter by:")),n.append(o.el),t.prepend(n.el),new f.ResponsiveDropdownContent("facet",t,this.coveoRoot,e.DROPDOWN_MIN_WIDTH,e.DROPDOWN_WIDTH_RATIO)},e.prototype.buildDropdownHeader=function(){var e=a.$$("a"),t=a.$$("p");return t.text(this.dropdownHeaderLabel),e.el.appendChild(t.el),new m.ResponsiveDropdownHeader("facet",e)},e.prototype.registerOnCloseHandler=function(){this.dropdown.registerOnCloseHandler(this.dismissFacetSearches,this)},e.prototype.registerQueryEvents=function(){var e=this;this.coveoRoot.on(o.QueryEvents.noResults,function(){return e.handleNoResults()}),this.coveoRoot.on(o.QueryEvents.querySuccess,function(t,n){return e.handleQuerySuccess(n)}),this.coveoRoot.on(o.QueryEvents.queryError,function(){return e.handleQueryError()})},e.prototype.bindDropdownContentEvents=function(){var t=this;this.dropdown.dropdownContent.element.on("scroll",y.debounce(function(){y.each(t.componentsInFacetColumn,function(e){var n=e.facetSearch;n&&n.currentlyDisplayedResults&&!t.isFacetSearchScrolledIntoView(n.search)?e.facetSearch.positionSearchResults(t.dropdown.dropdownContent.element.el):n&&e.facetSearch.currentlyDisplayedResults&&e.facetSearch.positionSearchResults()})},e.DEBOUNCE_SCROLL_WAIT))},e.prototype.restoreFacetPreservePositionValue=function(){var e=this;y.each(this.componentsInFacetColumn,function(t,n){t.options&&(t.options.preservePosition=e.preservePositionOriginalValues[n])})},e.prototype.disableFacetPreservePosition=function(){y.each(this.componentsInFacetColumn,function(e){e.options&&(e.options.preservePosition=!1)})},e.prototype.isFacetSearchScrolledIntoView=function(e){var t=e.getBoundingClientRect().top,n=e.getBoundingClientRect().bottom,o=this.dropdown.dropdownContent.element.el.getBoundingClientRect().top,i=this.dropdown.dropdownContent.element.el.getBoundingClientRect().bottom;return o=o>=0?o:0,t>=o&&n<=i},e.prototype.getDropdownHeaderLabel=function(){var t;return g.ComponentsTypes.getAllFacetsInstance(this.coveoRoot.find(".coveo-facet-column")).forEach(function(e){var n=e.options;!t&&n.dropdownHeaderLabel&&(t=n.dropdownHeaderLabel)}),t||(t=s.l(e.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE)),t},e.prototype.handleNoResults=function(){this.dropdown.dropdownHeader.hide()},e.prototype.handleQueryError=function(){this.dropdown.dropdownHeader.hide()},e.prototype.handleQuerySuccess=function(e){0===e.results.totalCount?this.dropdown.dropdownHeader.hide():this.dropdown.dropdownHeader.show()},e.DEBOUNCE_SCROLL_WAIT=250,e.DROPDOWN_MIN_WIDTH=280,e.DROPDOWN_WIDTH_RATIO=.35,e.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE="Filters",e}();t.ResponsiveFacetColumn=v},193:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.idle="idle",e.selected="selected"}(t.FacetValueState||(t.FacetValueState={}))},217:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),s=n(2),a=n(129),r=n(19),l=n(5),c=n(1),u=n(0),p=n(3),d=function(e){function t(n,o,s,a){var r=e.call(this,n,i.ComponentOptions.initComponentOptions(n,t,o),s,a,t.ID)||this;return r.options=o,u.isString(r.options.colors)&&(r.options.colors=t.parseColors(r.options.colors)),null==r.options.colors.values&&(r.options.colors.values={}),r}return o(t,e),t.parseColors=function(e){if(e){if(t.colorsRegex.test(e)){var n={values:{}},o=r.StringUtils.match(e,t.colorRegex);return u.each(o,function(e){var t=e[1],o=e[2];null!=t?n.values[t.replace(/\\(:|;)/g,"$1")]={icon:o}:n.icon=o}),n}try{return JSON.parse(e)}catch(t){l.Assert.fail("Invalid colors for badge '"+e+"'")}}return{}},t.prototype.getColor=function(e){void 0===e&&(e="");var t=u.find(u.keys(this.options.colors.values),function(t){return e.toLowerCase()==t.toLowerCase()}),n=t?this.options.colors.values[t]:{};return{icon:n.icon||this.options.colors.icon,text:n.text||this.options.colors.text}},t.prototype.renderOneValue=function(t){var n=e.prototype.renderOneValue.call(this,t);c.$$(n).addClass("coveo-value");var o=this.getColor(t),i=c.$$("span",{className:"coveo-badge-icon"}).el;null!=o.icon&&(i.style.color=o.icon);var s=c.$$("span",{className:"coveo-badge-label"},n.innerHTML).el;return null!=o.text&&(s.style.color=o.text),c.$$(n).empty(),n.appendChild(i),n.appendChild(s),n},t.prototype.prependTextCaptionToDom=function(){},t.ID="Badge",t.doExport=function(){p.exportGlobally({Badge:t})},t.options={colors:i.ComponentOptions.buildCustomOption(function(e){return t.parseColors(e)},{defaultValue:{values:{}}}),textCaption:i.ComponentOptions.buildLocalizedStringOption()},t.parent=a.FieldValue,t.colorRegex=/(?:\s*((?:[^:;]|\\[;:])*)\s*:\s*)?(\w+|#[A-Fa-f0-9]{6}|#[A-Fa-f0-9]{3})/g,t.colorsRegex=new RegExp("^(\\s*"+t.colorRegex.source+"\\s*;)*(\\s*"+t.colorRegex.source+")?\\s*$"),t}(a.FieldValue);t.Badge=d,d.options=u.omit(d.options,"textCaption"),s.Initialization.registerAutoCreateComponent(d)},420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(15),s=function(){function e(e){this.rootOptions=e,this.create()}return e.prototype.create=function(){var e=this.rootOptions.iconSVG&&this.rootOptions.iconClassName;this.button=o.$$("button",{className:("coveo-dynamic-facet-header-btn "+(this.rootOptions.className||"")).trim()},e?this.rootOptions.iconSVG:this.rootOptions.label),this.rootOptions.action&&this.button.on("click",this.rootOptions.action),e&&(this.button.setAttribute("aria-label",this.rootOptions.label),this.button.setAttribute("title",this.rootOptions.label),i.SVGDom.addClassToSVGInContainer(this.button.el,this.rootOptions.iconClassName)),void 0!==this.rootOptions.shouldDisplay&&this.toggle(this.rootOptions.shouldDisplay),this.element=this.button.el},e.prototype.toggle=function(e){this.button.toggle(e)},e}();t.DynamicFacetHeaderButton=s},46:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),i=n(20),s=n(121),a=n(30),r=n(4),l=n(1),c=n(0),u=n(7),p=function(){function e(){}return e.getRegexToUseForFacetSearch=function(e,t){return new RegExp(o.StringUtils.stringToRegex(e,t),"i")},e.getValuesToUseForSearchInFacet=function(e,t){var n=[e],o=this.getRegexToUseForFacetSearch(e,t.options.facetSearchIgnoreAccents);return t.options.valueCaption?(c.chain(t.options.valueCaption).pairs().filter(function(e){return o.test(e[1])}).each(function(e){n.push(e[0])}),(i.QueryUtils.isStratusAgnosticField(t.options.field,"@objecttype")||i.QueryUtils.isStratusAgnosticField(t.options.field,"@filetype"))&&c.each(s.FileTypes.getFileTypeCaptions(),function(e,i){i in t.options.valueCaption||!o.test(e)||n.push(i)})):i.QueryUtils.isStratusAgnosticField(t.options.field,"@objecttype")||i.QueryUtils.isStratusAgnosticField(t.options.field,"@filetype")?c.each(c.filter(c.pairs(s.FileTypes.getFileTypeCaptions()),function(e){return o.test(e[1])}),function(e){n.push(e[0])}):i.QueryUtils.isStratusAgnosticField(t.options.field,"@month")&&c.each(c.range(1,13),function(e){o.test(a.DateUtils.monthToString(e-1))&&n.push(("0"+e.toString()).substr(-2))}),n},e.buildFacetSearchPattern=function(e){return e=c.map(e,function(e){return r.Utils.escapeRegexCharacter(e)}),e[0]=".*"+e[0]+".*",e.join("|")},e.needAnotherFacetSearch=function(e,t,n,o){return e<t&&e<o&&e>n},e.addNoStateCssClassToFacetValues=function(e,t){if(0!=e.values.getSelected().length){var n=l.$$(t).findAll("li:not(.coveo-selected)");c.each(n,function(e){l.$$(e).addClass("coveo-no-state")})}},e.tryToGetTranslatedCaption=function(t,n){var o;if(i.QueryUtils.isStratusAgnosticField(t.toLowerCase(),"@filetype"))o=s.FileTypes.getFileType(n).caption;else if(i.QueryUtils.isStratusAgnosticField(t.toLowerCase(),"@objecttype"))o=s.FileTypes.getObjectType(n).caption;else if(e.isMonthFieldValue(t,n)){var l=parseInt(n,10);o=a.DateUtils.monthToString(l-1)}else o=u.l(n);return void 0!=o&&r.Utils.isNonEmptyString(o)?o:n},e.isMonthFieldValue=function(e,t){if(!i.QueryUtils.isStratusAgnosticField(e.toLowerCase(),"@month"))return!1;var n=parseInt(t,10);return!isNaN(n)&&!(n<1||n>12)},e}();t.FacetUtils=p},464:function(e,t){},467:function(e,t){},468:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(192),s=n(122),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.init=function(e,n,o){i.ResponsiveFacetColumn.init(t,e,n,o,s.DynamicFacet.ID)},t}(i.ResponsiveFacetColumn);t.ResponsiveDynamicFacets=a},469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(470);var o=n(1),i=n(7),s=n(13),a=n(9),r=function(){function e(e){this.facet=e,this.create()}return e.prototype.create=function(){this.element=o.$$("div",{className:"coveo-dynamic-facet-breadcrumb coveo-breadcrumb-item"}).el,this.createAndAppendTitle();var e=this.facet.values.activeFacetValues,t=e.slice(0,this.facet.options.numberOfValuesInBreadcrumb),n=e.slice(this.facet.options.numberOfValuesInBreadcrumb);this.createAndAppendBreadcrumbValues(t),n.length&&this.createAndAppendCollapsedBreadcrumbs(n)},e.prototype.createAndAppendTitle=function(){var e=o.$$("h3",{className:"coveo-dynamic-facet-breadcrumb-title"},this.facet.options.title+":").el;this.element.appendChild(e)},e.prototype.createAndAppendBreadcrumbValues=function(e){var t=this;e.forEach(function(e){return t.createAndAppendBreadcrumbValue(e)})},e.prototype.createAndAppendBreadcrumbValue=function(e){var t=this,n=o.$$("button",{className:"coveo-dynamic-facet-breadcrumb-value",ariaLabel:i.l("RemoveFilterOn",e.valueCaption)},e.valueCaption).el,a=o.$$("span",{className:"coveo-dynamic-facet-breadcrumb-value-clear"},s.SVGIcons.icons.mainClear).el;n.appendChild(a),o.$$(n).on("click",function(){return t.valueSelectAction(e)}),this.element.appendChild(n)},e.prototype.valueSelectAction=function(e){var t=this;this.facet.deselectValue(e.value),this.facet.triggerNewQuery(function(){return t.logActionToAnalytics(e)})},e.prototype.logActionToAnalytics=function(e){this.facet.logAnalyticsEvent(a.analyticsActionCauseList.breadcrumbDynamicFacet,e.analyticsMeta)},e.prototype.createAndAppendCollapsedBreadcrumbs=function(e){var t=this,n=i.l("NMore",""+e.length),s=e.map(function(e){return e.value}).join("\n"),a=o.$$("button",{className:"coveo-dynamic-facet-breadcrumb-collapse",title:s},n).el;o.$$(a).on("click",function(){o.$$(a).remove(),t.createAndAppendBreadcrumbValues(e)}),this.element.appendChild(a)},e}();t.DynamicFacetBreadcrumbs=r},470:function(e,t){},471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(472);var o=n(1),i=n(7),s=n(13),a=n(15),r=n(420),l=n(473),c=n(9),u=function(){function e(e){this.facet=e,this.element=o.$$("div",{className:"coveo-dynamic-facet-header"}).el,this.title=this.createTitle(),o.$$(this.element).append(this.title.el),o.$$(this.element).append(this.createWaitAnimation()),o.$$(this.element).append(this.createClearButton()),this.facet.options.enableCollapse&&this.enableCollapse()}return e.prototype.createClearButton=function(){var e=this;return this.clearButton=new r.DynamicFacetHeaderButton({label:i.l("Clear"),className:"coveo-dynamic-facet-header-clear",shouldDisplay:!1,action:function(){return e.clear()}}),this.clearButton.element},e.prototype.clear=function(){var e=this;this.facet.reset(),this.facet.enableFreezeFacetOrderFlag(),this.facet.triggerNewQuery(function(){return e.logClearAllToAnalytics()})},e.prototype.logClearAllToAnalytics=function(){this.facet.logAnalyticsEvent(c.analyticsActionCauseList.dynamicFacetClearAll,this.facet.basicAnalyticsFacetState)},e.prototype.createCollapseToggle=function(){return this.collapseToggle=new l.DynamicFacetHeaderCollapseToggle(this.facet),this.collapseToggle.element},e.prototype.enableCollapse=function(){var e=this;o.$$(this.element).append(this.createCollapseToggle()),o.$$(this.title).addClass("coveo-clickable"),o.$$(this.title).on("click",function(){return e.facet.toggleCollapse()})},e.prototype.toggleCollapse=function(e){this.facet.options.enableCollapse&&this.collapseToggle.toggleButtons(e)},e.prototype.createTitle=function(){return o.$$("h2",{className:"coveo-dynamic-facet-header-title",ariaLabel:""+i.l("FacetTitle",this.facet.options.title)},o.$$("span",{ariaHidden:!0,title:this.facet.options.title},this.facet.options.title))},e.prototype.createWaitAnimation=function(){return this.waitAnimation=o.$$("div",{className:"coveo-dynamic-facet-header-wait-animation"},s.SVGIcons.icons.loading),a.SVGDom.addClassToSVGInContainer(this.waitAnimation.el,"coveo-dynamic-facet-header-wait-animation-svg"),this.waitAnimation.toggle(!1),this.waitAnimation.el},e.prototype.toggleClear=function(e){this.clearButton.toggle(e)},e.prototype.showLoading=function(){var t=this;clearTimeout(this.showLoadingTimeout),this.showLoadingTimeout=window.setTimeout(function(){return t.waitAnimation.toggle(!0)},e.showLoadingDelay)},e.prototype.hideLoading=function(){clearTimeout(this.showLoadingTimeout),this.waitAnimation.toggle(!1)},e.showLoadingDelay=2e3,e}();t.DynamicFacetHeader=u},472:function(e,t){},473:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=n(13),s=n(1),a=n(420),r=function(){function e(e){this.facet=e,this.create()}return e.prototype.create=function(){var e=this,t=s.$$("div");this.collapseButton=new a.DynamicFacetHeaderButton({label:o.l("Collapse"),iconSVG:i.SVGIcons.icons.arrowUp,iconClassName:"coveo-dynamic-facet-collapse-toggle-svg",className:"coveo-dynamic-facet-header-collapse",shouldDisplay:!0,action:function(){return e.facet.collapse()}}),this.expandButton=new a.DynamicFacetHeaderButton({label:o.l("Expand"),iconSVG:i.SVGIcons.icons.arrowDown,iconClassName:"coveo-dynamic-facet-collapse-toggle-svg",className:"coveo-dynamic-facet-header-expand",shouldDisplay:!1,action:function(){return e.facet.expand()}}),t.append(this.collapseButton.element),t.append(this.expandButton.element),this.element=t.el},e.prototype.toggleButtons=function(e){this.collapseButton.toggle(!e),this.expandButton.toggle(e)},e}();t.DynamicFacetHeaderCollapseToggle=r},474:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(475);var o=n(1),i=n(0),s=n(476),a=n(193),r=n(7),l=function(){function e(e){this.facet=e,this.list=o.$$("ul",{className:"coveo-dynamic-facet-values"}).el,this.resetValues()}return e.prototype.createFromResponse=function(e){var t=this;this.moreValuesAvailable=e.moreValuesAvailable,this.facetValues=e.values.map(function(e,n){return new s.DynamicFacetValue({value:e.value,numberOfResults:e.numberOfResults,state:e.state,position:n+1},t.facet)})},e.prototype.resetValues=function(){this.moreValuesAvailable=!1,this.facetValues=[]},Object.defineProperty(e.prototype,"allFacetValues",{get:function(){return this.facetValues},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allValues",{get:function(){return this.facetValues.map(function(e){return e.value})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValues",{get:function(){return this.facetValues.filter(function(e){return e.isSelected}).map(function(e){return e.value})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeFacetValues",{get:function(){return this.facetValues.filter(function(e){return!e.isIdle})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSelectedValues",{get:function(){return!!i.findWhere(this.facetValues,{state:a.FacetValueState.selected})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasActiveValues",{get:function(){return!!this.activeFacetValues.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasIdleValues",{get:function(){return!!i.findWhere(this.facetValues,{state:a.FacetValueState.idle})},enumerable:!0,configurable:!0}),e.prototype.clearAll=function(){this.facetValues.forEach(function(e){return e.deselect()})},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return!this.facetValues.length},enumerable:!0,configurable:!0}),e.prototype.hasSelectedValue=function(e){var t="string"==typeof e?e:e.value,n=i.find(this.facetValues,function(e){return e.equals(t)});return n&&n.isSelected},e.prototype.get=function(e){var t="string"==typeof e?e:e.value,n=i.find(this.facetValues,function(e){return e.equals(t)});if(n)return n;var o=this.facetValues.length+1,r=a.FacetValueState.idle,l=new s.DynamicFacetValue({value:t,state:r,numberOfResults:0,position:o},this.facet);return this.facetValues.push(l),l},e.prototype.buildShowLess=function(){var e=this,t=o.$$("button",{className:"coveo-dynamic-facet-show-less"},r.l("ShowLess")),n=o.$$("li",null,t);return t.on("click",function(){e.facet.enableFreezeFacetOrderFlag(),e.facet.showLessValues()}),n.el},e.prototype.buildShowMore=function(){var e=this,t=o.$$("button",{className:"coveo-dynamic-facet-show-more"},r.l("ShowMore")),n=o.$$("li",null,t);return t.on("click",function(){e.facet.enableFreezeFacetOrderFlag(),e.facet.showMoreValues()}),n.el},Object.defineProperty(e.prototype,"shouldEnableShowLess",{get:function(){return this.facetValues.length>this.facet.options.numberOfValues&&this.hasIdleValues},enumerable:!0,configurable:!0}),e.prototype.render=function(){var e=document.createDocumentFragment();return o.$$(this.list).empty(),this.facetValues.forEach(function(t){e.appendChild(t.render())}),this.shouldEnableShowLess&&e.appendChild(this.buildShowLess()),this.moreValuesAvailable&&e.appendChild(this.buildShowMore()),this.list.appendChild(e),this.list},e}();t.DynamicFacetValues=l},475:function(e,t){},476:function(e,t,n){"use strict";var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),s=n(477),a=n(46),r=n(193),l=function(){function e(e,t){var n=e.value,o=e.state,i=e.numberOfResults,a=e.position;this.facet=t,this.value=n,this.state=o,this.numberOfResults=i,this.position=a,this.renderer=new s.DynamicFacetValueRenderer(this,t)}return Object.defineProperty(e.prototype,"isSelected",{get:function(){return this.state===r.FacetValueState.selected},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isIdle",{get:function(){return this.state===r.FacetValueState.idle},enumerable:!0,configurable:!0}),e.prototype.toggleSelect=function(){this.state=this.state===r.FacetValueState.selected?r.FacetValueState.idle:r.FacetValueState.selected},e.prototype.select=function(){this.state=r.FacetValueState.selected},e.prototype.deselect=function(){this.state=r.FacetValueState.idle},e.prototype.equals=function(e){return("string"==typeof e?e:e.value).toLowerCase()===this.value.toLowerCase()},Object.defineProperty(e.prototype,"formattedCount",{get:function(){return i.format(this.numberOfResults,"n0")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueCaption",{get:function(){var e=a.FacetUtils.tryToGetTranslatedCaption(this.facet.options.field,this.value);return this.facet.options.valueCaption&&"object"==typeof this.facet.options.valueCaption&&(e=this.facet.options.valueCaption[this.value]||e),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"analyticsMeta",{get:function(){return o({},this.facet.basicAnalyticsFacetState,{value:this.value,valuePosition:this.position,displayValue:this.valueCaption,state:this.state})},enumerable:!0,configurable:!0}),e.prototype.render=function(){return this.renderer.render()},e}();t.DynamicFacetValue=l},477:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(57),s=n(7),a=n(9),r=n(193),l=function(){function e(e,t){var n=this;this.facetValue=e,this.facet=t,this.selectAction=function(){n.facet.pinFacetPosition(),n.facet.toggleSelectValue(n.facetValue.value),n.toggleSelectedClass(),n.facet.enableFreezeCurrentValuesFlag(),n.facet.enableFreezeFacetOrderFlag(),n.facet.triggerNewQuery(function(){return n.logActionToAnalytics()})}}return e.prototype.render=function(){return this.dom=o.$$("li",{className:"coveo-dynamic-facet-value coveo-dynamic-facet-selectable",dataValue:this.facetValue.value}),this.createCheckbox(),this.dom.append(this.checkbox.getElement()),this.addFocusAndBlurEventListeners(),this.toggleSelectedClass(),this.dom.el},e.prototype.toggleSelectedClass=function(){this.dom.toggleClass("coveo-selected",this.facetValue.isSelected)},e.prototype.createCheckbox=function(){var e=this;this.checkbox=new i.Checkbox(function(){return e.selectAction()},this.facetValue.valueCaption,this.ariaLabel,"("+this.facetValue.formattedCount+")");var t=o.$$(this.checkbox.getElement()).find(".coveo-checkbox-span-label"),n=o.$$(this.checkbox.getElement()).find(".coveo-checkbox-span-label-suffix");t&&n&&(t.setAttribute("title",this.facetValue.valueCaption),t.setAttribute("aria-hidden","true"),n.setAttribute("aria-hidden","true")),this.facetValue.isSelected&&this.checkbox.select(!1)},e.prototype.addFocusAndBlurEventListeners=function(){var e=this,t=o.$$(this.checkbox.getElement()).find("button");o.$$(t).on("focusin",function(){return e.dom.addClass("coveo-focused")}),o.$$(t).on("focusout",function(){return e.dom.removeClass("coveo-focused")})},e.prototype.logActionToAnalytics=function(){var e=this.facetValue.state===r.FacetValueState.selected?a.analyticsActionCauseList.dynamicFacetSelect:a.analyticsActionCauseList.dynamicFacetDeselect;this.facet.logAnalyticsEvent(e,this.facetValue.analyticsMeta)},Object.defineProperty(e.prototype,"ariaLabel",{get:function(){var e=this.facetValue.isSelected?"UnselectValueWithResultCount":"SelectValueWithResultCount",t=s.l("ResultCount",this.facetValue.formattedCount);return""+s.l(e,this.facetValue.valueCaption,t)},enumerable:!0,configurable:!0}),e}();t.DynamicFacetValueRenderer=l},478:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),i=n(10),s=function(){function e(e){this.facet=e,this.freezeCurrentValues=!1,this.freezeFacetOrder=!1,this.resetNumberOfValuesToRequest(),this.resetFreezeCurrentValuesDuringQuery()}return e.prototype.resetFreezeCurrentValuesDuringQuery=function(){var e=this;this.facet.bind.onRootElement(i.QueryEvents.duringQuery,function(){e.freezeCurrentValues=!1,e.freezeFacetOrder=!1})},e.prototype.increaseNumberOfValuesToRequest=function(e){this.numberOfValuesToRequest+=e},e.prototype.resetNumberOfValuesToRequest=function(){this.numberOfValuesToRequest=this.facet.options.numberOfValues},e.prototype.enableFreezeCurrentValuesFlag=function(){this.freezeCurrentValues=!0},e.prototype.enableFreezeFacetOrderFlag=function(){this.freezeFacetOrder=!0},e.prototype.putFacetIntoQueryBuilder=function(e){o.Assert.exists(e);var t={facetId:this.facet.options.id,field:this.facet.fieldName,sortCriteria:this.facet.options.sortCriteria,currentValues:this.currentValues,numberOfValues:this.numberOfValues,freezeCurrentValues:this.freezeCurrentValues,isFieldExpanded:this.numberOfValuesToRequest>this.facet.options.numberOfValues};e.facetRequests.push(t),this.freezeFacetOrder&&(e.facetOptions.freezeFacetOrder=!0)},Object.defineProperty(e.prototype,"currentValues",{get:function(){return this.facet.values.allFacetValues.map(function(e){return{value:e.value,state:e.state}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfValues",{get:function(){return this.freezeCurrentValues?this.currentValues.length:Math.max(this.numberOfValuesToRequest,this.facet.values.activeFacetValues.length)},enumerable:!0,configurable:!0}),e}();t.DynamicFacetQueryController=s},479:function(e,t,n){"use strict";function o(e){return!!i[e]}Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e.score="score",e.alphanumeric="alphanumeric",e.occurrences="occurrences"}(i=t.FacetSortCriteria||(t.FacetSortCriteria={})),t.isFacetSortCriteria=o},480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(1),s=function(){function e(e,t){this.element=e,this.paddingContainer=t,this.topSpaceClass="coveo-topSpace",this.animationClass="coveo-with-animation",this.initTopSpacer()}return Object.defineProperty(e.prototype,"isPinned",{get:function(){return o.Utils.exists(this.pinnedTopPosition)},enumerable:!0,configurable:!0}),e.prototype.initTopSpacer=function(){var e=this;i.$$(this.paddingContainer).on("mouseleave",function(){return e.unpin()}),this.topSpaceElement=i.$$(this.paddingContainer).find("."+this.topSpaceClass),this.topSpaceElement||this.createTopSpace()},e.prototype.createTopSpace=function(){this.topSpaceElement=i.$$("div",{className:this.topSpaceClass}).el,i.$$(this.topSpaceElement).insertBefore(this.paddingContainer.firstChild)},Object.defineProperty(e.prototype,"facetTopPosition",{get:function(){return this.element.getBoundingClientRect().top},enumerable:!0,configurable:!0}),e.prototype.pin=function(){this.pinnedTopPosition=this.facetTopPosition},e.prototype.setTopSpaceHeight=function(e){this.topSpaceElement.style.height=e+"px"},e.prototype.unpin=function(){this.isPinned||(i.$$(this.topSpaceElement).addClass(this.animationClass),this.setTopSpaceHeight(0)),this.pinnedTopPosition=null},Object.defineProperty(e.prototype,"scrollYPosition",{get:function(){return new i.Win(window).scrollY()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this.facetTopPosition-this.pinnedTopPosition},enumerable:!0,configurable:!0}),e.prototype.ensurePinnedFacetHasNotMoved=function(){this.isPinned&&(i.$$(this.topSpaceElement).removeClass(this.animationClass),this.setTopSpaceHeight(0),window.scrollTo(0,this.scrollYPosition+this.offset),this.offset<0&&this.setTopSpaceHeight(-1*this.offset),this.pinnedTopPosition=null)},e}();t.FacetPadding=s},84:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8);t.ResponsiveFacetOptions={enableResponsiveMode:o.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"ResponsiveOptions"}),responsiveBreakpoint:o.ComponentOptions.buildNumberOption({deprecated:"This option is exposed for legacy reasons. It is not recommended to use this option. Instead, use `SearchInterface.options.responsiveMediumBreakpoint` options exposed on the `SearchInterface`."}),dropdownHeaderLabel:o.ComponentOptions.buildLocalizedStringOption({section:"ResponsiveOptions"})}}});