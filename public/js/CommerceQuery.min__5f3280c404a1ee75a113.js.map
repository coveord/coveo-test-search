{"version":3,"sources":["CommerceQuery.min__5f3280c404a1ee75a113.js","./src/ui/CommerceQuery/CommerceQuery.ts"],"names":["webpackJsonpCoveo__temporary","293","module","exports","__webpack_require__","__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","element","options","bindings","CommerceQuery","ID","ComponentOptions","initComponentOptions","bind","onRootElement","QueryEvents","doneBuildingQuery","handleDoneBuildingQuery","AnalyticsEvents","changeAnalyticsCustomData","handleChangeAnalytics","_this","event","listing","queryBuilder","tab","addContextValue","originLevel2","doExport","exportGlobally","buildStringOption","Component","Initialization","registerAutoCreateComponent"],"mappings":"AAAAA,8BAA8B,KAExBC,IACA,SAAUC,EAAQC,EAASC,GAEjC,YAEA,IAAIC,GAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBC,OAAOC,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOV,KAAKW,YAAcL,EADnCL,EAAcK,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAaL,OAAOW,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,OAGvFR,QAAOY,eAAejB,EAAS,cAAgBkB,OAAO,GCjBtD,YAEA,OACA,QACA,QACA,OACA,OAWA,cAiCE,WAAmBC,EAA6BC,EAAwCC,GAAxF,MACE,YAAMF,EAASG,EAAcC,GAAIF,IAAS,IDLtC,OCIa,GAAAF,UAA6B,EAAAC,UAAwC,EAAAC,WAGtF,EAAKD,QAAU,EAAAI,iBAAiBC,qBAAqBN,EAASG,EAAeF,GAE7E,EAAKM,KAAKC,cAAc,EAAAC,YAAYC,kBAAmB,EAAKC,yBAC5D,EAAKJ,KAAKC,cAAc,EAAAI,gBAAgBC,0BAA2B,EAAKC,uBDV7DC,ECyBf,MAtDmC,QA0CzB,YAAAJ,wBAAR,SAAgCK,GAC1BhC,KAAKiB,QAAQgB,UACfD,EAAME,aAAaC,IAAMnC,KAAKiB,QAAQgB,QACtCD,EAAME,aAAaE,gBAAgB,UAAWpC,KAAKiB,QAAQgB,WAIvD,YAAAH,sBAAR,SAA8BE,GACxBhC,KAAKiB,QAAQgB,UACfD,EAAMK,aAAerC,KAAKiB,QAAQgB,UAlD/B,EAAAb,GAAK,gBAEL,EAAAkB,SAAW,WAChB,EAAAC,gBACEpB,cAAeA,KAQZ,EAAAF,SAULgB,QAAS,EAAAZ,iBAAiBmB,qBA+B9B,GAtDmC,EAAAC,UAAtB,GAAAtB,gBAwDb,EAAAuB,eAAeC,4BAA4BxB","file":"CommerceQuery.min__5f3280c404a1ee75a113.js","sourcesContent":["webpackJsonpCoveo__temporary([85],{\n\n/***/ 293:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(7);\r\nvar ComponentOptions_1 = __webpack_require__(8);\r\nvar QueryEvents_1 = __webpack_require__(11);\r\nvar AnalyticsEvents_1 = __webpack_require__(56);\r\nvar Initialization_1 = __webpack_require__(2);\r\nvar GlobalExports_1 = __webpack_require__(3);\r\n/**\r\n * This component exposes options to handle commerce-related queries.\r\n *\r\n * @availablesince [March 2020 Release (v2.8521)](https://docs.coveo.com/en/3203/)\r\n */\r\nvar CommerceQuery = /** @class */ (function (_super) {\r\n    __extends(CommerceQuery, _super);\r\n    /**\r\n     * Creates a new CommerceQuery component.\r\n     * @param element The HTMLElement on which to instantiate the component.\r\n     * @param options The options for the CommerceQuery component.\r\n     * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n     * automatically resolved (with a slower execution time).\r\n     */\r\n    function CommerceQuery(element, options, bindings) {\r\n        var _this = _super.call(this, element, CommerceQuery.ID, bindings) || this;\r\n        _this.element = element;\r\n        _this.options = options;\r\n        _this.bindings = bindings;\r\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, CommerceQuery, options);\r\n        _this.bind.onRootElement(QueryEvents_1.QueryEvents.doneBuildingQuery, _this.handleDoneBuildingQuery);\r\n        _this.bind.onRootElement(AnalyticsEvents_1.AnalyticsEvents.changeAnalyticsCustomData, _this.handleChangeAnalytics);\r\n        return _this;\r\n    }\r\n    CommerceQuery.prototype.handleDoneBuildingQuery = function (event) {\r\n        if (this.options.listing) {\r\n            event.queryBuilder.tab = this.options.listing;\r\n            event.queryBuilder.addContextValue('listing', this.options.listing);\r\n        }\r\n    };\r\n    CommerceQuery.prototype.handleChangeAnalytics = function (event) {\r\n        if (this.options.listing) {\r\n            event.originLevel2 = this.options.listing;\r\n        }\r\n    };\r\n    CommerceQuery.ID = 'CommerceQuery';\r\n    CommerceQuery.doExport = function () {\r\n        GlobalExports_1.exportGlobally({\r\n            CommerceQuery: CommerceQuery\r\n        });\r\n    };\r\n    /**\r\n     * The options for the CommerceQuery.\r\n     * @componentOptions\r\n     */\r\n    CommerceQuery.options = {\r\n        /**\r\n         * The listing page identifier.\r\n         *\r\n         * In a typical Coveo for Commerce solution, all listing pages should share the same `searchHub`/`originLevel1` and be differentiated by setting this option to a unique, human-readable value.\r\n         *\r\n         * When specified, this option sets the `tab`/`originLevel2` parameter, as well as the `listing` property of the `context`/`customData` object of each query/usage analytics event originating from the listing page. This allows Coveo ML to provide relevant output for the listing page, and can also be useful for usage analytics reporting purposes.\r\n         *\r\n         * @examples ACME Furniture, ACME Jewelry, ACME Clothes\r\n         */\r\n        listing: ComponentOptions_1.ComponentOptions.buildStringOption()\r\n    };\r\n    return CommerceQuery;\r\n}(Component_1.Component));\r\nexports.CommerceQuery = CommerceQuery;\r\nInitialization_1.Initialization.registerAutoCreateComponent(CommerceQuery);\r\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// CommerceQuery.min__5f3280c404a1ee75a113.js","import { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { QueryEvents, IBuildingQueryEventArgs } from '../../events/QueryEvents';\r\nimport { AnalyticsEvents, IChangeAnalyticsCustomDataEventArgs } from '../../events/AnalyticsEvents';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\nexport interface ICommerceQueryOptions {\r\n  listing?: string;\r\n}\r\n\r\n/**\r\n * This component exposes options to handle commerce-related queries.\r\n *\r\n * @availablesince [March 2020 Release (v2.8521)](https://docs.coveo.com/en/3203/)\r\n */\r\nexport class CommerceQuery extends Component {\r\n  static ID = 'CommerceQuery';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      CommerceQuery: CommerceQuery\r\n    });\r\n  };\r\n\r\n  /**\r\n   * The options for the CommerceQuery.\r\n   * @componentOptions\r\n   */\r\n  static options: ICommerceQueryOptions = {\r\n    /**\r\n     * The listing page identifier.\r\n     *\r\n     * In a typical Coveo for Commerce solution, all listing pages should share the same `searchHub`/`originLevel1` and be differentiated by setting this option to a unique, human-readable value.\r\n     *\r\n     * When specified, this option sets the `tab`/`originLevel2` parameter, as well as the `listing` property of the `context`/`customData` object of each query/usage analytics event originating from the listing page. This allows Coveo ML to provide relevant output for the listing page, and can also be useful for usage analytics reporting purposes.\r\n     *\r\n     * @examples ACME Furniture, ACME Jewelry, ACME Clothes\r\n     */\r\n    listing: ComponentOptions.buildStringOption()\r\n  };\r\n\r\n  /**\r\n   * Creates a new CommerceQuery component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the CommerceQuery component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   */\r\n  constructor(public element: HTMLElement, public options?: ICommerceQueryOptions, public bindings?: IComponentBindings) {\r\n    super(element, CommerceQuery.ID, bindings);\r\n\r\n    this.options = ComponentOptions.initComponentOptions(element, CommerceQuery, options);\r\n\r\n    this.bind.onRootElement(QueryEvents.doneBuildingQuery, this.handleDoneBuildingQuery);\r\n    this.bind.onRootElement(AnalyticsEvents.changeAnalyticsCustomData, this.handleChangeAnalytics);\r\n  }\r\n\r\n  private handleDoneBuildingQuery(event: IBuildingQueryEventArgs) {\r\n    if (this.options.listing) {\r\n      event.queryBuilder.tab = this.options.listing;\r\n      event.queryBuilder.addContextValue('listing', this.options.listing);\r\n    }\r\n  }\r\n\r\n  private handleChangeAnalytics(event: IChangeAnalyticsCustomDataEventArgs) {\r\n    if (this.options.listing) {\r\n      event.originLevel2 = this.options.listing;\r\n    }\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(CommerceQuery);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/CommerceQuery/CommerceQuery.ts"],"sourceRoot":""}