{"version":3,"sources":["./src/ui/RelevanceInspector/RelevanceInspector.ts","./sass/_ResultLink.scss","./src/ui/RelevanceInspector/TableBuilder.ts","./src/ui/RelevanceInspector/ExecutionReport.ts","./src/ui/RelevanceInspector/GenericValueOutput.ts","./src/ui/RelevanceInspector/ExecutionReportGenericSection.ts","./src/ui/RelevanceInspector/RankingInfoParser.ts","./src/ui/RelevanceInspector/ExecutionReportSimpleSection.ts","./src/ui/RelevanceInspector/RankingInfoTable.ts","./src/ui/RelevanceInspector/AgGrid.ts","./src/ui/RelevanceInspector/MetaDataTable.ts","./src/ui/RelevanceInspector/RelevanceInspectorTabs.ts","webpack:///./sass/_RelevanceInspector.scss?ff92","./sass/_RelevanceInspector.scss","./src/ui/RelevanceInspector/ExecutionReportAuthenticationSection.ts","./src/ui/RelevanceInspector/ExecutionReportResolvedPipelineSection.ts","./src/ui/RelevanceInspector/ExecutionReportQueryOverrideSection.ts","./src/ui/RelevanceInspector/ExecutionReportEffectiveIndexQuerySection.ts","./src/ui/RelevanceInspector/ExecutionReportRankingModifiers.ts","./src/ui/RelevanceInspector/ExecutionReportITDSection.ts","./src/ui/RelevanceInspector/AvailableFieldsTable.ts","./src/ui/RelevanceInspector/InlineRankingInfo.ts","./src/ui/ResultLink/ResultLink.ts"],"names":[],"mappings":"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","file":"RelevanceInspector__cb223698fbc3e33d4d03.js","sourcesContent":["import { RankingInfoTable } from './RankingInfoTable';\r\nimport { MetaDataTable } from './MetaDataTable';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { IAttributeChangedEventArg } from '../../models/Model';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { ModalBox } from '../../ExternalModulesShim';\r\nimport { QueryStateModel, ResultListEvents, DomUtils, Logger } from '../../Core';\r\nimport { RelevanceInspectorTabs } from './RelevanceInspectorTabs';\r\nimport 'styling/_RelevanceInspector';\r\nimport { ExecutionReport } from './ExecutionReport';\r\nimport { AvailableFieldsTable } from './AvailableFieldsTable';\r\nimport agGridModule = require('ag-grid/main');\r\nimport { debounce } from 'underscore';\r\nimport { IDisplayedNewResultEventArgs } from '../../events/ResultListEvents';\r\nimport { InlineRankingInfo } from './InlineRankingInfo';\r\n\r\nexport interface IRelevanceInspectorConstructor {\r\n  new (element: HTMLElement, bindings: IComponentBindings): RelevanceInspector;\r\n}\r\n\r\nexport interface IRelevanceInspectorTab {\r\n  gridOptions: agGridModule.GridOptions;\r\n}\r\n\r\nexport class RelevanceInspector {\r\n  private opened = false;\r\n  private activeTab: string;\r\n  private tabs: Record<string, IRelevanceInspectorTab>;\r\n  private modalBoxModule = ModalBox;\r\n\r\n  constructor(public element: HTMLElement, public bindings: IComponentBindings) {\r\n    $$(this.element).text('Relevance Inspector');\r\n    $$(this.element).addClass('coveo-button coveo-relevance-inspector');\r\n    $$(this.bindings.root).on(\r\n      this.bindings.queryStateModel.getEventName(QueryStateModel.eventTypes.changeOne + QueryStateModel.attributesEnum.debug),\r\n      (e, args: IAttributeChangedEventArg) => this.toggleFromState(args.value)\r\n    );\r\n    $$(this.element).on('click', () => this.open());\r\n    $$(this.bindings.root).on(ResultListEvents.newResultDisplayed, (e, args: IDisplayedNewResultEventArgs) =>\r\n      this.handleNewResultDisplayed(args)\r\n    );\r\n    this.bindings.queryStateModel.get(QueryStateModel.attributesEnum.debug) ? this.show() : this.hide();\r\n  }\r\n\r\n  public get modalBox() {\r\n    return this.modalBoxModule;\r\n  }\r\n\r\n  public set modalBox(modalBoxModule) {\r\n    this.modalBoxModule = modalBoxModule;\r\n  }\r\n\r\n  public hide() {\r\n    $$(this.element).addClass('coveo-hidden');\r\n  }\r\n\r\n  public show() {\r\n    $$(this.element).removeClass('coveo-hidden');\r\n  }\r\n\r\n  public async open() {\r\n    if (this.opened) {\r\n      return;\r\n    }\r\n    this.opened = true;\r\n\r\n    const content = $$('div');\r\n    const animation = DomUtils.getBasicLoadingAnimation();\r\n    content.append(animation);\r\n    this.modalBox.open(content.el, this.modalBoxOptions);\r\n    const rows = await this.buildTabs();\r\n    if (rows) {\r\n      animation.remove();\r\n      content.append(rows.el);\r\n    } else {\r\n      this.modalBox.close();\r\n    }\r\n  }\r\n\r\n  private handleNewResultDisplayed(args: IDisplayedNewResultEventArgs) {\r\n    if (this.bindings.queryStateModel.get(QueryStateModel.attributesEnum.debug)) {\r\n      $$(args.item).addClass('coveo-with-inline-ranking-info');\r\n      if ($$(args.item).hasClass('coveo-table-layout')) {\r\n        $$(args.item).append(new InlineRankingInfo(args.result).build().el);\r\n      } else {\r\n        $$(args.item).prepend(new InlineRankingInfo(args.result).build().el);\r\n      }\r\n    }\r\n  }\r\n\r\n  private get modalBoxOptions() {\r\n    return {\r\n      title: 'Relevance Inspector',\r\n      titleClose: false,\r\n      overlayClose: true,\r\n      sizeMod: 'big',\r\n      className: 'relevance-inspector-modal',\r\n      validation: () => {\r\n        this.opened = false;\r\n        return true;\r\n      },\r\n      body: document.getElementsByClassName('CoveoSearchInterface')[0] // Will return undefined if no CoveoSearchInterface is present\r\n    };\r\n  }\r\n\r\n  private toggleFromState(stateValue: number) {\r\n    stateValue != 0 ? this.show() : this.hide();\r\n    this.modalBox.close();\r\n  }\r\n\r\n  private async buildTabs() {\r\n    const lastResults = this.bindings.queryController.getLastResults().results;\r\n    if (!lastResults || lastResults.length == 0) {\r\n      new Logger(this).error(\r\n        'Could not open Relevance Inspector because there is no results to display. Please execute a query beforehand',\r\n        lastResults\r\n      );\r\n      return;\r\n    }\r\n    if (!lastResults[0].rankingInfo) {\r\n      new Logger(this).error(\r\n        'Could not open Relevance Inspector because there is no ranking info returned on the results. Please execute a query in debug mode beforehad',\r\n        lastResults\r\n      );\r\n      return;\r\n    }\r\n\r\n    const container = $$('div');\r\n\r\n    const rankingInfoTable = new RankingInfoTable(lastResults, this.bindings);\r\n    const metadataTable = new MetaDataTable(lastResults, this.bindings);\r\n    const executionReport = new ExecutionReport(this.bindings.queryController.getLastResults(), this.bindings);\r\n    const availableFields = new AvailableFieldsTable(this.bindings);\r\n\r\n    this.tabs = {\r\n      relevanceInspectorRankingInfo: rankingInfoTable,\r\n      relevanceInspectorMetadata: metadataTable,\r\n      relevanceInspectorExecutionReport: executionReport,\r\n      relevanceInspectorAvailableFields: availableFields\r\n    };\r\n\r\n    const inspectorTabs = new RelevanceInspectorTabs(tabChangedTo => {\r\n      this.activeTab = tabChangedTo;\r\n      this.resize();\r\n    });\r\n\r\n    const debouncedResize = debounce(() => this.resize(), 100);\r\n\r\n    window.addEventListener('resize', debouncedResize);\r\n\r\n    inspectorTabs.addSection('Ranking Information', await rankingInfoTable.build(), 'relevanceInspectorRankingInfo');\r\n    inspectorTabs.addSection('Metadata', await metadataTable.build(), 'relevanceInspectorMetadata');\r\n    inspectorTabs.addSection('Execution Report', await executionReport.build(), 'relevanceInspectorExecutionReport');\r\n    inspectorTabs.addSection('Available Fields', await availableFields.build(), 'relevanceInspectorAvailableFields');\r\n    inspectorTabs.select('relevanceInspectorRankingInfo');\r\n\r\n    container.append(inspectorTabs.navigationSection.el);\r\n    container.append(inspectorTabs.tabContentSection.el);\r\n\r\n    return container;\r\n  }\r\n\r\n  private resize() {\r\n    if (!this.activeTab) {\r\n      return;\r\n    }\r\n    if (!this.tabs[this.activeTab]) {\r\n      return;\r\n    }\r\n    this.tabs[this.activeTab].gridOptions.api.sizeColumnsToFit();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/RelevanceInspector.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResultLink.scss\n// module id = 532\n// module chunks = 0 12 21 25 34 35 63 88","import { loadAgGridLibrary } from './AgGrid';\r\nimport { first, map, each, flatten, find } from 'underscore';\r\n\r\nimport agGridModule = require('ag-grid/main');\r\nimport { Dom, $$, StringUtils, StreamHighlightUtils } from '../../UtilsModules';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\r\nimport ResultListModule = require('../ResultList/ResultList');\r\nimport { ResultLink } from '../ResultLink/ResultLink';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\ndeclare const agGrid: typeof agGridModule;\r\n\r\nexport interface ITableDataSource extends agGridModule.ColDef {\r\n  content?: any;\r\n  width?: number;\r\n  children?: Record<string, ITableDataSource>[];\r\n  cellRenderer?: new () => agGridModule.ICellRendererComp;\r\n}\r\n\r\nexport const defaultGridOptions: agGridModule.GridOptions = {\r\n  domLayout: 'autoHeight',\r\n  enableColResize: true,\r\n  rowHeight: 100,\r\n  enableRangeSelection: true,\r\n  suppressRowClickSelection: true,\r\n  suppressCellSelection: true,\r\n  defaultColDef: {\r\n    width: 100\r\n  },\r\n  enableSorting: true,\r\n  autoSizePadding: 10\r\n};\r\n\r\nexport class TableBuilder {\r\n  private gridOptions: agGridModule.GridOptions | undefined;\r\n\r\n  public async build(sources: Record<string, ITableDataSource>[], table: Dom, gridOptions = defaultGridOptions) {\r\n    const firstData = first(sources) || {};\r\n    const mapToAgGridFormat = (value: agGridModule.ColDef & agGridModule.ColGroupDef, key: string): any => {\r\n      if (value.children) {\r\n        return {\r\n          field: key,\r\n          headerName: key,\r\n          marryChildren: true,\r\n          children: flatten(\r\n            value.children.map((child: any) => {\r\n              return map(child, mapToAgGridFormat);\r\n            })\r\n          )\r\n        };\r\n      } else {\r\n        return {\r\n          field: key,\r\n          headerName: key,\r\n          ...value\r\n        };\r\n      }\r\n    };\r\n\r\n    const columnDefs = map(firstData as any, mapToAgGridFormat) as agGridModule.ColDef[];\r\n\r\n    const rowData = map(sources, source => {\r\n      const merged: any = {};\r\n\r\n      const extractContent = (value: ITableDataSource & agGridModule.ColGroupDef, key: string) => {\r\n        if (value.content) {\r\n          merged[key] = value.content;\r\n        } else if (value.children) {\r\n          each(value.children, (child: any) => {\r\n            each(child, extractContent);\r\n          });\r\n        }\r\n      };\r\n\r\n      each(source, extractContent as any);\r\n      return merged;\r\n    });\r\n\r\n    this.gridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs,\r\n      rowData,\r\n      ...gridOptions\r\n    };\r\n\r\n    await loadAgGridLibrary();\r\n    const grid = new agGrid.Grid(table.el, this.gridOptions);\r\n\r\n    return { grid, gridOptions: this.gridOptions };\r\n  }\r\n\r\n  public static thumbnailCell(result: IQueryResult, bindings: IComponentBindings): Record<string, ITableDataSource> {\r\n    return {\r\n      Document: {\r\n        content: { result, bindings },\r\n        cellRenderer: ThumbnailHtmlRenderer,\r\n        width: 550,\r\n        getQuickFilterText: (params: agGridModule.GetQuickFilterTextParams) => {\r\n          return '';\r\n        }\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nexport class ThumbnailHtmlRenderer implements agGridModule.ICellRendererComp {\r\n  private element: any | undefined;\r\n  private currentFilter: string | undefined;\r\n\r\n  public init(params?: { value: { result: IQueryResult; bindings: IComponentBindings }; api: any }) {\r\n    if (params) {\r\n      this.element = params.value;\r\n      this.currentFilter = params.api.filterManager.quickFilter;\r\n    }\r\n  }\r\n\r\n  public getGui(): HTMLElement {\r\n    const cell = $$('div', { className: 'coveo-relevance-inspector-thumbnail-cell' });\r\n    if (this.element) {\r\n      const thumbnail = this.thumbnail(this.element.result, this.element.bindings);\r\n      cell.append(thumbnail.el);\r\n    } else {\r\n      cell.append($$('p', undefined, '-- NULL --').el);\r\n    }\r\n    return cell.el;\r\n  }\r\n\r\n  private thumbnail(result: IQueryResult, bindings: IResultsComponentBindings) {\r\n    let dom: Dom;\r\n\r\n    if (bindings && result) {\r\n      const resultLists = bindings.searchInterface.getComponents('ResultList') as ResultListModule.ResultList[];\r\n      const firstActiveResultList = find(resultLists, resultList => !resultList.disabled);\r\n\r\n      if (firstActiveResultList) {\r\n        dom = $$('div', {\r\n          className: 'coveo-relevance-inspector-result-thumbnail'\r\n        });\r\n        firstActiveResultList.buildResult(result).then(builtResult => {\r\n          dom.append(builtResult);\r\n        });\r\n      } else {\r\n        dom = $$('a', {\r\n          className: 'CoveoResultLink'\r\n        });\r\n        new ResultLink(dom.el, { alwaysOpenInNewWindow: true }, bindings, result);\r\n      }\r\n\r\n      if (this.currentFilter) {\r\n        this.highlightSearch(dom.el, this.currentFilter);\r\n      }\r\n    } else {\r\n      dom = $$('div', undefined, '-- NULL --');\r\n    }\r\n\r\n    return dom;\r\n  }\r\n\r\n  public refresh(params: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  private highlightSearch(elementToSearch: HTMLElement, search: string) {\r\n    let asHTMLElement: HTMLElement = elementToSearch;\r\n\r\n    if (asHTMLElement != null && asHTMLElement.innerText != null) {\r\n      const match = asHTMLElement.innerText.split(new RegExp('(?=' + StringUtils.regexEncode(search) + ')', 'gi'));\r\n      asHTMLElement.innerHTML = '';\r\n      match.forEach(value => {\r\n        const regex = new RegExp('(' + StringUtils.regexEncode(search) + ')', 'i');\r\n        const group = value.match(regex);\r\n        let span;\r\n\r\n        if (group != null) {\r\n          span = $$('span', {\r\n            className: 'coveo-relevance-inspector-highlight'\r\n          });\r\n          span.text(group[1]);\r\n          asHTMLElement.appendChild(span.el);\r\n          span = $$('span');\r\n          span.text(value.substr(group[1].length));\r\n          asHTMLElement.appendChild(span.el);\r\n        } else {\r\n          span = $$('span');\r\n          span.text(value);\r\n          asHTMLElement.appendChild(span.el);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport class GenericHtmlRenderer implements agGridModule.ICellRendererComp {\r\n  private element: string | undefined;\r\n  private currentFilter: string | undefined;\r\n\r\n  public init(params?: any) {\r\n    if (params && params.api) {\r\n      this.element = params.value;\r\n      this.currentFilter = params.api.filterManager.quickFilter;\r\n    }\r\n  }\r\n  public getGui(): HTMLElement {\r\n    if (this.element && this.currentFilter) {\r\n      return $$('div', undefined, StreamHighlightUtils.highlightStreamHTML(this.element, { Precision: ['precision'] }, {})).el;\r\n    } else if (this.element) {\r\n      return $$('div', undefined, this.element).el;\r\n    } else {\r\n      return $$('div', undefined, '-- NULL --').el;\r\n    }\r\n  }\r\n\r\n  public refresh(params: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/TableBuilder.ts","import { ExecutionReportAuthenticationSection } from './ExecutionReportAuthenticationSection';\r\nimport { ExecutionReportResolvedPipelineSection } from './ExecutionReportResolvedPipelineSection';\r\nimport { ExecutionReportQueryOverrideSection } from './ExecutionReportQueryOverrideSection';\r\nimport { ExecutionReportSimpleSection } from './ExecutionReportSimpleSection';\r\nimport { ExecutionReportEffectiveIndexQuerySection } from './ExecutionReportEffectiveIndexQuerySection';\r\nimport { IQueryResults } from '../../rest/QueryResults';\r\nimport { $$, Dom } from '../../UtilsModules';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { IRelevanceInspectorTab } from './RelevanceInspector';\r\nimport agGridModule = require('ag-grid/main');\r\nimport { ExecutionReportRankingModifiers } from './ExecutionReportRankingModifiers';\r\nimport { IResultsComponentBindings, Logger } from '../../Core';\r\nimport { ExecutionReportITDSection } from './ExecutionReportITDSection';\r\n\r\nexport interface IExecutionReport {\r\n  duration: number;\r\n  children: IExecutionReportSection[];\r\n}\r\n\r\nexport interface IRankingExpressionExecutionReport {\r\n  expression: string;\r\n  modifer: number;\r\n  isConstant: boolean;\r\n}\r\n\r\nexport enum EXECUTION_REPORT_SECTION {\r\n  PERFORM_AUTHENTICATION = 'PerformAuthentication',\r\n  RESOLVE_PIPELINE = 'ResolvePipeline',\r\n  QUERY_PARAM_OVERRIDE = 'ApplyQueryParamOverrideFeature',\r\n  THESAURUS = 'ApplyThesaurusFeature',\r\n  PREPROCESS_QUERY_EXPRESSION = 'PreprocessQueryExpression',\r\n  PREPROCESS_QUERY = 'PreprocessQuery',\r\n  STOP_WORDS = 'ApplyStopWordFeature',\r\n  FILTERS = 'ApplyFilterFeature',\r\n  RANKING = 'ApplyRankingFeature',\r\n  TOP_RESULT = 'ApplyTopResultFeature',\r\n  RANKING_WEIGHT = 'ApplyRankingWeightFeature',\r\n  INDEX_QUERY = 'Send query to index',\r\n  TOP_CLICKS = 'EvaluatingTopClicks',\r\n  PARTIAL_MATCH = 'PartialMatch',\r\n  NONE = 'NONE'\r\n}\r\n\r\nexport interface IExecutionReportSection {\r\n  name: string;\r\n  duration: number;\r\n  result: Record<string, any>;\r\n  description: string;\r\n  children?: IExecutionReportSection[];\r\n  applied?: string[];\r\n}\r\n\r\nexport interface IExecutionReportSectionBuilder {\r\n  build(executionReport: IExecutionReport): Promise<{ container: Dom; gridOptions?: agGridModule.GridOptions }>;\r\n}\r\n\r\nexport class ExecutionReport implements IRelevanceInspectorTab {\r\n  public gridOptions: agGridModule.GridOptions;\r\n  constructor(public results: IQueryResults, public bindings: IComponentBindings) {}\r\n\r\n  public static standardSectionHeader(title: string) {\r\n    const container = $$('div');\r\n    container.append($$('h4', undefined, title).el);\r\n\r\n    const agGridElement = $$('div', {\r\n      className: 'ag-theme-fresh'\r\n    });\r\n    container.append(agGridElement.el);\r\n\r\n    return {\r\n      container,\r\n      agGridElement\r\n    };\r\n  }\r\n\r\n  public async build() {\r\n    if (!this.results.executionReport) {\r\n      new Logger(this).error(\r\n        'Could not open execution report : Missing execution report on results. Try executing the query in debug mode.'\r\n      );\r\n      return $$('div');\r\n    }\r\n\r\n    const container = $$('div', {\r\n      className: 'execution-report-debug'\r\n    });\r\n\r\n    const gridOptions: agGridModule.GridOptions[] = [];\r\n\r\n    const authenticationSection = await new ExecutionReportAuthenticationSection().build(this.results.executionReport);\r\n    container.append(authenticationSection.container.el);\r\n    if (authenticationSection.gridOptions) {\r\n      gridOptions.push(authenticationSection.gridOptions);\r\n    }\r\n\r\n    const resolvedPipelineSection = await new ExecutionReportResolvedPipelineSection().build(this.results.executionReport);\r\n    container.append(resolvedPipelineSection.container.el);\r\n    if (resolvedPipelineSection.gridOptions) {\r\n      gridOptions.push(resolvedPipelineSection.gridOptions);\r\n    }\r\n\r\n    const resolvedRankingModifiers = await new ExecutionReportRankingModifiers().build(\r\n      this.results.results,\r\n      this.results.rankingExpressions,\r\n      this.bindings as IResultsComponentBindings\r\n    );\r\n    container.append(resolvedRankingModifiers.container.el);\r\n    if (resolvedRankingModifiers.gridOptions) {\r\n      gridOptions.push(resolvedRankingModifiers.gridOptions);\r\n    }\r\n\r\n    const queryParamOverrideSection = await new ExecutionReportQueryOverrideSection().build(this.results.executionReport);\r\n    container.append(queryParamOverrideSection.container.el);\r\n    if (queryParamOverrideSection.gridOptions) {\r\n      gridOptions.push(queryParamOverrideSection.gridOptions);\r\n    }\r\n\r\n    const thesaurusSection = await new ExecutionReportSimpleSection(\r\n      EXECUTION_REPORT_SECTION.PREPROCESS_QUERY_EXPRESSION,\r\n      EXECUTION_REPORT_SECTION.THESAURUS,\r\n      'Thesaurus'\r\n    ).build(this.results.executionReport);\r\n\r\n    container.append(thesaurusSection.container.el);\r\n    if (thesaurusSection.gridOptions) {\r\n      gridOptions.push(thesaurusSection.gridOptions);\r\n    }\r\n\r\n    const stopWordsSection = await new ExecutionReportSimpleSection(\r\n      EXECUTION_REPORT_SECTION.PREPROCESS_QUERY_EXPRESSION,\r\n      EXECUTION_REPORT_SECTION.STOP_WORDS,\r\n      'Stop words'\r\n    ).build(this.results.executionReport);\r\n    container.append(stopWordsSection.container.el);\r\n    if (stopWordsSection.gridOptions) {\r\n      gridOptions.push(stopWordsSection.gridOptions);\r\n    }\r\n\r\n    const filtersSection = await new ExecutionReportSimpleSection(\r\n      EXECUTION_REPORT_SECTION.PREPROCESS_QUERY,\r\n      EXECUTION_REPORT_SECTION.FILTERS,\r\n      'Filters'\r\n    ).build(this.results.executionReport);\r\n    container.append(filtersSection.container.el);\r\n    if (filtersSection.gridOptions) {\r\n      gridOptions.push(filtersSection.gridOptions);\r\n    }\r\n\r\n    const rankingSection = await new ExecutionReportSimpleSection(\r\n      EXECUTION_REPORT_SECTION.PREPROCESS_QUERY,\r\n      EXECUTION_REPORT_SECTION.RANKING,\r\n      'Ranking'\r\n    ).build(this.results.executionReport);\r\n    container.append(rankingSection.container.el);\r\n    if (rankingSection.gridOptions) {\r\n      gridOptions.push(rankingSection.gridOptions);\r\n    }\r\n\r\n    const topResultsSection = await new ExecutionReportSimpleSection(\r\n      EXECUTION_REPORT_SECTION.PREPROCESS_QUERY,\r\n      EXECUTION_REPORT_SECTION.TOP_RESULT,\r\n      'Featured Results'\r\n    ).build(this.results.executionReport);\r\n    container.append(topResultsSection.container.el);\r\n\r\n    if (topResultsSection.gridOptions) {\r\n      gridOptions.push(topResultsSection.gridOptions);\r\n    }\r\n\r\n    const itdSection = await new ExecutionReportITDSection().build(this.results.executionReport);\r\n    container.append(itdSection.container.el);\r\n\r\n    if (itdSection.gridOptions) {\r\n      gridOptions.push(itdSection.gridOptions);\r\n    }\r\n\r\n    const rankingWeightsSection = await new ExecutionReportSimpleSection(\r\n      EXECUTION_REPORT_SECTION.PREPROCESS_QUERY,\r\n      EXECUTION_REPORT_SECTION.RANKING_WEIGHT,\r\n      'Ranking weights'\r\n    ).build(this.results.executionReport);\r\n    container.append(rankingWeightsSection.container.el);\r\n    if (rankingWeightsSection.gridOptions) {\r\n      gridOptions.push(rankingWeightsSection.gridOptions);\r\n    }\r\n\r\n    const indexQuerySection = await new ExecutionReportEffectiveIndexQuerySection().build(this.results.executionReport);\r\n    container.append(indexQuerySection.container.el);\r\n\r\n    this.gridOptions = {\r\n      api: {\r\n        sizeColumnsToFit: () => {\r\n          gridOptions.forEach(option => (option.api ? option.api.sizeColumnsToFit() : null));\r\n        }\r\n      }\r\n    } as any;\r\n\r\n    return container;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/ExecutionReport.ts","import { ITableDataSource, GenericHtmlRenderer } from './TableBuilder';\r\nimport { isArray, isObject, each } from 'underscore';\r\nimport { $$ } from '../../utils/Dom';\r\n\r\nexport type GenericValueOutputType = string | number | string[] | Record<string, any> | boolean | undefined;\r\n\r\nconst defaultNullOutput = '-- NULL --';\r\n\r\nexport class GenericValueOutput {\r\n  public output(section: GenericValueOutputType): ITableDataSource {\r\n    if (isArray(section)) {\r\n      return this.arrayJoined(section);\r\n    }\r\n    if (isObject(section)) {\r\n      return this.objectJoined(section as Record<string, any>);\r\n    }\r\n\r\n    return this.simpleValue(section as string | number | undefined);\r\n  }\r\n\r\n  private simpleValue(section: string | number | undefined) {\r\n    return {\r\n      content: this.valueOrNullOutput(section)\r\n    };\r\n  }\r\n\r\n  private objectJoined(section: Record<string, any>): ITableDataSource {\r\n    let content = '';\r\n    each(section, (value, key) => {\r\n      if (isArray(value)) {\r\n        const list = $$('dl');\r\n        list.append($$('dt', undefined, key).el);\r\n        const innerList = $$('dd', undefined, this.arrayJoined(value).content);\r\n        list.append(innerList.el);\r\n        content += list.el.outerHTML;\r\n      } else if (isObject(value)) {\r\n        content += this.objectJoined(value).content;\r\n      } else {\r\n        const list = $$('dl');\r\n        list.append($$('dt', undefined, key).el);\r\n        list.append($$('dd', undefined, this.valueOrNullOutput(value)).el);\r\n\r\n        content += list.el.outerHTML;\r\n      }\r\n    });\r\n\r\n    return {\r\n      content,\r\n      cellRenderer: GenericHtmlRenderer\r\n    };\r\n  }\r\n\r\n  private arrayJoined(section: string[] | undefined): ITableDataSource {\r\n    if (!section || section.length == 0) {\r\n      return {\r\n        content: defaultNullOutput\r\n      };\r\n    }\r\n\r\n    const list = $$('ul', {\r\n      className: 'relevance-inspector-list-output'\r\n    });\r\n\r\n    section.forEach(sectionValue => {\r\n      if (isObject(sectionValue)) {\r\n        list.append($$('li', undefined, this.objectJoined(sectionValue as any).content).el);\r\n      } else {\r\n        list.append($$('li', undefined, this.valueOrNullOutput(sectionValue)).el);\r\n      }\r\n    });\r\n    return {\r\n      content: list.el.outerHTML,\r\n      cellRenderer: GenericHtmlRenderer\r\n    };\r\n  }\r\n\r\n  private valueOrNullOutput(value: any) {\r\n    if (value != null && value !== '') {\r\n      return value.toString();\r\n    }\r\n    return defaultNullOutput;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/GenericValueOutput.ts","import { IExecutionReportSection } from './ExecutionReport';\r\nimport { GenericValueOutput } from './GenericValueOutput';\r\nimport { ITableDataSource } from './TableBuilder';\r\n\r\nexport class ExecutionReportGenericSection {\r\n  public build(executionReportSection: IExecutionReportSection): Record<string, ITableDataSource> {\r\n    return {\r\n      ...this.descriptionSection(executionReportSection),\r\n      ...this.durationSection(executionReportSection)\r\n    };\r\n  }\r\n\r\n  private descriptionSection(executionReportSection: IExecutionReportSection): Record<string, ITableDataSource> {\r\n    return {\r\n      Description: new GenericValueOutput().output(executionReportSection.description)\r\n    };\r\n  }\r\n\r\n  private durationSection(executionReportSection: IExecutionReportSection): Record<string, ITableDataSource> {\r\n    return {\r\n      Duration: new GenericValueOutput().output(`${executionReportSection.duration} ms`)\r\n    };\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/ExecutionReportGenericSection.ts","import { object, map, keys, reduce } from 'underscore';\r\nimport { StringUtils } from '../../utils/StringUtils';\r\nimport { $$, Dom } from '../../utils/Dom';\r\n\r\nexport interface IRankingInfo {\r\n  documentWeights: IListOfWeights;\r\n  totalWeight: number;\r\n  termsWeight: IListOfTermsWeights;\r\n  qreWeights: IListOfQRE[];\r\n}\r\n\r\nexport interface IListOfWeights {\r\n  Adjacency: number;\r\n  'Collaborative rating': number;\r\n  Custom: number;\r\n  Date: number;\r\n  QRE: number;\r\n  Quality: number;\r\n  'Ranking functions': number;\r\n  Source: number;\r\n  Title: number;\r\n  [key: string]: number;\r\n}\r\n\r\nexport interface IListOfQRE {\r\n  expression: string;\r\n  score: number;\r\n}\r\n\r\nexport type IListOfTermsWeights = Record<string, IWeightsPerTerm>;\r\n\r\nexport interface IWeightsPerTerm {\r\n  Weights: IWeightsPerTermBreakdown;\r\n  terms: Record<string, IWeightsPerTermPerDocument>;\r\n}\r\n\r\nexport interface IWeightsPerTermBreakdown {\r\n  Casing: number;\r\n  Concept: number;\r\n  Formatted: number;\r\n  Frequency: number;\r\n  Relation: number;\r\n  Summary: number;\r\n  Title: number;\r\n  URI: number;\r\n  [key: string]: number;\r\n}\r\n\r\nexport interface IWeightsPerTermPerDocument {\r\n  Correlation: number;\r\n  'TF-IDF': number;\r\n}\r\n\r\nexport const buildListOfTermsElement = (weightPerTerm: IWeightsPerTermBreakdown): Dom => {\r\n  const listItems = map(weightPerTerm, (value, key) => {\r\n    return {\r\n      dt: $$(\r\n        'dt',\r\n        {\r\n          className: 'coveo-relevance-inspector-dt'\r\n        },\r\n        `${key}`\r\n      ),\r\n      dd: $$(\r\n        'dd',\r\n        {\r\n          className: 'coveo-relevance-inspector-dd'\r\n        },\r\n        `${value}`\r\n      )\r\n    };\r\n  });\r\n  const total = reduce(weightPerTerm, (memo, value) => memo + value, 0);\r\n  const list = $$('dl');\r\n  listItems.forEach(item => {\r\n    list.append(item.dt.el);\r\n    list.append(item.dd.el);\r\n  });\r\n  list.append($$('dt', { className: 'coveo-relevance-inspector-dt' }, `Total`).el);\r\n  list.append($$('dd', { className: 'coveo-relevance-inspector-dd coveo-relevance-inspector-highlight' }, `${total}`).el);\r\n  return list;\r\n};\r\n\r\nexport const parseRankingInfo = (value: string): IRankingInfo | null => {\r\n  const REGEX_EXTRACT_DOCUMENT_WEIGHTS = /Document weights:\\n((?:.)*?)\\n+/g;\r\n  const REGEX_EXTRACT_TERMS_WEIGHTS = /Terms weights:\\n((?:.|\\n)*)\\n+/g;\r\n  const REGEX_EXTRACT_TOTAL_WEIGHTS = /Total weight: ([0-9]+)/g;\r\n\r\n  if (value) {\r\n    const docWeightsRegexResult = REGEX_EXTRACT_DOCUMENT_WEIGHTS.exec(value);\r\n    const termsWeightRegexResult = REGEX_EXTRACT_TERMS_WEIGHTS.exec(value);\r\n    const totalWeigthRegexResult = REGEX_EXTRACT_TOTAL_WEIGHTS.exec(value);\r\n\r\n    const qreWeights = parseQREWeights(value);\r\n    const documentWeights = parseWeights(docWeightsRegexResult ? docWeightsRegexResult[1] : null);\r\n    const termsWeight = parseTermsWeights(termsWeightRegexResult);\r\n    const totalWeight = totalWeigthRegexResult ? Number(totalWeigthRegexResult[1]) : null;\r\n\r\n    return {\r\n      documentWeights,\r\n      termsWeight,\r\n      totalWeight,\r\n      qreWeights\r\n    };\r\n  }\r\n  return null;\r\n};\r\n\r\nconst parseWeights = (value: string | null): IListOfWeights | null => {\r\n  const REGEX_EXTRACT_LIST_OF_WEIGHTS = /(\\w+(?:\\s\\w+)*): ([-0-9]+)/g;\r\n  const REGEX_EXTRACT_WEIGHT_GROUP = /^(\\w+(?:\\s\\w+)*): ([-0-9]+)$/;\r\n\r\n  if (value) {\r\n    const listOfWeight = value.match(REGEX_EXTRACT_LIST_OF_WEIGHTS);\r\n\r\n    if (listOfWeight) {\r\n      return object(\r\n        listOfWeight.map(weight => {\r\n          let weightGroup = weight.match(REGEX_EXTRACT_WEIGHT_GROUP);\r\n\r\n          if (weightGroup) {\r\n            const weightAppliedOn = weightGroup[1];\r\n            const weightValue = weightGroup[2];\r\n            return [weightAppliedOn, Number(weightValue)];\r\n          }\r\n          return null;\r\n        })\r\n      ) as IListOfWeights;\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nconst parseTermsWeights = (termsWeight: RegExpExecArray | null): IListOfTermsWeights | null => {\r\n  const REGEX_EXTRACT_GROUP_OF_TERMS = /((?:[^:]+: [0-9]+, [0-9]+; )+)\\n((?:\\w+: [0-9]+; )+)/g;\r\n  const REGEX_EXTRACT_SINGLE_TERM = /([^:]+): ([0-9]+), ([0-9]+); /g;\r\n\r\n  if (termsWeight && termsWeight[1]) {\r\n    let terms = StringUtils.match(termsWeight[1], REGEX_EXTRACT_GROUP_OF_TERMS);\r\n\r\n    return object(\r\n      map(terms, term => {\r\n        let words = object(\r\n          map(StringUtils.match(term[1], REGEX_EXTRACT_SINGLE_TERM), word => {\r\n            return [\r\n              word[1],\r\n              {\r\n                Correlation: Number(word[2]),\r\n                'TF-IDF': Number(word[3])\r\n              }\r\n            ];\r\n          })\r\n        );\r\n        const weights = parseWeights(term[2]);\r\n        return [\r\n          keys(words).join(', '),\r\n          {\r\n            terms: words,\r\n            Weights: weights\r\n          }\r\n        ];\r\n      })\r\n    ) as IListOfTermsWeights;\r\n  }\r\n  return null;\r\n};\r\n\r\nconst parseQREWeights = (value: string): IListOfQRE[] => {\r\n  const REGEX_EXTRACT_QRE_WEIGHTS = /(Expression:\\s\".*\")\\sScore:\\s(?!0)([0-9]+)\\n+/g;\r\n\r\n  let qreWeightsRegexResult = REGEX_EXTRACT_QRE_WEIGHTS.exec(value);\r\n\r\n  const qreWeights: IListOfQRE[] = [];\r\n  while (qreWeightsRegexResult) {\r\n    qreWeights.push({\r\n      expression: qreWeightsRegexResult[1],\r\n      score: parseInt(qreWeightsRegexResult[2], 10)\r\n    });\r\n    qreWeightsRegexResult = REGEX_EXTRACT_QRE_WEIGHTS.exec(value);\r\n  }\r\n\r\n  return qreWeights;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/RankingInfoParser.ts","import {\r\n  IExecutionReportSectionBuilder,\r\n  EXECUTION_REPORT_SECTION,\r\n  IExecutionReportSection,\r\n  IExecutionReport,\r\n  ExecutionReport\r\n} from './ExecutionReport';\r\nimport { findWhere, find } from 'underscore';\r\nimport { ExecutionReportGenericSection } from './ExecutionReportGenericSection';\r\nimport { GenericValueOutput } from './GenericValueOutput';\r\nimport { TableBuilder } from './TableBuilder';\r\nimport agGridModule = require('ag-grid/main');\r\nimport { Dom } from '../../Core';\r\n\r\nexport interface IExecutionReportSimpleSection extends IExecutionReportSection {\r\n  applied: string[];\r\n}\r\n\r\nexport class ExecutionReportSimpleSection implements IExecutionReportSectionBuilder {\r\n  public constructor(\r\n    public topLevelProperty: EXECUTION_REPORT_SECTION,\r\n    public secondLevelProperty: EXECUTION_REPORT_SECTION,\r\n    public sectionTitle: string\r\n  ) {}\r\n\r\n  public async build(executionReport: IExecutionReport): Promise<{ container: Dom; gridOptions: agGridModule.GridOptions }> {\r\n    const { container, agGridElement } = ExecutionReport.standardSectionHeader(this.sectionTitle);\r\n    let gridOptions: agGridModule.GridOptions;\r\n    const topLevelProperty = find(executionReport.children, child => {\r\n      return child.name == this.topLevelProperty && child.children && findWhere(child.children, { name: this.secondLevelProperty });\r\n    });\r\n\r\n    if (topLevelProperty && topLevelProperty.children) {\r\n      const secondLevelProperty = findWhere(topLevelProperty.children, { name: this.secondLevelProperty }) as\r\n        | IExecutionReportSimpleSection\r\n        | undefined;\r\n\r\n      if (secondLevelProperty) {\r\n        const dataSource = [\r\n          {\r\n            ...new ExecutionReportGenericSection().build(secondLevelProperty),\r\n            ...{ Applied: new GenericValueOutput().output(secondLevelProperty.applied) }\r\n          }\r\n        ];\r\n\r\n        const tableBuilder = await new TableBuilder().build(dataSource, agGridElement);\r\n        gridOptions = tableBuilder.gridOptions;\r\n      }\r\n    } else {\r\n      const tableBuilder = await new TableBuilder().build(\r\n        [\r\n          {\r\n            [`${this.sectionTitle}`]: {\r\n              content: `NO DATA AVAILABLE FOR ${this.sectionTitle} IN CURRENT EXECUTION REPORT`\r\n            }\r\n          }\r\n        ],\r\n        agGridElement\r\n      );\r\n\r\n      gridOptions = tableBuilder.gridOptions;\r\n    }\r\n\r\n    return { container, gridOptions };\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/ExecutionReportSimpleSection.ts","import { parseRankingInfo, IRankingInfo, buildListOfTermsElement, IWeightsPerTerm } from './RankingInfoParser';\r\nimport { each, uniq, contains, chain, reduce } from 'underscore';\r\nimport { TableBuilder, ITableDataSource, GenericHtmlRenderer } from './TableBuilder';\r\nimport { $$, Dom } from '../../utils/Dom';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\r\nimport { IRelevanceInspectorTab } from './RelevanceInspector';\r\nimport agGridModule = require('ag-grid/main');\r\n\r\nexport class RankingInfoTable implements IRelevanceInspectorTab {\r\n  public gridOptions: agGridModule.GridOptions;\r\n  constructor(public results: IQueryResult[], public bindings: IComponentBindings) {}\r\n\r\n  public async build(): Promise<Dom> {\r\n    const container = $$('div');\r\n\r\n    const agGridElement = $$('div', {\r\n      className: 'ag-theme-fresh'\r\n    });\r\n    container.append(agGridElement.el);\r\n\r\n    let topLevelInfoThatHaveAtLeastANonZeroValue: string[] = [];\r\n    let containsKeywordRankingInfo = false;\r\n\r\n    this.results.forEach(result => {\r\n      const rankingInfo = parseRankingInfo(result.rankingInfo);\r\n      containsKeywordRankingInfo = rankingInfo.termsWeight != null;\r\n      if (rankingInfo && rankingInfo.documentWeights) {\r\n        each(rankingInfo.documentWeights, (value: number, key: string) => {\r\n          if (value != 0) {\r\n            topLevelInfoThatHaveAtLeastANonZeroValue.push(key);\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    topLevelInfoThatHaveAtLeastANonZeroValue = uniq(topLevelInfoThatHaveAtLeastANonZeroValue);\r\n\r\n    const data = this.results.map(result => {\r\n      const rankingInfo = parseRankingInfo(result.rankingInfo);\r\n\r\n      if (rankingInfo) {\r\n        const documentsWeights = this.buildTopLevelDocumentsWeights(rankingInfo, topLevelInfoThatHaveAtLeastANonZeroValue);\r\n        const breakdownPerTerm: Record<string, ITableDataSource> = {};\r\n\r\n        const onlyTopFewKeywords: Record<string, IWeightsPerTerm> = {};\r\n\r\n        chain(rankingInfo.termsWeight)\r\n          .keys()\r\n          .sortBy(key => {\r\n            const total = reduce(rankingInfo.termsWeight[key].Weights, (memo, value) => memo + value, 0);\r\n            return total;\r\n          })\r\n          .reverse()\r\n          .first(3)\r\n          .each(key => {\r\n            onlyTopFewKeywords[key] = rankingInfo.termsWeight[key];\r\n          });\r\n\r\n        each(onlyTopFewKeywords, (value, key) => {\r\n          const builtKey = `Keyword: ${key}`;\r\n          breakdownPerTerm[builtKey] = {\r\n            content: buildListOfTermsElement(value.Weights).el.outerHTML,\r\n            cellRenderer: GenericHtmlRenderer,\r\n            width: 200\r\n          };\r\n        });\r\n\r\n        const totalContent = rankingInfo.totalWeight ? rankingInfo.totalWeight : 0;\r\n        return {\r\n          ...TableBuilder.thumbnailCell(result, this.bindings as IResultsComponentBindings),\r\n          ...documentsWeights,\r\n          ...breakdownPerTerm,\r\n          ...{ Total: { content: totalContent || 0 } }\r\n        };\r\n      }\r\n      return {};\r\n    });\r\n\r\n    const { gridOptions } = await new TableBuilder().build(data, agGridElement, {\r\n      getRowHeight: () => {\r\n        return containsKeywordRankingInfo ? 400 : 250;\r\n      },\r\n      onGridReady: params => {\r\n        setTimeout(() => {\r\n          if (params) {\r\n            params.api.sizeColumnsToFit();\r\n            params.api.setSortModel([{ colId: 'Total', sort: 'desc' }]);\r\n          }\r\n        }, 0);\r\n      }\r\n    });\r\n\r\n    this.gridOptions = gridOptions;\r\n\r\n    return container;\r\n  }\r\n\r\n  private buildTopLevelDocumentsWeights(rankingInfo: IRankingInfo, hasAtLeastOneNonZeroValue: string[]): Record<string, ITableDataSource> {\r\n    const documentWeights: Record<string, ITableDataSource> = {};\r\n    each(rankingInfo.documentWeights || {}, (value, key) => {\r\n      if (contains(hasAtLeastOneNonZeroValue, key)) documentWeights[key] = { content: value || 0 };\r\n    });\r\n    return documentWeights;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/RankingInfoTable.ts","import { $$ } from '../../utils/Dom';\r\n\r\nlet isAgGridLoaded = false;\r\nlet isAgGridLoading: Promise<boolean> | null = null;\r\nconst agGridLibUrl = 'https://cdnjs.cloudflare.com/ajax/libs/ag-grid/16.0.1/ag-grid.min.noStyle.js';\r\nconst agGridStyleBaseUrl = 'https://cdnjs.cloudflare.com/ajax/libs/ag-grid/16.0.1/styles/ag-grid.css';\r\nconst agGridStyleFreshUrl = 'https://cdnjs.cloudflare.com/ajax/libs/ag-grid/16.0.1/styles/ag-theme-fresh.css';\r\n\r\ndeclare const agGrid: any;\r\n\r\n// Should only be used for UT\r\nexport const reset = (doc = document) => {\r\n  isAgGridLoaded = false;\r\n  isAgGridLoading = null;\r\n};\r\n\r\nexport const loadAgGridLibrary = (doc = document) => {\r\n  return new Promise((resolve, reject) => {\r\n    if (isAgGridLoaded) {\r\n      resolve(true);\r\n    } else if (typeof agGrid !== 'undefined') {\r\n      isAgGridLoaded = true;\r\n      resolve(true);\r\n    } else {\r\n      addAgGridScriptsToDocument(doc);\r\n      isAgGridLoading.then(() => resolve(true));\r\n      isAgGridLoading.catch(() => reject(false));\r\n    }\r\n  });\r\n};\r\n\r\nconst addAgGridScriptsToDocument = (doc = document) => {\r\n  if (!isAgGridLoading) {\r\n    const script = $$('script', {\r\n      src: agGridLibUrl,\r\n      type: 'text/javascript',\r\n      async: true\r\n    }).el as HTMLScriptElement;\r\n\r\n    const styleBase = $$('link', {\r\n      href: agGridStyleBaseUrl,\r\n      rel: 'stylesheet',\r\n      type: 'text/css'\r\n    }).el as HTMLLinkElement;\r\n\r\n    const style = $$('link', {\r\n      href: agGridStyleFreshUrl,\r\n      rel: 'stylesheet',\r\n      type: 'text/css'\r\n    }).el as HTMLLinkElement;\r\n\r\n    doc.head.appendChild(script);\r\n    doc.head.appendChild(styleBase);\r\n    doc.head.appendChild(style);\r\n\r\n    isAgGridLoading = new Promise((resolveScriptLoaded, rejectScriptLoaded) => {\r\n      script.onload = () => {\r\n        resolveScriptLoaded(true);\r\n      };\r\n      script.onerror = () => {\r\n        isAgGridLoaded = false;\r\n        rejectScriptLoaded(false);\r\n      };\r\n    });\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/AgGrid.ts","import { TableBuilder, ITableDataSource } from './TableBuilder';\r\nimport { map, each, find } from 'underscore';\r\nimport agGridModule = require('ag-grid/main');\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { $$, Dom } from '../../utils/Dom';\r\nimport { StringUtils } from '../../utils/StringUtils';\r\nimport { DateUtils } from '../../utils/DateUtils';\r\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\r\nimport { IRelevanceInspectorTab } from './RelevanceInspector';\r\nimport { TextInput } from '../FormWidgets/TextInput';\r\nimport { IFieldDescription } from '../../rest/FieldDescription';\r\n\r\nexport class MetaDataTable implements IRelevanceInspectorTab {\r\n  public gridOptions: agGridModule.GridOptions;\r\n\r\n  constructor(public results: IQueryResult[], public bindings: IComponentBindings) {}\r\n\r\n  public async build(): Promise<Dom> {\r\n    if (!this.bindings.queryController) {\r\n      return;\r\n    }\r\n\r\n    const fieldsDescription = await this.bindings.queryController.getEndpoint().listFields();\r\n\r\n    const container = $$('div', {\r\n      className: 'metadata-table'\r\n    });\r\n\r\n    const builders = this.results.map(async result => {\r\n      const nestedContainer = $$('div');\r\n      container.append(nestedContainer.el);\r\n\r\n      const nestedAgGrid = $$('div', {\r\n        className: 'ag-theme-fresh'\r\n      });\r\n\r\n      nestedContainer.append(nestedAgGrid.el);\r\n\r\n      const thumbnail = TableBuilder.thumbnailCell(result, this.bindings as IResultsComponentBindings);\r\n      const fields: Record<string, ITableDataSource> = {};\r\n\r\n      fields[`Fields Values`] = {\r\n        content: { result, fieldsDescription },\r\n        cellRenderer: FieldValuesRenderer,\r\n        width: 900,\r\n        getQuickFilterText: (params: agGridModule.GetQuickFilterTextParams) => {\r\n          const allValues = map(params.value.result.raw, val => val.toString());\r\n          return Object.keys(params.value.result.raw)\r\n            .concat(allValues)\r\n            .join(' ');\r\n        },\r\n        onCellDoubleClicked: (params: agGridModule.CellDoubleClickedEvent) => {\r\n          const el = params.event ? (params.event.target as Node) : null;\r\n          if (el && window.getSelection && document.createRange) {\r\n            const selection = window.getSelection();\r\n            const range = document.createRange();\r\n            range.selectNodeContents(el);\r\n            selection.removeAllRanges();\r\n            selection.addRange(range);\r\n          }\r\n        }\r\n      };\r\n\r\n      return await new TableBuilder().build(\r\n        [\r\n          {\r\n            ...thumbnail,\r\n            ...fields\r\n          }\r\n        ],\r\n        nestedAgGrid,\r\n        {\r\n          rowHeight: 400\r\n        }\r\n      );\r\n    });\r\n\r\n    this.gridOptions = {\r\n      api: {\r\n        sizeColumnsToFit: () => {\r\n          builtTables.forEach(built => (built.gridOptions.api ? built.gridOptions.api.sizeColumnsToFit : null));\r\n        }\r\n      }\r\n    } as any;\r\n\r\n    const builtTables = await Promise.all(builders);\r\n    const textInput = new TextInput(input => {\r\n      builtTables.forEach(built => {\r\n        const api = built.gridOptions && built.gridOptions.api;\r\n        if (api) {\r\n          api.setQuickFilter(input.getValue());\r\n          api.onRowHeightChanged();\r\n        }\r\n      });\r\n    }, 'Filters on Fields Values');\r\n    container.prepend(textInput.getElement());\r\n\r\n    return container;\r\n  }\r\n}\r\n\r\nexport class FieldValuesRenderer implements agGridModule.ICellRendererComp {\r\n  private element: any | undefined;\r\n  private currentFilter: string | undefined;\r\n  private params: any;\r\n\r\n  public init(params: any) {\r\n    this.element = params.value;\r\n    this.params = params;\r\n    this.currentFilter = params.api.filterManager.quickFilter;\r\n    params.value.el = this.listAsInput(this.element.result);\r\n  }\r\n\r\n  public getGui(): HTMLElement {\r\n    if (this.element) {\r\n      const list = this.listAsInput(this.element.result);\r\n      this.params.eParentOfValue.appendChild(list.el);\r\n      const height = Math.max(list.height() + 50, 200);\r\n      const maxHeight = Math.min(height, 5000);\r\n      this.params.node.setRowHeight(maxHeight);\r\n      return $$('div', undefined, list).el;\r\n    }\r\n    return $$('div', undefined, 'N.A').el;\r\n  }\r\n\r\n  private listAsInput(result: IQueryResult) {\r\n    const container = $$('div');\r\n\r\n    each(result.raw, (value: string, fieldInResult: string) => {\r\n      if (fieldInResult == 'allmetadatavalues' || fieldInResult.indexOf('sys') == 0) {\r\n        return;\r\n      }\r\n\r\n      if (this.isCurrentElementFilteredOut(value, fieldInResult)) {\r\n        return;\r\n      }\r\n\r\n      const inputGroup = $$('div', { className: 'coveo-relevance-inspector-input-group' });\r\n      const fieldName = $$(\r\n        'div',\r\n        {\r\n          className: 'coveo-relevance-inspector-metadata-name'\r\n        },\r\n        fieldInResult\r\n      );\r\n\r\n      const fieldValue = this.convertFieldValueToReadableFormat(result, fieldInResult);\r\n\r\n      const fieldValueElement = $$(\r\n        'div',\r\n        {\r\n          className: 'coveo-relevance-inspector-metadata-value'\r\n        },\r\n        fieldValue\r\n      );\r\n\r\n      if (this.currentFilter) {\r\n        this.highlightSearch(fieldName.el, this.currentFilter);\r\n        this.highlightSearch(fieldValueElement.el, this.currentFilter);\r\n      }\r\n\r\n      inputGroup.append(fieldName.el);\r\n      inputGroup.append(fieldValueElement.el);\r\n      container.append(inputGroup.el);\r\n    });\r\n\r\n    return container;\r\n  }\r\n\r\n  private isCurrentElementFilteredOut(value: string, fieldInResult: string) {\r\n    if (this.currentFilter) {\r\n      const matchInFieldName = fieldInResult.toLowerCase().indexOf(this.currentFilter.toLowerCase()) != -1;\r\n      const matchInFieldValue = value\r\n        ? value\r\n            .toString()\r\n            .toLowerCase()\r\n            .indexOf(this.currentFilter.toLowerCase()) != -1\r\n        : false;\r\n\r\n      if (!matchInFieldName && !matchInFieldValue) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  private convertFieldValueToReadableFormat(result: IQueryResult, fieldInResult: string) {\r\n    let fieldValue = result.raw[fieldInResult].toString();\r\n    if (this.element.fieldsDescription) {\r\n      const matchingFieldDescription = find(this.element.fieldsDescription as IFieldDescription[], description => {\r\n        return description.name.replace('@', '').toLowerCase() == fieldInResult;\r\n      });\r\n      if (matchingFieldDescription && matchingFieldDescription.fieldType == 'Date') {\r\n        fieldValue = `${DateUtils.convertToStandardDate(fieldValue).toString()} ( Epoch : ${fieldValue} )`;\r\n      }\r\n    }\r\n    return fieldValue;\r\n  }\r\n\r\n  private highlightSearch(elementToSearch: HTMLElement, search: string) {\r\n    let asHTMLElement: HTMLElement = elementToSearch;\r\n\r\n    if (asHTMLElement != null && asHTMLElement.innerText != null) {\r\n      const match = asHTMLElement.innerText.split(new RegExp('(?=' + StringUtils.regexEncode(search) + ')', 'gi'));\r\n      asHTMLElement.innerHTML = '';\r\n      match.forEach(value => {\r\n        const regex = new RegExp('(' + StringUtils.regexEncode(search) + ')', 'i');\r\n        const group = value.match(regex);\r\n        let span;\r\n\r\n        if (group != null) {\r\n          span = $$('span', {\r\n            className: 'coveo-relevance-inspector-highlight'\r\n          });\r\n          span.text(group[1]);\r\n          asHTMLElement.appendChild(span.el);\r\n          span = $$('span');\r\n          span.text(value.substr(group[1].length));\r\n          asHTMLElement.appendChild(span.el);\r\n        } else {\r\n          span = $$('span');\r\n          span.text(value);\r\n          asHTMLElement.appendChild(span.el);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public refresh(params: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/MetaDataTable.ts","import { $$, Dom } from '../../utils/Dom';\r\nimport { find } from 'underscore';\r\n\r\nexport class RelevanceInspectorTabs {\r\n  public navigationSection: Dom;\r\n  public tabContentSection: Dom;\r\n  private navigationElements: Dom[];\r\n  private tabContentElements: Dom[];\r\n\r\n  constructor(public onTabChange: (id: string) => void) {\r\n    this.navigationSection = $$('div', {\r\n      className: 'coveo-relevance-inspector-tab-navigation-section'\r\n    });\r\n\r\n    this.tabContentSection = $$('div', {\r\n      className: 'coveo-relevance-inspector-tab-content-section'\r\n    });\r\n\r\n    this.navigationElements = [];\r\n    this.tabContentElements = [];\r\n  }\r\n\r\n  public select(id: string) {\r\n    const navElementToActivate = this.findNavigationById(id);\r\n    const tabContentToActivate = this.findTabContentById(id);\r\n\r\n    if (navElementToActivate && tabContentToActivate) {\r\n      this.activateTabNavigation(navElementToActivate);\r\n      this.activateTabContent(tabContentToActivate);\r\n      if (this.onTabChange) {\r\n        this.onTabChange(id);\r\n      }\r\n    }\r\n  }\r\n\r\n  public addNavigation(caption: string, id: string) {\r\n    const navigationElement = $$(\r\n      'div',\r\n      {\r\n        id,\r\n        className: 'coveo-relevance-inspector-tab'\r\n      },\r\n      caption\r\n    );\r\n\r\n    navigationElement.on('click', () => this.select(id));\r\n\r\n    this.navigationElements.push(navigationElement);\r\n    this.navigationSection.append(navigationElement.el);\r\n\r\n    return this;\r\n  }\r\n\r\n  public addContent(content: Dom, targetId: string) {\r\n    const tabContent = $$('div', {\r\n      className: 'coveo-relevance-inspector-tab-content',\r\n      'data-target-tab': targetId\r\n    });\r\n    tabContent.append(content.el);\r\n\r\n    this.tabContentElements.push(tabContent);\r\n    this.tabContentSection.append(tabContent.el);\r\n\r\n    return this;\r\n  }\r\n\r\n  public addSection(caption: string, content: Dom, id: string) {\r\n    return this.addNavigation(caption, id).addContent(content, id);\r\n  }\r\n\r\n  private findNavigationById(id: string) {\r\n    return find(this.navigationElements, element => element.getAttribute('id') == id);\r\n  }\r\n\r\n  private findTabContentById(id: string) {\r\n    return find(this.tabContentElements, tabContentElement => tabContentElement.getAttribute('data-target-tab') == id);\r\n  }\r\n\r\n  private activateTabNavigation(navigationElement: Dom) {\r\n    this.navigationElements.forEach(element => {\r\n      element.removeClass('coveo-selected');\r\n    });\r\n    navigationElement.addClass('coveo-selected');\r\n  }\r\n\r\n  private activateTabContent(contentElement: Dom) {\r\n    this.tabContentElements.forEach(element => {\r\n      element.removeClass('coveo-selected');\r\n    });\r\n    contentElement.addClass('coveo-selected');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/RelevanceInspectorTabs.ts","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js??ref--0-2!../node_modules/resolve-url-loader/index.js??ref--0-3!../node_modules/sass-loader/lib/loader.js??ref--0-4!./_RelevanceInspector.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js??ref--0-2!../node_modules/resolve-url-loader/index.js??ref--0-3!../node_modules/sass-loader/lib/loader.js??ref--0-4!./_RelevanceInspector.scss\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js??ref--0-2!../node_modules/resolve-url-loader/index.js??ref--0-3!../node_modules/sass-loader/lib/loader.js??ref--0-4!./_RelevanceInspector.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_RelevanceInspector.scss\n// module id = 813\n// module chunks = 0","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\r\\n* @param direction vertical or horizontal\\r\\n* @param position type of positioning to apply (relative/absolute)\\r\\n*/\\n\\n/*\\r\\n* @param $selector css selector on which to apply the icon. Can be '&' if the icon should be applied on the current element;\\r\\n* @param $size size of the icon to use\\r\\n*/\\n\\n@-webkit-keyframes fadeout {\\n  from {\\n    opacity: 1;\\n  }\\n\\n  to {\\n    opacity: 0;\\n  }\\n}\\n\\n@-moz-keyframes fadeout {\\n  from {\\n    opacity: 1;\\n  }\\n\\n  to {\\n    opacity: 0;\\n  }\\n}\\n\\n@-o-keyframes fadeout {\\n  from {\\n    opacity: 1;\\n  }\\n\\n  to {\\n    opacity: 0;\\n  }\\n}\\n\\n@keyframes fadeout {\\n  from {\\n    opacity: 1;\\n  }\\n\\n  to {\\n    opacity: 0;\\n  }\\n}\\n\\n@-webkit-keyframes fadein {\\n  from {\\n    opacity: 0;\\n  }\\n\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n@-moz-keyframes fadein {\\n  from {\\n    opacity: 0;\\n  }\\n\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n@-o-keyframes fadein {\\n  from {\\n    opacity: 0;\\n  }\\n\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes fadein {\\n  from {\\n    opacity: 0;\\n  }\\n\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes slideInLeft {\\n  0% {\\n    -webkit-transform: translateX(-2000px);\\n    -moz-transform: translateX(-2000px);\\n    -ms-transform: translateX(-2000px);\\n    -o-transform: translateX(-2000px);\\n    transform: translateX(-2000px);\\n    opacity: 0;\\n  }\\n\\n  100% {\\n    -webkit-transform: translateX(0);\\n    -moz-transform: translateX(0);\\n    -ms-transform: translateX(0);\\n    -o-transform: translateX(0);\\n    transform: translateX(0);\\n    opacity: 1;\\n  }\\n}\\n\\n@-webkit-keyframes coveo-spin {\\n  from {\\n    -webkit-transform: rotate(0deg);\\n    -moz-transform: rotate(0deg);\\n    -ms-transform: rotate(0deg);\\n    -o-transform: rotate(0deg);\\n    transform: rotate(0deg);\\n  }\\n\\n  to {\\n    -webkit-transform: rotate(360deg);\\n    -moz-transform: rotate(360deg);\\n    -ms-transform: rotate(360deg);\\n    -o-transform: rotate(360deg);\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n@-moz-keyframes coveo-spin {\\n  from {\\n    -webkit-transform: rotate(0deg);\\n    -moz-transform: rotate(0deg);\\n    -ms-transform: rotate(0deg);\\n    -o-transform: rotate(0deg);\\n    transform: rotate(0deg);\\n  }\\n\\n  to {\\n    -webkit-transform: rotate(360deg);\\n    -moz-transform: rotate(360deg);\\n    -ms-transform: rotate(360deg);\\n    -o-transform: rotate(360deg);\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n@-o-keyframes coveo-spin {\\n  from {\\n    -webkit-transform: rotate(0deg);\\n    -moz-transform: rotate(0deg);\\n    -ms-transform: rotate(0deg);\\n    -o-transform: rotate(0deg);\\n    transform: rotate(0deg);\\n  }\\n\\n  to {\\n    -webkit-transform: rotate(360deg);\\n    -moz-transform: rotate(360deg);\\n    -ms-transform: rotate(360deg);\\n    -o-transform: rotate(360deg);\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n@keyframes coveo-spin {\\n  from {\\n    -webkit-transform: rotate(0deg);\\n    -moz-transform: rotate(0deg);\\n    -ms-transform: rotate(0deg);\\n    -o-transform: rotate(0deg);\\n    transform: rotate(0deg);\\n  }\\n\\n  to {\\n    -webkit-transform: rotate(360deg);\\n    -moz-transform: rotate(360deg);\\n    -ms-transform: rotate(360deg);\\n    -o-transform: rotate(360deg);\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n@-webkit-keyframes loadingFade {\\n  0% {\\n    opacity: 0;\\n  }\\n\\n  50% {\\n    opacity: 0.8;\\n  }\\n\\n  100% {\\n    opacity: 0;\\n  }\\n}\\n\\n@-moz-keyframes loadingFade {\\n  0% {\\n    opacity: 0;\\n  }\\n\\n  50% {\\n    opacity: 0.8;\\n  }\\n\\n  100% {\\n    opacity: 0;\\n  }\\n}\\n\\n@-o-keyframes loadingFade {\\n  0% {\\n    opacity: 0;\\n  }\\n\\n  50% {\\n    opacity: 0.8;\\n  }\\n\\n  100% {\\n    opacity: 0;\\n  }\\n}\\n\\n@keyframes loadingFade {\\n  0% {\\n    opacity: 0;\\n  }\\n\\n  50% {\\n    opacity: 0.8;\\n  }\\n\\n  100% {\\n    opacity: 0;\\n  }\\n}\\n\\n.coveo-relevance-inspector {\\n  text-align: center;\\n  padding: 10px;\\n  line-height: 20px;\\n  height: 40px;\\n  top: 0;\\n  z-index: 1000;\\n}\\n\\n.coveo-relevance-inspector.coveo-hidden {\\n  display: none;\\n}\\n\\n.relevance-inspector-modal .coveo-logo {\\n  height: 64px;\\n  width: 178px;\\n}\\n\\n.ag-theme-fresh .ag-cell {\\n  overflow: auto;\\n  white-space: normal;\\n  word-break: break-word;\\n}\\n\\n.ag-theme-fresh .ag-font-style {\\n  user-select: auto;\\n}\\n\\n.coveo-relevance-inspector-tab-navigation-section {\\n  margin-bottom: 20px;\\n}\\n\\n.coveo-relevance-inspector-tab-content {\\n  display: none;\\n}\\n\\n.coveo-relevance-inspector-tab-content.coveo-selected {\\n  display: block;\\n  -webkit-animation: slideInLeft 0.3s ease-in;\\n  -moz-animation: slideInLeft 0.3s ease-in;\\n  animation: slideInLeft 0.3s ease-in;\\n}\\n\\n.coveo-relevance-inspector-tab {\\n  display: -webkit-box;\\n  display: -moz-box;\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: center;\\n  -moz-box-align: center;\\n  box-align: center;\\n  -webkit-align-items: center;\\n  -moz-align-items: center;\\n  -ms-align-items: center;\\n  -o-align-items: center;\\n  align-items: center;\\n  -ms-flex-align: center;\\n  font-size: 12px;\\n  font-weight: bold;\\n  padding: 0 5px 10px;\\n  border-bottom: 1px solid #bcc3ca;\\n  text-transform: uppercase;\\n  border-bottom: 2px solid #bcc3ca;\\n  display: inline-block;\\n  margin-right: 10px;\\n}\\n\\n.coveo-relevance-inspector-tab.coveo-selected,\\n.coveo-relevance-inspector-tab.coveo-selected:hover {\\n  border-bottom: 2px solid #263e55;\\n}\\n\\n.coveo-relevance-inspector-tab:hover {\\n  color: #263e55;\\n}\\n\\n.coveo-relevance-inspector-highlight {\\n  display: inline-block;\\n  font-weight: bold;\\n}\\n\\n.coveo-relevance-inspector-result-thumbnail {\\n  min-width: 500px;\\n  white-space: normal;\\n}\\n\\n.coveo-relevance-inspector-dt {\\n  font-weight: bold;\\n}\\n\\n.coveo-relevance-inspector-dt,\\n.coveo-relevance-inspector-dd {\\n  font-size: 14px;\\n  line-height: 14px;\\n  padding: 2px 0 4px;\\n}\\n\\n.coveo-relevance-inspector-metadata-name,\\n.coveo-relevance-inspector-metadata-value {\\n  background-color: #e9ecef;\\n  display: block;\\n  padding: 10px;\\n  line-height: 1.5;\\n  border: 1px solid #ced4da;\\n  border-radius: 2px;\\n  position: relative;\\n  flex: 1 1 auto;\\n  margin-bottom: 0;\\n}\\n\\n.coveo-relevance-inspector-metadata-name {\\n  max-width: 25%;\\n  min-width: 25%;\\n}\\n\\n.coveo-relevance-inspector-metadata-value {\\n  width: 75%;\\n  overflow: auto;\\n}\\n\\n.coveo-relevance-inspector-input-group {\\n  position: relative;\\n  display: flex;\\n  flex-wrap: wrap;\\n  align-items: stretch;\\n  width: 100%;\\n}\\n\\n.coveo-relevance-inspector-tab-content .coveo-input {\\n  margin: 40px 0 10px;\\n}\\n\\n.coveo-relevance-inspector-available-fields-popup {\\n  background: white;\\n  border: 1px solid #bcc3ca;\\n  border-radius: 2px;\\n  padding: 10px 5px 10px 20px;\\n  width: 200px;\\n  overflow: hidden;\\n  list-style-type: none;\\n}\\n\\n.coveo-relevance-inspector-available-fields-popup-value {\\n  padding: 0 0 10px;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  overflow: hidden;\\n}\\n\\n.coveo-available-fields-table-button {\\n  overflow: hidden;\\n  display: inline-block;\\n  position: relative;\\n  top: 50%;\\n  -webkit-transform: translateY(-50%);\\n  -moz-transform: translateY(-50%);\\n  -ms-transform: translateY(-50%);\\n  -o-transform: translateY(-50%);\\n  transform: translateY(-50%);\\n}\\n\\n.coveo-relevance-inspector-effective-query-collapsible {\\n  display: none;\\n}\\n\\n.coveo-relevance-inspector-effective-query-collapsible.coveo-active {\\n  display: inherit;\\n}\\n\\n.coveo-relevance-inspector-table {\\n  width: 100%;\\n  text-align: left;\\n  border: none;\\n  border-spacing: 0;\\n}\\n\\n.coveo-relevance-inspector-table tr {\\n  height: 37px;\\n  font-size: 15px;\\n  line-height: 18px;\\n}\\n\\n.coveo-relevance-inspector-table tr:first-child {\\n  padding-left: 10px;\\n}\\n\\n.coveo-relevance-inspector-table tr:hover td {\\n  background-color: #e6ecf0;\\n}\\n\\n.coveo-relevance-inspector-table td {\\n  position: relative;\\n  text-align: left;\\n  vertical-align: middle;\\n  padding: 9px 15px;\\n  margin-left: 15px;\\n  text-align: left;\\n  border-bottom: 1px solid #bcc3ca;\\n}\\n\\n.coveo-relevance-inspector-table td:first-child {\\n  border-left: 5px solid transparent;\\n}\\n\\n.coveo-relevance-inspector-inline-ranking {\\n  border: 1px solid #bcc3ca;\\n  border-radius: 2px;\\n  display: -webkit-box;\\n  display: -moz-box;\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-lines: multiple;\\n  -moz-box-lines: multiple;\\n  box-lines: multiple;\\n  -webkit-flex-wrap: wrap;\\n  -moz-flex-wrap: wrap;\\n  -ms-flex-wrap: wrap;\\n  flex-wrap: wrap;\\n  padding: 10px;\\n  margin-bottom: 10px;\\n}\\n\\n.coveo-relevance-inspector-inline-ranking-section {\\n  margin: 10px;\\n}\\n\\n.coveo-relevance-inspector-inline-ranking-terms {\\n  display: none;\\n  padding: 10px;\\n  width: 100%;\\n}\\n\\n.coveo-relevance-inspector-inline-ranking-terms.coveo-active {\\n  display: block;\\n  -webkit-animation: fadein 0.5s;\\n  -moz-animation: fadein 0.5s;\\n  animation: fadein 0.5s;\\n}\\n\\n.coveo-relevance-inspector-inline-ranking-terms h2 {\\n  border-bottom: 1px solid #bcc3ca;\\n}\\n\\n.coveo-relevance-inspector-inline-ranking-terms dl {\\n  display: -webkit-box;\\n  display: -moz-box;\\n  display: -webkit-flex;\\n  display: -moz-flex;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-lines: multiple;\\n  -moz-box-lines: multiple;\\n  box-lines: multiple;\\n  -webkit-flex-wrap: wrap;\\n  -moz-flex-wrap: wrap;\\n  -ms-flex-wrap: wrap;\\n  flex-wrap: wrap;\\n  -webkit-box-align: center;\\n  -moz-box-align: center;\\n  box-align: center;\\n  -webkit-align-items: center;\\n  -moz-align-items: center;\\n  -ms-align-items: center;\\n  -o-align-items: center;\\n  align-items: center;\\n  -ms-flex-align: center;\\n}\\n\\n.coveo-relevance-inspector-inline-ranking-terms dt {\\n  margin: 10px 20px;\\n}\\n\\n.coveo-relevance-inspector-inline-ranking-terms dd {\\n  margin-left: 0;\\n}\\n\\n.coveo-relevance-inspector-inline-ranking-button {\\n  height: 35px;\\n  margin: 5px 0;\\n}\\n\\n.relevance-inspector-list-output {\\n  padding-left: 5px;\\n  margin-top: 0;\\n}\\n\\n.coveo-relevance-inspector-inline-ranking-qre-expression {\\n  font-weight: bold;\\n  word-break: break-all;\\n}\\n\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader??ref--0-2!./node_modules/resolve-url-loader??ref--0-3!./node_modules/sass-loader/lib/loader.js??ref--0-4!./sass/_RelevanceInspector.scss\n// module id = 814\n// module chunks = 0","import {\r\n  IExecutionReport,\r\n  EXECUTION_REPORT_SECTION,\r\n  IExecutionReportSection,\r\n  IExecutionReportSectionBuilder,\r\n  ExecutionReport\r\n} from './ExecutionReport';\r\nimport { TableBuilder } from './TableBuilder';\r\nimport { find, map } from 'underscore';\r\nimport { ExecutionReportGenericSection } from './ExecutionReportGenericSection';\r\nimport { GenericValueOutput, GenericValueOutputType } from './GenericValueOutput';\r\nimport agGridModule = require('ag-grid/main');\r\nimport { Dom } from '../../utils/Dom';\r\n\r\nexport interface IUserIDExecutionReport {\r\n  name: string;\r\n  kind: string;\r\n  provider: string;\r\n  info: Record<string, string>;\r\n}\r\n\r\nexport interface IExecutionReportAuthenticationSection extends IExecutionReportSection {\r\n  name: 'PerformAuthentication';\r\n  configured: {\r\n    primary: string;\r\n    secondary: string[];\r\n    mandatory: string[];\r\n  };\r\n  result: {\r\n    userIds: IUserIDExecutionReport[];\r\n    queryRestrictions: Record<string, string>;\r\n    roles: string[];\r\n    userGroups: string[];\r\n  };\r\n}\r\n\r\nexport class ExecutionReportAuthenticationSection implements IExecutionReportSectionBuilder {\r\n  public async build(executionReport: IExecutionReport): Promise<{ container: Dom; gridOptions: agGridModule.GridOptions }> {\r\n    const { container, agGridElement } = ExecutionReport.standardSectionHeader('Authentication');\r\n    let gridOptions: agGridModule.GridOptions;\r\n    const authenticationSection = find(executionReport.children, child => child.name == EXECUTION_REPORT_SECTION.PERFORM_AUTHENTICATION) as\r\n      | IExecutionReportAuthenticationSection\r\n      | undefined;\r\n\r\n    if (authenticationSection) {\r\n      const dataSource = [\r\n        {\r\n          ...new ExecutionReportGenericSection().build(authenticationSection),\r\n          ...this.configurationSection(authenticationSection),\r\n          ...this.pipelineOuputSection(authenticationSection)\r\n        }\r\n      ];\r\n\r\n      const tableBuilder = await new TableBuilder().build(dataSource, agGridElement, {\r\n        rowHeight: 150\r\n      });\r\n      gridOptions = tableBuilder.gridOptions;\r\n    }\r\n\r\n    return { container, gridOptions };\r\n  }\r\n\r\n  private configurationSection(authenticationSection: IExecutionReportAuthenticationSection) {\r\n    return {\r\n      Configured: {\r\n        children: [\r\n          {\r\n            Primary: this.genericOutput(authenticationSection.configured.primary),\r\n            Secondary: this.genericOutput(authenticationSection.configured.secondary),\r\n            Mandatory: this.genericOutput(authenticationSection.configured.mandatory)\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  private pipelineOuputSection(authenticationSection: IExecutionReportAuthenticationSection) {\r\n    return {\r\n      'Pipeline Output': {\r\n        children: [\r\n          {\r\n            'User ids': {\r\n              children: this.usersIds(authenticationSection.result.userIds)\r\n            },\r\n            'Query restriction': {\r\n              children: this.queryRestrictions(authenticationSection.result.queryRestrictions)\r\n            },\r\n            Roles: { ...this.genericOutput(authenticationSection.result.roles), width: 200 },\r\n            'User groups': this.genericOutput(authenticationSection.result.userGroups)\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  private usersIds(userIds: IUserIDExecutionReport[]) {\r\n    return map(userIds, userId => {\r\n      return {\r\n        [userId.name]: {\r\n          children: [\r\n            {\r\n              Kind: this.genericOutput(userId.kind),\r\n              Provider: { ...this.genericOutput(userId.provider), width: 150 },\r\n              Info: { content: userId.info }\r\n            }\r\n          ]\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  private genericOutput(section: GenericValueOutputType) {\r\n    return new GenericValueOutput().output(section);\r\n  }\r\n\r\n  private queryRestrictions(queryRestrictions: Record<string, string>) {\r\n    return map(queryRestrictions, (value, key) => {\r\n      return {\r\n        [key]: this.genericOutput(value)\r\n      };\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/ExecutionReportAuthenticationSection.ts","import {\r\n  IExecutionReportSection,\r\n  IExecutionReport,\r\n  EXECUTION_REPORT_SECTION,\r\n  IExecutionReportSectionBuilder,\r\n  ExecutionReport\r\n} from './ExecutionReport';\r\nimport { find } from 'underscore';\r\nimport { ExecutionReportGenericSection } from './ExecutionReportGenericSection';\r\nimport { TableBuilder } from './TableBuilder';\r\nimport { GenericValueOutput } from './GenericValueOutput';\r\nimport agGridModule = require('ag-grid/main');\r\nimport { Dom } from '../../utils/Dom';\r\n\r\nexport interface IExecutionReportResolvePipelineSection extends IExecutionReportSection {\r\n  result: {\r\n    pipeline: string;\r\n    splitTest: {\r\n      name: string;\r\n      ratio: number;\r\n    };\r\n  };\r\n}\r\n\r\nexport class ExecutionReportResolvedPipelineSection implements IExecutionReportSectionBuilder {\r\n  public async build(executionReport: IExecutionReport): Promise<{ container: Dom; gridOptions: agGridModule.GridOptions }> {\r\n    const { container, agGridElement } = ExecutionReport.standardSectionHeader('Pipeline');\r\n    let gridOptions: agGridModule.GridOptions;\r\n\r\n    const resolvedPipelineSection = find(executionReport.children, child => child.name == EXECUTION_REPORT_SECTION.RESOLVE_PIPELINE) as\r\n      | IExecutionReportResolvePipelineSection\r\n      | undefined;\r\n\r\n    if (resolvedPipelineSection) {\r\n      const dataSource = [\r\n        {\r\n          ...new ExecutionReportGenericSection().build(resolvedPipelineSection),\r\n          ...{ Pipeline: new GenericValueOutput().output(resolvedPipelineSection.result.pipeline) },\r\n          ...{ 'Split Test': new GenericValueOutput().output(resolvedPipelineSection.result.splitTest) }\r\n        }\r\n      ];\r\n\r\n      const tableBuilder = await new TableBuilder().build(dataSource, agGridElement);\r\n      gridOptions = tableBuilder.gridOptions;\r\n    }\r\n\r\n    return { container, gridOptions };\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/ExecutionReportResolvedPipelineSection.ts","import {\r\n  IExecutionReportSection,\r\n  IExecutionReportSectionBuilder,\r\n  IExecutionReport,\r\n  EXECUTION_REPORT_SECTION,\r\n  ExecutionReport\r\n} from './ExecutionReport';\r\nimport { find } from 'underscore';\r\nimport { ExecutionReportGenericSection } from './ExecutionReportGenericSection';\r\nimport { TableBuilder } from './TableBuilder';\r\nimport { GenericValueOutput } from './GenericValueOutput';\r\nimport agGridModule = require('ag-grid/main');\r\nimport { Dom } from '../../utils/Dom';\r\n\r\nexport interface IExecutionReportQueryOverrideSection extends IExecutionReportSection {\r\n  applied: string[];\r\n}\r\n\r\nexport class ExecutionReportQueryOverrideSection implements IExecutionReportSectionBuilder {\r\n  public async build(executionReport: IExecutionReport): Promise<{ container: Dom; gridOptions: agGridModule.GridOptions }> {\r\n    const { container, agGridElement } = ExecutionReport.standardSectionHeader('Query Params Override');\r\n    let gridOptions: agGridModule.GridOptions;\r\n\r\n    const queryOverrideSection = find(executionReport.children, child => child.name == EXECUTION_REPORT_SECTION.QUERY_PARAM_OVERRIDE) as\r\n      | IExecutionReportQueryOverrideSection\r\n      | undefined;\r\n\r\n    if (queryOverrideSection) {\r\n      const dataSource = [\r\n        {\r\n          ...new ExecutionReportGenericSection().build(queryOverrideSection),\r\n          Applied: new GenericValueOutput().output(queryOverrideSection.applied)\r\n        }\r\n      ];\r\n\r\n      const tableBuilder = await new TableBuilder().build(dataSource, agGridElement);\r\n      gridOptions = tableBuilder.gridOptions;\r\n    }\r\n\r\n    return { container, gridOptions };\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/ExecutionReportQueryOverrideSection.ts","import { IExecutionReport, IExecutionReportSectionBuilder, EXECUTION_REPORT_SECTION, ExecutionReport } from './ExecutionReport';\r\nimport { findWhere, each, contains } from 'underscore';\r\nimport { GenericValueOutput } from './GenericValueOutput';\r\nimport { $$, Dom } from '../../utils/Dom';\r\n\r\nexport interface IExecutionReportEffectiveIndexQuerySection {\r\n  result: {\r\n    in: Record<string, any>;\r\n  };\r\n}\r\n\r\nconst collapsibleSectionsInReport: string[] = ['Facets', 'RankingOverrides', 'RankingExpressions'];\r\n\r\nexport class ExecutionReportEffectiveIndexQuerySection implements IExecutionReportSectionBuilder {\r\n  public async build(executionReport: IExecutionReport): Promise<{ container: Dom }> {\r\n    const { container } = ExecutionReport.standardSectionHeader('Query sent to index');\r\n\r\n    const table = $$('table', {\r\n      className: 'coveo-relevance-inspector-table'\r\n    });\r\n\r\n    container.append(table.el);\r\n\r\n    const indexQuerySection = findWhere(executionReport.children, { description: EXECUTION_REPORT_SECTION.INDEX_QUERY });\r\n\r\n    if (indexQuerySection) {\r\n      each(indexQuerySection.result.in, (paramValue: string, paramKey: string) => {\r\n        const row = $$('tr');\r\n        table.append(row.el);\r\n\r\n        const id = `executionReportIndexExecution${paramKey}`;\r\n\r\n        if (contains(collapsibleSectionsInReport, paramKey) && paramValue) {\r\n          const btn = $$(\r\n            'button',\r\n            {\r\n              className: 'coveo-button'\r\n            },\r\n            paramKey\r\n          );\r\n\r\n          const tdTarget = $$(\r\n            'td',\r\n            {\r\n              id,\r\n              className: 'coveo-relevance-inspector-effective-query-collapsible'\r\n            },\r\n            new GenericValueOutput().output(paramValue).content\r\n          );\r\n\r\n          btn.on('click', () => {\r\n            tdTarget.toggleClass('coveo-active');\r\n          });\r\n\r\n          row.append($$('td', undefined, btn).el);\r\n          row.append(tdTarget.el);\r\n        } else {\r\n          row.append($$('td', undefined, paramKey).el);\r\n          row.append($$('td', undefined, new GenericValueOutput().output(paramValue).content).el);\r\n        }\r\n      });\r\n    }\r\n    return { container };\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/ExecutionReportEffectiveIndexQuerySection.ts","import { ExecutionReport } from './ExecutionReport';\r\nimport { TableBuilder, ITableDataSource } from './TableBuilder';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { IRankingExpression } from '../../rest/RankingExpression';\r\nimport { map, find } from 'underscore';\r\nimport { GenericValueOutput } from './GenericValueOutput';\r\nimport { Dom } from '../../utils/Dom';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport agGridModule = require('ag-grid/main');\r\nimport { QueryBuilder } from '../Base/QueryBuilder';\r\n\r\nexport class ExecutionReportRankingModifiers {\r\n  public async build(\r\n    results: IQueryResult[],\r\n    rankingExpressions: IRankingExpression[],\r\n    bindings: IComponentBindings\r\n  ): Promise<{ container: Dom; gridOptions: agGridModule.GridOptions }> {\r\n    const { container, agGridElement } = ExecutionReport.standardSectionHeader('Ranking Modifiers & Machine Learning Boosts');\r\n\r\n    const dataSourcePromises = map(rankingExpressions, async rankingExpression => {\r\n      const isAutomaticBoostRegex = /^(@permanentid|@urihash)=\"?([a-zA-Z0-9]+)\"?$/;\r\n\r\n      let thumbnailPreview: Record<string, ITableDataSource> = TableBuilder.thumbnailCell(null, null);\r\n      let returnedByIndexForCurrentQuery = '-- NULL --';\r\n      let result: IQueryResult = null;\r\n\r\n      const isAutomaticBoost = rankingExpression.expression.match(isAutomaticBoostRegex);\r\n      if (isAutomaticBoost) {\r\n        const permanentIDUsedInAutomaticBoost = isAutomaticBoost[2];\r\n        const extracted = await this.extractDocumentInfoFromBoost(results, permanentIDUsedInAutomaticBoost, rankingExpression, bindings);\r\n        thumbnailPreview = TableBuilder.thumbnailCell(extracted.result, bindings);\r\n        result = extracted.result;\r\n        returnedByIndexForCurrentQuery = extracted.returnedByIndexForCurrentQuery.toString();\r\n      }\r\n\r\n      return {\r\n        ...thumbnailPreview,\r\n        ReturnedByIndexForCurrentQuery: new GenericValueOutput().output(returnedByIndexForCurrentQuery),\r\n        IsRecommendation: new GenericValueOutput().output(result ? result.isRecommendation : '-- NULL --'),\r\n        Expression: { ...new GenericValueOutput().output(rankingExpression.expression), width: 150 },\r\n        Modifier: new GenericValueOutput().output(rankingExpression.modifier)\r\n      };\r\n    });\r\n\r\n    const dataSource = await Promise.all(dataSourcePromises);\r\n\r\n    const { gridOptions } = await new TableBuilder().build(dataSource, agGridElement, {\r\n      rowHeight: 150\r\n    });\r\n\r\n    return {\r\n      container,\r\n      gridOptions\r\n    };\r\n  }\r\n\r\n  private async extractDocumentInfoFromBoost(\r\n    results: IQueryResult[],\r\n    permanentID: string,\r\n    rankingExpression: IRankingExpression,\r\n    bindings: IComponentBindings\r\n  ) {\r\n    let matchingResult = {\r\n      result: null,\r\n      returnedByIndexForCurrentQuery: false\r\n    };\r\n\r\n    const resultInResultSet = find(results, result => {\r\n      return result.raw.permanentid == permanentID || result.raw.urihash == permanentID;\r\n    });\r\n\r\n    if (resultInResultSet) {\r\n      matchingResult = {\r\n        result: resultInResultSet,\r\n        returnedByIndexForCurrentQuery: true\r\n      };\r\n      return matchingResult;\r\n    }\r\n\r\n    const queryBuilder = new QueryBuilder();\r\n    queryBuilder.advancedExpression.add(rankingExpression.expression);\r\n    const resultsFromIndex = await bindings.queryController.getEndpoint().search(queryBuilder.build());\r\n    matchingResult = {\r\n      result: resultsFromIndex.results[0],\r\n      returnedByIndexForCurrentQuery: false\r\n    };\r\n\r\n    return matchingResult;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/ExecutionReportRankingModifiers.ts","import agGridModule = require('ag-grid/main');\r\nimport {\r\n  IExecutionReportSectionBuilder,\r\n  IExecutionReport,\r\n  ExecutionReport,\r\n  EXECUTION_REPORT_SECTION,\r\n  IExecutionReportSection\r\n} from './ExecutionReport';\r\nimport { find, chain, each } from 'underscore';\r\nimport { TableBuilder, ITableDataSource, GenericHtmlRenderer } from './TableBuilder';\r\nimport { Dom, $$ } from '../../utils/Dom';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { StreamHighlightUtils } from '../../utils/StreamHighlightUtils';\r\nimport { ExecutionReportSimpleSection } from './ExecutionReportSimpleSection';\r\n\r\nexport type IRefinedQueriesFromTopClicks = { q: string; score: number };\r\n\r\nexport interface IExecutionReportITDSection extends IExecutionReportSection {\r\n  refinedQueries: IRefinedQueriesFromTopClicks[];\r\n}\r\n\r\nexport interface IExecutionReportMLTopClicksInput extends IExecutionReportSection {\r\n  largeQueryKeywords: string[];\r\n}\r\n\r\nexport class ExecutionReportITDSection implements IExecutionReportSectionBuilder {\r\n  public async build(executionReport: IExecutionReport): Promise<{ container: Dom; gridOptions: agGridModule.GridOptions }> {\r\n    const preprocessQuerySection = find(executionReport.children, child => child.name == EXECUTION_REPORT_SECTION.PREPROCESS_QUERY);\r\n    if (!preprocessQuerySection) {\r\n      return this.buildFallbackEmptyTable(executionReport);\r\n    }\r\n\r\n    const originalLongQuery = preprocessQuerySection.result.in.lq;\r\n    const topClicksSection = find(preprocessQuerySection.children, child => child.name == EXECUTION_REPORT_SECTION.TOP_CLICKS) as\r\n      | IExecutionReportITDSection\r\n      | undefined;\r\n\r\n    if (!topClicksSection || !originalLongQuery) {\r\n      return this.buildFallbackEmptyTable(executionReport);\r\n    }\r\n\r\n    const { container, agGridElement } = ExecutionReport.standardSectionHeader('Large Query Intelligent Term Detection (ITD)');\r\n    let gridOptions: agGridModule.GridOptions;\r\n\r\n    const dataSource = [\r\n      {\r\n        'Original large query': this.buildOriginalLongQueryCell(originalLongQuery, topClicksSection.refinedQueries),\r\n        'Keyword(s) extracted': this.buildRefinedQueryCell(executionReport, topClicksSection.refinedQueries, preprocessQuerySection)\r\n      }\r\n    ];\r\n\r\n    const tableBuilder = await new TableBuilder().build(dataSource, agGridElement, {\r\n      rowHeight: 300\r\n    });\r\n    gridOptions = tableBuilder.gridOptions;\r\n\r\n    return { container, gridOptions };\r\n  }\r\n\r\n  private doHighlights(originalLongQuery: string, refinedQueries: IRefinedQueriesFromTopClicks[]) {\r\n    const termsToHighlight = {};\r\n    each(refinedQueries, refined => {\r\n      termsToHighlight[refined.q] = [];\r\n    });\r\n    return StreamHighlightUtils.highlightStreamText(originalLongQuery, termsToHighlight, {});\r\n  }\r\n\r\n  private buildOriginalLongQueryCell(originalLongQuery: string, refinedQueries: IRefinedQueriesFromTopClicks[]): ITableDataSource {\r\n    return {\r\n      content: this.doHighlights(originalLongQuery, refinedQueries),\r\n      cellRenderer: GenericHtmlRenderer\r\n    };\r\n  }\r\n\r\n  private buildRefinedQueryCell(\r\n    executionReport: IExecutionReport,\r\n    refinedQueries: IRefinedQueriesFromTopClicks[],\r\n    preprocessSection: IExecutionReportSection\r\n  ): ITableDataSource {\r\n    if (Utils.isNonEmptyArray(refinedQueries)) {\r\n      return this.buildRefinedQueryByMLCell(refinedQueries);\r\n    }\r\n\r\n    const fallbackIndexPartialMatch = find(preprocessSection.children, child => child.name == EXECUTION_REPORT_SECTION.PARTIAL_MATCH);\r\n    const isUsingPartialMatch = fallbackIndexPartialMatch ? fallbackIndexPartialMatch.result.out.match(/^PartialMatch/) : false;\r\n    if (isUsingPartialMatch) {\r\n      return this.buildRefinedQueryByPartialMatchCell(fallbackIndexPartialMatch);\r\n    }\r\n\r\n    return this.buildRefinedQueryNoExtraction();\r\n  }\r\n\r\n  private buildRefinedQueryByMLCell(refinedQueries: IRefinedQueriesFromTopClicks[]): ITableDataSource {\r\n    const topLevelContainer = $$('div', undefined, $$('h2', undefined, 'Extraction and scoring performed using Coveo Machine Learning:'));\r\n\r\n    const keywordsList = $$('ul');\r\n    topLevelContainer.append(keywordsList.el);\r\n\r\n    chain(refinedQueries)\r\n      .map(refinedQuery => {\r\n        const content = this.doHighlights(`Keyword: ${refinedQuery.q} ==> Score: ${refinedQuery.score}`, [refinedQuery]);\r\n        const container = $$('li', null, content);\r\n        return container;\r\n      })\r\n      .each(refinedQueryContainer => {\r\n        keywordsList.append(refinedQueryContainer.el);\r\n      });\r\n\r\n    return {\r\n      content: topLevelContainer,\r\n      cellRenderer: GenericHtmlRenderer\r\n    };\r\n  }\r\n\r\n  private buildRefinedQueryByPartialMatchCell(partialMatch: IExecutionReportSection) {\r\n    const topLevelContainer = $$('div');\r\n    topLevelContainer.append($$('h2', undefined, 'Coveo Machine learning was unable to suggest any refined keywords').el);\r\n    topLevelContainer.append($$('h4', undefined, 'Fallback on Coveo Index partial match feature').el);\r\n    const content = $$('code', undefined, partialMatch.result.out);\r\n    topLevelContainer.append(content.el);\r\n    return {\r\n      content: topLevelContainer,\r\n      cellRenderer: GenericHtmlRenderer\r\n    };\r\n  }\r\n\r\n  private buildRefinedQueryNoExtraction(): ITableDataSource {\r\n    const topLevelContainer = $$('div');\r\n    topLevelContainer.append($$('h2', undefined, 'No keywords were extracted').el);\r\n    topLevelContainer.append(\r\n      $$('h4', undefined, 'The query is probably too small, or Coveo is lacking usage analytics data to return any meaningful suggestions.')\r\n        .el\r\n    );\r\n    return {\r\n      content: topLevelContainer,\r\n      cellRenderer: GenericHtmlRenderer\r\n    };\r\n  }\r\n\r\n  private buildFallbackEmptyTable(executionReport: IExecutionReport) {\r\n    return new ExecutionReportSimpleSection(\r\n      EXECUTION_REPORT_SECTION.NONE,\r\n      EXECUTION_REPORT_SECTION.NONE,\r\n      'Large Query Intelligent Term Detection (ITD)'\r\n    ).build(executionReport);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/ExecutionReportITDSection.ts","import { TableBuilder, ITableDataSource } from './TableBuilder';\r\nimport { map, each, where, reject, filter } from 'underscore';\r\nimport agGridModule = require('ag-grid/main');\r\nimport { GenericValueOutput } from './GenericValueOutput';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { $$, Dom, Utils, PopupUtils } from '../../UtilsModules';\r\nimport { IFieldDescription } from '../../rest/FieldDescription';\r\nimport { QueryBuilder } from '../Base/QueryBuilder';\r\nimport { IIndexFieldValue } from '../../rest/FieldValue';\r\nimport { PopupHorizontalAlignment, PopupVerticalAlignment } from '../../utils/PopupUtils';\r\nimport { IRelevanceInspectorTab } from './RelevanceInspector';\r\n\r\nexport class AvailableFieldsTable implements IRelevanceInspectorTab {\r\n  public gridOptions: agGridModule.GridOptions;\r\n\r\n  public constructor(public bindings: IComponentBindings) {}\r\n\r\n  public async build() {\r\n    const container = $$('div');\r\n\r\n    const agGridElement = $$('div', {\r\n      className: 'ag-theme-fresh'\r\n    });\r\n    container.append(agGridElement.el);\r\n\r\n    const allFieldsDescription = this.bindings.queryController ? await this.bindings.queryController.getEndpoint().listFields() : null;\r\n\r\n    if (allFieldsDescription) {\r\n      const dataSource: Record<string, ITableDataSource>[] = map(allFieldsDescription, description => {\r\n        return {\r\n          Name: new GenericValueOutput().output(description.name),\r\n          Description: { ...new GenericValueOutput().output(description.description), width: 150 },\r\n          'Default Value': new GenericValueOutput().output(description.defaultValue),\r\n          'Field Type': new GenericValueOutput().output(description.fieldType),\r\n          'Field Source Type': new GenericValueOutput().output(description.fieldSourceType),\r\n          'Include In Query': new GenericValueOutput().output(description.includeInQuery),\r\n          'Include In Results': new GenericValueOutput().output(description.includeInResults),\r\n          'Group By Field': new GenericValueOutput().output(description.groupByField),\r\n          'Split Group By Field': new GenericValueOutput().output(description.splitGroupByField),\r\n          'Sort By Field': new GenericValueOutput().output(description.sortByField),\r\n          'Sample Of Available Values': {\r\n            content: {\r\n              content: {\r\n                description,\r\n                bindings: this.bindings,\r\n                container\r\n              }\r\n            },\r\n            width: 200,\r\n            suppressSorting: true,\r\n            suppressFilter: true,\r\n            cellRenderer: AvailableFieldsSampleValue\r\n          }\r\n        };\r\n      });\r\n\r\n      const { gridOptions } = await new TableBuilder().build(dataSource, agGridElement, {\r\n        enableFilter: true,\r\n        rowModelType: 'infinite',\r\n        pagination: true,\r\n        paginationPageSize: 25,\r\n        rowHeight: 100,\r\n        enableServerSideFilter: true,\r\n        enableServerSideSorting: true,\r\n        datasource: new AvailableFieldsDatasource(dataSource)\r\n      });\r\n\r\n      this.gridOptions = gridOptions;\r\n    }\r\n\r\n    return container;\r\n  }\r\n}\r\n\r\nexport class AvailableFieldsSampleValue implements agGridModule.ICellRendererComp {\r\n  private description: IFieldDescription | undefined;\r\n  private bindings: IComponentBindings | undefined;\r\n  private container: Dom | undefined;\r\n\r\n  public init(params: any) {\r\n    if (params.value && params.value.content) {\r\n      this.description = params.value.content.description;\r\n      this.bindings = params.value.content.bindings;\r\n      this.container = params.value.content.container;\r\n    }\r\n  }\r\n\r\n  public getGui() {\r\n    const btn = $$(\r\n      'button',\r\n      {\r\n        className: 'coveo-button coveo-available-fields-table-button'\r\n      },\r\n      'Hover For Sample Values'\r\n    );\r\n\r\n    let popperElement: Dom | undefined;\r\n    let userHoveringButtonWithHisMouse = false;\r\n\r\n    btn.on('mouseover', async () => {\r\n      userHoveringButtonWithHisMouse = true;\r\n      if (this.description && this.container && userHoveringButtonWithHisMouse) {\r\n        const values = await this.getFieldsValues(this.description);\r\n        if (userHoveringButtonWithHisMouse) {\r\n          popperElement = this.renderFieldValues(values);\r\n          this.container.append(popperElement.el);\r\n          PopupUtils.positionPopup(popperElement.el, btn.el, document.body, {\r\n            horizontal: PopupHorizontalAlignment.LEFT,\r\n            vertical: PopupVerticalAlignment.MIDDLE\r\n          });\r\n        }\r\n        userHoveringButtonWithHisMouse = false;\r\n      }\r\n    });\r\n\r\n    btn.on('mouseout', () => {\r\n      if (popperElement) {\r\n        popperElement.remove();\r\n      }\r\n      userHoveringButtonWithHisMouse = false;\r\n    });\r\n\r\n    return btn.el;\r\n  }\r\n\r\n  private async getFieldsValues(fieldDesciption: IFieldDescription) {\r\n    if (!this.bindings || !this.description || !this.bindings.queryController || !this.container) {\r\n      return [];\r\n    }\r\n\r\n    if (fieldDesciption.groupByField) {\r\n      return await this.bindings.queryController.getEndpoint().listFieldValues({\r\n        field: this.description.name\r\n      });\r\n    } else {\r\n      const queryBuilder = new QueryBuilder();\r\n      queryBuilder.advancedExpression.add(fieldDesciption.name);\r\n      const queryResults = this.bindings ? await this.bindings.queryController.getEndpoint().search(queryBuilder.build()) : null;\r\n      if (queryResults) {\r\n        return map(queryResults.results, result => {\r\n          return { value: Utils.getFieldValue(result, fieldDesciption.name) } as IIndexFieldValue;\r\n        });\r\n      } else {\r\n        return [];\r\n      }\r\n    }\r\n  }\r\n\r\n  private renderFieldValues(fieldValues: IIndexFieldValue[]) {\r\n    const list = $$('ul', { className: 'coveo-relevance-inspector-available-fields-popup' });\r\n    list.el.style.background = 'white';\r\n    if (fieldValues.length == 0) {\r\n      list.append($$('li', undefined, 'No Values Available ...').el);\r\n    } else {\r\n      fieldValues.forEach(fieldValue => {\r\n        const listItem = $$(\r\n          'li',\r\n          {\r\n            className: 'coveo-relevance-inspector-available-fields-popup-value'\r\n          },\r\n          new GenericValueOutput().output(fieldValue.value).content\r\n        );\r\n\r\n        list.append(listItem.el);\r\n      });\r\n    }\r\n\r\n    return list;\r\n  }\r\n\r\n  public refresh() {\r\n    return true;\r\n  }\r\n}\r\n\r\ninterface IFilterModel {\r\n  type: 'equals' | 'notEqual' | 'startsWith' | 'endsWith' | 'contains' | 'notContains';\r\n  filter: string;\r\n}\r\n\r\ninterface ISortModel {\r\n  colId: string;\r\n  sort: 'asc' | 'desc';\r\n}\r\n\r\nexport class AvailableFieldsDatasource implements agGridModule.IDatasource {\r\n  private rowsData: any[] = [];\r\n  constructor(public dataSource: Record<string, ITableDataSource>[]) {\r\n    this.rowsData = map(this.dataSource, source => {\r\n      const merged: any = {};\r\n\r\n      const extractContent = (value: ITableDataSource & agGridModule.ColGroupDef, key: string) => {\r\n        if (value.content != null) {\r\n          merged[key] = value.content;\r\n        } else if (value.children) {\r\n          each(value.children, (child: any) => {\r\n            each(child, extractContent);\r\n          });\r\n        }\r\n      };\r\n\r\n      each(source, extractContent as any);\r\n      return merged;\r\n    });\r\n  }\r\n\r\n  public getRows(params: agGridModule.IGetRowsParams) {\r\n    const filtered = this.filter(this.rowsData, params.filterModel);\r\n    const filteredAndSorted = this.sort(filtered, params.sortModel);\r\n\r\n    params.successCallback(filteredAndSorted.slice(params.startRow, params.endRow), filteredAndSorted.length);\r\n  }\r\n\r\n  private filter(rows: any[], filterModel: Record<string, IFilterModel>) {\r\n    each(filterModel, (value, key) => {\r\n      switch (value.type) {\r\n        case 'equals':\r\n          rows = where(rows, { [key]: value.filter });\r\n          break;\r\n\r\n        case 'notEqual':\r\n          rows = reject(rows, possibleReturn => {\r\n            return possibleReturn[key] == value.filter;\r\n          });\r\n          break;\r\n\r\n        case 'startsWith':\r\n          rows = filter(rows, possibleReturn => {\r\n            return possibleReturn[key].toLowerCase().indexOf(value.filter) == 0;\r\n          });\r\n          break;\r\n\r\n        case 'endsWith':\r\n          rows = filter(rows, possibleReturn => {\r\n            return possibleReturn[key].toLowerCase().indexOf(value.filter) == possibleReturn[key].length - value.filter.length;\r\n          });\r\n          break;\r\n\r\n        case 'contains':\r\n          rows = filter(rows, possibleReturn => {\r\n            return possibleReturn[key].toLowerCase().indexOf(value.filter) != -1;\r\n          });\r\n          break;\r\n\r\n        case 'notContains':\r\n          rows = filter(rows, possibleReturn => {\r\n            return possibleReturn[key].toLowerCase().indexOf(value.filter) == -1;\r\n          });\r\n          break;\r\n      }\r\n    });\r\n\r\n    return rows;\r\n  }\r\n\r\n  private sort(rows: any[], sortModels: ISortModel[]) {\r\n    if (sortModels && sortModels[0]) {\r\n      const sortModel = sortModels[0];\r\n      return rows.sort((first, second) => {\r\n        const firstValue = first[sortModel.colId];\r\n        const secondValue = second[sortModel.colId];\r\n\r\n        const ascendingOrDescendingMultiplier = sortModel.sort == 'asc' ? 1 : -1;\r\n\r\n        if (Utils.isNullOrEmptyString(firstValue) && Utils.isNullOrEmptyString(secondValue)) {\r\n          return 0;\r\n        }\r\n\r\n        if (Utils.isNullOrEmptyString(firstValue)) {\r\n          return -1 * ascendingOrDescendingMultiplier;\r\n        }\r\n\r\n        if (Utils.isNullOrEmptyString(secondValue)) {\r\n          return 1 * ascendingOrDescendingMultiplier;\r\n        }\r\n\r\n        if (isNaN(firstValue) || isNaN(secondValue)) {\r\n          return firstValue.localeCompare(secondValue) * ascendingOrDescendingMultiplier;\r\n        } else {\r\n          return (Number(firstValue) - Number(secondValue)) * ascendingOrDescendingMultiplier;\r\n        }\r\n      });\r\n    }\r\n    return rows;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/AvailableFieldsTable.ts","import { IQueryResult } from '../../rest/QueryResult';\r\nimport { parseRankingInfo, IRankingInfo, buildListOfTermsElement } from './RankingInfoParser';\r\nimport { $$, Dom } from '../../utils/Dom';\r\nimport { each } from 'underscore';\r\nimport { Utils } from '../../utils/Utils';\r\n\r\nexport class InlineRankingInfo {\r\n  private rankingInfo: IRankingInfo;\r\n  constructor(public result: IQueryResult) {\r\n    this.rankingInfo = parseRankingInfo(result.rankingInfo);\r\n  }\r\n\r\n  public build(): Dom {\r\n    const container = $$('div', {\r\n      className: 'coveo-relevance-inspector-inline-ranking'\r\n    });\r\n\r\n    each(this.rankingInfo.documentWeights, (value: any, key: string) => {\r\n      const section = $$('div', { className: 'coveo-relevance-inspector-inline-ranking-section' }, `${key}: ${value}`);\r\n      container.append(section.el);\r\n    });\r\n\r\n    const total = $$(\r\n      'div',\r\n      { className: 'coveo-relevance-inspector-highlight coveo-relevance-inspector-inline-ranking-section' },\r\n      `Total: ${this.rankingInfo.totalWeight}`\r\n    );\r\n    container.append(total.el);\r\n\r\n    if (this.rankingInfo.termsWeight) {\r\n      this.buildTogglableTermsSection(container);\r\n    }\r\n\r\n    if (Utils.isNonEmptyArray(this.rankingInfo.qreWeights)) {\r\n      this.buildTogglableQRESection(container);\r\n    }\r\n\r\n    return container;\r\n  }\r\n\r\n  private buildTogglableTermsSection(container: Dom) {\r\n    const termsButton = $$(\r\n      'button',\r\n      { className: 'coveo-button coveo-relevance-inspector-inline-ranking-button' },\r\n      'Toggle Terms Relevancy Breakdown'\r\n    );\r\n    container.append(termsButton.el);\r\n\r\n    const termsSection = $$('div', { className: 'coveo-relevance-inspector-inline-ranking-terms' });\r\n\r\n    container.append(termsSection.el);\r\n    each(this.rankingInfo.termsWeight || {}, (value, key) => {\r\n      const builtKey = `Keyword: ${key}`;\r\n      termsSection.append($$('h2', undefined, builtKey).el);\r\n      termsSection.append(buildListOfTermsElement(value.Weights).el);\r\n    });\r\n\r\n    termsButton.on('click', () => termsSection.toggleClass('coveo-active'));\r\n  }\r\n\r\n  private buildTogglableQRESection(container: Dom) {\r\n    const qreButton = $$('button', { className: 'coveo-button coveo-relevance-inspector-inline-ranking-button' }, 'Toggle QRE Breakdown');\r\n    container.append(qreButton.el);\r\n    const qreSection = $$('ul', { className: 'coveo-relevance-inspector-inline-ranking-terms' });\r\n\r\n    container.append(qreSection.el);\r\n    each(this.rankingInfo.qreWeights, value => {\r\n      qreSection.append($$('dd', { className: 'coveo-relevance-inspector-inline-ranking-qre-expression' }, `${value.expression}`).el);\r\n      qreSection.append($$('dt', undefined, `Score: ${value.score}`).el);\r\n    });\r\n\r\n    qreButton.on('click', () => qreSection.toggleClass('coveo-active'));\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/RelevanceInspector/InlineRankingInfo.ts","import { Component } from '../Base/Component';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { ComponentOptionsModel } from '../../models/ComponentOptionsModel';\r\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\r\nimport { analyticsActionCauseList } from '../Analytics/AnalyticsActionListMeta';\r\nimport { IResultLinkOptions } from './ResultLinkOptions';\r\nimport { ResultListEvents } from '../../events/ResultListEvents';\r\nimport { HighlightUtils } from '../../utils/HighlightUtils';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { DeviceUtils } from '../../utils/DeviceUtils';\r\nimport { OS_NAME, OSUtils } from '../../utils/OSUtils';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { QueryUtils } from '../../utils/QueryUtils';\r\nimport { Assert } from '../../misc/Assert';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Defer } from '../../misc/Defer';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { StreamHighlightUtils } from '../../utils/StreamHighlightUtils';\r\nimport { StringUtils } from '../../utils/StringUtils';\r\nimport { once, debounce, extend, escape } from 'underscore';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\nimport 'styling/_ResultLink';\r\nimport { AccessibleButton } from '../../utils/AccessibleButton';\r\n\r\n/**\r\n * The `ResultLink` component automatically transform a search result title into a clickable link pointing to the\r\n * original item.\r\n *\r\n * This component is a result template component (see [Result Templates](https://docs.coveo.com/en/413/)).\r\n */\r\nexport class ResultLink extends Component {\r\n  static ID = 'ResultLink';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      ResultLink: ResultLink\r\n    });\r\n  };\r\n\r\n  /**\r\n   * The options for the ResultLink\r\n   * @componentOptions\r\n   */\r\n  static options: IResultLinkOptions = {\r\n    /**\r\n     * Specifies the field to use to output the component `href` attribute value.\r\n     *\r\n     * **Tip:**\r\n     * > Instead of specifying a value for the `field` option, you can directly add an `href` attribute to the\r\n     * > `ResultLink` HTML element. Then, you can use a custom script to generate the `href` value.\r\n     *\r\n     * **Examples:**\r\n     * - With the following markup, the `ResultLink` outputs its `href` value using the `@uri` field (rather than the\r\n     * default field):\r\n     *\r\n     * ```html\r\n     * <a class=\"CoveoResultLink\" data-field=\"@uri\"></a>\r\n     * ```\r\n     *\r\n     * - In the following result template, the custom `getMyKBUri()` function provides the `href` value:\r\n     *\r\n     * ```html\r\n     * <script id=\"KnowledgeArticle\" type=\"text/underscore\" class=\"result-template\">\r\n     *   <div class='CoveoIcon>'></div>\r\n     *   <a class=\"CoveoResultLink\" href=\"<%= getMyKBUri(raw) %>\"></a>\r\n     *   <div class=\"CoveoExcerpt\"></div>\r\n     * </script>\r\n     * ```\r\n     *\r\n     * See also [`hrefTemplate`]{@link ResultLink.options.hrefTemplate}, which can override this option.\r\n     *\r\n     * By default, the component uses the `@clickUri` field of the item to output the value of its `href` attribute.\r\n     */\r\n    field: ComponentOptions.buildFieldOption(),\r\n\r\n    /**\r\n     * Specifies whether the component should try to open its link in Microsoft Outlook.\r\n     *\r\n     * Setting this option to `true` is normally useful for `ResultLink` instances related to Microsoft Exchange emails.\r\n     *\r\n     * If this option is `true`, clicking the `ResultLink` calls the\r\n     * [`openLinkInOutlook`]{@link ResultLink.openLinkInOutlook} method instead of the\r\n     * [`openLink`]{@link ResultLink.openLink} method.\r\n     *\r\n     * Default value is `false`.\r\n     */\r\n    openInOutlook: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n\r\n    /**\r\n     * Specifies whether the component should open its link in the [`Quickview`]{@link Quickview} component rather than\r\n     * loading through the original URL.\r\n     *\r\n     * Default value is `false`.\r\n     */\r\n    openQuickview: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n\r\n    /**\r\n     * Specifies whether the component should open its link in a new window instead of opening it in the current\r\n     * context.\r\n     *\r\n     * If this option is `true`, clicking the `ResultLink` calls the\r\n     * [`openLinkInNewWindow`]{@link ResultLink.openLinkInNewWindow} method instead of the\r\n     * [`openLink`]{@link ResultLink.openLink} method.\r\n     *\r\n     * **Note:**\r\n     * > If a search page contains a [`ResultPreferences`]{@link ResultsPreferences} component whose\r\n     * > [`enableOpenInNewWindow`]{@link ResultsPreferences.options.enableOpenInNewWindow} option is `true`, and the end\r\n     * > user checks the <b>Always open results in new window</b> box, `ResultLink` components in this page will always\r\n     * > open their links in a new window when the end user clicks them, no matter what the value of their\r\n     * > `alwaysOpenInNewWindow` option is.\r\n     *\r\n     * Default value is `false`.\r\n     */\r\n    alwaysOpenInNewWindow: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n\r\n    /**\r\n     * Specifies a template literal from which to generate the `ResultLink` `href` attribute value (see\r\n     * [Template literals](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals)).\r\n     *\r\n     * This option overrides the [`field`]{@link ResultLink.options.field} option value.\r\n     *\r\n     * The template literal can reference any number of fields from the parent result. It can also reference global\r\n     * scope properties.\r\n     *\r\n     * **Examples:**\r\n     *\r\n     * - The following markup generates an `href` value such as `http://uri.com?id=itemTitle`:\r\n     *\r\n     * ```html\r\n     * <a class='CoveoResultLink' data-href-template='${clickUri}?id=${raw.title}'></a>\r\n     * ```\r\n     *\r\n     * - The following markup generates an `href` value such as `localhost/fooBar`:\r\n     *\r\n     * ```html\r\n     * <a class='CoveoResultLink' data-href-template='${window.location.hostname}/{Foo.Bar}'></a>\r\n     * ```\r\n     *\r\n     * Default value is `undefined`.\r\n     */\r\n    hrefTemplate: ComponentOptions.buildStringOption(),\r\n\r\n    /**\r\n     * Specifies a template literal from which to generate the `ResultLink` display title (see\r\n     * [Template literals](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals)).\r\n     *\r\n     * This option overrides the default `ResultLink` display title behavior.\r\n     *\r\n     * The template literal can reference any number of fields from the parent result. However, if the template literal\r\n     * references a key whose value is undefined in the parent result fields, the `ResultLink` title displays the\r\n     * name of this key instead.\r\n     *\r\n     * This option is ignored if the `ResultLink` innerHTML contains any value.\r\n     *\r\n     * **Examples:**\r\n     *\r\n     * - The following markup generates a `ResultLink` display title such as `Case number: 123456` if both the\r\n     * `raw.objecttype` and `raw.objectnumber` keys are defined in the parent result fields:\r\n     *\r\n     * ```html\r\n     * <a class=\"CoveoResultLink\" data-title-template=\"${raw.objecttype} number: ${raw.objectnumber}\"></a>\r\n     * ```\r\n     *\r\n     * - The following markup generates `${myField}` as a `ResultLink` display title if the `myField` key is undefined\r\n     * in the parent result fields:\r\n     *\r\n     * ```html\r\n     * <a class=\"CoveoResultLink\" data-title-template=\"${myField}\"></a>\r\n     * ```\r\n     *\r\n     * - The following markup generates `Foobar` as a `ResultLink` display title, because the `ResultLink` innterHTML is\r\n     * not empty:\r\n     *\r\n     * ```html\r\n     * <a class=\"CoveoResultLink\" data-title-template=\"${will} ${be} ${ignored}\">Foobar</a>\r\n     * ```\r\n     *\r\n     * Default value is `undefined`.\r\n     *\r\n     * @availablesince [January 2017 Release (v1.1865.9)](https://docs.coveo.com/en/396/#january-2017-release-v118659)\r\n     */\r\n    titleTemplate: ComponentOptions.buildStringOption(),\r\n\r\n    /**\r\n     * Specifies an event handler function to execute when the user clicks the `ResultLink` component.\r\n     *\r\n     * The handler function takes a JavaScript [`Event`](https://developer.mozilla.org/en/docs/Web/API/Event) object and\r\n     * an [`IQueryResult`]{@link IQueryResult} as its parameters.\r\n     *\r\n     * Overriding the default behavior of the `onClick` event can allow you to execute specific code instead.\r\n     *\r\n     * **Note:**\r\n     * > You cannot set this option directly in the component markup as an HTML attribute. You must either set it in the\r\n     * > [`init`]{@link init} call of your search interface (see\r\n     * > [Passing Component Options in the init Call](https://docs.coveo.com/en/346/#passing-component-options-in-the-init-call)),\r\n     * > or before the `init` call, using the `options` top-level function (see\r\n     * > [Passing Component Options Before the init Call](https://docs.coveo.com/en/346/#passing-component-options-before-the-init-call)).\r\n     *\r\n     * **Example:**\r\n     * ```javascript\r\n     * // You can set the option in the 'init' call:\r\n     * Coveo.init(document.querySelector(\"#search\"), {\r\n     *   ResultLink : {\r\n     *     onClick : function(e, result) {\r\n     *       e.preventDefault();\r\n     *       // Custom code to execute with the item URI and title.\r\n     *       openUriInASpecialTab(result.clickUri, result.title);\r\n     *     }\r\n     *   }\r\n     * });\r\n     *\r\n     * // Or before the 'init' call, using the 'options' top-level function:\r\n     * // Coveo.options(document.querySelector('#search'), {\r\n     * //   ResultLink : {\r\n     * //     onClick : function(e, result) {\r\n     * //       e.preventDefault();\r\n     * //       // Custom code to execute with the item URI and title.\r\n     * //       openUriInASpecialTab(result.clickUri, result.title);\r\n     * //     }\r\n     * //   }\r\n     * // });\r\n     * ```\r\n     */\r\n    onClick: ComponentOptions.buildCustomOption<(e: Event, result: IQueryResult) => any>(() => {\r\n      return null;\r\n    })\r\n  };\r\n\r\n  private toExecuteOnOpen: (e?: Event) => void;\r\n\r\n  /**\r\n   * Creates a new `ResultLink` component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the `ResultLink` component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   * @param result The result to associate the component with.\r\n   * @param os\r\n   */\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options: IResultLinkOptions,\r\n    public bindings?: IResultsComponentBindings,\r\n    public result?: IQueryResult,\r\n    public os?: OS_NAME\r\n  ) {\r\n    super(element, ResultLink.ID, bindings);\r\n\r\n    const initialOptions = ComponentOptions.initComponentOptions(element, ResultLink, options);\r\n    const resultLinkOptions = this.componentOptionsModel.get(ComponentOptionsModel.attributesEnum.resultLink);\r\n    this.options = extend({}, initialOptions, resultLinkOptions);\r\n\r\n    this.result = result || this.resolveResult();\r\n\r\n    if (this.options.openQuickview == null) {\r\n      this.options.openQuickview = result.raw['connectortype'] == 'ExchangeCrawler' && DeviceUtils.isMobileDevice();\r\n    }\r\n    this.element.setAttribute('tabindex', '0');\r\n\r\n    Assert.exists(this.componentOptionsModel);\r\n    Assert.exists(this.result);\r\n\r\n    if (!this.quickviewShouldBeOpened()) {\r\n      // Bind on multiple \"click\" or \"mouse\" events.\r\n      // Create a function that will be executed only once, so as not to log multiple events\r\n      // Once a result link has been opened, and that we log at least one analytics event,\r\n      // it should not matter if the end user open the same link multiple times with different methods.\r\n      // It's still only one \"click\" event as far as UA is concerned.\r\n      // Also need to handle \"longpress\" on mobile (the contextual menu), which we assume to be 1 s long.\r\n\r\n      const executeOnlyOnce = once(() => this.logOpenDocument());\r\n\r\n      $$(element).on(['contextmenu', 'click', 'mousedown', 'mouseup'], executeOnlyOnce);\r\n      let longPressTimer: number;\r\n      $$(element).on('touchstart', () => {\r\n        longPressTimer = window.setTimeout(executeOnlyOnce, 1000);\r\n      });\r\n      $$(element).on('touchend', () => {\r\n        if (longPressTimer) {\r\n          clearTimeout(longPressTimer);\r\n        }\r\n      });\r\n    }\r\n    this.renderUri(element, result);\r\n    this.bindEventToOpen();\r\n  }\r\n  public renderUri(element: HTMLElement, result?: IQueryResult) {\r\n    if (/^\\s*$/.test(this.element.innerHTML)) {\r\n      const title = this.getDisplayedTitle();\r\n      this.element.innerHTML = title;\r\n      if (!this.element.title) {\r\n        this.element.title = this.getDisplayedTitleAsText();\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Opens the result in the same window, no matter how the actual component is configured for the end user.\r\n   * @param logAnalytics Specifies whether the method should log an analytics event.\r\n   */\r\n  public openLink(logAnalytics = true) {\r\n    if (logAnalytics) {\r\n      this.logOpenDocument();\r\n    }\r\n    window.location.href = this.getResultUri();\r\n  }\r\n\r\n  /**\r\n   * Opens the result in a new window, no matter how the actual component is configured for the end user.\r\n   * @param logAnalytics Specifies whether the method should log an analytics event.\r\n   */\r\n  public openLinkInNewWindow(logAnalytics = true) {\r\n    if (logAnalytics) {\r\n      this.logOpenDocument();\r\n    }\r\n    window.open(this.getResultUri(), '_blank');\r\n  }\r\n\r\n  /**\r\n   * Tries to open the result in Microsoft Outlook if the result has an `outlookformacuri` or `outlookuri` field.\r\n   *\r\n   * Normally, this implies the result should be a link to an email.\r\n   *\r\n   * If the needed fields are not present, this method does nothing.\r\n   * @param logAnalytics Specifies whether the method should log an analytics event.\r\n   */\r\n  public openLinkInOutlook(logAnalytics = true) {\r\n    if (this.hasOutlookField()) {\r\n      if (logAnalytics) {\r\n        this.logOpenDocument();\r\n      }\r\n      this.openLink();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens the link in the same manner the end user would.\r\n   *\r\n   * This essentially simulates a click on the result link.\r\n   *\r\n   * @param logAnalytics Specifies whether the method should log an analytics event.\r\n   */\r\n  public openLinkAsConfigured(logAnalytics = true) {\r\n    if (this.toExecuteOnOpen) {\r\n      if (logAnalytics) {\r\n        this.logOpenDocument();\r\n      }\r\n      this.toExecuteOnOpen();\r\n    }\r\n  }\r\n\r\n  protected bindEventToOpen(): boolean {\r\n    return (\r\n      this.bindOnClickIfNotUndefined() ||\r\n      this.bindOpenQuickviewIfNotUndefined() ||\r\n      this.setHrefIfNotAlready() ||\r\n      this.openLinkThatIsNotAnAnchor()\r\n    );\r\n  }\r\n\r\n  private getDisplayedTitle() {\r\n    if (!this.options.titleTemplate) {\r\n      return this.result.title\r\n        ? HighlightUtils.highlightString(this.result.title, this.result.titleHighlights, null, 'coveo-highlight')\r\n        : this.escapedClickUri;\r\n    } else {\r\n      let newTitle = StringUtils.buildStringTemplateFromResult(this.options.titleTemplate, this.result);\r\n      return newTitle\r\n        ? StreamHighlightUtils.highlightStreamText(newTitle, this.result.termsToHighlight, this.result.phrasesToHighlight)\r\n        : this.escapedClickUri;\r\n    }\r\n  }\r\n\r\n  private getDisplayedTitleAsText() {\r\n    const container = $$('div');\r\n    container.setHtml(this.getDisplayedTitle());\r\n    return container.text();\r\n  }\r\n\r\n  private get escapedClickUri() {\r\n    return escape(this.result.clickUri);\r\n  }\r\n\r\n  private bindOnClickIfNotUndefined() {\r\n    if (this.options.onClick != undefined) {\r\n      this.toExecuteOnOpen = (e: MouseEvent) => {\r\n        this.options.onClick.call(this, e, this.result);\r\n      };\r\n\r\n      new AccessibleButton()\r\n        .withElement(this.element)\r\n        .withLabel(this.result.title)\r\n        .withSelectAction((e: Event) => this.toExecuteOnOpen(e))\r\n        .build();\r\n\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private bindOpenQuickviewIfNotUndefined() {\r\n    if (this.quickviewShouldBeOpened()) {\r\n      this.toExecuteOnOpen = () => {\r\n        $$(this.bindings.resultElement).trigger(ResultListEvents.openQuickview);\r\n      };\r\n\r\n      $$(this.element).on('click', (e: Event) => {\r\n        e.preventDefault();\r\n        this.toExecuteOnOpen();\r\n      });\r\n\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private openLinkThatIsNotAnAnchor() {\r\n    if (!this.elementIsAnAnchor()) {\r\n      this.toExecuteOnOpen = () => {\r\n        if (this.options.alwaysOpenInNewWindow) {\r\n          if (this.options.openInOutlook) {\r\n            this.openLinkInOutlook();\r\n          } else {\r\n            this.openLinkInNewWindow();\r\n          }\r\n        } else {\r\n          this.openLink();\r\n        }\r\n      };\r\n\r\n      $$(this.element).on('click', () => {\r\n        this.toExecuteOnOpen();\r\n      });\r\n\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private setHrefIfNotAlready() {\r\n    // Do not erase any value put in href by the template, etc. Allows\r\n    // using custom click urls while still keeping analytics recording\r\n    // and other behavior brought by the component.\r\n    if (this.elementIsAnAnchor() && !Utils.isNonEmptyString($$(this.element).getAttribute('href'))) {\r\n      $$(this.element).setAttribute('href', this.getResultUri());\r\n      if (this.options.alwaysOpenInNewWindow && !(this.options.openInOutlook && this.hasOutlookField())) {\r\n        $$(this.element).setAttribute('target', '_blank');\r\n      }\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  private logOpenDocument = debounce(\r\n    () => {\r\n      this.queryController.saveLastQuery();\r\n      let documentURL = $$(this.element).getAttribute('href');\r\n      if (documentURL == undefined || documentURL == '') {\r\n        documentURL = this.escapedClickUri;\r\n      }\r\n      this.usageAnalytics.logClickEvent(\r\n        analyticsActionCauseList.documentOpen,\r\n        {\r\n          documentURL: documentURL,\r\n          documentTitle: this.result.title,\r\n          author: Utils.getFieldValue(this.result, 'author')\r\n        },\r\n        this.result,\r\n        this.root\r\n      );\r\n      Defer.flush();\r\n    },\r\n    1500,\r\n    true\r\n  );\r\n\r\n  private filterProtocol(uri: string) {\r\n    const isAbsolute = /^(https?|ftp|file|mailto|tel):/i.test(uri);\r\n    const isRelative = /^\\//.test(uri);\r\n\r\n    return isAbsolute || isRelative ? uri : '';\r\n  }\r\n\r\n  private getResultUri(): string {\r\n    if (this.options.hrefTemplate) {\r\n      const uri = StringUtils.buildStringTemplateFromResult(this.options.hrefTemplate, this.result);\r\n      return this.filterProtocol(uri);\r\n    }\r\n\r\n    if (this.options.field == undefined && this.options.openInOutlook) {\r\n      this.setField();\r\n    }\r\n\r\n    if (this.options.field != undefined) {\r\n      return this.filterProtocol(Utils.getFieldValue(this.result, <string>this.options.field));\r\n    }\r\n\r\n    return this.filterProtocol(this.result.clickUri);\r\n  }\r\n\r\n  private elementIsAnAnchor() {\r\n    return this.element.tagName == 'A';\r\n  }\r\n\r\n  private setField() {\r\n    let os = Utils.exists(this.os) ? this.os : OSUtils.get();\r\n    if (os == OS_NAME.MACOSX && this.hasOutlookField()) {\r\n      this.options.field = '@outlookformacuri';\r\n    } else if (os == OS_NAME.WINDOWS && this.hasOutlookField()) {\r\n      this.options.field = '@outlookuri';\r\n    }\r\n  }\r\n\r\n  private hasOutlookField() {\r\n    let os = Utils.exists(this.os) ? this.os : OSUtils.get();\r\n    if (os == OS_NAME.MACOSX && this.result.raw['outlookformacuri'] != undefined) {\r\n      return true;\r\n    } else if (os == OS_NAME.WINDOWS && this.result.raw['outlookuri'] != undefined) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isUriThatMustBeOpenedInQuickview(): boolean {\r\n    return this.escapedClickUri.toLowerCase().indexOf('ldap://') == 0;\r\n  }\r\n\r\n  private quickviewShouldBeOpened() {\r\n    return (this.options.openQuickview || this.isUriThatMustBeOpenedInQuickview()) && QueryUtils.hasHTMLVersion(this.result);\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(ResultLink);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultLink/ResultLink.ts"],"sourceRoot":""}