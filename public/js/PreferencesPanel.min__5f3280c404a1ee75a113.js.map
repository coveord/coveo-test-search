{"version":3,"sources":["PreferencesPanel.min__5f3280c404a1ee75a113.js","./src/ui/PreferencesPanel/PreferencesPanel.ts"],"names":["webpackJsonpCoveo__temporary","262","module","exports","__webpack_require__","__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","element","options","bindings","ModalBox","PreferencesPanel","ID","content","ComponentOptions","initComponentOptions","bind","onRootElement","SettingsEvents","settingsPopulateMenu","args","menuData","push","className","text","l","onOpen","open","onClose","close","svgIcon","SVGIcons","icons","dropdownPreferences","svgIconClassName","InitializationEvents","afterComponentsInitialization","$$","children","_this","modalbox","_","each","oneChild","append","el","title","validation","cleanupOnExit","body","searchInterface","modalContainer","save","trigger","PreferencesPanelEvents","savePreferences","queryController","executeQuery","exitPreferencesWithoutSave","doExport","exportGlobally","Component","Initialization","registerAutoCreateComponent","632"],"mappings":"AAAAA,8BAA8B,KAExBC,IACA,SAAUC,EAAQC,EAASC,GAEjC,YAEA,IAAIC,GAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBC,OAAOC,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOV,KAAKW,YAAcL,EADnCL,EAAcK,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAaL,OAAOW,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,OAGvFR,QAAOY,eAAejB,EAAS,cAAgBkB,OAAO,GCjBtD,YAEA,OACA,QAEA,QACA,OACA,OACA,OACA,OACA,QACA,MAEA,OACA,aACA,QAaA,cAoBE,WACSC,EACAC,EACPC,EACQC,OAAA,KAAAA,MAAW,EAAAA,SAJrB,OAME,YAAMH,EAASI,EAAiBC,GAAIH,IAAS,IDgBzC,OCrBG,GAAAF,UACA,EAAAC,UAEC,EAAAE,WAbF,EAAAG,WAgBN,EAAKL,QAAU,EAAAM,iBAAiBC,qBAAqBR,EAASI,EAAkBH,GAChF,EAAKQ,KAAKC,cAAc,EAAAC,eAAeC,qBAAsB,SAACC,GAC5DA,EAAKC,SAASC,MACZC,UAAW,0BACXC,KAAM,EAAAC,EAAE,eACRC,OAAQ,WAAM,SAAKC,QACnBC,QAAS,WAAM,SAAKC,SACpBC,QAAS,EAAAC,SAASC,MAAMC,oBACxBC,iBAAkB,kCAGtB,EAAKlB,KAAKC,cAAc,EAAAkB,qBAAqBC,8BAA+B,WAC1E,EAAKvB,QAAU,EAAAwB,GAAG,EAAK9B,SAAS+B,aDGvBC,ECgDf,MA1FsC,QA8C7B,YAAAZ,KAAP,qBACE,IAAqB,MAAjBpC,KAAKiD,SAAkB,CACzB,GAAI,GAAO,EAAAH,GAAG,MACdI,GAAEC,KAAKnD,KAAKsB,QAAS,SAAA8B,GACnB,EAAKC,OAAOD,KAGdpD,KAAKiD,SAAWjD,KAAKmB,SAASiB,KAAK,EAAKkB,IACtCC,MAAO,EAAArB,EAAE,eACTsB,WAAY,WAEV,MADA,GAAKC,iBACE,GAETC,KAAM1D,KAAK2D,gBAAgB1C,QAAQ2C,mBAUlC,YAAAtB,MAAP,WACMtC,KAAKiD,WACPjD,KAAKyD,gBACLzD,KAAKiD,SAASX,QACdtC,KAAKiD,SAAW,OASb,YAAAY,KAAP,WACE,EAAAf,GAAG9C,KAAKgB,SAAS8C,QAAQ,EAAAC,uBAAuBC,iBAChDhE,KAAKiE,gBAAgBC,gBAGf,YAAAT,cAAR,WACE,EAAAX,GAAG9C,KAAKgB,SAAS8C,QAAQ,EAAAC,uBAAuBI,6BAvF3C,EAAA9C,GAAK,mBAEL,EAAA+C,SAAW,WAChB,EAAAC,gBACEjD,iBAAkBA,KAIf,EAAAH,WAiFT,GA1FsC,EAAAqD,UAAzB,GAAAlD,mBA4Fb,EAAAmD,eAAeC,4BAA4BpD,IDWrCqD,IACA,SAAU7E,EAAQC","file":"PreferencesPanel.min__5f3280c404a1ee75a113.js","sourcesContent":["webpackJsonpCoveo__temporary([67],{\n\n/***/ 262:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(7);\r\nvar ComponentOptions_1 = __webpack_require__(8);\r\nvar SettingsEvents_1 = __webpack_require__(53);\r\nvar PreferencesPanelEvents_1 = __webpack_require__(96);\r\nvar Initialization_1 = __webpack_require__(2);\r\nvar Strings_1 = __webpack_require__(6);\r\nvar Dom_1 = __webpack_require__(1);\r\nvar GlobalExports_1 = __webpack_require__(3);\r\nvar ExternalModulesShim_1 = __webpack_require__(26);\r\nvar _ = __webpack_require__(0);\r\n__webpack_require__(632);\r\nvar InitializationEvents_1 = __webpack_require__(17);\r\nvar SVGIcons_1 = __webpack_require__(12);\r\n/**\r\n * The PreferencesPanel component renders a **Preferences** item inside the {@link Settings} component which the end\r\n * user can click to access a panel from which it is possible to specify certain customization options for the search\r\n * interface. These customization options are then saved in the browser local storage.\r\n *\r\n * This component should be used inside the {@link Settings} component.\r\n *\r\n * See also the {@link ResultsFiltersPreferences} and {@link ResultsPreferences} components.\r\n */\r\nvar PreferencesPanel = /** @class */ (function (_super) {\r\n    __extends(PreferencesPanel, _super);\r\n    /**\r\n     * Creates a new PreferencesPanel.\r\n     * @param element The HTMLElement on which to instantiate the component.\r\n     * @param options The options for the PreferencesPanel component.\r\n     * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n     * automatically resolved (with a slower execution time).\r\n     */\r\n    function PreferencesPanel(element, options, bindings, ModalBox) {\r\n        if (ModalBox === void 0) { ModalBox = ExternalModulesShim_1.ModalBox; }\r\n        var _this = _super.call(this, element, PreferencesPanel.ID, bindings) || this;\r\n        _this.element = element;\r\n        _this.options = options;\r\n        _this.ModalBox = ModalBox;\r\n        _this.content = [];\r\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, PreferencesPanel, options);\r\n        _this.bind.onRootElement(SettingsEvents_1.SettingsEvents.settingsPopulateMenu, function (args) {\r\n            args.menuData.push({\r\n                className: 'coveo-preferences-panel',\r\n                text: Strings_1.l('Preferences'),\r\n                onOpen: function () { return _this.open(); },\r\n                onClose: function () { return _this.close(); },\r\n                svgIcon: SVGIcons_1.SVGIcons.icons.dropdownPreferences,\r\n                svgIconClassName: 'coveo-preferences-panel-svg'\r\n            });\r\n        });\r\n        _this.bind.onRootElement(InitializationEvents_1.InitializationEvents.afterComponentsInitialization, function () {\r\n            _this.content = Dom_1.$$(_this.element).children();\r\n        });\r\n        return _this;\r\n    }\r\n    /**\r\n     * Opens the PreferencesPanel.\r\n     */\r\n    PreferencesPanel.prototype.open = function () {\r\n        var _this = this;\r\n        if (this.modalbox == null) {\r\n            var root_1 = Dom_1.$$('div');\r\n            _.each(this.content, function (oneChild) {\r\n                root_1.append(oneChild);\r\n            });\r\n            this.modalbox = this.ModalBox.open(root_1.el, {\r\n                title: Strings_1.l('Preferences'),\r\n                validation: function () {\r\n                    _this.cleanupOnExit();\r\n                    return true;\r\n                },\r\n                body: this.searchInterface.options.modalContainer\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Closes the PreferencesPanel without saving changes.\r\n     *\r\n     * Also triggers the `exitPreferencesWithoutSave` event.\r\n     */\r\n    PreferencesPanel.prototype.close = function () {\r\n        if (this.modalbox) {\r\n            this.cleanupOnExit();\r\n            this.modalbox.close();\r\n            this.modalbox = null;\r\n        }\r\n    };\r\n    /**\r\n     * Saves the changes and executes a new query.\r\n     *\r\n     * Also triggers the `savePreferences` event.\r\n     */\r\n    PreferencesPanel.prototype.save = function () {\r\n        Dom_1.$$(this.element).trigger(PreferencesPanelEvents_1.PreferencesPanelEvents.savePreferences);\r\n        this.queryController.executeQuery();\r\n    };\r\n    PreferencesPanel.prototype.cleanupOnExit = function () {\r\n        Dom_1.$$(this.element).trigger(PreferencesPanelEvents_1.PreferencesPanelEvents.exitPreferencesWithoutSave);\r\n    };\r\n    PreferencesPanel.ID = 'PreferencesPanel';\r\n    PreferencesPanel.doExport = function () {\r\n        GlobalExports_1.exportGlobally({\r\n            PreferencesPanel: PreferencesPanel\r\n        });\r\n    };\r\n    PreferencesPanel.options = {};\r\n    return PreferencesPanel;\r\n}(Component_1.Component));\r\nexports.PreferencesPanel = PreferencesPanel;\r\nInitialization_1.Initialization.registerAutoCreateComponent(PreferencesPanel);\r\n\n\n/***/ }),\n\n/***/ 632:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// PreferencesPanel.min__5f3280c404a1ee75a113.js","import { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { SettingsEvents } from '../../events/SettingsEvents';\r\nimport { ISettingsPopulateMenuArgs } from '../Settings/Settings';\r\nimport { PreferencesPanelEvents } from '../../events/PreferencesPanelEvents';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { l } from '../../strings/Strings';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { exportGlobally } from '../../GlobalExports';\r\nimport { ModalBox as ModalBoxModule } from '../../ExternalModulesShim';\r\nimport * as _ from 'underscore';\r\n\r\nimport 'styling/_PreferencesPanel';\r\nimport { InitializationEvents } from '../../events/InitializationEvents';\r\nimport { SVGIcons } from '../../utils/SVGIcons';\r\n\r\nexport interface IPreferencesPanelOptions {}\r\n\r\n/**\r\n * The PreferencesPanel component renders a **Preferences** item inside the {@link Settings} component which the end\r\n * user can click to access a panel from which it is possible to specify certain customization options for the search\r\n * interface. These customization options are then saved in the browser local storage.\r\n *\r\n * This component should be used inside the {@link Settings} component.\r\n *\r\n * See also the {@link ResultsFiltersPreferences} and {@link ResultsPreferences} components.\r\n */\r\nexport class PreferencesPanel extends Component {\r\n  static ID = 'PreferencesPanel';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      PreferencesPanel: PreferencesPanel\r\n    });\r\n  };\r\n\r\n  static options: IPreferencesPanelOptions = {};\r\n  private modalbox: Coveo.ModalBox.ModalBox;\r\n  private content: HTMLElement[] = [];\r\n\r\n  /**\r\n   * Creates a new PreferencesPanel.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the PreferencesPanel component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   */\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options: IPreferencesPanelOptions,\r\n    bindings?: IComponentBindings,\r\n    private ModalBox = ModalBoxModule\r\n  ) {\r\n    super(element, PreferencesPanel.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, PreferencesPanel, options);\r\n    this.bind.onRootElement(SettingsEvents.settingsPopulateMenu, (args: ISettingsPopulateMenuArgs) => {\r\n      args.menuData.push({\r\n        className: 'coveo-preferences-panel',\r\n        text: l('Preferences'),\r\n        onOpen: () => this.open(),\r\n        onClose: () => this.close(),\r\n        svgIcon: SVGIcons.icons.dropdownPreferences,\r\n        svgIconClassName: 'coveo-preferences-panel-svg'\r\n      });\r\n    });\r\n    this.bind.onRootElement(InitializationEvents.afterComponentsInitialization, () => {\r\n      this.content = $$(this.element).children();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Opens the PreferencesPanel.\r\n   */\r\n  public open(): void {\r\n    if (this.modalbox == null) {\r\n      let root = $$('div');\r\n      _.each(this.content, oneChild => {\r\n        root.append(oneChild);\r\n      });\r\n\r\n      this.modalbox = this.ModalBox.open(root.el, {\r\n        title: l('Preferences'),\r\n        validation: () => {\r\n          this.cleanupOnExit();\r\n          return true;\r\n        },\r\n        body: this.searchInterface.options.modalContainer\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Closes the PreferencesPanel without saving changes.\r\n   *\r\n   * Also triggers the `exitPreferencesWithoutSave` event.\r\n   */\r\n  public close(): void {\r\n    if (this.modalbox) {\r\n      this.cleanupOnExit();\r\n      this.modalbox.close();\r\n      this.modalbox = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Saves the changes and executes a new query.\r\n   *\r\n   * Also triggers the `savePreferences` event.\r\n   */\r\n  public save(): void {\r\n    $$(this.element).trigger(PreferencesPanelEvents.savePreferences);\r\n    this.queryController.executeQuery();\r\n  }\r\n\r\n  private cleanupOnExit() {\r\n    $$(this.element).trigger(PreferencesPanelEvents.exitPreferencesWithoutSave);\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(PreferencesPanel);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/PreferencesPanel/PreferencesPanel.ts"],"sourceRoot":""}