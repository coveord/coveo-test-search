{"version":3,"sources":["./src/ui/FormWidgets/NumericSpinner.ts"],"names":[],"mappings":"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","file":"NumericSpinner__cb223698fbc3e33d4d03.js","sourcesContent":["import { exportGlobally } from '../../GlobalExports';\r\nimport { l } from '../../strings/Strings';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { SVGDom } from '../../utils/SVGDom';\r\nimport { SVGIcons } from '../../utils/SVGIcons';\r\nimport { IFormWidget, IFormWidgetSettable } from './FormWidgets';\r\n\r\n/**\r\n * A numeric spinner widget with standard styling.\r\n */\r\nexport class NumericSpinner implements IFormWidget, IFormWidgetSettable {\r\n  private element: HTMLElement;\r\n  public name: string;\r\n\r\n  public static doExport() {\r\n    exportGlobally({\r\n      NumericSpinner: NumericSpinner\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a new `NumericSpinner`.\r\n   * @param onChange The function to call when the numeric spinner value changes. This function takes the current\r\n   * `NumericSpinner` instance as an argument.\r\n   * @param min The minimum possible value of the numeric spinner.\r\n   * @param max The maximum possible value of the numeric spinner.\r\n   * @param label The label to use for the input for accessibility purposes.\r\n   */\r\n  constructor(\r\n    public onChange: (numericSpinner: NumericSpinner) => void = (numericSpinner: NumericSpinner) => {},\r\n    public min: number = 0,\r\n    public max?: number,\r\n    private label?: string\r\n  ) {\r\n    this.buildContent();\r\n    this.bindEvents();\r\n  }\r\n\r\n  /**\r\n   * Resets the numeric spinner.\r\n   */\r\n  public reset() {\r\n    this.getSpinnerInput().value = '';\r\n    this.onChange(this);\r\n  }\r\n\r\n  /**\r\n   * Gets the element on which the numeric spinner is bound.\r\n   * @returns {HTMLInputElement} The numeric spinner element.\r\n   */\r\n  public getElement(): HTMLElement {\r\n    return this.element;\r\n  }\r\n\r\n  /**\r\n   * Gets the numeric spinner currently selected value (as a string).\r\n   * @returns {string} The numeric spinner value.\r\n   */\r\n  public getValue(): string {\r\n    return this.getSpinnerInput().value;\r\n  }\r\n\r\n  /**\r\n   * Gets the numeric spinner currently selected value (as an integer).\r\n   * @returns {number} The numeric spinner value.\r\n   */\r\n  public getIntValue(): number {\r\n    return this.getSpinnerInput().value ? parseInt(this.getSpinnerInput().value, 10) : this.min;\r\n  }\r\n\r\n  /**\r\n   * Gets the numeric spinner currently selected value (as a float).\r\n   * @returns {number} The numeric spinner value.\r\n   */\r\n  public getFloatValue(): number {\r\n    return this.getSpinnerInput().value ? parseFloat(this.getSpinnerInput().value) : this.min;\r\n  }\r\n\r\n  /**\r\n   * Sets the numeric spinner value.\r\n   *\r\n   * @param value The value to set the numeric spinner to. If `value` is greater than [`max`]{@link NumericSpinner.max},\r\n   * this method sets the numeric spinner to its maximum value instead. Likewise, if value is lesser than\r\n   * [`min`]{@link NumericSpinner.min}, the method sets the numeric spinner to its minimum value.\r\n   */\r\n  public setValue(value: number) {\r\n    if (this.max && value > this.max) {\r\n      value = this.max;\r\n    }\r\n    if (value < this.min) {\r\n      value = this.min;\r\n    }\r\n    this.getSpinnerInput().value = value.toString();\r\n    this.onChange(this);\r\n  }\r\n\r\n  /**\r\n   * Gets the element on which the numeric spinner is bound.\r\n   * @returns {HTMLInputElement} The numeric spinner element.\r\n   */\r\n  public build() {\r\n    return this.element;\r\n  }\r\n\r\n  private buildContent() {\r\n    const numericSpinner = $$('div', { className: 'coveo-numeric-spinner' });\r\n    const numberInput = $$('input', {\r\n      className: 'coveo-number-input',\r\n      type: 'text',\r\n      'aria-label': this.label ? l(this.label) : ''\r\n    });\r\n\r\n    const addOn = $$('span', { className: 'coveo-add-on' });\r\n    const arrowUp = $$('div', { className: 'coveo-spinner-up' }, SVGIcons.icons.arrowUp);\r\n    SVGDom.addClassToSVGInContainer(arrowUp.el, 'coveo-spinner-up-svg');\r\n    const arrowDown = $$('div', { className: 'coveo-spinner-down' }, SVGIcons.icons.arrowDown);\r\n    SVGDom.addClassToSVGInContainer(arrowDown.el, 'coveo-spinner-down-svg');\r\n    addOn.append(arrowUp.el);\r\n    addOn.append(arrowDown.el);\r\n    numericSpinner.append(numberInput.el);\r\n    numericSpinner.append(addOn.el);\r\n    this.element = numericSpinner.el;\r\n  }\r\n\r\n  private bindEvents() {\r\n    const up = $$(this.element).find('.coveo-spinner-up');\r\n    $$(up).on('click', () => {\r\n      this.setValue(this.getFloatValue() + 1);\r\n    });\r\n\r\n    const down = $$(this.element).find('.coveo-spinner-down');\r\n    $$(down).on('click', () => {\r\n      this.setValue(this.getFloatValue() - 1);\r\n    });\r\n\r\n    const numberInput = <HTMLInputElement>$$(this.element).find('input');\r\n    $$(numberInput).on('input', () => {\r\n      if (numberInput.value.match(/[0-9]*/)) {\r\n        this.onChange(this);\r\n      }\r\n    });\r\n  }\r\n\r\n  private getSpinnerInput(): HTMLInputElement {\r\n    return <HTMLInputElement>$$(this.element).find('.coveo-number-input');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/FormWidgets/NumericSpinner.ts"],"sourceRoot":""}