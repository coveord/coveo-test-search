{"version":3,"sources":["SmartSnippet.min__5f3280c404a1ee75a113.js","./src/utils/AccessibleModal.ts","./src/ui/SmartSnippet/SmartSnippet.ts","./src/ui/FocusTrap/FocusTrap.ts","./src/misc/AttachShadowPolyfill.ts","./src/ui/SmartSnippet/UserFeedbackBanner.ts","./src/ui/SmartSnippet/HeightLimiter.ts","./src/ui/SmartSnippet/ExplanationModal.ts","./src/ui/FormWidgets/RadioButton.ts"],"names":["webpackJsonpCoveo__temporary","220","module","exports","__webpack_require__","__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","defineProperty","value","className","ownerElement","modalboxModule","options","ModalBox","sizeMod","get","focusTrap","enumerable","configurable","activeModal","modalBox","content","wrapper","element","querySelector","openResult","parameters","isOpen","openModalAndTrap","validation","origin","title","DomUtils","getQuickviewHeader","result","bindings","el","makeAccessible","open","initiallyFocusedElement","document","activeElement","onModalClose","body","overlayClose","FocusTrap","close","setAttribute","headerElement","makeCloseButtonAccessible","closeButton","l","tabIndex","focus","$$","on","KeyboardUtils","keypressAction","KEYBOARD","ENTER","click","disable","contains","AccessibleModal","295","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","create","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","done","then","apply","__generator","verb","v","op","f","TypeError","_","y","label","ops","pop","trys","push","g","sent","throw","return","Symbol","iterator","reasons","analytics","AnalyticsSmartSnippetFeedbackReason","DoesNotAnswer","localeKey","PartiallyAnswers","WasNotAQuestion","Other","hasDetails","BASE_CLASSNAME","SOURCE_CLASSNAME","SmartSnippetClassNames","QUESTION_CLASSNAME","ANSWER_CONTAINER_CLASSNAME","HAS_ANSWER_CLASSNAME","SHADOW_CLASSNAME","CONTENT_CLASSNAME","SOURCE_TITLE_CLASSNAME","SOURCE_URL_CLASSNAME","SmartSnippet","ID","bind","onRootElement","QueryEvents","deferredQuerySuccess","data","handleQuerySuccess","_this","children","filter","HTMLScriptElement","type","toLowerCase","map","innerHTML","join","set","hasAnswer","toggleClass","createDom","appendChild","buildAnswerContainer","feedbackBanner","UserFeedbackBanner","isUseful","sendLikeSmartSnippetAnalytics","sendDislikeSmartSnippetAnalytics","openExplanationModal","build","explanationModal","ExplanationModal","reason","id","replace","onSelect","sendExplanationAnalytics","details","onClosed","sendCloseFeedbackModalAnalytics","searchInterface","modalContainer","modalBoxModule","buildQuestion","buildShadow","buildHeightLimiter","buildSourceContainer","questionContainer","shadowContainer","snippetContainer","shadowLoading","attachShadow","mode","shadow","style","buildStyle","heightLimiter","HeightLimiter","isExpanded","sendExpandSmartSnippetAnalytics","sendCollapseSmartSnippetAnalytics","toggleButton","sourceContainer","styleTag","createElement","getCorrespondingResult","questionAnswer","find","queryController","getLastResults","results","raw","documentId","contentIdKey","contentIdValue","_a","render","lastRenderedResult","ensureDom","innerText","question","renderSnippet","answerSnippet","renderSource","Utils","resolveAfter","onContentHeightChanged","source","empty","renderSourceUrl","clickUri","renderSourceTitle","renderLink","url","text","href","enableAnalyticsOnLink","sendOpenSourceAnalytics","link","sendAnalytics","addEventListener","preventDefault","openLink","ctrlKey","newTab","window","location","sendOpenFeedbackModalAnalytics","explainWhy","usageAnalytics","logCustomEvent","analyticsActionCauseList","likeSmartSnippet","dislikeSmartSnippet","expandSmartSnippet","collapseSmartSnippet","openSmartSnippetSource","openSmartSnippetFeedbackModal","closeSmartSnippetFeedbackModal","sendSmartSnippetReason","doExport","exportGlobally","Component","Initialization","registerAutoCreateComponent","465","container","hiddenElements","enable","sortBy","querySelectorAll","removeEventListener","focusInEvent","focusOutEvent","showHiddenElements","enabled","onFocusIn","onFocusOut","hideAllExcept","removeAttribute","hideElement","getAttribute","hideSiblings","allowedElement","parent","parentElement","without","forEach","elementToHide","getFocusableSibling","previous","elements","focusableElements","currentIndex","indexOf","focusSibling","sibling","focusFirstElement","elementIsBefore","oldElement","newElement","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","onLosingFocus","Defer","defer","focusIsAllowed","elementIsInPage","relatedTarget","target","517","init","iframe","onLoad","iframeBody","shadowRoot","scrolling","contentDocument","margin","autoUpdateHeight","elementToResize","MutationObserver","height","clientHeight","observe","attributes","characterData","childList","subtree","555","582","697","698","UsefulState","ROOT_CLASSNAME","LABEL_CLASSNAME","ICON_CLASSNAME","THANK_YOU_BANNER_CLASSNAME","UserFeedbackBannerClassNames","CONTAINER_CLASSNAME","BUTTONS_CONTAINER_CLASSNAME","YES_BUTTON_CLASSNAME","NO_BUTTON_CLASSNAME","BUTTON_ACTIVE_CLASSNAME","THANK_YOU_BANNER_ACTIVE_CLASSNAME","EXPLAIN_WHY_CLASSNAME","EXPLAIN_WHY_ACTIVE_CLASSNAME","sendUsefulnessAnalytics","onExplainWhyPressed","Unknown","labelId","uniqueId","ariaLive","buildContainer","buildThankYouBanner","ariaLabelledby","buildLabel","buildButtons","thankYouBanner","buildButton","action","requestExplaination","buttonsContainer","yesButton","showThankYouBanner","icon","SVGIcons","icons","checkYes","ariaPressed","ariaDescribedby","noButton","clearSmall","button","Yes","No","addClass","699","BUTTON_CLASSNAME","HeightLimiterClassNames","CONTAINER_ACTIVE_CLASSNAME","CONTAINER_EXPANDED_CLASSNAME","BUTTON_LABEL_CLASSNAME","BUTTON_ICON_CLASSNAME","containerElement","contentElement","heightLimit","onToggle","updateActiveAppearance","ariaLabel","ariaHidden","buttonLabel","buttonIcon","toggle","updateButton","shouldBeActive","contentHeight","updateExpandedAppearance","arrowUp","arrowDown","700","EXPLANATION_SECTION_CLASSNAME","REASONS_CLASSNAME","REASONS_LABEL_CLASSNAME","DETAILS_SECTION_CLASSNAME","DETAILS_TEXTAREA_CLASSNAME","DETAILS_LABEL_CLASSNAME","BUTTONS_SECTION_CLASSNAME","SEND_BUTTON_CLASSNAME","CANCEL_BUTTON_CLASSNAME","DETAILS_ID","ExplanationModalClassNames","shouldCallCloseEvent","modal","selectedReason","detailsTextArea","buildContent","buildExplanationSection","buildButtonsSection","detailsSection","buildDetailsSection","buildReasons","buildSendButton","buildCancelButton","reasonsContainer","buildReasonsLabel","buildReasonRadioButton","select","radioButton","getElement","for","disabled","RadioButton","isSelected","701","94","onChange","name","reset","currentlySelected","getRadio","checked","triggerChange","getValue","getLabel","radioOption","radioInput","labelInput","append"],"mappings":"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","file":"SmartSnippet.min__5f3280c404a1ee75a113.js","sourcesContent":["webpackJsonpCoveo__temporary([19,53],{\n\n/***/ 220:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ExternalModulesShim_1 = __webpack_require__(26);\r\nvar FocusTrap_1 = __webpack_require__(465);\r\nvar Strings_1 = __webpack_require__(6);\r\nvar Dom_1 = __webpack_require__(1);\r\nvar KeyboardUtils_1 = __webpack_require__(25);\r\nvar Core_1 = __webpack_require__(20);\r\nvar AccessibleModal = /** @class */ (function () {\r\n    function AccessibleModal(className, ownerElement, modalboxModule, options) {\r\n        if (modalboxModule === void 0) { modalboxModule = ExternalModulesShim_1.ModalBox; }\r\n        if (options === void 0) { options = {}; }\r\n        this.className = className;\r\n        this.ownerElement = ownerElement;\r\n        this.modalboxModule = modalboxModule;\r\n        this.options = __assign({\r\n            sizeMod: 'big'\r\n        }, options);\r\n    }\r\n    Object.defineProperty(AccessibleModal.prototype, \"isOpen\", {\r\n        get: function () {\r\n            return !!this.focusTrap;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AccessibleModal.prototype, \"element\", {\r\n        get: function () {\r\n            return this.activeModal && this.activeModal.modalBox;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AccessibleModal.prototype, \"content\", {\r\n        get: function () {\r\n            return this.activeModal && this.activeModal.content;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AccessibleModal.prototype, \"wrapper\", {\r\n        get: function () {\r\n            return this.activeModal && this.activeModal.wrapper;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AccessibleModal.prototype, \"headerElement\", {\r\n        get: function () {\r\n            return this.element && this.element.querySelector('.coveo-modal-header h1');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AccessibleModal.prototype.openResult = function (parameters) {\r\n        if (this.isOpen) {\r\n            return;\r\n        }\r\n        this.openModalAndTrap({\r\n            content: parameters.content,\r\n            validation: parameters.validation,\r\n            origin: parameters.origin,\r\n            title: Core_1.DomUtils.getQuickviewHeader(parameters.result, parameters.options, parameters.bindings).el\r\n        });\r\n        this.makeAccessible(parameters.options.title || parameters.result.title);\r\n    };\r\n    AccessibleModal.prototype.open = function (parameters) {\r\n        if (this.isOpen) {\r\n            return;\r\n        }\r\n        this.openModalAndTrap(parameters);\r\n        this.makeAccessible();\r\n    };\r\n    AccessibleModal.prototype.openModalAndTrap = function (parameters) {\r\n        var _this = this;\r\n        this.initiallyFocusedElement = parameters.origin || document.activeElement;\r\n        this.activeModal = this.modalboxModule.open(parameters.content, {\r\n            title: parameters.title,\r\n            className: this.className,\r\n            validation: function () {\r\n                _this.onModalClose();\r\n                return parameters.validation();\r\n            },\r\n            body: this.ownerElement,\r\n            sizeMod: this.options.sizeMod,\r\n            overlayClose: this.options.overlayClose\r\n        });\r\n        this.focusTrap = new FocusTrap_1.FocusTrap(this.element);\r\n    };\r\n    AccessibleModal.prototype.close = function () {\r\n        if (!this.isOpen) {\r\n            return;\r\n        }\r\n        this.activeModal.close();\r\n        this.activeModal = null;\r\n    };\r\n    AccessibleModal.prototype.makeAccessible = function (title) {\r\n        this.element.setAttribute('aria-modal', 'true');\r\n        if (title) {\r\n            this.headerElement.setAttribute('aria-label', title);\r\n        }\r\n        this.makeCloseButtonAccessible();\r\n    };\r\n    AccessibleModal.prototype.makeCloseButtonAccessible = function () {\r\n        var closeButton = this.element.querySelector('.coveo-small-close');\r\n        closeButton.setAttribute('aria-label', Strings_1.l('Close'));\r\n        closeButton.setAttribute('role', 'button');\r\n        closeButton.tabIndex = 0;\r\n        closeButton.focus();\r\n        Dom_1.$$(closeButton).on('keyup', KeyboardUtils_1.KeyboardUtils.keypressAction(KeyboardUtils_1.KEYBOARD.ENTER, function () { return closeButton.click(); }));\r\n    };\r\n    AccessibleModal.prototype.onModalClose = function () {\r\n        this.focusTrap.disable();\r\n        this.focusTrap = null;\r\n        if (this.initiallyFocusedElement && document.body.contains(this.initiallyFocusedElement)) {\r\n            this.initiallyFocusedElement.focus();\r\n        }\r\n    };\r\n    return AccessibleModal;\r\n}());\r\nexports.AccessibleModal = AccessibleModal;\r\n\n\n/***/ }),\n\n/***/ 295:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ExternalModulesShim_1 = __webpack_require__(26);\r\nvar GlobalExports_1 = __webpack_require__(3);\r\nvar Component_1 = __webpack_require__(7);\r\nvar Core_1 = __webpack_require__(20);\r\n__webpack_require__(697);\r\nvar underscore_1 = __webpack_require__(0);\r\nvar UserFeedbackBanner_1 = __webpack_require__(698);\r\nvar AnalyticsActionListMeta_1 = __webpack_require__(10);\r\nvar HeightLimiter_1 = __webpack_require__(699);\r\nvar ExplanationModal_1 = __webpack_require__(700);\r\nvar Strings_1 = __webpack_require__(6);\r\nvar AttachShadowPolyfill_1 = __webpack_require__(517);\r\nvar Utils_1 = __webpack_require__(4);\r\nvar reasons = [\r\n    {\r\n        analytics: AnalyticsActionListMeta_1.AnalyticsSmartSnippetFeedbackReason.DoesNotAnswer,\r\n        localeKey: 'UsefulnessFeedbackDoesNotAnswer'\r\n    },\r\n    {\r\n        analytics: AnalyticsActionListMeta_1.AnalyticsSmartSnippetFeedbackReason.PartiallyAnswers,\r\n        localeKey: 'UsefulnessFeedbackPartiallyAnswers'\r\n    },\r\n    {\r\n        analytics: AnalyticsActionListMeta_1.AnalyticsSmartSnippetFeedbackReason.WasNotAQuestion,\r\n        localeKey: 'UsefulnessFeedbackWasNotAQuestion'\r\n    },\r\n    {\r\n        analytics: AnalyticsActionListMeta_1.AnalyticsSmartSnippetFeedbackReason.Other,\r\n        localeKey: 'Other',\r\n        hasDetails: true\r\n    }\r\n];\r\nvar BASE_CLASSNAME = 'coveo-smart-snippet';\r\nvar QUESTION_CLASSNAME = BASE_CLASSNAME + \"-question\";\r\nvar ANSWER_CONTAINER_CLASSNAME = BASE_CLASSNAME + \"-answer\";\r\nvar HAS_ANSWER_CLASSNAME = BASE_CLASSNAME + \"-has-answer\";\r\nvar SHADOW_CLASSNAME = BASE_CLASSNAME + \"-content\";\r\nvar CONTENT_CLASSNAME = BASE_CLASSNAME + \"-content-wrapper\";\r\nvar SOURCE_CLASSNAME = BASE_CLASSNAME + \"-source\";\r\nvar SOURCE_TITLE_CLASSNAME = SOURCE_CLASSNAME + \"-title\";\r\nvar SOURCE_URL_CLASSNAME = SOURCE_CLASSNAME + \"-url\";\r\nexports.SmartSnippetClassNames = {\r\n    QUESTION_CLASSNAME: QUESTION_CLASSNAME,\r\n    ANSWER_CONTAINER_CLASSNAME: ANSWER_CONTAINER_CLASSNAME,\r\n    HAS_ANSWER_CLASSNAME: HAS_ANSWER_CLASSNAME,\r\n    SHADOW_CLASSNAME: SHADOW_CLASSNAME,\r\n    CONTENT_CLASSNAME: CONTENT_CLASSNAME,\r\n    SOURCE_CLASSNAME: SOURCE_CLASSNAME,\r\n    SOURCE_TITLE_CLASSNAME: SOURCE_TITLE_CLASSNAME,\r\n    SOURCE_URL_CLASSNAME: SOURCE_URL_CLASSNAME\r\n};\r\nvar SmartSnippet = /** @class */ (function (_super) {\r\n    __extends(SmartSnippet, _super);\r\n    function SmartSnippet(element, options, bindings, ModalBox) {\r\n        if (ModalBox === void 0) { ModalBox = ExternalModulesShim_1.ModalBox; }\r\n        var _this = _super.call(this, element, SmartSnippet.ID, bindings) || this;\r\n        _this.element = element;\r\n        _this.options = options;\r\n        _this.ModalBox = ModalBox;\r\n        _this.bind.onRootElement(Core_1.QueryEvents.deferredQuerySuccess, function (data) { return _this.handleQuerySuccess(data); });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SmartSnippet.prototype, \"style\", {\r\n        get: function () {\r\n            return Core_1.$$(this.element)\r\n                .children()\r\n                .filter(function (element) { return element instanceof HTMLScriptElement && element.type.toLowerCase() === 'text/css'; })\r\n                .map(function (element) { return element.innerHTML; })\r\n                .join('\\n');\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SmartSnippet.prototype, \"hasAnswer\", {\r\n        set: function (hasAnswer) {\r\n            Core_1.$$(this.element).toggleClass(HAS_ANSWER_CLASSNAME, hasAnswer);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SmartSnippet.prototype.createDom = function () {\r\n        var _this = this;\r\n        this.element.appendChild(this.buildAnswerContainer());\r\n        this.feedbackBanner = new UserFeedbackBanner_1.UserFeedbackBanner(function (isUseful) { return (isUseful ? _this.sendLikeSmartSnippetAnalytics() : _this.sendDislikeSmartSnippetAnalytics()); }, function () { return _this.openExplanationModal(); });\r\n        this.element.appendChild(this.feedbackBanner.build());\r\n        this.explanationModal = new ExplanationModal_1.ExplanationModal({\r\n            reasons: reasons.map(function (reason) {\r\n                return ({\r\n                    label: Strings_1.l(reason.localeKey),\r\n                    id: reason.analytics.replace(/_/g, '-'),\r\n                    onSelect: function () { return _this.sendExplanationAnalytics(reason.analytics, _this.explanationModal.details); },\r\n                    hasDetails: reason.hasDetails\r\n                });\r\n            }),\r\n            onClosed: function () { return _this.sendCloseFeedbackModalAnalytics(); },\r\n            ownerElement: this.searchInterface.options.modalContainer,\r\n            modalBoxModule: this.ModalBox\r\n        });\r\n    };\r\n    SmartSnippet.prototype.buildAnswerContainer = function () {\r\n        return Core_1.$$('div', {\r\n            className: ANSWER_CONTAINER_CLASSNAME\r\n        }, this.buildQuestion(), this.buildShadow(), this.buildHeightLimiter(), this.buildSourceContainer()).el;\r\n    };\r\n    SmartSnippet.prototype.buildQuestion = function () {\r\n        return (this.questionContainer = Core_1.$$('div', { className: QUESTION_CLASSNAME }).el);\r\n    };\r\n    SmartSnippet.prototype.buildShadow = function () {\r\n        var _this = this;\r\n        this.shadowContainer = Core_1.$$('div', { className: SHADOW_CLASSNAME }).el;\r\n        this.snippetContainer = Core_1.$$('section', { className: CONTENT_CLASSNAME }).el;\r\n        this.shadowLoading = AttachShadowPolyfill_1.attachShadow(this.shadowContainer, { mode: 'open', title: Strings_1.l('AnswerSnippet') }).then(function (shadow) {\r\n            shadow.appendChild(_this.snippetContainer);\r\n            var style = _this.buildStyle();\r\n            if (style) {\r\n                shadow.appendChild(style);\r\n            }\r\n            return shadow;\r\n        });\r\n        return this.shadowContainer;\r\n    };\r\n    SmartSnippet.prototype.buildHeightLimiter = function () {\r\n        var _this = this;\r\n        return (this.heightLimiter = new HeightLimiter_1.HeightLimiter(this.shadowContainer, this.snippetContainer, 400, function (isExpanded) {\r\n            return isExpanded ? _this.sendExpandSmartSnippetAnalytics() : _this.sendCollapseSmartSnippetAnalytics();\r\n        })).toggleButton;\r\n    };\r\n    SmartSnippet.prototype.buildSourceContainer = function () {\r\n        return (this.sourceContainer = Core_1.$$('div', { className: SOURCE_CLASSNAME }).el);\r\n    };\r\n    SmartSnippet.prototype.buildStyle = function () {\r\n        var style = this.style;\r\n        if (!style) {\r\n            return;\r\n        }\r\n        var styleTag = document.createElement('style');\r\n        styleTag.innerHTML = style;\r\n        return styleTag;\r\n    };\r\n    /**\r\n     * @warning This method only works for the demo. In practice, the source of the answer will not always be part of the results.\r\n     */\r\n    SmartSnippet.prototype.getCorrespondingResult = function (questionAnswer) {\r\n        return underscore_1.find(this.queryController.getLastResults().results, function (result) { return result.raw[questionAnswer.documentId.contentIdKey] === questionAnswer.documentId.contentIdValue; });\r\n    };\r\n    SmartSnippet.prototype.handleQuerySuccess = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var questionAnswer;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        questionAnswer = data.results.questionAnswer;\r\n                        if (!questionAnswer) {\r\n                            this.hasAnswer = false;\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this.hasAnswer = true;\r\n                        return [4 /*yield*/, this.render(questionAnswer)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SmartSnippet.prototype.render = function (questionAnswer) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var lastRenderedResult;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.ensureDom();\r\n                        this.questionContainer.innerText = questionAnswer.question;\r\n                        this.renderSnippet(questionAnswer.answerSnippet);\r\n                        lastRenderedResult = this.getCorrespondingResult(questionAnswer);\r\n                        if (lastRenderedResult) {\r\n                            this.renderSource(lastRenderedResult);\r\n                        }\r\n                        return [4 /*yield*/, this.shadowLoading];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, Utils_1.Utils.resolveAfter(0)];\r\n                    case 2:\r\n                        _a.sent(); // `scrollHeight` isn't instantly detected, or at-least not on IE11.\r\n                        this.heightLimiter.onContentHeightChanged();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SmartSnippet.prototype.renderSnippet = function (content) {\r\n        this.snippetContainer.innerHTML = content;\r\n    };\r\n    SmartSnippet.prototype.renderSource = function (source) {\r\n        Core_1.$$(this.sourceContainer).empty();\r\n        this.sourceContainer.appendChild(this.renderSourceUrl(source.clickUri));\r\n        this.sourceContainer.appendChild(this.renderSourceTitle(source.title, source.clickUri));\r\n    };\r\n    SmartSnippet.prototype.renderSourceTitle = function (title, clickUri) {\r\n        return this.renderLink(title, clickUri, SOURCE_TITLE_CLASSNAME);\r\n    };\r\n    SmartSnippet.prototype.renderSourceUrl = function (url) {\r\n        return this.renderLink(url, url, SOURCE_URL_CLASSNAME);\r\n    };\r\n    SmartSnippet.prototype.renderLink = function (text, href, className) {\r\n        var _this = this;\r\n        var element = Core_1.$$('a', { className: className, href: href }).el;\r\n        element.innerText = text;\r\n        this.enableAnalyticsOnLink(element, function () { return _this.sendOpenSourceAnalytics(); });\r\n        return element;\r\n    };\r\n    SmartSnippet.prototype.enableAnalyticsOnLink = function (link, sendAnalytics) {\r\n        var _this = this;\r\n        link.addEventListener('click', function (e) {\r\n            e.preventDefault();\r\n            _this.openLink(link.href, e.ctrlKey, sendAnalytics);\r\n        });\r\n    };\r\n    SmartSnippet.prototype.openLink = function (href, newTab, sendAnalytics) {\r\n        sendAnalytics();\r\n        if (newTab) {\r\n            window.open(href);\r\n        }\r\n        else {\r\n            window.location.href = href;\r\n        }\r\n    };\r\n    SmartSnippet.prototype.openExplanationModal = function () {\r\n        this.sendOpenFeedbackModalAnalytics();\r\n        this.explanationModal.open(this.feedbackBanner.explainWhy);\r\n    };\r\n    SmartSnippet.prototype.sendLikeSmartSnippetAnalytics = function () {\r\n        return this.usageAnalytics.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.likeSmartSnippet, {}, this.element, this.lastRenderedResult);\r\n    };\r\n    SmartSnippet.prototype.sendDislikeSmartSnippetAnalytics = function () {\r\n        return this.usageAnalytics.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.dislikeSmartSnippet, {}, this.element, this.lastRenderedResult);\r\n    };\r\n    SmartSnippet.prototype.sendExpandSmartSnippetAnalytics = function () {\r\n        return this.usageAnalytics.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.expandSmartSnippet, {}, this.element, this.lastRenderedResult);\r\n    };\r\n    SmartSnippet.prototype.sendCollapseSmartSnippetAnalytics = function () {\r\n        return this.usageAnalytics.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.collapseSmartSnippet, {}, this.element, this.lastRenderedResult);\r\n    };\r\n    SmartSnippet.prototype.sendOpenSourceAnalytics = function () {\r\n        return this.usageAnalytics.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.openSmartSnippetSource, {}, this.element, this.lastRenderedResult);\r\n    };\r\n    SmartSnippet.prototype.sendOpenFeedbackModalAnalytics = function () {\r\n        return this.usageAnalytics.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.openSmartSnippetFeedbackModal, {}, this.element, this.lastRenderedResult);\r\n    };\r\n    SmartSnippet.prototype.sendCloseFeedbackModalAnalytics = function () {\r\n        return this.usageAnalytics.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.closeSmartSnippetFeedbackModal, {}, this.element, this.lastRenderedResult);\r\n    };\r\n    SmartSnippet.prototype.sendExplanationAnalytics = function (reason, details) {\r\n        return this.usageAnalytics.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.sendSmartSnippetReason, {\r\n            reason: reason,\r\n            details: details\r\n        }, this.element, this.lastRenderedResult);\r\n    };\r\n    SmartSnippet.ID = 'SmartSnippet';\r\n    SmartSnippet.doExport = function () {\r\n        GlobalExports_1.exportGlobally({\r\n            SmartSnippet: SmartSnippet\r\n        });\r\n    };\r\n    return SmartSnippet;\r\n}(Component_1.Component));\r\nexports.SmartSnippet = SmartSnippet;\r\nCore_1.Initialization.registerAutoCreateComponent(SmartSnippet);\r\n\n\n/***/ }),\n\n/***/ 465:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Defer_1 = __webpack_require__(31);\r\nvar underscore_1 = __webpack_require__(0);\r\nvar Dom_1 = __webpack_require__(1);\r\nvar FocusTrap = /** @class */ (function () {\r\n    function FocusTrap(container) {\r\n        this.container = container;\r\n        this.hiddenElements = [];\r\n        this.enable();\r\n    }\r\n    Object.defineProperty(FocusTrap.prototype, \"focusableElements\", {\r\n        get: function () {\r\n            return underscore_1.sortBy(this.container.querySelectorAll('[tabindex]'), function (element) { return element.tabIndex; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FocusTrap.prototype.disable = function () {\r\n        document.removeEventListener('focusin', this.focusInEvent);\r\n        document.removeEventListener('focusout', this.focusOutEvent);\r\n        this.showHiddenElements();\r\n        this.enabled = false;\r\n    };\r\n    FocusTrap.prototype.enable = function () {\r\n        var _this = this;\r\n        document.addEventListener('focusin', (this.focusInEvent = function (e) { return _this.onFocusIn(e); }));\r\n        document.addEventListener('focusout', (this.focusOutEvent = function (e) { return _this.onFocusOut(e); }));\r\n        this.hideAllExcept(this.container);\r\n        this.enabled = true;\r\n    };\r\n    FocusTrap.prototype.showHiddenElements = function () {\r\n        while (this.hiddenElements.length) {\r\n            this.hiddenElements.pop().removeAttribute('aria-hidden');\r\n        }\r\n    };\r\n    FocusTrap.prototype.hideElement = function (element) {\r\n        if (element.getAttribute('aria-hidden')) {\r\n            return;\r\n        }\r\n        this.hiddenElements.push(element);\r\n        element.setAttribute('aria-hidden', \"\" + true);\r\n    };\r\n    FocusTrap.prototype.hideSiblings = function (allowedElement) {\r\n        var _this = this;\r\n        var parent = allowedElement.parentElement;\r\n        if (parent) {\r\n            underscore_1.without(Dom_1.$$(parent).children(), allowedElement).forEach(function (elementToHide) {\r\n                _this.hideElement(elementToHide);\r\n            });\r\n        }\r\n    };\r\n    FocusTrap.prototype.hideAllExcept = function (allowedElement) {\r\n        this.hideSiblings(allowedElement);\r\n        var parent = allowedElement.parentElement;\r\n        if (parent && parent !== document.body) {\r\n            this.hideAllExcept(parent);\r\n        }\r\n    };\r\n    FocusTrap.prototype.getFocusableSibling = function (element, previous) {\r\n        if (previous === void 0) { previous = false; }\r\n        var elements = this.focusableElements;\r\n        var currentIndex = elements.indexOf(element);\r\n        if (currentIndex === -1) {\r\n            return null;\r\n        }\r\n        return elements[(currentIndex + (previous ? -1 : 1) + elements.length) % elements.length];\r\n    };\r\n    FocusTrap.prototype.focusSibling = function (element, previous) {\r\n        if (previous === void 0) { previous = false; }\r\n        var sibling = this.getFocusableSibling(element, previous);\r\n        if (sibling) {\r\n            sibling.focus();\r\n        }\r\n    };\r\n    FocusTrap.prototype.focusFirstElement = function () {\r\n        var elements = this.focusableElements;\r\n        if (elements.length) {\r\n            elements[0].focus();\r\n        }\r\n    };\r\n    FocusTrap.prototype.elementIsBefore = function (oldElement, newElement) {\r\n        if (!newElement) {\r\n            return false;\r\n        }\r\n        return oldElement.compareDocumentPosition(newElement) === Node.DOCUMENT_POSITION_PRECEDING;\r\n    };\r\n    FocusTrap.prototype.onLosingFocus = function (oldElement, newElement) {\r\n        var _this = this;\r\n        Defer_1.Defer.defer(function () {\r\n            if (!_this.enabled) {\r\n                return;\r\n            }\r\n            _this.enabled = false;\r\n            if (oldElement && _this.focusIsAllowed(oldElement)) {\r\n                _this.focusSibling(oldElement, _this.elementIsBefore(oldElement, newElement));\r\n            }\r\n            else {\r\n                _this.focusFirstElement();\r\n            }\r\n            _this.enabled = true;\r\n        });\r\n    };\r\n    FocusTrap.prototype.focusIsAllowed = function (element) {\r\n        return this.container.contains(element);\r\n    };\r\n    FocusTrap.prototype.elementIsInPage = function (element) {\r\n        return element && element !== document.body.parentElement;\r\n    };\r\n    FocusTrap.prototype.onFocusIn = function (e) {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        var oldElement = e.relatedTarget;\r\n        var handledByFocusOut = this.elementIsInPage(oldElement);\r\n        if (handledByFocusOut) {\r\n            return;\r\n        }\r\n        var newElement = e.target;\r\n        if (!this.elementIsInPage(newElement)) {\r\n            return;\r\n        }\r\n        if (!this.focusIsAllowed(newElement)) {\r\n            this.onLosingFocus(null, newElement);\r\n        }\r\n    };\r\n    FocusTrap.prototype.onFocusOut = function (e) {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        var newElement = e.relatedTarget;\r\n        if (!this.elementIsInPage(newElement)) {\r\n            return;\r\n        }\r\n        if (!newElement || !this.focusIsAllowed(newElement)) {\r\n            this.onLosingFocus(e.target, newElement);\r\n        }\r\n    };\r\n    return FocusTrap;\r\n}());\r\nexports.FocusTrap = FocusTrap;\r\n\n\n/***/ }),\n\n/***/ 517:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Dom_1 = __webpack_require__(1);\r\n__webpack_require__(582);\r\nfunction attachShadow(element, init) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var iframe, onLoad, iframeBody, shadowRoot;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    iframe = Dom_1.$$('iframe', { className: 'coveo-shadow-iframe', scrolling: 'no', title: init.title }).el;\r\n                    onLoad = new Promise(function (resolve) { return iframe.addEventListener('load', function () { return resolve(); }); });\r\n                    element.appendChild(iframe);\r\n                    return [4 /*yield*/, onLoad];\r\n                case 1:\r\n                    _a.sent();\r\n                    iframeBody = iframe.contentDocument.body;\r\n                    iframeBody.style.margin = '0';\r\n                    shadowRoot = Dom_1.$$('div', { style: 'overflow: auto;' }).el;\r\n                    iframeBody.appendChild(shadowRoot);\r\n                    autoUpdateHeight(iframe, shadowRoot);\r\n                    if (init.mode === 'open') {\r\n                        Object.defineProperty(element, 'shadowRoot', { get: function () { return shadowRoot; } });\r\n                    }\r\n                    return [2 /*return*/, shadowRoot];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.attachShadow = attachShadow;\r\nfunction autoUpdateHeight(elementToResize, content) {\r\n    var heightObserver = new MutationObserver(function () {\r\n        elementToResize.style.height = content.clientHeight + \"px\";\r\n    });\r\n    heightObserver.observe(content, {\r\n        attributes: true,\r\n        characterData: true,\r\n        childList: true,\r\n        subtree: true\r\n    });\r\n}\r\n\n\n/***/ }),\n\n/***/ 555:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 582:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 697:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 698:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Dom_1 = __webpack_require__(1);\r\nvar Strings_1 = __webpack_require__(6);\r\nvar SVGIcons_1 = __webpack_require__(12);\r\nvar underscore_1 = __webpack_require__(0);\r\nvar ROOT_CLASSNAME = 'coveo-user-feedback-banner';\r\nvar CONTAINER_CLASSNAME = ROOT_CLASSNAME + \"-container\";\r\nvar LABEL_CLASSNAME = ROOT_CLASSNAME + \"-label\";\r\nvar BUTTONS_CONTAINER_CLASSNAME = ROOT_CLASSNAME + \"-buttons\";\r\nvar YES_BUTTON_CLASSNAME = ROOT_CLASSNAME + \"-yes-button\";\r\nvar NO_BUTTON_CLASSNAME = ROOT_CLASSNAME + \"-no-button\";\r\nvar BUTTON_ACTIVE_CLASSNAME = ROOT_CLASSNAME + \"-button-active\";\r\nvar THANK_YOU_BANNER_CLASSNAME = ROOT_CLASSNAME + \"-thanks\";\r\nvar THANK_YOU_BANNER_ACTIVE_CLASSNAME = THANK_YOU_BANNER_CLASSNAME + \"-active\";\r\nvar ICON_CLASSNAME = THANK_YOU_BANNER_CLASSNAME + \"-icon\";\r\nvar EXPLAIN_WHY_CLASSNAME = ROOT_CLASSNAME + \"-explain-why\";\r\nvar EXPLAIN_WHY_ACTIVE_CLASSNAME = EXPLAIN_WHY_CLASSNAME + \"-active\";\r\nvar UsefulState;\r\n(function (UsefulState) {\r\n    UsefulState[UsefulState[\"Unknown\"] = 0] = \"Unknown\";\r\n    UsefulState[UsefulState[\"Yes\"] = 1] = \"Yes\";\r\n    UsefulState[UsefulState[\"No\"] = 2] = \"No\";\r\n})(UsefulState || (UsefulState = {}));\r\nexports.UserFeedbackBannerClassNames = {\r\n    ROOT_CLASSNAME: ROOT_CLASSNAME,\r\n    CONTAINER_CLASSNAME: CONTAINER_CLASSNAME,\r\n    LABEL_CLASSNAME: LABEL_CLASSNAME,\r\n    BUTTONS_CONTAINER_CLASSNAME: BUTTONS_CONTAINER_CLASSNAME,\r\n    YES_BUTTON_CLASSNAME: YES_BUTTON_CLASSNAME,\r\n    NO_BUTTON_CLASSNAME: NO_BUTTON_CLASSNAME,\r\n    BUTTON_ACTIVE_CLASSNAME: BUTTON_ACTIVE_CLASSNAME,\r\n    THANK_YOU_BANNER_CLASSNAME: THANK_YOU_BANNER_CLASSNAME,\r\n    THANK_YOU_BANNER_ACTIVE_CLASSNAME: THANK_YOU_BANNER_ACTIVE_CLASSNAME,\r\n    ICON_CLASSNAME: ICON_CLASSNAME,\r\n    EXPLAIN_WHY_CLASSNAME: EXPLAIN_WHY_CLASSNAME,\r\n    EXPLAIN_WHY_ACTIVE_CLASSNAME: EXPLAIN_WHY_ACTIVE_CLASSNAME\r\n};\r\nvar UserFeedbackBanner = /** @class */ (function () {\r\n    function UserFeedbackBanner(sendUsefulnessAnalytics, onExplainWhyPressed) {\r\n        this.sendUsefulnessAnalytics = sendUsefulnessAnalytics;\r\n        this.onExplainWhyPressed = onExplainWhyPressed;\r\n        this.isUseful = UsefulState.Unknown;\r\n        this.labelId = underscore_1.uniqueId(LABEL_CLASSNAME);\r\n    }\r\n    UserFeedbackBanner.prototype.build = function () {\r\n        return Dom_1.$$('div', {\r\n            className: ROOT_CLASSNAME,\r\n            ariaLive: 'polite'\r\n        }, this.buildContainer(), this.buildThankYouBanner()).el;\r\n    };\r\n    UserFeedbackBanner.prototype.buildContainer = function () {\r\n        return Dom_1.$$('div', {\r\n            className: CONTAINER_CLASSNAME,\r\n            ariaLabelledby: this.labelId\r\n        }, this.buildLabel(), this.buildButtons()).el;\r\n    };\r\n    UserFeedbackBanner.prototype.buildLabel = function () {\r\n        return Dom_1.$$('span', { className: LABEL_CLASSNAME, id: this.labelId }, Strings_1.l('UsefulnessFeedbackRequest')).el;\r\n    };\r\n    UserFeedbackBanner.prototype.buildThankYouBanner = function () {\r\n        var _this = this;\r\n        this.thankYouBanner = Dom_1.$$('div', { className: THANK_YOU_BANNER_CLASSNAME }).el;\r\n        var text = Dom_1.$$('span', {}, Strings_1.l('UsefulnessFeedbackThankYou')).el;\r\n        this.thankYouBanner.appendChild(text);\r\n        this.explainWhy = this.buildButton({\r\n            text: Strings_1.l('UsefulnessFeedbackExplainWhy'),\r\n            className: EXPLAIN_WHY_CLASSNAME,\r\n            action: function () { return _this.requestExplaination(); }\r\n        });\r\n        this.thankYouBanner.appendChild(this.explainWhy);\r\n        return this.thankYouBanner;\r\n    };\r\n    UserFeedbackBanner.prototype.buildButtons = function () {\r\n        var _this = this;\r\n        var buttonsContainer = Dom_1.$$('div', { className: BUTTONS_CONTAINER_CLASSNAME }).el;\r\n        this.yesButton = this.buildButton({\r\n            text: Strings_1.l('Yes'),\r\n            className: YES_BUTTON_CLASSNAME,\r\n            action: function () { return _this.showThankYouBanner(true); },\r\n            icon: {\r\n                className: ICON_CLASSNAME,\r\n                content: SVGIcons_1.SVGIcons.icons.checkYes\r\n            },\r\n            attributes: {\r\n                ariaPressed: false,\r\n                ariaDescribedby: this.labelId\r\n            }\r\n        });\r\n        this.yesButton.setAttribute('aria-pressed', 'false');\r\n        buttonsContainer.appendChild(this.yesButton);\r\n        this.noButton = this.buildButton({\r\n            text: Strings_1.l('No'),\r\n            className: NO_BUTTON_CLASSNAME,\r\n            action: function () { return _this.showThankYouBanner(false); },\r\n            icon: {\r\n                className: ICON_CLASSNAME,\r\n                content: SVGIcons_1.SVGIcons.icons.clearSmall\r\n            },\r\n            attributes: {\r\n                ariaPressed: false,\r\n                ariaDescribedby: this.labelId\r\n            }\r\n        });\r\n        buttonsContainer.appendChild(this.noButton);\r\n        return buttonsContainer;\r\n    };\r\n    UserFeedbackBanner.prototype.buildButton = function (options) {\r\n        var button = Dom_1.$$('button', __assign({}, (options.attributes || {}), { className: options.className })).el;\r\n        if (options.icon) {\r\n            var icon = Dom_1.$$('span', { className: options.icon.className }, options.icon.content).el;\r\n            button.appendChild(icon);\r\n            var text = Dom_1.$$('span', {}, options.text).el;\r\n            button.appendChild(text);\r\n        }\r\n        else {\r\n            button.innerText = options.text;\r\n        }\r\n        button.addEventListener('click', function () { return options.action(); });\r\n        return button;\r\n    };\r\n    UserFeedbackBanner.prototype.showThankYouBanner = function (isUseful) {\r\n        if (this.isUseful !== UsefulState.Unknown && isUseful === (this.isUseful === UsefulState.Yes)) {\r\n            return;\r\n        }\r\n        this.isUseful = isUseful ? UsefulState.Yes : UsefulState.No;\r\n        Dom_1.$$(this.yesButton).toggleClass(BUTTON_ACTIVE_CLASSNAME, isUseful);\r\n        Dom_1.$$(this.yesButton).setAttribute('aria-pressed', \"\" + isUseful);\r\n        Dom_1.$$(this.noButton).toggleClass(BUTTON_ACTIVE_CLASSNAME, !isUseful);\r\n        Dom_1.$$(this.noButton).setAttribute('aria-pressed', \"\" + !isUseful);\r\n        Dom_1.$$(this.thankYouBanner).addClass(THANK_YOU_BANNER_ACTIVE_CLASSNAME);\r\n        Dom_1.$$(this.explainWhy).toggleClass(EXPLAIN_WHY_ACTIVE_CLASSNAME, !isUseful);\r\n        this.sendUsefulnessAnalytics(isUseful);\r\n    };\r\n    UserFeedbackBanner.prototype.requestExplaination = function () {\r\n        this.onExplainWhyPressed();\r\n    };\r\n    return UserFeedbackBanner;\r\n}());\r\nexports.UserFeedbackBanner = UserFeedbackBanner;\r\n\n\n/***/ }),\n\n/***/ 699:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Dom_1 = __webpack_require__(1);\r\nvar SVGIcons_1 = __webpack_require__(12);\r\nvar Strings_1 = __webpack_require__(6);\r\nvar BASE_CLASSNAME = 'coveo-height-limiter';\r\nvar CONTAINER_ACTIVE_CLASSNAME = BASE_CLASSNAME + \"-container-active\";\r\nvar CONTAINER_EXPANDED_CLASSNAME = BASE_CLASSNAME + \"-container-expanded\";\r\nvar BUTTON_CLASSNAME = BASE_CLASSNAME + \"-button\";\r\nvar BUTTON_LABEL_CLASSNAME = BUTTON_CLASSNAME + \"-label\";\r\nvar BUTTON_ICON_CLASSNAME = BUTTON_CLASSNAME + \"-icon\";\r\nvar BUTTON_ACTIVE_CLASSNAME = BUTTON_CLASSNAME + \"-active\";\r\nexports.HeightLimiterClassNames = {\r\n    CONTAINER_ACTIVE_CLASSNAME: CONTAINER_ACTIVE_CLASSNAME,\r\n    CONTAINER_EXPANDED_CLASSNAME: CONTAINER_EXPANDED_CLASSNAME,\r\n    BUTTON_CLASSNAME: BUTTON_CLASSNAME,\r\n    BUTTON_LABEL_CLASSNAME: BUTTON_LABEL_CLASSNAME,\r\n    BUTTON_ICON_CLASSNAME: BUTTON_ICON_CLASSNAME,\r\n    BUTTON_ACTIVE_CLASSNAME: BUTTON_ACTIVE_CLASSNAME\r\n};\r\nvar HeightLimiter = /** @class */ (function () {\r\n    function HeightLimiter(containerElement, contentElement, heightLimit, onToggle) {\r\n        this.containerElement = containerElement;\r\n        this.contentElement = contentElement;\r\n        this.heightLimit = heightLimit;\r\n        this.onToggle = onToggle;\r\n        this.isExpanded = false;\r\n        this.buildButton();\r\n        this.updateActiveAppearance();\r\n    }\r\n    Object.defineProperty(HeightLimiter.prototype, \"toggleButton\", {\r\n        get: function () {\r\n            return this.button;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HeightLimiter.prototype, \"height\", {\r\n        set: function (height) {\r\n            this.containerElement.style.height = height + \"px\";\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HeightLimiter.prototype, \"contentHeight\", {\r\n        get: function () {\r\n            return this.contentElement.clientHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    HeightLimiter.prototype.onContentHeightChanged = function () {\r\n        this.updateActiveAppearance();\r\n    };\r\n    HeightLimiter.prototype.buildButton = function () {\r\n        var _this = this;\r\n        this.button = Dom_1.$$('button', { className: BUTTON_CLASSNAME, ariaLabel: Strings_1.l('ShowMore'), ariaPressed: 'false', ariaHidden: 'true' }, (this.buttonLabel = Dom_1.$$('span', { className: BUTTON_LABEL_CLASSNAME }).el), (this.buttonIcon = Dom_1.$$('span', { className: BUTTON_ICON_CLASSNAME }).el)).el;\r\n        this.button.addEventListener('click', function () { return _this.toggle(); });\r\n        this.updateButton();\r\n        return this.button;\r\n    };\r\n    HeightLimiter.prototype.updateActiveAppearance = function () {\r\n        var shouldBeActive = this.contentHeight > this.heightLimit;\r\n        Dom_1.$$(this.containerElement).toggleClass(CONTAINER_ACTIVE_CLASSNAME, shouldBeActive);\r\n        Dom_1.$$(this.button).toggleClass(BUTTON_ACTIVE_CLASSNAME, shouldBeActive);\r\n        if (shouldBeActive) {\r\n            this.updateExpandedAppearance();\r\n        }\r\n        else {\r\n            this.isExpanded = false;\r\n            this.updateExpandedAppearance();\r\n            this.containerElement.style.height = '';\r\n        }\r\n    };\r\n    HeightLimiter.prototype.updateButton = function () {\r\n        this.buttonLabel.innerText = this.isExpanded ? Strings_1.l('ShowLess') : Strings_1.l('ShowMore');\r\n        this.button.setAttribute('aria-pressed', \"\" + this.isExpanded);\r\n        this.buttonIcon.innerHTML = this.isExpanded ? SVGIcons_1.SVGIcons.icons.arrowUp : SVGIcons_1.SVGIcons.icons.arrowDown;\r\n    };\r\n    HeightLimiter.prototype.updateExpandedAppearance = function () {\r\n        this.updateButton();\r\n        Dom_1.$$(this.containerElement).toggleClass(CONTAINER_EXPANDED_CLASSNAME, this.isExpanded);\r\n        this.height = this.isExpanded ? this.contentHeight : this.heightLimit;\r\n    };\r\n    HeightLimiter.prototype.toggle = function () {\r\n        this.isExpanded = !this.isExpanded;\r\n        this.updateExpandedAppearance();\r\n        if (this.onToggle) {\r\n            this.onToggle(this.isExpanded);\r\n        }\r\n    };\r\n    return HeightLimiter;\r\n}());\r\nexports.HeightLimiter = HeightLimiter;\r\n\n\n/***/ }),\n\n/***/ 700:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar AccessibleModal_1 = __webpack_require__(220);\r\nvar Strings_1 = __webpack_require__(6);\r\nvar Dom_1 = __webpack_require__(1);\r\nvar RadioButton_1 = __webpack_require__(94);\r\n__webpack_require__(701);\r\nvar ROOT_CLASSNAME = 'coveo-user-explanation-modal';\r\nvar CONTENT_CLASSNAME = ROOT_CLASSNAME + \"-content\";\r\nvar EXPLANATION_SECTION_CLASSNAME = ROOT_CLASSNAME + \"-explanation-section\";\r\nvar REASONS_CLASSNAME = ROOT_CLASSNAME + \"-explanations\";\r\nvar REASONS_LABEL_CLASSNAME = REASONS_CLASSNAME + \"-label\";\r\nvar DETAILS_SECTION_CLASSNAME = ROOT_CLASSNAME + \"-details\";\r\nvar DETAILS_TEXTAREA_CLASSNAME = DETAILS_SECTION_CLASSNAME + \"-textarea\";\r\nvar DETAILS_LABEL_CLASSNAME = DETAILS_SECTION_CLASSNAME + \"-label\";\r\nvar BUTTONS_SECTION_CLASSNAME = ROOT_CLASSNAME + \"-buttons-section\";\r\nvar SEND_BUTTON_CLASSNAME = ROOT_CLASSNAME + \"-send-button\";\r\nvar CANCEL_BUTTON_CLASSNAME = ROOT_CLASSNAME + \"-cancel-button\";\r\nvar DETAILS_ID = DETAILS_SECTION_CLASSNAME;\r\nexports.ExplanationModalClassNames = {\r\n    ROOT_CLASSNAME: ROOT_CLASSNAME,\r\n    CONTENT_CLASSNAME: CONTENT_CLASSNAME,\r\n    EXPLANATION_SECTION_CLASSNAME: EXPLANATION_SECTION_CLASSNAME,\r\n    REASONS_CLASSNAME: REASONS_CLASSNAME,\r\n    REASONS_LABEL_CLASSNAME: REASONS_LABEL_CLASSNAME,\r\n    DETAILS_SECTION_CLASSNAME: DETAILS_SECTION_CLASSNAME,\r\n    DETAILS_TEXTAREA_CLASSNAME: DETAILS_TEXTAREA_CLASSNAME,\r\n    DETAILS_LABEL_CLASSNAME: DETAILS_LABEL_CLASSNAME,\r\n    BUTTONS_SECTION_CLASSNAME: BUTTONS_SECTION_CLASSNAME,\r\n    SEND_BUTTON_CLASSNAME: SEND_BUTTON_CLASSNAME,\r\n    CANCEL_BUTTON_CLASSNAME: CANCEL_BUTTON_CLASSNAME\r\n};\r\nvar ExplanationModal = /** @class */ (function () {\r\n    function ExplanationModal(options) {\r\n        this.options = options;\r\n        this.shouldCallCloseEvent = false;\r\n        this.modal = new AccessibleModal_1.AccessibleModal(ROOT_CLASSNAME, this.options.ownerElement, this.options.modalBoxModule);\r\n    }\r\n    Object.defineProperty(ExplanationModal.prototype, \"details\", {\r\n        get: function () {\r\n            if (!this.selectedReason || !this.selectedReason.hasDetails) {\r\n                return null;\r\n            }\r\n            return this.detailsTextArea.value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ExplanationModal.prototype.open = function (origin) {\r\n        var _this = this;\r\n        this.modal.open({\r\n            origin: origin,\r\n            title: Strings_1.l('UsefulnessFeedbackExplainWhyImperative'),\r\n            content: this.buildContent(),\r\n            validation: function () {\r\n                if (_this.shouldCallCloseEvent) {\r\n                    _this.options.onClosed();\r\n                    _this.shouldCallCloseEvent = false;\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n        this.shouldCallCloseEvent = true;\r\n    };\r\n    ExplanationModal.prototype.buildContent = function () {\r\n        return Dom_1.$$('div', {\r\n            className: CONTENT_CLASSNAME\r\n        }, this.buildExplanationSection(), this.buildButtonsSection()).el;\r\n    };\r\n    ExplanationModal.prototype.buildExplanationSection = function () {\r\n        var detailsSection = this.buildDetailsSection();\r\n        return Dom_1.$$('div', {\r\n            className: EXPLANATION_SECTION_CLASSNAME\r\n        }, this.buildReasons(), detailsSection).el;\r\n    };\r\n    ExplanationModal.prototype.buildButtonsSection = function () {\r\n        return Dom_1.$$('div', {\r\n            className: BUTTONS_SECTION_CLASSNAME\r\n        }, this.buildSendButton(), this.buildCancelButton());\r\n    };\r\n    ExplanationModal.prototype.buildReasons = function () {\r\n        var _this = this;\r\n        var reasonsContainer = Dom_1.$$('fieldset', { className: REASONS_CLASSNAME }, this.buildReasonsLabel()).el;\r\n        this.reasons = this.options.reasons.map(function (reason) { return _this.buildReasonRadioButton(reason); });\r\n        this.reasons[0].select();\r\n        this.reasons.forEach(function (radioButton) { return reasonsContainer.appendChild(radioButton.getElement()); });\r\n        return reasonsContainer;\r\n    };\r\n    ExplanationModal.prototype.buildReasonsLabel = function () {\r\n        return Dom_1.$$('legend', { className: REASONS_LABEL_CLASSNAME }, Strings_1.l('UsefulnessFeedbackReason')).el;\r\n    };\r\n    ExplanationModal.prototype.buildDetailsSection = function () {\r\n        return Dom_1.$$('div', { className: DETAILS_SECTION_CLASSNAME }, Dom_1.$$('label', { className: DETAILS_LABEL_CLASSNAME, for: DETAILS_ID }, Strings_1.l('Details')).el, (this.detailsTextArea = Dom_1.$$('textarea', { className: DETAILS_TEXTAREA_CLASSNAME, id: DETAILS_ID, disabled: true })\r\n            .el));\r\n    };\r\n    ExplanationModal.prototype.buildSendButton = function () {\r\n        var _this = this;\r\n        var button = Dom_1.$$('button', { className: SEND_BUTTON_CLASSNAME }, Strings_1.l('Send'));\r\n        button.on('click', function () {\r\n            _this.selectedReason.onSelect();\r\n            _this.shouldCallCloseEvent = false;\r\n            _this.modal.close();\r\n        });\r\n        return button.el;\r\n    };\r\n    ExplanationModal.prototype.buildCancelButton = function () {\r\n        var _this = this;\r\n        var button = Dom_1.$$('button', { className: CANCEL_BUTTON_CLASSNAME }, Strings_1.l('Cancel'));\r\n        button.on('click', function () { return _this.modal.close(); });\r\n        return button.el;\r\n    };\r\n    ExplanationModal.prototype.buildReasonRadioButton = function (reason) {\r\n        var _this = this;\r\n        return new RadioButton_1.RadioButton(function (radioButton) {\r\n            if (!radioButton.isSelected()) {\r\n                return;\r\n            }\r\n            _this.detailsTextArea.disabled = !reason.hasDetails;\r\n            _this.selectedReason = reason;\r\n        }, reason.label, 'reason', \"coveo-reason-\" + reason.id);\r\n    };\r\n    return ExplanationModal;\r\n}());\r\nexports.ExplanationModal = ExplanationModal;\r\n\n\n/***/ }),\n\n/***/ 701:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Dom_1 = __webpack_require__(1);\r\n__webpack_require__(555);\r\nvar GlobalExports_1 = __webpack_require__(3);\r\n/**\r\n * A radio button widget with standard styling.\r\n */\r\nvar RadioButton = /** @class */ (function () {\r\n    /**\r\n     * Creates a new `RadioButton`.\r\n     * @param onChange The function to call when the radio button value changes. This function takes the current\r\n     * `RadioButton` instance as an argument.\r\n     * @param label The label to display next to the radio button.\r\n     * @param name The value to set the `input` HTMLElement `name` attribute to.\r\n     */\r\n    function RadioButton(onChange, label, name, id) {\r\n        if (onChange === void 0) { onChange = function (radioButton) { }; }\r\n        if (id === void 0) { id = label; }\r\n        this.onChange = onChange;\r\n        this.label = label;\r\n        this.name = name;\r\n        this.id = id;\r\n        this.buildContent();\r\n    }\r\n    RadioButton.doExport = function () {\r\n        GlobalExports_1.exportGlobally({\r\n            RadioButton: RadioButton\r\n        });\r\n    };\r\n    /**\r\n     * Resets the radio button.\r\n     */\r\n    RadioButton.prototype.reset = function () {\r\n        var currentlySelected = this.isSelected();\r\n        this.getRadio().checked = false;\r\n        if (currentlySelected) {\r\n            this.onChange(this);\r\n        }\r\n    };\r\n    /**\r\n     * Select the radio button\r\n     * @param triggerChange will trigger change event if specified and the radio button is not already selected\r\n     */\r\n    RadioButton.prototype.select = function (triggerChange) {\r\n        if (triggerChange === void 0) { triggerChange = true; }\r\n        var currentlySelected = this.isSelected();\r\n        this.getRadio().checked = true;\r\n        if (!currentlySelected && triggerChange) {\r\n            this.onChange(this);\r\n        }\r\n    };\r\n    /**\r\n     * Gets the element on which the radio button is bound.\r\n     * @returns {HTMLElement} The radio button element.\r\n     */\r\n    RadioButton.prototype.build = function () {\r\n        return this.element;\r\n    };\r\n    /**\r\n     * Gets the element on which the radio button is bound.\r\n     * @returns {HTMLElement} The radio button element.\r\n     */\r\n    RadioButton.prototype.getElement = function () {\r\n        return this.element;\r\n    };\r\n    RadioButton.prototype.getValue = function () {\r\n        return this.label;\r\n    };\r\n    /**\r\n     * Indicates whether the radio button is selected.\r\n     * @returns {boolean} `true` if the radio button is selected, `false` otherwise.\r\n     */\r\n    RadioButton.prototype.isSelected = function () {\r\n        return this.getRadio().checked;\r\n    };\r\n    /**\r\n     * Gets the `input` element (the radio button itself).\r\n     * @returns {HTMLInputElement} The `input` element.\r\n     */\r\n    RadioButton.prototype.getRadio = function () {\r\n        return Dom_1.$$(this.element).find('input');\r\n    };\r\n    /**\r\n     * Gets the radio button [`label`]{@link RadioButton.label} element.\r\n     * @returns {HTMLLabelElement} The `label` element.\r\n     */\r\n    RadioButton.prototype.getLabel = function () {\r\n        return Dom_1.$$(this.element).find('label');\r\n    };\r\n    RadioButton.prototype.buildContent = function () {\r\n        var _this = this;\r\n        var radioOption = Dom_1.$$('div', { className: 'coveo-radio' });\r\n        var radioInput = Dom_1.$$('input', { type: 'radio', name: this.name, id: this.id });\r\n        var labelInput = Dom_1.$$('label', { className: 'coveo-radio-input-label', for: this.id });\r\n        labelInput.text(this.label);\r\n        radioInput.on('change', function () {\r\n            _this.onChange(_this);\r\n        });\r\n        radioOption.append(radioInput.el);\r\n        radioOption.append(labelInput.el);\r\n        this.element = radioOption.el;\r\n    };\r\n    return RadioButton;\r\n}());\r\nexports.RadioButton = RadioButton;\r\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// SmartSnippet.min__5f3280c404a1ee75a113.js","import { ModalBox as ModalBoxModule } from '../ExternalModulesShim';\r\nimport { FocusTrap } from '../ui/FocusTrap/FocusTrap';\r\nimport { l } from '../strings/Strings';\r\nimport { $$ } from './Dom';\r\nimport { KeyboardUtils, KEYBOARD } from './KeyboardUtils';\r\nimport { IQuickViewHeaderOptions } from './DomUtils';\r\nimport { IQueryResult } from '../rest/QueryResult';\r\nimport { IComponentBindings } from '../ui/Base/ComponentBindings';\r\nimport { DomUtils } from '../Core';\r\n\r\nexport interface IAccessibleModalOptions {\r\n  overlayClose?: boolean;\r\n  sizeMod: 'small' | 'normal' | 'big';\r\n}\r\n\r\nexport interface IAccessibleModalOpenParameters {\r\n  content: HTMLElement;\r\n  validation: () => boolean;\r\n  origin: HTMLElement;\r\n}\r\n\r\nexport interface IAccessibleModalOpenResultParameters extends IAccessibleModalOpenParameters {\r\n  result: IQueryResult;\r\n  options: IQuickViewHeaderOptions;\r\n  bindings: IComponentBindings;\r\n}\r\n\r\nexport interface IAccessibleModalOpenNormalParameters extends IAccessibleModalOpenParameters {\r\n  title: HTMLElement;\r\n}\r\n\r\nexport class AccessibleModal {\r\n  private focusTrap: FocusTrap;\r\n  private activeModal: Coveo.ModalBox.ModalBox;\r\n  private options: IAccessibleModalOptions;\r\n  private initiallyFocusedElement: HTMLElement;\r\n\r\n  public get isOpen() {\r\n    return !!this.focusTrap;\r\n  }\r\n\r\n  public get element() {\r\n    return this.activeModal && this.activeModal.modalBox;\r\n  }\r\n\r\n  public get content() {\r\n    return this.activeModal && this.activeModal.content;\r\n  }\r\n\r\n  public get wrapper() {\r\n    return this.activeModal && this.activeModal.wrapper;\r\n  }\r\n\r\n  private get headerElement() {\r\n    return this.element && this.element.querySelector<HTMLElement>('.coveo-modal-header h1');\r\n  }\r\n\r\n  constructor(\r\n    private className: string,\r\n    private ownerElement: HTMLElement,\r\n    private modalboxModule: Coveo.ModalBox.ModalBox = ModalBoxModule,\r\n    options: Partial<IAccessibleModalOptions> = {}\r\n  ) {\r\n    this.options = {\r\n      ...{\r\n        sizeMod: 'big'\r\n      },\r\n      ...options\r\n    };\r\n  }\r\n\r\n  public openResult(parameters: IAccessibleModalOpenResultParameters) {\r\n    if (this.isOpen) {\r\n      return;\r\n    }\r\n    this.openModalAndTrap({\r\n      content: parameters.content,\r\n      validation: parameters.validation,\r\n      origin: parameters.origin,\r\n      title: DomUtils.getQuickviewHeader(parameters.result, parameters.options, parameters.bindings).el\r\n    });\r\n    this.makeAccessible(parameters.options.title || parameters.result.title);\r\n  }\r\n\r\n  public open(parameters: IAccessibleModalOpenNormalParameters) {\r\n    if (this.isOpen) {\r\n      return;\r\n    }\r\n    this.openModalAndTrap(parameters);\r\n    this.makeAccessible();\r\n  }\r\n\r\n  private openModalAndTrap(parameters: IAccessibleModalOpenNormalParameters) {\r\n    this.initiallyFocusedElement = parameters.origin || (document.activeElement as HTMLElement);\r\n    this.activeModal = this.modalboxModule.open(parameters.content, {\r\n      title: parameters.title,\r\n      className: this.className,\r\n      validation: () => {\r\n        this.onModalClose();\r\n        return parameters.validation();\r\n      },\r\n      body: this.ownerElement,\r\n      sizeMod: this.options.sizeMod,\r\n      overlayClose: this.options.overlayClose\r\n    });\r\n    this.focusTrap = new FocusTrap(this.element);\r\n  }\r\n\r\n  public close() {\r\n    if (!this.isOpen) {\r\n      return;\r\n    }\r\n    this.activeModal.close();\r\n    this.activeModal = null;\r\n  }\r\n\r\n  private makeAccessible(title?: string) {\r\n    this.element.setAttribute('aria-modal', 'true');\r\n    if (title) {\r\n      this.headerElement.setAttribute('aria-label', title);\r\n    }\r\n    this.makeCloseButtonAccessible();\r\n  }\r\n\r\n  private makeCloseButtonAccessible() {\r\n    const closeButton: HTMLElement = this.element.querySelector('.coveo-small-close');\r\n    closeButton.setAttribute('aria-label', l('Close'));\r\n    closeButton.setAttribute('role', 'button');\r\n    closeButton.tabIndex = 0;\r\n    closeButton.focus();\r\n    $$(closeButton).on('keyup', KeyboardUtils.keypressAction(KEYBOARD.ENTER, () => closeButton.click()));\r\n  }\r\n\r\n  private onModalClose() {\r\n    this.focusTrap.disable();\r\n    this.focusTrap = null;\r\n    if (this.initiallyFocusedElement && document.body.contains(this.initiallyFocusedElement)) {\r\n      this.initiallyFocusedElement.focus();\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/AccessibleModal.ts","import { ModalBox as ModalBoxModule } from '../../ExternalModulesShim';\r\nimport { exportGlobally } from '../../GlobalExports';\r\nimport { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { QueryEvents, Initialization, $$ } from '../../Core';\r\nimport { IQuerySuccessEventArgs } from '../../events/QueryEvents';\r\nimport { IQuestionAnswerResponse } from '../../rest/QuestionAnswerResponse';\r\nimport 'styling/_SmartSnippet';\r\nimport { find } from 'underscore';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { UserFeedbackBanner } from './UserFeedbackBanner';\r\nimport {\r\n  analyticsActionCauseList,\r\n  IAnalyticsNoMeta,\r\n  IAnalyticsSmartSnippetFeedbackMeta,\r\n  AnalyticsSmartSnippetFeedbackReason\r\n} from '../Analytics/AnalyticsActionListMeta';\r\nimport { HeightLimiter } from './HeightLimiter';\r\nimport { ExplanationModal, IReason } from './ExplanationModal';\r\nimport { l } from '../../strings/Strings';\r\nimport { attachShadow } from '../../misc/AttachShadowPolyfill';\r\nimport { Utils } from '../../utils/Utils';\r\n\r\ninterface ISmartSnippetReason {\r\n  analytics: AnalyticsSmartSnippetFeedbackReason;\r\n  localeKey: string;\r\n  hasDetails?: boolean;\r\n}\r\n\r\nconst reasons: ISmartSnippetReason[] = [\r\n  {\r\n    analytics: AnalyticsSmartSnippetFeedbackReason.DoesNotAnswer,\r\n    localeKey: 'UsefulnessFeedbackDoesNotAnswer'\r\n  },\r\n  {\r\n    analytics: AnalyticsSmartSnippetFeedbackReason.PartiallyAnswers,\r\n    localeKey: 'UsefulnessFeedbackPartiallyAnswers'\r\n  },\r\n  {\r\n    analytics: AnalyticsSmartSnippetFeedbackReason.WasNotAQuestion,\r\n    localeKey: 'UsefulnessFeedbackWasNotAQuestion'\r\n  },\r\n  {\r\n    analytics: AnalyticsSmartSnippetFeedbackReason.Other,\r\n    localeKey: 'Other',\r\n    hasDetails: true\r\n  }\r\n];\r\n\r\nconst BASE_CLASSNAME = 'coveo-smart-snippet';\r\nconst QUESTION_CLASSNAME = `${BASE_CLASSNAME}-question`;\r\nconst ANSWER_CONTAINER_CLASSNAME = `${BASE_CLASSNAME}-answer`;\r\nconst HAS_ANSWER_CLASSNAME = `${BASE_CLASSNAME}-has-answer`;\r\nconst SHADOW_CLASSNAME = `${BASE_CLASSNAME}-content`;\r\nconst CONTENT_CLASSNAME = `${BASE_CLASSNAME}-content-wrapper`;\r\nconst SOURCE_CLASSNAME = `${BASE_CLASSNAME}-source`;\r\nconst SOURCE_TITLE_CLASSNAME = `${SOURCE_CLASSNAME}-title`;\r\nconst SOURCE_URL_CLASSNAME = `${SOURCE_CLASSNAME}-url`;\r\n\r\nexport const SmartSnippetClassNames = {\r\n  QUESTION_CLASSNAME,\r\n  ANSWER_CONTAINER_CLASSNAME,\r\n  HAS_ANSWER_CLASSNAME,\r\n  SHADOW_CLASSNAME,\r\n  CONTENT_CLASSNAME,\r\n  SOURCE_CLASSNAME,\r\n  SOURCE_TITLE_CLASSNAME,\r\n  SOURCE_URL_CLASSNAME\r\n};\r\n\r\nexport class SmartSnippet extends Component {\r\n  static ID = 'SmartSnippet';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      SmartSnippet\r\n    });\r\n  };\r\n\r\n  private lastRenderedResult: IQueryResult;\r\n  private questionContainer: HTMLElement;\r\n  private shadowContainer: HTMLElement;\r\n  private sourceContainer: HTMLElement;\r\n  private snippetContainer: HTMLElement;\r\n  private heightLimiter: HeightLimiter;\r\n  private explanationModal: ExplanationModal;\r\n  private feedbackBanner: UserFeedbackBanner;\r\n  private shadowLoading: Promise<HTMLElement>;\r\n\r\n  constructor(public element: HTMLElement, public options?: {}, bindings?: IComponentBindings, private ModalBox = ModalBoxModule) {\r\n    super(element, SmartSnippet.ID, bindings);\r\n    this.bind.onRootElement(QueryEvents.deferredQuerySuccess, (data: IQuerySuccessEventArgs) => this.handleQuerySuccess(data));\r\n  }\r\n\r\n  private get style() {\r\n    return $$(this.element)\r\n      .children()\r\n      .filter(element => element instanceof HTMLScriptElement && element.type.toLowerCase() === 'text/css')\r\n      .map(element => element.innerHTML)\r\n      .join('\\n');\r\n  }\r\n\r\n  private set hasAnswer(hasAnswer: boolean) {\r\n    $$(this.element).toggleClass(HAS_ANSWER_CLASSNAME, hasAnswer);\r\n  }\r\n\r\n  public createDom() {\r\n    this.element.appendChild(this.buildAnswerContainer());\r\n    this.feedbackBanner = new UserFeedbackBanner(\r\n      isUseful => (isUseful ? this.sendLikeSmartSnippetAnalytics() : this.sendDislikeSmartSnippetAnalytics()),\r\n      () => this.openExplanationModal()\r\n    );\r\n    this.element.appendChild(this.feedbackBanner.build());\r\n    this.explanationModal = new ExplanationModal({\r\n      reasons: reasons.map(\r\n        reason =>\r\n          <IReason>{\r\n            label: l(reason.localeKey),\r\n            id: reason.analytics.replace(/_/g, '-'),\r\n            onSelect: () => this.sendExplanationAnalytics(reason.analytics, this.explanationModal.details),\r\n            hasDetails: reason.hasDetails\r\n          }\r\n      ),\r\n      onClosed: () => this.sendCloseFeedbackModalAnalytics(),\r\n      ownerElement: this.searchInterface.options.modalContainer,\r\n      modalBoxModule: this.ModalBox\r\n    });\r\n  }\r\n\r\n  private buildAnswerContainer() {\r\n    return $$(\r\n      'div',\r\n      {\r\n        className: ANSWER_CONTAINER_CLASSNAME\r\n      },\r\n      this.buildQuestion(),\r\n      this.buildShadow(),\r\n      this.buildHeightLimiter(),\r\n      this.buildSourceContainer()\r\n    ).el;\r\n  }\r\n\r\n  private buildQuestion() {\r\n    return (this.questionContainer = $$('div', { className: QUESTION_CLASSNAME }).el);\r\n  }\r\n\r\n  private buildShadow() {\r\n    this.shadowContainer = $$('div', { className: SHADOW_CLASSNAME }).el;\r\n    this.snippetContainer = $$('section', { className: CONTENT_CLASSNAME }).el;\r\n    this.shadowLoading = attachShadow(this.shadowContainer, { mode: 'open', title: l('AnswerSnippet') }).then(shadow => {\r\n      shadow.appendChild(this.snippetContainer);\r\n      const style = this.buildStyle();\r\n      if (style) {\r\n        shadow.appendChild(style);\r\n      }\r\n      return shadow;\r\n    });\r\n    return this.shadowContainer;\r\n  }\r\n\r\n  private buildHeightLimiter() {\r\n    return (this.heightLimiter = new HeightLimiter(this.shadowContainer, this.snippetContainer, 400, isExpanded =>\r\n      isExpanded ? this.sendExpandSmartSnippetAnalytics() : this.sendCollapseSmartSnippetAnalytics()\r\n    )).toggleButton;\r\n  }\r\n\r\n  private buildSourceContainer() {\r\n    return (this.sourceContainer = $$('div', { className: SOURCE_CLASSNAME }).el);\r\n  }\r\n\r\n  private buildStyle() {\r\n    const style = this.style;\r\n    if (!style) {\r\n      return;\r\n    }\r\n    const styleTag = document.createElement('style');\r\n    styleTag.innerHTML = style;\r\n    return styleTag;\r\n  }\r\n\r\n  /**\r\n   * @warning This method only works for the demo. In practice, the source of the answer will not always be part of the results.\r\n   */\r\n  private getCorrespondingResult(questionAnswer: IQuestionAnswerResponse) {\r\n    return find(\r\n      this.queryController.getLastResults().results,\r\n      result => result.raw[questionAnswer.documentId.contentIdKey] === questionAnswer.documentId.contentIdValue\r\n    );\r\n  }\r\n\r\n  private async handleQuerySuccess(data: IQuerySuccessEventArgs) {\r\n    const { questionAnswer } = data.results;\r\n    if (!questionAnswer) {\r\n      this.hasAnswer = false;\r\n      return;\r\n    }\r\n    this.hasAnswer = true;\r\n    await this.render(questionAnswer);\r\n  }\r\n\r\n  private async render(questionAnswer: IQuestionAnswerResponse) {\r\n    this.ensureDom();\r\n    this.questionContainer.innerText = questionAnswer.question;\r\n    this.renderSnippet(questionAnswer.answerSnippet);\r\n    const lastRenderedResult = this.getCorrespondingResult(questionAnswer);\r\n    if (lastRenderedResult) {\r\n      this.renderSource(lastRenderedResult);\r\n    }\r\n    await this.shadowLoading;\r\n    await Utils.resolveAfter(0); // `scrollHeight` isn't instantly detected, or at-least not on IE11.\r\n    this.heightLimiter.onContentHeightChanged();\r\n  }\r\n\r\n  private renderSnippet(content: string) {\r\n    this.snippetContainer.innerHTML = content;\r\n  }\r\n\r\n  private renderSource(source: IQueryResult) {\r\n    $$(this.sourceContainer).empty();\r\n    this.sourceContainer.appendChild(this.renderSourceUrl(source.clickUri));\r\n    this.sourceContainer.appendChild(this.renderSourceTitle(source.title, source.clickUri));\r\n  }\r\n\r\n  private renderSourceTitle(title: string, clickUri: string) {\r\n    return this.renderLink(title, clickUri, SOURCE_TITLE_CLASSNAME);\r\n  }\r\n\r\n  private renderSourceUrl(url: string) {\r\n    return this.renderLink(url, url, SOURCE_URL_CLASSNAME);\r\n  }\r\n\r\n  private renderLink(text: string, href: string, className: string) {\r\n    const element = $$('a', { className, href }).el as HTMLAnchorElement;\r\n    element.innerText = text;\r\n    this.enableAnalyticsOnLink(element, () => this.sendOpenSourceAnalytics());\r\n    return element;\r\n  }\r\n\r\n  private enableAnalyticsOnLink(link: HTMLAnchorElement, sendAnalytics: () => Promise<any>) {\r\n    link.addEventListener('click', e => {\r\n      e.preventDefault();\r\n      this.openLink(link.href, e.ctrlKey, sendAnalytics);\r\n    });\r\n  }\r\n\r\n  private openLink(href: string, newTab: boolean, sendAnalytics: () => Promise<any>) {\r\n    sendAnalytics();\r\n    if (newTab) {\r\n      window.open(href);\r\n    } else {\r\n      window.location.href = href;\r\n    }\r\n  }\r\n\r\n  private openExplanationModal() {\r\n    this.sendOpenFeedbackModalAnalytics();\r\n    this.explanationModal.open(this.feedbackBanner.explainWhy);\r\n  }\r\n\r\n  private sendLikeSmartSnippetAnalytics() {\r\n    return this.usageAnalytics.logCustomEvent<IAnalyticsNoMeta>(\r\n      analyticsActionCauseList.likeSmartSnippet,\r\n      {},\r\n      this.element,\r\n      this.lastRenderedResult\r\n    );\r\n  }\r\n\r\n  private sendDislikeSmartSnippetAnalytics() {\r\n    return this.usageAnalytics.logCustomEvent<IAnalyticsNoMeta>(\r\n      analyticsActionCauseList.dislikeSmartSnippet,\r\n      {},\r\n      this.element,\r\n      this.lastRenderedResult\r\n    );\r\n  }\r\n\r\n  private sendExpandSmartSnippetAnalytics() {\r\n    return this.usageAnalytics.logCustomEvent<IAnalyticsNoMeta>(\r\n      analyticsActionCauseList.expandSmartSnippet,\r\n      {},\r\n      this.element,\r\n      this.lastRenderedResult\r\n    );\r\n  }\r\n\r\n  private sendCollapseSmartSnippetAnalytics() {\r\n    return this.usageAnalytics.logCustomEvent<IAnalyticsNoMeta>(\r\n      analyticsActionCauseList.collapseSmartSnippet,\r\n      {},\r\n      this.element,\r\n      this.lastRenderedResult\r\n    );\r\n  }\r\n\r\n  private sendOpenSourceAnalytics() {\r\n    return this.usageAnalytics.logCustomEvent<IAnalyticsNoMeta>(\r\n      analyticsActionCauseList.openSmartSnippetSource,\r\n      {},\r\n      this.element,\r\n      this.lastRenderedResult\r\n    );\r\n  }\r\n\r\n  private sendOpenFeedbackModalAnalytics() {\r\n    return this.usageAnalytics.logCustomEvent<IAnalyticsNoMeta>(\r\n      analyticsActionCauseList.openSmartSnippetFeedbackModal,\r\n      {},\r\n      this.element,\r\n      this.lastRenderedResult\r\n    );\r\n  }\r\n\r\n  private sendCloseFeedbackModalAnalytics() {\r\n    return this.usageAnalytics.logCustomEvent<IAnalyticsNoMeta>(\r\n      analyticsActionCauseList.closeSmartSnippetFeedbackModal,\r\n      {},\r\n      this.element,\r\n      this.lastRenderedResult\r\n    );\r\n  }\r\n\r\n  private sendExplanationAnalytics(reason: AnalyticsSmartSnippetFeedbackReason, details?: string) {\r\n    return this.usageAnalytics.logCustomEvent<IAnalyticsSmartSnippetFeedbackMeta>(\r\n      analyticsActionCauseList.sendSmartSnippetReason,\r\n      {\r\n        reason,\r\n        details\r\n      },\r\n      this.element,\r\n      this.lastRenderedResult\r\n    );\r\n  }\r\n}\r\nInitialization.registerAutoCreateComponent(SmartSnippet);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/SmartSnippet/SmartSnippet.ts","import { Defer } from '../../misc/Defer';\r\nimport { sortBy, without } from 'underscore';\r\nimport { $$ } from '../../utils/Dom';\r\n\r\nexport class FocusTrap {\r\n  private focusInEvent: (e: FocusEvent) => void;\r\n  private focusOutEvent: (e: FocusEvent) => void;\r\n  private hiddenElements: HTMLElement[];\r\n  private enabled: boolean;\r\n\r\n  private get focusableElements(): HTMLElement[] {\r\n    return sortBy(this.container.querySelectorAll('[tabindex]'), element => element.tabIndex);\r\n  }\r\n\r\n  constructor(private container: HTMLElement) {\r\n    this.hiddenElements = [];\r\n    this.enable();\r\n  }\r\n\r\n  public disable() {\r\n    document.removeEventListener('focusin', this.focusInEvent);\r\n    document.removeEventListener('focusout', this.focusOutEvent);\r\n    this.showHiddenElements();\r\n    this.enabled = false;\r\n  }\r\n\r\n  private enable() {\r\n    document.addEventListener('focusin', (this.focusInEvent = e => this.onFocusIn(e)));\r\n    document.addEventListener('focusout', (this.focusOutEvent = e => this.onFocusOut(e)));\r\n    this.hideAllExcept(this.container);\r\n    this.enabled = true;\r\n  }\r\n\r\n  private showHiddenElements() {\r\n    while (this.hiddenElements.length) {\r\n      this.hiddenElements.pop().removeAttribute('aria-hidden');\r\n    }\r\n  }\r\n\r\n  private hideElement(element: HTMLElement) {\r\n    if (element.getAttribute('aria-hidden')) {\r\n      return;\r\n    }\r\n    this.hiddenElements.push(element);\r\n    element.setAttribute('aria-hidden', `${true}`);\r\n  }\r\n\r\n  private hideSiblings(allowedElement: HTMLElement) {\r\n    const parent = allowedElement.parentElement;\r\n    if (parent) {\r\n      without($$(parent).children(), allowedElement).forEach(elementToHide => {\r\n        this.hideElement(elementToHide);\r\n      });\r\n    }\r\n  }\r\n\r\n  private hideAllExcept(allowedElement: HTMLElement) {\r\n    this.hideSiblings(allowedElement);\r\n    const parent = allowedElement.parentElement;\r\n    if (parent && parent !== document.body) {\r\n      this.hideAllExcept(parent);\r\n    }\r\n  }\r\n\r\n  private getFocusableSibling(element: HTMLElement, previous = false) {\r\n    const elements = this.focusableElements;\r\n    const currentIndex = elements.indexOf(element);\r\n    if (currentIndex === -1) {\r\n      return null;\r\n    }\r\n    return elements[(currentIndex + (previous ? -1 : 1) + elements.length) % elements.length];\r\n  }\r\n\r\n  private focusSibling(element: HTMLElement, previous = false) {\r\n    const sibling = this.getFocusableSibling(element, previous);\r\n    if (sibling) {\r\n      sibling.focus();\r\n    }\r\n  }\r\n\r\n  private focusFirstElement() {\r\n    const elements = this.focusableElements;\r\n    if (elements.length) {\r\n      elements[0].focus();\r\n    }\r\n  }\r\n\r\n  private elementIsBefore(oldElement: HTMLElement, newElement: HTMLElement) {\r\n    if (!newElement) {\r\n      return false;\r\n    }\r\n    return oldElement.compareDocumentPosition(newElement) === Node.DOCUMENT_POSITION_PRECEDING;\r\n  }\r\n\r\n  private onLosingFocus(oldElement: HTMLElement, newElement: HTMLElement) {\r\n    Defer.defer(() => {\r\n      if (!this.enabled) {\r\n        return;\r\n      }\r\n      this.enabled = false;\r\n      if (oldElement && this.focusIsAllowed(oldElement)) {\r\n        this.focusSibling(oldElement, this.elementIsBefore(oldElement, newElement));\r\n      } else {\r\n        this.focusFirstElement();\r\n      }\r\n      this.enabled = true;\r\n    });\r\n  }\r\n\r\n  private focusIsAllowed(element: HTMLElement) {\r\n    return this.container.contains(element);\r\n  }\r\n\r\n  private elementIsInPage(element: HTMLElement) {\r\n    return element && element !== document.body.parentElement;\r\n  }\r\n\r\n  private onFocusIn(e: FocusEvent) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n    const oldElement = e.relatedTarget as HTMLElement;\r\n    const handledByFocusOut = this.elementIsInPage(oldElement);\r\n    if (handledByFocusOut) {\r\n      return;\r\n    }\r\n    const newElement = e.target as HTMLElement;\r\n    if (!this.elementIsInPage(newElement)) {\r\n      return;\r\n    }\r\n    if (!this.focusIsAllowed(newElement)) {\r\n      this.onLosingFocus(null, newElement);\r\n    }\r\n  }\r\n\r\n  private onFocusOut(e: FocusEvent) {\r\n    if (!this.enabled) {\r\n      return;\r\n    }\r\n    const newElement = e.relatedTarget as HTMLElement;\r\n    if (!this.elementIsInPage(newElement)) {\r\n      return;\r\n    }\r\n    if (!newElement || !this.focusIsAllowed(newElement)) {\r\n      this.onLosingFocus(e.target as HTMLElement, newElement);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/FocusTrap/FocusTrap.ts","import { $$ } from '../utils/Dom';\r\nimport 'styling/_AttachShadowPolyfill';\r\n\r\nexport async function attachShadow(element: HTMLElement, init: ShadowRootInit & { title: string }): Promise<HTMLElement> {\r\n  const iframe = $$('iframe', { className: 'coveo-shadow-iframe', scrolling: 'no', title: init.title }).el as HTMLIFrameElement;\r\n  const onLoad = new Promise(resolve => iframe.addEventListener('load', () => resolve()));\r\n  element.appendChild(iframe);\r\n  await onLoad;\r\n\r\n  const iframeBody = iframe.contentDocument.body as HTMLBodyElement;\r\n  iframeBody.style.margin = '0';\r\n  const shadowRoot = $$('div', { style: 'overflow: auto;' }).el;\r\n  iframeBody.appendChild(shadowRoot);\r\n  autoUpdateHeight(iframe, shadowRoot);\r\n  if (init.mode === 'open') {\r\n    Object.defineProperty(element, 'shadowRoot', { get: () => shadowRoot });\r\n  }\r\n\r\n  return shadowRoot;\r\n}\r\n\r\nfunction autoUpdateHeight(elementToResize: HTMLElement, content: HTMLElement) {\r\n  const heightObserver = new MutationObserver(() => {\r\n    elementToResize.style.height = `${content.clientHeight}px`;\r\n  });\r\n  heightObserver.observe(content, {\r\n    attributes: true,\r\n    characterData: true,\r\n    childList: true,\r\n    subtree: true\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/AttachShadowPolyfill.ts","import { $$ } from '../../utils/Dom';\r\nimport { l } from '../../strings/Strings';\r\nimport { SVGIcons } from '../../utils/SVGIcons';\r\nimport { uniqueId } from 'underscore';\r\n\r\nconst ROOT_CLASSNAME = 'coveo-user-feedback-banner';\r\nconst CONTAINER_CLASSNAME = `${ROOT_CLASSNAME}-container`;\r\nconst LABEL_CLASSNAME = `${ROOT_CLASSNAME}-label`;\r\nconst BUTTONS_CONTAINER_CLASSNAME = `${ROOT_CLASSNAME}-buttons`;\r\nconst YES_BUTTON_CLASSNAME = `${ROOT_CLASSNAME}-yes-button`;\r\nconst NO_BUTTON_CLASSNAME = `${ROOT_CLASSNAME}-no-button`;\r\nconst BUTTON_ACTIVE_CLASSNAME = `${ROOT_CLASSNAME}-button-active`;\r\nconst THANK_YOU_BANNER_CLASSNAME = `${ROOT_CLASSNAME}-thanks`;\r\nconst THANK_YOU_BANNER_ACTIVE_CLASSNAME = `${THANK_YOU_BANNER_CLASSNAME}-active`;\r\nconst ICON_CLASSNAME = `${THANK_YOU_BANNER_CLASSNAME}-icon`;\r\nconst EXPLAIN_WHY_CLASSNAME = `${ROOT_CLASSNAME}-explain-why`;\r\nconst EXPLAIN_WHY_ACTIVE_CLASSNAME = `${EXPLAIN_WHY_CLASSNAME}-active`;\r\n\r\nenum UsefulState {\r\n  Unknown,\r\n  Yes,\r\n  No\r\n}\r\n\r\ninterface IButtonOptions {\r\n  text: string;\r\n  className: string;\r\n  action: Function;\r\n  icon?: {\r\n    content: string;\r\n    className: string;\r\n  };\r\n  attributes?: any;\r\n}\r\n\r\nexport const UserFeedbackBannerClassNames = {\r\n  ROOT_CLASSNAME,\r\n  CONTAINER_CLASSNAME,\r\n  LABEL_CLASSNAME,\r\n  BUTTONS_CONTAINER_CLASSNAME,\r\n  YES_BUTTON_CLASSNAME,\r\n  NO_BUTTON_CLASSNAME,\r\n  BUTTON_ACTIVE_CLASSNAME,\r\n  THANK_YOU_BANNER_CLASSNAME,\r\n  THANK_YOU_BANNER_ACTIVE_CLASSNAME,\r\n  ICON_CLASSNAME,\r\n  EXPLAIN_WHY_CLASSNAME,\r\n  EXPLAIN_WHY_ACTIVE_CLASSNAME\r\n};\r\n\r\nexport class UserFeedbackBanner {\r\n  public explainWhy: HTMLElement;\r\n  private isUseful = UsefulState.Unknown;\r\n  private yesButton: HTMLElement;\r\n  private noButton: HTMLElement;\r\n  private thankYouBanner: HTMLElement;\r\n  private labelId: string;\r\n\r\n  constructor(private readonly sendUsefulnessAnalytics: (isUseful: boolean) => void, private readonly onExplainWhyPressed: () => void) {\r\n    this.labelId = uniqueId(LABEL_CLASSNAME);\r\n  }\r\n\r\n  public build() {\r\n    return $$(\r\n      'div',\r\n      {\r\n        className: ROOT_CLASSNAME,\r\n        ariaLive: 'polite'\r\n      },\r\n      this.buildContainer(),\r\n      this.buildThankYouBanner()\r\n    ).el;\r\n  }\r\n\r\n  private buildContainer() {\r\n    return $$(\r\n      'div',\r\n      {\r\n        className: CONTAINER_CLASSNAME,\r\n        ariaLabelledby: this.labelId\r\n      },\r\n      this.buildLabel(),\r\n      this.buildButtons()\r\n    ).el;\r\n  }\r\n\r\n  private buildLabel() {\r\n    return $$('span', { className: LABEL_CLASSNAME, id: this.labelId }, l('UsefulnessFeedbackRequest')).el;\r\n  }\r\n\r\n  private buildThankYouBanner() {\r\n    this.thankYouBanner = $$('div', { className: THANK_YOU_BANNER_CLASSNAME }).el;\r\n\r\n    const text = $$('span', {}, l('UsefulnessFeedbackThankYou')).el;\r\n    this.thankYouBanner.appendChild(text);\r\n\r\n    this.explainWhy = this.buildButton({\r\n      text: l('UsefulnessFeedbackExplainWhy'),\r\n      className: EXPLAIN_WHY_CLASSNAME,\r\n      action: () => this.requestExplaination()\r\n    });\r\n    this.thankYouBanner.appendChild(this.explainWhy);\r\n\r\n    return this.thankYouBanner;\r\n  }\r\n\r\n  private buildButtons() {\r\n    const buttonsContainer = $$('div', { className: BUTTONS_CONTAINER_CLASSNAME }).el;\r\n\r\n    this.yesButton = this.buildButton({\r\n      text: l('Yes'),\r\n      className: YES_BUTTON_CLASSNAME,\r\n      action: () => this.showThankYouBanner(true),\r\n      icon: {\r\n        className: ICON_CLASSNAME,\r\n        content: SVGIcons.icons.checkYes\r\n      },\r\n      attributes: {\r\n        ariaPressed: false,\r\n        ariaDescribedby: this.labelId\r\n      }\r\n    });\r\n    this.yesButton.setAttribute('aria-pressed', 'false');\r\n    buttonsContainer.appendChild(this.yesButton);\r\n\r\n    this.noButton = this.buildButton({\r\n      text: l('No'),\r\n      className: NO_BUTTON_CLASSNAME,\r\n      action: () => this.showThankYouBanner(false),\r\n      icon: {\r\n        className: ICON_CLASSNAME,\r\n        content: SVGIcons.icons.clearSmall\r\n      },\r\n      attributes: {\r\n        ariaPressed: false,\r\n        ariaDescribedby: this.labelId\r\n      }\r\n    });\r\n    buttonsContainer.appendChild(this.noButton);\r\n\r\n    return buttonsContainer;\r\n  }\r\n\r\n  private buildButton(options: IButtonOptions) {\r\n    const button = $$('button', { ...(options.attributes || {}), className: options.className }).el;\r\n\r\n    if (options.icon) {\r\n      const icon = $$('span', { className: options.icon.className }, options.icon.content).el;\r\n      button.appendChild(icon);\r\n      const text = $$('span', {}, options.text).el;\r\n      button.appendChild(text);\r\n    } else {\r\n      button.innerText = options.text;\r\n    }\r\n\r\n    button.addEventListener('click', () => options.action());\r\n\r\n    return button;\r\n  }\r\n\r\n  private showThankYouBanner(isUseful: boolean) {\r\n    if (this.isUseful !== UsefulState.Unknown && isUseful === (this.isUseful === UsefulState.Yes)) {\r\n      return;\r\n    }\r\n    this.isUseful = isUseful ? UsefulState.Yes : UsefulState.No;\r\n    $$(this.yesButton).toggleClass(BUTTON_ACTIVE_CLASSNAME, isUseful);\r\n    $$(this.yesButton).setAttribute('aria-pressed', `${isUseful}`);\r\n    $$(this.noButton).toggleClass(BUTTON_ACTIVE_CLASSNAME, !isUseful);\r\n    $$(this.noButton).setAttribute('aria-pressed', `${!isUseful}`);\r\n    $$(this.thankYouBanner).addClass(THANK_YOU_BANNER_ACTIVE_CLASSNAME);\r\n    $$(this.explainWhy).toggleClass(EXPLAIN_WHY_ACTIVE_CLASSNAME, !isUseful);\r\n    this.sendUsefulnessAnalytics(isUseful);\r\n  }\r\n\r\n  private requestExplaination() {\r\n    this.onExplainWhyPressed();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/SmartSnippet/UserFeedbackBanner.ts","import { $$ } from '../../utils/Dom';\r\nimport { SVGIcons } from '../../utils/SVGIcons';\r\nimport { l } from '../../strings/Strings';\r\n\r\nconst BASE_CLASSNAME = 'coveo-height-limiter';\r\nconst CONTAINER_ACTIVE_CLASSNAME = `${BASE_CLASSNAME}-container-active`;\r\nconst CONTAINER_EXPANDED_CLASSNAME = `${BASE_CLASSNAME}-container-expanded`;\r\nconst BUTTON_CLASSNAME = `${BASE_CLASSNAME}-button`;\r\nconst BUTTON_LABEL_CLASSNAME = `${BUTTON_CLASSNAME}-label`;\r\nconst BUTTON_ICON_CLASSNAME = `${BUTTON_CLASSNAME}-icon`;\r\nconst BUTTON_ACTIVE_CLASSNAME = `${BUTTON_CLASSNAME}-active`;\r\n\r\nexport const HeightLimiterClassNames = {\r\n  CONTAINER_ACTIVE_CLASSNAME,\r\n  CONTAINER_EXPANDED_CLASSNAME,\r\n  BUTTON_CLASSNAME,\r\n  BUTTON_LABEL_CLASSNAME,\r\n  BUTTON_ICON_CLASSNAME,\r\n  BUTTON_ACTIVE_CLASSNAME\r\n};\r\n\r\nexport class HeightLimiter {\r\n  private isExpanded = false;\r\n  private button: HTMLElement;\r\n  private buttonLabel: HTMLElement;\r\n  private buttonIcon: HTMLElement;\r\n\r\n  public get toggleButton() {\r\n    return this.button;\r\n  }\r\n\r\n  private set height(height: number) {\r\n    this.containerElement.style.height = `${height}px`;\r\n  }\r\n\r\n  private get contentHeight() {\r\n    return this.contentElement.clientHeight;\r\n  }\r\n\r\n  constructor(\r\n    private containerElement: HTMLElement,\r\n    private contentElement: HTMLElement,\r\n    private heightLimit: number,\r\n    private onToggle?: (isExpanded: boolean) => void\r\n  ) {\r\n    this.buildButton();\r\n    this.updateActiveAppearance();\r\n  }\r\n\r\n  public onContentHeightChanged() {\r\n    this.updateActiveAppearance();\r\n  }\r\n\r\n  private buildButton() {\r\n    this.button = $$(\r\n      'button',\r\n      { className: BUTTON_CLASSNAME, ariaLabel: l('ShowMore'), ariaPressed: 'false', ariaHidden: 'true' },\r\n      (this.buttonLabel = $$('span', { className: BUTTON_LABEL_CLASSNAME }).el),\r\n      (this.buttonIcon = $$('span', { className: BUTTON_ICON_CLASSNAME }).el)\r\n    ).el;\r\n    this.button.addEventListener('click', () => this.toggle());\r\n    this.updateButton();\r\n    return this.button;\r\n  }\r\n\r\n  private updateActiveAppearance() {\r\n    const shouldBeActive = this.contentHeight > this.heightLimit;\r\n    $$(this.containerElement).toggleClass(CONTAINER_ACTIVE_CLASSNAME, shouldBeActive);\r\n    $$(this.button).toggleClass(BUTTON_ACTIVE_CLASSNAME, shouldBeActive);\r\n    if (shouldBeActive) {\r\n      this.updateExpandedAppearance();\r\n    } else {\r\n      this.isExpanded = false;\r\n      this.updateExpandedAppearance();\r\n      this.containerElement.style.height = '';\r\n    }\r\n  }\r\n\r\n  private updateButton() {\r\n    this.buttonLabel.innerText = this.isExpanded ? l('ShowLess') : l('ShowMore');\r\n    this.button.setAttribute('aria-pressed', `${this.isExpanded}`);\r\n    this.buttonIcon.innerHTML = this.isExpanded ? SVGIcons.icons.arrowUp : SVGIcons.icons.arrowDown;\r\n  }\r\n\r\n  private updateExpandedAppearance() {\r\n    this.updateButton();\r\n    $$(this.containerElement).toggleClass(CONTAINER_EXPANDED_CLASSNAME, this.isExpanded);\r\n    this.height = this.isExpanded ? this.contentHeight : this.heightLimit;\r\n  }\r\n\r\n  private toggle() {\r\n    this.isExpanded = !this.isExpanded;\r\n    this.updateExpandedAppearance();\r\n    if (this.onToggle) {\r\n      this.onToggle(this.isExpanded);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/SmartSnippet/HeightLimiter.ts","import { AccessibleModal } from '../../utils/AccessibleModal';\r\nimport { l } from '../../strings/Strings';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { RadioButton } from '../FormWidgets/RadioButton';\r\nimport 'styling/_ExplanationModal';\r\n\r\nexport interface IReason {\r\n  label: string;\r\n  id: string;\r\n  onSelect: () => void;\r\n  hasDetails?: boolean;\r\n}\r\n\r\nexport interface IExplanationModalOptions {\r\n  ownerElement: HTMLElement;\r\n  reasons: IReason[];\r\n  onClosed: () => void;\r\n  modalBoxModule?: Coveo.ModalBox.ModalBox;\r\n}\r\n\r\nconst ROOT_CLASSNAME = 'coveo-user-explanation-modal';\r\nconst CONTENT_CLASSNAME = `${ROOT_CLASSNAME}-content`;\r\nconst EXPLANATION_SECTION_CLASSNAME = `${ROOT_CLASSNAME}-explanation-section`;\r\nconst REASONS_CLASSNAME = `${ROOT_CLASSNAME}-explanations`;\r\nconst REASONS_LABEL_CLASSNAME = `${REASONS_CLASSNAME}-label`;\r\nconst DETAILS_SECTION_CLASSNAME = `${ROOT_CLASSNAME}-details`;\r\nconst DETAILS_TEXTAREA_CLASSNAME = `${DETAILS_SECTION_CLASSNAME}-textarea`;\r\nconst DETAILS_LABEL_CLASSNAME = `${DETAILS_SECTION_CLASSNAME}-label`;\r\nconst BUTTONS_SECTION_CLASSNAME = `${ROOT_CLASSNAME}-buttons-section`;\r\nconst SEND_BUTTON_CLASSNAME = `${ROOT_CLASSNAME}-send-button`;\r\nconst CANCEL_BUTTON_CLASSNAME = `${ROOT_CLASSNAME}-cancel-button`;\r\nconst DETAILS_ID = DETAILS_SECTION_CLASSNAME;\r\n\r\nexport const ExplanationModalClassNames = {\r\n  ROOT_CLASSNAME,\r\n  CONTENT_CLASSNAME,\r\n  EXPLANATION_SECTION_CLASSNAME,\r\n  REASONS_CLASSNAME,\r\n  REASONS_LABEL_CLASSNAME,\r\n  DETAILS_SECTION_CLASSNAME,\r\n  DETAILS_TEXTAREA_CLASSNAME,\r\n  DETAILS_LABEL_CLASSNAME,\r\n  BUTTONS_SECTION_CLASSNAME,\r\n  SEND_BUTTON_CLASSNAME,\r\n  CANCEL_BUTTON_CLASSNAME\r\n};\r\n\r\nexport class ExplanationModal {\r\n  private modal: AccessibleModal;\r\n  private reasons: RadioButton[];\r\n  private selectedReason: IReason;\r\n  private detailsTextArea: HTMLTextAreaElement;\r\n  private shouldCallCloseEvent = false;\r\n\r\n  constructor(public options: IExplanationModalOptions) {\r\n    this.modal = new AccessibleModal(ROOT_CLASSNAME, this.options.ownerElement, this.options.modalBoxModule);\r\n  }\r\n\r\n  public get details() {\r\n    if (!this.selectedReason || !this.selectedReason.hasDetails) {\r\n      return null;\r\n    }\r\n    return this.detailsTextArea.value;\r\n  }\r\n\r\n  public open(origin: HTMLElement) {\r\n    this.modal.open({\r\n      origin,\r\n      title: l('UsefulnessFeedbackExplainWhyImperative'),\r\n      content: this.buildContent(),\r\n      validation: () => {\r\n        if (this.shouldCallCloseEvent) {\r\n          this.options.onClosed();\r\n          this.shouldCallCloseEvent = false;\r\n        }\r\n        return true;\r\n      }\r\n    });\r\n    this.shouldCallCloseEvent = true;\r\n  }\r\n\r\n  private buildContent() {\r\n    return $$(\r\n      'div',\r\n      {\r\n        className: CONTENT_CLASSNAME\r\n      },\r\n      this.buildExplanationSection(),\r\n      this.buildButtonsSection()\r\n    ).el;\r\n  }\r\n\r\n  private buildExplanationSection() {\r\n    const detailsSection = this.buildDetailsSection();\r\n    return $$(\r\n      'div',\r\n      {\r\n        className: EXPLANATION_SECTION_CLASSNAME\r\n      },\r\n      this.buildReasons(),\r\n      detailsSection\r\n    ).el;\r\n  }\r\n\r\n  private buildButtonsSection() {\r\n    return $$(\r\n      'div',\r\n      {\r\n        className: BUTTONS_SECTION_CLASSNAME\r\n      },\r\n      this.buildSendButton(),\r\n      this.buildCancelButton()\r\n    );\r\n  }\r\n\r\n  private buildReasons() {\r\n    const reasonsContainer = $$('fieldset', { className: REASONS_CLASSNAME }, this.buildReasonsLabel()).el;\r\n    this.reasons = this.options.reasons.map(reason => this.buildReasonRadioButton(reason));\r\n    this.reasons[0].select();\r\n    this.reasons.forEach(radioButton => reasonsContainer.appendChild(radioButton.getElement()));\r\n    return reasonsContainer;\r\n  }\r\n\r\n  private buildReasonsLabel() {\r\n    return $$('legend', { className: REASONS_LABEL_CLASSNAME }, l('UsefulnessFeedbackReason')).el;\r\n  }\r\n\r\n  private buildDetailsSection() {\r\n    return $$(\r\n      'div',\r\n      { className: DETAILS_SECTION_CLASSNAME },\r\n      $$('label', { className: DETAILS_LABEL_CLASSNAME, for: DETAILS_ID }, l('Details')).el,\r\n      (this.detailsTextArea = $$('textarea', { className: DETAILS_TEXTAREA_CLASSNAME, id: DETAILS_ID, disabled: true })\r\n        .el as HTMLTextAreaElement)\r\n    );\r\n  }\r\n\r\n  private buildSendButton() {\r\n    const button = $$('button', { className: SEND_BUTTON_CLASSNAME }, l('Send'));\r\n    button.on('click', () => {\r\n      this.selectedReason.onSelect();\r\n      this.shouldCallCloseEvent = false;\r\n      this.modal.close();\r\n    });\r\n    return button.el;\r\n  }\r\n\r\n  private buildCancelButton() {\r\n    const button = $$('button', { className: CANCEL_BUTTON_CLASSNAME }, l('Cancel'));\r\n    button.on('click', () => this.modal.close());\r\n    return button.el;\r\n  }\r\n\r\n  private buildReasonRadioButton(reason: IReason) {\r\n    return new RadioButton(\r\n      radioButton => {\r\n        if (!radioButton.isSelected()) {\r\n          return;\r\n        }\r\n        this.detailsTextArea.disabled = !reason.hasDetails;\r\n        this.selectedReason = reason;\r\n      },\r\n      reason.label,\r\n      'reason',\r\n      `coveo-reason-${reason.id}`\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/SmartSnippet/ExplanationModal.ts","import { $$ } from '../../utils/Dom';\r\nimport { IFormWidgetWithLabel, IFormWidgetSelectable } from './FormWidgets';\r\nimport 'styling/vapor/_Radio';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\n/**\r\n * A radio button widget with standard styling.\r\n */\r\nexport class RadioButton implements IFormWidgetWithLabel, IFormWidgetSelectable {\r\n  protected element: HTMLElement;\r\n\r\n  static doExport() {\r\n    exportGlobally({\r\n      RadioButton: RadioButton\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a new `RadioButton`.\r\n   * @param onChange The function to call when the radio button value changes. This function takes the current\r\n   * `RadioButton` instance as an argument.\r\n   * @param label The label to display next to the radio button.\r\n   * @param name The value to set the `input` HTMLElement `name` attribute to.\r\n   */\r\n  constructor(\r\n    public onChange: (radioButton: RadioButton) => void = (radioButton: RadioButton) => {},\r\n    public label: string,\r\n    public name: string,\r\n    private id: string = label\r\n  ) {\r\n    this.buildContent();\r\n  }\r\n\r\n  /**\r\n   * Resets the radio button.\r\n   */\r\n  public reset() {\r\n    const currentlySelected = this.isSelected();\r\n    this.getRadio().checked = false;\r\n    if (currentlySelected) {\r\n      this.onChange(this);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Select the radio button\r\n   * @param triggerChange will trigger change event if specified and the radio button is not already selected\r\n   */\r\n  public select(triggerChange = true) {\r\n    const currentlySelected = this.isSelected();\r\n    this.getRadio().checked = true;\r\n    if (!currentlySelected && triggerChange) {\r\n      this.onChange(this);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets the element on which the radio button is bound.\r\n   * @returns {HTMLElement} The radio button element.\r\n   */\r\n  public build(): HTMLElement {\r\n    return this.element;\r\n  }\r\n\r\n  /**\r\n   * Gets the element on which the radio button is bound.\r\n   * @returns {HTMLElement} The radio button element.\r\n   */\r\n  public getElement(): HTMLElement {\r\n    return this.element;\r\n  }\r\n\r\n  public getValue(): string {\r\n    return this.label;\r\n  }\r\n\r\n  /**\r\n   * Indicates whether the radio button is selected.\r\n   * @returns {boolean} `true` if the radio button is selected, `false` otherwise.\r\n   */\r\n  public isSelected(): boolean {\r\n    return this.getRadio().checked;\r\n  }\r\n\r\n  /**\r\n   * Gets the `input` element (the radio button itself).\r\n   * @returns {HTMLInputElement} The `input` element.\r\n   */\r\n  public getRadio(): HTMLInputElement {\r\n    return <HTMLInputElement>$$(this.element).find('input');\r\n  }\r\n\r\n  /**\r\n   * Gets the radio button [`label`]{@link RadioButton.label} element.\r\n   * @returns {HTMLLabelElement} The `label` element.\r\n   */\r\n  public getLabel(): HTMLLabelElement {\r\n    return <HTMLLabelElement>$$(this.element).find('label');\r\n  }\r\n\r\n  private buildContent() {\r\n    const radioOption = $$('div', { className: 'coveo-radio' });\r\n    const radioInput = $$('input', { type: 'radio', name: this.name, id: this.id });\r\n    const labelInput = $$('label', { className: 'coveo-radio-input-label', for: this.id });\r\n    labelInput.text(this.label);\r\n    radioInput.on('change', () => {\r\n      this.onChange(this);\r\n    });\r\n\r\n    radioOption.append(radioInput.el);\r\n    radioOption.append(labelInput.el);\r\n    this.element = radioOption.el;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/FormWidgets/RadioButton.ts"],"sourceRoot":""}