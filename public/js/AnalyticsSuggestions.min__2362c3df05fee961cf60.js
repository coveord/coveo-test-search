webpackJsonpCoveo__temporary([39],{173:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(358),s=n(8),r=n(6),u=n(5),l=n(31),c=n(10),a=n(7),h=n(13),p=n(9),d=n(1),m=n(2),b=n(17),f=n(0),y=n(3),g=n(24),v=function(e){function t(n,o,r){var u=e.call(this,n,t.ID,r)||this;u.options=o,u.partialQueries=[],u.lastSuggestions=[],u.resultsToBuildWith=[],u.options&&"omniboxSuggestionOptions"in u.options&&(u.options=f.extend(u.options,u.options.omniboxSuggestionOptions)),u.options=s.ComponentOptions.initComponentOptions(n,t,u.options);var a=function(e){var t=m.$$("div",{className:"magic-box-suggestion coveo-omnibox-selectable coveo-top-analytics-suggestion-row"});return(new g.AccessibleButton).withElement(t).withLabel(e.rawValue).build(),e.data&&(t.el.innerHTML=e.data),t.el.outerHTML};u.options.onSelect=u.options.onSelect||u.onRowSelection;var h={row:a};return u.suggestionForOmnibox=new i.SuggestionForOmnibox(h,function(e,t){u.options.onSelect.call(u,e,t)},function(e,t){u.onRowTab.call(u,e,t)}),u.bind.onRootElement(l.OmniboxEvents.populateOmnibox,function(e){return u.handlePopulateOmnibox(e)}),u.bind.onRootElement(c.QueryEvents.querySuccess,function(){return u.partialQueries=[]}),u}return o(t,e),t.doExport=function(){y.exportGlobally({AnalyticsSuggestions:t})},t.prototype.selectSuggestion=function(e){if(this.currentlyDisplayedSuggestions)if(isNaN(e))this.currentlyDisplayedSuggestions[e]&&m.$$(this.currentlyDisplayedSuggestions[e].element).trigger("click");else{var t=f.findWhere(this.currentlyDisplayedSuggestions,{pos:e});t&&m.$$(t.element).trigger("click")}},t.prototype.handlePopulateOmnibox=function(e){var t=this;u.Assert.exists(e);var n=new Promise(function(n,o){var i=t.usageAnalytics.getTopQueries({pageSize:t.options.numberOfSuggestions,queryText:e.completeQueryExpression.word});i.then(function(o){t.resultsToBuildWith=f.map(o,function(e){return{value:e}}),t.lastSuggestions=o,f.isEmpty(t.resultsToBuildWith)||""==e.completeQueryExpression.word||t.partialQueries.push(e.completeQueryExpression.word);var i=t.suggestionForOmnibox.buildOmniboxElement(t.resultsToBuildWith,e);t.currentlyDisplayedSuggestions={},i&&f.map(m.$$(i).findAll(".coveo-omnibox-selectable"),function(e,n){t.currentlyDisplayedSuggestions[m.$$(e).text()]={element:e,pos:n}}),n({element:i,zIndex:t.options.omniboxZIndex})}),i.catch(function(){n({element:void 0})})});e.rows.push({deferred:n})},t.prototype.onRowSelection=function(e,t){t.clear(),t.closeOmnibox(),this.queryStateModel.set(h.QueryStateModel.attributesEnum.q,e),this.usageAnalytics.logSearchEvent(this.getOmniboxAnalyticsEventCause(),{partialQueries:this.cleanCustomData(this.partialQueries),suggestionRanking:f.indexOf(f.pluck(this.resultsToBuildWith,"value"),e),suggestions:this.cleanCustomData(this.lastSuggestions),partialQuery:t.completeQueryExpression.word}),this.queryController.executeQuery()},t.prototype.onRowTab=function(e,t){t.clear(),t.closeOmnibox(),this.queryStateModel.set(h.QueryStateModel.attributesEnum.q,""+e),this.usageAnalytics.logCustomEvent(this.getOmniboxAnalyticsEventCause(),{partialQueries:this.cleanCustomData(this.partialQueries),suggestionRanking:f.indexOf(f.pluck(this.resultsToBuildWith,"value"),e),suggestions:this.cleanCustomData(this.lastSuggestions),partialQuery:t.completeQueryExpression.word},this.element)},t.prototype.cleanCustomData=function(e,t){void 0===t&&(t=256),e=f.compact(f.filter(e,function(e,t,n){return 0===t||e!==n[t-1]})),e=f.map(e,function(e){return e.replace(/;/g,"")});var n=[];return f.reduceRight(e,function(e,o){var i=e+o.length;return i<=t&&n.push(o),i},0),e=n.reverse(),e.join(";").length>=256?this.cleanCustomData(e,t-10):e.join(";")},t.prototype.getOmniboxAnalyticsEventCause=function(){return this.searchInterface instanceof b.StandaloneSearchInterface?p.analyticsActionCauseList.omniboxFromLink:p.analyticsActionCauseList.omniboxAnalytics},t.ID="AnalyticsSuggestions",t.options={omniboxZIndex:s.ComponentOptions.buildNumberOption({defaultValue:52,min:0}),headerTitle:s.ComponentOptions.buildLocalizedStringOption({defaultValue:a.l("SuggestedQueries")}),numberOfSuggestions:s.ComponentOptions.buildNumberOption({defaultValue:5,min:1})},t}(r.Component);t.AnalyticsSuggestions=v,d.Initialization.registerAutoCreateComponent(v)},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=n(26),s=n(2);n(364);var r=function(){function e(){this.logger=new o.Logger(this)}return e.prototype.withOwner=function(e){return this.eventOwner=e,this},e.prototype.withElement=function(e){return e instanceof HTMLElement?this.element=s.$$(e):this.element=e,this},e.prototype.withLabel=function(e){return this.label=e,this},e.prototype.withSelectAction=function(e){return this.clickAction=e,this.enterKeyboardAction=e,this},e.prototype.withClickAction=function(e){return this.clickAction=e,this},e.prototype.withEnterKeyboardAction=function(e){return this.enterKeyboardAction=e,this},e.prototype.withFocusAndMouseEnterAction=function(e){return this.focusAction=e,this.mouseenterAction=e,this},e.prototype.withFocusAction=function(e){return this.focusAction=e,this},e.prototype.withMouseEnterAction=function(e){return this.mouseenterAction=e,this},e.prototype.withBlurAndMouseLeaveAction=function(e){return this.mouseleaveAction=e,this.blurAction=e,this},e.prototype.withMouseLeaveAction=function(e){return this.mouseleaveAction=e,this},e.prototype.withBlurAction=function(e){return this.blurAction=e,this},e.prototype.build=function(){return this.element||(this.element=s.$$("div")),this.ensureCorrectRole(),this.ensureCorrectLabel(),this.ensureSelectAction(),this.ensureUnselectAction(),this.ensureMouseenterAndFocusAction(),this.ensureMouseleaveAndBlurAction(),this.ensureDifferentiationBetweenKeyboardAndMouseFocus(),this},e.prototype.ensureDifferentiationBetweenKeyboardAndMouseFocus=function(){var e=this,t="coveo-accessible-button-pressed",n="coveo-accessible-button-focused";s.$$(this.element).addClass("coveo-accessible-button"),s.$$(this.element).on("mousedown",function(){s.$$(e.element).addClass(t),s.$$(e.element).removeClass(n)}),s.$$(this.element).on("mouseup",function(){return s.$$(e.element).removeClass(t)}),s.$$(this.element).on("focus",function(){s.$$(e.element).hasClass(t)||s.$$(e.element).addClass(n)}),s.$$(this.element).on("blur",function(){return s.$$(e.element).removeClass(n)})},e.prototype.ensureCorrectRole=function(){this.element.setAttribute("role","button")},e.prototype.ensureCorrectLabel=function(){if(!this.label)return void this.logger.error("Missing label to create an accessible button !");this.element.setAttribute("aria-label",this.label),this.element.setAttribute("title",this.label)},e.prototype.ensureTabIndex=function(){this.element.setAttribute("tabindex","0")},e.prototype.ensureSelectAction=function(){var e=this;this.enterKeyboardAction&&(this.ensureTabIndex(),this.bindEvent("keyup",i.KeyboardUtils.keypressAction(i.KEYBOARD.ENTER,function(t){return e.enterKeyboardAction(t)}))),this.clickAction&&this.bindEvent("click",this.clickAction)},e.prototype.ensureUnselectAction=function(){this.blurAction&&this.bindEvent("blur",this.blurAction),this.mouseleaveAction&&this.bindEvent("mouseleave",this.mouseleaveAction)},e.prototype.ensureMouseenterAndFocusAction=function(){this.mouseenterAction&&this.bindEvent("mouseenter",this.mouseenterAction),this.focusAction&&this.bindEvent("focus",this.focusAction)},e.prototype.ensureMouseleaveAndBlurAction=function(){this.mouseleaveAction&&this.bindEvent("mouseleave",this.mouseleaveAction),this.blurAction&&this.bindEvent("blur",this.blurAction)},e.prototype.bindEvent=function(e,t){this.eventOwner?this.eventOwner.on(this.element,e,t):s.$$(this.element).on(e,t)},e}();t.AccessibleButton=r},358:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(65),i=n(2),s=n(0),r=function(){function e(e,t,n){this.structure=e,this.onSelect=t,this.onTabPress=n}return e.prototype.buildOmniboxElement=function(e,t){var n;if(0!=e.length){if(n=i.$$("div").el,this.structure.header){var o=this.buildElementHeader();n.appendChild(o)}var r=this.buildRowElements(e,t);s.each(r,function(e){n.appendChild(e)})}return n},e.prototype.buildElementHeader=function(){return i.$$("div",void 0,this.structure.header.template({headerTitle:this.structure.header.title})).el},e.prototype.buildRowElements=function(e,t){var n=this,r=[];return s.each(e,function(e){var s=i.$$("div",void 0,n.structure.row({rawValue:e.value,data:o.DomUtils.highlightElement(e.value,t.completeQueryExpression.word)})).el;i.$$(s).on("click",function(){n.onSelect.call(n,e.value,t)}),i.$$(s).on("keyboardSelect",function(){n.onSelect.call(n,e.value,t)}),i.$$(s).on("tabSelect",function(){n.onTabPress.call(n,e.value,t)}),r.push(s)}),r},e}();t.SuggestionForOmnibox=r},364:function(e,t){}});