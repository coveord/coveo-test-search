{"version":3,"sources":["CardActionBar.min__5f3280c404a1ee75a113.js","./src/ui/CardActionBar/CardActionBar.ts"],"names":["webpackJsonpCoveo__temporary","240","module","exports","__webpack_require__","__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","element","options","bindings","result","CardActionBar","ID","removedTabIndexElements","ComponentOptions","initComponentOptions","parentResult","$$","closest","Assert","check","undefined","hidden","addClass","appendArrow","bindEvents","_","forEach","findAll","elem","hasAttribute","getAttribute","push","removeAttribute","style","transition","transform","_this","show","e","setAttribute","hide","removeClass","on","openOnMouseOver","arrowContainer","className","tabindex","el","bind","KeyboardUtils","keypressAction","KEYBOARD","ENTER","arrowUp","SVGIcons","icons","SVGDom","addClassToSVGInContainer","appendChild","doExport","exportGlobally","buildBooleanOption","defaultValue","depend","Component","Initialization","registerAutoCreateComponent","598"],"mappings":"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","file":"CardActionBar.min__5f3280c404a1ee75a113.js","sourcesContent":["webpackJsonpCoveo__temporary([74],{\n\n/***/ 240:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(7);\r\nvar ComponentOptions_1 = __webpack_require__(8);\r\nvar Initialization_1 = __webpack_require__(2);\r\nvar Assert_1 = __webpack_require__(5);\r\nvar Dom_1 = __webpack_require__(1);\r\nvar KeyboardUtils_1 = __webpack_require__(25);\r\nvar _ = __webpack_require__(0);\r\nvar GlobalExports_1 = __webpack_require__(3);\r\n__webpack_require__(598);\r\nvar SVGIcons_1 = __webpack_require__(12);\r\nvar SVGDom_1 = __webpack_require__(16);\r\n/**\r\n * The `CardActionBar` component displays an action bar at the bottom of a card result (see\r\n * [Result Layouts](https://docs.coveo.com/en/360/)). It is a simple container for buttons or complementary\r\n * information.\r\n *\r\n * You should place this component at the bottom of a card result template (i.e., as the last child of the surrounding\r\n * `coveo-result-frame` div).\r\n *\r\n * See [Using the CardActionBar Component](https://docs.coveo.com/en/1349/#using-the-cardactionbar-component)\r\n */\r\nvar CardActionBar = /** @class */ (function (_super) {\r\n    __extends(CardActionBar, _super);\r\n    /**\r\n     * Creates a new `CardActionBar` component.\r\n     * @param element The HTMLElement on which to instantiate the component.\r\n     * @param options The options for the component.\r\n     * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n     * automatically resolved (with a slower execution time).\r\n     * @param result The parent [query result]{@link IQueryResult}..\r\n     */\r\n    function CardActionBar(element, options, bindings, result) {\r\n        var _this = _super.call(this, element, CardActionBar.ID, bindings) || this;\r\n        _this.element = element;\r\n        _this.options = options;\r\n        _this.result = result;\r\n        _this.removedTabIndexElements = [];\r\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, CardActionBar, options);\r\n        _this.parentResult = Dom_1.$$(_this.element).closest('CoveoResult');\r\n        Assert_1.Assert.check(_this.parentResult !== undefined, 'ActionBar needs to be a child of a Result');\r\n        if (_this.options.hidden) {\r\n            Dom_1.$$(_this.parentResult).addClass('coveo-clickable');\r\n            _this.appendArrow();\r\n            _this.bindEvents();\r\n            _.forEach(Dom_1.$$(_this.element).findAll('*'), function (elem) {\r\n                if (elem.hasAttribute('tabindex') && elem.getAttribute('tabindex') == '0') {\r\n                    _this.removedTabIndexElements.push(elem);\r\n                    elem.removeAttribute('tabindex');\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            _this.element.style.transition = 'none';\r\n            _this.element.style.transform = 'none';\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Shows the component.\r\n     */\r\n    CardActionBar.prototype.show = function () {\r\n        Dom_1.$$(this.element).addClass('coveo-opened');\r\n        _.forEach(this.removedTabIndexElements, function (e) {\r\n            e.setAttribute('tabindex', '0');\r\n        });\r\n    };\r\n    /**\r\n     * Hides the component.\r\n     */\r\n    CardActionBar.prototype.hide = function () {\r\n        Dom_1.$$(this.element).removeClass('coveo-opened');\r\n        _.forEach(this.removedTabIndexElements, function (e) {\r\n            e.removeAttribute('tabindex');\r\n        });\r\n    };\r\n    CardActionBar.prototype.bindEvents = function () {\r\n        var _this = this;\r\n        Dom_1.$$(this.parentResult).on('click', function () { return _this.show(); });\r\n        Dom_1.$$(this.parentResult).on('mouseleave', function () { return _this.hide(); });\r\n        Dom_1.$$(this.element).on('focusin', function () { return _this.show(); });\r\n        Dom_1.$$(this.element).on('focusout', function () { return _this.hide(); });\r\n        if (this.options.openOnMouseOver) {\r\n            Dom_1.$$(this.arrowContainer).on('mouseenter', function () { return _this.show(); });\r\n        }\r\n    };\r\n    CardActionBar.prototype.appendArrow = function () {\r\n        var _this = this;\r\n        this.arrowContainer = Dom_1.$$('div', { className: 'coveo-card-action-bar-arrow-container', tabindex: 0 }).el;\r\n        this.bind.on(this.arrowContainer, 'keyup', KeyboardUtils_1.KeyboardUtils.keypressAction(KeyboardUtils_1.KEYBOARD.ENTER, function () { return _this.show(); }));\r\n        var arrowUp = Dom_1.$$('span', { className: 'coveo-icon coveo-card-action-bar-arrow-icon' }, SVGIcons_1.SVGIcons.icons.arrowUp);\r\n        SVGDom_1.SVGDom.addClassToSVGInContainer(arrowUp.el, 'coveo-card-action-bar-arrow-svg');\r\n        this.arrowContainer.appendChild(arrowUp.el);\r\n        this.parentResult.appendChild(this.arrowContainer);\r\n    };\r\n    CardActionBar.ID = 'CardActionBar';\r\n    CardActionBar.doExport = function () {\r\n        GlobalExports_1.exportGlobally({\r\n            CardActionBar: CardActionBar\r\n        });\r\n    };\r\n    /**\r\n     * @componentOptions\r\n     */\r\n    CardActionBar.options = {\r\n        /**\r\n         * Whether to hide the component by default and append a visual indicator to its parent query result.\r\n         *\r\n         * If this option is set to `true`, the component will show itself when the user clicks its parent query result.\r\n         *\r\n         * Default value is `true`.\r\n         */\r\n        hidden: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\r\n        /**\r\n         * Whether to open the `CardActionBar` when the cursor hovers over it.\r\n         *\r\n         * This option is only meaningful when [`hidden`]{@link CardActionBar.options.hidden} is set to `true`.\r\n         *\r\n         * Default value is `true`.\r\n         */\r\n        openOnMouseOver: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true, depend: 'hidden' })\r\n    };\r\n    return CardActionBar;\r\n}(Component_1.Component));\r\nexports.CardActionBar = CardActionBar;\r\nInitialization_1.Initialization.registerAutoCreateComponent(CardActionBar);\r\n\n\n/***/ }),\n\n/***/ 598:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// CardActionBar.min__5f3280c404a1ee75a113.js","import { Component } from '../Base/Component';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { Assert } from '../../misc/Assert';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { KeyboardUtils, KEYBOARD } from '../../utils/KeyboardUtils';\r\nimport * as _ from 'underscore';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\nimport 'styling/_CardActionBar';\r\nimport { SVGIcons } from '../../utils/SVGIcons';\r\nimport { SVGDom } from '../../utils/SVGDom';\r\n\r\nexport interface ICardActionBarOptions {\r\n  hidden?: boolean;\r\n  openOnMouseOver?: boolean;\r\n}\r\n\r\n/**\r\n * The `CardActionBar` component displays an action bar at the bottom of a card result (see\r\n * [Result Layouts](https://docs.coveo.com/en/360/)). It is a simple container for buttons or complementary\r\n * information.\r\n *\r\n * You should place this component at the bottom of a card result template (i.e., as the last child of the surrounding\r\n * `coveo-result-frame` div).\r\n *\r\n * See [Using the CardActionBar Component](https://docs.coveo.com/en/1349/#using-the-cardactionbar-component)\r\n */\r\nexport class CardActionBar extends Component {\r\n  static ID = 'CardActionBar';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      CardActionBar: CardActionBar\r\n    });\r\n  };\r\n\r\n  parentResult: HTMLElement;\r\n  arrowContainer: HTMLElement;\r\n  removedTabIndexElements: HTMLElement[] = [];\r\n\r\n  /**\r\n   * @componentOptions\r\n   */\r\n  static options: ICardActionBarOptions = {\r\n    /**\r\n     * Whether to hide the component by default and append a visual indicator to its parent query result.\r\n     *\r\n     * If this option is set to `true`, the component will show itself when the user clicks its parent query result.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    hidden: ComponentOptions.buildBooleanOption({ defaultValue: true }),\r\n\r\n    /**\r\n     * Whether to open the `CardActionBar` when the cursor hovers over it.\r\n     *\r\n     * This option is only meaningful when [`hidden`]{@link CardActionBar.options.hidden} is set to `true`.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    openOnMouseOver: ComponentOptions.buildBooleanOption({ defaultValue: true, depend: 'hidden' })\r\n  };\r\n\r\n  /**\r\n   * Creates a new `CardActionBar` component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   * @param result The parent [query result]{@link IQueryResult}..\r\n   */\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options?: ICardActionBarOptions,\r\n    bindings?: IComponentBindings,\r\n    public result?: IQueryResult\r\n  ) {\r\n    super(element, CardActionBar.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, CardActionBar, options);\r\n\r\n    this.parentResult = $$(this.element).closest('CoveoResult');\r\n    Assert.check(this.parentResult !== undefined, 'ActionBar needs to be a child of a Result');\r\n\r\n    if (this.options.hidden) {\r\n      $$(this.parentResult).addClass('coveo-clickable');\r\n      this.appendArrow();\r\n      this.bindEvents();\r\n\r\n      _.forEach($$(this.element).findAll('*'), (elem: HTMLElement) => {\r\n        if (elem.hasAttribute('tabindex') && elem.getAttribute('tabindex') == '0') {\r\n          this.removedTabIndexElements.push(elem);\r\n          elem.removeAttribute('tabindex');\r\n        }\r\n      });\r\n    } else {\r\n      this.element.style.transition = 'none';\r\n      this.element.style.transform = 'none';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Shows the component.\r\n   */\r\n  public show() {\r\n    $$(this.element).addClass('coveo-opened');\r\n    _.forEach(this.removedTabIndexElements, (e: Element) => {\r\n      e.setAttribute('tabindex', '0');\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Hides the component.\r\n   */\r\n  public hide() {\r\n    $$(this.element).removeClass('coveo-opened');\r\n    _.forEach(this.removedTabIndexElements, (e: Element) => {\r\n      e.removeAttribute('tabindex');\r\n    });\r\n  }\r\n\r\n  private bindEvents() {\r\n    $$(this.parentResult).on('click', () => this.show());\r\n    $$(this.parentResult).on('mouseleave', () => this.hide());\r\n    $$(this.element).on('focusin', () => this.show());\r\n    $$(this.element).on('focusout', () => this.hide());\r\n    if (this.options.openOnMouseOver) {\r\n      $$(this.arrowContainer).on('mouseenter', () => this.show());\r\n    }\r\n  }\r\n\r\n  private appendArrow() {\r\n    this.arrowContainer = $$('div', { className: 'coveo-card-action-bar-arrow-container', tabindex: 0 }).el;\r\n    this.bind.on(\r\n      this.arrowContainer,\r\n      'keyup',\r\n      KeyboardUtils.keypressAction(KEYBOARD.ENTER, () => this.show())\r\n    );\r\n    const arrowUp = $$('span', { className: 'coveo-icon coveo-card-action-bar-arrow-icon' }, SVGIcons.icons.arrowUp);\r\n    SVGDom.addClassToSVGInContainer(arrowUp.el, 'coveo-card-action-bar-arrow-svg');\r\n    this.arrowContainer.appendChild(arrowUp.el);\r\n    this.parentResult.appendChild(this.arrowContainer);\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(CardActionBar);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/CardActionBar/CardActionBar.ts"],"sourceRoot":""}