{"version":3,"sources":["./src/ui/ResultTagging/ResultTagging.ts","./sass/_ResultTagging.scss"],"names":[],"mappings":"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","file":"ResultTagging__1728cc16e4d2d82aa5db.js","sourcesContent":["import 'styling/_ResultTagging';\r\nimport * as _ from 'underscore';\r\nimport { exportGlobally } from '../../GlobalExports';\r\nimport { Assert } from '../../misc/Assert';\r\nimport { QueryStateModel } from '../../models/QueryStateModel';\r\nimport { IFieldDescription } from '../../rest/FieldDescription';\r\nimport { IIndexFieldValue } from '../../rest/FieldValue';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { ITaggingRequest } from '../../rest/TaggingRequest';\r\nimport { l } from '../../strings/Strings';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { KEYBOARD, KeyboardUtils } from '../../utils/KeyboardUtils';\r\nimport { StringUtils } from '../../utils/StringUtils';\r\nimport { SVGDom } from '../../utils/SVGDom';\r\nimport { SVGIcons } from '../../utils/SVGIcons';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { analyticsActionCauseList } from '../Analytics/AnalyticsActionListMeta';\r\nimport { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { IFieldOption } from '../Base/IComponentOptions';\r\nimport { Initialization } from '../Base/Initialization';\r\n\r\nexport interface IResultTaggingOptions {\r\n  field: IFieldOption;\r\n  suggestBoxSize?: number;\r\n  autoCompleteTimer?: number;\r\n}\r\n\r\nexport interface IAnalyticsResultTaggingMeta {\r\n  facetId: string;\r\n  facetField: string;\r\n  facetValue?: string;\r\n  facetTitle?: string;\r\n}\r\n\r\n/**\r\n * The ResultTagging component lists the current tag field values of its associated result and renders a control that\r\n * allows the end user to add values to a tag field.\r\n *\r\n * This component is a result template component (see [Result Templates](https://docs.coveo.com/en/413/)).\r\n *\r\n * **Note:**\r\n * > The ResultTagging component is not supported with Coveo Cloud V2. To implement the ResultTagging component in Coveo Cloud V1, contact [Coveo Support](https://support.coveo.com/s/).\r\n *\r\n * @notSupportedIn salesforcefree\r\n */\r\nexport class ResultTagging extends Component {\r\n  static ID = 'ResultTagging';\r\n  static autoCompleteClass = 'coveo-result-tagging-auto-complete';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      ResultTagging: ResultTagging\r\n    });\r\n  };\r\n\r\n  /**\r\n   * @componentOptions\r\n   */\r\n  static options: IResultTaggingOptions = {\r\n    /**\r\n     * Specifies the tag field that the component will use.\r\n     *\r\n     * Specifying a value for this options is necessary for this component to work.\r\n     */\r\n    field: ComponentOptions.buildFieldOption({\r\n      match: (field: IFieldDescription) => field.type == 'Tag',\r\n      required: true\r\n    }),\r\n\r\n    /**\r\n     * Specifies the number of items to show in the list of suggested items.\r\n     *\r\n     * Default value is `5`. Minimum value is `0 `.\r\n     */\r\n    suggestBoxSize: ComponentOptions.buildNumberOption({ defaultValue: 5, min: 0 }),\r\n\r\n    /**\r\n     * Specifies how much time (in milliseconds) it takes for the list of suggested items to disappear when it loses\r\n     * focus.\r\n     *\r\n     * Default value is `2000`. Minimum value is `0`.\r\n     */\r\n    autoCompleteTimer: ComponentOptions.buildNumberOption({ defaultValue: 2000, min: 0 })\r\n  };\r\n\r\n  static AUTO_COMPLETE_CLASS = 'coveo-result-tagging-auto-complete';\r\n\r\n  private autoCompleteZone: HTMLElement;\r\n  private textBox: HTMLInputElement;\r\n  private autoCompletePopup: HTMLElement;\r\n  private tagZone: HTMLElement;\r\n  private tags: string[];\r\n\r\n  /**\r\n   * Creates a new ResultTagging component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the ResultTagging component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   * @param result The result to associate the component with.\r\n   */\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options?: IResultTaggingOptions,\r\n    bindings?: IComponentBindings,\r\n    public result?: IQueryResult\r\n  ) {\r\n    super(element, ResultTagging.ID, bindings);\r\n\r\n    this.options = ComponentOptions.initComponentOptions(element, ResultTagging, options);\r\n    this.result = result || this.resolveResult();\r\n    Assert.exists(this.componentOptionsModel);\r\n    Assert.exists(this.result);\r\n\r\n    if (!this.options.field) {\r\n      this.logger.error('You must specify a field to the ResultTagging component');\r\n      return;\r\n    }\r\n    let fieldValue = Utils.getFieldValue(this.result, <string>this.options.field);\r\n    if (fieldValue && Utils.isNonEmptyString(fieldValue)) {\r\n      this.tags = fieldValue.split(';');\r\n    } else if (fieldValue && Utils.isNonEmptyArray(fieldValue)) {\r\n      this.tags = fieldValue;\r\n    } else {\r\n      this.tags = [];\r\n    }\r\n    this.tags = _.map(this.tags, t => {\r\n      return t.trim();\r\n    });\r\n    this.tagZone = $$('div', {\r\n      className: 'coveo-result-tagging-tag-zone'\r\n    }).el;\r\n    element.appendChild(this.tagZone);\r\n    element.appendChild(this.buildTagIcon());\r\n\r\n    this.autoCompleteZone = $$('div', {\r\n      className: 'coveo-result-tagging-auto-complete-zone'\r\n    }).el;\r\n    element.appendChild(this.autoCompleteZone);\r\n    this.autoCompleteZone.appendChild(this.buildTextBox());\r\n    this.autoCompleteZone.appendChild(this.buildAddIcon());\r\n    this.autoCompleteZone.appendChild(this.buildClearIcon());\r\n    this.buildExistingTags();\r\n  }\r\n\r\n  private buildExistingTags() {\r\n    if (this.tags) {\r\n      _.each(this.tags, (tag: string) => {\r\n        this.tagZone.appendChild(this.buildTagValue(tag));\r\n      });\r\n    }\r\n  }\r\n\r\n  private buildTagIcon(): HTMLElement {\r\n    let tagZone = $$('div', {\r\n      className: 'coveo-result-tagging-add-tag'\r\n    });\r\n    let tagTextBox = $$('span', {\r\n      className: 'coveo-result-tagging-add-tag-text'\r\n    });\r\n    tagTextBox.text(l('EnterTag'));\r\n    let tagIcon = $$('span', {\r\n      className: 'coveo-result-tagging-add-tag-icon'\r\n    });\r\n    tagIcon.on('click', () => {\r\n      _.defer(() => {\r\n        this.focusOnTextBox();\r\n      }, 20);\r\n    });\r\n    tagZone.el.appendChild(tagIcon.el);\r\n    tagZone.append(tagTextBox.el);\r\n    tagZone.setAttribute('title', l('EnterTag'));\r\n    return tagZone.el;\r\n  }\r\n\r\n  private focusOnTextBox() {\r\n    this.textBox.focus();\r\n  }\r\n\r\n  private buildTagValue(tagValue: string): HTMLElement {\r\n    let tag = $$('div', {\r\n      className: 'coveo-result-tagging-coveo-tag'\r\n    });\r\n    tag.el.appendChild(this.buildShortenedTagWithTitle(tagValue));\r\n    let deleteIcon = $$(\r\n      'span',\r\n      {\r\n        className: 'coveo-result-tagging-delete-icon'\r\n      },\r\n      SVGIcons.icons.checkboxHookExclusionMore\r\n    );\r\n    SVGDom.addClassToSVGInContainer(deleteIcon.el, 'coveo-result-tagging-delete-icon-svg');\r\n    tag.el.appendChild(deleteIcon.el);\r\n    deleteIcon.on('click', () => {\r\n      this.doRemoveTag(tag.el, tagValue.toLowerCase());\r\n    });\r\n    return tag.el;\r\n  }\r\n\r\n  private buildShortenedTagWithTitle(tagValue: string): HTMLElement {\r\n    let shortenedTag = StringUtils.removeMiddle(tagValue, 16, '...');\r\n    let clickableValue = $$('a', {\r\n      title: tagValue,\r\n      href: 'javascript:void(0);'\r\n    });\r\n    clickableValue.text(shortenedTag);\r\n\r\n    this.bindFacetEventOnValue(clickableValue.el, tagValue);\r\n    return clickableValue.el;\r\n  }\r\n\r\n  private buildTextBox(): HTMLInputElement {\r\n    this.textBox = <HTMLInputElement>$$('input', {\r\n      type: 'text',\r\n      className: 'coveo-add-tag-textbox',\r\n      placeholder: l('EnterTag')\r\n    }).el;\r\n\r\n    this.autoCompletePopup = $$('div', {\r\n      className: ResultTagging.autoCompleteClass\r\n    }).el;\r\n    this.autoCompleteZone.appendChild(this.autoCompletePopup);\r\n    this.manageAutocompleteAutoHide();\r\n    $$(this.textBox).on('keyup', (e: KeyboardEvent) => {\r\n      if (e.keyCode == KEYBOARD.UP_ARROW || e.keyCode == KEYBOARD.DOWN_ARROW || e.keyCode == KEYBOARD.ENTER) {\r\n        this.manageUpDownEnter(e.keyCode);\r\n      } else if (!KeyboardUtils.isArrowKeyPushed(e.keyCode)) {\r\n        this.populateSuggestions();\r\n      }\r\n      $$(this.element).removeClass('coveo-error');\r\n    });\r\n    $$(this.textBox).on('click', () => {\r\n      this.populateSuggestions();\r\n    });\r\n    return this.textBox;\r\n  }\r\n\r\n  private buildAddIcon(): HTMLElement {\r\n    let icon = $$(\r\n      'div',\r\n      {\r\n        className: 'coveo-result-tagging-add-tag-tick-icon'\r\n      },\r\n      SVGIcons.icons.taggingOk\r\n    );\r\n    SVGDom.addClassToSVGInContainer(icon.el, 'coveo-result-tagging-add-tag-tick-icon-svg');\r\n    let clickable = $$('span');\r\n    clickable.on('click', () => {\r\n      this.doAddTag();\r\n    });\r\n    icon.el.appendChild(clickable.el);\r\n    return icon.el;\r\n  }\r\n\r\n  private buildClearIcon(): HTMLElement {\r\n    let icon = $$(\r\n      'div',\r\n      {\r\n        className: 'coveo-result-tagging-clear-icon'\r\n      },\r\n      SVGIcons.icons.checkboxHookExclusionMore\r\n    );\r\n    SVGDom.addClassToSVGInContainer(icon.el, 'coveo-result-tagging-clear-icon-svg');\r\n    let clickable = $$('span');\r\n    clickable.on('click', () => {\r\n      this.textBox.value = '';\r\n    });\r\n    icon.el.appendChild(clickable.el);\r\n    return icon.el;\r\n  }\r\n\r\n  private bindFacetEventOnValue(element: HTMLElement, value: string) {\r\n    let facetAttributeName = QueryStateModel.getFacetId(<string>this.options.field);\r\n    let facetModel: string[] = this.queryStateModel.get(facetAttributeName);\r\n    let facets: Component[] = this.componentStateModel.get(facetAttributeName);\r\n    let atLeastOneFacetIsEnabled = _.filter(facets, (value: Component) => !value.disabled).length > 0;\r\n\r\n    if (facetModel != null && atLeastOneFacetIsEnabled) {\r\n      $$(element).on('click', () => {\r\n        if (_.contains(facetModel, value)) {\r\n          this.queryStateModel.set(facetAttributeName, _.without(facetModel, value));\r\n        } else {\r\n          this.queryStateModel.set(facetAttributeName, _.union(facetModel, [value]));\r\n        }\r\n        this.queryController.deferExecuteQuery({\r\n          beforeExecuteQuery: () =>\r\n            this.usageAnalytics.logSearchEvent<IAnalyticsResultTaggingMeta>(analyticsActionCauseList.documentTag, {\r\n              facetId: <string>this.options.field,\r\n              facetField: <string>this.options.field,\r\n              facetValue: value\r\n            })\r\n        });\r\n      });\r\n\r\n      if (_.contains(facetModel, value)) {\r\n        $$(element).addClass('coveo-selected');\r\n      }\r\n      $$(element).addClass('coveo-clickable');\r\n    }\r\n  }\r\n\r\n  private clearPopup() {\r\n    $$(this.autoCompletePopup).hide();\r\n    $$(this.autoCompletePopup).empty();\r\n  }\r\n\r\n  private showPopup() {\r\n    $$(this.autoCompletePopup).show();\r\n  }\r\n\r\n  private populateSuggestions() {\r\n    let endpoint = this.queryController.getEndpoint();\r\n    let searchText = this.textBox.value;\r\n    let searchOptions = {\r\n      field: <string>this.options.field,\r\n      ignoreAccents: true,\r\n      sortCriteria: 'occurences',\r\n      maximumNumberOfValues: this.options.suggestBoxSize,\r\n      queryOverride: '@uri',\r\n      pattern: this.buildRegEx(searchText),\r\n      patternType: 'RegularExpression'\r\n    };\r\n    endpoint.listFieldValues(searchOptions).then((fieldValues: IIndexFieldValue[]) => {\r\n      this.clearPopup();\r\n      _.each(fieldValues, (fieldValue: IIndexFieldValue) => {\r\n        this.autoCompletePopup.appendChild(this.buildSelectableValue(fieldValue.lookupValue));\r\n      });\r\n      this.showPopup();\r\n      this.autoCompletePopup.style.width = this.textBox.offsetWidth + ' px';\r\n    });\r\n  }\r\n\r\n  private manageAutocompleteAutoHide() {\r\n    let timeout: any;\r\n\r\n    $$(this.textBox).on('mouseover', () => {\r\n      clearTimeout(timeout);\r\n    });\r\n\r\n    $$(this.autoCompletePopup).on('mouseout', e => {\r\n      if ($$(<HTMLElement>e.target).hasClass(ResultTagging.autoCompleteClass)) {\r\n        timeout = setTimeout(() => {\r\n          this.clearPopup();\r\n        }, this.options.autoCompleteTimer);\r\n      }\r\n    });\r\n\r\n    $$(this.autoCompletePopup).on('mouseenter', () => {\r\n      clearTimeout(timeout);\r\n    });\r\n\r\n    $$(this.element).on('mouseenter', () => {\r\n      this.clearPopup();\r\n      $$(this.element).addClass('coveo-opened');\r\n    });\r\n\r\n    $$($$(this.element).closest('.CoveoResult')).on('mouseleave', () => {\r\n      this.clearPopup();\r\n      if (this.textBox.value == '') {\r\n        $$(this.element).removeClass('coveo-opened');\r\n      }\r\n    });\r\n\r\n    $$($$(this.element).closest('.CoveoResult')).on('focusout', e => {\r\n      if (this.textBox.value != '' && $$(<HTMLElement>e.target).closest('.CoveoResult') != $$(this.element).closest('.CoveoResult')) {\r\n        $$(this.element).addClass('coveo-error');\r\n      }\r\n    });\r\n\r\n    $$($$(this.element).closest('.CoveoResult')).on('focusin', () => {\r\n      $$(this.element).removeClass('coveo-error');\r\n    });\r\n  }\r\n\r\n  // Exclude tags that are already on the result (Since we can tag with the same value twice.\r\n  private buildRegEx(searchTerm: string) {\r\n    return '(?=.*' + searchTerm + ')' + _.map(this.tags, (tag: string) => this.buildTermToExclude(tag)).join('') + '.*';\r\n  }\r\n\r\n  private buildTermToExclude(term: string) {\r\n    return '(?!^' + term + '$)';\r\n  }\r\n\r\n  private manageUpDownEnter(code: number) {\r\n    let selectableArray = $$(this.element).findAll('.coveo-selectable');\r\n    if (code == KEYBOARD.ENTER) {\r\n      this.doAddTag();\r\n      return;\r\n    }\r\n\r\n    if (selectableArray.length > 0) {\r\n      let newIndex = this.computeNextIndex(code, selectableArray);\r\n      newIndex = Math.max(0, newIndex);\r\n      newIndex = Math.min(selectableArray.length - 1, newIndex);\r\n      let selected = $$(selectableArray[newIndex]);\r\n      selected.addClass('coveo-selected');\r\n      this.textBox.value = selected.text();\r\n    }\r\n  }\r\n\r\n  private computeNextIndex(code: number, selectableArray: HTMLElement[]): number {\r\n    let nextIndex = 0;\r\n    _.each(selectableArray, (selectable: HTMLElement, index) => {\r\n      if ($$(selectable).hasClass('coveo-selected')) {\r\n        if (code == KEYBOARD.UP_ARROW) {\r\n          nextIndex = index - 1;\r\n        } else if (code == KEYBOARD.DOWN_ARROW) {\r\n          nextIndex = index + 1;\r\n        }\r\n        $$(selectable).removeClass('coveo-selected');\r\n      }\r\n    });\r\n    return nextIndex;\r\n  }\r\n\r\n  private buildSelectableValue(lookupValue: string): HTMLElement {\r\n    let line = $$('div', {\r\n      className: 'coveo-selectable'\r\n    });\r\n    line.el.appendChild(this.buildShortenedTagWithTitle(lookupValue));\r\n    line.on('click', () => {\r\n      this.doAddTagWithValue(lookupValue);\r\n    });\r\n    return line.el;\r\n  }\r\n\r\n  private doRemoveTag(element: HTMLElement, tagValue: string) {\r\n    let request: ITaggingRequest = {\r\n      fieldName: <string>this.options.field,\r\n      fieldValue: tagValue,\r\n      doAdd: false,\r\n      uniqueId: this.result.uniqueId\r\n    };\r\n    this.queryController\r\n      .getEndpoint()\r\n      .tagDocument(request)\r\n      .then(() => {\r\n        this.tags.splice(_.indexOf(this.tags, tagValue), 1);\r\n        $$(element).detach();\r\n      });\r\n  }\r\n\r\n  private doAddTagWithValue(tagValue: string) {\r\n    _.each(tagValue.split(','), (tag: string) => {\r\n      this.doAddSingleTagValue(tag);\r\n    });\r\n  }\r\n\r\n  private doAddSingleTagValue(tagValue: string) {\r\n    this.clearPopup();\r\n    if (_.indexOf(this.tags, tagValue) > -1) {\r\n      $$(this.element).addClass('coveo-error');\r\n      return;\r\n    }\r\n    this.tags.push(tagValue);\r\n    let request: ITaggingRequest = {\r\n      fieldName: <string>this.options.field,\r\n      fieldValue: tagValue,\r\n      doAdd: true,\r\n      uniqueId: this.result.uniqueId\r\n    };\r\n    this.queryController\r\n      .getEndpoint()\r\n      .tagDocument(request)\r\n      .then(() => {\r\n        this.tagZone.appendChild(this.buildTagValue(tagValue));\r\n        this.textBox.value = '';\r\n        $$(this.element).removeClass('coveo-error');\r\n      })\r\n      .catch(() => {\r\n        // We do this otherwise it's possible to add the same tag while we wait for the server's response\r\n        this.tags = _.without(this.tags, _.findWhere(this.tags, tagValue));\r\n      });\r\n  }\r\n\r\n  private doAddTag() {\r\n    let tagValue = Utils.trim(this.textBox.value.toLowerCase());\r\n    this.doAddTagWithValue(tagValue);\r\n  }\r\n}\r\nInitialization.registerAutoCreateComponent(ResultTagging);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultTagging/ResultTagging.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResultTagging.scss\n// module id = 662\n// module chunks = 61 88"],"sourceRoot":""}