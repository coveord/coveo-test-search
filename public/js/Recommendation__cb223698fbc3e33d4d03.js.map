{"version":3,"sources":["./src/ui/ResponsiveComponents/ResponsiveComponentsUtils.ts","./src/ui/Recommendation/Recommendation.ts","./src/events/QuickviewEvents.ts","./src/ui/Templates/DefaultRecommendationTemplate.ts","./src/ui/ResponsiveComponents/ResponsiveRecommendation.ts","./src/ui/ResponsiveComponents/ResponsiveDropdown/RecommendationDropdownContent.ts","./sass/_ResponsiveRecommendation.scss","./src/ui/Recommendation/RecommendationQuery.ts","./sass/_Recommendation.scss"],"names":[],"mappings":"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","file":"Recommendation__cb223698fbc3e33d4d03.js","sourcesContent":["import { Dom } from '../../utils/Dom';\r\nimport { ResponsiveDropdownContent } from './ResponsiveDropdown/ResponsiveDropdownContent';\r\n\r\nexport class ResponsiveComponentsUtils {\r\n  private static smallTabsClassName: string = 'coveo-small-tabs';\r\n  private static smallFacetClassName: string = 'coveo-small-facets';\r\n  private static smallRecommendationClassName: string = 'coveo-small-recommendation';\r\n\r\n  static shouldDrawFacetSlider(root: Dom, facetSliderElement: Dom): boolean {\r\n    return ResponsiveDropdownContent.isTargetInsideOpenedDropdown(facetSliderElement) || !this.isSmallFacetActivated(root);\r\n  }\r\n\r\n  static isSmallTabsActivated(root: Dom): boolean {\r\n    return root.hasClass(this.smallTabsClassName);\r\n  }\r\n\r\n  static isSmallFacetActivated(root: Dom): boolean {\r\n    return root.hasClass(this.smallFacetClassName);\r\n  }\r\n\r\n  static isSmallRecommendationActivated(root: Dom): boolean {\r\n    return root.hasClass(this.smallRecommendationClassName);\r\n  }\r\n\r\n  static activateSmallTabs(root: Dom): void {\r\n    root.addClass(this.smallTabsClassName);\r\n  }\r\n\r\n  static deactivateSmallTabs(root: Dom): void {\r\n    root.removeClass(this.smallTabsClassName);\r\n  }\r\n\r\n  static activateSmallFacet(root: Dom): void {\r\n    root.addClass(this.smallFacetClassName);\r\n  }\r\n\r\n  static deactivateSmallFacet(root: Dom): void {\r\n    root.removeClass(this.smallFacetClassName);\r\n  }\r\n\r\n  static activateSmallRecommendation(root: Dom): void {\r\n    root.addClass(this.smallRecommendationClassName);\r\n  }\r\n\r\n  static deactivateSmallRecommendation(root: Dom): void {\r\n    root.removeClass(this.smallRecommendationClassName);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveComponentsUtils.ts","import { SearchInterface, ISearchInterfaceOptions } from '../SearchInterface/SearchInterface';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { QueryEvents, IQuerySuccessEventArgs, IBuildingQueryEventArgs } from '../../events/QueryEvents';\r\nimport { OmniboxEvents } from '../../events/OmniboxEvents';\r\nimport { ResultListEvents } from '../../events/ResultListEvents';\r\nimport { SettingsEvents } from '../../events/SettingsEvents';\r\nimport { PreferencesPanelEvents } from '../../events/PreferencesPanelEvents';\r\nimport { AnalyticsEvents } from '../../events/AnalyticsEvents';\r\nimport { analyticsActionCauseList, IAnalyticsNoMeta } from '../Analytics/AnalyticsActionListMeta';\r\nimport { BreadcrumbEvents } from '../../events/BreadcrumbEvents';\r\nimport { QuickviewEvents } from '../../events/QuickviewEvents';\r\nimport { QUERY_STATE_ATTRIBUTES } from '../../models/QueryStateModel';\r\nimport { Model, MODEL_EVENTS } from '../../models/Model';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { INoResultsEventArgs } from '../../events/QueryEvents';\r\nimport { IQueryErrorEventArgs } from '../../events/QueryEvents';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { ResponsiveRecommendation } from '../ResponsiveComponents/ResponsiveRecommendation';\r\nimport { get } from '../Base/RegisteredNamedMethods';\r\nimport { InitializationEvents } from '../../events/InitializationEvents';\r\nimport { ComponentOptionsModel } from '../../models/ComponentOptionsModel';\r\nimport * as _ from 'underscore';\r\nimport { exportGlobally } from '../../GlobalExports';\r\nimport { DefaultRecommendationTemplate } from '../Templates/DefaultRecommendationTemplate';\r\nimport { RecommendationQuery } from './RecommendationQuery';\r\nimport { RecommendationAnalyticsClient } from '../Analytics/RecommendationAnalyticsClient';\r\nimport 'styling/_Recommendation';\r\nimport { IStringMap } from '../../rest/GenericParam';\r\nimport { l } from '../../strings/Strings';\r\n\r\nexport interface IRecommendationOptions extends ISearchInterfaceOptions {\r\n  mainSearchInterface?: HTMLElement;\r\n  userContext?: IStringMap<any>;\r\n  id?: string;\r\n  optionsToUse?: string[];\r\n  sendActionsHistory?: boolean;\r\n  hideIfNoResults?: boolean;\r\n  enableResponsiveMode?: boolean;\r\n  responsiveBreakpoint?: number;\r\n  dropdownHeaderLabel?: string;\r\n}\r\n\r\n/**\r\n * The Recommendation component is a {@link SearchInterface} that displays recommendations typically based on user\r\n * history.\r\n *\r\n * This component usually listens to the main SearchInterface. When the main SearchInterface generates a query, the\r\n * Recommendation component generates another query to get the recommendations at the same time.\r\n *\r\n * To get history-based recommendations, you will likely want to include the `pageview` script in your page (see\r\n * [coveo.analytics.js](https://github.com/coveo/coveo.analytics.js)). However, including this script is not mandatory.\r\n * For instance, you could use the Recommendation component without the Coveo Machine Learning service to create a\r\n * simple \"recommended people\" interface.\r\n *\r\n * It is possible to include this component inside another SearchInterface, but it is also possible to instantiate it as\r\n * a \"standalone\" search interface, without even instantiating a main SearchInterface component. In any case, a\r\n * Recommendation component always acts as a full-fledged search interface. Therefore, you can include any component\r\n * inside the Recommendation component (Searchbox, Facet, Sort, etc.), just as you would inside the main SearchInterface\r\n * component.\r\n *\r\n * @availablesince [July 2016 Release (v1.667.24)](https://docs.coveo.com/en/309/#july-2016-release-v166724)\r\n */\r\nexport class Recommendation extends SearchInterface implements IComponentBindings {\r\n  static ID = 'Recommendation';\r\n  private static NEXT_ID = 1;\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      Recommendation: Recommendation,\r\n      DefaultRecommendationTemplate: DefaultRecommendationTemplate,\r\n      RecommendationQuery: RecommendationQuery,\r\n      RecommendationAnalyticsClient: RecommendationAnalyticsClient\r\n    });\r\n  };\r\n\r\n  /**\r\n   * The options for the recommendation component\r\n   * @componentOptions\r\n   */\r\n  static options: IRecommendationOptions = {\r\n    /**\r\n     * Specifies the main {@link SearchInterface} to listen to.\r\n     */\r\n    mainSearchInterface: ComponentOptions.buildSelectorOption(),\r\n\r\n    /**\r\n     * Specifies the user context to send to Coveo usage analytics.\r\n     * The component sends this information with the query alongside the user history to get the recommendations.\r\n     */\r\n    userContext: ComponentOptions.buildJsonOption(),\r\n\r\n    /**\r\n     * Specifies the ID of the interface.\r\n     * The usage analytics use the interface ID to know which recommendation interface was selected.\r\n     *\r\n     * Default value is `Recommendation` for the first one and `Recommendation_{number}`, where {number} depends on the\r\n     * number of Recommendation interfaces with default IDs in the page for the others.\r\n     */\r\n    id: ComponentOptions.buildStringOption(),\r\n\r\n    /**\r\n     * Specifies which options from the main {@link QueryBuilder} to use in the triggered query.\r\n     *\r\n     * Possible values are:\r\n     * - `expression`\r\n     * - `advancedExpression`\r\n     * - `constantExpression`\r\n     * - `disjunctionExpression`\r\n     *\r\n     * **Example:**\r\n     *\r\n     * Adding the expression (`q`) and the advanced expression (`aq`) parts of the main query in the triggered query:\r\n     *\r\n     * `data-options-to-use=\"expression,advancedExpression\"`\r\n     *\r\n     * Default value is `expression`.\r\n     */\r\n    optionsToUse: ComponentOptions.buildListOption<'expression' | 'advancedExpression' | 'constantExpression' | 'disjunctionExpression'>({\r\n      defaultValue: ['expression']\r\n    }),\r\n\r\n    /**\r\n     * Specifies whether to send the actions history along with the triggered query.\r\n     *\r\n     * Setting this option to `false` makes it impossible for this component to get Coveo Machine Learning\r\n     * recommendations.\r\n     *\r\n     * However, setting this option to `false` can be useful to display side results in a search page.\r\n     *\r\n     * Default value is `true`.\r\n     *\r\n     * @deprecated This option is now deprecated. The correct way to control this behavior is to configure an appropriate machine learning model in the administration interface (Recommendation, Relevance tuning, Query suggestions).\r\n     */\r\n    sendActionsHistory: ComponentOptions.buildBooleanOption({\r\n      defaultValue: true,\r\n      deprecated:\r\n        'This option is now deprecated. The correct way to control this behaviour is to configure an appropriate machine learning model in the administration interface (Recommendation, Relevance tuning, Query suggestions)'\r\n    }),\r\n\r\n    /**\r\n     * Specifies whether to hide the Recommendations component if no result or recommendation is available.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    hideIfNoResults: ComponentOptions.buildBooleanOption({ defaultValue: true }),\r\n    autoTriggerQuery: ComponentOptions.buildBooleanOption({\r\n      postProcessing: (value: boolean, options: IRecommendationOptions) => {\r\n        if (options.mainSearchInterface) {\r\n          return false;\r\n        }\r\n        return value;\r\n      }\r\n    }),\r\n\r\n    /**\r\n     * Specifies whether to enable *responsive mode* for Recommendation components. Setting this options to `false` on\r\n     * any Recommendation component in a search interface disables responsive mode for all other Recommendation\r\n     * components in the search interface.\r\n     *\r\n     * Responsive mode displays all Recommendation components under a single dropdown button whenever the width of the\r\n     * HTML element which the search interface is bound to reaches or falls behind a certain threshold (see\r\n     * {@link Recommendation.options.responsiveBreakpoint}).\r\n     *\r\n     * See also {@link Recommendation.options.dropdownHeaderLabel}.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    enableResponsiveMode: ComponentOptions.buildBooleanOption({ defaultValue: true }),\r\n\r\n    /**\r\n     * If {@link Recommendation.options.enableResponsiveMode} is `true` for all Recommendation components, specifies the\r\n     * width threshold (in pixels) of the search interface at which Recommendation components go in responsive mode.\r\n     *\r\n     * Recommendation components go in responsive mode when the width of the search interface is equal to or lower than\r\n     * this value.\r\n     *\r\n     * The `search interface` corresponds to the HTML element with the class `CoveoSearchInterface`.\r\n     *\r\n     * If more than one Recommendation component in the search interface specifies a value for this option, then the\r\n     * framework uses the last occurrence of the option.\r\n     *\r\n     * Default value is `1000`.\r\n     */\r\n    responsiveBreakpoint: ComponentOptions.buildNumberOption({ defaultValue: 1000 }),\r\n\r\n    /**\r\n     * If {@link Recommendation.options.enableResponsiveMode} is `true` for all Recommendation components, specifies the\r\n     * label of the dropdown button that allows to display the Recommendation components when in responsive mode.\r\n     *\r\n     * If more than one Recommendation component in the search interface specifies a value for this option, then the\r\n     * framework uses the first occurrence of the option.\r\n     *\r\n     * Default value is `Recommendations`.\r\n     */\r\n    dropdownHeaderLabel: ComponentOptions.buildLocalizedStringOption({\r\n      localizedString: () => l('Recommendations')\r\n    })\r\n  };\r\n\r\n  // These are used by the analytics client for recommendation\r\n  // so that clicks event inside the recommendation component can be modified and attached to the main search interface.\r\n  public mainQuerySearchUID: string;\r\n  public mainQueryPipeline: string;\r\n\r\n  private mainInterfaceQuery: IQuerySuccessEventArgs;\r\n\r\n  /**\r\n   * Creates a new Recommendation component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the Recommendation component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time)\r\n   * @param _window\r\n   */\r\n  constructor(public element: HTMLElement, public options: IRecommendationOptions = {}, public analyticsOptions = {}, _window = window) {\r\n    super(element, ComponentOptions.initComponentOptions(element, Recommendation, options), analyticsOptions, _window);\r\n    this.element.style.display = '';\r\n    if (!this.options.id) {\r\n      this.generateDefaultId();\r\n    }\r\n\r\n    // This is done to allow the component to be included in another search interface without triggering the parent events.\r\n    this.preventEventPropagation();\r\n\r\n    if (this.options.mainSearchInterface) {\r\n      this.bindToMainSearchInterface();\r\n    }\r\n\r\n    $$(this.element).on(QueryEvents.buildingQuery, (e: Event, args: IBuildingQueryEventArgs) =>\r\n      this.handleRecommendationBuildingQuery(args)\r\n    );\r\n    $$(this.element).on(QueryEvents.querySuccess, (e: Event, args: IQuerySuccessEventArgs) => this.handleRecommendationQuerySuccess(args));\r\n    $$(this.element).on(QueryEvents.noResults, (e: Event, args: INoResultsEventArgs) => this.handleRecommendationNoResults());\r\n    $$(this.element).on(QueryEvents.queryError, (e: Event, args: IQueryErrorEventArgs) => this.handleRecommendationQueryError());\r\n\r\n    if (!this.options.mainSearchInterface) {\r\n      // When the recommendation component is \"standalone\", we add additional safeguard against bad config.\r\n      this.ensureCurrentPageViewExistsInStore();\r\n    }\r\n    ResponsiveRecommendation.init(this.root, this, options);\r\n  }\r\n\r\n  public get historyStore() {\r\n    return this.queryController.historyStore;\r\n  }\r\n\r\n  public getId(): string {\r\n    return this.options.id;\r\n  }\r\n\r\n  public enable() {\r\n    super.enable();\r\n    this.show();\r\n  }\r\n\r\n  public disable() {\r\n    super.disable();\r\n    this.hide();\r\n  }\r\n\r\n  public hide(): void {\r\n    $$(this.element).addClass('coveo-hidden');\r\n  }\r\n\r\n  public show(): void {\r\n    $$(this.element).removeClass('coveo-hidden');\r\n  }\r\n\r\n  private ensureCurrentPageViewExistsInStore() {\r\n    // It's not 100% sure that the element will actually be added in the store.\r\n    // It's possible that an external script configured by the end user to log the page view already did that.\r\n    // So we *could* end up with duplicate values in the store :\r\n    // We rely on the fact that the coveo.analytics lib has defensive code against consecutive page view that are identical.\r\n    // This is mainly done if the recommendation component is being initialized before the page view could be logged correctly by the coveo.analytics externa lib.\r\n    const historyElement = {\r\n      name: 'PageView',\r\n      value: document.location.toString(),\r\n      time: JSON.stringify(new Date()),\r\n      title: _.escape(document.title)\r\n    };\r\n    this.historyStore.addElement(historyElement);\r\n  }\r\n\r\n  private bindToMainSearchInterface() {\r\n    this.bindComponentOptionsModelToMainSearchInterface();\r\n    this.bindQueryEventsToMainSearchInterface();\r\n  }\r\n\r\n  private bindComponentOptionsModelToMainSearchInterface() {\r\n    // Try to fetch the componentOptions from the main search interface.\r\n    // Since we do not know which interface is init first (recommendation or full search interface)\r\n    // add a mechanism that waits for the full search interface to be correctly initialized\r\n    // then, set the needed values on the component options model.\r\n    let searchInterfaceComponent = <SearchInterface>get(this.options.mainSearchInterface, SearchInterface);\r\n    const alreadyInitialized = searchInterfaceComponent != null;\r\n\r\n    const onceInitialized = () => {\r\n      const mainSearchInterfaceOptionsModel = <ComponentOptionsModel>searchInterfaceComponent.getBindings().componentOptionsModel;\r\n      this.componentOptionsModel.setMultiple(mainSearchInterfaceOptionsModel.getAttributes());\r\n      $$(this.options.mainSearchInterface).on(this.componentOptionsModel.getEventName(MODEL_EVENTS.ALL), () => {\r\n        this.componentOptionsModel.setMultiple(mainSearchInterfaceOptionsModel.getAttributes());\r\n      });\r\n    };\r\n\r\n    if (alreadyInitialized) {\r\n      onceInitialized();\r\n    } else {\r\n      $$(this.options.mainSearchInterface).on(InitializationEvents.afterComponentsInitialization, () => {\r\n        searchInterfaceComponent = <SearchInterface>get(this.options.mainSearchInterface, SearchInterface);\r\n        onceInitialized();\r\n      });\r\n    }\r\n  }\r\n\r\n  private bindQueryEventsToMainSearchInterface() {\r\n    // Whenever a query sucessfully returns on the full search interface, refresh the recommendation component.\r\n    $$(this.options.mainSearchInterface).on(QueryEvents.querySuccess, (e: Event, args: IQuerySuccessEventArgs) => {\r\n      this.mainInterfaceQuery = args;\r\n      this.mainQuerySearchUID = args.results.searchUid;\r\n      this.mainQueryPipeline = args.results.pipeline;\r\n      if (args.results.results.length != 0) {\r\n        this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.recommendation, {});\r\n        this.queryController.executeQuery({\r\n          closeModalBox: false\r\n        });\r\n      }\r\n    });\r\n\r\n    $$(this.options.mainSearchInterface).on(QueryEvents.queryError, () => this.hide());\r\n    $$(this.options.mainSearchInterface).on(QueryEvents.noResults, () => this.hide());\r\n  }\r\n\r\n  private handleRecommendationBuildingQuery(data: IBuildingQueryEventArgs) {\r\n    if (!this.disabled) {\r\n      this.modifyQueryForRecommendation(data);\r\n      this.addRecommendationInfoInQuery(data);\r\n    }\r\n  }\r\n\r\n  private handleRecommendationQuerySuccess(data: IQuerySuccessEventArgs) {\r\n    if (!this.disabled) {\r\n      if (this.options.hideIfNoResults) {\r\n        if (data.results.totalCount === 0) {\r\n          this.hide();\r\n        } else {\r\n          this.show();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private handleRecommendationNoResults() {\r\n    if (!this.disabled) {\r\n      if (this.options.hideIfNoResults) {\r\n        this.hide();\r\n      }\r\n    }\r\n  }\r\n\r\n  private handleRecommendationQueryError() {\r\n    if (!this.disabled) {\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  private modifyQueryForRecommendation(data: IBuildingQueryEventArgs) {\r\n    if (this.mainInterfaceQuery) {\r\n      Utils.copyObjectAttributes(data.queryBuilder, this.mainInterfaceQuery.queryBuilder, this.options.optionsToUse);\r\n    }\r\n  }\r\n\r\n  private addRecommendationInfoInQuery(data: IBuildingQueryEventArgs) {\r\n    if (!_.isEmpty(this.options.userContext)) {\r\n      data.queryBuilder.addContext(this.options.userContext);\r\n    }\r\n\r\n    data.queryBuilder.recommendation = this.options.id;\r\n  }\r\n\r\n  private preventEventPropagation() {\r\n    this.preventEventPropagationOn(QueryEvents);\r\n    this.preventEventPropagationOn(OmniboxEvents);\r\n    this.preventEventPropagationOn(ResultListEvents);\r\n    this.preventEventPropagationOn(SettingsEvents);\r\n    this.preventEventPropagationOn(PreferencesPanelEvents);\r\n    this.preventEventPropagationOn(AnalyticsEvents);\r\n    this.preventEventPropagationOn(BreadcrumbEvents);\r\n    this.preventEventPropagationOn(QuickviewEvents);\r\n    this.preventEventPropagationOn(InitializationEvents);\r\n    this.preventEventPropagationOn(this.getAllModelEvents());\r\n  }\r\n\r\n  private preventEventPropagationOn(\r\n    eventType,\r\n    eventName = (event: string) => {\r\n      return event;\r\n    }\r\n  ) {\r\n    for (const event in eventType) {\r\n      $$(this.root).on(eventName(event), (e: Event) => e.stopPropagation());\r\n    }\r\n  }\r\n\r\n  private getAllModelEvents() {\r\n    const events = {};\r\n    const queryStateModel = this.getBindings().queryStateModel;\r\n    _.each(_.values(Model.eventTypes), event => {\r\n      const eventName = queryStateModel.getEventName(event);\r\n      events[eventName] = eventName;\r\n      _.each(_.values(QUERY_STATE_ATTRIBUTES), attribute => {\r\n        const eventName = this.queryStateModel.getEventName(event + attribute);\r\n        events[eventName] = eventName;\r\n      });\r\n    });\r\n    return events;\r\n  }\r\n\r\n  private generateDefaultId() {\r\n    let id = 'Recommendation';\r\n    if (Recommendation.NEXT_ID !== 1) {\r\n      this.logger.warn(\r\n        'Generating another recommendation default id',\r\n        'Consider configuring a human friendly / meaningful id for this interface'\r\n      );\r\n      id = id + '_' + Recommendation.NEXT_ID;\r\n    }\r\n    Recommendation.NEXT_ID++;\r\n    this.options.id = id;\r\n  }\r\n}\r\n\r\n// We do not register the Recommendation component since it is done with .coveo('initRecommendation')\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Recommendation/Recommendation.ts","/**\r\n * The `IQuickviewLoadedEventArgs` interface describes the object that all\r\n * [`quickviewLoaded`]{@link QuickviewEvents.quickviewLoaded} event handlers receive as an argument.\r\n */\r\nexport interface IQuickviewLoadedEventArgs {\r\n  /**\r\n   * The amount of time it took to download the content to display in the quickview modal window (in milliseconds).\r\n   */\r\n  duration: number;\r\n}\r\n\r\n/**\r\n * The `QuickviewEvents` static class contains the string definitions of all events that strongly relate to the\r\n * [`Quickview`]{@link Quickview} component.\r\n */\r\nexport class QuickviewEvents {\r\n  /**\r\n   * Triggered by the [`QuickviewDocument`]{@link QuickviewDocument} component when the content to display in the\r\n   * quickview modal window has just finished downloading.\r\n   *\r\n   * The [`Quickview`]{@link Quickview} component listens to this event to know when to remove its loading animation.\r\n   *\r\n   * All `quickviewLoaded` event handlers receive a [`QuickviewLoadedEventArgs`]{@link IQuickviewLoadedEventArgs} object\r\n   * as an argument.\r\n   *\r\n   * @type {string} The string value is `quickviewLoaded`.\r\n   */\r\n  public static quickviewLoaded = 'quickviewLoaded';\r\n\r\n  /**\r\n   * Triggered by the [`QuickviewDocument`]{@link QuickviewDocument} component when the end user has just clicked the\r\n   * **Quickview** button/link to open the quickview modal window.\r\n   *\r\n   * This event allows external code to modify the terms to highlight before the content of the quickview modal window\r\n   * is rendered.\r\n   *\r\n   * All `openQuickview` event handlers receive an\r\n   * [`OpenQuickviewEventArgs`]{@link ResultListEvents.IOpenQuickviewEventArgs} object as an argument.\r\n   *\r\n   * @type {string} The string value is `openQuickview`.\r\n   */\r\n  public static openQuickview = 'openQuickview';\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/events/QuickviewEvents.ts","import { Template } from './Template';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\n\r\nexport class DefaultRecommendationTemplate extends Template {\r\n  instantiateToString(object?: IQueryResult): string {\r\n    var template = `<div class=\"coveo-result-frame\">\r\n        <div class=\"coveo-result-row\">\r\n          <div class=\"coveo-result-cell\" style=\"width:40px;text-align:center;vertical-align:middle;\">\r\n            <span class=\"CoveoIcon\" data-small=\"true\" data-with-label=\"false\">\r\n            </span>\r\n          </div>\r\n          <div class=\"coveo-result-cell\" style=\"padding:0 0 3px 5px;vertical-align:middle\">\r\n            <div class=\"coveo-result-row\">\r\n              <div class=\"coveo-result-cell\" style=\"font-size:10pt;\">\r\n                <a class=\"CoveoResultLink\" style=\"display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\">\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>`;\r\n    return template;\r\n  }\r\n\r\n  instantiateToElement(object?: IQueryResult): Promise<HTMLElement> {\r\n    return new Promise((resolve, reject) => {\r\n      var div = document.createElement('div');\r\n      div.innerHTML = this.instantiateToString(object);\r\n      resolve(div);\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Templates/DefaultRecommendationTemplate.ts","import { ResponsiveComponentsManager, IResponsiveComponent, IResponsiveComponentOptions } from './ResponsiveComponentsManager';\r\nimport { ResponsiveComponentsUtils } from './ResponsiveComponentsUtils';\r\nimport { SearchInterface } from '../SearchInterface/SearchInterface';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { $$, Dom } from '../../utils/Dom';\r\nimport { Logger } from '../../misc/Logger';\r\nimport { Recommendation } from '../Recommendation/Recommendation';\r\nimport { RecommendationDropdownContent } from './ResponsiveDropdown/RecommendationDropdownContent';\r\nimport { ResponsiveDropdownHeader } from './ResponsiveDropdown/ResponsiveDropdownHeader';\r\nimport { ResponsiveDropdown } from './ResponsiveDropdown/ResponsiveDropdown';\r\nimport { l } from '../../strings/Strings';\r\nimport { Component } from '../Base/Component';\r\nimport { get } from '../Base/RegisteredNamedMethods';\r\nimport { QueryEvents, IQuerySuccessEventArgs, INoResultsEventArgs } from '../../events/QueryEvents';\r\nimport * as _ from 'underscore';\r\n\r\nimport 'styling/_ResponsiveRecommendation';\r\nimport { Defer } from '../../MiscModules';\r\n\r\nexport class ResponsiveRecommendation implements IResponsiveComponent {\r\n  public static DROPDOWN_CONTAINER_CSS_CLASS_NAME: string = 'coveo-recommendation-dropdown-container';\r\n  public static RESPONSIVE_BREAKPOINT = 1000;\r\n\r\n  public recommendationRoot: Dom;\r\n  private breakpoint: number;\r\n  private dropdown: ResponsiveDropdown;\r\n  private dropdownHeaderLabel: string;\r\n  private searchInterface: SearchInterface;\r\n\r\n  public static init(root: HTMLElement, component, options: IResponsiveComponentOptions) {\r\n    let logger = new Logger('ResponsiveRecommendation');\r\n    let coveoRoot = this.findParentRootOfRecommendationComponent(root);\r\n    if (!coveoRoot) {\r\n      logger.info('Recommendation component has no parent interface. Disabling responsive mode for this component.');\r\n      return;\r\n    }\r\n\r\n    if (!$$(coveoRoot).find('.coveo-results-column')) {\r\n      logger.info('Cannot find element with class coveo-results-column. Disabling responsive mode for this component.');\r\n      return;\r\n    }\r\n\r\n    ResponsiveComponentsManager.register(\r\n      ResponsiveRecommendation,\r\n      $$(coveoRoot),\r\n      Recommendation.ID,\r\n      component,\r\n      _.extend({}, options, { initializationEventRoot: $$(root) })\r\n    );\r\n  }\r\n\r\n  private static findParentRootOfRecommendationComponent(root: HTMLElement): Dom {\r\n    let coveoRoot = $$(root).parents(Component.computeCssClassName(SearchInterface));\r\n    if (coveoRoot[0]) {\r\n      return $$(coveoRoot[0]);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  constructor(\r\n    public coveoRoot: Dom,\r\n    public ID: string,\r\n    options: IResponsiveComponentOptions,\r\n    public responsiveDropdown?: ResponsiveDropdown\r\n  ) {\r\n    this.recommendationRoot = this.getRecommendationRoot();\r\n    this.dropdownHeaderLabel = options.dropdownHeaderLabel;\r\n    this.breakpoint = this.defineResponsiveBreakpoint(options);\r\n    this.searchInterface = <SearchInterface>Component.get(this.coveoRoot.el, SearchInterface, false);\r\n    this.dropdown = this.buildDropdown(responsiveDropdown);\r\n    this.registerOnOpenHandler();\r\n    this.registerQueryEvents();\r\n    this.handleResizeEvent();\r\n  }\r\n\r\n  public handleResizeEvent(): void {\r\n    if (this.needSmallMode() && !ResponsiveComponentsUtils.isSmallRecommendationActivated(this.coveoRoot)) {\r\n      this.changeToSmallMode();\r\n    } else if (!this.needSmallMode() && ResponsiveComponentsUtils.isSmallRecommendationActivated(this.coveoRoot)) {\r\n      this.changeToLargeMode();\r\n    }\r\n\r\n    if (this.dropdown.isOpened) {\r\n      this.dropdown.dropdownContent.positionDropdown();\r\n    }\r\n  }\r\n\r\n  public needDropdownWrapper(): boolean {\r\n    return this.needSmallMode();\r\n  }\r\n\r\n  private needSmallMode(): boolean {\r\n    const isWidthSmallerThanBreakpoint = this.coveoRoot.width() <= this.breakpoint;\r\n    if (!this.searchInterface) {\r\n      return isWidthSmallerThanBreakpoint;\r\n    }\r\n\r\n    switch (this.searchInterface.responsiveComponents.getResponsiveMode()) {\r\n      case 'small':\r\n        return true;\r\n      case 'auto':\r\n        return isWidthSmallerThanBreakpoint;\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  private changeToSmallMode() {\r\n    this.dropdown.close();\r\n    const header = this.coveoRoot.find(`.${ResponsiveComponentsManager.DROPDOWN_HEADER_WRAPPER_CSS_CLASS}`);\r\n    if (!header) {\r\n      // It's possible that recommendation gets initialized before the main interface is completed.\r\n      // We defer the resize event execution in that case.\r\n      Defer.defer(() => this.handleResizeEvent());\r\n    } else {\r\n      $$(header).append(this.dropdown.dropdownHeader.element.el);\r\n      this.disableFacetPreservePosition();\r\n      ResponsiveComponentsUtils.activateSmallRecommendation(this.coveoRoot);\r\n      ResponsiveComponentsUtils.activateSmallRecommendation(this.recommendationRoot);\r\n    }\r\n  }\r\n\r\n  private changeToLargeMode() {\r\n    this.enableFacetPreservePosition();\r\n    this.dropdown.cleanUp();\r\n    ResponsiveComponentsUtils.deactivateSmallRecommendation(this.coveoRoot);\r\n    ResponsiveComponentsUtils.deactivateSmallRecommendation(this.recommendationRoot);\r\n  }\r\n\r\n  private buildDropdown(responsiveDropdown?: ResponsiveDropdown): ResponsiveDropdown {\r\n    let dropdownContent = this.buildDropdownContent();\r\n    let dropdownHeader = this.buildDropdownHeader();\r\n    let dropdown = responsiveDropdown ? responsiveDropdown : new ResponsiveDropdown(dropdownContent, dropdownHeader, this.coveoRoot);\r\n    dropdown.disablePopupBackground();\r\n    return dropdown;\r\n  }\r\n\r\n  private buildDropdownHeader(): ResponsiveDropdownHeader {\r\n    let dropdownHeaderElement = $$('a');\r\n    let content = $$('p');\r\n    content.text(l(this.dropdownHeaderLabel));\r\n    dropdownHeaderElement.el.appendChild(content.el);\r\n    let dropdownHeader = new ResponsiveDropdownHeader('recommendation', dropdownHeaderElement);\r\n    return dropdownHeader;\r\n  }\r\n\r\n  private buildDropdownContent(): RecommendationDropdownContent {\r\n    let dropdownContentElement: Dom;\r\n    let recommendationColumn = this.coveoRoot.find('.coveo-recommendation-column');\r\n    if (recommendationColumn) {\r\n      dropdownContentElement = $$(recommendationColumn);\r\n    } else {\r\n      dropdownContentElement = $$(this.coveoRoot.find('.' + Component.computeCssClassName(Recommendation)));\r\n    }\r\n\r\n    let dropdownContent = new RecommendationDropdownContent('recommendation', dropdownContentElement, this.coveoRoot);\r\n    return dropdownContent;\r\n  }\r\n\r\n  private defineResponsiveBreakpoint(options: IResponsiveComponentOptions): number {\r\n    let breakpoint;\r\n    if (Utils.isNullOrUndefined(options.responsiveBreakpoint)) {\r\n      breakpoint = ResponsiveRecommendation.RESPONSIVE_BREAKPOINT;\r\n    } else {\r\n      breakpoint = options.responsiveBreakpoint;\r\n    }\r\n    return breakpoint;\r\n  }\r\n\r\n  private getFacetSliders(): any[] {\r\n    const facetSliders = [];\r\n    this.coveoRoot.findAll(Component.computeSelectorForType('FacetSlider')).forEach(facetSliderElement => {\r\n      const facetSlider = Component.get(facetSliderElement);\r\n      facetSlider && facetSliders.push(facetSlider);\r\n    });\r\n    return facetSliders;\r\n  }\r\n\r\n  private getFacets(): any[] {\r\n    const facets = [];\r\n    this.coveoRoot.findAll(Component.computeSelectorForType('Facet')).forEach(facetElement => {\r\n      const facet = Component.get(facetElement);\r\n      facet && facets.push(facet);\r\n    });\r\n    return facets;\r\n  }\r\n\r\n  private enableFacetPreservePosition(): void {\r\n    this.getFacets().forEach(facet => (facet.options.preservePosition = true));\r\n  }\r\n\r\n  private disableFacetPreservePosition(): void {\r\n    this.getFacets().forEach(facet => (facet.options.preservePosition = false));\r\n  }\r\n\r\n  private drawFacetSliderGraphs(): void {\r\n    this.getFacetSliders().forEach(facetSlider => facetSlider.drawDelayedGraphData());\r\n  }\r\n\r\n  private registerOnOpenHandler(): void {\r\n    this.dropdown.registerOnOpenHandler(this.drawFacetSliderGraphs, this);\r\n  }\r\n\r\n  private getRecommendationRoot(): Dom {\r\n    return $$(this.coveoRoot.find('.' + Component.computeCssClassName(Recommendation)));\r\n  }\r\n\r\n  private registerQueryEvents() {\r\n    let recommendationInstance = <Recommendation>get(this.recommendationRoot.el, SearchInterface);\r\n    if (recommendationInstance && recommendationInstance.options.hideIfNoResults) {\r\n      this.coveoRoot.on(QueryEvents.querySuccess, (e: Event, data: IQuerySuccessEventArgs) => this.handleRecommnendationQuerySucess(data));\r\n      this.coveoRoot.on(QueryEvents.noResults, (e: Event, data: INoResultsEventArgs) => this.handleRecommendationNoResults());\r\n    }\r\n    this.coveoRoot.on(QueryEvents.queryError, () => this.handleRecommendationQueryError());\r\n  }\r\n\r\n  private handleRecommnendationQuerySucess(data: IQuerySuccessEventArgs) {\r\n    if (data.results.totalCount === 0) {\r\n      this.dropdown.close();\r\n      this.dropdown.dropdownHeader.hide();\r\n    } else {\r\n      this.dropdown.dropdownHeader.show();\r\n    }\r\n  }\r\n\r\n  private handleRecommendationNoResults() {\r\n    this.dropdown.close();\r\n    this.dropdown.dropdownHeader.hide();\r\n  }\r\n\r\n  private handleRecommendationQueryError() {\r\n    this.dropdown.close();\r\n    this.dropdown.dropdownHeader.hide();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveRecommendation.ts","import { IResponsiveDropdownContent, ResponsiveDropdownContent } from './ResponsiveDropdownContent';\r\nimport { $$, Dom } from '../../../utils/Dom';\r\n\r\nexport class RecommendationDropdownContent implements IResponsiveDropdownContent {\r\n  public static OPENED_DROPDOWN_CSS_CLASS_NAME = 'coveo-open-dropdown-content';\r\n\r\n  private cssClassName: string;\r\n\r\n  constructor(componentName: string, public element: Dom, private coveoRoot: Dom) {\r\n    this.cssClassName = `coveo-${componentName}-dropdown-content`;\r\n    this.element.addClass(this.cssClassName);\r\n    this.element.addClass(ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\r\n  }\r\n\r\n  public positionDropdown() {\r\n    this.element.el.style.display = '';\r\n\r\n    let dropdownContentWrapper = this.coveoRoot.find('.coveo-results-column');\r\n    $$(dropdownContentWrapper).prepend(this.element.el);\r\n    this.element.addClass(ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\r\n    this.element.addClass(this.cssClassName);\r\n\r\n    // forces the browser to reflow the element, so that the transition is applied.\r\n    window.getComputedStyle(this.element.el).maxHeight;\r\n\r\n    this.element.addClass(RecommendationDropdownContent.OPENED_DROPDOWN_CSS_CLASS_NAME);\r\n  }\r\n\r\n  public hideDropdown() {\r\n    this.element.addClass(ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\r\n    this.element.addClass(this.cssClassName);\r\n\r\n    this.element.removeClass(RecommendationDropdownContent.OPENED_DROPDOWN_CSS_CLASS_NAME);\r\n  }\r\n\r\n  public cleanUp() {\r\n    this.element.removeClass(this.cssClassName);\r\n    this.element.removeClass(ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveDropdown/RecommendationDropdownContent.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResponsiveRecommendation.scss\n// module id = 647\n// module chunks = 20 88","import { Component } from '../Base/Component';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { QueryEvents, IBuildingQueryEventArgs } from '../../events/QueryEvents';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { $$ } from '../../utils/Dom';\r\nimport * as _ from 'underscore';\r\n\r\nexport interface IRecommendationQueryOptions {}\r\n\r\nexport class RecommendationQuery extends Component {\r\n  static ID = 'RecommendationQuery';\r\n\r\n  /**\r\n   * The options for the RecommendationQuery component\r\n   * @componentOptions\r\n   */\r\n  static options: IRecommendationQueryOptions = {};\r\n\r\n  private content: string;\r\n\r\n  constructor(public element: HTMLElement, public options?: IRecommendationQueryOptions, bindings?: IComponentBindings) {\r\n    super(element, RecommendationQuery.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, RecommendationQuery, options);\r\n\r\n    if (this.element.tagName.toLowerCase() === 'script') {\r\n      try {\r\n        this.content = Utils.decodeHTMLEntities($$(this.element).text());\r\n      } catch (e) {\r\n        return;\r\n      }\r\n      if (!_.isUndefined(this.content) && this.content != '') {\r\n        this.bind.onRootElement(QueryEvents.buildingQuery, this.handleBuildingQuery);\r\n      }\r\n    }\r\n  }\r\n\r\n  private handleBuildingQuery(data: IBuildingQueryEventArgs) {\r\n    data.queryBuilder.advancedExpression.add(this.content);\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(RecommendationQuery);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Recommendation/RecommendationQuery.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_Recommendation.scss\n// module id = 649\n// module chunks = 20 88"],"sourceRoot":""}