{"version":3,"sources":["ResultActionsMenu.min__5f3280c404a1ee75a113.js","./src/ui/ResultActions/ResultActionsMenu.ts"],"names":["webpackJsonpCoveo__temporary","267","module","exports","__webpack_require__","__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","element","options","bindings","result","ResultActionsMenu","ID","ComponentOptions","initComponentOptions","initializeParentResult","bindEvents","buildMenuItems","_this","show","$$","addClass","SHOW_CLASS","hide","removeClass","parentResult","closest","Assert","check","undefined","on","openOnMouseOver","menuItems","forEach","children","elem","push","doExport","exportGlobally","buildBooleanOption","defaultValue","Component","Initialization","registerAutoCreateComponent","650"],"mappings":"AAAAA,8BAA8B,KAExBC,IACA,SAAUC,EAAQC,EAASC,GAEjC,YAEA,IAAIC,GAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBC,OAAOC,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOV,KAAKW,YAAcL,EADnCL,EAAcK,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAaL,OAAOW,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,OAGvFR,QAAOY,eAAejB,EAAS,cAAgBkB,OAAO,GCjBtD,YACA,OAEA,OAEA,OACA,OACA,OACA,MACA,OAuBA,mBA2CE,WACSC,EACAC,EACAC,EACAC,GAJT,MAME,YAAMH,EAASI,EAAkBC,GAAIH,IAAS,IDlB1C,OCaG,GAAAF,UACA,EAAAC,UACA,EAAAC,WACA,EAAAC,SAGP,EAAKF,QAAU,EAAAK,iBAAiBC,qBAAqBP,EAASI,EAAmBH,GAEjF,EAAKO,yBACL,EAAKC,aAEL,EAAKC,iBDxBMC,ECiEf,MAhGuC,QA6D9B,YAAAC,KAAP,WACE,EAAAC,GAAG7B,KAAKgB,SAASc,SAASV,EAAkBW,aAMvC,YAAAC,KAAP,WACE,EAAAH,GAAG7B,KAAKgB,SAASiB,YAAYb,EAAkBW,aAGzC,YAAAP,uBAAR,WAEExB,KAAKkC,aAAe,EAAAL,GAAG7B,KAAKgB,SAASmB,QAAQ,eAC7C,EAAAC,OAAOC,UAA4BC,KAAtBtC,KAAKkC,aAA4B,qDAE9C,EAAAL,GAAG7B,KAAKkC,cAAcJ,SAAS,oBAGzB,YAAAL,WAAR,qBACE,GAAAI,GAAG7B,KAAKkC,cAAcK,GAAG,QAAS,WAAM,SAAKX,SAE7C,EAAAC,GAAG7B,KAAKkC,cAAcK,GAAG,aAAc,WAAM,SAAKP,SAC9ChC,KAAKiB,QAAQuB,iBACf,EAAAX,GAAG7B,KAAKkC,cAAcK,GAAG,aAAc,WAAM,SAAKX,UAI9C,YAAAF,eAAR,qBACE1B,MAAKyC,aACL,EAAAC,QAAQ,EAAAb,GAAG7B,KAAKgB,SAAS2B,WAAY,SAACC,GACpC,EAAKH,UAAUI,KAAKD,GACpB,EAAAf,GAAGe,GAAMd,SAAS,0CA5Ff,EAAAT,GAAK,oBAEL,EAAAyB,SAAW,WAChB,EAAAC,gBACE3B,kBAAmBA,KAIP,EAAAW,WAAqB,oBAK9B,EAAAd,SAQLuB,gBAAiB,EAAAlB,iBAAiB0B,oBAAqBC,cAAc,KA0EzE,GAhGuC,EAAAC,UAA1B,GAAA9B,oBAkGb,EAAA+B,eAAeC,4BAA4BhC,IDHrCiC,IACA,SAAUzD,EAAQC","file":"ResultActionsMenu.min__5f3280c404a1ee75a113.js","sourcesContent":["webpackJsonpCoveo__temporary([64],{\n\n/***/ 267:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(7);\r\nvar ComponentOptions_1 = __webpack_require__(8);\r\nvar Dom_1 = __webpack_require__(1);\r\nvar Assert_1 = __webpack_require__(5);\r\nvar Initialization_1 = __webpack_require__(2);\r\nvar underscore_1 = __webpack_require__(0);\r\nvar GlobalExports_1 = __webpack_require__(3);\r\n__webpack_require__(650);\r\n/**\r\n * The _ResultActionsMenu_ component adds a floating result action menu, meant to be used inside result templates (see [Result Templates](https://docs.coveo.com/en/413/javascript-search-framework/result-templates)).\r\n * It is designed to contain other components that can execute actions related to the result,\r\n * typically the [Quickview]{@link Quickview} and AttachToCase components, available in the Coveo for Salesforce and Coveo for Dynamics integrations.\r\n *\r\n * ```html\r\n * <script type=\"text/html\" class=\"result-template\" [...]\r\n *   <div class=\"coveo-result-frame\">\r\n *     <div class=\"CoveoResultActionsMenu\">\r\n *       <div class=\"CoveoQuickview\"></div>\r\n *     </div>\r\n *   [...]\r\n * </script>\r\n * ```\r\n *\r\n * @availablesince [July 2018 Release (v2.4382.10)](https://docs.coveo.com/410/#july-2018-release-v2438210)\r\n */\r\nvar ResultActionsMenu = /** @class */ (function (_super) {\r\n    __extends(ResultActionsMenu, _super);\r\n    /**\r\n     * Creates a new `ResultActionsMenu` component.\r\n     * @param element The HTMLElement on which to instantiate the component.\r\n     * @param options The options for the `ResultActionsMenu` component.\r\n     * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n     * automatically resolved (with a slower execution time).\r\n     * @param result The result to associate the component with.\r\n     */\r\n    function ResultActionsMenu(element, options, bindings, result) {\r\n        var _this = _super.call(this, element, ResultActionsMenu.ID, bindings) || this;\r\n        _this.element = element;\r\n        _this.options = options;\r\n        _this.bindings = bindings;\r\n        _this.result = result;\r\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, ResultActionsMenu, options);\r\n        _this.initializeParentResult();\r\n        _this.bindEvents();\r\n        _this.buildMenuItems();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Shows the floating menu.\r\n     */\r\n    ResultActionsMenu.prototype.show = function () {\r\n        Dom_1.$$(this.element).addClass(ResultActionsMenu.SHOW_CLASS);\r\n    };\r\n    /**\r\n     * Hides the floating menu.\r\n     */\r\n    ResultActionsMenu.prototype.hide = function () {\r\n        Dom_1.$$(this.element).removeClass(ResultActionsMenu.SHOW_CLASS);\r\n    };\r\n    ResultActionsMenu.prototype.initializeParentResult = function () {\r\n        // Find the result containing this ResultActionsMenu\r\n        this.parentResult = Dom_1.$$(this.element).closest('CoveoResult');\r\n        Assert_1.Assert.check(this.parentResult !== undefined, 'ResultActionsMenu needs to be a child of a Result');\r\n        Dom_1.$$(this.parentResult).addClass('coveo-clickable');\r\n    };\r\n    ResultActionsMenu.prototype.bindEvents = function () {\r\n        var _this = this;\r\n        Dom_1.$$(this.parentResult).on('click', function () { return _this.show(); });\r\n        Dom_1.$$(this.parentResult).on('mouseleave', function () { return _this.hide(); });\r\n        if (this.options.openOnMouseOver) {\r\n            Dom_1.$$(this.parentResult).on('mouseenter', function () { return _this.show(); });\r\n        }\r\n    };\r\n    ResultActionsMenu.prototype.buildMenuItems = function () {\r\n        var _this = this;\r\n        this.menuItems = [];\r\n        underscore_1.forEach(Dom_1.$$(this.element).children(), function (elem) {\r\n            _this.menuItems.push(elem);\r\n            Dom_1.$$(elem).addClass('coveo-result-actions-menu-menu-item');\r\n        });\r\n    };\r\n    ResultActionsMenu.ID = 'ResultActionsMenu';\r\n    ResultActionsMenu.doExport = function () {\r\n        GlobalExports_1.exportGlobally({\r\n            ResultActionsMenu: ResultActionsMenu\r\n        });\r\n    };\r\n    ResultActionsMenu.SHOW_CLASS = 'coveo-menu-opened';\r\n    /**\r\n     * @componentOptions\r\n     */\r\n    ResultActionsMenu.options = {\r\n        /**\r\n         * Specifies whether the menu should open when the user hovers over the result.\r\n         *\r\n         * When set to false, the menu opens only when clicking on the result.\r\n         *\r\n         * Default value is `true`.\r\n         */\r\n        openOnMouseOver: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true })\r\n    };\r\n    return ResultActionsMenu;\r\n}(Component_1.Component));\r\nexports.ResultActionsMenu = ResultActionsMenu;\r\nInitialization_1.Initialization.registerAutoCreateComponent(ResultActionsMenu);\r\n\n\n/***/ }),\n\n/***/ 650:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// ResultActionsMenu.min__5f3280c404a1ee75a113.js","import { Component } from '../Base/Component';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { Assert } from '../../misc/Assert';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { forEach } from 'underscore';\r\nimport { exportGlobally } from '../../GlobalExports';\r\nimport 'styling/_ResultActionsMenu';\r\n\r\nexport interface IResultActionsMenuOptions {\r\n  openOnMouseOver?: boolean;\r\n}\r\n\r\n/**\r\n * The _ResultActionsMenu_ component adds a floating result action menu, meant to be used inside result templates (see [Result Templates](https://docs.coveo.com/en/413/javascript-search-framework/result-templates)).\r\n * It is designed to contain other components that can execute actions related to the result,\r\n * typically the [Quickview]{@link Quickview} and AttachToCase components, available in the Coveo for Salesforce and Coveo for Dynamics integrations.\r\n *\r\n * ```html\r\n * <script type=\"text/html\" class=\"result-template\" [...]\r\n *   <div class=\"coveo-result-frame\">\r\n *     <div class=\"CoveoResultActionsMenu\">\r\n *       <div class=\"CoveoQuickview\"></div>\r\n *     </div>\r\n *   [...]\r\n * </script>\r\n * ```\r\n *\r\n * @availablesince [July 2018 Release (v2.4382.10)](https://docs.coveo.com/410/#july-2018-release-v2438210)\r\n */\r\nexport class ResultActionsMenu extends Component {\r\n  static ID = 'ResultActionsMenu';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      ResultActionsMenu: ResultActionsMenu\r\n    });\r\n  };\r\n\r\n  static readonly SHOW_CLASS: string = 'coveo-menu-opened';\r\n\r\n  /**\r\n   * @componentOptions\r\n   */\r\n  static options: IResultActionsMenuOptions = {\r\n    /**\r\n     * Specifies whether the menu should open when the user hovers over the result.\r\n     *\r\n     * When set to false, the menu opens only when clicking on the result.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    openOnMouseOver: ComponentOptions.buildBooleanOption({ defaultValue: true })\r\n  };\r\n\r\n  /**\r\n   * The rendered result that contains this menu.\r\n   */\r\n  parentResult: HTMLElement;\r\n\r\n  /**\r\n   * A list containing menu items for this menu.\r\n   */\r\n  menuItems: HTMLElement[];\r\n\r\n  /**\r\n   * Creates a new `ResultActionsMenu` component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the `ResultActionsMenu` component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   * @param result The result to associate the component with.\r\n   */\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options: IResultActionsMenuOptions,\r\n    public bindings?: IResultsComponentBindings,\r\n    public result?: IQueryResult\r\n  ) {\r\n    super(element, ResultActionsMenu.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, ResultActionsMenu, options);\r\n\r\n    this.initializeParentResult();\r\n    this.bindEvents();\r\n\r\n    this.buildMenuItems();\r\n  }\r\n\r\n  /**\r\n   * Shows the floating menu.\r\n   */\r\n  public show() {\r\n    $$(this.element).addClass(ResultActionsMenu.SHOW_CLASS);\r\n  }\r\n\r\n  /**\r\n   * Hides the floating menu.\r\n   */\r\n  public hide() {\r\n    $$(this.element).removeClass(ResultActionsMenu.SHOW_CLASS);\r\n  }\r\n\r\n  private initializeParentResult() {\r\n    // Find the result containing this ResultActionsMenu\r\n    this.parentResult = $$(this.element).closest('CoveoResult');\r\n    Assert.check(this.parentResult !== undefined, 'ResultActionsMenu needs to be a child of a Result');\r\n\r\n    $$(this.parentResult).addClass('coveo-clickable');\r\n  }\r\n\r\n  private bindEvents() {\r\n    $$(this.parentResult).on('click', () => this.show());\r\n\r\n    $$(this.parentResult).on('mouseleave', () => this.hide());\r\n    if (this.options.openOnMouseOver) {\r\n      $$(this.parentResult).on('mouseenter', () => this.show());\r\n    }\r\n  }\r\n\r\n  private buildMenuItems() {\r\n    this.menuItems = [];\r\n    forEach($$(this.element).children(), (elem: HTMLElement) => {\r\n      this.menuItems.push(elem);\r\n      $$(elem).addClass('coveo-result-actions-menu-menu-item');\r\n    });\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(ResultActionsMenu);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultActions/ResultActionsMenu.ts"],"sourceRoot":""}