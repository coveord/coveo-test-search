{"version":3,"sources":["./src/ui/CommerceQuery/CommerceQuery.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,yCAA8C;AAE9C,gDAA4D;AAC5D,4CAAgF;AAChF,gDAAoG;AACpG,8CAAwD;AACxD,6CAAqD;AAMrD;;;;GAIG;AACH;IAAmC,iCAAS;IA0B1C;;;;;;OAMG;IACH,uBAAmB,OAAoB,EAAS,OAA+B,EAAS,QAA6B;QAArH,YACE,kBAAM,OAAO,EAAE,aAAa,CAAC,EAAE,EAAE,QAAQ,CAAC,SAM3C;QAPkB,aAAO,GAAP,OAAO,CAAa;QAAS,aAAO,GAAP,OAAO,CAAwB;QAAS,cAAQ,GAAR,QAAQ,CAAqB;QAGnH,KAAI,CAAC,OAAO,GAAG,mCAAgB,CAAC,oBAAoB,CAAC,OAAO,EAAE,aAAa,EAAE,OAAO,CAAC,CAAC;QAEtF,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,iBAAiB,EAAE,KAAI,CAAC,uBAAuB,CAAC,CAAC;QACrF,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,iCAAe,CAAC,yBAAyB,EAAE,KAAI,CAAC,qBAAqB,CAAC,CAAC;;IACjG,CAAC;IAEO,+CAAuB,GAA/B,UAAgC,KAA8B;QAC5D,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;YACxB,KAAK,CAAC,YAAY,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;YAC9C,KAAK,CAAC,YAAY,CAAC,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;SACrE;IACH,CAAC;IAEO,6CAAqB,GAA7B,UAA8B,KAA0C;QACtE,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;YACxB,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;SAC3C;IACH,CAAC;IApDM,gBAAE,GAAG,eAAe,CAAC;IAErB,sBAAQ,GAAG;QAChB,8BAAc,CAAC;YACb,aAAa,EAAE,aAAa;SAC7B,CAAC,CAAC;IACL,CAAC,CAAC;IAEF;;;OAGG;IACI,qBAAO,GAA0B;QACtC;;;;;;;;WAQG;QACH,OAAO,EAAE,mCAAgB,CAAC,iBAAiB,EAAE;KAC9C,CAAC;IA8BJ,oBAAC;CAAA,CAtDkC,qBAAS,GAsD3C;AAtDY,sCAAa;AAwD1B,+BAAc,CAAC,2BAA2B,CAAC,aAAa,CAAC,CAAC","file":"CommerceQuery__1728cc16e4d2d82aa5db.js","sourcesContent":["import { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { QueryEvents, IBuildingQueryEventArgs } from '../../events/QueryEvents';\r\nimport { AnalyticsEvents, IChangeAnalyticsCustomDataEventArgs } from '../../events/AnalyticsEvents';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\nexport interface ICommerceQueryOptions {\r\n  listing?: string;\r\n}\r\n\r\n/**\r\n * This component exposes options to handle commerce-related queries.\r\n *\r\n * @availablesince [March 2020 Release (v2.8521)](https://docs.coveo.com/en/3203/)\r\n */\r\nexport class CommerceQuery extends Component {\r\n  static ID = 'CommerceQuery';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      CommerceQuery: CommerceQuery\r\n    });\r\n  };\r\n\r\n  /**\r\n   * The options for the CommerceQuery.\r\n   * @componentOptions\r\n   */\r\n  static options: ICommerceQueryOptions = {\r\n    /**\r\n     * The listing page identifier.\r\n     *\r\n     * In a typical Coveo for Commerce solution, all listing pages should share the same `searchHub`/`originLevel1` and be differentiated by setting this option to a unique, human-readable value.\r\n     *\r\n     * When specified, this option sets the `tab`/`originLevel2` parameter, as well as the `listing` property of the `context`/`customData` object of each query/usage analytics event originating from the listing page. This allows Coveo ML to provide relevant output for the listing page, and can also be useful for usage analytics reporting purposes.\r\n     *\r\n     * @examples ACME Furniture, ACME Jewelry, ACME Clothes\r\n     */\r\n    listing: ComponentOptions.buildStringOption()\r\n  };\r\n\r\n  /**\r\n   * Creates a new CommerceQuery component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the CommerceQuery component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   */\r\n  constructor(public element: HTMLElement, public options?: ICommerceQueryOptions, public bindings?: IComponentBindings) {\r\n    super(element, CommerceQuery.ID, bindings);\r\n\r\n    this.options = ComponentOptions.initComponentOptions(element, CommerceQuery, options);\r\n\r\n    this.bind.onRootElement(QueryEvents.doneBuildingQuery, this.handleDoneBuildingQuery);\r\n    this.bind.onRootElement(AnalyticsEvents.changeAnalyticsCustomData, this.handleChangeAnalytics);\r\n  }\r\n\r\n  private handleDoneBuildingQuery(event: IBuildingQueryEventArgs) {\r\n    if (this.options.listing) {\r\n      event.queryBuilder.tab = this.options.listing;\r\n      event.queryBuilder.addContextValue('listing', this.options.listing);\r\n    }\r\n  }\r\n\r\n  private handleChangeAnalytics(event: IChangeAnalyticsCustomDataEventArgs) {\r\n    if (this.options.listing) {\r\n      event.originLevel2 = this.options.listing;\r\n    }\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(CommerceQuery);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/CommerceQuery/CommerceQuery.ts"],"sourceRoot":""}