{"version":3,"sources":["Recommendation.min__a9b0c0df44822bb24a08.js","./src/ui/Recommendation/Recommendation.ts","./src/events/QuickviewEvents.ts","./src/ui/Templates/DefaultRecommendationTemplate.ts","./src/ui/ResponsiveComponents/ResponsiveComponentsUtils.ts","./src/ui/ResponsiveComponents/ResponsiveRecommendation.ts","./src/ui/ResponsiveComponents/ResponsiveDropdown/RecommendationDropdownContent.ts","./src/ui/Recommendation/RecommendationQuery.ts"],"names":["webpackJsonpCoveo__temporary","198","module","exports","__webpack_require__","__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","element","options","analyticsOptions","_window","ComponentOptions","initComponentOptions","Recommendation","style","display","id","generateDefaultId","preventEventPropagation","mainSearchInterface","bindToMainSearchInterface","$$","on","QueryEvents","buildingQuery","e","args","handleRecommendationBuildingQuery","querySuccess","handleRecommendationQuerySuccess","noResults","handleRecommendationNoResults","queryError","handleRecommendationQueryError","ensureCurrentPageViewExistsInStore","ResponsiveRecommendation","init","root","_this","get","queryController","historyStore","enumerable","configurable","getId","enable","show","disable","hide","addClass","removeClass","historyElement","name","document","location","toString","time","JSON","stringify","Date","title","_","escape","addElement","bindComponentOptionsModelToMainSearchInterface","bindQueryEventsToMainSearchInterface","searchInterfaceComponent","SearchInterface","alreadyInitialized","onceInitialized","mainSearchInterfaceOptionsModel","getBindings","componentOptionsModel","setMultiple","getAttributes","getEventName","MODEL_EVENTS","ALL","InitializationEvents","afterComponentsInitialization","mainInterfaceQuery","mainQuerySearchUID","results","searchUid","mainQueryPipeline","pipeline","length","usageAnalytics","logSearchEvent","analyticsActionCauseList","recommendation","executeQuery","closeModalBox","data","disabled","modifyQueryForRecommendation","addRecommendationInfoInQuery","hideIfNoResults","totalCount","Utils","copyObjectAttributes","queryBuilder","optionsToUse","isEmpty","userContext","addContext","preventEventPropagationOn","OmniboxEvents","ResultListEvents","SettingsEvents","PreferencesPanelEvents","AnalyticsEvents","BreadcrumbEvents","QuickviewEvents","getAllModelEvents","eventType","eventName","event","stopPropagation","events","queryStateModel","each","values","Model","eventTypes","QUERY_STATE_ATTRIBUTES","attribute","NEXT_ID","logger","warn","ID","doExport","exportGlobally","DefaultRecommendationTemplate","RecommendationQuery","RecommendationAnalyticsClient","buildSelectorOption","buildJsonOption","buildStringOption","buildListOption","defaultValue","sendActionsHistory","buildBooleanOption","deprecated","autoTriggerQuery","postProcessing","enableResponsiveMode","responsiveBreakpoint","buildNumberOption","dropdownHeaderLabel","buildLocalizedStringOption","localizedString","l","226","quickviewLoaded","openQuickview","469","_super","apply","arguments","instantiateToString","object","instantiateToElement","Promise","resolve","reject","div","createElement","innerHTML","Template","50","shouldDrawFacetSlider","facetSliderElement","ResponsiveDropdownContent","isTargetInsideOpenedDropdown","isSmallFacetActivated","isSmallTabsActivated","hasClass","smallTabsClassName","smallFacetClassName","isSmallRecommendationActivated","smallRecommendationClassName","activateSmallTabs","deactivateSmallTabs","activateSmallFacet","deactivateSmallFacet","activateSmallRecommendation","deactivateSmallRecommendation","ResponsiveComponentsUtils","650","coveoRoot","responsiveDropdown","recommendationRoot","getRecommendationRoot","breakpoint","defineResponsiveBreakpoint","searchInterface","Component","el","dropdown","buildDropdown","registerOnOpenHandler","registerQueryEvents","handleResizeEvent","component","Logger","findParentRootOfRecommendationComponent","find","ResponsiveComponentsManager","register","extend","initializationEventRoot","info","parents","computeCssClassName","needSmallMode","changeToSmallMode","changeToLargeMode","isOpened","dropdownContent","positionDropdown","needDropdownWrapper","isWidthSmallerThanBreakpoint","width","responsiveComponents","getResponsiveMode","close","header","DROPDOWN_HEADER_WRAPPER_CSS_CLASS","append","dropdownHeader","disableFacetPreservePosition","Defer","defer","enableFacetPreservePosition","cleanUp","buildDropdownContent","buildDropdownHeader","ResponsiveDropdown","dropdownHeaderElement","content","text","appendChild","ResponsiveDropdownHeader","dropdownContentElement","recommendationColumn","RecommendationDropdownContent","isNullOrUndefined","RESPONSIVE_BREAKPOINT","getFacetSliders","facetSliders","findAll","computeSelectorForType","forEach","facetSlider","push","getFacets","facets","facetElement","facet","preservePosition","drawFacetSliderGraphs","drawDelayedGraphData","recommendationInstance","handleRecommnendationQuerySucess","DROPDOWN_CONTAINER_CSS_CLASS_NAME","651","componentName","cssClassName","DEFAULT_CSS_CLASS_NAME","dropdownContentWrapper","prepend","window","getComputedStyle","maxHeight","OPENED_DROPDOWN_CSS_CLASS_NAME","hideDropdown","652","653","bindings","tagName","toLowerCase","decodeHTMLEntities","isUndefined","bind","onRootElement","handleBuildingQuery","advancedExpression","add","Initialization","registerAutoCreateComponent","654"],"mappings":"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","file":"Recommendation.min__a9b0c0df44822bb24a08.js","sourcesContent":["webpackJsonpCoveo__temporary([20],{\n\n/***/ 198:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SearchInterface_1 = __webpack_require__(20);\nvar ComponentOptions_1 = __webpack_require__(8);\nvar QueryEvents_1 = __webpack_require__(11);\nvar OmniboxEvents_1 = __webpack_require__(34);\nvar ResultListEvents_1 = __webpack_require__(30);\nvar SettingsEvents_1 = __webpack_require__(55);\nvar PreferencesPanelEvents_1 = __webpack_require__(98);\nvar AnalyticsEvents_1 = __webpack_require__(57);\nvar AnalyticsActionListMeta_1 = __webpack_require__(10);\nvar BreadcrumbEvents_1 = __webpack_require__(35);\nvar QuickviewEvents_1 = __webpack_require__(226);\nvar QueryStateModel_1 = __webpack_require__(13);\nvar Model_1 = __webpack_require__(18);\nvar Utils_1 = __webpack_require__(4);\nvar Dom_1 = __webpack_require__(1);\nvar ResponsiveRecommendation_1 = __webpack_require__(650);\nvar RegisteredNamedMethods_1 = __webpack_require__(31);\nvar InitializationEvents_1 = __webpack_require__(17);\nvar _ = __webpack_require__(0);\nvar GlobalExports_1 = __webpack_require__(3);\nvar DefaultRecommendationTemplate_1 = __webpack_require__(469);\nvar RecommendationQuery_1 = __webpack_require__(653);\nvar RecommendationAnalyticsClient_1 = __webpack_require__(208);\n__webpack_require__(654);\nvar Strings_1 = __webpack_require__(6);\n/**\n * The Recommendation component is a {@link SearchInterface} that displays recommendations typically based on user\n * history.\n *\n * This component usually listens to the main SearchInterface. When the main SearchInterface generates a query, the\n * Recommendation component generates another query to get the recommendations at the same time.\n *\n * To get history-based recommendations, you will likely want to include the `pageview` script in your page (see\n * [coveo.analytics.js](https://github.com/coveo/coveo.analytics.js)). However, including this script is not mandatory.\n * For instance, you could use the Recommendation component without the Coveo Machine Learning service to create a\n * simple \"recommended people\" interface.\n *\n * It is possible to include this component inside another SearchInterface, but it is also possible to instantiate it as\n * a \"standalone\" search interface, without even instantiating a main SearchInterface component. In any case, a\n * Recommendation component always acts as a full-fledged search interface. Therefore, you can include any component\n * inside the Recommendation component (Searchbox, Facet, Sort, etc.), just as you would inside the main SearchInterface\n * component.\n *\n * @availablesince [July 2016 Release (v1.667.24)](https://docs.coveo.com/en/309/#july-2016-release-v166724)\n */\nvar Recommendation = /** @class */ (function (_super) {\n    __extends(Recommendation, _super);\n    /**\n     * Creates a new Recommendation component.\n     * @param element The HTMLElement on which to instantiate the component.\n     * @param options The options for the Recommendation component.\n     * @param bindings The bindings that the component requires to function normally. If not set, these will be\n     * automatically resolved (with a slower execution time)\n     * @param _window\n     */\n    function Recommendation(element, options, analyticsOptions, _window) {\n        if (options === void 0) { options = {}; }\n        if (analyticsOptions === void 0) { analyticsOptions = {}; }\n        if (_window === void 0) { _window = window; }\n        var _this = _super.call(this, element, ComponentOptions_1.ComponentOptions.initComponentOptions(element, Recommendation, options), analyticsOptions, _window) || this;\n        _this.element = element;\n        _this.options = options;\n        _this.analyticsOptions = analyticsOptions;\n        _this.element.style.display = '';\n        if (!_this.options.id) {\n            _this.generateDefaultId();\n        }\n        // This is done to allow the component to be included in another search interface without triggering the parent events.\n        _this.preventEventPropagation();\n        if (_this.options.mainSearchInterface) {\n            _this.bindToMainSearchInterface();\n        }\n        Dom_1.$$(_this.element).on(QueryEvents_1.QueryEvents.buildingQuery, function (e, args) {\n            return _this.handleRecommendationBuildingQuery(args);\n        });\n        Dom_1.$$(_this.element).on(QueryEvents_1.QueryEvents.querySuccess, function (e, args) { return _this.handleRecommendationQuerySuccess(args); });\n        Dom_1.$$(_this.element).on(QueryEvents_1.QueryEvents.noResults, function (e, args) { return _this.handleRecommendationNoResults(); });\n        Dom_1.$$(_this.element).on(QueryEvents_1.QueryEvents.queryError, function (e, args) { return _this.handleRecommendationQueryError(); });\n        if (!_this.options.mainSearchInterface) {\n            // When the recommendation component is \"standalone\", we add additional safeguard against bad config.\n            _this.ensureCurrentPageViewExistsInStore();\n        }\n        ResponsiveRecommendation_1.ResponsiveRecommendation.init(_this.root, _this, options);\n        return _this;\n    }\n    Object.defineProperty(Recommendation.prototype, \"historyStore\", {\n        get: function () {\n            return this.queryController.historyStore;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Recommendation.prototype.getId = function () {\n        return this.options.id;\n    };\n    Recommendation.prototype.enable = function () {\n        _super.prototype.enable.call(this);\n        this.show();\n    };\n    Recommendation.prototype.disable = function () {\n        _super.prototype.disable.call(this);\n        this.hide();\n    };\n    Recommendation.prototype.hide = function () {\n        Dom_1.$$(this.element).addClass('coveo-hidden');\n    };\n    Recommendation.prototype.show = function () {\n        Dom_1.$$(this.element).removeClass('coveo-hidden');\n    };\n    Recommendation.prototype.ensureCurrentPageViewExistsInStore = function () {\n        // It's not 100% sure that the element will actually be added in the store.\n        // It's possible that an external script configured by the end user to log the page view already did that.\n        // So we *could* end up with duplicate values in the store :\n        // We rely on the fact that the coveo.analytics lib has defensive code against consecutive page view that are identical.\n        // This is mainly done if the recommendation component is being initialized before the page view could be logged correctly by the coveo.analytics externa lib.\n        var historyElement = {\n            name: 'PageView',\n            value: document.location.toString(),\n            time: JSON.stringify(new Date()),\n            title: _.escape(document.title)\n        };\n        this.historyStore.addElement(historyElement);\n    };\n    Recommendation.prototype.bindToMainSearchInterface = function () {\n        this.bindComponentOptionsModelToMainSearchInterface();\n        this.bindQueryEventsToMainSearchInterface();\n    };\n    Recommendation.prototype.bindComponentOptionsModelToMainSearchInterface = function () {\n        var _this = this;\n        // Try to fetch the componentOptions from the main search interface.\n        // Since we do not know which interface is init first (recommendation or full search interface)\n        // add a mechanism that waits for the full search interface to be correctly initialized\n        // then, set the needed values on the component options model.\n        var searchInterfaceComponent = RegisteredNamedMethods_1.get(this.options.mainSearchInterface, SearchInterface_1.SearchInterface);\n        var alreadyInitialized = searchInterfaceComponent != null;\n        var onceInitialized = function () {\n            var mainSearchInterfaceOptionsModel = searchInterfaceComponent.getBindings().componentOptionsModel;\n            _this.componentOptionsModel.setMultiple(mainSearchInterfaceOptionsModel.getAttributes());\n            Dom_1.$$(_this.options.mainSearchInterface).on(_this.componentOptionsModel.getEventName(Model_1.MODEL_EVENTS.ALL), function () {\n                _this.componentOptionsModel.setMultiple(mainSearchInterfaceOptionsModel.getAttributes());\n            });\n        };\n        if (alreadyInitialized) {\n            onceInitialized();\n        }\n        else {\n            Dom_1.$$(this.options.mainSearchInterface).on(InitializationEvents_1.InitializationEvents.afterComponentsInitialization, function () {\n                searchInterfaceComponent = RegisteredNamedMethods_1.get(_this.options.mainSearchInterface, SearchInterface_1.SearchInterface);\n                onceInitialized();\n            });\n        }\n    };\n    Recommendation.prototype.bindQueryEventsToMainSearchInterface = function () {\n        var _this = this;\n        // Whenever a query sucessfully returns on the full search interface, refresh the recommendation component.\n        Dom_1.$$(this.options.mainSearchInterface).on(QueryEvents_1.QueryEvents.querySuccess, function (e, args) {\n            _this.mainInterfaceQuery = args;\n            _this.mainQuerySearchUID = args.results.searchUid;\n            _this.mainQueryPipeline = args.results.pipeline;\n            if (args.results.results.length != 0) {\n                _this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.recommendation, {});\n                _this.queryController.executeQuery({\n                    closeModalBox: false\n                });\n            }\n        });\n        Dom_1.$$(this.options.mainSearchInterface).on(QueryEvents_1.QueryEvents.queryError, function () { return _this.hide(); });\n        Dom_1.$$(this.options.mainSearchInterface).on(QueryEvents_1.QueryEvents.noResults, function () { return _this.hide(); });\n    };\n    Recommendation.prototype.handleRecommendationBuildingQuery = function (data) {\n        if (!this.disabled) {\n            this.modifyQueryForRecommendation(data);\n            this.addRecommendationInfoInQuery(data);\n        }\n    };\n    Recommendation.prototype.handleRecommendationQuerySuccess = function (data) {\n        if (!this.disabled) {\n            if (this.options.hideIfNoResults) {\n                if (data.results.totalCount === 0) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }\n        }\n    };\n    Recommendation.prototype.handleRecommendationNoResults = function () {\n        if (!this.disabled) {\n            if (this.options.hideIfNoResults) {\n                this.hide();\n            }\n        }\n    };\n    Recommendation.prototype.handleRecommendationQueryError = function () {\n        if (!this.disabled) {\n            this.hide();\n        }\n    };\n    Recommendation.prototype.modifyQueryForRecommendation = function (data) {\n        if (this.mainInterfaceQuery) {\n            Utils_1.Utils.copyObjectAttributes(data.queryBuilder, this.mainInterfaceQuery.queryBuilder, this.options.optionsToUse);\n        }\n    };\n    Recommendation.prototype.addRecommendationInfoInQuery = function (data) {\n        if (!_.isEmpty(this.options.userContext)) {\n            data.queryBuilder.addContext(this.options.userContext);\n        }\n        data.queryBuilder.recommendation = this.options.id;\n    };\n    Recommendation.prototype.preventEventPropagation = function () {\n        this.preventEventPropagationOn(QueryEvents_1.QueryEvents);\n        this.preventEventPropagationOn(OmniboxEvents_1.OmniboxEvents);\n        this.preventEventPropagationOn(ResultListEvents_1.ResultListEvents);\n        this.preventEventPropagationOn(SettingsEvents_1.SettingsEvents);\n        this.preventEventPropagationOn(PreferencesPanelEvents_1.PreferencesPanelEvents);\n        this.preventEventPropagationOn(AnalyticsEvents_1.AnalyticsEvents);\n        this.preventEventPropagationOn(BreadcrumbEvents_1.BreadcrumbEvents);\n        this.preventEventPropagationOn(QuickviewEvents_1.QuickviewEvents);\n        this.preventEventPropagationOn(InitializationEvents_1.InitializationEvents);\n        this.preventEventPropagationOn(this.getAllModelEvents());\n    };\n    Recommendation.prototype.preventEventPropagationOn = function (eventType, eventName) {\n        if (eventName === void 0) { eventName = function (event) {\n            return event;\n        }; }\n        for (var event_1 in eventType) {\n            Dom_1.$$(this.root).on(eventName(event_1), function (e) { return e.stopPropagation(); });\n        }\n    };\n    Recommendation.prototype.getAllModelEvents = function () {\n        var _this = this;\n        var events = {};\n        var queryStateModel = this.getBindings().queryStateModel;\n        _.each(_.values(Model_1.Model.eventTypes), function (event) {\n            var eventName = queryStateModel.getEventName(event);\n            events[eventName] = eventName;\n            _.each(_.values(QueryStateModel_1.QUERY_STATE_ATTRIBUTES), function (attribute) {\n                var eventName = _this.queryStateModel.getEventName(event + attribute);\n                events[eventName] = eventName;\n            });\n        });\n        return events;\n    };\n    Recommendation.prototype.generateDefaultId = function () {\n        var id = 'Recommendation';\n        if (Recommendation.NEXT_ID !== 1) {\n            this.logger.warn('Generating another recommendation default id', 'Consider configuring a human friendly / meaningful id for this interface');\n            id = id + '_' + Recommendation.NEXT_ID;\n        }\n        Recommendation.NEXT_ID++;\n        this.options.id = id;\n    };\n    Recommendation.ID = 'Recommendation';\n    Recommendation.NEXT_ID = 1;\n    Recommendation.doExport = function () {\n        GlobalExports_1.exportGlobally({\n            Recommendation: Recommendation,\n            DefaultRecommendationTemplate: DefaultRecommendationTemplate_1.DefaultRecommendationTemplate,\n            RecommendationQuery: RecommendationQuery_1.RecommendationQuery,\n            RecommendationAnalyticsClient: RecommendationAnalyticsClient_1.RecommendationAnalyticsClient\n        });\n    };\n    /**\n     * The options for the recommendation component\n     * @componentOptions\n     */\n    Recommendation.options = {\n        /**\n         * Specifies the main {@link SearchInterface} to listen to.\n         */\n        mainSearchInterface: ComponentOptions_1.ComponentOptions.buildSelectorOption(),\n        /**\n         * Specifies the user context to send to Coveo usage analytics.\n         * The component sends this information with the query alongside the user history to get the recommendations.\n         */\n        userContext: ComponentOptions_1.ComponentOptions.buildJsonOption(),\n        /**\n         * Specifies the ID of the interface.\n         * The usage analytics use the interface ID to know which recommendation interface was selected.\n         *\n         * Default value is `Recommendation` for the first one and `Recommendation_{number}`, where {number} depends on the\n         * number of Recommendation interfaces with default IDs in the page for the others.\n         */\n        id: ComponentOptions_1.ComponentOptions.buildStringOption(),\n        /**\n         * Specifies which options from the main {@link QueryBuilder} to use in the triggered query.\n         *\n         * Possible values are:\n         * - `expression`\n         * - `advancedExpression`\n         * - `constantExpression`\n         * - `disjunctionExpression`\n         *\n         * **Example:**\n         *\n         * Adding the expression (`q`) and the advanced expression (`aq`) parts of the main query in the triggered query:\n         *\n         * `data-options-to-use=\"expression,advancedExpression\"`\n         *\n         * Default value is `expression`.\n         */\n        optionsToUse: ComponentOptions_1.ComponentOptions.buildListOption({\n            defaultValue: ['expression']\n        }),\n        /**\n         * Specifies whether to send the actions history along with the triggered query.\n         *\n         * Setting this option to `false` makes it impossible for this component to get Coveo Machine Learning\n         * recommendations.\n         *\n         * However, setting this option to `false` can be useful to display side results in a search page.\n         *\n         * Default value is `true`.\n         *\n         * @deprecated This option is now deprecated. The correct way to control this behavior is to configure an appropriate machine learning model in the administration interface (Recommendation, Relevance tuning, Query suggestions).\n         */\n        sendActionsHistory: ComponentOptions_1.ComponentOptions.buildBooleanOption({\n            defaultValue: true,\n            deprecated: 'This option is now deprecated. The correct way to control this behaviour is to configure an appropriate machine learning model in the administration interface (Recommendation, Relevance tuning, Query suggestions)'\n        }),\n        /**\n         * Specifies whether to hide the Recommendations component if no result or recommendation is available.\n         *\n         * Default value is `true`.\n         */\n        hideIfNoResults: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n        autoTriggerQuery: ComponentOptions_1.ComponentOptions.buildBooleanOption({\n            postProcessing: function (value, options) {\n                if (options.mainSearchInterface) {\n                    return false;\n                }\n                return value;\n            }\n        }),\n        /**\n         * Specifies whether to enable *responsive mode* for Recommendation components. Setting this options to `false` on\n         * any Recommendation component in a search interface disables responsive mode for all other Recommendation\n         * components in the search interface.\n         *\n         * Responsive mode displays all Recommendation components under a single dropdown button whenever the width of the\n         * HTML element which the search interface is bound to reaches or falls behind a certain threshold (see\n         * {@link Recommendation.options.responsiveBreakpoint}).\n         *\n         * See also {@link Recommendation.options.dropdownHeaderLabel}.\n         *\n         * Default value is `true`.\n         */\n        enableResponsiveMode: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n        /**\n         * If {@link Recommendation.options.enableResponsiveMode} is `true` for all Recommendation components, specifies the\n         * width threshold (in pixels) of the search interface at which Recommendation components go in responsive mode.\n         *\n         * Recommendation components go in responsive mode when the width of the search interface is equal to or lower than\n         * this value.\n         *\n         * The `search interface` corresponds to the HTML element with the class `CoveoSearchInterface`.\n         *\n         * If more than one Recommendation component in the search interface specifies a value for this option, then the\n         * framework uses the last occurrence of the option.\n         *\n         * Default value is `1000`.\n         */\n        responsiveBreakpoint: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 1000 }),\n        /**\n         * If {@link Recommendation.options.enableResponsiveMode} is `true` for all Recommendation components, specifies the\n         * label of the dropdown button that allows to display the Recommendation components when in responsive mode.\n         *\n         * If more than one Recommendation component in the search interface specifies a value for this option, then the\n         * framework uses the first occurrence of the option.\n         *\n         * Default value is `Recommendations`.\n         */\n        dropdownHeaderLabel: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption({\n            localizedString: function () { return Strings_1.l('Recommendations'); }\n        })\n    };\n    return Recommendation;\n}(SearchInterface_1.SearchInterface));\nexports.Recommendation = Recommendation;\n// We do not register the Recommendation component since it is done with .coveo('initRecommendation')\n\n\n/***/ }),\n\n/***/ 226:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The `QuickviewEvents` static class contains the string definitions of all events that strongly relate to the\n * [`Quickview`]{@link Quickview} component.\n */\nvar QuickviewEvents = /** @class */ (function () {\n    function QuickviewEvents() {\n    }\n    /**\n     * Triggered by the [`QuickviewDocument`]{@link QuickviewDocument} component when the content to display in the\n     * quickview modal window has just finished downloading.\n     *\n     * The [`Quickview`]{@link Quickview} component listens to this event to know when to remove its loading animation.\n     *\n     * All `quickviewLoaded` event handlers receive a [`QuickviewLoadedEventArgs`]{@link IQuickviewLoadedEventArgs} object\n     * as an argument.\n     *\n     * @type {string} The string value is `quickviewLoaded`.\n     */\n    QuickviewEvents.quickviewLoaded = 'quickviewLoaded';\n    /**\n     * Triggered by the [`QuickviewDocument`]{@link QuickviewDocument} component when the end user has just clicked the\n     * **Quickview** button/link to open the quickview modal window.\n     *\n     * This event allows external code to modify the terms to highlight before the content of the quickview modal window\n     * is rendered.\n     *\n     * All `openQuickview` event handlers receive an\n     * [`OpenQuickviewEventArgs`]{@link ResultListEvents.IOpenQuickviewEventArgs} object as an argument.\n     *\n     * @type {string} The string value is `openQuickview`.\n     */\n    QuickviewEvents.openQuickview = 'openQuickview';\n    return QuickviewEvents;\n}());\nexports.QuickviewEvents = QuickviewEvents;\n\n\n/***/ }),\n\n/***/ 469:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Template_1 = __webpack_require__(27);\nvar DefaultRecommendationTemplate = /** @class */ (function (_super) {\n    __extends(DefaultRecommendationTemplate, _super);\n    function DefaultRecommendationTemplate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DefaultRecommendationTemplate.prototype.instantiateToString = function (object) {\n        var template = \"<div class=\\\"coveo-result-frame\\\">\\n        <div class=\\\"coveo-result-row\\\">\\n          <div class=\\\"coveo-result-cell\\\" style=\\\"width:40px;text-align:center;vertical-align:middle;\\\">\\n            <span class=\\\"CoveoIcon\\\" data-small=\\\"true\\\" data-with-label=\\\"false\\\">\\n            </span>\\n          </div>\\n          <div class=\\\"coveo-result-cell\\\" style=\\\"padding:0 0 3px 5px;vertical-align:middle\\\">\\n            <div class=\\\"coveo-result-row\\\">\\n              <div class=\\\"coveo-result-cell\\\" style=\\\"font-size:10pt;\\\">\\n                <a class=\\\"CoveoResultLink\\\" style=\\\"display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\\\">\\n                </a>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\";\n        return template;\n    };\n    DefaultRecommendationTemplate.prototype.instantiateToElement = function (object) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var div = document.createElement('div');\n            div.innerHTML = _this.instantiateToString(object);\n            resolve(div);\n        });\n    };\n    return DefaultRecommendationTemplate;\n}(Template_1.Template));\nexports.DefaultRecommendationTemplate = DefaultRecommendationTemplate;\n\n\n/***/ }),\n\n/***/ 50:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ResponsiveDropdownContent_1 = __webpack_require__(67);\nvar ResponsiveComponentsUtils = /** @class */ (function () {\n    function ResponsiveComponentsUtils() {\n    }\n    ResponsiveComponentsUtils.shouldDrawFacetSlider = function (root, facetSliderElement) {\n        return ResponsiveDropdownContent_1.ResponsiveDropdownContent.isTargetInsideOpenedDropdown(facetSliderElement) || !this.isSmallFacetActivated(root);\n    };\n    ResponsiveComponentsUtils.isSmallTabsActivated = function (root) {\n        return root.hasClass(this.smallTabsClassName);\n    };\n    ResponsiveComponentsUtils.isSmallFacetActivated = function (root) {\n        return root.hasClass(this.smallFacetClassName);\n    };\n    ResponsiveComponentsUtils.isSmallRecommendationActivated = function (root) {\n        return root.hasClass(this.smallRecommendationClassName);\n    };\n    ResponsiveComponentsUtils.activateSmallTabs = function (root) {\n        root.addClass(this.smallTabsClassName);\n    };\n    ResponsiveComponentsUtils.deactivateSmallTabs = function (root) {\n        root.removeClass(this.smallTabsClassName);\n    };\n    ResponsiveComponentsUtils.activateSmallFacet = function (root) {\n        root.addClass(this.smallFacetClassName);\n    };\n    ResponsiveComponentsUtils.deactivateSmallFacet = function (root) {\n        root.removeClass(this.smallFacetClassName);\n    };\n    ResponsiveComponentsUtils.activateSmallRecommendation = function (root) {\n        root.addClass(this.smallRecommendationClassName);\n    };\n    ResponsiveComponentsUtils.deactivateSmallRecommendation = function (root) {\n        root.removeClass(this.smallRecommendationClassName);\n    };\n    ResponsiveComponentsUtils.smallTabsClassName = 'coveo-small-tabs';\n    ResponsiveComponentsUtils.smallFacetClassName = 'coveo-small-facets';\n    ResponsiveComponentsUtils.smallRecommendationClassName = 'coveo-small-recommendation';\n    return ResponsiveComponentsUtils;\n}());\nexports.ResponsiveComponentsUtils = ResponsiveComponentsUtils;\n\n\n/***/ }),\n\n/***/ 650:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ResponsiveComponentsManager_1 = __webpack_require__(84);\nvar ResponsiveComponentsUtils_1 = __webpack_require__(50);\nvar SearchInterface_1 = __webpack_require__(20);\nvar Utils_1 = __webpack_require__(4);\nvar Dom_1 = __webpack_require__(1);\nvar Logger_1 = __webpack_require__(9);\nvar Recommendation_1 = __webpack_require__(198);\nvar RecommendationDropdownContent_1 = __webpack_require__(651);\nvar ResponsiveDropdownHeader_1 = __webpack_require__(132);\nvar ResponsiveDropdown_1 = __webpack_require__(120);\nvar Strings_1 = __webpack_require__(6);\nvar Component_1 = __webpack_require__(7);\nvar RegisteredNamedMethods_1 = __webpack_require__(31);\nvar QueryEvents_1 = __webpack_require__(11);\nvar _ = __webpack_require__(0);\n__webpack_require__(652);\nvar MiscModules_1 = __webpack_require__(62);\nvar ResponsiveRecommendation = /** @class */ (function () {\n    function ResponsiveRecommendation(coveoRoot, ID, options, responsiveDropdown) {\n        this.coveoRoot = coveoRoot;\n        this.ID = ID;\n        this.responsiveDropdown = responsiveDropdown;\n        this.recommendationRoot = this.getRecommendationRoot();\n        this.dropdownHeaderLabel = options.dropdownHeaderLabel;\n        this.breakpoint = this.defineResponsiveBreakpoint(options);\n        this.searchInterface = Component_1.Component.get(this.coveoRoot.el, SearchInterface_1.SearchInterface, false);\n        this.dropdown = this.buildDropdown(responsiveDropdown);\n        this.registerOnOpenHandler();\n        this.registerQueryEvents();\n        this.handleResizeEvent();\n    }\n    ResponsiveRecommendation.init = function (root, component, options) {\n        var logger = new Logger_1.Logger('ResponsiveRecommendation');\n        var coveoRoot = this.findParentRootOfRecommendationComponent(root);\n        if (!coveoRoot) {\n            logger.info('Recommendation component has no parent interface. Disabling responsive mode for this component.');\n            return;\n        }\n        if (!Dom_1.$$(coveoRoot).find('.coveo-results-column')) {\n            logger.info('Cannot find element with class coveo-results-column. Disabling responsive mode for this component.');\n            return;\n        }\n        ResponsiveComponentsManager_1.ResponsiveComponentsManager.register(ResponsiveRecommendation, Dom_1.$$(coveoRoot), Recommendation_1.Recommendation.ID, component, _.extend({}, options, { initializationEventRoot: Dom_1.$$(root) }));\n    };\n    ResponsiveRecommendation.findParentRootOfRecommendationComponent = function (root) {\n        var coveoRoot = Dom_1.$$(root).parents(Component_1.Component.computeCssClassName(SearchInterface_1.SearchInterface));\n        if (coveoRoot[0]) {\n            return Dom_1.$$(coveoRoot[0]);\n        }\n        return null;\n    };\n    ResponsiveRecommendation.prototype.handleResizeEvent = function () {\n        if (this.needSmallMode() && !ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.isSmallRecommendationActivated(this.coveoRoot)) {\n            this.changeToSmallMode();\n        }\n        else if (!this.needSmallMode() && ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.isSmallRecommendationActivated(this.coveoRoot)) {\n            this.changeToLargeMode();\n        }\n        if (this.dropdown.isOpened) {\n            this.dropdown.dropdownContent.positionDropdown();\n        }\n    };\n    ResponsiveRecommendation.prototype.needDropdownWrapper = function () {\n        return this.needSmallMode();\n    };\n    ResponsiveRecommendation.prototype.needSmallMode = function () {\n        var isWidthSmallerThanBreakpoint = this.coveoRoot.width() <= this.breakpoint;\n        if (!this.searchInterface) {\n            return isWidthSmallerThanBreakpoint;\n        }\n        switch (this.searchInterface.responsiveComponents.getResponsiveMode()) {\n            case 'small':\n                return true;\n            case 'auto':\n                return isWidthSmallerThanBreakpoint;\n            default:\n                return false;\n        }\n    };\n    ResponsiveRecommendation.prototype.changeToSmallMode = function () {\n        var _this = this;\n        this.dropdown.close();\n        var header = this.coveoRoot.find(\".\" + ResponsiveComponentsManager_1.ResponsiveComponentsManager.DROPDOWN_HEADER_WRAPPER_CSS_CLASS);\n        if (!header) {\n            // It's possible that recommendation gets initialized before the main interface is completed.\n            // We defer the resize event execution in that case.\n            MiscModules_1.Defer.defer(function () { return _this.handleResizeEvent(); });\n        }\n        else {\n            Dom_1.$$(header).append(this.dropdown.dropdownHeader.element.el);\n            this.disableFacetPreservePosition();\n            ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.activateSmallRecommendation(this.coveoRoot);\n            ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.activateSmallRecommendation(this.recommendationRoot);\n        }\n    };\n    ResponsiveRecommendation.prototype.changeToLargeMode = function () {\n        this.enableFacetPreservePosition();\n        this.dropdown.cleanUp();\n        ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.deactivateSmallRecommendation(this.coveoRoot);\n        ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.deactivateSmallRecommendation(this.recommendationRoot);\n    };\n    ResponsiveRecommendation.prototype.buildDropdown = function (responsiveDropdown) {\n        var dropdownContent = this.buildDropdownContent();\n        var dropdownHeader = this.buildDropdownHeader();\n        var dropdown = responsiveDropdown ? responsiveDropdown : new ResponsiveDropdown_1.ResponsiveDropdown(dropdownContent, dropdownHeader, this.coveoRoot);\n        return dropdown;\n    };\n    ResponsiveRecommendation.prototype.buildDropdownHeader = function () {\n        var dropdownHeaderElement = Dom_1.$$('a');\n        var content = Dom_1.$$('p');\n        content.text(Strings_1.l(this.dropdownHeaderLabel));\n        dropdownHeaderElement.el.appendChild(content.el);\n        var dropdownHeader = new ResponsiveDropdownHeader_1.ResponsiveDropdownHeader('recommendation', dropdownHeaderElement);\n        return dropdownHeader;\n    };\n    ResponsiveRecommendation.prototype.buildDropdownContent = function () {\n        var dropdownContentElement;\n        var recommendationColumn = this.coveoRoot.find('.coveo-recommendation-column');\n        if (recommendationColumn) {\n            dropdownContentElement = Dom_1.$$(recommendationColumn);\n        }\n        else {\n            dropdownContentElement = Dom_1.$$(this.coveoRoot.find('.' + Component_1.Component.computeCssClassName(Recommendation_1.Recommendation)));\n        }\n        var dropdownContent = new RecommendationDropdownContent_1.RecommendationDropdownContent('recommendation', dropdownContentElement, this.coveoRoot);\n        return dropdownContent;\n    };\n    ResponsiveRecommendation.prototype.defineResponsiveBreakpoint = function (options) {\n        var breakpoint;\n        if (Utils_1.Utils.isNullOrUndefined(options.responsiveBreakpoint)) {\n            breakpoint = ResponsiveRecommendation.RESPONSIVE_BREAKPOINT;\n        }\n        else {\n            breakpoint = options.responsiveBreakpoint;\n        }\n        return breakpoint;\n    };\n    ResponsiveRecommendation.prototype.getFacetSliders = function () {\n        var facetSliders = [];\n        this.coveoRoot.findAll(Component_1.Component.computeSelectorForType('FacetSlider')).forEach(function (facetSliderElement) {\n            var facetSlider = Component_1.Component.get(facetSliderElement);\n            facetSlider && facetSliders.push(facetSlider);\n        });\n        return facetSliders;\n    };\n    ResponsiveRecommendation.prototype.getFacets = function () {\n        var facets = [];\n        this.coveoRoot.findAll(Component_1.Component.computeSelectorForType('Facet')).forEach(function (facetElement) {\n            var facet = Component_1.Component.get(facetElement);\n            facet && facets.push(facet);\n        });\n        return facets;\n    };\n    ResponsiveRecommendation.prototype.enableFacetPreservePosition = function () {\n        this.getFacets().forEach(function (facet) { return (facet.options.preservePosition = true); });\n    };\n    ResponsiveRecommendation.prototype.disableFacetPreservePosition = function () {\n        this.getFacets().forEach(function (facet) { return (facet.options.preservePosition = false); });\n    };\n    ResponsiveRecommendation.prototype.drawFacetSliderGraphs = function () {\n        this.getFacetSliders().forEach(function (facetSlider) { return facetSlider.drawDelayedGraphData(); });\n    };\n    ResponsiveRecommendation.prototype.registerOnOpenHandler = function () {\n        this.dropdown.registerOnOpenHandler(this.drawFacetSliderGraphs, this);\n    };\n    ResponsiveRecommendation.prototype.getRecommendationRoot = function () {\n        return Dom_1.$$(this.coveoRoot.find('.' + Component_1.Component.computeCssClassName(Recommendation_1.Recommendation)));\n    };\n    ResponsiveRecommendation.prototype.registerQueryEvents = function () {\n        var _this = this;\n        var recommendationInstance = RegisteredNamedMethods_1.get(this.recommendationRoot.el, SearchInterface_1.SearchInterface);\n        if (recommendationInstance && recommendationInstance.options.hideIfNoResults) {\n            this.coveoRoot.on(QueryEvents_1.QueryEvents.querySuccess, function (e, data) { return _this.handleRecommnendationQuerySucess(data); });\n            this.coveoRoot.on(QueryEvents_1.QueryEvents.noResults, function (e, data) { return _this.handleRecommendationNoResults(); });\n        }\n        this.coveoRoot.on(QueryEvents_1.QueryEvents.queryError, function () { return _this.handleRecommendationQueryError(); });\n    };\n    ResponsiveRecommendation.prototype.handleRecommnendationQuerySucess = function (data) {\n        if (data.results.totalCount === 0) {\n            this.dropdown.close();\n            this.dropdown.dropdownHeader.hide();\n        }\n        else {\n            this.dropdown.dropdownHeader.show();\n        }\n    };\n    ResponsiveRecommendation.prototype.handleRecommendationNoResults = function () {\n        this.dropdown.close();\n        this.dropdown.dropdownHeader.hide();\n    };\n    ResponsiveRecommendation.prototype.handleRecommendationQueryError = function () {\n        this.dropdown.close();\n        this.dropdown.dropdownHeader.hide();\n    };\n    ResponsiveRecommendation.DROPDOWN_CONTAINER_CSS_CLASS_NAME = 'coveo-recommendation-dropdown-container';\n    ResponsiveRecommendation.RESPONSIVE_BREAKPOINT = 1000;\n    return ResponsiveRecommendation;\n}());\nexports.ResponsiveRecommendation = ResponsiveRecommendation;\n\n\n/***/ }),\n\n/***/ 651:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ResponsiveDropdownContent_1 = __webpack_require__(67);\nvar Dom_1 = __webpack_require__(1);\nvar RecommendationDropdownContent = /** @class */ (function () {\n    function RecommendationDropdownContent(componentName, element, coveoRoot) {\n        this.element = element;\n        this.coveoRoot = coveoRoot;\n        this.cssClassName = \"coveo-\" + componentName + \"-dropdown-content\";\n        this.element.addClass(this.cssClassName);\n        this.element.addClass(ResponsiveDropdownContent_1.ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\n    }\n    RecommendationDropdownContent.prototype.positionDropdown = function () {\n        this.element.el.style.display = '';\n        var dropdownContentWrapper = this.coveoRoot.find('.coveo-results-column');\n        Dom_1.$$(dropdownContentWrapper).prepend(this.element.el);\n        this.element.addClass(ResponsiveDropdownContent_1.ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\n        this.element.addClass(this.cssClassName);\n        // forces the browser to reflow the element, so that the transition is applied.\n        window.getComputedStyle(this.element.el).maxHeight;\n        this.element.addClass(RecommendationDropdownContent.OPENED_DROPDOWN_CSS_CLASS_NAME);\n    };\n    RecommendationDropdownContent.prototype.hideDropdown = function () {\n        this.element.addClass(ResponsiveDropdownContent_1.ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\n        this.element.addClass(this.cssClassName);\n        this.element.removeClass(RecommendationDropdownContent.OPENED_DROPDOWN_CSS_CLASS_NAME);\n    };\n    RecommendationDropdownContent.prototype.cleanUp = function () {\n        this.element.removeClass(this.cssClassName);\n        this.element.removeClass(ResponsiveDropdownContent_1.ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\n    };\n    RecommendationDropdownContent.OPENED_DROPDOWN_CSS_CLASS_NAME = 'coveo-open-dropdown-content';\n    return RecommendationDropdownContent;\n}());\nexports.RecommendationDropdownContent = RecommendationDropdownContent;\n\n\n/***/ }),\n\n/***/ 652:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 653:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Component_1 = __webpack_require__(7);\nvar ComponentOptions_1 = __webpack_require__(8);\nvar Utils_1 = __webpack_require__(4);\nvar QueryEvents_1 = __webpack_require__(11);\nvar Initialization_1 = __webpack_require__(2);\nvar Dom_1 = __webpack_require__(1);\nvar _ = __webpack_require__(0);\nvar RecommendationQuery = /** @class */ (function (_super) {\n    __extends(RecommendationQuery, _super);\n    function RecommendationQuery(element, options, bindings) {\n        var _this = _super.call(this, element, RecommendationQuery.ID, bindings) || this;\n        _this.element = element;\n        _this.options = options;\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, RecommendationQuery, options);\n        if (_this.element.tagName.toLowerCase() === 'script') {\n            try {\n                _this.content = Utils_1.Utils.decodeHTMLEntities(Dom_1.$$(_this.element).text());\n            }\n            catch (e) {\n                return _this;\n            }\n            if (!_.isUndefined(_this.content) && _this.content != '') {\n                _this.bind.onRootElement(QueryEvents_1.QueryEvents.buildingQuery, _this.handleBuildingQuery);\n            }\n        }\n        return _this;\n    }\n    RecommendationQuery.prototype.handleBuildingQuery = function (data) {\n        data.queryBuilder.advancedExpression.add(this.content);\n    };\n    RecommendationQuery.ID = 'RecommendationQuery';\n    /**\n     * The options for the RecommendationQuery component\n     * @componentOptions\n     */\n    RecommendationQuery.options = {};\n    return RecommendationQuery;\n}(Component_1.Component));\nexports.RecommendationQuery = RecommendationQuery;\nInitialization_1.Initialization.registerAutoCreateComponent(RecommendationQuery);\n\n\n/***/ }),\n\n/***/ 654:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// Recommendation.min__a9b0c0df44822bb24a08.js","import { SearchInterface, ISearchInterfaceOptions } from '../SearchInterface/SearchInterface';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { QueryEvents, IQuerySuccessEventArgs, IBuildingQueryEventArgs } from '../../events/QueryEvents';\nimport { OmniboxEvents } from '../../events/OmniboxEvents';\nimport { ResultListEvents } from '../../events/ResultListEvents';\nimport { SettingsEvents } from '../../events/SettingsEvents';\nimport { PreferencesPanelEvents } from '../../events/PreferencesPanelEvents';\nimport { AnalyticsEvents } from '../../events/AnalyticsEvents';\nimport { analyticsActionCauseList, IAnalyticsNoMeta } from '../Analytics/AnalyticsActionListMeta';\nimport { BreadcrumbEvents } from '../../events/BreadcrumbEvents';\nimport { QuickviewEvents } from '../../events/QuickviewEvents';\nimport { QUERY_STATE_ATTRIBUTES } from '../../models/QueryStateModel';\nimport { Model, MODEL_EVENTS } from '../../models/Model';\nimport { Utils } from '../../utils/Utils';\nimport { $$ } from '../../utils/Dom';\nimport { INoResultsEventArgs } from '../../events/QueryEvents';\nimport { IQueryErrorEventArgs } from '../../events/QueryEvents';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ResponsiveRecommendation } from '../ResponsiveComponents/ResponsiveRecommendation';\nimport { get } from '../Base/RegisteredNamedMethods';\nimport { InitializationEvents } from '../../events/InitializationEvents';\nimport { ComponentOptionsModel } from '../../models/ComponentOptionsModel';\nimport * as _ from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\nimport { DefaultRecommendationTemplate } from '../Templates/DefaultRecommendationTemplate';\nimport { RecommendationQuery } from './RecommendationQuery';\nimport { RecommendationAnalyticsClient } from '../Analytics/RecommendationAnalyticsClient';\nimport 'styling/_Recommendation';\nimport { IStringMap } from '../../rest/GenericParam';\nimport { l } from '../../strings/Strings';\n\nexport interface IRecommendationOptions extends ISearchInterfaceOptions {\n  mainSearchInterface?: HTMLElement;\n  userContext?: IStringMap<any>;\n  id?: string;\n  optionsToUse?: string[];\n  sendActionsHistory?: boolean;\n  hideIfNoResults?: boolean;\n  enableResponsiveMode?: boolean;\n  responsiveBreakpoint?: number;\n  dropdownHeaderLabel?: string;\n}\n\n/**\n * The Recommendation component is a {@link SearchInterface} that displays recommendations typically based on user\n * history.\n *\n * This component usually listens to the main SearchInterface. When the main SearchInterface generates a query, the\n * Recommendation component generates another query to get the recommendations at the same time.\n *\n * To get history-based recommendations, you will likely want to include the `pageview` script in your page (see\n * [coveo.analytics.js](https://github.com/coveo/coveo.analytics.js)). However, including this script is not mandatory.\n * For instance, you could use the Recommendation component without the Coveo Machine Learning service to create a\n * simple \"recommended people\" interface.\n *\n * It is possible to include this component inside another SearchInterface, but it is also possible to instantiate it as\n * a \"standalone\" search interface, without even instantiating a main SearchInterface component. In any case, a\n * Recommendation component always acts as a full-fledged search interface. Therefore, you can include any component\n * inside the Recommendation component (Searchbox, Facet, Sort, etc.), just as you would inside the main SearchInterface\n * component.\n *\n * @availablesince [July 2016 Release (v1.667.24)](https://docs.coveo.com/en/309/#july-2016-release-v166724)\n */\nexport class Recommendation extends SearchInterface implements IComponentBindings {\n  static ID = 'Recommendation';\n  private static NEXT_ID = 1;\n\n  static doExport = () => {\n    exportGlobally({\n      Recommendation: Recommendation,\n      DefaultRecommendationTemplate: DefaultRecommendationTemplate,\n      RecommendationQuery: RecommendationQuery,\n      RecommendationAnalyticsClient: RecommendationAnalyticsClient\n    });\n  };\n\n  /**\n   * The options for the recommendation component\n   * @componentOptions\n   */\n  static options: IRecommendationOptions = {\n    /**\n     * Specifies the main {@link SearchInterface} to listen to.\n     */\n    mainSearchInterface: ComponentOptions.buildSelectorOption(),\n\n    /**\n     * Specifies the user context to send to Coveo usage analytics.\n     * The component sends this information with the query alongside the user history to get the recommendations.\n     */\n    userContext: ComponentOptions.buildJsonOption(),\n\n    /**\n     * Specifies the ID of the interface.\n     * The usage analytics use the interface ID to know which recommendation interface was selected.\n     *\n     * Default value is `Recommendation` for the first one and `Recommendation_{number}`, where {number} depends on the\n     * number of Recommendation interfaces with default IDs in the page for the others.\n     */\n    id: ComponentOptions.buildStringOption(),\n\n    /**\n     * Specifies which options from the main {@link QueryBuilder} to use in the triggered query.\n     *\n     * Possible values are:\n     * - `expression`\n     * - `advancedExpression`\n     * - `constantExpression`\n     * - `disjunctionExpression`\n     *\n     * **Example:**\n     *\n     * Adding the expression (`q`) and the advanced expression (`aq`) parts of the main query in the triggered query:\n     *\n     * `data-options-to-use=\"expression,advancedExpression\"`\n     *\n     * Default value is `expression`.\n     */\n    optionsToUse: ComponentOptions.buildListOption<'expression' | 'advancedExpression' | 'constantExpression' | 'disjunctionExpression'>({\n      defaultValue: ['expression']\n    }),\n\n    /**\n     * Specifies whether to send the actions history along with the triggered query.\n     *\n     * Setting this option to `false` makes it impossible for this component to get Coveo Machine Learning\n     * recommendations.\n     *\n     * However, setting this option to `false` can be useful to display side results in a search page.\n     *\n     * Default value is `true`.\n     *\n     * @deprecated This option is now deprecated. The correct way to control this behavior is to configure an appropriate machine learning model in the administration interface (Recommendation, Relevance tuning, Query suggestions).\n     */\n    sendActionsHistory: ComponentOptions.buildBooleanOption({\n      defaultValue: true,\n      deprecated:\n        'This option is now deprecated. The correct way to control this behaviour is to configure an appropriate machine learning model in the administration interface (Recommendation, Relevance tuning, Query suggestions)'\n    }),\n\n    /**\n     * Specifies whether to hide the Recommendations component if no result or recommendation is available.\n     *\n     * Default value is `true`.\n     */\n    hideIfNoResults: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n    autoTriggerQuery: ComponentOptions.buildBooleanOption({\n      postProcessing: (value: boolean, options: IRecommendationOptions) => {\n        if (options.mainSearchInterface) {\n          return false;\n        }\n        return value;\n      }\n    }),\n\n    /**\n     * Specifies whether to enable *responsive mode* for Recommendation components. Setting this options to `false` on\n     * any Recommendation component in a search interface disables responsive mode for all other Recommendation\n     * components in the search interface.\n     *\n     * Responsive mode displays all Recommendation components under a single dropdown button whenever the width of the\n     * HTML element which the search interface is bound to reaches or falls behind a certain threshold (see\n     * {@link Recommendation.options.responsiveBreakpoint}).\n     *\n     * See also {@link Recommendation.options.dropdownHeaderLabel}.\n     *\n     * Default value is `true`.\n     */\n    enableResponsiveMode: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\n    /**\n     * If {@link Recommendation.options.enableResponsiveMode} is `true` for all Recommendation components, specifies the\n     * width threshold (in pixels) of the search interface at which Recommendation components go in responsive mode.\n     *\n     * Recommendation components go in responsive mode when the width of the search interface is equal to or lower than\n     * this value.\n     *\n     * The `search interface` corresponds to the HTML element with the class `CoveoSearchInterface`.\n     *\n     * If more than one Recommendation component in the search interface specifies a value for this option, then the\n     * framework uses the last occurrence of the option.\n     *\n     * Default value is `1000`.\n     */\n    responsiveBreakpoint: ComponentOptions.buildNumberOption({ defaultValue: 1000 }),\n\n    /**\n     * If {@link Recommendation.options.enableResponsiveMode} is `true` for all Recommendation components, specifies the\n     * label of the dropdown button that allows to display the Recommendation components when in responsive mode.\n     *\n     * If more than one Recommendation component in the search interface specifies a value for this option, then the\n     * framework uses the first occurrence of the option.\n     *\n     * Default value is `Recommendations`.\n     */\n    dropdownHeaderLabel: ComponentOptions.buildLocalizedStringOption({\n      localizedString: () => l('Recommendations')\n    })\n  };\n\n  // These are used by the analytics client for recommendation\n  // so that clicks event inside the recommendation component can be modified and attached to the main search interface.\n  public mainQuerySearchUID: string;\n  public mainQueryPipeline: string;\n\n  private mainInterfaceQuery: IQuerySuccessEventArgs;\n\n  /**\n   * Creates a new Recommendation component.\n   * @param element The HTMLElement on which to instantiate the component.\n   * @param options The options for the Recommendation component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time)\n   * @param _window\n   */\n  constructor(public element: HTMLElement, public options: IRecommendationOptions = {}, public analyticsOptions = {}, _window = window) {\n    super(element, ComponentOptions.initComponentOptions(element, Recommendation, options), analyticsOptions, _window);\n    this.element.style.display = '';\n    if (!this.options.id) {\n      this.generateDefaultId();\n    }\n\n    // This is done to allow the component to be included in another search interface without triggering the parent events.\n    this.preventEventPropagation();\n\n    if (this.options.mainSearchInterface) {\n      this.bindToMainSearchInterface();\n    }\n\n    $$(this.element).on(QueryEvents.buildingQuery, (e: Event, args: IBuildingQueryEventArgs) =>\n      this.handleRecommendationBuildingQuery(args)\n    );\n    $$(this.element).on(QueryEvents.querySuccess, (e: Event, args: IQuerySuccessEventArgs) => this.handleRecommendationQuerySuccess(args));\n    $$(this.element).on(QueryEvents.noResults, (e: Event, args: INoResultsEventArgs) => this.handleRecommendationNoResults());\n    $$(this.element).on(QueryEvents.queryError, (e: Event, args: IQueryErrorEventArgs) => this.handleRecommendationQueryError());\n\n    if (!this.options.mainSearchInterface) {\n      // When the recommendation component is \"standalone\", we add additional safeguard against bad config.\n      this.ensureCurrentPageViewExistsInStore();\n    }\n    ResponsiveRecommendation.init(this.root, this, options);\n  }\n\n  public get historyStore() {\n    return this.queryController.historyStore;\n  }\n\n  public getId(): string {\n    return this.options.id;\n  }\n\n  public enable() {\n    super.enable();\n    this.show();\n  }\n\n  public disable() {\n    super.disable();\n    this.hide();\n  }\n\n  public hide(): void {\n    $$(this.element).addClass('coveo-hidden');\n  }\n\n  public show(): void {\n    $$(this.element).removeClass('coveo-hidden');\n  }\n\n  private ensureCurrentPageViewExistsInStore() {\n    // It's not 100% sure that the element will actually be added in the store.\n    // It's possible that an external script configured by the end user to log the page view already did that.\n    // So we *could* end up with duplicate values in the store :\n    // We rely on the fact that the coveo.analytics lib has defensive code against consecutive page view that are identical.\n    // This is mainly done if the recommendation component is being initialized before the page view could be logged correctly by the coveo.analytics externa lib.\n    const historyElement = {\n      name: 'PageView',\n      value: document.location.toString(),\n      time: JSON.stringify(new Date()),\n      title: _.escape(document.title)\n    };\n    this.historyStore.addElement(historyElement);\n  }\n\n  private bindToMainSearchInterface() {\n    this.bindComponentOptionsModelToMainSearchInterface();\n    this.bindQueryEventsToMainSearchInterface();\n  }\n\n  private bindComponentOptionsModelToMainSearchInterface() {\n    // Try to fetch the componentOptions from the main search interface.\n    // Since we do not know which interface is init first (recommendation or full search interface)\n    // add a mechanism that waits for the full search interface to be correctly initialized\n    // then, set the needed values on the component options model.\n    let searchInterfaceComponent = <SearchInterface>get(this.options.mainSearchInterface, SearchInterface);\n    const alreadyInitialized = searchInterfaceComponent != null;\n\n    const onceInitialized = () => {\n      const mainSearchInterfaceOptionsModel = <ComponentOptionsModel>searchInterfaceComponent.getBindings().componentOptionsModel;\n      this.componentOptionsModel.setMultiple(mainSearchInterfaceOptionsModel.getAttributes());\n      $$(this.options.mainSearchInterface).on(this.componentOptionsModel.getEventName(MODEL_EVENTS.ALL), () => {\n        this.componentOptionsModel.setMultiple(mainSearchInterfaceOptionsModel.getAttributes());\n      });\n    };\n\n    if (alreadyInitialized) {\n      onceInitialized();\n    } else {\n      $$(this.options.mainSearchInterface).on(InitializationEvents.afterComponentsInitialization, () => {\n        searchInterfaceComponent = <SearchInterface>get(this.options.mainSearchInterface, SearchInterface);\n        onceInitialized();\n      });\n    }\n  }\n\n  private bindQueryEventsToMainSearchInterface() {\n    // Whenever a query sucessfully returns on the full search interface, refresh the recommendation component.\n    $$(this.options.mainSearchInterface).on(QueryEvents.querySuccess, (e: Event, args: IQuerySuccessEventArgs) => {\n      this.mainInterfaceQuery = args;\n      this.mainQuerySearchUID = args.results.searchUid;\n      this.mainQueryPipeline = args.results.pipeline;\n      if (args.results.results.length != 0) {\n        this.usageAnalytics.logSearchEvent<IAnalyticsNoMeta>(analyticsActionCauseList.recommendation, {});\n        this.queryController.executeQuery({\n          closeModalBox: false\n        });\n      }\n    });\n\n    $$(this.options.mainSearchInterface).on(QueryEvents.queryError, () => this.hide());\n    $$(this.options.mainSearchInterface).on(QueryEvents.noResults, () => this.hide());\n  }\n\n  private handleRecommendationBuildingQuery(data: IBuildingQueryEventArgs) {\n    if (!this.disabled) {\n      this.modifyQueryForRecommendation(data);\n      this.addRecommendationInfoInQuery(data);\n    }\n  }\n\n  private handleRecommendationQuerySuccess(data: IQuerySuccessEventArgs) {\n    if (!this.disabled) {\n      if (this.options.hideIfNoResults) {\n        if (data.results.totalCount === 0) {\n          this.hide();\n        } else {\n          this.show();\n        }\n      }\n    }\n  }\n\n  private handleRecommendationNoResults() {\n    if (!this.disabled) {\n      if (this.options.hideIfNoResults) {\n        this.hide();\n      }\n    }\n  }\n\n  private handleRecommendationQueryError() {\n    if (!this.disabled) {\n      this.hide();\n    }\n  }\n\n  private modifyQueryForRecommendation(data: IBuildingQueryEventArgs) {\n    if (this.mainInterfaceQuery) {\n      Utils.copyObjectAttributes(data.queryBuilder, this.mainInterfaceQuery.queryBuilder, this.options.optionsToUse);\n    }\n  }\n\n  private addRecommendationInfoInQuery(data: IBuildingQueryEventArgs) {\n    if (!_.isEmpty(this.options.userContext)) {\n      data.queryBuilder.addContext(this.options.userContext);\n    }\n\n    data.queryBuilder.recommendation = this.options.id;\n  }\n\n  private preventEventPropagation() {\n    this.preventEventPropagationOn(QueryEvents);\n    this.preventEventPropagationOn(OmniboxEvents);\n    this.preventEventPropagationOn(ResultListEvents);\n    this.preventEventPropagationOn(SettingsEvents);\n    this.preventEventPropagationOn(PreferencesPanelEvents);\n    this.preventEventPropagationOn(AnalyticsEvents);\n    this.preventEventPropagationOn(BreadcrumbEvents);\n    this.preventEventPropagationOn(QuickviewEvents);\n    this.preventEventPropagationOn(InitializationEvents);\n    this.preventEventPropagationOn(this.getAllModelEvents());\n  }\n\n  private preventEventPropagationOn(\n    eventType,\n    eventName = (event: string) => {\n      return event;\n    }\n  ) {\n    for (const event in eventType) {\n      $$(this.root).on(eventName(event), (e: Event) => e.stopPropagation());\n    }\n  }\n\n  private getAllModelEvents() {\n    const events = {};\n    const queryStateModel = this.getBindings().queryStateModel;\n    _.each(_.values(Model.eventTypes), event => {\n      const eventName = queryStateModel.getEventName(event);\n      events[eventName] = eventName;\n      _.each(_.values(QUERY_STATE_ATTRIBUTES), attribute => {\n        const eventName = this.queryStateModel.getEventName(event + attribute);\n        events[eventName] = eventName;\n      });\n    });\n    return events;\n  }\n\n  private generateDefaultId() {\n    let id = 'Recommendation';\n    if (Recommendation.NEXT_ID !== 1) {\n      this.logger.warn(\n        'Generating another recommendation default id',\n        'Consider configuring a human friendly / meaningful id for this interface'\n      );\n      id = id + '_' + Recommendation.NEXT_ID;\n    }\n    Recommendation.NEXT_ID++;\n    this.options.id = id;\n  }\n}\n\n// We do not register the Recommendation component since it is done with .coveo('initRecommendation')\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Recommendation/Recommendation.ts","/**\n * The `IQuickviewLoadedEventArgs` interface describes the object that all\n * [`quickviewLoaded`]{@link QuickviewEvents.quickviewLoaded} event handlers receive as an argument.\n */\nexport interface IQuickviewLoadedEventArgs {\n  /**\n   * The amount of time it took to download the content to display in the quickview modal window (in milliseconds).\n   */\n  duration: number;\n}\n\n/**\n * The `QuickviewEvents` static class contains the string definitions of all events that strongly relate to the\n * [`Quickview`]{@link Quickview} component.\n */\nexport class QuickviewEvents {\n  /**\n   * Triggered by the [`QuickviewDocument`]{@link QuickviewDocument} component when the content to display in the\n   * quickview modal window has just finished downloading.\n   *\n   * The [`Quickview`]{@link Quickview} component listens to this event to know when to remove its loading animation.\n   *\n   * All `quickviewLoaded` event handlers receive a [`QuickviewLoadedEventArgs`]{@link IQuickviewLoadedEventArgs} object\n   * as an argument.\n   *\n   * @type {string} The string value is `quickviewLoaded`.\n   */\n  public static quickviewLoaded = 'quickviewLoaded';\n\n  /**\n   * Triggered by the [`QuickviewDocument`]{@link QuickviewDocument} component when the end user has just clicked the\n   * **Quickview** button/link to open the quickview modal window.\n   *\n   * This event allows external code to modify the terms to highlight before the content of the quickview modal window\n   * is rendered.\n   *\n   * All `openQuickview` event handlers receive an\n   * [`OpenQuickviewEventArgs`]{@link ResultListEvents.IOpenQuickviewEventArgs} object as an argument.\n   *\n   * @type {string} The string value is `openQuickview`.\n   */\n  public static openQuickview = 'openQuickview';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/events/QuickviewEvents.ts","import { Template } from './Template';\nimport { IQueryResult } from '../../rest/QueryResult';\n\nexport class DefaultRecommendationTemplate extends Template {\n  instantiateToString(object?: IQueryResult): string {\n    var template = `<div class=\"coveo-result-frame\">\n        <div class=\"coveo-result-row\">\n          <div class=\"coveo-result-cell\" style=\"width:40px;text-align:center;vertical-align:middle;\">\n            <span class=\"CoveoIcon\" data-small=\"true\" data-with-label=\"false\">\n            </span>\n          </div>\n          <div class=\"coveo-result-cell\" style=\"padding:0 0 3px 5px;vertical-align:middle\">\n            <div class=\"coveo-result-row\">\n              <div class=\"coveo-result-cell\" style=\"font-size:10pt;\">\n                <a class=\"CoveoResultLink\" style=\"display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\">\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>`;\n    return template;\n  }\n\n  instantiateToElement(object?: IQueryResult): Promise<HTMLElement> {\n    return new Promise((resolve, reject) => {\n      var div = document.createElement('div');\n      div.innerHTML = this.instantiateToString(object);\n      resolve(div);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Templates/DefaultRecommendationTemplate.ts","import { Dom } from '../../utils/Dom';\nimport { ResponsiveDropdownContent } from './ResponsiveDropdown/ResponsiveDropdownContent';\n\nexport class ResponsiveComponentsUtils {\n  private static smallTabsClassName: string = 'coveo-small-tabs';\n  private static smallFacetClassName: string = 'coveo-small-facets';\n  private static smallRecommendationClassName: string = 'coveo-small-recommendation';\n\n  static shouldDrawFacetSlider(root: Dom, facetSliderElement: Dom): boolean {\n    return ResponsiveDropdownContent.isTargetInsideOpenedDropdown(facetSliderElement) || !this.isSmallFacetActivated(root);\n  }\n\n  static isSmallTabsActivated(root: Dom): boolean {\n    return root.hasClass(this.smallTabsClassName);\n  }\n\n  static isSmallFacetActivated(root: Dom): boolean {\n    return root.hasClass(this.smallFacetClassName);\n  }\n\n  static isSmallRecommendationActivated(root: Dom): boolean {\n    return root.hasClass(this.smallRecommendationClassName);\n  }\n\n  static activateSmallTabs(root: Dom): void {\n    root.addClass(this.smallTabsClassName);\n  }\n\n  static deactivateSmallTabs(root: Dom): void {\n    root.removeClass(this.smallTabsClassName);\n  }\n\n  static activateSmallFacet(root: Dom): void {\n    root.addClass(this.smallFacetClassName);\n  }\n\n  static deactivateSmallFacet(root: Dom): void {\n    root.removeClass(this.smallFacetClassName);\n  }\n\n  static activateSmallRecommendation(root: Dom): void {\n    root.addClass(this.smallRecommendationClassName);\n  }\n\n  static deactivateSmallRecommendation(root: Dom): void {\n    root.removeClass(this.smallRecommendationClassName);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveComponentsUtils.ts","import { ResponsiveComponentsManager, IResponsiveComponent, IResponsiveComponentOptions } from './ResponsiveComponentsManager';\nimport { ResponsiveComponentsUtils } from './ResponsiveComponentsUtils';\nimport { SearchInterface } from '../SearchInterface/SearchInterface';\nimport { Utils } from '../../utils/Utils';\nimport { $$, Dom } from '../../utils/Dom';\nimport { Logger } from '../../misc/Logger';\nimport { Recommendation } from '../Recommendation/Recommendation';\nimport { RecommendationDropdownContent } from './ResponsiveDropdown/RecommendationDropdownContent';\nimport { ResponsiveDropdownHeader } from './ResponsiveDropdown/ResponsiveDropdownHeader';\nimport { ResponsiveDropdown } from './ResponsiveDropdown/ResponsiveDropdown';\nimport { l } from '../../strings/Strings';\nimport { Component } from '../Base/Component';\nimport { get } from '../Base/RegisteredNamedMethods';\nimport { QueryEvents, IQuerySuccessEventArgs, INoResultsEventArgs } from '../../events/QueryEvents';\nimport * as _ from 'underscore';\n\nimport 'styling/_ResponsiveRecommendation';\nimport { Defer } from '../../MiscModules';\n\nexport class ResponsiveRecommendation implements IResponsiveComponent {\n  public static DROPDOWN_CONTAINER_CSS_CLASS_NAME: string = 'coveo-recommendation-dropdown-container';\n  public static RESPONSIVE_BREAKPOINT = 1000;\n\n  public recommendationRoot: Dom;\n  private breakpoint: number;\n  private dropdown: ResponsiveDropdown;\n  private dropdownHeaderLabel: string;\n  private searchInterface: SearchInterface;\n\n  public static init(root: HTMLElement, component, options: IResponsiveComponentOptions) {\n    let logger = new Logger('ResponsiveRecommendation');\n    let coveoRoot = this.findParentRootOfRecommendationComponent(root);\n    if (!coveoRoot) {\n      logger.info('Recommendation component has no parent interface. Disabling responsive mode for this component.');\n      return;\n    }\n\n    if (!$$(coveoRoot).find('.coveo-results-column')) {\n      logger.info('Cannot find element with class coveo-results-column. Disabling responsive mode for this component.');\n      return;\n    }\n\n    ResponsiveComponentsManager.register(\n      ResponsiveRecommendation,\n      $$(coveoRoot),\n      Recommendation.ID,\n      component,\n      _.extend({}, options, { initializationEventRoot: $$(root) })\n    );\n  }\n\n  private static findParentRootOfRecommendationComponent(root: HTMLElement): Dom {\n    let coveoRoot = $$(root).parents(Component.computeCssClassName(SearchInterface));\n    if (coveoRoot[0]) {\n      return $$(coveoRoot[0]);\n    }\n    return null;\n  }\n\n  constructor(\n    public coveoRoot: Dom,\n    public ID: string,\n    options: IResponsiveComponentOptions,\n    public responsiveDropdown?: ResponsiveDropdown\n  ) {\n    this.recommendationRoot = this.getRecommendationRoot();\n    this.dropdownHeaderLabel = options.dropdownHeaderLabel;\n    this.breakpoint = this.defineResponsiveBreakpoint(options);\n    this.searchInterface = <SearchInterface>Component.get(this.coveoRoot.el, SearchInterface, false);\n    this.dropdown = this.buildDropdown(responsiveDropdown);\n    this.registerOnOpenHandler();\n    this.registerQueryEvents();\n    this.handleResizeEvent();\n  }\n\n  public handleResizeEvent(): void {\n    if (this.needSmallMode() && !ResponsiveComponentsUtils.isSmallRecommendationActivated(this.coveoRoot)) {\n      this.changeToSmallMode();\n    } else if (!this.needSmallMode() && ResponsiveComponentsUtils.isSmallRecommendationActivated(this.coveoRoot)) {\n      this.changeToLargeMode();\n    }\n\n    if (this.dropdown.isOpened) {\n      this.dropdown.dropdownContent.positionDropdown();\n    }\n  }\n\n  public needDropdownWrapper(): boolean {\n    return this.needSmallMode();\n  }\n\n  private needSmallMode(): boolean {\n    const isWidthSmallerThanBreakpoint = this.coveoRoot.width() <= this.breakpoint;\n    if (!this.searchInterface) {\n      return isWidthSmallerThanBreakpoint;\n    }\n\n    switch (this.searchInterface.responsiveComponents.getResponsiveMode()) {\n      case 'small':\n        return true;\n      case 'auto':\n        return isWidthSmallerThanBreakpoint;\n      default:\n        return false;\n    }\n  }\n\n  private changeToSmallMode() {\n    this.dropdown.close();\n    const header = this.coveoRoot.find(`.${ResponsiveComponentsManager.DROPDOWN_HEADER_WRAPPER_CSS_CLASS}`);\n    if (!header) {\n      // It's possible that recommendation gets initialized before the main interface is completed.\n      // We defer the resize event execution in that case.\n      Defer.defer(() => this.handleResizeEvent());\n    } else {\n      $$(header).append(this.dropdown.dropdownHeader.element.el);\n      this.disableFacetPreservePosition();\n      ResponsiveComponentsUtils.activateSmallRecommendation(this.coveoRoot);\n      ResponsiveComponentsUtils.activateSmallRecommendation(this.recommendationRoot);\n    }\n  }\n\n  private changeToLargeMode() {\n    this.enableFacetPreservePosition();\n    this.dropdown.cleanUp();\n    ResponsiveComponentsUtils.deactivateSmallRecommendation(this.coveoRoot);\n    ResponsiveComponentsUtils.deactivateSmallRecommendation(this.recommendationRoot);\n  }\n\n  private buildDropdown(responsiveDropdown?: ResponsiveDropdown): ResponsiveDropdown {\n    let dropdownContent = this.buildDropdownContent();\n    let dropdownHeader = this.buildDropdownHeader();\n    let dropdown = responsiveDropdown ? responsiveDropdown : new ResponsiveDropdown(dropdownContent, dropdownHeader, this.coveoRoot);\n    return dropdown;\n  }\n\n  private buildDropdownHeader(): ResponsiveDropdownHeader {\n    let dropdownHeaderElement = $$('a');\n    let content = $$('p');\n    content.text(l(this.dropdownHeaderLabel));\n    dropdownHeaderElement.el.appendChild(content.el);\n    let dropdownHeader = new ResponsiveDropdownHeader('recommendation', dropdownHeaderElement);\n    return dropdownHeader;\n  }\n\n  private buildDropdownContent(): RecommendationDropdownContent {\n    let dropdownContentElement: Dom;\n    let recommendationColumn = this.coveoRoot.find('.coveo-recommendation-column');\n    if (recommendationColumn) {\n      dropdownContentElement = $$(recommendationColumn);\n    } else {\n      dropdownContentElement = $$(this.coveoRoot.find('.' + Component.computeCssClassName(Recommendation)));\n    }\n\n    let dropdownContent = new RecommendationDropdownContent('recommendation', dropdownContentElement, this.coveoRoot);\n    return dropdownContent;\n  }\n\n  private defineResponsiveBreakpoint(options: IResponsiveComponentOptions): number {\n    let breakpoint;\n    if (Utils.isNullOrUndefined(options.responsiveBreakpoint)) {\n      breakpoint = ResponsiveRecommendation.RESPONSIVE_BREAKPOINT;\n    } else {\n      breakpoint = options.responsiveBreakpoint;\n    }\n    return breakpoint;\n  }\n\n  private getFacetSliders(): any[] {\n    const facetSliders = [];\n    this.coveoRoot.findAll(Component.computeSelectorForType('FacetSlider')).forEach(facetSliderElement => {\n      const facetSlider = Component.get(facetSliderElement);\n      facetSlider && facetSliders.push(facetSlider);\n    });\n    return facetSliders;\n  }\n\n  private getFacets(): any[] {\n    const facets = [];\n    this.coveoRoot.findAll(Component.computeSelectorForType('Facet')).forEach(facetElement => {\n      const facet = Component.get(facetElement);\n      facet && facets.push(facet);\n    });\n    return facets;\n  }\n\n  private enableFacetPreservePosition(): void {\n    this.getFacets().forEach(facet => (facet.options.preservePosition = true));\n  }\n\n  private disableFacetPreservePosition(): void {\n    this.getFacets().forEach(facet => (facet.options.preservePosition = false));\n  }\n\n  private drawFacetSliderGraphs(): void {\n    this.getFacetSliders().forEach(facetSlider => facetSlider.drawDelayedGraphData());\n  }\n\n  private registerOnOpenHandler(): void {\n    this.dropdown.registerOnOpenHandler(this.drawFacetSliderGraphs, this);\n  }\n\n  private getRecommendationRoot(): Dom {\n    return $$(this.coveoRoot.find('.' + Component.computeCssClassName(Recommendation)));\n  }\n\n  private registerQueryEvents() {\n    let recommendationInstance = <Recommendation>get(this.recommendationRoot.el, SearchInterface);\n    if (recommendationInstance && recommendationInstance.options.hideIfNoResults) {\n      this.coveoRoot.on(QueryEvents.querySuccess, (e: Event, data: IQuerySuccessEventArgs) => this.handleRecommnendationQuerySucess(data));\n      this.coveoRoot.on(QueryEvents.noResults, (e: Event, data: INoResultsEventArgs) => this.handleRecommendationNoResults());\n    }\n    this.coveoRoot.on(QueryEvents.queryError, () => this.handleRecommendationQueryError());\n  }\n\n  private handleRecommnendationQuerySucess(data: IQuerySuccessEventArgs) {\n    if (data.results.totalCount === 0) {\n      this.dropdown.close();\n      this.dropdown.dropdownHeader.hide();\n    } else {\n      this.dropdown.dropdownHeader.show();\n    }\n  }\n\n  private handleRecommendationNoResults() {\n    this.dropdown.close();\n    this.dropdown.dropdownHeader.hide();\n  }\n\n  private handleRecommendationQueryError() {\n    this.dropdown.close();\n    this.dropdown.dropdownHeader.hide();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveRecommendation.ts","import { IResponsiveDropdownContent, ResponsiveDropdownContent } from './ResponsiveDropdownContent';\nimport { $$, Dom } from '../../../utils/Dom';\n\nexport class RecommendationDropdownContent implements IResponsiveDropdownContent {\n  public static OPENED_DROPDOWN_CSS_CLASS_NAME = 'coveo-open-dropdown-content';\n\n  private cssClassName: string;\n\n  constructor(componentName: string, public element: Dom, private coveoRoot: Dom) {\n    this.cssClassName = `coveo-${componentName}-dropdown-content`;\n    this.element.addClass(this.cssClassName);\n    this.element.addClass(ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\n  }\n\n  public positionDropdown() {\n    this.element.el.style.display = '';\n\n    let dropdownContentWrapper = this.coveoRoot.find('.coveo-results-column');\n    $$(dropdownContentWrapper).prepend(this.element.el);\n    this.element.addClass(ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\n    this.element.addClass(this.cssClassName);\n\n    // forces the browser to reflow the element, so that the transition is applied.\n    window.getComputedStyle(this.element.el).maxHeight;\n\n    this.element.addClass(RecommendationDropdownContent.OPENED_DROPDOWN_CSS_CLASS_NAME);\n  }\n\n  public hideDropdown() {\n    this.element.addClass(ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\n    this.element.addClass(this.cssClassName);\n\n    this.element.removeClass(RecommendationDropdownContent.OPENED_DROPDOWN_CSS_CLASS_NAME);\n  }\n\n  public cleanUp() {\n    this.element.removeClass(this.cssClassName);\n    this.element.removeClass(ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveDropdown/RecommendationDropdownContent.ts","import { Component } from '../Base/Component';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { Utils } from '../../utils/Utils';\nimport { QueryEvents, IBuildingQueryEventArgs } from '../../events/QueryEvents';\nimport { Initialization } from '../Base/Initialization';\nimport { $$ } from '../../utils/Dom';\nimport * as _ from 'underscore';\n\nexport interface IRecommendationQueryOptions {}\n\nexport class RecommendationQuery extends Component {\n  static ID = 'RecommendationQuery';\n\n  /**\n   * The options for the RecommendationQuery component\n   * @componentOptions\n   */\n  static options: IRecommendationQueryOptions = {};\n\n  private content: string;\n\n  constructor(public element: HTMLElement, public options?: IRecommendationQueryOptions, bindings?: IComponentBindings) {\n    super(element, RecommendationQuery.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, RecommendationQuery, options);\n\n    if (this.element.tagName.toLowerCase() === 'script') {\n      try {\n        this.content = Utils.decodeHTMLEntities($$(this.element).text());\n      } catch (e) {\n        return;\n      }\n      if (!_.isUndefined(this.content) && this.content != '') {\n        this.bind.onRootElement(QueryEvents.buildingQuery, this.handleBuildingQuery);\n      }\n    }\n  }\n\n  private handleBuildingQuery(data: IBuildingQueryEventArgs) {\n    data.queryBuilder.advancedExpression.add(this.content);\n  }\n}\n\nInitialization.registerAutoCreateComponent(RecommendationQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Recommendation/RecommendationQuery.ts"],"sourceRoot":""}