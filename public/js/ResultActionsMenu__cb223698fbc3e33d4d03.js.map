{"version":3,"sources":["./src/ui/ResultActions/ResultActionsMenu.ts","./sass/_ResultActionsMenu.scss"],"names":[],"mappings":"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","file":"ResultActionsMenu__cb223698fbc3e33d4d03.js","sourcesContent":["import { Component } from '../Base/Component';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { Assert } from '../../misc/Assert';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { forEach } from 'underscore';\r\nimport { exportGlobally } from '../../GlobalExports';\r\nimport 'styling/_ResultActionsMenu';\r\n\r\nexport interface IResultActionsMenuOptions {\r\n  openOnMouseOver?: boolean;\r\n}\r\n\r\n/**\r\n * The _ResultActionsMenu_ component adds a floating result action menu, meant to be used inside result templates (see [Result Templates](https://docs.coveo.com/en/413/javascript-search-framework/result-templates)).\r\n * It is designed to contain other components that can execute actions related to the result,\r\n * typically the [Quickview]{@link Quickview} and AttachToCase components, available in the Coveo for Salesforce and Coveo for Dynamics integrations.\r\n *\r\n * ```html\r\n * <script type=\"text/html\" class=\"result-template\" [...]\r\n *   <div class=\"coveo-result-frame\">\r\n *     <div class=\"CoveoResultActionsMenu\">\r\n *       <div class=\"CoveoQuickview\"></div>\r\n *     </div>\r\n *   [...]\r\n * </script>\r\n * ```\r\n *\r\n * @availablesince [July 2018 Release (v2.4382.10)](https://docs.coveo.com/410/#july-2018-release-v2438210)\r\n */\r\nexport class ResultActionsMenu extends Component {\r\n  static ID = 'ResultActionsMenu';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      ResultActionsMenu: ResultActionsMenu\r\n    });\r\n  };\r\n\r\n  static readonly SHOW_CLASS: string = 'coveo-menu-opened';\r\n\r\n  /**\r\n   * @componentOptions\r\n   */\r\n  static options: IResultActionsMenuOptions = {\r\n    /**\r\n     * Specifies whether the menu should open when the user hovers over the result.\r\n     *\r\n     * When set to false, the menu opens only when clicking on the result.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    openOnMouseOver: ComponentOptions.buildBooleanOption({ defaultValue: true })\r\n  };\r\n\r\n  /**\r\n   * The rendered result that contains this menu.\r\n   */\r\n  parentResult: HTMLElement;\r\n\r\n  /**\r\n   * A list containing menu items for this menu.\r\n   */\r\n  menuItems: HTMLElement[];\r\n\r\n  /**\r\n   * Creates a new `ResultActionsMenu` component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the `ResultActionsMenu` component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   * @param result The result to associate the component with.\r\n   */\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options: IResultActionsMenuOptions,\r\n    public bindings?: IResultsComponentBindings,\r\n    public result?: IQueryResult\r\n  ) {\r\n    super(element, ResultActionsMenu.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, ResultActionsMenu, options);\r\n\r\n    this.initializeParentResult();\r\n    this.bindEvents();\r\n\r\n    this.buildMenuItems();\r\n  }\r\n\r\n  /**\r\n   * Shows the floating menu.\r\n   */\r\n  public show() {\r\n    $$(this.element).addClass(ResultActionsMenu.SHOW_CLASS);\r\n  }\r\n\r\n  /**\r\n   * Hides the floating menu.\r\n   */\r\n  public hide() {\r\n    $$(this.element).removeClass(ResultActionsMenu.SHOW_CLASS);\r\n  }\r\n\r\n  private initializeParentResult() {\r\n    // Find the result containing this ResultActionsMenu\r\n    this.parentResult = $$(this.element).closest('CoveoResult');\r\n    Assert.check(this.parentResult !== undefined, 'ResultActionsMenu needs to be a child of a Result');\r\n\r\n    $$(this.parentResult).addClass('coveo-clickable');\r\n  }\r\n\r\n  private bindEvents() {\r\n    $$(this.parentResult).on('click', () => this.show());\r\n\r\n    $$(this.parentResult).on('mouseleave', () => this.hide());\r\n    if (this.options.openOnMouseOver) {\r\n      $$(this.parentResult).on('mouseenter', () => this.show());\r\n    }\r\n  }\r\n\r\n  private buildMenuItems() {\r\n    this.menuItems = [];\r\n    forEach($$(this.element).children(), (elem: HTMLElement) => {\r\n      this.menuItems.push(elem);\r\n      $$(elem).addClass('coveo-result-actions-menu-menu-item');\r\n    });\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(ResultActionsMenu);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultActions/ResultActionsMenu.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResultActionsMenu.scss\n// module id = 650\n// module chunks = 64 88"],"sourceRoot":""}