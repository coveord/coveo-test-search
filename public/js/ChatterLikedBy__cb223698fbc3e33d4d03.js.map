{"version":3,"sources":["./src/utils/ChatterUtils.ts","./src/ui/ChatterLikedBy/ChatterLikedBy.ts"],"names":[],"mappings":"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","file":"ChatterLikedBy__cb223698fbc3e33d4d03.js","sourcesContent":["export class ChatterUtils {\r\n  static buildURI(objectURI: string, objectId: string, newObjectId: string) {\r\n    return objectURI.replace(objectId, newObjectId);\r\n  }\r\n\r\n  static bindClickEventToElement(element: HTMLElement, openInPrimaryTab: boolean, openInSubTab: boolean) {\r\n    return element;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ChatterUtils.ts","import { Initialization } from '../Base/Initialization';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { l } from '../../strings/Strings';\r\nimport { ChatterUtils } from '../../utils/ChatterUtils';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\nexport interface IChatterLikedByOptions {\r\n  nbLikesToRender: number;\r\n  openInPrimaryTab: boolean;\r\n  openInSubTab: boolean;\r\n}\r\n\r\nexport class ChatterLikedBy extends Component {\r\n  static ID = 'ChatterLikedBy';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      ChatterLikedBy: ChatterLikedBy\r\n    });\r\n  };\r\n\r\n  static options: IChatterLikedByOptions = {\r\n    nbLikesToRender: ComponentOptions.buildNumberOption({ defaultValue: 2, min: 0 }),\r\n    openInPrimaryTab: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n    openInSubTab: ComponentOptions.buildBooleanOption({ defaultValue: true })\r\n  };\r\n\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options?: IChatterLikedByOptions,\r\n    public bindings?: IComponentBindings,\r\n    public result?: IQueryResult\r\n  ) {\r\n    super(element, ChatterLikedBy.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, ChatterLikedBy, options);\r\n\r\n    if (\r\n      !Utils.isNullOrUndefined(Utils.getFieldValue(result, 'sflikedby')) &&\r\n      !Utils.isNullOrUndefined(Utils.getFieldValue(result, 'sflikedbyid'))\r\n    ) {\r\n      let likeNames = Utils.getFieldValue(result, 'sflikedby').split(';');\r\n      let likeIds = Utils.getFieldValue(result, 'sflikedbyid').split(';');\r\n\r\n      let rootElement = $$('div', {\r\n        className: 'coveo-chatter-result-box-row'\r\n      });\r\n      $$(element).append(rootElement.el);\r\n\r\n      let thumbIcon = $$('div', {\r\n        className: 'coveo-sprites-common-thumbup_inactive coveo-chatter-result-box-icon'\r\n      });\r\n      rootElement.append(thumbIcon.el);\r\n\r\n      let fullListElement = $$('div', {\r\n        className: 'coveo-chatter-result-likes'\r\n      });\r\n      rootElement.append(fullListElement.el);\r\n\r\n      this.renderLikesList(fullListElement.el, result, likeNames, likeIds, this.options.nbLikesToRender);\r\n    }\r\n  }\r\n\r\n  private renderLikesList(element: HTMLElement, result: IQueryResult, likeNames: string[], likeIds: string[], nbLikesToRender: number) {\r\n    let tempElement = $$('div');\r\n\r\n    for (let i = 0; i < likeIds.length - 1 && (nbLikesToRender == 0 || i < nbLikesToRender); i++) {\r\n      tempElement.append(this.renderLikeLink(result, likeNames[i], likeIds[i]));\r\n\r\n      if ((nbLikesToRender == 0 || i < nbLikesToRender - 1) && i < likeIds.length - 2) {\r\n        tempElement.append($$('span', {}, ', ').el);\r\n      } else if (i < likeIds.length - 1) {\r\n        tempElement.append($$('span', {}, ` ${l('And').toLowerCase()} `).el);\r\n      }\r\n    }\r\n\r\n    if (nbLikesToRender == 0 || likeIds.length <= nbLikesToRender) {\r\n      tempElement.append(this.renderLikeLink(result, likeNames[likeIds.length - 1], likeIds[likeIds.length - 1]));\r\n    } else {\r\n      let othersCount = likeIds.length - nbLikesToRender;\r\n      let clickableLink = $$('a');\r\n      clickableLink.text(` ${l('Others', othersCount.toString(), othersCount)}`);\r\n      clickableLink.on('click', (e: Event) => {\r\n        e.preventDefault();\r\n        $$(element).empty();\r\n        this.renderLikesList(element, result, likeNames, likeIds, 0);\r\n      });\r\n      tempElement.append(clickableLink.el);\r\n    }\r\n\r\n    if (likeIds.length > 0) {\r\n      let name = $$('span');\r\n      name.el.innerHTML = l('LikesThis', tempElement.el.innerHTML, likeIds.length);\r\n      $$(element).append(name.el);\r\n    }\r\n  }\r\n\r\n  private renderLikeLink(result: IQueryResult, likeName: string, likeId: string): HTMLElement {\r\n    let link = $$('a', {\r\n      href: ChatterUtils.buildURI(result.clickUri, Utils.getFieldValue(result, 'sffeeditemid'), likeId)\r\n    });\r\n    link.text(likeName);\r\n    return link.el;\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(ChatterLikedBy);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ChatterLikedBy/ChatterLikedBy.ts"],"sourceRoot":""}