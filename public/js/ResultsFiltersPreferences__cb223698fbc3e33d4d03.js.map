{"version":3,"sources":["./src/ui/FormWidgets/FormGroup.ts","./src/ui/FormWidgets/MultiSelect.ts","./src/ui/ResultsFiltersPreferences/ResultsFiltersPreferences.ts","./sass/vapor/_FormGroup.scss","./sass/vapor/_MultiSelect.scss","./sass/_ResultsFiltersPreferences.scss"],"names":[],"mappings":";;;;;;;;AACA,mCAA0C;AAC1C,+BAAgC;AAEhC,yBAAkC;AAClC,6CAAqD;AAErD;;GAEG;AACH;IAUE;;;;OAIG;IACH,mBAAY,QAAuB,EAAE,KAAa;QAAlD,iBAOC;QANC,IAAI,CAAC,YAAY,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,wBAAwB,EAAE,CAAC,CAAC;QACxE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B,IAAI,CAAC,OAAO,GAAG,QAAE,CAAC,UAAU,EAAE,EAAE,SAAS,EAAE,kBAAkB,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACpF,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAC,OAAoB;YACpC,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;IACL,CAAC;IAlBM,kBAAQ,GAAf;QACE,8BAAc,CAAC;YACb,SAAS,EAAE,SAAS;SACrB,CAAC,CAAC;IACL,CAAC;IAgBD;;;OAGG;IACI,yBAAK,GAAZ;QACE,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;IACzB,CAAC;IACH,gBAAC;AAAD,CAAC;AA/BY,8BAAS;;;;;;;;;;;ACTtB,mCAAqC;AACrC,+BAAgC;AAChC,uCAA0C;AAC1C,yBAAoC;AACpC,qCAA0C;AAC1C,6CAAqD;AAErD;;GAEG;AACH;IASE;;;;;;OAMG;IACH,qBACS,QAA+E,EAC/E,OAAiB,EACjB,KAAa;QAFb,gDAAgD,WAAwB,IAAM,CAAC;QAA/E,aAAQ,GAAR,QAAQ,CAAuE;QAC/E,YAAO,GAAP,OAAO,CAAU;QACjB,UAAK,GAAL,KAAK,CAAQ;QAEpB,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAnBM,oBAAQ,GAAf;QACE,8BAAc,CAAC;YACb,WAAW,EAAE,WAAW;SACzB,CAAC,CAAC;IACL,CAAC;IAiBD;;;OAGG;IACI,2BAAK,GAAZ;QACE,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAED;;;OAGG;IACI,gCAAU,GAAjB;QACE,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAED;;;OAGG;IACI,8BAAQ,GAAf;QACE,OAAO,CAAC,CAAC,KAAK,CAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;aACtC,OAAO,EAAE;aACT,MAAM,CAAC,UAAC,GAAsB,IAAK,UAAG,CAAC,QAAQ,EAAZ,CAAY,CAAC;aAChD,GAAG,CAAC,UAAC,QAA2B,IAAK,eAAQ,CAAC,KAAK,EAAd,CAAc,CAAC;aACpD,KAAK,EAAE,CAAC;IACb,CAAC;IAED;;;OAGG;IACI,yCAAmB,GAA1B;QACE,OAAO,CAAC,CAAC,KAAK,CAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;aACtC,OAAO,EAAE;aACT,MAAM,CAAC,UAAC,GAAsB,IAAK,QAAC,GAAG,CAAC,QAAQ,EAAb,CAAa,CAAC;aACjD,GAAG,CAAC,UAAC,QAA2B,IAAK,eAAQ,CAAC,KAAK,EAAd,CAAc,CAAC;aACpD,KAAK,EAAE,CAAC;IACb,CAAC;IAED;;;OAGG;IACI,8BAAQ,GAAf,UAAgB,MAAgB;QAC9B,IAAM,iBAAiB,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAE1C,IAAM,iBAAiB,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,UAAC,GAAsB;YAC5F,QAAC,CAAC,QAAQ,CAAC,iBAAiB,EAAE,GAAG,CAAC,KAAK,CAAC;QAAxC,CAAwC,CACzC,CAAC;QACF,IAAM,oBAAoB,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,UAAC,GAAsB,IAAK,QAAC,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,EAA7B,CAA6B,CAAC,CAAC;QAErI,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,EAAE,UAAC,QAA2B,IAAK,QAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,EAA1B,CAA0B,CAAC,CAAC;QAC7F,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,EAAE,UAAC,UAA6B,IAAK,QAAC,UAAU,CAAC,QAAQ,GAAG,KAAK,CAAC,EAA7B,CAA6B,CAAC,CAAC;QAElG,IAAI,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,aAAK,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE;YAC3E,UAAU,GAAG,IAAI,CAAC;SACnB;QACD,IAAI,CAAC,aAAK,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE;YAC3E,UAAU,GAAG,IAAI,CAAC;SACnB;QAED,IAAI,UAAU,EAAE;YACd,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SACpC;IACH,CAAC;IAED;;OAEG;IACI,2BAAK,GAAZ;QACE,IAAM,iBAAiB,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC1C,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC;QAChC,IAAI,CAAC,aAAK,CAAC,YAAY,CAAC,iBAAiB,CAAC,EAAE;YAC1C,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SACpC;IACH,CAAC;IAEO,kCAAY,GAApB;QAAA,iBAgBC;QAfC,IAAI,CAAC,OAAO,GAAsB,QAAE,CAAC,QAAQ,EAAE;YAC7C,SAAS,EAAE,oBAAoB;YAC/B,QAAQ,EAAE,EAAE;YACZ,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE;SACrC,CAAC,CAAC,EAAE,CAAC;QACN,IAAM,QAAQ,GAAG,QAAE,CAAC,UAAU,EAAE;YAC9B,SAAS,EAAE,kBAAkB;YAC7B,KAAK,EAAE,IAAI,CAAC,KAAK;SAClB,CAAC,CAAC;QACH,IAAM,OAAO,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,aAAG;YACrC,OAAO,QAAE,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE,iBAAiB,EAAE,EAAE,WAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAC5E,CAAC,CAAC,CAAC;QACH,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,aAAG,IAAI,eAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,EAAvB,CAAuB,CAAC,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACtC,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,cAAM,YAAI,CAAC,QAAQ,CAAC,KAAI,CAAC,EAAnB,CAAmB,CAAC,CAAC;IAC3D,CAAC;IACH,kBAAC;AAAD,CAAC;AAxHY,kCAAW;;;;;;;;;;;;;;;;;;;;;ACXxB,yBAA4C;AAC5C,+BAAgC;AAChC,iDAA+F;AAC/F,qDAAyE;AACzE,uDAA6E;AAC7E,4CAAgF;AAChF,6CAAqD;AACrD,sCAAkD;AAClD,gDAAuF;AACvF,uCAA0C;AAC1C,iDAAgE;AAChE,mCAAqC;AACrC,kDAAkE;AAClE,uCAA4C;AAC5C,yCAAgD;AAChD,qCAA0C;AAC1C,wDAAmH;AACnH,yCAA8C;AAE9C,gDAA4D;AAC5D,8CAAwD;AACxD,yCAAmD;AACnD,2CAAqD;AACrD,6CAAyD;AACzD,0CAAqD;AAmBrD;;;;;;;;;;;GAWG;AACH;IAA+C,6CAAS;IAkGtD;;;;;;OAMG;IACH,mCAAmB,OAAoB,EAAS,OAA0C,EAAS,QAA4B;QAA/H,YACE,kBAAM,OAAO,EAAE,yBAAyB,CAAC,EAAE,EAAE,QAAQ,CAAC,SAqBvD;QAtBkB,aAAO,GAAP,OAAO,CAAa;QAAS,aAAO,GAAP,OAAO,CAAmC;QAAS,cAAQ,GAAR,QAAQ,CAAoB;QAhBvH,kCAA4B,GAAoC,EAAE,CAAC;QAmBzE,KAAI,CAAC,OAAO,GAAG,mCAAgB,CAAC,oBAAoB,CAAC,OAAO,EAAE,yBAAyB,EAAE,OAAO,CAAC,CAAC;QAElG,KAAI,CAAC,eAAe,GAAG,QAAE,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,qBAAS,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,CAAC,CAAC;QAC1G,IAAI,CAAC,KAAI,CAAC,eAAe,EAAE;YACzB,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,sGAAoG,CAAC,CAAC;;SAExH;QACD,KAAI,CAAC,2BAA2B,GAAG,IAAI,qCAAiB,CAAiD,yBAAyB,CAAC,EAAE,CAAC,CAAC;QACvI,KAAI,CAAC,0CAA0C,EAAE,CAAC;QAElD,KAAI,CAAC,wBAAwB,EAAE,CAAC;QAChC,KAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,KAAI,CAAC,cAAc,EAAE,CAAC;QAEtB,0HAA0H;QAC1H,8EAA8E;QAC9E,KAAI,CAAC,IAAI,CAAC,cAAc,CAAC,2CAAoB,CAAC,6BAA6B,EAAE,cAAM,YAAI,CAAC,SAAS,EAAE,EAAhB,CAAgB,CAAC,CAAC;QAErG,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,oBAAY,CAAC,UAAU,EAAE,wCAAsB,CAAC,CAAC,EAAE,cAAM,YAAI,CAAC,8BAA8B,EAAE,EAArC,CAAqC,CAAC,CAAC;;IAC1H,CAAC;IAEM,6CAAS,GAAhB;QACE,IAAI,CAAC,SAAS,GAAwB,IAAI,qBAAS,CAAC,EAAE,EAAE,WAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;QACjG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACzC,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE;YACpC,IAAI,CAAC,oBAAoB,EAAE,CAAC;SAC7B;IACH,CAAC;IAEM,wCAAI,GAAX;QACE,IAAI,CAAC,8BAA8B,EAAE,CAAC;QACtC,IAAM,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QAC/C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAChD,CAAC;IAEM,mDAAe,GAAtB;QACE,IAAI,CAAC,8BAA8B,EAAE,CAAC;QACtC,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAEO,4DAAwB,GAAhC;QAAA,iBAGC;QAFC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,EAAE,+CAAsB,CAAC,eAAe,EAAE,cAAM,YAAI,CAAC,IAAI,EAAE,EAAX,CAAW,CAAC,CAAC;QAC9F,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,EAAE,+CAAsB,CAAC,0BAA0B,EAAE,cAAM,YAAI,CAAC,eAAe,EAAE,EAAtB,CAAsB,CAAC,CAAC;IACtH,CAAC;IAEO,uDAAmB,GAA3B;QAAA,iBAOC;QANC,IAAI,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAE;YACpC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,mCAAgB,CAAC,kBAAkB,EAAE,UAAC,IAAkC;gBAC9F,YAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC;YAAnC,CAAmC,CACpC,CAAC;YACF,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,mCAAgB,CAAC,eAAe,EAAE,cAAM,YAAI,CAAC,qBAAqB,EAAE,EAA5B,CAA4B,CAAC,CAAC;SAC/F;IACH,CAAC;IAEO,kDAAc,GAAtB;QAAA,iBAEC;QADC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,aAAa,EAAE,UAAC,IAA6B,IAAK,YAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAA9B,CAA8B,CAAC,CAAC;IACxH,CAAC;IAEO,uDAAmB,GAA3B,UAA4B,IAA6B;QACvD,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,EAAE,gBAAM;YACpC,IAAI,aAAK,CAAC,gBAAgB,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE;gBAC7C,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;aAC7D;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,4DAAwB,GAAhC,UAAiC,IAAkC;QACjE,IAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxC,IAAI,aAAK,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE;YAClC,IAAM,SAAS,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,6CAA6C,EAAE,CAAC,CAAC;YAC1F,IAAM,KAAK,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,aAAa,EAAE,CAAC,CAAC;YACvD,KAAK,CAAC,IAAI,CAAC,WAAC,CAAC,0BAA0B,CAAC,GAAG,GAAG,CAAC,CAAC;YAChD,SAAS,CAAC,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;YAEnC,IAAM,eAAe,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,cAAc,EAAE,CAAC,CAAC;YAClE,SAAS,CAAC,EAAE,CAAC,WAAW,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;YAE7C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,eAAe,CAAC,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAClE;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,SAAS,CAAC,EAAE,EAAE,CAAC,CAAC;SAClD;IACH,CAAC;IAEO,yDAAqB,GAA7B;QACE,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,EAAE,gBAAM;YACpC,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC1B,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,8BAA8B,EAAE,CAAC;QACtC,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;IACrC,CAAC;IAEO,wDAAoB,GAA5B;QAAA,iBAqBC;QApBC,IAAI,CAAC,eAAe,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,wBAAwB,EAAE,EAAE,WAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC;QAC1F,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAChC,IAAI,CAAC,+BAA+B,EAAE,CAAC;QACvC,IAAI,CAAC,sBAAsB,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,gCAAgC,EAAE,CAAC,CAAC,EAAE,CAAC;QAC5F,IAAI,CAAC,sBAAsB,CAAC,WAAW,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;QACzE,QAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,cAAM,YAAI,CAAC,sCAAsC,EAAE,EAA7C,CAA6C,CAAC,CAAC;QAC1F,IAAM,UAAU,GAAG,QAAE,CACnB,GAAG,EACH;YACE,IAAI,EAAE,gEAAgE;YACtE,SAAS,EAAE,mBAAmB;SAC/B,EACD,GAAG,CACJ,CAAC;QAEF,IAAM,KAAK,GAAG,QAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAEjE,UAAU,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC9B,QAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC5C,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;IAC1D,CAAC;IAEO,4DAAwB,GAAhC;QACE,IAAI,CAAC,+BAA+B,GAAG,IAAI,qBAAS,CAAC,cAAO,CAAC,EAAE,WAAC,CAAC,SAAS,CAAC,CAAC,CAAC;QAE7E,IAAI,CAAC,+BAA+B,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QAE7E,IAAI,CAAC,kCAAkC,GAAG,IAAI,qBAAS,CAAC,cAAO,CAAC,EAAE,WAAC,CAAC,YAAY,CAAC,CAAC,CAAC;QAEnF,IAAI,CAAC,kCAAkC,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QAEhF,IAAI,CAAC,wBAAwB,GAAG,IAAI,yBAAW,CAAC,cAAO,CAAC,EAAE,IAAI,CAAC,UAAU,EAAE,EAAE,WAAC,CAAC,KAAK,CAAC,CAAC,CAAC;IACzF,CAAC;IAEO,mEAA+B,GAAvC;QAAA,iBAqDC;QApDC,IAAI,CAAC,0BAA0B,GAAoB,QAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC;QAEjE,IAAM,UAAU,GAAG,QAAE,CAAC,OAAO,EAAE;YAC7B,IAAI,EAAE,QAAQ;SACf,CAAC,CAAC;QAEH,IAAM,cAAc,GAAG,QAAE,CACvB,MAAM,EACN;YACE,SAAS,EAAE,YAAY;SACxB,EACD,mBAAQ,CAAC,KAAK,CAAC,yBAAyB,CACzC,CAAC;QACF,eAAM,CAAC,wBAAwB,CAAC,cAAc,CAAC,EAAE,EAAE,gBAAgB,CAAC,CAAC;QAErE,IAAM,eAAe,GAAG,QAAE,CACxB,MAAM,EACN;YACE,SAAS,EAAE,aAAa;SACzB,EACD,mBAAQ,CAAC,KAAK,CAAC,yBAAyB,CACzC,CAAC;QACF,eAAM,CAAC,wBAAwB,CAAC,eAAe,CAAC,EAAE,EAAE,iBAAiB,CAAC,CAAC;QAEvE,IAAM,qBAAqB,GAAG,QAAE,CAAC,KAAK,EAAE;YACtC,SAAS,EAAE,6CAA6C;SACzD,CAAC,CAAC;QAEH,qBAAqB,CAAC,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;QACxD,qBAAqB,CAAC,EAAE,CAAC,WAAW,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;QAEzD,IAAM,YAAY,GAAG,IAAI,CAAC,+BAA+B,CAAC,KAAK,EAAE,CAAC;QAClE,QAAE,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;QAE3C,IAAM,gBAAgB,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,EAAE,CAAC;QAC/D,QAAE,CAAC,gBAAgB,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QAE3C,IAAM,iBAAiB,GAAG,IAAI,CAAC,kCAAkC,CAAC,KAAK,EAAE,CAAC;QAC1E,QAAE,CAAC,iBAAiB,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;QAEnD,CAAC,CAAC,IAAI,CAAC,CAAC,YAAY,EAAE,iBAAiB,EAAE,gBAAgB,EAAE,qBAAqB,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE,UAAC,EAAe;YACnH,KAAI,CAAC,0BAA0B,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;QAEH,cAAc,CAAC,EAAE,CAAC,OAAO,EAAE;YACzB,UAAU,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;QACH,eAAe,CAAC,EAAE,CAAC,OAAO,EAAE;YAC1B,KAAI,CAAC,yBAAyB,EAAE,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,QAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAC,CAAQ,IAAK,YAAI,CAAC,6BAA6B,CAAC,CAAC,CAAC,EAArC,CAAqC,CAAC,CAAC;IACxG,CAAC;IAEO,8CAAU,GAAlB;QACE,IAAM,MAAM,GAAG,qBAAS,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QAChD,IAAI,MAAM,EAAE;YACV,IAAM,WAAW,GAAG,QAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,GAAG,qBAAS,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC,CAAC;YACvF,OAAO,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,UAAC,UAAuB;gBAChD,IAAI,GAAG,GAAQ,qBAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;gBACzC,OAAO,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,OAAO,EAAE,CAAC;SACX;IACH,CAAC;IAEO,iEAA6B,GAArC;QACE,OAAO,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,UAAC,MAA+B;YAC7D,OAAO;gBACL,KAAK,EAAE,MAAM,CAAC,OAAO;gBACrB,GAAG,EAAE,MAAM,CAAC,GAAG;gBACf,UAAU,EAAE,MAAM,CAAC,UAAU;aAC9B,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,wDAAoB,GAA5B;QAAA,iBAoCC;QAnCC,IAAI,IAAI,CAAC,mBAAmB,IAAI,SAAS,EAAE;YACzC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC;SACnC;QACD,IAAM,OAAO,GAAG,IAAI,CAAC,6BAA6B,EAAE,CAAC;QACrD,IAAI,aAAK,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE;YAClC,IAAI,CAAC,mBAAmB,GAAG,QAAE,CAAC,KAAK,EAAE;gBACnC,SAAS,EAAE,yBAAyB;aACrC,CAAC,CAAC,EAAE,CAAC;YAEN,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,uBAAa;gBAC3B,IAAM,QAAQ,GAAG,IAAI,mBAAQ,CAAC,UAAC,QAAkB;oBAC/C,KAAI,CAAC,IAAI,EAAE,CAAC;oBACZ,IAAM,MAAM,GAAG,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC;oBAErD,IAAI,CAAC,KAAI,CAAC,eAAe,CAAC,UAAU,IAAI,CAAC,KAAI,CAAC,qBAAqB,EAAE;wBACnE,KAAI,CAAC,0BAA0B,CAAC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;wBACrF,KAAI,CAAC,eAAe,CAAC,YAAY,CAAC;4BAChC,aAAa,EAAE,KAAK;yBACrB,CAAC,CAAC;qBACJ;gBACH,CAAC,EAAE,aAAa,CAAC,KAAK,CAAC,CAAC;gBACxB,QAAE,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,QAAQ,CAAC,wBAAwB,CAAC,CAAC;gBACxD,KAAI,CAAC,4BAA4B,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC;gBAClE,KAAI,CAAC,mBAAmB,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC;YAC9D,CAAC,CAAC,CAAC;YAEH,CAAC,CAAC,IAAI,CAAC,QAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,OAAO,CAAC,yBAAyB,CAAC,EAAE,UAAC,eAA4B;gBACnG,eAAe,CAAC,WAAW,CAAC,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,yCAAyC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;YACtG,CAAC,CAAC,CAAC;YAEH,QAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;YACpD,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAC/B,IAAI,CAAC,yBAAyB,EAAE,CAAC;YACjC,IAAI,CAAC,8BAA8B,EAAE,CAAC;SACvC;IACH,CAAC;IAEO,6DAAyB,GAAjC;QAAA,iBAiBC;QAhBC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,gBAAM;YAC7B,IAAI,MAAM,CAAC,MAAM,EAAE;gBACjB,IAAM,aAAa,GAAG,QAAE,CACtB,MAAM,EACN;oBACE,SAAS,EAAE,cAAc;iBAC1B,EACD,mBAAQ,CAAC,KAAK,CAAC,yBAAyB,CACzC,CAAC,EAAE,CAAC;gBACL,eAAM,CAAC,wBAAwB,CAAC,aAAa,EAAE,kBAAkB,CAAC,CAAC;gBACnE,IAAM,eAAa,GAAG,KAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;gBACrE,IAAM,UAAU,GAAG,QAAE,CAAC,eAAa,CAAC,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;gBACxE,UAAU,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;gBACtC,QAAE,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,cAAM,YAAI,CAAC,aAAa,CAAC,MAAM,EAAE,eAAa,CAAC,EAAzC,CAAyC,CAAC,CAAC;aAChF;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,2DAAuB,GAA/B;QAAA,iBAiBC;QAhBC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,gBAAM;YAC7B,IAAI,MAAM,CAAC,MAAM,EAAE;gBACjB,IAAM,WAAW,GAAG,QAAE,CACpB,MAAM,EACN;oBACE,SAAS,EAAE,YAAY;iBACxB,EACD,mBAAQ,CAAC,KAAK,CAAC,IAAI,CACpB,CAAC;gBACF,eAAM,CAAC,wBAAwB,CAAC,WAAW,CAAC,EAAE,EAAE,gBAAgB,CAAC,CAAC;gBAClE,IAAM,eAAa,GAAG,KAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;gBACrE,IAAM,UAAU,GAAG,QAAE,CAAC,eAAa,CAAC,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;gBACxE,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;gBACvC,WAAW,CAAC,EAAE,CAAC,OAAO,EAAE,cAAM,YAAI,CAAC,WAAW,CAAC,MAAM,EAAE,eAAa,CAAC,EAAvC,CAAuC,CAAC,CAAC;aACxE;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,mDAAe,GAAvB,UAAwB,MAA+B;QAAvD,iBAuBC;QAtBC,IAAM,IAAI,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,aAAa,EAAE,CAAC,CAAC;QAEtD,IAAM,OAAO,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC;QAC3D,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAC7B,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAEhC,IAAM,KAAK,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,aAAa,EAAE,EAAE,mBAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACjF,IAAI,CAAC,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAE9B,IAAM,cAAc,GAAG;YACrB,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC;YACxB,KAAI,CAAC,0BAA0B,CAAC,MAAM,EAAE,yBAAyB,CAAC,CAAC;YACnE,KAAI,CAAC,8BAA8B,EAAE,CAAC;QACxC,CAAC,CAAC;QAEF,IAAI,mCAAgB,EAAE;aACnB,WAAW,CAAC,IAAI,CAAC;aACjB,SAAS,CAAC,WAAC,CAAC,gBAAgB,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;aAC9C,gBAAgB,CAAC,cAAc,CAAC;aAChC,KAAK,EAAE,CAAC;QAEX,OAAO,IAAI,CAAC,EAAE,CAAC;IACjB,CAAC;IAEO,iDAAa,GAArB,UAAsB,MAA+B,EAAE,aAA0B;QAC/E,IAAI,OAAO,CAAC,WAAC,CAAC,wBAAwB,EAAE,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,UAAU,CAAC,CAAC,EAAE;YAC3E,IAAM,UAAU,GAAG,MAAM,CAAC,QAAQ,CAAC;YACnC,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;YACnD,IAAI,UAAU,EAAE;gBACd,IAAI,CAAC,0BAA0B,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;gBACnD,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC;oBAChC,aAAa,EAAE,KAAK;iBACrB,CAAC,CAAC;aACJ;SACF;IACH,CAAC;IAEO,+CAAW,GAAnB,UAAoB,MAA+B,EAAE,aAA0B;QAC7E,IAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC;QAC5D,IAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC;QACpD,IAAM,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC;QAClE,IAAI,CAAC,sBAAsB,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;QACnD,IAAI,CAAC,sCAAsC,EAAE,CAAC;QAC9C,IAAI,CAAC,mBAAmB,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,aAAa,EAAE,CAAC,CAAC;IAC5F,CAAC;IAEO,uDAAmB,GAA3B,UAA4B,UAAuD;QAAvD,4CAAe,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,UAAU,EAAE,EAAE,EAAE;QACjF,IAAI,CAAC,+BAA+B,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAClE,IAAI,CAAC,kCAAkC,CAAC,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;QACxE,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;IACzD,CAAC;IAEO,0DAAsB,GAA9B,UAA+B,MAA+B,EAAE,aAA0B;QACxF,IAAI,CAAC,2BAA2B,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACxD,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACxC,QAAE,CAAC,QAAE,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;IACpE,CAAC;IAEO,0EAAsC,GAA9C;QACE,IAAI,QAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;YAC5D,QAAE,CAAC,QAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACpF,IAAI,CAAC,yBAAyB,EAAE,CAAC;SAClC;aAAM;YACL,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,yBAAyB,EAAE,CAAC;SAClC;IACH,CAAC;IAEO,iEAA6B,GAArC,UAAsC,CAAQ;QAC5C,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACjC,IAAM,OAAO,GAAG,IAAI,CAAC,+BAA+B,CAAC,QAAQ,EAAE,CAAC;QAChE,IAAM,UAAU,GAAG,IAAI,CAAC,kCAAkC,CAAC,QAAQ,EAAE,CAAC;QACtE,IAAM,IAAI,GAAG,IAAI,CAAC,wBAAwB,CAAC,QAAQ,EAAE,CAAC;QACtD,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG;YAC1B,OAAO,EAAE,OAAO;YAChB,MAAM,EAAE,IAAI;YACZ,UAAU,EAAE,UAAU;YACtB,GAAG,EAAE,IAAI;YACT,QAAQ,EAAE,IAAI;SACf,CAAC;QACF,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,iCAAe,CAAC,cAAc,CAAC,CAAC,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;QAChF,IAAI,CAAC,+BAA+B,CAAC,KAAK,EAAE,CAAC;QAC7C,IAAI,CAAC,kCAAkC,CAAC,KAAK,EAAE,CAAC;QAChD,IAAI,CAAC,wBAAwB,CAAC,KAAK,EAAE,CAAC;QACtC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;QACxD,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,OAAO,CAAC,CAAC;QACpE,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC;YAChC,aAAa,EAAE,KAAK;SACrB,CAAC,CAAC;IACL,CAAC;IAEO,kEAA8B,GAAtC;QAAA,iBAUC;QATC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,EAAE,UAAC,MAA+B;YAC9D,KAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC;QAC7D,CAAC,CAAC,CAAC;QACH,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,EAAE,UAAC,MAA+B;YAChE,KAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,CAAC;QAC5D,CAAC,CAAC,CAAC;QACH,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,EAAE,UAAC,MAA+B;YAC/D,KAAI,CAAC,4BAA4B,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC;QAC7D,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,kEAA8B,GAAtC;QACE,IAAI,IAAI,CAAC,4BAA4B,EAAE;YACrC,IAAM,WAAS,GAAG,CAAC,CAAC,GAAG,CACrB,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,4BAA4B,EAAE,UAAC,QAAkB,IAAK,eAAQ,CAAC,UAAU,EAAE,EAArB,CAAqB,CAAC,EAC1F,UAAC,QAAkB,IAAK,eAAQ,CAAC,QAAQ,EAAE,EAAnB,CAAmB,CAC5C,CAAC;YACF,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,UAAC,MAA+B;gBACvD,IAAI,CAAC,CAAC,QAAQ,CAAC,WAAS,EAAE,MAAM,CAAC,OAAO,CAAC,EAAE;oBACzC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;iBACxB;qBAAM;oBACL,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC;iBACzB;YACH,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAEO,qDAAiB,GAAzB;QAAA,iBAKC;QAJC,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACtC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,UAAC,MAA+B;YAChE,OAAO,MAAM,CAAC,QAAQ,IAAI,CAAC,KAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;QACzE,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,oDAAgB,GAAxB;QAAA,iBAKC;QAJC,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACtC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,UAAC,MAA+B;YAChE,OAAO,MAAM,CAAC,QAAQ,IAAI,KAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;QACxE,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,sDAAkB,GAA1B;QAAA,iBAKC;QAJC,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACtC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,UAAC,MAA+B;YAChE,OAAO,CAAC,MAAM,CAAC,QAAQ,IAAI,CAAC,KAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;QAC1E,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,gDAAY,GAApB;QACE,OAAO,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,iCAAe,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;IACpE,CAAC;IAEO,uDAAmB,GAA3B,UAA4B,MAA+B,EAAE,GAAW;QACtE,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QACnC,OAAO,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,aAAK,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACvE,CAAC;IAEO,6DAAyB,GAAjC,UAAkC,OAAe;QAC/C,OAAO,QAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,eAAe,GAAG,OAAO,GAAG,IAAI,CAAC,CAAC,aAAa,CAAC;IAC3F,CAAC;IAEO,uFAAmD,GAA3D;QACE,IAAM,GAAG,GAA+C,EAAE,CAAC;QAC3D,CAAC,CAAC,IAAI,CAAM,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,UAAC,MAAkE,EAAE,OAAe;YACpH,GAAG,CAAC,OAAO,CAAC,GAAG;gBACb,UAAU,EAAE,MAAM,CAAC,UAAU;gBAC7B,GAAG,EAAE,MAAM,CAAC,GAAG;gBACf,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK;gBACnD,MAAM,EAAE,KAAK;gBACb,OAAO,EAAE,OAAO;aACjB,CAAC;QACJ,CAAC,CAAC,CAAC;QACH,OAAO,GAAG,CAAC;IACb,CAAC;IAEO,8EAA0C,GAAlD;QACE,IAAM,iBAAiB,GAAG,IAAI,CAAC,mDAAmD,EAAE,CAAC;QACrF,IAAM,gBAAgB,GAAG,IAAI,CAAC,2BAA2B,CAAC,IAAI,EAAE,CAAC;QACjE,IAAM,8BAA8B,GAAG,CAAC,CAAC,MAAM,CAA0B,gBAAgB,EAAE,oBAAU;YACnG,IAAM,QAAQ,GAAG,UAAU,CAAC,MAAM,CAAC;YACnC,IAAM,cAAc,GAAG,CAAC,CAAC,IAAI,CAA0B,iBAAiB,EAAE,0BAAgB;gBACxF,OAAO,gBAAgB,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,CAAC;YACxD,CAAC,CAAC,CAAC;YACH,OAAO,QAAQ,IAAI,cAAc,IAAI,SAAS,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,IAAM,YAAY,GAAG,EAAE,CAAC;QACxB,CAAC,CAAC,IAAI,CAAC,8BAA8B,EAAE,UAAC,MAA+B;YACrE,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG;gBAC7B,UAAU,EAAE,MAAM,CAAC,UAAU;gBAC7B,GAAG,EAAE,MAAM,CAAC,GAAG;gBACf,QAAQ,EAAE,MAAM,CAAC,QAAQ;gBACzB,MAAM,EAAE,MAAM,CAAC,MAAM;gBACrB,OAAO,EAAE,MAAM,CAAC,OAAO;aACxB,CAAC;QACJ,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,GAAmD,aAAK,CAAC,UAAU,CAAC,iBAAiB,EAAE,YAAY,CAAC,CAAC;IACvH,CAAC;IAEO,8DAA0B,GAAlC,UAAmC,MAA+B,EAAE,IAAY;QAC9E,IAAI,CAAC,cAAc,CAAC,cAAc,CAAoC,kDAAwB,CAAC,mBAAmB,EAAE;YAClH,gBAAgB,EAAE,MAAM,CAAC,OAAO;YAChC,sBAAsB,EAAE,MAAM,CAAC,UAAU;YACzC,gBAAgB,EAAE,IAAI;SACvB,CAAC,CAAC;IACL,CAAC;IAEO,mDAAe,GAAvB;QACE,IAAM,iBAAiB,GAAG,QAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC3E,IAAI,iBAAiB,EAAE;YACrB,QAAE,CAAC,iBAAiB,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;SACjD;IACH,CAAC;IAEO,kDAAc,GAAtB;QACE,IAAM,iBAAiB,GAAG,QAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC3E,IAAI,iBAAiB,EAAE;YACrB,QAAE,CAAC,iBAAiB,CAAC,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;SACpD;IACH,CAAC;IAEO,6DAAyB,GAAjC;QACE,IAAI,IAAI,CAAC,sBAAsB,EAAE;YAC/B,QAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;YACzD,IAAI,CAAC,eAAe,EAAE,CAAC;SACxB;IACH,CAAC;IAEO,6DAAyB,GAAjC;QACE,IAAI,IAAI,CAAC,sBAAsB,EAAE;YAC/B,QAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;YAC5D,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;IACH,CAAC;IA5mBM,4BAAE,GAAG,2BAA2B,CAAC;IAEjC,kCAAQ,GAAG;QAChB,8BAAc,CAAC;YACb,yBAAyB,EAAE,yBAAyB;SACrD,CAAC,CAAC;IACL,CAAC,CAAC;IAEF;;;OAGG;IACI,iCAAO,GAAsC;QAClD;;;;WAIG;QACH,mBAAmB,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC;QAEhF;;;;;;;WAOG;QACH,mBAAmB,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC;QAEhF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WAiDG;QACH,OAAO,EAAO,mCAAgB,CAAC,eAAe,EAAE;KACjD,CAAC;IA4hBJ,gCAAC;CAAA,CA9mB8C,qBAAS,GA8mBvD;AA9mBY,8DAAyB;AAgnBtC,+BAAc,CAAC,2BAA2B,CAAC,yBAAyB,CAAC,CAAC;;;;;;;;ACvqBtE,yC;;;;;;;ACAA,yC;;;;;;;ACAA,yC","file":"ResultsFiltersPreferences__cb223698fbc3e33d4d03.js","sourcesContent":["import { IFormWidget } from './FormWidgets';\r\nimport { Dom, $$ } from '../../utils/Dom';\r\nimport * as _ from 'underscore';\r\n\r\nimport 'styling/vapor/_FormGroup';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\n/**\r\n * A simple `fieldset` HTMLElement containing multiple form widgets.\r\n */\r\nexport class FormGroup {\r\n  private element: Dom;\r\n  public labelElement: Dom;\r\n\r\n  static doExport() {\r\n    exportGlobally({\r\n      FormGroup: FormGroup\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a new `FormGroup`.\r\n   * @param contents The form widgets to include in the form group.\r\n   * @param label The label to display for the form group.\r\n   */\r\n  constructor(contents: IFormWidget[], label: string) {\r\n    this.labelElement = $$('span', { className: 'coveo-form-group-label' });\r\n    this.labelElement.text(label);\r\n    this.element = $$('fieldset', { className: 'coveo-form-group' }, this.labelElement);\r\n    _.each(contents, (content: IFormWidget) => {\r\n      this.element.append(content.build());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Gets the element on which the form group is bound.\r\n   * @returns {HTMLElement} The form group element.\r\n   */\r\n  public build(): HTMLElement {\r\n    return this.element.el;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/FormWidgets/FormGroup.ts","import { IFormWidget, IFormWidgetSettable } from './FormWidgets';\r\nimport { $$ } from '../../utils/Dom';\r\nimport * as _ from 'underscore';\r\nimport { l } from '../../strings/Strings';\r\nimport 'styling/vapor/_MultiSelect';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\n/**\r\n * A multi select widget with standard styling.\r\n */\r\nexport class MultiSelect implements IFormWidget, IFormWidgetSettable {\r\n  private element: HTMLSelectElement;\r\n\r\n  static doExport() {\r\n    exportGlobally({\r\n      MultiSelect: MultiSelect\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a new `MultiSelect`.\r\n   * @param onChange The function to call when the widget selected values change. This function takes the current\r\n   * `MultiSelect` instance as an argument.\r\n   * @param options The values which can be selected with the multi select.\r\n   * @param label The label to display for the multi select.\r\n   */\r\n  constructor(\r\n    public onChange: (multiSelect: MultiSelect) => void = (multiSelect: MultiSelect) => {},\r\n    public options: string[],\r\n    public label: string\r\n  ) {\r\n    this.buildContent();\r\n  }\r\n\r\n  /**\r\n   * Gets the element on which the multi select is bound.\r\n   * @returns {HTMLSelectElement} The multi select element.\r\n   */\r\n  public build(): HTMLElement {\r\n    return this.element;\r\n  }\r\n\r\n  /**\r\n   * Gets the element on which the multi select is bound.\r\n   * @returns {HTMLSelectElement} The multi select element.\r\n   */\r\n  public getElement(): HTMLElement {\r\n    return this.element;\r\n  }\r\n\r\n  /**\r\n   * Gets the currently selected values.\r\n   * @returns {string[]} The array of selected multi select values.\r\n   */\r\n  public getValue(): string[] {\r\n    return _.chain(<any>this.element.options)\r\n      .toArray()\r\n      .filter((opt: HTMLOptionElement) => opt.selected)\r\n      .map((selected: HTMLOptionElement) => selected.value)\r\n      .value();\r\n  }\r\n\r\n  /**\r\n   * Gets the currently un-selected values.\r\n   * @returns {string[]} The array of un-selected multi select values.\r\n   */\r\n  public getUnselectedValues(): string[] {\r\n    return _.chain(<any>this.element.options)\r\n      .toArray()\r\n      .filter((opt: HTMLOptionElement) => !opt.selected)\r\n      .map((selected: HTMLOptionElement) => selected.value)\r\n      .value();\r\n  }\r\n\r\n  /**\r\n   * Sets the currently selected values.\r\n   * @param values The values to select.\r\n   */\r\n  public setValue(values: string[]) {\r\n    const currentlySelected = this.getValue();\r\n\r\n    const currentStateSplit = _.partition(_.toArray(this.element.options), (opt: HTMLOptionElement) =>\r\n      _.contains(currentlySelected, opt.value)\r\n    );\r\n    const newStateToApplySplit = _.partition(_.toArray(this.element.options), (opt: HTMLOptionElement) => _.contains(values, opt.value));\r\n\r\n    _.each(newStateToApplySplit[0], (toSelect: HTMLOptionElement) => (toSelect.selected = true));\r\n    _.each(newStateToApplySplit[1], (toUnSelect: HTMLOptionElement) => (toUnSelect.selected = false));\r\n\r\n    let hasChanged = false;\r\n    if (!Utils.arrayEqual(currentStateSplit[0], newStateToApplySplit[0], false)) {\r\n      hasChanged = true;\r\n    }\r\n    if (!Utils.arrayEqual(currentStateSplit[1], newStateToApplySplit[1], false)) {\r\n      hasChanged = true;\r\n    }\r\n\r\n    if (hasChanged) {\r\n      $$(this.element).trigger('change');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Resets the multi select.\r\n   */\r\n  public reset() {\r\n    const currentlySelected = this.getValue();\r\n    this.element.selectedIndex = -1;\r\n    if (!Utils.isEmptyArray(currentlySelected)) {\r\n      $$(this.element).trigger('change');\r\n    }\r\n  }\r\n\r\n  private buildContent() {\r\n    this.element = <HTMLSelectElement>$$('select', {\r\n      className: 'coveo-multi-select',\r\n      multiple: '',\r\n      size: this.options.length.toString()\r\n    }).el;\r\n    const optgroup = $$('optgroup', {\r\n      className: 'coveo-list-group',\r\n      label: this.label\r\n    });\r\n    const options = _.map(this.options, opt => {\r\n      return $$('option', { value: opt, className: 'coveo-list-item' }, l(opt));\r\n    });\r\n    _.each(options, opt => optgroup.append(opt.el));\r\n    this.element.appendChild(optgroup.el);\r\n    $$(this.element).on('change', () => this.onChange(this));\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/FormWidgets/MultiSelect.ts","import 'styling/_ResultsFiltersPreferences';\r\nimport * as _ from 'underscore';\r\nimport { BreadcrumbEvents, IPopulateBreadcrumbEventArgs } from '../../events/BreadcrumbEvents';\r\nimport { InitializationEvents } from '../../events/InitializationEvents';\r\nimport { PreferencesPanelEvents } from '../../events/PreferencesPanelEvents';\r\nimport { IBuildingQueryEventArgs, QueryEvents } from '../../events/QueryEvents';\r\nimport { exportGlobally } from '../../GlobalExports';\r\nimport { MODEL_EVENTS } from '../../models/Model';\r\nimport { QueryStateModel, QUERY_STATE_ATTRIBUTES } from '../../models/QueryStateModel';\r\nimport { l } from '../../strings/Strings';\r\nimport { AccessibleButton } from '../../utils/AccessibleButton';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { LocalStorageUtils } from '../../utils/LocalStorageUtils';\r\nimport { SVGDom } from '../../utils/SVGDom';\r\nimport { SVGIcons } from '../../utils/SVGIcons';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { analyticsActionCauseList, IAnalyticsCustomFiltersChangeMeta } from '../Analytics/AnalyticsActionListMeta';\r\nimport { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { Checkbox } from '../FormWidgets/Checkbox';\r\nimport { FormGroup } from '../FormWidgets/FormGroup';\r\nimport { MultiSelect } from '../FormWidgets/MultiSelect';\r\nimport { TextInput } from '../FormWidgets/TextInput';\r\nimport { Tab } from '../Tab/Tab';\r\n\r\nexport interface IResultFilterPreference {\r\n  selected?: boolean;\r\n  custom?: boolean;\r\n  tab?: string[];\r\n  caption: string;\r\n  expression: string;\r\n}\r\n\r\nexport interface IResultsFiltersPreferencesOptions {\r\n  filters?: {\r\n    [caption: string]: { expression: string; tab?: string[] };\r\n  };\r\n  includeInBreadcrumb?: boolean;\r\n  showAdvancedFilters?: boolean;\r\n}\r\n\r\n/**\r\n * The `ResultFiltersPreferences` component allows end users to create custom filters to apply to queries. These filters\r\n * are saved to local storage.\r\n *\r\n * Only advanced end users who understand the Coveo query syntax should use this feature (see\r\n * [Coveo Query Syntax Reference](https://www.coveo.com/go?dest=adminhelp70&lcid=9&context=10005)).\r\n *\r\n * This component is normally accessible through the [`Settings`]{@link Settings} menu. Its usual location in the DOM is\r\n * inside the [`PreferencesPanel`]{@link PreferencesPanel} element.\r\n *\r\n * See also the {@link ResultsPreferences} component.\r\n */\r\nexport class ResultsFiltersPreferences extends Component {\r\n  static ID = 'ResultsFiltersPreferences';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      ResultsFiltersPreferences: ResultsFiltersPreferences\r\n    });\r\n  };\r\n\r\n  /**\r\n   * The options for the component\r\n   * @componentOptions\r\n   */\r\n  static options: IResultsFiltersPreferencesOptions = {\r\n    /**\r\n     * Specifies whether to display the active filter(s) in the [`Breadcrumb`]{@link Breadcrumb}.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    includeInBreadcrumb: ComponentOptions.buildBooleanOption({ defaultValue: true }),\r\n\r\n    /**\r\n     * Specifies whether to show the **Create** button that allows the end user to create filters.\r\n     *\r\n     * If you set this option to `false`, only the pre-populated\r\n     * [`filters`]{@link ResultsFiltersPreferences.options.filters} are available to the end user.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    showAdvancedFilters: ComponentOptions.buildBooleanOption({ defaultValue: true }),\r\n\r\n    /**\r\n     * Specifies the default filters which all end users can apply.\r\n     *\r\n     * End users cannot modify or delete these filters. These filters do not count as \"user-made\" filters, but rather as\r\n     * \"built-in\" filters created by the developer of the search page.\r\n     *\r\n     * **Note:**\r\n     * > You cannot set this option directly in the component markup as an HTML attribute. You must either set it in the\r\n     * > [`init`]{@link init} call of your search interface (see\r\n     * > [Passing Component Options in the init Call](https://docs.coveo.com/en/346/#passing-component-options-in-the-init-call)),\r\n     * > or before the `init` call, using the `options` top-level function (see\r\n     * > [Passing Component Options Before the init Call](https://docs.coveo.com/en/346/#passing-component-options-before-the-init-call)).\r\n     *\r\n     * Filters should follow this definition:\r\n     *\r\n     * `filters : { [caption : string] : { expression : string, tab? : string[] } }`;\r\n     *\r\n     * **Example:**\r\n     *\r\n     * var myFilters = {\r\n     *   \"Only Google Drive Items\" : {\r\n     *     expression : \"@connectortype == 'GoogleDriveCrawler'\",\r\n     *     tab : [\"Tab1\", \"Tab2\"]\r\n     *   },\r\n     *\r\n     *   \"Another Filter\" : {\r\n     *     expression : [ ... another expression ... ]\r\n     *   },\r\n     *\r\n     *   [ ... ]\r\n     * };\r\n     *\r\n     * ```javascript\r\n     * // You can set the option in the 'init' call:\r\n     * Coveo.init(document.querySelector(\"#search\"), {\r\n     *   ResultsFiltersPreferences : {\r\n     *     filters : myFilters\r\n     *   }\r\n     * });\r\n     *\r\n     * // Or before the 'init' call, using the 'options' top-level function:\r\n     * // Coveo.options(document.querySelector(\"#search\"), {\r\n     * //   ResultsFiltersPreferences : {\r\n     *        filters : myFilters\r\n     *      }\r\n     * // });\r\n     * ```\r\n     *\r\n     * Default value is `undefined`.\r\n     */\r\n    filters: <any>ComponentOptions.buildJsonOption()\r\n  };\r\n\r\n  public preferences: { [caption: string]: IResultFilterPreference };\r\n  public container: HTMLFieldSetElement;\r\n  private preferencePanelLocalStorage: LocalStorageUtils<{ [caption: string]: IResultFilterPreference }>;\r\n  private preferencePanel: HTMLElement;\r\n  private preferenceContainer: HTMLElement;\r\n  private preferencePanelCheckboxInput: { [caption: string]: Checkbox } = {};\r\n  private advancedFilters: HTMLElement;\r\n  private advancedFiltersBuilder: HTMLElement;\r\n  private advancedFiltersTextInputCaption: TextInput;\r\n  private advancedFiltersTextInputExpression: TextInput;\r\n  private advancedFiltersTabSelect: MultiSelect;\r\n  private advancedFilterFormValidate: HTMLFormElement;\r\n  private isFullBreadcrumbClear: boolean;\r\n\r\n  /**\r\n   * Creates a new `ResultsFiltersPreferences` component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the `ResultsFiltersPreferences` component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   */\r\n  constructor(public element: HTMLElement, public options: IResultsFiltersPreferencesOptions, public bindings: IComponentBindings) {\r\n    super(element, ResultsFiltersPreferences.ID, bindings);\r\n\r\n    this.options = ComponentOptions.initComponentOptions(element, ResultsFiltersPreferences, options);\r\n\r\n    this.preferencePanel = $$(this.element).closest(Component.computeCssClassNameForType('PreferencesPanel'));\r\n    if (!this.preferencePanel) {\r\n      this.logger.warn(`Cannot instantiate ResultsFilterPreferences, as there is no \"CoveoPreferencesPanel\" in your page !`);\r\n      return;\r\n    }\r\n    this.preferencePanelLocalStorage = new LocalStorageUtils<{ [caption: string]: IResultFilterPreference }>(ResultsFiltersPreferences.ID);\r\n    this.mergeLocalPreferencesWithStaticPreferences();\r\n\r\n    this.bindPreferencePanelEvent();\r\n    this.bindBreadcrumbEvent();\r\n    this.bindQueryEvent();\r\n\r\n    // We need to wait after all components are initialized before building the dom, because this component interacts with Tab\r\n    // And we don't know if Tab(s) are initialized before or after this component.\r\n    this.bind.oneRootElement(InitializationEvents.afterComponentsInitialization, () => this.createDom());\r\n\r\n    this.bind.oneQueryState(MODEL_EVENTS.CHANGE_ONE, QUERY_STATE_ATTRIBUTES.T, () => this.fromPreferencesToCheckboxInput());\r\n  }\r\n\r\n  public createDom() {\r\n    this.container = <HTMLFieldSetElement>new FormGroup([], l('ResultsFilteringExpression')).build();\r\n    this.element.appendChild(this.container);\r\n    this.buildCheckboxesInput();\r\n    if (this.options.showAdvancedFilters) {\r\n      this.buildAdvancedFilters();\r\n    }\r\n  }\r\n\r\n  public save() {\r\n    this.fromCheckboxInputToPreferences();\r\n    const toSave = _.omit(this.preferences, 'tab');\r\n    this.logger.info('Saving preferences', toSave);\r\n    this.preferencePanelLocalStorage.save(toSave);\r\n  }\r\n\r\n  public exitWithoutSave() {\r\n    this.fromPreferencesToCheckboxInput();\r\n    this.hideAdvancedFilterBuilder();\r\n  }\r\n\r\n  private bindPreferencePanelEvent() {\r\n    this.bind.on(this.preferencePanel, PreferencesPanelEvents.savePreferences, () => this.save());\r\n    this.bind.on(this.preferencePanel, PreferencesPanelEvents.exitPreferencesWithoutSave, () => this.exitWithoutSave());\r\n  }\r\n\r\n  private bindBreadcrumbEvent() {\r\n    if (this.options.includeInBreadcrumb) {\r\n      this.bind.onRootElement(BreadcrumbEvents.populateBreadcrumb, (args: IPopulateBreadcrumbEventArgs) =>\r\n        this.handlePopulateBreadcrumb(args)\r\n      );\r\n      this.bind.onRootElement(BreadcrumbEvents.clearBreadcrumb, () => this.handleClearBreadcrumb());\r\n    }\r\n  }\r\n\r\n  private bindQueryEvent() {\r\n    this.bind.onRootElement(QueryEvents.buildingQuery, (args: IBuildingQueryEventArgs) => this.handleBuildingQuery(args));\r\n  }\r\n\r\n  private handleBuildingQuery(args: IBuildingQueryEventArgs) {\r\n    _.each(this.getActiveFilters(), filter => {\r\n      if (Utils.isNonEmptyString(filter.expression)) {\r\n        args.queryBuilder.advancedExpression.add(filter.expression);\r\n      }\r\n    });\r\n  }\r\n\r\n  private handlePopulateBreadcrumb(args: IPopulateBreadcrumbEventArgs) {\r\n    const actives = this.getActiveFilters();\r\n    if (Utils.isNonEmptyArray(actives)) {\r\n      const container = $$('div', { className: 'coveo-results-filter-preferences-breadcrumb' });\r\n      const title = $$('span', { className: 'coveo-title' });\r\n      title.text(l('FiltersInYourPreferences') + ':');\r\n      container.el.appendChild(title.el);\r\n\r\n      const valuesContainer = $$('span', { className: 'coveo-values' });\r\n      container.el.appendChild(valuesContainer.el);\r\n\r\n      for (var i = 0; i < actives.length; i++) {\r\n        valuesContainer.el.appendChild(this.buildBreadcrumb(actives[i]));\r\n      }\r\n      args.breadcrumbs.push({ element: container.el });\r\n    }\r\n  }\r\n\r\n  private handleClearBreadcrumb() {\r\n    this.isFullBreadcrumbClear = true;\r\n    _.each(this.getActiveFilters(), filter => {\r\n      filter.selected = false;\r\n    });\r\n    this.fromPreferencesToCheckboxInput();\r\n    this.isFullBreadcrumbClear = false;\r\n  }\r\n\r\n  private buildAdvancedFilters() {\r\n    this.advancedFilters = $$('div', { className: 'coveo-advanced-filters' }, l('Create')).el;\r\n    this.buildAdvancedFilterInput();\r\n    this.buildAdvancedFilterFormValidate();\r\n    this.advancedFiltersBuilder = $$('div', { className: 'coveo-advanced-filters-builder' }).el;\r\n    this.advancedFiltersBuilder.appendChild(this.advancedFilterFormValidate);\r\n    $$(this.advancedFilters).on('click', () => this.openAdvancedFilterSectionOrSaveFilters());\r\n    const onlineHelp = $$(\r\n      'a',\r\n      {\r\n        href: 'https://www.coveo.com/go?dest=adminhelp70&lcid=9&context=10006',\r\n        className: 'coveo-online-help'\r\n      },\r\n      '?'\r\n    );\r\n\r\n    const title = $$(this.container).find('.coveo-form-group-label');\r\n\r\n    onlineHelp.insertAfter(title);\r\n    $$(this.advancedFilters).insertAfter(title);\r\n    this.container.appendChild(this.advancedFiltersBuilder);\r\n  }\r\n\r\n  private buildAdvancedFilterInput() {\r\n    this.advancedFiltersTextInputCaption = new TextInput(() => {}, l('Caption'));\r\n\r\n    this.advancedFiltersTextInputCaption.getInput().setAttribute('required', '');\r\n\r\n    this.advancedFiltersTextInputExpression = new TextInput(() => {}, l('Expression'));\r\n\r\n    this.advancedFiltersTextInputExpression.getInput().setAttribute('required', '');\r\n\r\n    this.advancedFiltersTabSelect = new MultiSelect(() => {}, this.getAllTabs(), l('Tab'));\r\n  }\r\n\r\n  private buildAdvancedFilterFormValidate() {\r\n    this.advancedFilterFormValidate = <HTMLFormElement>$$('form').el;\r\n\r\n    const formSubmit = $$('input', {\r\n      type: 'submit'\r\n    });\r\n\r\n    const saveFormButton = $$(\r\n      'span',\r\n      {\r\n        className: 'coveo-save'\r\n      },\r\n      SVGIcons.icons.checkboxHookExclusionMore\r\n    );\r\n    SVGDom.addClassToSVGInContainer(saveFormButton.el, 'coveo-save-svg');\r\n\r\n    const closeFormButton = $$(\r\n      'span',\r\n      {\r\n        className: 'coveo-close'\r\n      },\r\n      SVGIcons.icons.checkboxHookExclusionMore\r\n    );\r\n    SVGDom.addClassToSVGInContainer(closeFormButton.el, 'coveo-close-svg');\r\n\r\n    const saveAndCloseContainer = $$('div', {\r\n      className: 'coveo-choice-container coveo-close-and-save'\r\n    });\r\n\r\n    saveAndCloseContainer.el.appendChild(saveFormButton.el);\r\n    saveAndCloseContainer.el.appendChild(closeFormButton.el);\r\n\r\n    const inputCaption = this.advancedFiltersTextInputCaption.build();\r\n    $$(inputCaption).addClass('coveo-caption');\r\n\r\n    const filtersTabSelect = this.advancedFiltersTabSelect.build();\r\n    $$(filtersTabSelect).addClass('coveo-tab');\r\n\r\n    const filtersExpression = this.advancedFiltersTextInputExpression.build();\r\n    $$(filtersExpression).addClass('coveo-expression');\r\n\r\n    _.each([inputCaption, filtersExpression, filtersTabSelect, saveAndCloseContainer.el, formSubmit.el], (el: HTMLElement) => {\r\n      this.advancedFilterFormValidate.appendChild(el);\r\n    });\r\n\r\n    saveFormButton.on('click', () => {\r\n      formSubmit.el.click();\r\n    });\r\n    closeFormButton.on('click', () => {\r\n      this.hideAdvancedFilterBuilder();\r\n    });\r\n\r\n    $$(this.advancedFilterFormValidate).on('submit', (e: Event) => this.validateAndSaveAdvancedFilter(e));\r\n  }\r\n\r\n  private getAllTabs() {\r\n    const tabRef = Component.getComponentRef('Tab');\r\n    if (tabRef) {\r\n      const tabsElement = $$(this.root).findAll('.' + Component.computeCssClassName(tabRef));\r\n      return _.map(tabsElement, (tabElement: HTMLElement) => {\r\n        let tab = <Tab>Component.get(tabElement);\r\n        return tab.options.id;\r\n      });\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  private getPreferencesBoxInputToBuild() {\r\n    return _.map(this.preferences, (filter: IResultFilterPreference) => {\r\n      return {\r\n        label: filter.caption,\r\n        tab: filter.tab,\r\n        expression: filter.expression\r\n      };\r\n    });\r\n  }\r\n\r\n  private buildCheckboxesInput() {\r\n    if (this.preferenceContainer != undefined) {\r\n      this.preferenceContainer.remove();\r\n    }\r\n    const toBuild = this.getPreferencesBoxInputToBuild();\r\n    if (Utils.isNonEmptyArray(toBuild)) {\r\n      this.preferenceContainer = $$('div', {\r\n        className: 'coveo-choices-container'\r\n      }).el;\r\n\r\n      _.each(toBuild, filterToBuild => {\r\n        const checkbox = new Checkbox((checkbox: Checkbox) => {\r\n          this.save();\r\n          const filter = this.preferences[checkbox.getValue()];\r\n\r\n          if (!this.queryController.firstQuery && !this.isFullBreadcrumbClear) {\r\n            this.fromFilterToAnalyticsEvent(filter, filter.selected ? 'selected' : 'unselected');\r\n            this.queryController.executeQuery({\r\n              closeModalBox: false\r\n            });\r\n          }\r\n        }, filterToBuild.label);\r\n        $$(checkbox.build()).addClass('coveo-choice-container');\r\n        this.preferencePanelCheckboxInput[filterToBuild.label] = checkbox;\r\n        this.preferenceContainer.appendChild(checkbox.getElement());\r\n      });\r\n\r\n      _.each($$(this.preferenceContainer).findAll('.coveo-choice-container'), (choiceContainer: HTMLElement) => {\r\n        choiceContainer.appendChild($$('div', { className: 'coveo-section coveo-section-edit-delete' }).el);\r\n      });\r\n\r\n      $$(this.container).append(this.preferenceContainer);\r\n      this.buildEditAdvancedFilter();\r\n      this.buildDeleteAdvancedFilter();\r\n      this.fromPreferencesToCheckboxInput();\r\n    }\r\n  }\r\n\r\n  private buildDeleteAdvancedFilter() {\r\n    _.each(this.preferences, filter => {\r\n      if (filter.custom) {\r\n        const deleteElement = $$(\r\n          'span',\r\n          {\r\n            className: 'coveo-delete'\r\n          },\r\n          SVGIcons.icons.checkboxHookExclusionMore\r\n        ).el;\r\n        SVGDom.addClassToSVGInContainer(deleteElement, 'coveo-delete-svg');\r\n        const filterElement = this.getFilterElementByCaption(filter.caption);\r\n        const insertInto = $$(filterElement).find('.coveo-section-edit-delete');\r\n        insertInto.appendChild(deleteElement);\r\n        $$(deleteElement).on('click', () => this.confirmDelete(filter, filterElement));\r\n      }\r\n    });\r\n  }\r\n\r\n  private buildEditAdvancedFilter() {\r\n    _.each(this.preferences, filter => {\r\n      if (filter.custom) {\r\n        const editElement = $$(\r\n          'span',\r\n          {\r\n            className: 'coveo-edit'\r\n          },\r\n          SVGIcons.icons.edit\r\n        );\r\n        SVGDom.addClassToSVGInContainer(editElement.el, 'coveo-edit-svg');\r\n        const filterElement = this.getFilterElementByCaption(filter.caption);\r\n        const insertInto = $$(filterElement).find('.coveo-section-edit-delete');\r\n        insertInto.appendChild(editElement.el);\r\n        editElement.on('click', () => this.editElement(filter, filterElement));\r\n      }\r\n    });\r\n  }\r\n\r\n  private buildBreadcrumb(filter: IResultFilterPreference): HTMLElement {\r\n    const elem = $$('span', { className: 'coveo-value' });\r\n\r\n    const caption = $$('span', { className: 'coveo-caption' });\r\n    caption.text(filter.caption);\r\n    elem.el.appendChild(caption.el);\r\n\r\n    const clear = $$('span', { className: 'coveo-clear' }, SVGIcons.icons.mainClear);\r\n    elem.el.appendChild(clear.el);\r\n\r\n    const onSelectAction = () => {\r\n      filter.selected = false;\r\n      this.fromFilterToAnalyticsEvent(filter, 'cleared from breadcrumb');\r\n      this.fromPreferencesToCheckboxInput();\r\n    };\r\n\r\n    new AccessibleButton()\r\n      .withElement(elem)\r\n      .withLabel(l('RemoveFilterOn', filter.caption))\r\n      .withSelectAction(onSelectAction)\r\n      .build();\r\n\r\n    return elem.el;\r\n  }\r\n\r\n  private confirmDelete(filter: IResultFilterPreference, filterElement: HTMLElement) {\r\n    if (confirm(l('AreYouSureDeleteFilter', filter.caption, filter.expression))) {\r\n      const isSelected = filter.selected;\r\n      this.deleteFilterPreference(filter, filterElement);\r\n      if (isSelected) {\r\n        this.fromFilterToAnalyticsEvent(filter, 'deleted');\r\n        this.queryController.executeQuery({\r\n          closeModalBox: false\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private editElement(filter: IResultFilterPreference, filterElement: HTMLElement) {\r\n    const oldCaption = this.preferences[filter.caption].caption;\r\n    const oldTab = this.preferences[filter.caption].tab;\r\n    const oldExpression = this.preferences[filter.caption].expression;\r\n    this.deleteFilterPreference(filter, filterElement);\r\n    this.openAdvancedFilterSectionOrSaveFilters();\r\n    this.populateEditSection({ tab: oldTab, caption: oldCaption, expression: oldExpression });\r\n  }\r\n\r\n  private populateEditSection(toPopulate = { tab: [''], caption: '', expression: '' }) {\r\n    this.advancedFiltersTextInputCaption.setValue(toPopulate.caption);\r\n    this.advancedFiltersTextInputExpression.setValue(toPopulate.expression);\r\n    this.advancedFiltersTabSelect.setValue(toPopulate.tab);\r\n  }\r\n\r\n  private deleteFilterPreference(filter: IResultFilterPreference, filterElement: HTMLElement) {\r\n    this.preferencePanelLocalStorage.remove(filter.caption);\r\n    delete this.preferences[filter.caption];\r\n    $$($$(filterElement).closest('.coveo-choice-container')).detach();\r\n  }\r\n\r\n  private openAdvancedFilterSectionOrSaveFilters() {\r\n    if ($$(this.advancedFiltersBuilder).hasClass('coveo-active')) {\r\n      $$($$(this.advancedFilterFormValidate).find('input[type=submit]')).trigger('click');\r\n      this.hideAdvancedFilterBuilder();\r\n    } else {\r\n      this.populateEditSection();\r\n      this.showAdvancedFilterBuilder();\r\n    }\r\n  }\r\n\r\n  private validateAndSaveAdvancedFilter(e: Event) {\r\n    e.preventDefault();\r\n    this.hideAdvancedFilterBuilder();\r\n    const caption = this.advancedFiltersTextInputCaption.getValue();\r\n    const expression = this.advancedFiltersTextInputExpression.getValue();\r\n    const tabs = this.advancedFiltersTabSelect.getValue();\r\n    this.preferences[caption] = {\r\n      caption: caption,\r\n      custom: true,\r\n      expression: expression,\r\n      tab: tabs,\r\n      selected: true\r\n    };\r\n    this.buildCheckboxesInput();\r\n    this.save();\r\n    this.queryStateModel.set(QueryStateModel.attributesEnum.t, this.getActiveTab());\r\n    this.advancedFiltersTextInputCaption.reset();\r\n    this.advancedFiltersTextInputExpression.reset();\r\n    this.advancedFiltersTabSelect.reset();\r\n    this.container.appendChild(this.advancedFiltersBuilder);\r\n    this.fromFilterToAnalyticsEvent(this.preferences[caption], 'saved');\r\n    this.queryController.executeQuery({\r\n      closeModalBox: false\r\n    });\r\n  }\r\n\r\n  private fromPreferencesToCheckboxInput() {\r\n    _.each(this.getActiveFilters(), (filter: IResultFilterPreference) => {\r\n      this.preferencePanelCheckboxInput[filter.caption].select();\r\n    });\r\n    _.each(this.getInactiveFilters(), (filter: IResultFilterPreference) => {\r\n      this.preferencePanelCheckboxInput[filter.caption].reset();\r\n    });\r\n    _.each(this.getDormantFilters(), (filter: IResultFilterPreference) => {\r\n      this.preferencePanelCheckboxInput[filter.caption].select();\r\n    });\r\n  }\r\n\r\n  private fromCheckboxInputToPreferences() {\r\n    if (this.preferencePanelCheckboxInput) {\r\n      const selecteds = _.map(\r\n        _.filter(this.preferencePanelCheckboxInput, (checkbox: Checkbox) => checkbox.isSelected()),\r\n        (selected: Checkbox) => selected.getValue()\r\n      );\r\n      _.each(this.preferences, (filter: IResultFilterPreference) => {\r\n        if (_.contains(selecteds, filter.caption)) {\r\n          filter.selected = true;\r\n        } else {\r\n          filter.selected = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private getDormantFilters() {\r\n    const activeTab = this.getActiveTab();\r\n    return _.filter(this.preferences, (filter: IResultFilterPreference) => {\r\n      return filter.selected && !this.filterIsInActiveTab(filter, activeTab);\r\n    });\r\n  }\r\n\r\n  private getActiveFilters() {\r\n    const activeTab = this.getActiveTab();\r\n    return _.filter(this.preferences, (filter: IResultFilterPreference) => {\r\n      return filter.selected && this.filterIsInActiveTab(filter, activeTab);\r\n    });\r\n  }\r\n\r\n  private getInactiveFilters() {\r\n    const activeTab = this.getActiveTab();\r\n    return _.filter(this.preferences, (filter: IResultFilterPreference) => {\r\n      return !filter.selected || !this.filterIsInActiveTab(filter, activeTab);\r\n    });\r\n  }\r\n\r\n  private getActiveTab() {\r\n    return this.queryStateModel.get(QueryStateModel.attributesEnum.t);\r\n  }\r\n\r\n  private filterIsInActiveTab(filter: IResultFilterPreference, tab: string) {\r\n    filter.tab = _.compact(filter.tab);\r\n    return _.contains(filter.tab, tab) || Utils.isEmptyArray(filter.tab);\r\n  }\r\n\r\n  private getFilterElementByCaption(caption: string): HTMLElement {\r\n    return $$(this.preferenceContainer).find(\"input[value='\" + caption + \"']\").parentElement;\r\n  }\r\n\r\n  private fromResultsFilterOptionToResultsPreferenceInterface() {\r\n    const ret: { [key: string]: IResultFilterPreference } = {};\r\n    _.each(<any>this.options.filters, (filter: { expression: string; tab?: string[]; selected?: boolean }, caption: string) => {\r\n      ret[caption] = {\r\n        expression: filter.expression,\r\n        tab: filter.tab,\r\n        selected: filter.selected ? filter.selected : false,\r\n        custom: false,\r\n        caption: caption\r\n      };\r\n    });\r\n    return ret;\r\n  }\r\n\r\n  private mergeLocalPreferencesWithStaticPreferences() {\r\n    const staticPreferences = this.fromResultsFilterOptionToResultsPreferenceInterface();\r\n    const localPreferences = this.preferencePanelLocalStorage.load();\r\n    const localPreferencesWithoutRemoved = _.filter<IResultFilterPreference>(localPreferences, preference => {\r\n      const isCustom = preference.custom;\r\n      const existsInStatic = _.find<IResultFilterPreference>(staticPreferences, staticPreference => {\r\n        return staticPreference.caption == preference.caption;\r\n      });\r\n      return isCustom || existsInStatic != undefined;\r\n    });\r\n\r\n    const localToMerge = {};\r\n    _.each(localPreferencesWithoutRemoved, (filter: IResultFilterPreference) => {\r\n      localToMerge[filter.caption] = {\r\n        expression: filter.expression,\r\n        tab: filter.tab,\r\n        selected: filter.selected,\r\n        custom: filter.custom,\r\n        caption: filter.caption\r\n      };\r\n    });\r\n    this.preferences = <{ [caption: string]: IResultFilterPreference }>Utils.extendDeep(staticPreferences, localToMerge);\r\n  }\r\n\r\n  private fromFilterToAnalyticsEvent(filter: IResultFilterPreference, type: string) {\r\n    this.usageAnalytics.logSearchEvent<IAnalyticsCustomFiltersChangeMeta>(analyticsActionCauseList.customfiltersChange, {\r\n      customFilterName: filter.caption,\r\n      customFilterExpression: filter.expression,\r\n      customFilterType: type\r\n    });\r\n  }\r\n\r\n  private enlargeModalBox() {\r\n    const modalBoxContainer = $$(document.body).find('.coveo-modal-container');\r\n    if (modalBoxContainer) {\r\n      $$(modalBoxContainer).addClass('coveo-mod-big');\r\n    }\r\n  }\r\n\r\n  private shrinkModalBox() {\r\n    const modalBoxContainer = $$(document.body).find('.coveo-modal-container');\r\n    if (modalBoxContainer) {\r\n      $$(modalBoxContainer).removeClass('coveo-mod-big');\r\n    }\r\n  }\r\n\r\n  private showAdvancedFilterBuilder() {\r\n    if (this.advancedFiltersBuilder) {\r\n      $$(this.advancedFiltersBuilder).addClass('coveo-active');\r\n      this.enlargeModalBox();\r\n    }\r\n  }\r\n\r\n  private hideAdvancedFilterBuilder() {\r\n    if (this.advancedFiltersBuilder) {\r\n      $$(this.advancedFiltersBuilder).removeClass('coveo-active');\r\n      this.shrinkModalBox();\r\n    }\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(ResultsFiltersPreferences);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultsFiltersPreferences/ResultsFiltersPreferences.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/vapor/_FormGroup.scss\n// module id = 561\n// module chunks = 23 24 55 88","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/vapor/_MultiSelect.scss\n// module id = 573\n// module chunks = 24 54 88","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_ResultsFiltersPreferences.scss\n// module id = 659\n// module chunks = 24 88"],"sourceRoot":""}