{"version":3,"sources":["Tab.min__5f3280c404a1ee75a113.js","./src/ui/ResponsiveComponents/ResponsiveComponentsUtils.ts","./src/ui/Tab/Tab.ts","./src/ui/ResponsiveComponents/ResponsiveTabs.ts"],"names":["webpackJsonpCoveo__temporary","126","module","exports","__webpack_require__","Object","defineProperty","value","shouldDrawFacetSlider","root","facetSliderElement","ResponsiveDropdownContent","isTargetInsideOpenedDropdown","this","isSmallFacetActivated","isSmallTabsActivated","hasClass","smallTabsClassName","smallFacetClassName","isSmallRecommendationActivated","smallRecommendationClassName","activateSmallTabs","addClass","deactivateSmallTabs","removeClass","activateSmallFacet","deactivateSmallFacet","activateSmallRecommendation","deactivateSmallRecommendation","ResponsiveComponentsUtils","198","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","element","options","bindings","Tab","ID","ComponentOptions","initComponentOptions","bind","onRootElement","QueryEvents","buildingQuery","args","handleBuildingQuery","InitializationEvents","afterInitialization","handleAfterInitialization","onQueryState","MODEL_EVENTS","CHANGE_ONE","QUERY_STATE_ATTRIBUTES","T","handleQueryStateChanged","AccessibleButton","withElement","withSelectAction","select","withTitle","caption","withOwner","build","render","ResponsiveTabs","init","_this","disabled","state","t","id","sort","QueryStateModel","defaultAttributes","layout","queryStateModel","setMultiple","usageAnalytics","logSearchEvent","analyticsActionCauseList","interfaceChange","interfaceChangeTo","queryController","executeQuery","isElementIncludedInTab","Assert","exists","includedTabs","splitListOfTabs","getAttribute","excludedTabs","check","length","indexOf","icon","Utils","isNonEmptyString","iconSpan","$$","el","insertBefore","firstChild","captionP","document","createElement","text","appendChild","data","isSelected","queryBuilder","tab","expression","constant","constantExpression","add","advancedExpression","enableDuplicateFiltering","pipeline","maximumAge","setEndpoint","endpoint","showAndHideAppropriateElements","set","LAYOUT","get","attributesEnum","showElements","hideElements","each","findAll","toggleAllComponentsUnder","push","one","querySuccess","elem","map","split","trim","enable","togglePossibleComponent","possibleComponent","possibleCmp","Component","undefined","disable","style","display","doExport","exportGlobally","buildStringOption","required","section","buildLocalizedStringOption","buildQueryExpressionOption","buildCustomOption","SearchEndpoint","endpoints","buildBooleanOption","defaultValue","buildNumberOption","enableResponsiveMode","dropdownHeaderLabel","Initialization","registerAutoCreateComponent","668","669","coveoRoot","ignoreNextDocumentClick","getDropdownHeaderLabel","searchInterface","SearchInterface","dropdownContent","buildDropdownContent","dropdownHeader","buildDropdownHeader","bindDropdownContentEvents","bindDropdownHeaderEvents","tabSection","find","manageTabSwapping","bindNukeEvents","initialTabOrder","tabsInTabSection","component","logger","Logger","info","ResponsiveComponentsManager","register","handleResizeEvent","needSmallMode","changeToSmallMode","changeToLargeMode","shouldAddTabsToDropdown","addTabsToDropdown","shouldRemoveTabsFromDropdown","removeTabsFromDropdown","isDropdownOpen","positionPopup","shouldAutoModeResolveToSmall","responsiveComponents","getResponsiveMode","mediumWidth","getMediumScreenWidth","ResponsiveComponents","width","isLargeFormatOverflowing","isOverflowing","emptyDropdown","cleanUpDropdown","clientWidth","currentTab","TAB_IN_DROPDOWN_HEADER_CSS_CLASS","facetDropdownHeader","i","tabIsSelected","addToDropdownIfNeeded","isDropdownEmpty","current","dropdownTabs","tabsInTabDropdown","shift","removeFromDropdownIfNeeded","fromDropdownToTabSection","unselectedTabs","filter","pop","forEach","append","virtualTabSection","cloneNode","removeChild","position","visibility","detach","scrollWidth","className","content","SVGIcons","icons","arrowDown","SVGDom","addClassToSVGInContainer","toggle","event","closeDropdown","openDropdown","type","withLabel","SMALL_INTERFACE_CLASS_NAME","contentList","dropdownClickListener","documentClickListener","on","ACTIVE_DROPDOWN_CSS_CLASS","documentElement","off","canAddTabToDropdown","TAB_IN_DROPDOWN_CSS_CLASS","list","listElement","prepend","canRemoveTabFromDropdown","parentElement","tabIsInDropdown","computeCssClassNameForType","tabElement","fadeOutFadeIn","lastTabInSection","propertyName","opacity","replaceWith","window","getComputedStyle","EventsUtils","removePrefixedEvent","swapOnSelect","addPrefixedEvent","KeyboardUtils","keypressAction","KEYBOARD","ENTER","e","relatedTarget","nuke","insertAfter","modifiers","preventOverflow","boundariesElement","lastTabInTabSection","last","computeCssClassName","l","DROPDOWN_HEADER_LABEL_DEFAULT_VALUE","tabsInSection","children","childElement","isHtmlElement","child","childHasTabCssClassName","enumerable","configurable","670"],"mappings":"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","file":"Tab.min__5f3280c404a1ee75a113.js","sourcesContent":["webpackJsonpCoveo__temporary([26],{\n\n/***/ 126:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ResponsiveDropdownContent_1 = __webpack_require__(88);\r\nvar ResponsiveComponentsUtils = /** @class */ (function () {\r\n    function ResponsiveComponentsUtils() {\r\n    }\r\n    ResponsiveComponentsUtils.shouldDrawFacetSlider = function (root, facetSliderElement) {\r\n        return ResponsiveDropdownContent_1.ResponsiveDropdownContent.isTargetInsideOpenedDropdown(facetSliderElement) || !this.isSmallFacetActivated(root);\r\n    };\r\n    ResponsiveComponentsUtils.isSmallTabsActivated = function (root) {\r\n        return root.hasClass(this.smallTabsClassName);\r\n    };\r\n    ResponsiveComponentsUtils.isSmallFacetActivated = function (root) {\r\n        return root.hasClass(this.smallFacetClassName);\r\n    };\r\n    ResponsiveComponentsUtils.isSmallRecommendationActivated = function (root) {\r\n        return root.hasClass(this.smallRecommendationClassName);\r\n    };\r\n    ResponsiveComponentsUtils.activateSmallTabs = function (root) {\r\n        root.addClass(this.smallTabsClassName);\r\n    };\r\n    ResponsiveComponentsUtils.deactivateSmallTabs = function (root) {\r\n        root.removeClass(this.smallTabsClassName);\r\n    };\r\n    ResponsiveComponentsUtils.activateSmallFacet = function (root) {\r\n        root.addClass(this.smallFacetClassName);\r\n    };\r\n    ResponsiveComponentsUtils.deactivateSmallFacet = function (root) {\r\n        root.removeClass(this.smallFacetClassName);\r\n    };\r\n    ResponsiveComponentsUtils.activateSmallRecommendation = function (root) {\r\n        root.addClass(this.smallRecommendationClassName);\r\n    };\r\n    ResponsiveComponentsUtils.deactivateSmallRecommendation = function (root) {\r\n        root.removeClass(this.smallRecommendationClassName);\r\n    };\r\n    ResponsiveComponentsUtils.smallTabsClassName = 'coveo-small-tabs';\r\n    ResponsiveComponentsUtils.smallFacetClassName = 'coveo-small-facets';\r\n    ResponsiveComponentsUtils.smallRecommendationClassName = 'coveo-small-recommendation';\r\n    return ResponsiveComponentsUtils;\r\n}());\r\nexports.ResponsiveComponentsUtils = ResponsiveComponentsUtils;\r\n\n\n/***/ }),\n\n/***/ 198:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__webpack_require__(668);\r\nvar underscore_1 = __webpack_require__(0);\r\nvar InitializationEvents_1 = __webpack_require__(17);\r\nvar QueryEvents_1 = __webpack_require__(11);\r\nvar GlobalExports_1 = __webpack_require__(3);\r\nvar Assert_1 = __webpack_require__(5);\r\nvar Model_1 = __webpack_require__(18);\r\nvar QueryStateModel_1 = __webpack_require__(13);\r\nvar SearchEndpoint_1 = __webpack_require__(50);\r\nvar AccessibleButton_1 = __webpack_require__(15);\r\nvar Dom_1 = __webpack_require__(1);\r\nvar Utils_1 = __webpack_require__(4);\r\nvar AnalyticsActionListMeta_1 = __webpack_require__(10);\r\nvar Component_1 = __webpack_require__(7);\r\nvar ComponentOptions_1 = __webpack_require__(8);\r\nvar Initialization_1 = __webpack_require__(2);\r\nvar ResponsiveTabs_1 = __webpack_require__(669);\r\n/**\r\n * The Tab component renders a widget that allows the end user to select a specific search interface.\r\n *\r\n * This component attaches itself to a `div` element. It is in charge of adding an advanced expression to the outgoing\r\n * query in order to refine the results.\r\n *\r\n * The Tab component can also hide and show different parts of the UI. For each individual component in the UI, you can\r\n * specify whether you wish to include or exclude that component when the user selects a certain Tab (see [Using Components\r\n * Only on Specific Tabs](https://docs.coveo.com/en/508/javascript-search-framework/using-components-only-on-specific-tabs)).\r\n *\r\n * **Setting a New Endpoint for a Tab:**\r\n *\r\n * A Tab can use a custom endpoint when performing a query. Of course, you need to make sure that the endpoint exists in\r\n * the array of Coveo.SearchEndpoint.endpoints (see {@link SearchEndpoint.endpoints}).\r\n *\r\n * ```\r\n * Coveo.SearchEndpoint.endpoints[\"specialEndpoint\"] = new Coveo.SearchEndpoint({\r\n *     restUri : 'https://somewhere.com/rest/search'\r\n * })\r\n *\r\n * [ ... ]\r\n *\r\n * <div class='CoveoTab' data-endpoint='specialEndpoint'></div>\r\n *\r\n * ```\r\n */\r\nvar Tab = /** @class */ (function (_super) {\r\n    __extends(Tab, _super);\r\n    /**\r\n     * Creates a new Tab. Binds on buildingQuery event as well as an event on click of the element.\r\n     * @param element The HTMLElement on which to instantiate the component. Normally a `div`.\r\n     * @param options The options for the Tab component.\r\n     * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n     * automatically resolved (with a slower execution time).\r\n     */\r\n    function Tab(element, options, bindings) {\r\n        var _this = _super.call(this, element, Tab.ID, bindings) || this;\r\n        _this.element = element;\r\n        _this.options = options;\r\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, Tab, options);\r\n        _this.bind.onRootElement(QueryEvents_1.QueryEvents.buildingQuery, function (args) { return _this.handleBuildingQuery(args); });\r\n        _this.bind.onRootElement(InitializationEvents_1.InitializationEvents.afterInitialization, function () { return _this.handleAfterInitialization(); });\r\n        _this.bind.onQueryState(Model_1.MODEL_EVENTS.CHANGE_ONE, QueryStateModel_1.QUERY_STATE_ATTRIBUTES.T, function (args) {\r\n            return _this.handleQueryStateChanged(args);\r\n        });\r\n        new AccessibleButton_1.AccessibleButton()\r\n            .withElement(element)\r\n            .withSelectAction(function () { return _this.select(); })\r\n            .withTitle(_this.options.caption)\r\n            .withOwner(_this.bind)\r\n            .build();\r\n        _this.render();\r\n        ResponsiveTabs_1.ResponsiveTabs.init(_this.root, _this, _this.options);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Selects the current Tab.\r\n     *\r\n     * Also logs the `interfaceChange` event in the usage analytics with the new current {@link Tab.options.id} as metada\r\n     * and triggers a new query.\r\n     */\r\n    Tab.prototype.select = function () {\r\n        if (!this.disabled) {\r\n            var state = {\r\n                t: this.options.id,\r\n                sort: this.options.sort || QueryStateModel_1.QueryStateModel.defaultAttributes.sort\r\n            };\r\n            if (this.options.layout) {\r\n                state.layout = this.options.layout;\r\n            }\r\n            this.queryStateModel.setMultiple(state);\r\n            this.usageAnalytics.logSearchEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.interfaceChange, {\r\n                interfaceChangeTo: this.options.id\r\n            });\r\n            this.queryController.executeQuery();\r\n        }\r\n    };\r\n    /**\r\n     * Indicates whether the HTMLElement argument is included in the Tab. *Included* elements are shown when the Tab is\r\n     * selected, whereas *excluded* elements are not.\r\n     * @param element The HTMLElement to verify.\r\n     * @returns {boolean} `true` if the HTMLElement is included in the Tab; `false` if it is excluded.\r\n     */\r\n    Tab.prototype.isElementIncludedInTab = function (element) {\r\n        Assert_1.Assert.exists(element);\r\n        var includedTabs = this.splitListOfTabs(element.getAttribute('data-tab'));\r\n        var excludedTabs = this.splitListOfTabs(element.getAttribute('data-tab-not'));\r\n        Assert_1.Assert.check(!(includedTabs.length != 0 && excludedTabs.length != 0), 'You cannot both explicitly include and exclude an element from tabs.');\r\n        return ((includedTabs.length != 0 && underscore_1.indexOf(includedTabs, this.options.id) != -1) ||\r\n            (excludedTabs.length != 0 && underscore_1.indexOf(excludedTabs, this.options.id) == -1) ||\r\n            (includedTabs.length == 0 && excludedTabs.length == 0));\r\n    };\r\n    Tab.prototype.render = function () {\r\n        var icon = this.options.icon;\r\n        if (Utils_1.Utils.isNonEmptyString(icon)) {\r\n            var iconSpan = Dom_1.$$('span').el;\r\n            Dom_1.$$(iconSpan).addClass(['coveo-icon', icon]);\r\n            this.element.insertBefore(iconSpan, this.element.firstChild);\r\n        }\r\n        var caption = this.options.caption;\r\n        if (Utils_1.Utils.isNonEmptyString(caption)) {\r\n            var captionP = document.createElement('p');\r\n            Dom_1.$$(captionP).text(caption);\r\n            this.element.appendChild(captionP);\r\n        }\r\n    };\r\n    Tab.prototype.handleBuildingQuery = function (data) {\r\n        Assert_1.Assert.exists(data);\r\n        if (!this.disabled && this.isSelected()) {\r\n            data.queryBuilder.tab = this.options.id;\r\n            if (Utils_1.Utils.isNonEmptyString(this.options.expression)) {\r\n                if (this.options.constant) {\r\n                    data.queryBuilder.constantExpression.add(this.options.expression);\r\n                }\r\n                else {\r\n                    data.queryBuilder.advancedExpression.add(this.options.expression);\r\n                }\r\n            }\r\n            if (this.options.enableDuplicateFiltering) {\r\n                data.queryBuilder.enableDuplicateFiltering = true;\r\n            }\r\n            if (this.options.pipeline != null) {\r\n                data.queryBuilder.pipeline = this.options.pipeline;\r\n            }\r\n            if (this.options.maximumAge != null) {\r\n                data.queryBuilder.maximumAge = this.options.maximumAge;\r\n            }\r\n        }\r\n    };\r\n    Tab.prototype.handleQueryStateChanged = function (data) {\r\n        Assert_1.Assert.exists(data);\r\n        if (!this.disabled && this.isSelected()) {\r\n            Dom_1.$$(this.element).addClass('coveo-selected');\r\n            this.queryController.setEndpoint(this.options.endpoint);\r\n            this.showAndHideAppropriateElements();\r\n        }\r\n        else {\r\n            Dom_1.$$(this.element).removeClass('coveo-selected');\r\n        }\r\n    };\r\n    Tab.prototype.handleAfterInitialization = function () {\r\n        if (this.isSelected() && this.options.layout) {\r\n            this.queryStateModel.set(QueryStateModel_1.QUERY_STATE_ATTRIBUTES.LAYOUT, this.options.layout);\r\n        }\r\n    };\r\n    Tab.prototype.isSelected = function () {\r\n        var activeTab = this.queryStateModel.get(QueryStateModel_1.QueryStateModel.attributesEnum.t);\r\n        return activeTab == this.options.id;\r\n    };\r\n    Tab.prototype.showAndHideAppropriateElements = function () {\r\n        var _this = this;\r\n        var showElements = [];\r\n        var hideElements = [];\r\n        underscore_1.each(Dom_1.$$(this.root).findAll('[data-tab],[data-tab-not]'), function (element) {\r\n            if (_this.isElementIncludedInTab(element)) {\r\n                _this.toggleAllComponentsUnder(element, true);\r\n                showElements.push(element);\r\n            }\r\n            else {\r\n                _this.toggleAllComponentsUnder(element, false);\r\n                hideElements.push(element);\r\n            }\r\n        });\r\n        Dom_1.$$(this.root).one(QueryEvents_1.QueryEvents.querySuccess, function () {\r\n            underscore_1.each(showElements, function (elem) { return Dom_1.$$(elem).removeClass('coveo-tab-disabled'); });\r\n            underscore_1.each(hideElements, function (elem) { return Dom_1.$$(elem).addClass('coveo-tab-disabled'); });\r\n        });\r\n    };\r\n    Tab.prototype.splitListOfTabs = function (value) {\r\n        if (Utils_1.Utils.exists(value)) {\r\n            return underscore_1.map(value.split(','), function (tab) { return Utils_1.Utils.trim(tab); });\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    };\r\n    Tab.prototype.toggleAllComponentsUnder = function (element, enable) {\r\n        Assert_1.Assert.exists(element);\r\n        var togglePossibleComponent = function (possibleComponent) {\r\n            var possibleCmp = Component_1.Component.get(possibleComponent, undefined, true);\r\n            if (possibleCmp) {\r\n                if (enable) {\r\n                    possibleCmp.enable();\r\n                }\r\n                else {\r\n                    possibleCmp.disable();\r\n                }\r\n            }\r\n        };\r\n        togglePossibleComponent(element);\r\n        underscore_1.each(Dom_1.$$(element).findAll('*'), function (el) {\r\n            togglePossibleComponent(el);\r\n        });\r\n    };\r\n    Tab.prototype.enable = function () {\r\n        _super.prototype.enable.call(this);\r\n        this.element.style.display = '';\r\n    };\r\n    Tab.prototype.disable = function () {\r\n        _super.prototype.disable.call(this);\r\n        this.element.style.display = 'none';\r\n    };\r\n    Tab.ID = 'Tab';\r\n    Tab.doExport = function () {\r\n        GlobalExports_1.exportGlobally({\r\n            Tab: Tab\r\n        });\r\n    };\r\n    /**\r\n     * The options for a Tab\r\n     * @componentOptions\r\n     */\r\n    Tab.options = {\r\n        /**\r\n         * Specifies a unique ID for the Tab.\r\n         *\r\n         * Specifying a value for this option is necessary for this component to work.\r\n         */\r\n        id: ComponentOptions_1.ComponentOptions.buildStringOption({ required: true, section: 'Common Options' }),\r\n        /**\r\n         * Specifies the caption of the Tab.\r\n         *\r\n         * Specifying a value for this option is necessary for this component to work.\r\n         */\r\n        caption: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption({ required: true, section: 'Common Options' }),\r\n        /**\r\n         * Specifies an icon to use for the Tab.\r\n         *\r\n         * @deprecated This options is mostly kept for legacy reasons. If possible, you should avoid using it.\r\n         */\r\n        icon: ComponentOptions_1.ComponentOptions.buildStringOption(),\r\n        /**\r\n         * Specifies an advanced expression or filter that the Tab should add to any outgoing query.\r\n         *\r\n         * **Example:**\r\n         *\r\n         * `@objecttype==Message`\r\n         *\r\n         * Default value is `undefined` and the Tab applies no additional expression or filter to the query.\r\n         */\r\n        expression: ComponentOptions_1.ComponentOptions.buildQueryExpressionOption({ section: 'Common Options' }),\r\n        /**\r\n         * Specifies the {@link SearchEndpoint} to point to when performing queries from within the Tab.\r\n         *\r\n         * By default, the Tab uses the \"default\" endpoint.\r\n         */\r\n        endpoint: ComponentOptions_1.ComponentOptions.buildCustomOption(function (endpoint) { return (endpoint != null ? SearchEndpoint_1.SearchEndpoint.endpoints[endpoint] : null); }),\r\n        /**\r\n         * Specifies the default sort criteria to use when selecting the Tab. A {@link Sort} component with the same\r\n         * parameter needs to be present in the search interface in order for this option to function properly.\r\n         *\r\n         * **Examples:**\r\n         *\r\n         * - `data-sort='relevancy'`\r\n         * - `data-sort='date descending'`\r\n         *\r\n         * Default value is `undefined` and the normal {@link Sort} component behavior applies.\r\n         */\r\n        sort: ComponentOptions_1.ComponentOptions.buildStringOption(),\r\n        /**\r\n         * Specifies the default layout to display when the user selects the Tab (see {@link ResultList.options.layout} and\r\n         * {@link ResultLayout}).\r\n         *\r\n         * See the {@link ValidLayout} type for the list of possible values.\r\n         *\r\n         * If not specified, it will default to 'list'.\r\n         *\r\n         * See also [Result Layouts](https://docs.coveo.com/en/360/).\r\n         *\r\n         * Default value is `undefined` and the component selects the first available layout.\r\n         */\r\n        layout: ComponentOptions_1.ComponentOptions.buildStringOption(),\r\n        /**\r\n         * Specifies whether to include the {@link Tab.options.expression} in the constant part of the query.\r\n         *\r\n         * The index specially optimizes the constant part of the query to execute faster. However, you must be careful not\r\n         * to include dynamic query expressions, otherwise the cache will lose its efficiency.\r\n         *\r\n         * Default value is `true`.\r\n         */\r\n        constant: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true, section: 'Filtering' }),\r\n        /**\r\n         * Whether to filter out duplicates, so that items resembling one another only appear once in the query results.\r\n         *\r\n         * **Notes:**\r\n         * - Two items must be at least 85% similar to one another to be considered duplicates.\r\n         * - When a pair of duplicates is found, only the higher-ranked item of the two is kept in the result set.\r\n         * - Enabling this feature can make the total result count less precise, as only the requested page of query results is submitted to duplicate filtering.\r\n         * - The default value for this option can be modified through the {@link SearchInterface} component.\r\n         */\r\n        enableDuplicateFiltering: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n        /**\r\n         * Specifies the name of the query pipeline to use for the queries when the Tab is selected.\r\n         *\r\n         * You can specify a value for this option if your index is in a Coveo Cloud organization in which pipelines have\r\n         * been created (see [Adding and Managing Query Pipelines](https://docs.coveo.com/en/1791/)).\r\n         *\r\n         * Default value is `undefined`, which means that pipeline selection conditions defined in the Coveo Cloud\r\n         * organization apply.\r\n         */\r\n        pipeline: ComponentOptions_1.ComponentOptions.buildStringOption(),\r\n        /**\r\n         * Specifies the maximum age (in milliseconds) that cached query results can have to still be usable as results\r\n         * instead of performing a new query on the index from within the Tab. The cache is located in the Coveo Search API\r\n         * (which resides between the index and the search interface).\r\n         *\r\n         * If cached results that are older than the age you specify in this option are available, a new query will be\r\n         * performed on the index anyhow.\r\n         *\r\n         * On high-volume public web sites, specifying a higher value for this option can greatly improve query response\r\n         * time at the cost of result freshness.\r\n         *\r\n         * **Note:**\r\n         *\r\n         * > It is also possible to set a maximum cache age for the entire {@link SearchInterface} rather than for a single\r\n         * > Tab (see {@link SearchInterface.options.maximumAge}).\r\n         *\r\n         * Default value is `undefined` and the Coveo Search API determines the maximum cache age. This is typically\r\n         * equivalent to 30 minutes (see [maximumAge](https://docs.coveo.com/en/1461/#RestQueryParameters-maximumAge)).\r\n         */\r\n        maximumAge: ComponentOptions_1.ComponentOptions.buildNumberOption(),\r\n        /**\r\n         * Specifies whether to enable responsive mode for tabs. Responsive mode makes overflowing tabs disappear, instead\r\n         * making them available using a dropdown button. Responsive tabs are enabled either when tabs overflow or when the\r\n         * width of the search interface becomes too small.\r\n         *\r\n         * Disabling responsive mode for one Tab also disables it for all tabs. Therefore, you only need to set this option\r\n         * to `false` on one Tab to disable responsive mode.\r\n         *\r\n         * Default value is `true`.\r\n         *\r\n         * @availablesince [October 2016 Release (v1.1550.5)](https://docs.coveo.com/en/309/#october-2016-release-v115505)\r\n         */\r\n        enableResponsiveMode: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true, section: 'ResponsiveOptions' }),\r\n        /**\r\n         * Specifies the label of the button that allows to show the hidden tabs when in responsive mode.\r\n         *\r\n         * If more than one Tab in the search interface specifies a value for this option, then the framework uses the first\r\n         * occurrence of the option.\r\n         *\r\n         * The default value is `\"More\"`.\r\n         */\r\n        dropdownHeaderLabel: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption({ section: 'ResponsiveOptions' })\r\n    };\r\n    return Tab;\r\n}(Component_1.Component));\r\nexports.Tab = Tab;\r\nInitialization_1.Initialization.registerAutoCreateComponent(Tab);\r\n\n\n/***/ }),\n\n/***/ 668:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 669:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__webpack_require__(670);\r\nvar underscore_1 = __webpack_require__(0);\r\nvar InitializationEvents_1 = __webpack_require__(17);\r\nvar Logger_1 = __webpack_require__(9);\r\nvar Strings_1 = __webpack_require__(6);\r\nvar Dom_1 = __webpack_require__(1);\r\nvar EventsUtils_1 = __webpack_require__(133);\r\nvar SVGDom_1 = __webpack_require__(16);\r\nvar SVGIcons_1 = __webpack_require__(12);\r\nvar Utils_1 = __webpack_require__(4);\r\nvar Component_1 = __webpack_require__(7);\r\nvar SearchInterface_1 = __webpack_require__(19);\r\nvar Tab_1 = __webpack_require__(198);\r\nvar ResponsiveComponents_1 = __webpack_require__(52);\r\nvar ResponsiveComponentsManager_1 = __webpack_require__(60);\r\nvar ResponsiveComponentsUtils_1 = __webpack_require__(126);\r\nvar AccessibleButton_1 = __webpack_require__(15);\r\nvar popper_js_1 = __webpack_require__(93);\r\nvar KeyboardUtils_1 = __webpack_require__(25);\r\nvar ResponsiveTabs = /** @class */ (function () {\r\n    function ResponsiveTabs(coveoRoot, ID) {\r\n        this.coveoRoot = coveoRoot;\r\n        this.ID = ID;\r\n        this.ignoreNextDocumentClick = false;\r\n        this.dropdownHeaderLabel = this.getDropdownHeaderLabel();\r\n        this.searchInterface = Component_1.Component.get(this.coveoRoot.el, SearchInterface_1.SearchInterface, false);\r\n        this.dropdownContent = this.buildDropdownContent();\r\n        this.dropdownHeader = this.buildDropdownHeader();\r\n        this.bindDropdownContentEvents();\r\n        this.bindDropdownHeaderEvents();\r\n        this.tabSection = Dom_1.$$(this.coveoRoot.find('.coveo-tab-section'));\r\n        this.manageTabSwapping();\r\n        this.bindNukeEvents();\r\n        this.initialTabOrder = this.tabsInTabSection.slice();\r\n    }\r\n    ResponsiveTabs.init = function (root, component, options) {\r\n        this.logger = new Logger_1.Logger('ResponsiveTabs');\r\n        if (!Dom_1.$$(root).find('.coveo-tab-section')) {\r\n            this.logger.info('No element with class coveo-tab-section. Responsive tabs cannot be enabled.');\r\n            return;\r\n        }\r\n        ResponsiveComponentsManager_1.ResponsiveComponentsManager.register(ResponsiveTabs, Dom_1.$$(root), Tab_1.Tab.ID, component, options);\r\n    };\r\n    ResponsiveTabs.prototype.handleResizeEvent = function () {\r\n        if (this.needSmallMode() && !ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.isSmallTabsActivated(this.coveoRoot)) {\r\n            this.changeToSmallMode();\r\n        }\r\n        else if (!this.needSmallMode() && ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.isSmallTabsActivated(this.coveoRoot)) {\r\n            this.changeToLargeMode();\r\n        }\r\n        if (this.shouldAddTabsToDropdown()) {\r\n            this.addTabsToDropdown();\r\n        }\r\n        else if (this.shouldRemoveTabsFromDropdown()) {\r\n            this.removeTabsFromDropdown();\r\n        }\r\n        if (this.isDropdownOpen()) {\r\n            this.positionPopup();\r\n        }\r\n    };\r\n    ResponsiveTabs.prototype.needSmallMode = function () {\r\n        // Ignore everything if the responsiveMode is not auto.\r\n        if (!this.searchInterface) {\r\n            return this.shouldAutoModeResolveToSmall();\r\n        }\r\n        switch (this.searchInterface.responsiveComponents.getResponsiveMode()) {\r\n            case 'small':\r\n            case 'medium':\r\n                return true;\r\n            case 'auto':\r\n            default:\r\n                return this.shouldAutoModeResolveToSmall();\r\n        }\r\n    };\r\n    ResponsiveTabs.prototype.shouldAutoModeResolveToSmall = function () {\r\n        var mediumWidth = this.searchInterface\r\n            ? this.searchInterface.responsiveComponents.getMediumScreenWidth()\r\n            : new ResponsiveComponents_1.ResponsiveComponents().getMediumScreenWidth();\r\n        if (this.coveoRoot.width() <= mediumWidth) {\r\n            return true;\r\n        }\r\n        else if (!ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.isSmallTabsActivated(this.coveoRoot)) {\r\n            return this.isOverflowing(this.tabSection.el);\r\n        }\r\n        else {\r\n            return this.isLargeFormatOverflowing();\r\n        }\r\n    };\r\n    ResponsiveTabs.prototype.changeToSmallMode = function () {\r\n        ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.activateSmallTabs(this.coveoRoot);\r\n    };\r\n    ResponsiveTabs.prototype.changeToLargeMode = function () {\r\n        this.emptyDropdown();\r\n        this.cleanUpDropdown();\r\n        ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.deactivateSmallTabs(this.coveoRoot);\r\n    };\r\n    ResponsiveTabs.prototype.shouldAddTabsToDropdown = function () {\r\n        return ((this.isOverflowing(this.tabSection.el) || this.tabSection.el.clientWidth === 0) &&\r\n            ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.isSmallTabsActivated(this.coveoRoot));\r\n    };\r\n    ResponsiveTabs.prototype.addTabsToDropdown = function () {\r\n        var currentTab;\r\n        if (!this.tabSection.find(\".\" + ResponsiveTabs.TAB_IN_DROPDOWN_HEADER_CSS_CLASS)) {\r\n            var facetDropdownHeader = this.tabSection.find('.coveo-facet-dropdown-header');\r\n            if (facetDropdownHeader) {\r\n                this.dropdownHeader.insertBefore(facetDropdownHeader);\r\n            }\r\n            else {\r\n                this.tabSection.el.appendChild(this.dropdownHeader.el);\r\n            }\r\n        }\r\n        for (var i = this.initialTabOrder.length - 1; i >= 0; i--) {\r\n            currentTab = this.initialTabOrder[i];\r\n            if (this.tabIsSelected(currentTab) && i > 0) {\r\n                currentTab = this.initialTabOrder[--i];\r\n            }\r\n            this.addToDropdownIfNeeded(currentTab);\r\n            if (!this.isOverflowing(this.tabSection.el)) {\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    ResponsiveTabs.prototype.shouldRemoveTabsFromDropdown = function () {\r\n        return (!this.isOverflowing(this.tabSection.el) &&\r\n            this.tabSection.el.clientWidth !== 0 &&\r\n            ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.isSmallTabsActivated(this.coveoRoot) &&\r\n            !this.isDropdownEmpty());\r\n    };\r\n    ResponsiveTabs.prototype.removeTabsFromDropdown = function () {\r\n        var _this = this;\r\n        var dropdownTabs = this.tabsInTabDropdown;\r\n        var current;\r\n        while (!this.isOverflowing(this.tabSection.el) && !this.isDropdownEmpty()) {\r\n            current = dropdownTabs.shift();\r\n            this.removeFromDropdownIfNeeded(current);\r\n            this.fromDropdownToTabSection(Dom_1.$$(current));\r\n        }\r\n        if (this.isOverflowing(this.tabSection.el)) {\r\n            var unselectedTabs = underscore_1.filter(this.tabsInTabSection, function (tab) { return !_this.tabIsSelected(tab); });\r\n            this.addToDropdownIfNeeded(unselectedTabs.pop());\r\n        }\r\n        if (this.isDropdownEmpty()) {\r\n            this.cleanUpDropdown();\r\n        }\r\n    };\r\n    ResponsiveTabs.prototype.emptyDropdown = function () {\r\n        var _this = this;\r\n        if (!this.isDropdownEmpty()) {\r\n            var dropdownTabs = this.tabsInTabDropdown;\r\n            while (!this.isDropdownEmpty()) {\r\n                var current = dropdownTabs.shift();\r\n                this.removeFromDropdownIfNeeded(current);\r\n            }\r\n            this.initialTabOrder.forEach(function (tab) { return _this.tabSection.append(tab); });\r\n        }\r\n    };\r\n    ResponsiveTabs.prototype.isLargeFormatOverflowing = function () {\r\n        var virtualTabSection = Dom_1.$$(this.tabSection.el.cloneNode(true));\r\n        var dropdownHeader = virtualTabSection.find(\".\" + ResponsiveTabs.TAB_IN_DROPDOWN_HEADER_CSS_CLASS);\r\n        if (dropdownHeader) {\r\n            virtualTabSection.el.removeChild(dropdownHeader);\r\n        }\r\n        virtualTabSection.el.style.position = 'absolute';\r\n        virtualTabSection.el.style.visibility = 'hidden';\r\n        if (!this.isDropdownEmpty()) {\r\n            underscore_1.each(this.dropdownContent.findAll('.CoveoTab'), function (tab) {\r\n                virtualTabSection.el.appendChild(tab.cloneNode(true));\r\n            });\r\n        }\r\n        virtualTabSection.insertBefore(this.tabSection.el);\r\n        ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.deactivateSmallTabs(this.coveoRoot);\r\n        var isOverflowing = this.isOverflowing(this.tabSection.el) || this.isOverflowing(virtualTabSection.el);\r\n        ResponsiveComponentsUtils_1.ResponsiveComponentsUtils.activateSmallTabs(this.coveoRoot);\r\n        virtualTabSection.detach();\r\n        return isOverflowing;\r\n    };\r\n    ResponsiveTabs.prototype.isOverflowing = function (el) {\r\n        return el.clientWidth < el.scrollWidth;\r\n    };\r\n    ResponsiveTabs.prototype.buildDropdownHeader = function () {\r\n        var dropdownHeader = Dom_1.$$('a', { className: \"coveo-dropdown-header \" + ResponsiveTabs.TAB_IN_DROPDOWN_HEADER_CSS_CLASS });\r\n        var content = Dom_1.$$('p');\r\n        content.text(this.dropdownHeaderLabel);\r\n        var icon = Dom_1.$$('span', { className: 'coveo-more-tabs' }, SVGIcons_1.SVGIcons.icons.arrowDown);\r\n        SVGDom_1.SVGDom.addClassToSVGInContainer(icon.el, 'coveo-more-tabs-svg');\r\n        content.el.appendChild(icon.el);\r\n        dropdownHeader.el.appendChild(content.el);\r\n        return dropdownHeader;\r\n    };\r\n    ResponsiveTabs.prototype.bindDropdownHeaderEvents = function () {\r\n        var _this = this;\r\n        var toggle = function (event) {\r\n            if (_this.isDropdownOpen()) {\r\n                _this.closeDropdown();\r\n            }\r\n            else {\r\n                _this.openDropdown();\r\n            }\r\n            if (event.type === 'click') {\r\n                _this.ignoreNextDocumentClick = true;\r\n            }\r\n        };\r\n        new AccessibleButton_1.AccessibleButton()\r\n            .withElement(this.dropdownHeader)\r\n            .withSelectAction(toggle)\r\n            .withLabel(this.getDropdownHeaderLabel())\r\n            .build();\r\n    };\r\n    ResponsiveTabs.prototype.buildDropdownContent = function () {\r\n        var dropdownContent = Dom_1.$$('div', {\r\n            className: 'coveo-tab-list-container ' + SearchInterface_1.SearchInterface.SMALL_INTERFACE_CLASS_NAME\r\n        });\r\n        var contentList = Dom_1.$$('ol', { className: 'coveo-tab-list' });\r\n        dropdownContent.el.appendChild(contentList.el);\r\n        return dropdownContent;\r\n    };\r\n    ResponsiveTabs.prototype.bindDropdownContentEvents = function () {\r\n        var _this = this;\r\n        this.dropdownClickListener = function () {\r\n            if (_this.isDropdownOpen()) {\r\n                _this.ignoreNextDocumentClick = true;\r\n            }\r\n        };\r\n        this.documentClickListener = function (event) {\r\n            if (!_this.ignoreNextDocumentClick) {\r\n                _this.closeDropdown();\r\n            }\r\n            _this.ignoreNextDocumentClick = false;\r\n        };\r\n        Dom_1.$$(this.dropdownHeader).on('click', this.dropdownClickListener);\r\n        Dom_1.$$(this.dropdownContent).on('click', this.dropdownClickListener);\r\n    };\r\n    ResponsiveTabs.prototype.isDropdownOpen = function () {\r\n        return this.dropdownHeader.hasClass(ResponsiveTabs.ACTIVE_DROPDOWN_CSS_CLASS);\r\n    };\r\n    ResponsiveTabs.prototype.closeDropdown = function () {\r\n        Dom_1.$$(document.documentElement).off('click', this.documentClickListener);\r\n        this.dropdownContent.detach();\r\n        this.dropdownHeader.removeClass(ResponsiveTabs.ACTIVE_DROPDOWN_CSS_CLASS);\r\n    };\r\n    ResponsiveTabs.prototype.openDropdown = function () {\r\n        Dom_1.$$(document.documentElement).on('click', this.documentClickListener);\r\n        this.positionPopup();\r\n        this.dropdownHeader.addClass(ResponsiveTabs.ACTIVE_DROPDOWN_CSS_CLASS);\r\n    };\r\n    ResponsiveTabs.prototype.addToDropdownIfNeeded = function (tab) {\r\n        if (!this.canAddTabToDropdown(tab)) {\r\n            return;\r\n        }\r\n        Dom_1.$$(tab).addClass(ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n        var list = Dom_1.$$(this.dropdownContent.find('ol'));\r\n        var listElement = Dom_1.$$('li', null, tab);\r\n        list.prepend(listElement.el);\r\n    };\r\n    ResponsiveTabs.prototype.removeFromDropdownIfNeeded = function (tab) {\r\n        if (!this.canRemoveTabFromDropdown(tab)) {\r\n            return;\r\n        }\r\n        Dom_1.$$(tab).removeClass(ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n        Dom_1.$$(tab.parentElement).detach();\r\n    };\r\n    ResponsiveTabs.prototype.canAddTabToDropdown = function (tab) {\r\n        return tab && !this.tabIsInDropdown(tab) && this.dropdownHeader;\r\n    };\r\n    ResponsiveTabs.prototype.canRemoveTabFromDropdown = function (tab) {\r\n        return tab && this.tabIsInDropdown(tab) && this.dropdownContent;\r\n    };\r\n    ResponsiveTabs.prototype.cleanUpDropdown = function () {\r\n        this.dropdownHeader.removeClass(ResponsiveTabs.ACTIVE_DROPDOWN_CSS_CLASS);\r\n        this.dropdownHeader.detach();\r\n        this.dropdownContent.detach();\r\n    };\r\n    ResponsiveTabs.prototype.isDropdownEmpty = function () {\r\n        if (this.dropdownContent) {\r\n            var tabs = this.dropdownContent.findAll('.CoveoTab');\r\n            return tabs.length == 0;\r\n        }\r\n        return false;\r\n    };\r\n    ResponsiveTabs.prototype.manageTabSwapping = function () {\r\n        var _this = this;\r\n        underscore_1.each(this.coveoRoot.findAll('.' + Component_1.Component.computeCssClassNameForType(this.ID)), function (tabElement) {\r\n            var tab = Dom_1.$$(tabElement);\r\n            var fadeOutFadeIn = function (event) {\r\n                var lastTabInSection = _this.tabsInTabSection.pop();\r\n                if (event.propertyName == 'opacity') {\r\n                    if (tab.el.style.opacity == '0') {\r\n                        Dom_1.$$(lastTabInSection).addClass(ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n                        tab.replaceWith(lastTabInSection);\r\n                        tab.removeClass(ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n                        _this.fromDropdownToTabSection(tab);\r\n                        // Because of the DOM manipulation, sometimes the animation will not trigger. Accessing the computed styles makes sure\r\n                        // the animation will happen.\r\n                        window.getComputedStyle(tab.el).opacity;\r\n                        window.getComputedStyle(lastTabInSection).opacity;\r\n                        tab.el.style.opacity = lastTabInSection.style.opacity = '1';\r\n                    }\r\n                    else if (tab.el.style.opacity == '1') {\r\n                        _this.closeDropdown();\r\n                        EventsUtils_1.EventsUtils.removePrefixedEvent(tab.el, 'TransitionEnd', fadeOutFadeIn);\r\n                        _this.handleResizeEvent();\r\n                    }\r\n                }\r\n            };\r\n            var swapOnSelect = function () {\r\n                if (_this.tabIsInDropdown(tab)) {\r\n                    var lastTabInSection = _this.tabsInTabSection.pop();\r\n                    if (lastTabInSection) {\r\n                        EventsUtils_1.EventsUtils.addPrefixedEvent(tab.el, 'TransitionEnd', fadeOutFadeIn);\r\n                        tab.el.style.opacity = lastTabInSection.style.opacity = '0';\r\n                    }\r\n                }\r\n            };\r\n            tab.on('click', function () { return swapOnSelect(); });\r\n            tab.on('keyup', KeyboardUtils_1.KeyboardUtils.keypressAction(KeyboardUtils_1.KEYBOARD.ENTER, swapOnSelect));\r\n            tab.on('blur', function (e) {\r\n                if (e.relatedTarget && !_this.tabIsInDropdown(e.relatedTarget)) {\r\n                    _this.closeDropdown();\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ResponsiveTabs.prototype.bindNukeEvents = function () {\r\n        var _this = this;\r\n        Dom_1.$$(this.coveoRoot).on(InitializationEvents_1.InitializationEvents.nuke, function () {\r\n            Dom_1.$$(document.documentElement).off('click', _this.documentClickListener);\r\n        });\r\n    };\r\n    ResponsiveTabs.prototype.positionPopup = function () {\r\n        this.dropdownContent.insertAfter(this.dropdownHeader.el);\r\n        new popper_js_1.default(this.dropdownHeader.el, this.dropdownContent.el, {\r\n            modifiers: {\r\n                preventOverflow: {\r\n                    boundariesElement: this.coveoRoot.el\r\n                }\r\n            }\r\n        });\r\n    };\r\n    ResponsiveTabs.prototype.fromDropdownToTabSection = function (tab) {\r\n        var lastTabInTabSection = underscore_1.last(this.tabsInTabSection);\r\n        if (!lastTabInTabSection) {\r\n            this.tabSection.prepend(tab.el);\r\n            return;\r\n        }\r\n        var comesAfterInitialTabOrder = this.initialTabOrder.indexOf(tab.el) > this.initialTabOrder.indexOf(lastTabInTabSection);\r\n        if (comesAfterInitialTabOrder) {\r\n            tab.insertAfter(lastTabInTabSection);\r\n        }\r\n        else {\r\n            tab.insertBefore(lastTabInTabSection);\r\n        }\r\n    };\r\n    ResponsiveTabs.prototype.getDropdownHeaderLabel = function () {\r\n        var dropdownHeaderLabel;\r\n        underscore_1.each(Dom_1.$$(this.coveoRoot.find('.coveo-tab-section')).findAll('.' + Component_1.Component.computeCssClassName(Tab_1.Tab)), function (tabElement) {\r\n            var tab = Component_1.Component.get(tabElement, Tab_1.Tab);\r\n            if (!dropdownHeaderLabel && tab && tab.options.dropdownHeaderLabel) {\r\n                dropdownHeaderLabel = tab.options.dropdownHeaderLabel;\r\n            }\r\n        });\r\n        if (!dropdownHeaderLabel) {\r\n            dropdownHeaderLabel = Strings_1.l(ResponsiveTabs.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE);\r\n        }\r\n        return dropdownHeaderLabel;\r\n    };\r\n    ResponsiveTabs.prototype.tabIsSelected = function (tab) {\r\n        return Dom_1.$$(tab).hasClass('coveo-selected');\r\n    };\r\n    ResponsiveTabs.prototype.tabIsInDropdown = function (tab) {\r\n        return Dom_1.$$(tab).hasClass(ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n    };\r\n    Object.defineProperty(ResponsiveTabs.prototype, \"tabsInTabSection\", {\r\n        get: function () {\r\n            var _this = this;\r\n            var tabsInSection = [];\r\n            underscore_1.each(this.tabSection.children(), function (childElement) {\r\n                if (Utils_1.Utils.isHtmlElement(childElement)) {\r\n                    var child = Dom_1.$$(childElement);\r\n                    var childHasTabCssClassName = child.hasClass(Component_1.Component.computeCssClassNameForType(_this.ID));\r\n                    if (!_this.tabIsInDropdown(child) && childHasTabCssClassName) {\r\n                        tabsInSection.push(child.el);\r\n                    }\r\n                }\r\n            });\r\n            return tabsInSection;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ResponsiveTabs.prototype, \"tabsInTabDropdown\", {\r\n        get: function () {\r\n            if (!this.dropdownContent) {\r\n                return [];\r\n            }\r\n            return this.dropdownContent.findAll(\".\" + ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ResponsiveTabs.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE = 'More';\r\n    ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS = 'coveo-tab-dropdown';\r\n    ResponsiveTabs.TAB_IN_DROPDOWN_HEADER_CSS_CLASS = ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS + \"-header\";\r\n    ResponsiveTabs.ACTIVE_DROPDOWN_CSS_CLASS = 'coveo-dropdown-header-active';\r\n    return ResponsiveTabs;\r\n}());\r\nexports.ResponsiveTabs = ResponsiveTabs;\r\n\n\n/***/ }),\n\n/***/ 670:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// Tab.min__5f3280c404a1ee75a113.js","import { Dom } from '../../utils/Dom';\r\nimport { ResponsiveDropdownContent } from './ResponsiveDropdown/ResponsiveDropdownContent';\r\n\r\nexport class ResponsiveComponentsUtils {\r\n  private static smallTabsClassName: string = 'coveo-small-tabs';\r\n  private static smallFacetClassName: string = 'coveo-small-facets';\r\n  private static smallRecommendationClassName: string = 'coveo-small-recommendation';\r\n\r\n  static shouldDrawFacetSlider(root: Dom, facetSliderElement: Dom): boolean {\r\n    return ResponsiveDropdownContent.isTargetInsideOpenedDropdown(facetSliderElement) || !this.isSmallFacetActivated(root);\r\n  }\r\n\r\n  static isSmallTabsActivated(root: Dom): boolean {\r\n    return root.hasClass(this.smallTabsClassName);\r\n  }\r\n\r\n  static isSmallFacetActivated(root: Dom): boolean {\r\n    return root.hasClass(this.smallFacetClassName);\r\n  }\r\n\r\n  static isSmallRecommendationActivated(root: Dom): boolean {\r\n    return root.hasClass(this.smallRecommendationClassName);\r\n  }\r\n\r\n  static activateSmallTabs(root: Dom): void {\r\n    root.addClass(this.smallTabsClassName);\r\n  }\r\n\r\n  static deactivateSmallTabs(root: Dom): void {\r\n    root.removeClass(this.smallTabsClassName);\r\n  }\r\n\r\n  static activateSmallFacet(root: Dom): void {\r\n    root.addClass(this.smallFacetClassName);\r\n  }\r\n\r\n  static deactivateSmallFacet(root: Dom): void {\r\n    root.removeClass(this.smallFacetClassName);\r\n  }\r\n\r\n  static activateSmallRecommendation(root: Dom): void {\r\n    root.addClass(this.smallRecommendationClassName);\r\n  }\r\n\r\n  static deactivateSmallRecommendation(root: Dom): void {\r\n    root.removeClass(this.smallRecommendationClassName);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveComponentsUtils.ts","import 'styling/_Tab';\r\nimport { each, indexOf, map } from 'underscore';\r\nimport { InitializationEvents } from '../../events/InitializationEvents';\r\nimport { IBuildingQueryEventArgs, QueryEvents } from '../../events/QueryEvents';\r\nimport { exportGlobally } from '../../GlobalExports';\r\nimport { Assert } from '../../misc/Assert';\r\nimport { IAttributeChangedEventArg, MODEL_EVENTS } from '../../models/Model';\r\nimport { QueryStateModel, QUERY_STATE_ATTRIBUTES } from '../../models/QueryStateModel';\r\nimport { SearchEndpoint } from '../../rest/SearchEndpoint';\r\nimport { AccessibleButton } from '../../utils/AccessibleButton';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { analyticsActionCauseList, IAnalyticsInterfaceChange } from '../Analytics/AnalyticsActionListMeta';\r\nimport { Component } from '../Base/Component';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { IQueryExpression } from '../Base/IComponentOptions';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { ResponsiveTabs } from '../ResponsiveComponents/ResponsiveTabs';\r\nimport { ValidLayout } from '../ResultLayoutSelector/ValidLayout';\r\n\r\nexport interface ITabOptions {\r\n  expression?: IQueryExpression;\r\n  constant?: boolean;\r\n  id?: string;\r\n  icon?: string;\r\n  caption?: string;\r\n  sort?: string;\r\n  layout?: string;\r\n  endpoint?: SearchEndpoint;\r\n  enableDuplicateFiltering?: boolean;\r\n  pipeline?: string;\r\n  maximumAge?: number;\r\n  enableResponsiveMode?: boolean;\r\n  dropdownHeaderLabel?: string;\r\n}\r\n\r\n/**\r\n * The Tab component renders a widget that allows the end user to select a specific search interface.\r\n *\r\n * This component attaches itself to a `div` element. It is in charge of adding an advanced expression to the outgoing\r\n * query in order to refine the results.\r\n *\r\n * The Tab component can also hide and show different parts of the UI. For each individual component in the UI, you can\r\n * specify whether you wish to include or exclude that component when the user selects a certain Tab (see [Using Components\r\n * Only on Specific Tabs](https://docs.coveo.com/en/508/javascript-search-framework/using-components-only-on-specific-tabs)).\r\n *\r\n * **Setting a New Endpoint for a Tab:**\r\n *\r\n * A Tab can use a custom endpoint when performing a query. Of course, you need to make sure that the endpoint exists in\r\n * the array of Coveo.SearchEndpoint.endpoints (see {@link SearchEndpoint.endpoints}).\r\n *\r\n * ```\r\n * Coveo.SearchEndpoint.endpoints[\"specialEndpoint\"] = new Coveo.SearchEndpoint({\r\n *     restUri : 'https://somewhere.com/rest/search'\r\n * })\r\n *\r\n * [ ... ]\r\n *\r\n * <div class='CoveoTab' data-endpoint='specialEndpoint'></div>\r\n *\r\n * ```\r\n */\r\nexport class Tab extends Component {\r\n  static ID = 'Tab';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      Tab: Tab\r\n    });\r\n  };\r\n\r\n  /**\r\n   * The options for a Tab\r\n   * @componentOptions\r\n   */\r\n  static options: ITabOptions = {\r\n    /**\r\n     * Specifies a unique ID for the Tab.\r\n     *\r\n     * Specifying a value for this option is necessary for this component to work.\r\n     */\r\n    id: ComponentOptions.buildStringOption({ required: true, section: 'Common Options' }),\r\n\r\n    /**\r\n     * Specifies the caption of the Tab.\r\n     *\r\n     * Specifying a value for this option is necessary for this component to work.\r\n     */\r\n    caption: ComponentOptions.buildLocalizedStringOption({ required: true, section: 'Common Options' }),\r\n\r\n    /**\r\n     * Specifies an icon to use for the Tab.\r\n     *\r\n     * @deprecated This options is mostly kept for legacy reasons. If possible, you should avoid using it.\r\n     */\r\n    icon: ComponentOptions.buildStringOption(),\r\n\r\n    /**\r\n     * Specifies an advanced expression or filter that the Tab should add to any outgoing query.\r\n     *\r\n     * **Example:**\r\n     *\r\n     * `@objecttype==Message`\r\n     *\r\n     * Default value is `undefined` and the Tab applies no additional expression or filter to the query.\r\n     */\r\n    expression: ComponentOptions.buildQueryExpressionOption({ section: 'Common Options' }),\r\n\r\n    /**\r\n     * Specifies the {@link SearchEndpoint} to point to when performing queries from within the Tab.\r\n     *\r\n     * By default, the Tab uses the \"default\" endpoint.\r\n     */\r\n    endpoint: ComponentOptions.buildCustomOption(endpoint => (endpoint != null ? SearchEndpoint.endpoints[endpoint] : null)),\r\n\r\n    /**\r\n     * Specifies the default sort criteria to use when selecting the Tab. A {@link Sort} component with the same\r\n     * parameter needs to be present in the search interface in order for this option to function properly.\r\n     *\r\n     * **Examples:**\r\n     *\r\n     * - `data-sort='relevancy'`\r\n     * - `data-sort='date descending'`\r\n     *\r\n     * Default value is `undefined` and the normal {@link Sort} component behavior applies.\r\n     */\r\n    sort: ComponentOptions.buildStringOption(),\r\n\r\n    /**\r\n     * Specifies the default layout to display when the user selects the Tab (see {@link ResultList.options.layout} and\r\n     * {@link ResultLayout}).\r\n     *\r\n     * See the {@link ValidLayout} type for the list of possible values.\r\n     *\r\n     * If not specified, it will default to 'list'.\r\n     *\r\n     * See also [Result Layouts](https://docs.coveo.com/en/360/).\r\n     *\r\n     * Default value is `undefined` and the component selects the first available layout.\r\n     */\r\n    layout: ComponentOptions.buildStringOption<ValidLayout>(),\r\n\r\n    /**\r\n     * Specifies whether to include the {@link Tab.options.expression} in the constant part of the query.\r\n     *\r\n     * The index specially optimizes the constant part of the query to execute faster. However, you must be careful not\r\n     * to include dynamic query expressions, otherwise the cache will lose its efficiency.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    constant: ComponentOptions.buildBooleanOption({ defaultValue: true, section: 'Filtering' }),\r\n\r\n    /**\r\n     * Whether to filter out duplicates, so that items resembling one another only appear once in the query results.\r\n     *\r\n     * **Notes:**\r\n     * - Two items must be at least 85% similar to one another to be considered duplicates.\r\n     * - When a pair of duplicates is found, only the higher-ranked item of the two is kept in the result set.\r\n     * - Enabling this feature can make the total result count less precise, as only the requested page of query results is submitted to duplicate filtering.\r\n     * - The default value for this option can be modified through the {@link SearchInterface} component.\r\n     */\r\n    enableDuplicateFiltering: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n\r\n    /**\r\n     * Specifies the name of the query pipeline to use for the queries when the Tab is selected.\r\n     *\r\n     * You can specify a value for this option if your index is in a Coveo Cloud organization in which pipelines have\r\n     * been created (see [Adding and Managing Query Pipelines](https://docs.coveo.com/en/1791/)).\r\n     *\r\n     * Default value is `undefined`, which means that pipeline selection conditions defined in the Coveo Cloud\r\n     * organization apply.\r\n     */\r\n    pipeline: ComponentOptions.buildStringOption(),\r\n\r\n    /**\r\n     * Specifies the maximum age (in milliseconds) that cached query results can have to still be usable as results\r\n     * instead of performing a new query on the index from within the Tab. The cache is located in the Coveo Search API\r\n     * (which resides between the index and the search interface).\r\n     *\r\n     * If cached results that are older than the age you specify in this option are available, a new query will be\r\n     * performed on the index anyhow.\r\n     *\r\n     * On high-volume public web sites, specifying a higher value for this option can greatly improve query response\r\n     * time at the cost of result freshness.\r\n     *\r\n     * **Note:**\r\n     *\r\n     * > It is also possible to set a maximum cache age for the entire {@link SearchInterface} rather than for a single\r\n     * > Tab (see {@link SearchInterface.options.maximumAge}).\r\n     *\r\n     * Default value is `undefined` and the Coveo Search API determines the maximum cache age. This is typically\r\n     * equivalent to 30 minutes (see [maximumAge](https://docs.coveo.com/en/1461/#RestQueryParameters-maximumAge)).\r\n     */\r\n    maximumAge: ComponentOptions.buildNumberOption(),\r\n\r\n    /**\r\n     * Specifies whether to enable responsive mode for tabs. Responsive mode makes overflowing tabs disappear, instead\r\n     * making them available using a dropdown button. Responsive tabs are enabled either when tabs overflow or when the\r\n     * width of the search interface becomes too small.\r\n     *\r\n     * Disabling responsive mode for one Tab also disables it for all tabs. Therefore, you only need to set this option\r\n     * to `false` on one Tab to disable responsive mode.\r\n     *\r\n     * Default value is `true`.\r\n     *\r\n     * @availablesince [October 2016 Release (v1.1550.5)](https://docs.coveo.com/en/309/#october-2016-release-v115505)\r\n     */\r\n    enableResponsiveMode: ComponentOptions.buildBooleanOption({ defaultValue: true, section: 'ResponsiveOptions' }),\r\n\r\n    /**\r\n     * Specifies the label of the button that allows to show the hidden tabs when in responsive mode.\r\n     *\r\n     * If more than one Tab in the search interface specifies a value for this option, then the framework uses the first\r\n     * occurrence of the option.\r\n     *\r\n     * The default value is `\"More\"`.\r\n     */\r\n    dropdownHeaderLabel: ComponentOptions.buildLocalizedStringOption({ section: 'ResponsiveOptions' })\r\n  };\r\n\r\n  /**\r\n   * Creates a new Tab. Binds on buildingQuery event as well as an event on click of the element.\r\n   * @param element The HTMLElement on which to instantiate the component. Normally a `div`.\r\n   * @param options The options for the Tab component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   */\r\n  constructor(public element: HTMLElement, public options?: ITabOptions, bindings?: IComponentBindings) {\r\n    super(element, Tab.ID, bindings);\r\n\r\n    this.options = ComponentOptions.initComponentOptions(element, Tab, options);\r\n\r\n    this.bind.onRootElement(QueryEvents.buildingQuery, (args: IBuildingQueryEventArgs) => this.handleBuildingQuery(args));\r\n    this.bind.onRootElement(InitializationEvents.afterInitialization, () => this.handleAfterInitialization());\r\n    this.bind.onQueryState(MODEL_EVENTS.CHANGE_ONE, QUERY_STATE_ATTRIBUTES.T, (args: IAttributeChangedEventArg) =>\r\n      this.handleQueryStateChanged(args)\r\n    );\r\n\r\n    new AccessibleButton()\r\n      .withElement(element)\r\n      .withSelectAction(() => this.select())\r\n      .withTitle(this.options.caption)\r\n      .withOwner(this.bind)\r\n      .build();\r\n\r\n    this.render();\r\n    ResponsiveTabs.init(this.root, this, this.options);\r\n  }\r\n\r\n  /**\r\n   * Selects the current Tab.\r\n   *\r\n   * Also logs the `interfaceChange` event in the usage analytics with the new current {@link Tab.options.id} as metada\r\n   * and triggers a new query.\r\n   */\r\n  public select() {\r\n    if (!this.disabled) {\r\n      const state = {\r\n        t: this.options.id,\r\n        sort: this.options.sort || QueryStateModel.defaultAttributes.sort\r\n      } as any;\r\n\r\n      if (this.options.layout) {\r\n        state.layout = this.options.layout;\r\n      }\r\n\r\n      this.queryStateModel.setMultiple(state);\r\n\r\n      this.usageAnalytics.logSearchEvent<IAnalyticsInterfaceChange>(analyticsActionCauseList.interfaceChange, {\r\n        interfaceChangeTo: this.options.id\r\n      });\r\n      this.queryController.executeQuery();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Indicates whether the HTMLElement argument is included in the Tab. *Included* elements are shown when the Tab is\r\n   * selected, whereas *excluded* elements are not.\r\n   * @param element The HTMLElement to verify.\r\n   * @returns {boolean} `true` if the HTMLElement is included in the Tab; `false` if it is excluded.\r\n   */\r\n  public isElementIncludedInTab(element: HTMLElement): boolean {\r\n    Assert.exists(element);\r\n\r\n    const includedTabs = this.splitListOfTabs(element.getAttribute('data-tab'));\r\n    const excludedTabs = this.splitListOfTabs(element.getAttribute('data-tab-not'));\r\n    Assert.check(\r\n      !(includedTabs.length != 0 && excludedTabs.length != 0),\r\n      'You cannot both explicitly include and exclude an element from tabs.'\r\n    );\r\n\r\n    return (\r\n      (includedTabs.length != 0 && indexOf(includedTabs, this.options.id) != -1) ||\r\n      (excludedTabs.length != 0 && indexOf(excludedTabs, this.options.id) == -1) ||\r\n      (includedTabs.length == 0 && excludedTabs.length == 0)\r\n    );\r\n  }\r\n\r\n  private render() {\r\n    const icon = this.options.icon;\r\n    if (Utils.isNonEmptyString(icon)) {\r\n      const iconSpan = $$('span').el;\r\n      $$(iconSpan).addClass(['coveo-icon', icon]);\r\n      this.element.insertBefore(iconSpan, this.element.firstChild);\r\n    }\r\n\r\n    const caption = this.options.caption;\r\n    if (Utils.isNonEmptyString(caption)) {\r\n      const captionP = document.createElement('p');\r\n      $$(captionP).text(caption);\r\n      this.element.appendChild(captionP);\r\n    }\r\n  }\r\n\r\n  protected handleBuildingQuery(data: IBuildingQueryEventArgs) {\r\n    Assert.exists(data);\r\n    if (!this.disabled && this.isSelected()) {\r\n      data.queryBuilder.tab = this.options.id;\r\n\r\n      if (Utils.isNonEmptyString(this.options.expression)) {\r\n        if (this.options.constant) {\r\n          data.queryBuilder.constantExpression.add(this.options.expression);\r\n        } else {\r\n          data.queryBuilder.advancedExpression.add(this.options.expression);\r\n        }\r\n      }\r\n\r\n      if (this.options.enableDuplicateFiltering) {\r\n        data.queryBuilder.enableDuplicateFiltering = true;\r\n      }\r\n\r\n      if (this.options.pipeline != null) {\r\n        data.queryBuilder.pipeline = this.options.pipeline;\r\n      }\r\n\r\n      if (this.options.maximumAge != null) {\r\n        data.queryBuilder.maximumAge = this.options.maximumAge;\r\n      }\r\n    }\r\n  }\r\n\r\n  private handleQueryStateChanged(data: IAttributeChangedEventArg) {\r\n    Assert.exists(data);\r\n    if (!this.disabled && this.isSelected()) {\r\n      $$(this.element).addClass('coveo-selected');\r\n      this.queryController.setEndpoint(this.options.endpoint);\r\n      this.showAndHideAppropriateElements();\r\n    } else {\r\n      $$(this.element).removeClass('coveo-selected');\r\n    }\r\n  }\r\n\r\n  private handleAfterInitialization() {\r\n    if (this.isSelected() && this.options.layout) {\r\n      this.queryStateModel.set(QUERY_STATE_ATTRIBUTES.LAYOUT, this.options.layout);\r\n    }\r\n  }\r\n\r\n  protected isSelected(): boolean {\r\n    const activeTab = this.queryStateModel.get(QueryStateModel.attributesEnum.t);\r\n    return activeTab == this.options.id;\r\n  }\r\n\r\n  private showAndHideAppropriateElements() {\r\n    const showElements = [];\r\n    const hideElements = [];\r\n\r\n    each($$(this.root).findAll('[data-tab],[data-tab-not]'), element => {\r\n      if (this.isElementIncludedInTab(element)) {\r\n        this.toggleAllComponentsUnder(element, true);\r\n        showElements.push(element);\r\n      } else {\r\n        this.toggleAllComponentsUnder(element, false);\r\n        hideElements.push(element);\r\n      }\r\n    });\r\n\r\n    $$(this.root).one(QueryEvents.querySuccess, () => {\r\n      each(showElements, elem => $$(elem).removeClass('coveo-tab-disabled'));\r\n      each(hideElements, elem => $$(elem).addClass('coveo-tab-disabled'));\r\n    });\r\n  }\r\n\r\n  private splitListOfTabs(value: string): string[] {\r\n    if (Utils.exists(value)) {\r\n      return map(value.split(','), tab => Utils.trim(tab));\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  private toggleAllComponentsUnder(element: HTMLElement, enable: boolean) {\r\n    Assert.exists(element);\r\n\r\n    const togglePossibleComponent = (possibleComponent: HTMLElement) => {\r\n      const possibleCmp = Component.get(possibleComponent, undefined, true);\r\n      if (possibleCmp) {\r\n        if (enable) {\r\n          possibleCmp.enable();\r\n        } else {\r\n          possibleCmp.disable();\r\n        }\r\n      }\r\n    };\r\n\r\n    togglePossibleComponent(element);\r\n    each($$(element).findAll('*'), el => {\r\n      togglePossibleComponent(el);\r\n    });\r\n  }\r\n\r\n  public enable() {\r\n    super.enable();\r\n    this.element.style.display = '';\r\n  }\r\n\r\n  public disable() {\r\n    super.disable();\r\n    this.element.style.display = 'none';\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(Tab);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Tab/Tab.ts","import 'styling/_ResponsiveTabs';\r\nimport { filter, each, last } from 'underscore';\r\nimport { InitializationEvents } from '../../events/InitializationEvents';\r\nimport { Logger } from '../../misc/Logger';\r\nimport { l } from '../../strings/Strings';\r\nimport { $$, Dom } from '../../utils/Dom';\r\nimport { EventsUtils } from '../../utils/EventsUtils';\r\nimport { SVGDom } from '../../utils/SVGDom';\r\nimport { SVGIcons } from '../../utils/SVGIcons';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { Component } from '../Base/Component';\r\nimport { SearchInterface } from '../SearchInterface/SearchInterface';\r\nimport { Tab } from '../Tab/Tab';\r\nimport { ResponsiveComponents } from './ResponsiveComponents';\r\nimport { IResponsiveComponent, IResponsiveComponentOptions, ResponsiveComponentsManager } from './ResponsiveComponentsManager';\r\nimport { ResponsiveComponentsUtils } from './ResponsiveComponentsUtils';\r\nimport { AccessibleButton } from '../../utils/AccessibleButton';\r\nimport Popper from 'popper.js';\r\nimport { KeyboardUtils, KEYBOARD } from '../../utils/KeyboardUtils';\r\n\r\nexport class ResponsiveTabs implements IResponsiveComponent {\r\n  private static DROPDOWN_HEADER_LABEL_DEFAULT_VALUE = 'More';\r\n  private static TAB_IN_DROPDOWN_CSS_CLASS = 'coveo-tab-dropdown';\r\n  private static TAB_IN_DROPDOWN_HEADER_CSS_CLASS = `${ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS}-header`;\r\n  private static ACTIVE_DROPDOWN_CSS_CLASS = 'coveo-dropdown-header-active';\r\n  private static logger: Logger;\r\n  private dropdownHeader: Dom;\r\n  private dropdownContent: Dom;\r\n  private tabSection: Dom;\r\n  private searchInterface: SearchInterface;\r\n  private dropdownHeaderLabel: string;\r\n  private initialTabOrder: HTMLElement[];\r\n\r\n  private documentClickListener: EventListener;\r\n  private dropdownClickListener: EventListener;\r\n  private ignoreNextDocumentClick = false;\r\n\r\n  constructor(private coveoRoot: Dom, public ID: string) {\r\n    this.dropdownHeaderLabel = this.getDropdownHeaderLabel();\r\n    this.searchInterface = <SearchInterface>Component.get(this.coveoRoot.el, SearchInterface, false);\r\n    this.dropdownContent = this.buildDropdownContent();\r\n    this.dropdownHeader = this.buildDropdownHeader();\r\n    this.bindDropdownContentEvents();\r\n    this.bindDropdownHeaderEvents();\r\n    this.tabSection = $$(<HTMLElement>this.coveoRoot.find('.coveo-tab-section'));\r\n    this.manageTabSwapping();\r\n    this.bindNukeEvents();\r\n    this.initialTabOrder = [...this.tabsInTabSection];\r\n  }\r\n\r\n  public static init(root: HTMLElement, component: Component, options: IResponsiveComponentOptions) {\r\n    this.logger = new Logger('ResponsiveTabs');\r\n    if (!$$(root).find('.coveo-tab-section')) {\r\n      this.logger.info('No element with class coveo-tab-section. Responsive tabs cannot be enabled.');\r\n      return;\r\n    }\r\n    ResponsiveComponentsManager.register(ResponsiveTabs, $$(root), Tab.ID, component, options);\r\n  }\r\n\r\n  public handleResizeEvent(): void {\r\n    if (this.needSmallMode() && !ResponsiveComponentsUtils.isSmallTabsActivated(this.coveoRoot)) {\r\n      this.changeToSmallMode();\r\n    } else if (!this.needSmallMode() && ResponsiveComponentsUtils.isSmallTabsActivated(this.coveoRoot)) {\r\n      this.changeToLargeMode();\r\n    }\r\n\r\n    if (this.shouldAddTabsToDropdown()) {\r\n      this.addTabsToDropdown();\r\n    } else if (this.shouldRemoveTabsFromDropdown()) {\r\n      this.removeTabsFromDropdown();\r\n    }\r\n\r\n    if (this.isDropdownOpen()) {\r\n      this.positionPopup();\r\n    }\r\n  }\r\n\r\n  private needSmallMode(): boolean {\r\n    // Ignore everything if the responsiveMode is not auto.\r\n    if (!this.searchInterface) {\r\n      return this.shouldAutoModeResolveToSmall();\r\n    }\r\n    switch (this.searchInterface.responsiveComponents.getResponsiveMode()) {\r\n      case 'small':\r\n      case 'medium':\r\n        return true;\r\n      case 'auto':\r\n      default:\r\n        return this.shouldAutoModeResolveToSmall();\r\n    }\r\n  }\r\n\r\n  private shouldAutoModeResolveToSmall() {\r\n    const mediumWidth = this.searchInterface\r\n      ? this.searchInterface.responsiveComponents.getMediumScreenWidth()\r\n      : new ResponsiveComponents().getMediumScreenWidth();\r\n    if (this.coveoRoot.width() <= mediumWidth) {\r\n      return true;\r\n    } else if (!ResponsiveComponentsUtils.isSmallTabsActivated(this.coveoRoot)) {\r\n      return this.isOverflowing(this.tabSection.el);\r\n    } else {\r\n      return this.isLargeFormatOverflowing();\r\n    }\r\n  }\r\n\r\n  private changeToSmallMode(): void {\r\n    ResponsiveComponentsUtils.activateSmallTabs(this.coveoRoot);\r\n  }\r\n\r\n  private changeToLargeMode(): void {\r\n    this.emptyDropdown();\r\n    this.cleanUpDropdown();\r\n    ResponsiveComponentsUtils.deactivateSmallTabs(this.coveoRoot);\r\n  }\r\n\r\n  private shouldAddTabsToDropdown(): boolean {\r\n    return (\r\n      (this.isOverflowing(this.tabSection.el) || this.tabSection.el.clientWidth === 0) &&\r\n      ResponsiveComponentsUtils.isSmallTabsActivated(this.coveoRoot)\r\n    );\r\n  }\r\n\r\n  private addTabsToDropdown(): void {\r\n    let currentTab;\r\n    if (!this.tabSection.find(`.${ResponsiveTabs.TAB_IN_DROPDOWN_HEADER_CSS_CLASS}`)) {\r\n      const facetDropdownHeader = this.tabSection.find('.coveo-facet-dropdown-header');\r\n      if (facetDropdownHeader) {\r\n        this.dropdownHeader.insertBefore(facetDropdownHeader);\r\n      } else {\r\n        this.tabSection.el.appendChild(this.dropdownHeader.el);\r\n      }\r\n    }\r\n    for (let i = this.initialTabOrder.length - 1; i >= 0; i--) {\r\n      currentTab = this.initialTabOrder[i];\r\n\r\n      if (this.tabIsSelected(currentTab) && i > 0) {\r\n        currentTab = this.initialTabOrder[--i];\r\n      }\r\n\r\n      this.addToDropdownIfNeeded(currentTab);\r\n\r\n      if (!this.isOverflowing(this.tabSection.el)) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  private shouldRemoveTabsFromDropdown(): boolean {\r\n    return (\r\n      !this.isOverflowing(this.tabSection.el) &&\r\n      this.tabSection.el.clientWidth !== 0 &&\r\n      ResponsiveComponentsUtils.isSmallTabsActivated(this.coveoRoot) &&\r\n      !this.isDropdownEmpty()\r\n    );\r\n  }\r\n\r\n  private removeTabsFromDropdown() {\r\n    const dropdownTabs = this.tabsInTabDropdown;\r\n\r\n    let current: HTMLElement;\r\n    while (!this.isOverflowing(this.tabSection.el) && !this.isDropdownEmpty()) {\r\n      current = dropdownTabs.shift();\r\n      this.removeFromDropdownIfNeeded(current);\r\n      this.fromDropdownToTabSection($$(current));\r\n    }\r\n\r\n    if (this.isOverflowing(this.tabSection.el)) {\r\n      const unselectedTabs = filter(this.tabsInTabSection, tab => !this.tabIsSelected(tab));\r\n      this.addToDropdownIfNeeded(unselectedTabs.pop());\r\n    }\r\n\r\n    if (this.isDropdownEmpty()) {\r\n      this.cleanUpDropdown();\r\n    }\r\n  }\r\n\r\n  private emptyDropdown(): void {\r\n    if (!this.isDropdownEmpty()) {\r\n      const dropdownTabs = this.tabsInTabDropdown;\r\n      while (!this.isDropdownEmpty()) {\r\n        const current = dropdownTabs.shift();\r\n        this.removeFromDropdownIfNeeded(current);\r\n      }\r\n      this.initialTabOrder.forEach(tab => this.tabSection.append(tab));\r\n    }\r\n  }\r\n\r\n  private isLargeFormatOverflowing(): boolean {\r\n    const virtualTabSection = $$(<HTMLElement>this.tabSection.el.cloneNode(true));\r\n\r\n    const dropdownHeader = virtualTabSection.find(`.${ResponsiveTabs.TAB_IN_DROPDOWN_HEADER_CSS_CLASS}`);\r\n    if (dropdownHeader) {\r\n      virtualTabSection.el.removeChild(dropdownHeader);\r\n    }\r\n\r\n    virtualTabSection.el.style.position = 'absolute';\r\n    virtualTabSection.el.style.visibility = 'hidden';\r\n\r\n    if (!this.isDropdownEmpty()) {\r\n      each(this.dropdownContent.findAll('.CoveoTab'), tab => {\r\n        virtualTabSection.el.appendChild(tab.cloneNode(true));\r\n      });\r\n    }\r\n    virtualTabSection.insertBefore(this.tabSection.el);\r\n\r\n    ResponsiveComponentsUtils.deactivateSmallTabs(this.coveoRoot);\r\n    const isOverflowing = this.isOverflowing(this.tabSection.el) || this.isOverflowing(virtualTabSection.el);\r\n    ResponsiveComponentsUtils.activateSmallTabs(this.coveoRoot);\r\n\r\n    virtualTabSection.detach();\r\n    return isOverflowing;\r\n  }\r\n\r\n  private isOverflowing(el: HTMLElement) {\r\n    return el.clientWidth < el.scrollWidth;\r\n  }\r\n\r\n  private buildDropdownHeader(): Dom {\r\n    const dropdownHeader = $$('a', { className: `coveo-dropdown-header ${ResponsiveTabs.TAB_IN_DROPDOWN_HEADER_CSS_CLASS}` });\r\n    const content = $$('p');\r\n    content.text(this.dropdownHeaderLabel);\r\n    const icon = $$('span', { className: 'coveo-more-tabs' }, SVGIcons.icons.arrowDown);\r\n    SVGDom.addClassToSVGInContainer(icon.el, 'coveo-more-tabs-svg');\r\n    content.el.appendChild(icon.el);\r\n    dropdownHeader.el.appendChild(content.el);\r\n    return dropdownHeader;\r\n  }\r\n\r\n  private bindDropdownHeaderEvents() {\r\n    const toggle = (event: Event) => {\r\n      if (this.isDropdownOpen()) {\r\n        this.closeDropdown();\r\n      } else {\r\n        this.openDropdown();\r\n      }\r\n\r\n      if (event.type === 'click') {\r\n        this.ignoreNextDocumentClick = true;\r\n      }\r\n    };\r\n    new AccessibleButton()\r\n      .withElement(this.dropdownHeader)\r\n      .withSelectAction(toggle)\r\n      .withLabel(this.getDropdownHeaderLabel())\r\n      .build();\r\n  }\r\n\r\n  private buildDropdownContent() {\r\n    const dropdownContent = $$('div', {\r\n      className: 'coveo-tab-list-container ' + SearchInterface.SMALL_INTERFACE_CLASS_NAME\r\n    });\r\n    const contentList = $$('ol', { className: 'coveo-tab-list' });\r\n    dropdownContent.el.appendChild(contentList.el);\r\n    return dropdownContent;\r\n  }\r\n\r\n  private bindDropdownContentEvents() {\r\n    this.dropdownClickListener = () => {\r\n      if (this.isDropdownOpen()) {\r\n        this.ignoreNextDocumentClick = true;\r\n      }\r\n    };\r\n\r\n    this.documentClickListener = event => {\r\n      if (!this.ignoreNextDocumentClick) {\r\n        this.closeDropdown();\r\n      }\r\n      this.ignoreNextDocumentClick = false;\r\n    };\r\n    $$(this.dropdownHeader).on('click', this.dropdownClickListener);\r\n    $$(this.dropdownContent).on('click', this.dropdownClickListener);\r\n  }\r\n\r\n  private isDropdownOpen(): boolean {\r\n    return this.dropdownHeader.hasClass(ResponsiveTabs.ACTIVE_DROPDOWN_CSS_CLASS);\r\n  }\r\n\r\n  private closeDropdown(): void {\r\n    $$(document.documentElement).off('click', this.documentClickListener);\r\n    this.dropdownContent.detach();\r\n    this.dropdownHeader.removeClass(ResponsiveTabs.ACTIVE_DROPDOWN_CSS_CLASS);\r\n  }\r\n\r\n  private openDropdown(): void {\r\n    $$(document.documentElement).on('click', this.documentClickListener);\r\n    this.positionPopup();\r\n    this.dropdownHeader.addClass(ResponsiveTabs.ACTIVE_DROPDOWN_CSS_CLASS);\r\n  }\r\n\r\n  private addToDropdownIfNeeded(tab: HTMLElement) {\r\n    if (!this.canAddTabToDropdown(tab)) {\r\n      return;\r\n    }\r\n\r\n    $$(tab).addClass(ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n    const list = $$(this.dropdownContent.find('ol'));\r\n    const listElement = $$('li', null, tab);\r\n    list.prepend(listElement.el);\r\n  }\r\n\r\n  private removeFromDropdownIfNeeded(tab: HTMLElement) {\r\n    if (!this.canRemoveTabFromDropdown(tab)) {\r\n      return;\r\n    }\r\n\r\n    $$(tab as HTMLElement).removeClass(ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n    $$(tab.parentElement).detach();\r\n  }\r\n\r\n  private canAddTabToDropdown(tab: HTMLElement) {\r\n    return tab && !this.tabIsInDropdown(tab) && this.dropdownHeader;\r\n  }\r\n\r\n  private canRemoveTabFromDropdown(tab: HTMLElement) {\r\n    return tab && this.tabIsInDropdown(tab) && this.dropdownContent;\r\n  }\r\n\r\n  private cleanUpDropdown() {\r\n    this.dropdownHeader.removeClass(ResponsiveTabs.ACTIVE_DROPDOWN_CSS_CLASS);\r\n    this.dropdownHeader.detach();\r\n    this.dropdownContent.detach();\r\n  }\r\n\r\n  private isDropdownEmpty(): boolean {\r\n    if (this.dropdownContent) {\r\n      const tabs = this.dropdownContent.findAll('.CoveoTab');\r\n      return tabs.length == 0;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private manageTabSwapping() {\r\n    each(this.coveoRoot.findAll('.' + Component.computeCssClassNameForType(this.ID)), tabElement => {\r\n      const tab = $$(tabElement);\r\n      const fadeOutFadeIn = event => {\r\n        const lastTabInSection = this.tabsInTabSection.pop();\r\n\r\n        if (event.propertyName == 'opacity') {\r\n          if (tab.el.style.opacity == '0') {\r\n            $$(lastTabInSection).addClass(ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n            tab.replaceWith(lastTabInSection);\r\n            tab.removeClass(ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n\r\n            this.fromDropdownToTabSection(tab);\r\n\r\n            // Because of the DOM manipulation, sometimes the animation will not trigger. Accessing the computed styles makes sure\r\n            // the animation will happen.\r\n            window.getComputedStyle(tab.el).opacity;\r\n            window.getComputedStyle(lastTabInSection).opacity;\r\n\r\n            tab.el.style.opacity = lastTabInSection.style.opacity = '1';\r\n          } else if (tab.el.style.opacity == '1') {\r\n            this.closeDropdown();\r\n            EventsUtils.removePrefixedEvent(tab.el, 'TransitionEnd', fadeOutFadeIn);\r\n            this.handleResizeEvent();\r\n          }\r\n        }\r\n      };\r\n\r\n      const swapOnSelect = () => {\r\n        if (this.tabIsInDropdown(tab)) {\r\n          let lastTabInSection = this.tabsInTabSection.pop();\r\n          if (lastTabInSection) {\r\n            EventsUtils.addPrefixedEvent(tab.el, 'TransitionEnd', fadeOutFadeIn);\r\n            tab.el.style.opacity = lastTabInSection.style.opacity = '0';\r\n          }\r\n        }\r\n      };\r\n\r\n      tab.on('click', () => swapOnSelect());\r\n      tab.on('keyup', KeyboardUtils.keypressAction(KEYBOARD.ENTER, swapOnSelect));\r\n      tab.on('blur', (e: FocusEvent) => {\r\n        if (e.relatedTarget && !this.tabIsInDropdown(e.relatedTarget as HTMLElement)) {\r\n          this.closeDropdown();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private bindNukeEvents() {\r\n    $$(this.coveoRoot).on(InitializationEvents.nuke, () => {\r\n      $$(document.documentElement).off('click', this.documentClickListener);\r\n    });\r\n  }\r\n\r\n  private positionPopup() {\r\n    this.dropdownContent.insertAfter(this.dropdownHeader.el);\r\n\r\n    new Popper(this.dropdownHeader.el, this.dropdownContent.el, {\r\n      modifiers: {\r\n        preventOverflow: {\r\n          boundariesElement: this.coveoRoot.el\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private fromDropdownToTabSection(tab: Dom) {\r\n    const lastTabInTabSection = last(this.tabsInTabSection);\r\n    if (!lastTabInTabSection) {\r\n      this.tabSection.prepend(tab.el);\r\n      return;\r\n    }\r\n\r\n    const comesAfterInitialTabOrder = this.initialTabOrder.indexOf(tab.el) > this.initialTabOrder.indexOf(lastTabInTabSection);\r\n    if (comesAfterInitialTabOrder) {\r\n      tab.insertAfter(lastTabInTabSection);\r\n    } else {\r\n      tab.insertBefore(lastTabInTabSection);\r\n    }\r\n  }\r\n\r\n  private getDropdownHeaderLabel() {\r\n    let dropdownHeaderLabel: string;\r\n    each($$(this.coveoRoot.find('.coveo-tab-section')).findAll('.' + Component.computeCssClassName(Tab)), tabElement => {\r\n      const tab = <Tab>Component.get(tabElement, Tab);\r\n      if (!dropdownHeaderLabel && tab && tab.options.dropdownHeaderLabel) {\r\n        dropdownHeaderLabel = tab.options.dropdownHeaderLabel;\r\n      }\r\n    });\r\n\r\n    if (!dropdownHeaderLabel) {\r\n      dropdownHeaderLabel = l(ResponsiveTabs.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE);\r\n    }\r\n\r\n    return dropdownHeaderLabel;\r\n  }\r\n\r\n  private tabIsSelected(tab: Dom | HTMLElement) {\r\n    return $$(tab as HTMLElement).hasClass('coveo-selected');\r\n  }\r\n\r\n  private tabIsInDropdown(tab: Dom | HTMLElement) {\r\n    return $$(tab as HTMLElement).hasClass(ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS);\r\n  }\r\n\r\n  private get tabsInTabSection(): HTMLElement[] {\r\n    const tabsInSection = [];\r\n    each(this.tabSection.children(), childElement => {\r\n      if (Utils.isHtmlElement(childElement)) {\r\n        const child = $$(childElement);\r\n        const childHasTabCssClassName = child.hasClass(Component.computeCssClassNameForType(this.ID));\r\n        if (!this.tabIsInDropdown(child) && childHasTabCssClassName) {\r\n          tabsInSection.push(child.el);\r\n        }\r\n      }\r\n    });\r\n    return tabsInSection;\r\n  }\r\n\r\n  private get tabsInTabDropdown(): HTMLElement[] {\r\n    if (!this.dropdownContent) {\r\n      return [];\r\n    }\r\n    return this.dropdownContent.findAll(`.${ResponsiveTabs.TAB_IN_DROPDOWN_CSS_CLASS}`);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResponsiveComponents/ResponsiveTabs.ts"],"sourceRoot":""}