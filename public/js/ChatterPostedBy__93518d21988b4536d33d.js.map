{"version":3,"sources":["./src/utils/ChatterUtils.ts","./src/ui/ChatterPostedBy/ChatterPostedBy.ts"],"names":[],"mappings":"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","file":"ChatterPostedBy__93518d21988b4536d33d.js","sourcesContent":["export class ChatterUtils {\r\n  static buildURI(objectURI: string, objectId: string, newObjectId: string) {\r\n    return objectURI.replace(objectId, newObjectId);\r\n  }\r\n\r\n  static bindClickEventToElement(element: HTMLElement, openInPrimaryTab: boolean, openInSubTab: boolean) {\r\n    return element;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ChatterUtils.ts","import { Component } from '../Base/Component';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { IResultsComponentBindings } from '../Base/ResultsComponentBindings';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { ChatterUtils } from '../../utils/ChatterUtils';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { l } from '../../strings/Strings';\r\nimport { Utils } from '../../utils/Utils';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\nexport interface IChatterPostedByOption {\r\n  enablePostedOn: boolean;\r\n  useFromInstead: boolean;\r\n  openInPrimaryTab: boolean;\r\n  openInSubTab: boolean;\r\n}\r\n\r\nexport class ChatterPostedBy extends Component {\r\n  static ID = 'ChatterPostedBy';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      ChatterPostedBy: ChatterPostedBy\r\n    });\r\n  };\r\n\r\n  static options: IChatterPostedByOption = {\r\n    enablePostedOn: ComponentOptions.buildBooleanOption({ defaultValue: true }),\r\n    useFromInstead: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n    openInPrimaryTab: ComponentOptions.buildBooleanOption({ defaultValue: false }),\r\n    openInSubTab: ComponentOptions.buildBooleanOption({ defaultValue: true })\r\n  };\r\n\r\n  static fields = ['sfcreatedbyname', 'sfcreatedbyid', 'sffeeditemid', 'sfuserid', 'sfinsertedbyid', 'sfparentid', 'sfparentname'];\r\n\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options?: IChatterPostedByOption,\r\n    public bindings?: IResultsComponentBindings,\r\n    public result?: IQueryResult\r\n  ) {\r\n    super(element, ChatterPostedBy.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, ChatterPostedBy, options);\r\n\r\n    if (Utils.getFieldValue(this.result, 'sfcreatedbyname') != null) {\r\n      let from = $$('span');\r\n      from.text(`${this.options.useFromInstead ? l('From') : l('PostedBy')} `);\r\n      $$(element).append(from.el);\r\n      $$(element).append(\r\n        this.renderLink(Utils.getFieldValue(this.result, 'sfcreatedbyname'), Utils.getFieldValue(this.result, 'sfcreatedbyid'))\r\n      );\r\n\r\n      if (\r\n        this.options.enablePostedOn &&\r\n        !Utils.isNullOrUndefined(Utils.getFieldValue(this.result, 'sfparentname')) &&\r\n        !Utils.isNullOrUndefined(Utils.getFieldValue(this.result, 'sfparentid'))\r\n      ) {\r\n        // Post on user's wall\r\n        if (\r\n          !Utils.isNullOrUndefined(Utils.getFieldValue(this.result, 'sfuserid')) &&\r\n          Utils.getFieldValue(this.result, 'sfuserid') != Utils.getFieldValue(this.result, 'sfinsertedbyid')\r\n        ) {\r\n          let onFeed = $$('span');\r\n          let content = ` ${l(\r\n            'OnFeed',\r\n            this.renderLink(Utils.getFieldValue(this.result, 'sfparentname'), Utils.getFieldValue(this.result, 'sfparentid')).outerHTML\r\n          )}`;\r\n          onFeed.el.innerHTML = content;\r\n          $$(element).append(onFeed.el);\r\n        } else if (Utils.isNullOrUndefined(Utils.getFieldValue(this.result, 'sfuserid'))) {\r\n          let onUser = $$('span');\r\n          onUser.text(` ${l('On').toLowerCase()} `);\r\n          $$(element).append(onUser.el);\r\n          $$(element).append(\r\n            this.renderLink(Utils.getFieldValue(this.result, 'sfparentname'), Utils.getFieldValue(this.result, 'sfparentid'))\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private renderLink(text: string, id: string): HTMLElement {\r\n    let link = $$('a', {\r\n      href: ChatterUtils.buildURI(this.result.clickUri, Utils.getFieldValue(this.result, 'sffeeditemid'), id)\r\n    });\r\n    link.text(text);\r\n    return ChatterUtils.bindClickEventToElement(link.el, this.options.openInPrimaryTab, this.options.openInSubTab);\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(ChatterPostedBy);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ChatterPostedBy/ChatterPostedBy.ts"],"sourceRoot":""}