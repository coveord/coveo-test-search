{"version":3,"sources":["./src/ui/CardActionBar/CardActionBar.ts","./sass/_CardActionBar.scss"],"names":[],"mappings":"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","file":"CardActionBar__1728cc16e4d2d82aa5db.js","sourcesContent":["import { Component } from '../Base/Component';\r\nimport { ComponentOptions } from '../Base/ComponentOptions';\r\nimport { IComponentBindings } from '../Base/ComponentBindings';\r\nimport { Initialization } from '../Base/Initialization';\r\nimport { IQueryResult } from '../../rest/QueryResult';\r\nimport { Assert } from '../../misc/Assert';\r\nimport { $$ } from '../../utils/Dom';\r\nimport { KeyboardUtils, KEYBOARD } from '../../utils/KeyboardUtils';\r\nimport * as _ from 'underscore';\r\nimport { exportGlobally } from '../../GlobalExports';\r\n\r\nimport 'styling/_CardActionBar';\r\nimport { SVGIcons } from '../../utils/SVGIcons';\r\nimport { SVGDom } from '../../utils/SVGDom';\r\n\r\nexport interface ICardActionBarOptions {\r\n  hidden?: boolean;\r\n  openOnMouseOver?: boolean;\r\n}\r\n\r\n/**\r\n * The `CardActionBar` component displays an action bar at the bottom of a card result (see\r\n * [Result Layouts](https://docs.coveo.com/en/360/)). It is a simple container for buttons or complementary\r\n * information.\r\n *\r\n * You should place this component at the bottom of a card result template (i.e., as the last child of the surrounding\r\n * `coveo-result-frame` div).\r\n *\r\n * See [Using the CardActionBar Component](https://docs.coveo.com/en/1349/#using-the-cardactionbar-component)\r\n */\r\nexport class CardActionBar extends Component {\r\n  static ID = 'CardActionBar';\r\n\r\n  static doExport = () => {\r\n    exportGlobally({\r\n      CardActionBar: CardActionBar\r\n    });\r\n  };\r\n\r\n  parentResult: HTMLElement;\r\n  arrowContainer: HTMLElement;\r\n  removedTabIndexElements: HTMLElement[] = [];\r\n\r\n  /**\r\n   * @componentOptions\r\n   */\r\n  static options: ICardActionBarOptions = {\r\n    /**\r\n     * Whether to hide the component by default and append a visual indicator to its parent query result.\r\n     *\r\n     * If this option is set to `true`, the component will show itself when the user clicks its parent query result.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    hidden: ComponentOptions.buildBooleanOption({ defaultValue: true }),\r\n\r\n    /**\r\n     * Whether to open the `CardActionBar`Â when the cursor hovers over it.\r\n     *\r\n     * This option is only meaningful when [`hidden`]{@link CardActionBar.options.hidden} is set to `true`.\r\n     *\r\n     * Default value is `true`.\r\n     */\r\n    openOnMouseOver: ComponentOptions.buildBooleanOption({ defaultValue: true, depend: 'hidden' })\r\n  };\r\n\r\n  /**\r\n   * Creates a new `CardActionBar` component.\r\n   * @param element The HTMLElement on which to instantiate the component.\r\n   * @param options The options for the component.\r\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\r\n   * automatically resolved (with a slower execution time).\r\n   * @param result The parent [query result]{@link IQueryResult}..\r\n   */\r\n  constructor(\r\n    public element: HTMLElement,\r\n    public options?: ICardActionBarOptions,\r\n    bindings?: IComponentBindings,\r\n    public result?: IQueryResult\r\n  ) {\r\n    super(element, CardActionBar.ID, bindings);\r\n    this.options = ComponentOptions.initComponentOptions(element, CardActionBar, options);\r\n\r\n    this.parentResult = $$(this.element).closest('CoveoResult');\r\n    Assert.check(this.parentResult !== undefined, 'ActionBar needs to be a child of a Result');\r\n\r\n    if (this.options.hidden) {\r\n      $$(this.parentResult).addClass('coveo-clickable');\r\n      this.appendArrow();\r\n      this.bindEvents();\r\n\r\n      _.forEach($$(this.element).findAll('*'), (elem: HTMLElement) => {\r\n        if (elem.hasAttribute('tabindex') && elem.getAttribute('tabindex') == '0') {\r\n          this.removedTabIndexElements.push(elem);\r\n          elem.removeAttribute('tabindex');\r\n        }\r\n      });\r\n    } else {\r\n      this.element.style.transition = 'none';\r\n      this.element.style.transform = 'none';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Shows the component.\r\n   */\r\n  public show() {\r\n    $$(this.element).addClass('coveo-opened');\r\n    _.forEach(this.removedTabIndexElements, (e: Element) => {\r\n      e.setAttribute('tabindex', '0');\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Hides the component.\r\n   */\r\n  public hide() {\r\n    $$(this.element).removeClass('coveo-opened');\r\n    _.forEach(this.removedTabIndexElements, (e: Element) => {\r\n      e.removeAttribute('tabindex');\r\n    });\r\n  }\r\n\r\n  private bindEvents() {\r\n    $$(this.parentResult).on('click', () => this.show());\r\n    $$(this.parentResult).on('mouseleave', () => this.hide());\r\n    $$(this.element).on('focusin', () => this.show());\r\n    $$(this.element).on('focusout', () => this.hide());\r\n    if (this.options.openOnMouseOver) {\r\n      $$(this.arrowContainer).on('mouseenter', () => this.show());\r\n    }\r\n  }\r\n\r\n  private appendArrow() {\r\n    this.arrowContainer = $$('div', { className: 'coveo-card-action-bar-arrow-container', tabindex: 0 }).el;\r\n    this.bind.on(\r\n      this.arrowContainer,\r\n      'keyup',\r\n      KeyboardUtils.keypressAction(KEYBOARD.ENTER, () => this.show())\r\n    );\r\n    const arrowUp = $$('span', { className: 'coveo-icon coveo-card-action-bar-arrow-icon' }, SVGIcons.icons.arrowUp);\r\n    SVGDom.addClassToSVGInContainer(arrowUp.el, 'coveo-card-action-bar-arrow-svg');\r\n    this.arrowContainer.appendChild(arrowUp.el);\r\n    this.parentResult.appendChild(this.arrowContainer);\r\n  }\r\n}\r\n\r\nInitialization.registerAutoCreateComponent(CardActionBar);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/CardActionBar/CardActionBar.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_CardActionBar.scss\n// module id = 598\n// module chunks = 74 88"],"sourceRoot":""}